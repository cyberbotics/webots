# Technical-Questions 2021

This is an archive of the `technical-questions` channel of the [Webots Discord server](https://discordapp.com/invite/nTWbN9m) for year 2021.

## January

##### RoboCoder 01/01/2021 00:01:23
I tried 3.9 and 3.7, same result both times.

##### KajalGada 01/01/2021 00:39:04
`@RoboCoder` I assume you are using Windows. What did you set your Python command in Webots preferences?

##### RoboCoder 01/01/2021 01:32:28
I tried a few things, but right now its set to "python"

##### Luftwaffel [Moderator] 01/01/2021 11:08:41
`@RoboCoder` What PATH variables did you set exactly? You should add something like this:

C:\Users\USERNAME\AppData\Local\Programs\Python\Python38

C:\Users\USERNAME\AppData\Local\Programs\Python\Python38\Scripts


Unless you are on Linux or Mac, then it looks differently.

##### RoboCoder 01/01/2021 16:51:01
Should both of those be set in one PATH variable, or in two separate ones?

##### Luftwaffel [Moderator] 01/01/2021 17:08:12
just add them beneath each other. Same variable

##### RoboCoder 01/01/2021 18:03:14
Okay. Does the variable name matter?

##### Luftwaffel [Moderator] 01/01/2021 18:03:34
you are on windows right?


You have to change the "Path" variable [https://docs.alfresco.com/4.2/tasks/fot-addpath.html](https://docs.alfresco.com/4.2/tasks/fot-addpath.html)

##### RoboCoder 01/01/2021 18:08:16
Yep, on windows. I'll try that and get back to you.


Just wondering, does the version matter? I'm on 3.7 right now.


Okay, it's working now! I restarted the computer and it solved my issue. Thank you!

##### Yang 01/02/2021 11:50:31
Hi folks, I'm new to webots, just tried out a few examples on my PC, feels great! I'm wondering whether webots accepts urdf format files and mesh files (.stl etc.)?

##### Luftwaffel [Moderator] 01/02/2021 12:37:40
`@Yang` you can directly import 3d meshes through the webots menu. In order to convert URDF to webot's PROTO format, use this:

[https://github.com/cyberbotics/urdf2webots](https://github.com/cyberbotics/urdf2webots)


I made a more detailed tutorial on how to do that:

[https://github.com/cyberbotics/urdf2webots/blob/master/docs/tutorial.md](https://github.com/cyberbotics/urdf2webots/blob/master/docs/tutorial.md)

##### Yang 01/02/2021 12:54:10
thank you Simon, I will check that out!

##### Nicolas Y 01/03/2021 14:30:49
Hi guys I'm also very new to Webots and I'm working on creating the 'Yamor Snake' but I can't figure out how to use 'Connectors' to get the pieces to stick together does anyone know how to get it done?

##### Luftwaffel [Moderator] 01/03/2021 16:23:54
`@Nicolas Y` the hierarchy should look something like this:

Robot > children  > Hingejoint > endPoint Solid > children > Hingejoint > endPoint Solid > children > Hingejoint  ...etc

##### pnaraltnsk 01/03/2021 16:25:38
Hi, I am using webots for my graduation project and I am working on the Nao robot. I am trying to add pen node to my robot to mark the robot's walking path but for some reason, the pen node doesn't write. I added pen node to my robot's leftFootSlot and exactly like in pen.wbt example. Could you please help me out with this situation? Or do you know any other ways to mark the robot's walking path?

##### Luftwaffel [Moderator] 01/03/2021 16:29:13
`@pnaraltnsk` Hi, make sure to follow the documentation: [https://cyberbotics.com/doc/reference/pen?tab-language=python](https://cyberbotics.com/doc/reference/pen?tab-language=python)

Make sure you activated the pen and that the parameters work for you. Also keep this in mind:

In order to be paintable, an object should be made up of a Solid node containing a Shape with a valid Geometry and an ImageTexture. The painted layer is applied over the texture without modifying it.

##### Nicolas Y 01/03/2021 16:30:16
`@Luftwaffel` Thanks! I'll try it now 🙂

##### PowerYdRa 01/04/2021 05:21:22
hi guys, I am new in webots

I build this arena, my question is how to detect robot outside the arena? the idea is I want to make auto-referee for this arena, so which one outside first will be lose
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/795522239646662656/unknown.png)
%end

##### Stefania Pedrazzi [Cyberbotics] 01/04/2021 06:59:01
A solid could have multiple contact point, so the `index` specifies which contact point info you want. The `index` should be included between 0 and the result of `getNumberOfContactPoints()`:

[https://www.cyberbotics.com/doc/reference/supervisor?tab-language=python#wb\_supervisor\_node\_get\_contact\_point](https://www.cyberbotics.com/doc/reference/supervisor?tab-language=python#wb_supervisor_node_get_contact_point)

Yes, the contact point can be returned only for a `Solid` (or `Robot`) node that doesn't have a direct parent `Solid` node, otherwise you will get NaN values as explained in the documentation.


The `time0to100` value is used to generate the object and compute the maximum acceleration value. So, yes, you can assume that the maximum acceleration is set only in the initialization. Given that the car is a procedural PROTO node, even if you should change the `time0to100` value, the whole robot node would be recreated and the controller will be restarted.


Hi, for your problem the best option would probably be to add a Supervisor node in your world and write a supervisor controller that monitors the status and the positions of the robots. Given that you know the size of the arena, you can get the robot position and check if it is outside:

[https://www.cyberbotics.com/doc/reference/supervisor?tab-language=python#wb\_supervisor\_node\_get\_position](https://www.cyberbotics.com/doc/reference/supervisor?tab-language=python#wb_supervisor_node_get_position)

##### PowerYdRa 01/04/2021 07:33:10
sorry to reply my own question, while waiting the answer from the other, I do some test and the answer is **Supervisor**

just add robot node and enable Supervisor in properties and make some program to get the position of the robot
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/795555408290775070/unknown.png)
%end


thanks for reply, just test and its very easy to get robot position, many thanks for your reply

##### Stefania Pedrazzi [Cyberbotics] 01/04/2021 07:37:07
You're welcome!

##### PowerYdRa 01/04/2021 07:38:02
the next is, how to make robot falling if outside from the arena

any idea how to build proper arena for sumo competition?
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/795556632985600010/unknown.png)
%end

##### Stefania Pedrazzi [Cyberbotics] 01/04/2021 07:40:02
Does your robot have Physics enabled? If yes, and if the floor `boundingObject` of  your arena corresponds to the graphical round area, then robot should automatically fall once outside.

##### PowerYdRa 01/04/2021 07:40:24
wait, check it first


this robot is e-puck, so default physics is enable, I think the problem is how I build the arena because its square floor with plane bounding, so I need to change bounding yes?

##### Stefania Pedrazzi [Cyberbotics] 01/04/2021 07:44:05
Yes, a plane in `boundingObject` has infinite size. You could use a Cylinder or a Box instead

##### PowerYdRa 01/04/2021 07:44:32
ok thanks, will try it and will give report here


wow great, thanks
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/795560824860311603/unknown.png)
%end

##### Luftwaffel [Moderator] 01/04/2021 08:24:47
`@PowerYdRa`  A very simple way to check for "falling off" is to check the height of the robots. If the robot is below the arena surface, it loses. That's like 3 lines of code 🙂

##### PowerYdRa 01/04/2021 08:58:07
yes, thats the idea, but how to show some notification in the arena (not in console) ? any suggestion?

##### Luftwaffel [Moderator] 01/04/2021 09:07:55
`from controller import Supervisor



\# disqualify height

y\_min = 0



supervisor = Supervisor()

timestep = int(supervisor.getBasicTimeStep())

robot\_1 = supervisor.getFromDef('Robot\_1')

robot\_2 = supervisor.getFromDef('Robot\_2')



root = supervisor.getRoot()

rootChildren = root.getField('children')

nNodes = rootChildren.getCount()

robotList = []

for i in range(nNodes):

    node = rootChildren.getMFNode(i)

    if node.getBaseTypeName() == 'Robot' and node.getDef() != 'referee':

        robotList.append(node)

nRobots = len(robotList)

isActive = [1] *  nRobots

print(str(nRobots) + " Robots found")





while supervisor.step(timestep) != -1:

    for i in range(nRobots):

        pos = robotList[i].getPosition()

        if pos[1] < y\_min:

            isActive[i] = 0

        if sum(isActive) <= 1:

            print('Fight over!')

            `


`@PowerYdRa` this is a little example of a more general approach of the referee. This way it does not matter how many robots you add and what their DEF is. The only thing that matters is, that the supervisor Robot has the DEF "referee"

##### PowerYdRa 01/04/2021 09:08:52
wow nice, thanks for the code, will try it

##### Luftwaffel [Moderator] 01/04/2021 09:09:11
let me know if you have questions

##### PowerYdRa 01/04/2021 09:09:24
okay, thanks for your help

##### Luftwaffel [Moderator] 01/04/2021 09:09:29
robot\_1 = supervisor.getFromDef('Robot\_1')

robot\_2 = supervisor.getFromDef('Robot\_2')



wups, these two lines are not needed

##### Olivier Michel [Cyberbotics] 01/04/2021 09:12:27
You may use supervisor labels to display notifications in the 3D view: [https://www.cyberbotics.com/doc/reference/supervisor#wb\_supervisor\_set\_label](https://www.cyberbotics.com/doc/reference/supervisor#wb_supervisor_set_label)

##### Luftwaffel [Moderator] 01/04/2021 09:13:06
ahhh that's what I was looking for :p

##### Olivier Michel [Cyberbotics] 01/04/2021 09:13:20
Or a Display device (which may be a child of your supervisor Robot): [https://www.cyberbotics.com/doc/reference/display](https://www.cyberbotics.com/doc/reference/display)

##### PowerYdRa 01/04/2021 09:14:55
noted, thanks for your reply

will try it after fix the arena view, its look weird only show white 😆

##### Luftwaffel [Moderator] 01/04/2021 09:38:20
`@PowerYdRa` added the display
> **Attachment**: [sumo\_referee.py](https://cdn.discordapp.com/attachments/565154703139405824/795586909321560084/sumo_referee.py)


even changes the color from green to red, when a robot is out 😄

##### Master.L 01/04/2021 09:47:58
Hi I have a question. I want to rotate the coordinates of the anchor. How can you do it?

##### Luftwaffel [Moderator] 01/04/2021 09:48:26
What do you mean by anchor?


you mean in a hingejoint?

##### Master.L 01/04/2021 09:49:34
I want to rotate the anchor in the joint parameters of the hinge joint.

##### Luftwaffel [Moderator] 01/04/2021 09:50:02
it is relative to the parent


so you need to change the parent orientation, or add a transform node inbetween

##### Master.L 01/04/2021 09:50:53
I want to add a joint at a specific location. But I can't hold the axis of rotation in the direction I want.


Where should I add the transform node?

##### Luftwaffel [Moderator] 01/04/2021 09:52:26
The easiest solution would be to position the hingejoint with a parent transform node.


Or you position the location with the anchor, and change the axis value. but this will be less intuitive, as the axis wont be along either the x, y or z axis any more

##### Master.L 01/04/2021 10:34:14
Thank you `@Luftwaffel`. Thanks to that, the problem was solved.

##### PowerYdRa 01/04/2021 10:53:21
auto referee for sumo competition
> **Attachment**: [sumo\_robot.mp4](https://cdn.discordapp.com/attachments/565154703139405824/795605787815968768/sumo_robot.mp4)


forget to give auto stop simulation, 😀

##### yash 01/04/2021 11:02:42
> A solid could have multiple contact point, so the `index` specifies which contact point info you want. The `index` should be included between 0 and the result of `getNumberOfContactPoints()`:

> [https://www.cyberbotics.com/doc/reference/supervisor?tab-language=python#wb\_supervisor\_node\_get\_contact\_point](https://www.cyberbotics.com/doc/reference/supervisor?tab-language=python#wb_supervisor_node_get_contact_point)

> Yes, the contact point can be returned only for a `Solid` (or `Robot`) node that doesn't have a direct parent `Solid` node, otherwise you will get NaN values as explained in the documentation.

@Stefania Pedrazzi#5404  understood , but for example a two finger gripper to grasp an object , so I will have multiple contact points, and I get them by specifying the index , then how can I identify through this index that which solids is in contact !?

##### Stefania Pedrazzi [Cyberbotics] 01/04/2021 12:25:03
You cannot get information about the other solid which is in contact with the current node from the Supervisor API. If you need this advanced information, then you should implement a physics plugin and retrieve this information from the `webots_physics_collide` callback function:

[https://www.cyberbotics.com/doc/reference/physics-plugin?tab-language=python](https://www.cyberbotics.com/doc/reference/physics-plugin?tab-language=python)

However, if you just need to check if point belongs to the contact between the two finger, then there are maybe other simpler solutions, for example to compare the returned contact points of finger 1 and finger 2.

##### yash 01/04/2021 12:48:17
Alright understood , just one more thing , we have to specify a node to use the function  -

def getNumberofContactpoints() , how to do that?

##### Stefania Pedrazzi [Cyberbotics] 01/04/2021 12:53:05
There are many different ways to retrieve a node, here is the link to the documentation:

[https://www.cyberbotics.com/doc/reference/supervisor?tab-language=python#wb\_supervisor\_node\_get\_from\_def](https://www.cyberbotics.com/doc/reference/supervisor?tab-language=python#wb_supervisor_node_get_from_def) (and all the other functions in this section)

[https://www.cyberbotics.com/doc/reference/supervisor?tab-language=python#wb\_supervisor\_field\_get\_mf\_node](https://www.cyberbotics.com/doc/reference/supervisor?tab-language=python#wb_supervisor_field_get_mf_node)

[https://www.cyberbotics.com/doc/reference/supervisor?tab-language=python#wb\_supervisor\_field\_get\_mf\_node](https://www.cyberbotics.com/doc/reference/supervisor?tab-language=python#wb_supervisor_field_get_mf_node)

You can find an example in the sample simulation:

[https://www.cyberbotics.com/doc/guide/samples-devices#supervisor-wbt](https://www.cyberbotics.com/doc/guide/samples-devices#supervisor-wbt)

##### PowerYdRa 01/04/2021 13:45:59
can webots save the world with lock mode? I mean object in the world can't be replace, add or remove until we insert some password or passcode?

##### yash 01/04/2021 13:46:05
> There are many different ways to retrieve a node, here is the link to the documentation:

> [https://www.cyberbotics.com/doc/reference/supervisor?tab-language=python#wb\_supervisor\_node\_get\_from\_def](https://www.cyberbotics.com/doc/reference/supervisor?tab-language=python#wb_supervisor_node_get_from_def) (and all the other functions in this section)

> [https://www.cyberbotics.com/doc/reference/supervisor?tab-language=python#wb\_supervisor\_field\_get\_mf\_node](https://www.cyberbotics.com/doc/reference/supervisor?tab-language=python#wb_supervisor_field_get_mf_node)

> [https://www.cyberbotics.com/doc/reference/supervisor?tab-language=python#wb\_supervisor\_field\_get\_mf\_node](https://www.cyberbotics.com/doc/reference/supervisor?tab-language=python#wb_supervisor_field_get_mf_node)

> You can find an example in the sample simulation:

> [https://www.cyberbotics.com/doc/guide/samples-devices#supervisor-wbt](https://www.cyberbotics.com/doc/guide/samples-devices#supervisor-wbt)

`@Stefania Pedrazzi`  thanks a lot !

##### PowerYdRa 01/04/2021 13:50:34
this is because, I want to share the world to student, so they cant change everything except coding the robot only

##### Darko Lukić [Cyberbotics] 01/04/2021 14:02:48
`@PowerYdRa` Something like that is not possible from Webots. It should be handled by your OS. For example, you can set the world file permissions to read-only mode, so only the administrator can edit it.

##### PowerYdRa 01/04/2021 14:04:29
if I setup server like in this tutorial [https://cyberbotics.com/doc/guide/web-simulation?tab-language=python](https://cyberbotics.com/doc/guide/web-simulation?tab-language=python)

can other people do some programming for robot?

##### Darko Lukić [Cyberbotics] 01/04/2021 14:05:48
Yes, in that case it would be similar to:

[https://robotbenchmark.net/](https://robotbenchmark.net/)

##### Luftwaffel [Moderator] 01/04/2021 14:15:39
`@PowerYdRa` you can have them export their robot as a .wbo file and give you their controller as well


you can then load them into your world

##### yash 01/04/2021 14:41:58
I have set  SUPERVISOR field to TRUE, so to use  .getDevice() functions for sensors and motors ,  will robot.getDevice() be applicable ?

##### Nicolas Y 01/04/2021 15:23:14
`@Luftwaffel` Hi Simon, thanks for you're help earlier but I can't seem to figure out how to 'bound' them so that all eight 'Yamors' move as one bigger whole

##### Stefania Pedrazzi [Cyberbotics] 01/04/2021 15:32:42
Yes

##### Luftwaffel [Moderator] 01/04/2021 15:32:52
You have to put a "Robot" node as your base node `@Nicolas Y`

##### Nicolas Y 01/04/2021 15:33:01
I did

##### Luftwaffel [Moderator] 01/04/2021 15:33:13
and add motors in the device section of the hingejoints


what exactly is your problem?

##### Nicolas Y 01/04/2021 15:35:06
I'm not sure how to get the components to stick
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/795676689534812170/unknown.png)
%end

##### Luftwaffel [Moderator] 01/04/2021 15:35:37
Post your world file here


one thing I can see from the screenshot is, that you have not added JointParameters


double click on them and add a Parameter node


The individual Solids also need a physics node and a bounding Geometry

##### Nicolas Y 01/04/2021 15:40:17
This is my world file
> **Attachment**: [YamorSnake1.wbt](https://cdn.discordapp.com/attachments/565154703139405824/795677996596985856/YamorSnake1.wbt)

##### Luftwaffel [Moderator] 01/04/2021 15:41:45
ohhh


you added all the segments as children of the robot


you have to put each next joint into the children node of the Solid before

##### Nicolas Y 01/04/2021 15:42:32
ohhh


I'll try that now

##### Luftwaffel [Moderator] 01/04/2021 15:43:01
you can add boundingObject and physics by simply doubleclicking it


ohh wait, all the Yamor are individual robots?

##### Nicolas Y 01/04/2021 15:43:34
yes

##### Luftwaffel [Moderator] 01/04/2021 15:43:55
are they supposed to be individually controlled?

##### Nicolas Y 01/04/2021 15:44:09
no I want them to work as one

##### Luftwaffel [Moderator] 01/04/2021 15:44:09
Because I'm not sure about a chain of robot nodes

##### Nicolas Y 01/04/2021 15:44:37
oh?

##### Luftwaffel [Moderator] 01/04/2021 15:45:43
Perhaps the devs know the best solution for that. I'm not sure about Robots containing other Robots

##### Nicolas Y 01/04/2021 15:47:03
oh


that complicates things

##### Luftwaffel [Moderator] 01/04/2021 15:48:34
`@Olivier Michel` How does a hierarchy of robots work? Do the child robots act as devices if they don't have a controller assigned?

##### Olivier Michel [Cyberbotics] 01/04/2021 15:49:23
No, a robot can access only the devices it contains. If a robot contains another robot, the devices of the child robot are not available to the parent robot.

##### Luftwaffel [Moderator] 01/04/2021 15:50:36
`@Nicolas Y` I think you are supposed to add one Yamor, then doubleclick on 'extensionSlot' and add another

##### Nicolas Y 01/04/2021 15:51:22
`@Olivier Michel` in which case how can one replicate this?
%figure
![yamor.png](https://cdn.discordapp.com/attachments/565154703139405824/795680785843748954/yamor.png)
%end

##### Olivier Michel [Cyberbotics] 01/04/2021 15:57:41
In this example (included in Webots), each module is an independent robot (there is no hierarchy).


Robots attach to each other with a Connector node.

##### Nicolas Y 01/04/2021 15:59:55
`@Olivier Michel` okay thanks I'll try that

##### Olivier Michel [Cyberbotics] 01/04/2021 16:17:39
I would recommend you to start from the yamor demo and modify it bit-by-bit to ensure you are not breaking anything.

##### Nicolas Y 01/04/2021 16:33:35
`@Olivier Michel` sorry but despite checking the website I can't seem to figure out how to use the 'Connector' node to Combine the two 'Yamor' nodes

##### Olivier Michel [Cyberbotics] 01/04/2021 16:34:45
I would recommend you to open the world file in a text  editor.


Yes, in the scene tree of Webots, but it may be easier to edit from a text editor (but this is a question of personal preferences).

##### pnaraltnsk 01/04/2021 20:28:39
Hi, I followed the documentation and checked everything else. Everything looks fine and the pen should have been working but it didn't. I am still struggling to find what's wrong.

##### TerryWr1st 01/05/2021 00:19:20
Hi all, new to this channel. I'm developing my thesis in Webots, which consists of a number of epucks at the start of the simulation. During runtime, I then need to spawn additional epucks and delete the old epucks which have served their purpose in the simulation. Is this possible in Webots? And is it achieved through a supervisor function, or some other method?

##### DDaniel [Cyberbotics] 01/05/2021 00:47:52
Yes you can do it using the supervisor, you can add and remove the nodes of the robots from the scene tree: [https://cyberbotics.com/doc/reference/supervisor#wb\_supervisor\_field\_import\_mf\_node\_from\_string](https://cyberbotics.com/doc/reference/supervisor#wb_supervisor_field_import_mf_node_from_string)

##### TerryWr1st 01/05/2021 00:50:29
Ah ok, brilliant, thank you. Will take a look.

##### mayank.kishore 01/05/2021 03:35:29
Has anyone successfully implemented RRT for a robot to get to a waypoint?

##### Alessia Valle 01/05/2021 08:54:35
Hi, I'm working on my Master Thesis and I need your help if possible. I have imported my four-wheeled robot CAD model into webots and I need to interface it with ROS (not ROS2) to implement SLAM algorithm. The robot is equipped with a Lidar sensor. I have gone through webots and ROS documentation but I am still stuck.

I have seen that to use slam\_gmapping, my mobile robot needs to provide odometry data and I need to publish two different transforms, base\_laser->base\_link and base\_link->odom. Since I am novice to ROS and I have no experience in interfacing it with webots, here are my questions:

- how to make my robot publish its odometry? my idea is to use Position Sensors, but I don't know how to turn the values from the position sensors into the standard nav\_msgs/Odometry used in ROS. I think I am missing some steps.

- since I need to publish transforms of odom, base\_link and base\_laser to use with gmapping, do I need to create the URDF of my robot?

Thank you in advance

##### Master.L 01/05/2021 09:11:28
Excuse me, I have a question.

I am implementing a delta robot model in webots.

There is an upper leg that moves by a hinge joint and a lower leg that is connected to the upper leg by a ball joint.

Since the hinge joint is moved after starting the simulation, the ball joint continues to rotate and the position value increases. Therefore, the part connected to the ball joint continues to rotate. How can I fix it?

##### Luftwaffel [Moderator] 01/05/2021 09:15:59
`@Alessia Valle` a Position sensor measures the angle of a joint / motor. What you need is the Pose

[http://docs.ros.org/en/melodic/api/nav\_msgs/html/msg/Odometry.html](http://docs.ros.org/en/melodic/api/nav_msgs/html/msg/Odometry.html)


this is the nav\_msgs definition

##### Darko Lukić [Cyberbotics] 01/05/2021 09:16:39
Hello `@Alessia Valle`,

- For odometry, see the example here: [https://github.com/cyberbotics/webots\_ros2/blob/9682e06932929ea3bfab5a6a826f6fe67471aef6/webots\_ros2\_core/webots\_ros2\_core/webots\_differential\_drive\_node.py#L128-L197](https://github.com/cyberbotics/webots_ros2/blob/9682e06932929ea3bfab5a6a826f6fe67471aef6/webots_ros2_core/webots_ros2_core/webots_differential_drive_node.py#L128-L197)

(it is for ROS2 but there is almost no difference for ROS)

- You don't have create URDF to publish transforms. If your model is simple you can publish them manually, see an example for a physical robot:

[https://github.com/cyberbotics/epuck\_ros2/blob/master/epuck\_ros2\_driver/src/driver.cpp#L167-L232](https://github.com/cyberbotics/epuck_ros2/blob/master/epuck_ros2_driver/src/driver.cpp#L167-L232)

(If you need URDF you can use [https://cyberbotics.com/doc/reference/robot#wb\_robot\_get\_urdf](https://cyberbotics.com/doc/reference/robot#wb_robot_get_urdf))

##### Luftwaffel [Moderator] 01/05/2021 09:21:38
is the ball joint passive? If so. you have to add friction


so expand the balljoint and add a "JointParameters" node


there you can edit those values

##### yash 01/05/2021 09:34:26
I am getting some weird results when I play the simulation.
> **Attachment**: [test01.mp4](https://cdn.discordapp.com/attachments/565154703139405824/795948316768075806/test01.mp4)


what could be the issue ?

##### Luftwaffel [Moderator] 01/05/2021 09:36:45
can you click on your robot and show a screenshot (with the white lines of the bounding box)


My first guess would be, that you used the visual mesh data as collision. And your shapes are not convex


Also it seems like it might be starting partially in the floor

##### yash 01/05/2021 09:39:27
this the bounding box
%figure
![Screenshot_from_2021-01-05_15-08-34.png](https://cdn.discordapp.com/attachments/565154703139405824/795949578347085854/Screenshot_from_2021-01-05_15-08-34.png)
%end


how could I rectify the problem ?

##### Luftwaffel [Moderator] 01/05/2021 09:40:13
oh the grey metal part is not part of the robot?


and it looks like therre is a horizontal part, which has no visual

##### yash 01/05/2021 09:40:55
no it is not the part of the robot

##### Luftwaffel [Moderator] 01/05/2021 09:41:11
but the robot is attached to it?


In general it is much better (for performance AND accuracy) to replace the boundingObject with simple geometries, such as boxes, spheres, cylinders and capsules

##### yash 01/05/2021 09:42:08
yes I have positioned the robot accordingly, but it is not attached to it.

##### Luftwaffel [Moderator] 01/05/2021 09:45:33
well it is hard to say. What do you expect to happen?

##### Master.L 01/05/2021 09:45:42
Thanks for solving it!!

##### yash 01/05/2021 09:47:12
the 2 link manipulator should rotate about it's axis provided. With the metal plate at it's position only.

##### Luftwaffel [Moderator] 01/05/2021 09:48:39
you have to make its axis static then


remove the physics node of the Robot


it still seems weird to me, that you have 3 segments in your bounding object


there is something weird there

##### yash 01/05/2021 09:50:19
oh okay, alright let me look into it, thanks !

##### nelsondmmg 01/05/2021 21:53:51
Could you cite a reference for the differential ratio calculated for the rear wheel of the vehicle? I'm assuming that a similar correction need to be made before applying the acceleration to the wheels of the vehicle, but I cannot find any reference that explains how this differential ratio is calculated. Thanks.

##### PowerYdRa 01/06/2021 00:22:35
hi guys, I get a problem,

just install numpy via pip in terminal, but when call in webots, its give error No Module named 'numpy', how to define library / module installed to webots?
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/796171825926504448/unknown.png)
%end

##### DDaniel [Cyberbotics] 01/06/2021 00:41:20
Make sure in tools>preferences the python command is also python3

##### TerryWr1st 01/06/2021 00:49:02
Can Webots compile in x86, or only x64? I went through the visual studio setup both manually,  and with the wizard. The wizard sets the configuration properties as Release/x64, but this step isn't mentioned in the manual set up guide: [https://cyberbotics.com/doc/guide/using-your-ide](https://cyberbotics.com/doc/guide/using-your-ide)


Also, why does the wizard default to a Release configuration instead of debug?

##### Diego Rojas 01/06/2021 05:50:10
What would be the best way to simulate a ur5 robot on a 7th axis linear track using ROS2 and moveit2? I would like to control both the linear motion of the 7th axis track and the robot arm with moveit2. Using the follow\_joint\_trajectory action server, I was able to control the ur5 robot with ros2 control and moveit2, but now I want to attach the robot to a linear track. I have done this in the past in gazebo by creating a prismatic joint and using the follow\_joint\_trajectory controller to control it with ros\_control and moveit. Is this possible in webots also? How can I utilize the existing follow\_joint\_trajectory action server that is created in webots\_ros2 and create another follow\_joint\_trajectoy action server for a linear/prismatic joint with webots\_ros2?

##### Olivier Michel [Cyberbotics] 01/06/2021 07:12:43
Webots can compile controllers in either x64 or x86. However, by default it will build x64 binaries. If you want to build a x86 controller binary, you should be sure to link it with `WEBOTS_HOME\msys64\mingw32\bin\Controller.dll` instead of `WEBOTS_HOME\msys64\mingw64\bin\Controller.dll`.

##### yash 01/06/2021 07:38:12
I am working on a certain application that involves grasping a human foot. I imported the human foot CAD using .VRML format. And used the DEF geometry indexfaceset in the shape node to define the bounding object of the human foot. But the bounding object seems to be complex which is resulting in weird physics behavior.  How to address this issue such that the human foot remains stable ?
> **Attachment**: [2.mp4](https://cdn.discordapp.com/attachments/565154703139405824/796281451237736478/2.mp4)


Because when I replaced the foot with a simple cylindrical solid it worked fine since the bounding object of the cylinder is not complex.

##### Stefania Pedrazzi [Cyberbotics] 01/06/2021 07:48:08
The used formula comes from standard steering dynamics. Depending if the front or rear  wheels drive the car (or all four wheels) you need to compute the ratio for the left and right wheel because the do not turn using the same angle.

Here is the reference to a chapter about steering dynamics: [https://link.springer.com/chapter/10.1007/978-1-4614-8544-5\_7](https://link.springer.com/chapter/10.1007/978-1-4614-8544-5_7) but you can probably find other references on the web.

##### Olivier Michel [Cyberbotics] 01/06/2021 07:53:37
You should create a compound bounding object for the foot that is not a mesh, but a combination of simple primitives (spheres, capsules, cylinders and boxes). See this tutorial: [https://cyberbotics.com/doc/guide/tutorial-5-compound-solid-and-physics-attributes](https://cyberbotics.com/doc/guide/tutorial-5-compound-solid-and-physics-attributes) for an example of creating a compound bounding object.

##### yash 01/06/2021 08:01:33
alright ! but this wiil solve the issue right irrespective of the solid geometry ?

##### Olivier Michel [Cyberbotics] 01/06/2021 08:02:22
It should (as long as you don't include any mesh in the bounding object).

##### yash 01/06/2021 08:02:48
understood, thanks a lot !

##### Darko Lukić [Cyberbotics] 01/06/2021 08:48:56
Hello `@Diego Rojas`, I have never tried adding 7th axis linear track, but here are a few ideas. `TrajectoryFollower` can control any motor present in the robot. Therefore, you can add the linear track (built with `SliderJoint` which behaves in the same way as the prismatic joint) in the Webots robot model.



Alternatively, you can use `ConveyorBelt` but it is more complicated. You need to enable a `Supervisor` field of your robot and extend `trajectory_follower` to control `speed` field of `ConveyorBelt`. This will also require some basic integration to control the position of the belt as `ConveyorBelt` allows only a speed control.

##### Alessia Valle 01/06/2021 09:08:34
Hi `@Darko Lukić`, thank you again for the suggestions.  I also found on the ROS wiki website the diff\_drive\_controller  [http://wiki.ros.org/diff\_drive\_controller](http://wiki.ros.org/diff_drive_controller) but I don't know if it is useful for my purposes and if it can be used with Webots. Any idea?

Moreover, I have another doubt about transforms and URDF. Actually I need the static transforms between the wheels, the base\_link and base\_laser to set up navigation. But how can I publish transforms without the URDF file? Do these frames take the name of the corresponding nodes on Webots?

##### Darko Lukić [Cyberbotics] 01/06/2021 09:20:51
You can use `diff_drive_controller` as well. Your objective is to publish `Odometry` topic and transforms that describe translation and orientation between `base_link` and `odom` frames. You can use `diff_drive_controller` or write one by yourself.



You don't need URDF to publish transforms. In general, `robot_state_publisher` uses URDF to publish `TransformStamped` ([http://docs.ros.org/en/melodic/api/geometry\_msgs/html/msg/TransformStamped.html](http://docs.ros.org/en/melodic/api/geometry_msgs/html/msg/TransformStamped.html)) messages. However, you can publish those messages by yourself.

##### mayank.kishore 01/06/2021 18:32:51
Hi! Trying to setup my environment for ros2 on my mac and am getting a file not found error, am I missing something? [https://index.ros.org/doc/ros2/Installation/Foxy/Linux-Development-Setup/#environment-setup](https://index.ros.org/doc/ros2/Installation/Foxy/Linux-Development-Setup/#environment-setup)


This is what my directory looks like:
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/796446454096068608/unknown.png)
%end


Hi! Were you able to solve this problem? Am running into the same issue

##### Darko Lukić [Cyberbotics] 01/06/2021 18:53:25
`@mayank.kishore`

[https://index.ros.org/doc/ros2/Installation/Foxy/macOS-Install-Binary/](https://index.ros.org/doc/ros2/Installation/Foxy/macOS-Install-Binary/)

You should follow a tutorial for macOS

##### mayank.kishore 01/06/2021 19:00:00
~~I was following the tutorial, ran `tar xf ~/Downloads/ros2-release-distro-date-macos-amd64.tar.bz2` and am unsure why the next step of sourcing the ros2 file `. ~/ros2_foxy/ros2-osx/setup.bash` is trying to look for `local_setup.bash` in the directory above since the extract only puts everything into the `ros2-osx` folder as shown above~~



Figured it out needed to run `. ~/ros2_foxy/ros2-osx/setup.zsh`

##### Master.L 01/07/2021 03:02:30
Hi! Is there an inverse kinematics library for running delta-robots on webots?

##### Luiz Felipe 01/07/2021 08:33:45
Hello, I am trying to run a web simulation using a session and simulation server inside a docker container as explained in: [https://cyberbotics.com/doc/guide/web-simulation?tab-host=localhost](https://cyberbotics.com/doc/guide/web-simulation?tab-host=localhost)


I created the docker image, ran the docker container and inside the /usr/local/webots/resources/web/server i ran the './server.sh'



%figure
![Screenshot_from_2021-01-07_17-36-56.png](https://cdn.discordapp.com/attachments/565154703139405824/796658964321533992/Screenshot_from_2021-01-07_17-36-56.png)
%end


It seems to start successfully... but now I am having trouble testing if that works


As the documentation I am trying 'ws://localhost:1999/session?url=webots://github.com/cyberbotics/webots/branch/develop/projects/languages/python/worlds/example.wbt' in Connect to using the streaming viewer but i get streaming server error 1006

##### Luftwaffel [Moderator] 01/07/2021 08:43:56
`@Master.L` [https://gist.github.com/hugs/4231272](https://gist.github.com/hugs/4231272) this looks like what you're looking for


[https://www.marginallyclever.com/other/samples/fk-ik-test.html](https://www.marginallyclever.com/other/samples/fk-ik-test.html) or this could help

##### Olivier Michel [Cyberbotics] 01/07/2021 08:46:17
Did you try to check the monitor page http://localhost:1999/monitor to check the status of your server?

##### Luiz Felipe 01/07/2021 09:35:08
Oh... If I check it, it appears the load:



%figure
![monitor.png](https://cdn.discordapp.com/attachments/565154703139405824/796673297160601600/monitor.png)
%end


But if i click the localhost/2000 I get 'This site can't be reached'... Hm...

##### Olivier Michel [Cyberbotics] 01/07/2021 09:38:04
It should be http://localhost:2000 instead.

##### Luiz Felipe 01/07/2021 09:39:42

%figure
![monitor-2.png](https://cdn.discordapp.com/attachments/565154703139405824/796674417806802994/monitor-2.png)
%end


Yes.. It works... it seems that I am doing something wrong in the Connect to part....

##### YCSU 01/07/2021 09:51:21
Hi, is there a way to move all the motors of the robot arm at the same time? For example, I would like to move the tool center point (tcp) of a ur5e in a straight line from x=0 m to x=5 m. Right now I call the  \_setPosition\_ function for each motor in a sequential order with the inverse kinematics result, and judging from the movement, the  tcp is not moving in a straight line. Especially at the start of the movement, the arm jitters. I suspect it's caused by the asynchronous movement of the motors.

##### Luiz Felipe 01/07/2021 09:57:00
The session server and simulation servers seems to be up and rnning... Is that correct to put 'ws://localhost:1999/session?url=webots://github.com/cyberbotics/webots/branch/develop/projects/languages/python/worlds/example.wbt' i the 'Connect to' part to test the web simulation?
%figure
![Screenshot_from_2021-01-07_18-55-34.png](https://cdn.discordapp.com/attachments/565154703139405824/796678771264192522/Screenshot_from_2021-01-07_18-55-34.png)
%end

##### Alessia Valle 01/07/2021 11:56:31
Hello everyone! My tutor wrote to me and he has changed his mind about my thesis. He asked me to implement SLAM algorithm on Webots without any integration with ROS. Do you have some resources/documentation about it? Is there any existing project in which SLAM has been implemented?

##### Darko Lukić [Cyberbotics] 01/07/2021 12:14:22
The only examples about SLAM and Webots include ROS and ROS2:

[http://wiki.ros.org/webots\_ros/Tutorials/Sample%20Simulations](http://wiki.ros.org/webots_ros/Tutorials/Sample%20Simulations)

[https://github.com/cyberbotics/webots\_ros2/wiki/SLAM-with-TurtleBot3](https://github.com/cyberbotics/webots_ros2/wiki/SLAM-with-TurtleBot3)



If you need a background in this topic you can check:

[https://pythonrobotics.readthedocs.io/en/latest/modules/slam.html](https://pythonrobotics.readthedocs.io/en/latest/modules/slam.html)

[https://github.com/kanster/awesome-slam](https://github.com/kanster/awesome-slam)

[https://www.youtube.com/playlist?list=PLgnQpQtFTOGQrZ4O5QzbIHgl3b1JHimN\_](https://www.youtube.com/playlist?list=PLgnQpQtFTOGQrZ4O5QzbIHgl3b1JHimN_)



I am not sure whether there is a good implementation of SLAM that you can easily integrate into your project without ROS. `cartographer` is a good implementation, but I am not sure how hard is to use it without ROS:

[https://github.com/cartographer-project/cartographer](https://github.com/cartographer-project/cartographer)

##### yash 01/07/2021 12:25:58
I want to use the supervisor function as well as the Robot node , therefore should I write ——

from controller import Supervisor, Robot



And should define as -

robot = Robot()

supervisor = Supervisor()



Please help me with this !?

##### Darko Lukić [Cyberbotics] 01/07/2021 12:27:32
If you set the motor positions in the single step they all move at the same time. Your problem is therefore something else. For example, the motor in shoulder moves the endpoint faster than the motor in the wrist even though they rotate at the same speed (the motor in the shoulder is farther away from the endpoint than the motor in the wrist). One solution would be to find a lot of IK solutions along a straight line and apply the new IK solution in each step.


No. `robot = Supervisor()` is enough. It will give you methods from `Robot` and `Supervisor` nodes.

##### Alessia Valle 01/07/2021 12:34:06
Thank you. So do you think that I will have to write the SLAM algorithm from scratch on my own?

##### Darko Lukić [Cyberbotics] 01/07/2021 12:35:39
Yes, but make sure the port is correct.

##### yash 01/07/2021 12:37:14
> No. `robot = Supervisor()` is enough. It will give you methods from `Robot` and `Supervisor` nodes.

`@Darko Lukić`  thank you !

##### Darko Lukić [Cyberbotics] 01/07/2021 12:38:28
I don't know :/ Depends on your project.

##### Alessia Valle 01/07/2021 12:45:00
What do you mean by "it depends on your project?"😅

##### Darko Lukić [Cyberbotics] 01/07/2021 12:47:48
I guess if you have a good understanding of SLAM than you can implement it, but if you want a robust solution it is better to use something like `cartographer`.

##### Alessia Valle 01/07/2021 12:58:44
Ok, I will go through the documents you have shared! Thank you for your availability! 😀

##### josiehughes 01/07/2021 13:09:59
Hi - I'm wondering about the current e-puc hardware and compatability with Webots. Is the Epuc-2 compataible with Webots?

##### Luiz Felipe 01/07/2021 14:07:09
I get streaming server error... will check the debug flags of the session and simulation servers...

##### Darko Lukić [Cyberbotics] 01/07/2021 15:54:45
Hello `@josiehughes`, It is compatible

##### YCSU 01/07/2021 16:01:07
Got it. Thanks!

##### Ragemor 01/07/2021 17:43:11
Is there any Webots project about multi robot coordination using leader follower approach? I want to implement leader follower algorithm in my project but i cant understand how can i write code about that. Which nodes and api functions(or sensors) should i use? Do you have docs about leader follower and multi robots in webots?

##### b\_adam 01/07/2021 20:15:16
Hi, I am trying to rotate an epuck2 robot by 90 degrees, I tried using time but I couldn't measure exactly 90 degrees, is there a way to do it effectively not using time and angular speed?

##### adiagr 01/07/2021 21:36:03
The most effective way to turn an epuck2 is by using time and angular speed itself. You may want to have a look at the proto file and take into account the thickness of the wheels among the other things to get a more accurate value of axle length.

##### ArjunSadananda 01/07/2021 21:41:23
`@b_adam` If you prefer, you could use encoders (and write a closed loop controller) instead of doing it by calculating the time (open loop controller).

##### Luiz Felipe 01/08/2021 06:08:10
In line 46 in [https://github.com/cyberbotics/webots/blob/master/resources/web/streaming\_viewer/index.html#L46](https://github.com/cyberbotics/webots/blob/master/resources/web/streaming_viewer/index.html#L46) of the new 2021a version the line it is not supposed to be:  `  <script src="[https://www.cyberbotics.com/wwi/R2021a/webots.min.js](https://www.cyberbotics.com/wwi/R2021a/webots.min.js)"></script>` ?

##### Darko Lukić [Cyberbotics] 01/08/2021 08:16:27
`@Luiz Felipe` There is `webots.min.js` distributed with Webots packages (`resources/web/wwi/webots.min.js`), but you can also use the one available on Cyberbotics servers.

##### Luiz Felipe 01/08/2021 08:21:10
Yes `@Darko Lukić` , I changed to use the one available on Cyberbotics servers because I am running the servers in a docker container. But the streaming server page seems a big buggy for the 2021a version in my computer... I am still having trouble following the Web Simulation documentation also, the session server and simulation server are fine, but I am not seem able to figure out how to open a simulation or send any information to the simulation server...


I just thought it is better for the default to be the one available on the Cyberbotics servers.

##### Olivier Michel [Cyberbotics] 01/08/2021 08:28:01
It should be the same anyhow.

##### yash 01/08/2021 08:33:19
Can I put touch sensor in children of solid node ? Since when the touch sensor collides with another solid, I want the contact point of the collision?

##### Luiz Felipe 01/08/2021 08:39:46
Yups... The streaming viewer however does not open... The 2020b version works fine...
%figure
![Screenshot_from_2021-01-08_17-37-04.png](https://cdn.discordapp.com/attachments/565154703139405824/797021720057741312/Screenshot_from_2021-01-08_17-37-04.png)
%end

##### Olivier Michel [Cyberbotics] 01/08/2021 08:43:19
Yes, you can. However to get the position of the contact point of the collision, you should use the supervisor API, not the touch sensor API.


I am sorry, but currently deploying a streaming server is not very easy, has some bugs and also is not very well documented. We are currently working on improving this, but it will take some time. Meanwhile, I am afraid, you will have to debug this kind of problem by yourself.

##### yash 01/08/2021 08:48:56
understood, thanks!

##### Luiz Felipe 01/08/2021 08:51:44
ok... no problem hehe

##### Master.L 01/08/2021 09:21:18
Excuse me, how can i get hinge joint Velocity?


Should I calculate by differentiating the position value?.

Can I get it through the sensor?

##### Luftwaffel [Moderator] 01/08/2021 09:25:36
add PositionSensors


and yes, you have to calculate it by the change


vel = (pos\_new - pos\_old) / (timestep * 1000)


[https://cyberbotics.com/doc/reference/positionsensor?tab-language=python](https://cyberbotics.com/doc/reference/positionsensor?tab-language=python)


timestep = getBasicTimeStep()

so in ms, that's why you have to multiply by 1000

##### Master.L 01/08/2021 09:55:38
`@Luftwaffel` Thank you. Succeeded in receiving the position value!!.

But I control the webots through ros. Is there a way to get time from ros topic or service?

##### josiehughes 01/08/2021 09:58:12
Thanks!

##### Master.L 01/08/2021 10:08:13
`@Luftwaffel` Thank you. I found.👍

##### Ragemor 01/08/2021 10:14:59
Excuse me is there any Webots project about multi robot coordination using leader follower approach? I want to implement leader follower algorithm in my project but i cant understand how can i write code about that. Which nodes and api functions(or sensors) should i use? Do you have docs about leader follower and multi robots in webots?

##### Olivier Michel [Cyberbotics] 01/08/2021 10:19:44
No, we don't have any documentation about leader follower and I am not aware of any project about it.


Maybe this one can help? [http://www.diegoantognini.com/projects/dis/](http://www.diegoantognini.com/projects/dis/)

##### Ragemor 01/08/2021 14:00:31
Thank you. If anyone have an idea or doc about leader follower can share with me?

##### b\_adam 01/08/2021 14:23:25
could someone give me a hand with rotating an EPUCK2 robot by 90 degrees? Tried absolutely everything and nothing worked, I am a complete beginner so don't know much


and there are no resources online for it


would be very helpful


I could pay for a call teaching me on how to do it

##### Maheed 01/08/2021 14:40:49
Hi everyone, Im a webots beginner at the moment. I have 8 yamor modules connected together to look like a snake and I really need some help to program some controllers in C to make it do something such as move towards an a certain colour or avoid obstacles. Can anyone help me with this?

##### Luftwaffel [Moderator] 01/08/2021 14:44:57
are you dead set on c?

##### Maheed 01/08/2021 14:46:30
Yep

##### Luftwaffel [Moderator] 01/08/2021 14:47:47
Then I wont be able to help much. But my approach would be to create basic functionality as "move forward" "turn left" "turn right" etc. And then combine those into algorithms for obstacle avoidance etc.

##### Maheed 01/08/2021 15:27:37
Okay thanks


Is there anyone here good with C who can help me with this please?

##### linexc 01/08/2021 23:58:08
Hello everyone, I have a problem regarding Webots and NAO robot. I am trying to write a ROS server and client in order to make the NAO in Webots perform some gestures. But when I tried to simulate it, the error showed always like this. But I really don't know why the network address in already in use. If anybody can help me, I would be very grateful.



%figure
![error.png](https://cdn.discordapp.com/attachments/565154703139405824/797253462727327784/error.png)
%end

##### Luftwaffel [Moderator] 01/09/2021 08:26:26
`@linexc` looks like a network problem. I have no experience with this exact thing, but usually you would use localhost


which should be 127.0.0.1

##### linexc 01/09/2021 10:40:19
thank you. I will try it now.

##### Chernayaten 01/09/2021 19:36:59
I am messing around with the pen.wbt example and I found that the floorSize and the floorTileSize have to match (for example 1 1 for both or 4 4) . Can someone explain why?


Also if anyone can help me figuring out how to make the robot(still using the one in pen.wbt) turn 90 degree angles..atm I am using setRotate(getTargetPosition() +/- Rotate) where Rotate = 2*math.pi +0.4. Not sure why 0.4 works, but it seems ok in general, except if I use a big time\_step and sometimes when I left the simulation run a while.



I feel like I should be able to use 1.0/3.0, 4.0/3.0 and stuff like that to get different angles, but I can't make it work

##### DrakerDG 01/10/2021 00:37:29
Hello everyone! Playing with lights and lighting in Webots.  I have placed three line follower robots using the same controller, I still don't understand how it works.  Can someone tell me how it works?

[https://youtu.be/jMzKwcVs\_08](https://youtu.be/jMzKwcVs_08)

##### Luftwaffel [Moderator] 01/10/2021 12:37:11
`@DrakerDG` Hey, what part exactly don't you understand?

##### DrakerDG 01/10/2021 12:41:40
<@239507682111913984> hello! I don't understand how by duplicating or tripling the same robot (copy & paste) they can use the same controller separately.  What I mean is that I just copied and pasted them without changing anything and it worked.  Each robot can follow the line without affecting the other.  In the end I only changed the color of the chassis and nothing else.  I see that it works but I don't understand how


I understood that each robot should have its own controller, but apparently it is not entirely necessary

##### Luftwaffel [Moderator] 01/10/2021 12:50:15
Ah okay, I understand the confusion. Each robot runs its own instance of that controller. In a separate process


does that make sense?

##### DrakerDG 01/10/2021 12:53:45
<@239507682111913984> yes, thank you 😁👍🏼


<@239507682111913984> like as running the same application several times


<@239507682111913984> If it were different robots if each one is configured with their controller, right?

##### Luftwaffel [Moderator] 01/10/2021 12:56:16
yes


Usually a Controller is specific to one Robot, but you can have many instances of that Robot


you can take a look at your task-manager while running it. You should see the main Webots process, and then at least one per running controller.

##### DrakerDG 01/10/2021 12:58:23
<@239507682111913984> For example robots that play soccer use the same controller all, so

##### Luftwaffel [Moderator] 01/10/2021 12:58:30
I mostly use Python and often need similar functionality. So I have sub-modules or scripts, which I dont change and can use in different controllers by simply importing them

##### DrakerDG 01/10/2021 12:59:09
Ok

##### Luftwaffel [Moderator] 01/10/2021 13:00:01
If you have one type of robot player, then yes, it would make sense to use the same controller. Or at least a shared base-version for stuff like movement, sensors etc.


The roles for behavior, if they should differ, could be put on top of that


What Programming language do you use?

##### DrakerDG 01/10/2021 13:01:05
I will continue playing and I will try to make modules as you indicate.  It's very interesting


I am currently programming in C language, but I am learning in a course to start writing in Python


<@239507682111913984> My object is to use Webots to test robot designs, observe their operation, mechanical behavior, improve it and then physically build the robot

##### Luftwaffel [Moderator] 01/10/2021 13:14:31
Python is definitely easier and quicker imho

##### DrakerDG 01/10/2021 13:17:40
<@239507682111913984>  definitely yes, the syntax is very friendly.  In the little that I have advanced I really like how simple it is


<@239507682111913984> Thank you very much for guiding me

##### duct 01/10/2021 17:14:58
I opened up a new world in webots, and the console is flooded with errors that say [javascript] ReferenceError: Can't find variable: webots (undefined:1)



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/797876153640812614/unknown.png)
%end


would anyone know what the issue is? Thanks

##### adiagr 01/10/2021 17:30:24
The error for sure pertains to the robot window's javascript file. I'm also experiencing the same error with Webots 2021 version. Went through the changelog but couldn't find anything pertaining to webots.js

##### duct 01/10/2021 17:30:50
should I stick with 2020 instead?

##### Darko Lukić [Cyberbotics] 01/10/2021 17:37:41
The robot window doesn't rely on webots.js. Could you tell me which world are you trying to open?

##### duct 01/10/2021 17:39:01
I am using the erebus challenge world. [https://github.com/Shadow149/Erebus](https://github.com/Shadow149/Erebus). Under erebus-aura>game>worlds>GeneratedWorld.wbt


well i went back to 2020a rev 1 and the error is no longer there

##### Darko Lukić [Cyberbotics] 01/10/2021 21:00:41
`@duct` , `@adiagr`  I have just checked and `MainSupervisorWindows.html` is not valid HTML file, so `webots` cannot be injected. The file content should be something like:

```html
<html>
<head>
    <script src="MainSupervisorWindow.js"></script>
</head>
<body>
...
</body>
</html>
```

##### adiagr 01/10/2021 21:03:17
Hey, in a robot window plugin, should the js file be explicitly included using the script tag?

##### Darko Lukić [Cyberbotics] 01/10/2021 22:03:29
Yes


You can check the e-puck example:

[https://github.com/cyberbotics/webots/blob/f6ebe9cf8ce64c30cf453655376a815deeb28744/projects/robots/gctronic/e-puck/plugins/robot\_windows/e-puck/e-puck.html#L76](https://github.com/cyberbotics/webots/blob/f6ebe9cf8ce64c30cf453655376a815deeb28744/projects/robots/gctronic/e-puck/plugins/robot_windows/e-puck/e-puck.html#L76)

##### Diego Rojas 01/10/2021 23:30:11
What are the steps of designing a model for webots simulation? What is the process of designing something in soldworks and making a PROTO from the mesh? This is likely a simple question, but I cannot seem to find a direct answer or demo.

##### DrakerDG 01/10/2021 23:40:04
`@Diego Rojas` check this play list: [https://youtube.com/playlist?list=PLbEU0vp\_OQkUwANRMUOM00SXybYQ4TXNF](https://youtube.com/playlist?list=PLbEU0vp_OQkUwANRMUOM00SXybYQ4TXNF)

##### Diego Rojas 01/11/2021 00:13:32
`@DrakerDG` Thanks!

##### Luftwaffel [Moderator] 01/11/2021 09:15:52
Take a look at this first: [https://www.cyberbotics.com/doc/guide/tutorial-7-your-first-proto](https://www.cyberbotics.com/doc/guide/tutorial-7-your-first-proto)

In general, the simplest way in my opinion, would be to build up your model in webots, then export the robot as a .wbo


then you just need to add the .proto header (as described in the link)

##### JSK 01/11/2021 10:07:52
Hello Team Webots


i have a question related to webots


just visited the official website and then github and now i am here


Hi `@Darko Lukić`  how are you? remember me?

##### Darko Lukić [Cyberbotics] 01/11/2021 10:11:47
I am sorry, I cannot recognize your username 🙁

##### JSK 01/11/2021 10:12:22
i am Jamal Shams Khanzada, couple of days ago i had asked you a question on github and you helped me


and i am thankful to you


i am here for another problem to be solved.


can you still help me to solve it?


actually when i fetched gyro data recently, i started to make controller but it needs numpy

##### Darko Lukić [Cyberbotics] 01/11/2021 10:14:09
I recall now! I am glad I was able to help.


Feel free to ask a question and I, or somebody from the team, or the community, will probably be able to help you

##### JSK 01/11/2021 10:18:34
so when i imported numpy it says "ModuleNotFoundError: No module named 'numpy'"


although i have installed python latest version


you can see here
%figure
![Screenshot_from_2021-01-11_15-20-43.png](https://cdn.discordapp.com/attachments/565154703139405824/798134541603831808/Screenshot_from_2021-01-11_15-20-43.png)
%end


this is the error in webots terminal
%figure
![Screenshot_from_2021-01-11_15-22-51.png](https://cdn.discordapp.com/attachments/565154703139405824/798134959138930698/Screenshot_from_2021-01-11_15-22-51.png)
%end

##### Darko Lukić [Cyberbotics] 01/11/2021 10:23:46
You installed `numpy` for Python2, not Python3


You need to `pip3 install numpy`

##### JSK 01/11/2021 10:24:31
ok i am installing


but how can i know that `numpy` is for python2 or python 3?


installed it


rebooting is necessary or not?

##### Darko Lukić [Cyberbotics] 01/11/2021 10:26:11
No, just restart the controller


In general (not necessary), if you install it with `pip3` it is for Python3, if you install it with `pip` it is for Python2.

##### JSK 01/11/2021 10:27:33
ok


i restaretd the controller but the problem is still there

##### Darko Lukić [Cyberbotics] 01/11/2021 10:30:08
Do you get an error if you call?

```py
python3 -c 'import numpy'
```

##### JSK 01/11/2021 10:30:28
let me check it

##### Stefania Pedrazzi [Cyberbotics] 01/11/2021 10:30:57
`@JSK` did you maybe install Webots from the snap?

##### JSK 01/11/2021 10:31:31
`@Stefania Pedrazzi`  yes i installed it from snap

##### Stefania Pedrazzi [Cyberbotics] 01/11/2021 10:32:02
Ok, then you should use extern controller:

[https://www.cyberbotics.com/doc/guide/installation-procedure#extern-controllers](https://www.cyberbotics.com/doc/guide/installation-procedure#extern-controllers)

##### JSK 01/11/2021 10:32:52
negative... i got no error
%figure
![pip3.png](https://cdn.discordapp.com/attachments/565154703139405824/798137348495245312/pip3.png)
%end

##### Darko Lukić [Cyberbotics] 01/11/2021 10:34:13
If you installed Webots as `snap` it will not work. As `@Stefania Pedrazzi` suggested you should use external controller or install Webots as a Debian package.

##### JSK 01/11/2021 10:35:26
i checked that site. i have been reading it for two days but i was actually avoiding external controller. but now i think i have to switch here on external controller


i think i should go for Debian package


isn't it necessary that Debian should be installed on latest version of Ubuntu (20.04) i am using (18.04)


i have started downloading Debian Version.


and until it is downloaded i think i should reread the documentation `@Stefania Pedrazzi` mentioned me

##### Stefania Pedrazzi [Cyberbotics] 01/11/2021 10:42:32
There is a debian package version for Ubuntu 18.04: [https://github.com/cyberbotics/webots/releases/download/R2021a/webots-R2021a-x86-64\_ubuntu-18.04.tar.bz2](https://github.com/cyberbotics/webots/releases/download/R2021a/webots-R2021a-x86-64_ubuntu-18.04.tar.bz2)

##### JSK 01/11/2021 10:43:55
Thank you . I am so thankful to you. 🙂

##### Stefania Pedrazzi [Cyberbotics] 01/11/2021 10:44:16
You're welcome

##### JSK 01/11/2021 10:44:20
aaaa one last question please


after the file is downloaded, how to install it? i mean should i extract the `tar.bz2` extension file or something else?

##### Stefania Pedrazzi [Cyberbotics] 01/11/2021 10:45:58
Oops.. I linked to the tarball instead of the debian package

##### JSK 01/11/2021 10:46:00
please don't mind i am a novice

##### Stefania Pedrazzi [Cyberbotics] 01/11/2021 10:46:42
The tarball just needs to be extracted and then you can launch it from the directory where you extracted it


Here is the link to the debian package: [https://github.com/cyberbotics/webots/releases/download/R2021a/webots\_2021a\_amd64.deb](https://github.com/cyberbotics/webots/releases/download/R2021a/webots_2021a_amd64.deb)

Double clicking on it should open the Software Application window to install it

##### JSK 01/11/2021 10:47:34
alright that sounds good

##### Luftwaffel [Moderator] 01/11/2021 10:48:29
`@JSK` You may also have to set environment variables, especially when using conda

##### JSK 01/11/2021 10:49:42
yeah i read about environment variables in the documentation that `@Stefania Pedrazzi`  mentioned

##### Luftwaffel [Moderator] 01/11/2021 10:51:02
you can launch webots from a terminal. it will have the variables of that terminal

##### JSK 01/11/2021 10:51:44
to be honest i tried to set the variables but when i started to search `usr/local/webots` i was not able to find that and hence i came on this platform for help. i am trying this for 3 days

##### Luftwaffel [Moderator] 01/11/2021 10:52:11
you can edit your .bashrc in your home folder to add variables

##### JSK 01/11/2021 10:53:05
what does "edit" mean.


?

##### Luftwaffel [Moderator] 01/11/2021 10:53:17
open it in a text editor and add the variables


[https://www.cyberbotics.com/doc/guide/running-extern-robot-controllers?tab-os=linux&tab-language=python](https://www.cyberbotics.com/doc/guide/running-extern-robot-controllers?tab-os=linux&tab-language=python)


here is more detail

##### JSK 01/11/2021 10:54:51
alright

##### Luftwaffel [Moderator] 01/11/2021 10:57:26
you can add this at the end of your .bashrc

`export WEBOTS\_HOME="/home/simon/webots"

export LD\_LIBRARY\_PATH="${LD\_LIBRARY\_PATH}:${WEBOTS\_HOME}/lib/controller"

export PYTHONPATH="${PYTHONPATH}:${WEBOTS\_HOME}/lib/controller/python38"

export PYTHONIOENCODING="UTF-8"`

keep in mind to change the first line to the correct Path of your installation, and change the python version to the correct one


`python3 --version`  to get your python3 version

##### JSK 01/11/2021 11:00:44
thanks let me do it

##### Luftwaffel [Moderator] 01/11/2021 11:00:45
the .bashrc file gets sourced every time you open a new terminal. So you have to open a new terminal for it to take effect. Then you can launch webots from the terminal, and it will have those variables

##### JSK 01/11/2021 11:03:18
can you tell me how to access .bashrc file? i cant find it

##### Luftwaffel [Moderator] 01/11/2021 11:03:28
it's hidden


ctrl + h to see hidden files, or `gedit ~/.bashrc` in the terminal

##### JSK 01/11/2021 11:04:05
found it


updated .bashrc as you mentioned `@Luftwaffel` .

##### Luftwaffel [Moderator] 01/11/2021 11:07:37
now you can open a new terminal and launch webots from there. the variables should be set


Instead of setting those variables in the .bashrc, you could set them in `sudo gedit /etc/profile`. That should set them system wide

##### JSK 01/11/2021 11:08:47
error still exists

##### Alessia Valle 01/11/2021 11:09:48
Hello everyone! I would like to write a controller that allows my robot to keep the lane. What sensors do you suggest me to use?

##### MartinG 01/11/2021 11:10:33
Use a camera sensor and look into canny edge detection and hough line transform


I don't know your programming language preference, but I strongly recommend you use python since OpenCV makes it a much easier task than it seems.

##### Darko Lukić [Cyberbotics] 01/11/2021 11:11:27
Something like this?

[https://github.com/lukicdarkoo/webots-example-lane-follower](https://github.com/lukicdarkoo/webots-example-lane-follower)


It is not robust, but it is very simple

##### Alessia Valle 01/11/2021 11:16:30
Yes, but I have never used OpenCV


Are there any references on Cyberbotics website?

##### MartinG 01/11/2021 11:19:03
I used a really solid (imo) guide that has some hand holding but also allows for you to figure the problems out by yourself, you can find it here [https://towardsdatascience.com/deeppicar-part-1-102e03c83f2c](https://towardsdatascience.com/deeppicar-part-1-102e03c83f2c)


Parts 3 and 4 are what you'll probably find the most useful.


And it does put up a paywall after 3 visits to the site I believe, but a bit of incognito browsing never hurt anyone.


I have a question of my own, using reset simulation crashes the whole program. The world is quite complex, however even leaving it to run for a long while after hitting reset doesn't seem to help.

##### Luftwaffel [Moderator] 01/11/2021 11:23:12
Perhaps try removing things from the world one by one and hit reset after. Try to find out what is causing the crash

##### Alessia Valle 01/11/2021 11:25:21
Thank you!

##### MartinG 01/11/2021 11:26:05
I'm glad to help, I'll be around if you have some more specific questions.


Yeah, that makes sense. Thanks.


Anyone with some deeper knowledge of arctan2 and trigonometry in general want to help me out a bit?

##### Luftwaffel [Moderator] 01/11/2021 14:16:06
`@MartinG` whaz do you want to k ow?


I got a pretty good handle on trigonometry and linear algebra, especially in the context of robotics and positions / orientations

##### MartinG 01/11/2021 14:20:37
Awesome.


So I'm trying to do a GPS guided navigation for the Tesla in Webots.


I do this by taking 5 points along the path, then converting them into a lot of points using a bspline path program.


The problem is figuring out how to calculate the angle the car needs to turn using arctan2

##### Luftwaffel [Moderator] 01/11/2021 14:24:26

%figure
![220px-Atan2definition.png](https://cdn.discordapp.com/attachments/565154703139405824/798195623940718622/220px-Atan2definition.png)
%end

##### MartinG 01/11/2021 14:24:42
I've seen that graphic many times ahahah.

##### Luftwaffel [Moderator] 01/11/2021 15:09:39
btw, this link can be very useful for checking calculations etc.

[https://www.andre-gaschler.com/rotationconverter/](https://www.andre-gaschler.com/rotationconverter/)

##### duct 01/11/2021 16:42:55
Hi again! I am trying to create a robot class with the motors, position sensors, and other stuff included in it. I am using this code:

```C++
class myRobot {
  public:
    Robot *robot;
    Motor *left;
    Motor *right;
    PositionSensor *LEnc;
    PositionSensor *REnc;
    int timeStep;
};
```

It says that 'Robot' does not specify a type, and same with 'Motor' and 'PositionSensor'. I suspect this is because something in Robot.hpp is not public.


I'm sort of a noob with C++ and OOP, so I'm not really sure what the issue is

##### Luftwaffel [Moderator] 01/11/2021 16:44:57
[https://www.cyberbotics.com/doc/guide/controller-programming?tab-language=c++](https://www.cyberbotics.com/doc/guide/controller-programming?tab-language=c++)


this should give a bit of guidance


and perhaps this

[https://www.cyberbotics.com/doc/guide/cpp-java-python?tab-language=c++](https://www.cyberbotics.com/doc/guide/cpp-java-python?tab-language=c++)

##### duct 01/11/2021 16:47:08
thanks!

##### Chernayaten 01/11/2021 21:40:04
Would you perhaps be able to help me with the following? I want my robot to make a 90 degree clockwise turn which. I use setPosition to increment/decrement and thus move/turn the robot. I use a position sensor to properly stagger my commands so they don't overlap.



With my subpar trigonometry skills I figured that to turn the robot 90 degrees I have to inc/dec the position by (math.pi * robot\_radius)/ (2*wheel\_radius) . My simulations say I am completely wrong. Can you help me out? I can show how I reached the formula if you want

##### duct 01/11/2021 21:53:28
funny I was doing the same thing today. This is the formula I landed on, and it works:

```
theta(in radians) =
(angle(in degrees) * robot_radius * pi)/(360 * wheel_radius)
```


so if your robot radius(something you sort of have to play with to get accurate results) is 32.5, and wheel radius is 9.5, then your setPosition should be(in radians) (90 * 32.5 * PI)/(360*9.5)


pretty sure you forgot to multiply your angle and it should be 360*wheel\_rad

##### Chernayaten 01/11/2021 22:01:55
What do you mean it is something that I have to play around to get accurate results? Why?


Your formula translates to my\_formula / 2 since 90/360 = 1/4. Unfortunately the turn my robot does is still wrong

##### duct 01/11/2021 22:14:02
it's not actually supposed to be the robot radius, it's meant to be the distance between the centers of the wheels, which is usually smaller than the robot radius given on the webots website


what does it do then?

##### Chernayaten 01/11/2021 22:15:37
Ahh.. yeah, I agree. The center of my wheels is right on the edge of the robot, in which case the distance should be the robot radius

##### duct 01/11/2021 22:16:01
if it is extremely far off then there's something wrong with the formula


but if instead of 90 degrees it goes 80 or 100 degrees, then just mess with the robot radius


basically what my formula does is the following(90 degrees as an example)

1. 90/360 =1/4 shows that you are going 1/4 of the circumference.

2. calculate circumference through robot\_diameter*pi, and multiply by 1/4(or whatever fraction you got from step 1). This gives you the distance that each wheel has to go in terms of cm.


then the radians that each wheel has to turn is distance/wheelRadius


putting all that together gives the final formula

##### Chernayaten 01/11/2021 22:22:44
1/4 gives me a ~43.6 turning angle, 1/2 gives me a ~45.2 angle and 1/1 (so a full circle supposedly) gives me ~62 angle

##### duct 01/11/2021 22:23:01
ooh


yeah


that's not right


this is what I have:

##### Chernayaten 01/11/2021 22:23:29
I do agree with your reasoning on how it works though

##### duct 01/11/2021 22:23:34
```
(angle*WHEELBASE*PI)/(360*WHEELRAD)
```


WHEELBASE is the robot diameter


try that


and angle is in degrees

##### Chernayaten 01/11/2021 22:26:14
This is what I am trying. btw my result was in radians, I just converted it to angle so that it makes more sense. At least for me, angles feel far more natural when it comes to visualizing them

##### duct 01/11/2021 22:26:15
*wheelbase is robot \_diameter\_, not radius


in case that was a matter of confusion


ok what's your wheelbase(\_diameter\_) and wheel radius

##### Chernayaten 01/11/2021 22:30:20
I'm pretty sure my wheelbase is the same as my robot diameter which is 0.9 and my wheel radius is 0.025.


My wheels are located on 0.045 to the left and the right of my robot, wheelbase is calculated as the distance from the center of the wheels which makes that 0.09


I'm using the robot from the pen.wbt world in the Devices Tour


I'll try playing around with the values to see if I can make it work. Thanks for taking the time, at least I know that my logic is not too far off

##### Luiz Felipe 01/12/2021 07:11:18
Just reporting. I think I found a bug (not sure), but receiving the message from the simulation server, when starting the Stream class another bar '/' is inserted in line 6 and the link becomes 'localhost:2001//mjpeg' ([https://github.com/cyberbotics/webots/blob/f6ebe9cf8ce64c30cf453655376a815deeb28744/resources/web/wwi/stream.js#L6](https://github.com/cyberbotics/webots/blob/f6ebe9cf8ce64c30cf453655376a815deeb28744/resources/web/wwi/stream.js#L6)) . For the x3d option the problem does not happen weirdly.


I am solving that by changing the message sent from the simulation server. I will check if it will also work with 'x3d' option or if using this solution only solves the 'mjpeg' but starts the error when using 'x3d'.

##### Olivier Michel [Cyberbotics] 01/12/2021 07:19:17
Thank you for this contribution! Once you have implemented and tested it, please open a new PR to submit your change, so that it will be integrated into Webots).

##### yash 01/12/2021 07:39:03
How can I extract the position moved by a manipulator link ? I have used a hinge joint along with position sensor .

So when a manipulator link hits a solid it stops, at this moment I want to know the position of the link .?

##### Olivier Michel [Cyberbotics] 01/12/2021 07:51:50
Can't you use the position sensor for that?

##### yash 01/12/2021 08:11:01
> Can't you use the position sensor for that?

`@Olivier Michel`  ye it’s done ! Was thinking in a wrong direction... thanks !

##### Luiz Felipe 01/12/2021 08:37:38
If I git clone the webots repository the dependencies are not downloaded right? How can I download also with the dependencies? (I cloned but the /wwi/dependencies folder does not exist)


I guess I should use --recurse-submodules... will test it!

##### Olivier Michel [Cyberbotics] 01/12/2021 08:45:02
Yes.

##### Luftwaffel [Moderator] 01/12/2021 08:45:23
Use the build from source instructions on github


They give you a step for step process, including all dependencies

##### Olivier Michel [Cyberbotics] 01/12/2021 08:46:04
Please follow strictly the instructions at [https://github.com/cyberbotics/webots/wiki/Linux-installation](https://github.com/cyberbotics/webots/wiki/Linux-installation) (assuming you are on Linux)

##### Luiz Felipe 01/12/2021 08:49:05
Thanks 🙂 doing that now

##### Luftwaffel [Moderator] 01/12/2021 08:51:44
`@duct` `@Chernayaten`  [http://www.hmc.edu/lair/ARW/ARW-Lecture01-Odometry.pdf](http://www.hmc.edu/lair/ARW/ARW-Lecture01-Odometry.pdf) Take a look at this lecture presentation. Especially slide 23


delta-Theta is the angle change of the robot (you want 90° (pi/2)

delta-s  is the distance traveled by the right / left wheel
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/798475224294096907/unknown.png)
%end


2L is the distance between wheels. (as a note here, yesterday I found more accurate results using the outside edge to outside edge distance distance of the BoundingObject of the wheels, not the wheel center)


So solving for the difference in angles/position of your wheels, the formula should be like this:

`delta_pos = delta_theta * wheelBase / wheelRadius`


Now you can put in any theta angle in radians and get the delta\_pos


delta\_pos is how much more you have to turn one wheel over the other


I recommend staying with radians all the times. The only exception maybe being when printing a message. Then just multiply an angle by 180/pi  to get degrees

##### Luiz Felipe 01/12/2021 09:22:18
I followed the page, re-build webots, also installed the optional dependencies, but still nothing on the wwi/dependencies folder... should I download the dependencies in that folder manually?

##### Luftwaffel [Moderator] 01/12/2021 09:23:19
what are you trying to achieve? Webots built successfully?

##### Luiz Felipe 01/12/2021 09:24:25
yups.. webots built successfully, i can open v2021a


i am trying to check a possible bug in the multimedia\_client.js file

##### Luftwaffel [Moderator] 01/12/2021 09:24:56
okay... and what is the issue?

##### Darko Lukić [Cyberbotics] 01/12/2021 09:27:01
`@Luiz Felipe` Can you check whether you have node/npm installed, `npm --version`. If there is a missing dependency `make` skips compiling the corresponding part. Node should be included in the optional dependencies, but just to make sure whether it is properly installed

##### Luiz Felipe 01/12/2021 09:28:28
Probably that is the reason `@Darko Lukić` (npm is installed correctly but probably make skipped that when i ran the command)


does make clear works to re-build one more time?

##### Darko Lukić [Cyberbotics] 01/12/2021 09:29:20
Yes, `make clean` works

##### Olivier Michel [Cyberbotics] 01/12/2021 09:29:39
`make clean`

##### Darko Lukić [Cyberbotics] 01/12/2021 09:29:59
Correct, sorry

##### Luiz Felipe 01/12/2021 09:30:15
Thanks =), I will re-build

##### Olivier Michel [Cyberbotics] 01/12/2021 09:30:18
Or even more powerful `make cleanse` (will remove the dependencies).

##### Luiz Felipe 01/12/2021 09:31:38
For the web part, is there a list of bugs or features that need help? (I dont know much of javascript but I feel that part is really breakthrough work in  webots)


Now I got the dependencies `@Darko Lukić` . Thank you very much. I got an error during make regarding the npm but all the dependencies seems to be in the /dependencies folder.

##### Darko Lukić [Cyberbotics] 01/12/2021 09:44:24
What is the error?

##### Luiz Felipe 01/12/2021 09:47:20

%figure
![Screenshot_from_2021-01-12_18-40-36.png](https://cdn.discordapp.com/attachments/565154703139405824/798488275685605396/Screenshot_from_2021-01-12_18-40-36.png)
%end


but it works

##### Darko Lukić [Cyberbotics] 01/12/2021 09:51:21
Maybe to clean the npm cache `npm cache clean --force` and repeat the compilation. To clean the project you can also use `git clean -dfx`.

##### Luiz Felipe 01/12/2021 09:56:25
Ok, tomorrow I will try to compile again. I guess the bug is in this line: [https://github.com/cyberbotics/webots/blob/f6ebe9cf8ce64c30cf453655376a815deeb28744/resources/web/wwi/multimedia\_client.js#L77](https://github.com/cyberbotics/webots/blob/f6ebe9cf8ce64c30cf453655376a815deeb28744/resources/web/wwi/multimedia_client.js#L77) ... I will try to find a solution to send a PR for that


(giving the right url it works for the mjpeg also ;))

##### Apashe 01/12/2021 10:49:21
Hello everyone! recently started working with webots and I wanted to know how to get the current coordinates of the robot and point it to some point so that it gets there (I'm currently working with a robot "iRobot's Create")

how can this be done and is there an example?

now I want the robot to be able to drive from one current coordinate to another (without obstacles) on Rectangle Arena

##### Chernayaten 01/12/2021 10:50:09
GPS can get you current coordinates


Assuming you know the direction of your robot you can easily calculate the distance and the angle to your target

##### Apashe 01/12/2021 11:01:14
there are examples of how to use GPS

##### Chernayaten 01/12/2021 11:03:10
Yes, there's a gps.wbt file under the devices section.



GPS is simple to use, you can also check out its section oncthe webots site to see all the methods in your preferred language

##### owongcho 01/12/2021 16:39:37
hello! what type of simulation Webots generates? For example, is the type of simulation an emulation, discrete event simulation, or something else?

##### Olivier Michel [Cyberbotics] 01/12/2021 16:41:49
I would say emulation. The time is simulated and there is a fixed time step.

##### owongcho 01/12/2021 17:43:03
I see. thank you `@Olivier Michel`

##### Chernayaten 01/12/2021 19:14:50
Thanks for the information. I haven't looked at the lecture yet, but I will do so soon. I actually came to the same result as you, the outside distance seems to work better for some reason.



I also suspect that the initial anchor positions from the given example are wrong, unless I am mistaken. From Tutorial 6 on the 4 wheeled robot, the anchor field of the HingeJointParameters node should have the same values as the Solid translation one, but the robot of the pen.wbt world is missing the x values.



I'll review your information and hopefully get a good result. Thanks again (:

##### duct 01/13/2021 00:49:06
I have the pioneer 3dx robot in between two walls. What would be a good way to ensure that the robot is straight/aligned with the wall? I tried checking two side sensors and making sure they return very similar values, or adjusting until they do, but the distance sensors are very noisy and not consistent much.



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/798715662129823805/unknown.png)
%end


How do I make sure the robot is straight?

##### TerryWr1st 01/13/2021 01:37:07
Have you specified a noise value in the sensor lookup table? Otherwise they should be accurate.



Also, when your robot is in the above orientation, the distance sensor rays will be sent out on an angle (not perpendicular to walls as desired), which will increase/decrease your sensor values. So you would need to know your robot orientation for this approach as well

##### duct 01/13/2021 01:37:32
wdym specify noise value?


I can pick how little/much noise I want?


and oh yeah I didn't think about the angle thing thanks

##### TerryWr1st 01/13/2021 01:41:31
[https://cyberbotics.com/doc/reference/distancesensor](https://cyberbotics.com/doc/reference/distancesensor)



Scroll down to the lookup table section

##### duct 01/13/2021 01:42:37
wait so I can set my own noise stuff?


in code?


But if some competition is using webots that i'm participating in, what stops me from just setting 0 noise


how do I change the lookuptable values

##### TerryWr1st 01/13/2021 02:06:16
If the competition hasn't mentioned a restriction on sensor accuracy then dont set a noise.



From the documentation, first column is sensor input, second column is what you want the input to represent, third column is the noise value.



You can change these values in the scene tree (expand the fields of your distance sensor), or open the wbt file with a text editor

##### duct 01/13/2021 03:05:56
got it thanks

##### Wasabi Fan 01/13/2021 04:52:17
I have a small projectile (on the order of 1cm diameter in the real world) that I'd like to simulate at moderate-to-fast speeds (tens of m/s) and detect contact with a particular square surface on a target robot. This is currently using a `TouchSensor`. Unfortunately, even with a projectile a few times larger and speeds a fraction of real-world, the simulation time step is too large to consistently (or, at higher speeds, essentially at all) have a time slice in which the projectile is actually intersecting the target. In other words, the collision is never detected. This is true even if I up the simulation speed to thousands of Hz, which isn't practical anyway. As far as I can gather, TouchSensor collision detection is purely based on intersection after a discrete time step.



One solution which seems technically possible but perhaps not practical is some form of intra-step interpolation (e.g., a ray intersection check which approximates my projectile as a point -- my understanding is that ODE supports this in some form).  What are others' thoughts here? And is there actually a practical means of implementation for the above in my Webots sim, with or (ideally) without a physics plugin? Alternately, this seems to be approaching the scale at which doing a purely mathematical hit-test without ever simulating the projectile may make more sense -- however, I \_do\_  need to simulate the time-of-flight, and I'm not sure what API would be sensible for computing those collisions, if any.

##### Luiz Felipe 01/13/2021 04:56:55
`@Wasabi Fan` , does decreasing the time step does not work even implementing a collision detector using a physics plugin following: [https://cyberbotics.com/doc/reference/introduction-of-the-physics-plugins](https://cyberbotics.com/doc/reference/introduction-of-the-physics-plugins) ?

##### Wasabi Fan 01/13/2021 05:01:28
I tried that once with a "normal" time-step (~60Hz) and it did not seem to change the results. Setting up the toolchain to compile physics plugins is a bit of extra work (which I preferred to not introduce into my general setup process), which is why I haven't done a lot of experimenting with it, but it's not out of the question. However, it's not clear to me what that sample plugin is intended to do -- is there an expectation that the joint-attachment collision handling is better in a scenario like this?

##### Olivier Michel [Cyberbotics] 01/13/2021 07:11:38
A possible solution (without a physics plugin) would be to turn the bullet into a Robot with the supervisor field set to TRUE. Then, add a distance sensor to the bullet looking backwards. At each time step, you should get the current position of the bullet and compute the vector between the current position and the previous position. You will use this vector to change the orientation of the distance sensor so that it looks exactly at the previous position and make a sensor measurement in the same time step. If the distance measured is smaller than the distance between the current and previous position, then a collision occurred and you should set the position of the bullet at the place of collision (which can easily be computed along the distance sensor ray).

##### Wasabi Fan 01/13/2021 07:16:36
Oh wow, that's very inventive and \_sounds\_ workable. I think there are some details I'd need to work out but I shall try that in the next few days and report back if I run into issues. Thanks!

##### Olivier Michel [Cyberbotics] 01/13/2021 07:17:28
I would truly appreciate your feedback on this.

##### Moha 01/13/2021 08:38:00
hi guys

when I run external controller for nao\_demo\_python using pycharm after mentioned configuration in related link, I see according errors in pycharm, anybody knows the solution ?



C:\Users\MoHa\AppData\Local\Programs\Python\Python39\python.exe C:/Users/MoHa/Desktop/0/nao/controllers/nao\_demo\_python/nao\_demo\_python.py

Traceback (most recent call last):

  File "C:\Users\MoHa\Desktop\0\nao\controllers\nao\_demo\_python\nao\_demo\_python.py", line 18, in <module>

    from controller import Robot, Keyboard, Motion

  File "C:\Users\MoHa\AppData\Local\Programs\Webots\lib\controller\python39\controller.py", line 11, in <module>

    webots\_home = os.environ['WEBOTS\_HOME']

  File "C:\Users\MoHa\AppData\Local\Programs\Python\Python39\lib\os.py", line 679, in \_\_getitem\_\_

    raise KeyError(key) from None

KeyError: 'WEBOTS\_HOME'



Process finished with exit code 1

##### Luftwaffel [Moderator] 01/13/2021 08:40:21
[https://www.cyberbotics.com/doc/guide/running-extern-robot-controllers?tab-language=python&tab-os=linux](https://www.cyberbotics.com/doc/guide/running-extern-robot-controllers?tab-language=python&tab-os=linux)


you have to set your environment variablres

##### Moha 01/13/2021 08:41:58
in pycharm or windows environment variables ?

##### Luftwaffel [Moderator] 01/13/2021 08:42:39
usually windows



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/798834582328967208/unknown.png)
%end


like this


also add the Path variables

##### Moha 01/13/2021 08:44:18
👍

##### yash 01/13/2021 11:00:50
Hi !  I want to use this supervisor function -  def addForce(self, force, relative). Therefore what exactly should I specify in the relative argument .?

##### Luftwaffel [Moderator] 01/13/2021 11:23:34
You're right, the documentation is not 100% clear here. When you look at the C or C++ code, you see the type is BOOL


so I'd assume setting it to True = force relative to Solid, False = force relative to world


`@Olivier Michel` We should update the documentation

##### yash 01/13/2021 11:26:15
okay , let me try that.

##### Olivier Michel [Cyberbotics] 01/13/2021 11:28:03
It seems clear to me: [https://cyberbotics.com/doc/reference/supervisor#wb\_supervisor\_node\_add\_force](https://cyberbotics.com/doc/reference/supervisor#wb_supervisor_node_add_force)

##### Luftwaffel [Moderator] 01/13/2021 11:28:31
when looking at the Python code, it is not clear that it is boolean

##### Olivier Michel [Cyberbotics] 01/13/2021 11:28:45
Feel free to suggest some change here: [https://github.com/cyberbotics/webots/edit/released/docs/reference/supervisor.md](https://github.com/cyberbotics/webots/edit/released/docs/reference/supervisor.md)

##### Luftwaffel [Moderator] 01/13/2021 11:28:56
already at it 😉


[https://github.com/cyberbotics/webots/pull/2646](https://github.com/cyberbotics/webots/pull/2646)

##### Chernayaten 01/13/2021 11:34:43
From Tutorial 6 on the 4 wheeled robot, the anchor field of the HingeJointParameters node should have the same values as the Solid translation one. Is this correct?

##### Olivier Michel [Cyberbotics] 01/13/2021 11:37:19
Reviewed.


Yes.

##### Chernayaten 01/13/2021 11:41:13
There's a discrepancy in the pen.wbt device example

##### Olivier Michel [Cyberbotics] 01/13/2021 11:43:27
What is the problem?

##### Chernayaten 01/13/2021 11:44:30
The anchor field of the HingeJointParameters node is 0 0.025 0 whereas the Solid node (for the wheel) is -0.045 0.025 0 (and 0.045 for the other wheel)


This is in the Pen device example

##### Olivier Michel [Cyberbotics] 01/13/2021 11:49:28
This is correct, but is it not essential as the anchor may be anywhere on the rotation axis. However, you are right it is better to have it as close as possible to the rotating part (the wheel in this case) for stability reasons. May I let you propose a patch here: [https://github.com/cyberbotics/webots/edit/master/projects/samples/devices/worlds/pen.wbt](https://github.com/cyberbotics/webots/edit/master/projects/samples/devices/worlds/pen.wbt) ?

##### Chernayaten 01/13/2021 11:53:48
Done

##### Olivier Michel [Cyberbotics] 01/13/2021 11:55:40
Thank you. I approved it. You should be able to merge it once the CI tests are complete.

##### Chernayaten 01/13/2021 13:00:44
" Only those with write access to this repository can merge pull requests. "

##### Olivier Michel [Cyberbotics] 01/13/2021 13:06:56
OK, I merged it. Thank you.


I sent you a GitHub invitation to become "Committer" on this repo with write access.

##### AngelAyala 01/14/2021 12:53:23
Hi, I'm currently using a Reinforcement Learning algorithm with webots, and therefore it ia necessary to reset the simulation to its initiql state. A strange thing happens sometimes whe I'm testing the algorithm but webots start to use a huge memory amount reaching 5GB and it increases when the simulation is reset. I'm currently running three robots nodes and one is the supervisor as the agent interface, anyone else had been experiencing this or maybe you have any idea why it is happening?


On robot includes uses two display nodeeO


The other one is controlling the Mavic drone

##### Darko Lukić [Cyberbotics] 01/14/2021 12:57:13
Are you sure that Webots uses all that memory and not the controllers?


It would be great to isolate the issue and report it:

[https://github.com/cyberbotics/webots/issues/new?assignees=&labels=&template=bug\_report.md](https://github.com/cyberbotics/webots/issues/new?assignees=&labels=&template=bug_report.md)

##### AngelAyala 01/14/2021 12:58:49
In the system monitor it appears assigned to the webots - bin process


Any controller is executed isolated from main process right?

##### Darko Lukić [Cyberbotics] 01/14/2021 12:59:18
Yes

##### AngelAyala 01/14/2021 13:01:13
Ok I will poste there

##### Kirlin 01/14/2021 19:44:08
Hi, can someone help me about boundingObject Box ? I'm using a Free 3D Butter Stick model in a simulation (that will be part of a robotics immersion week in college), but the mesh has probably some internal conflicts, so if I use it as the boundingObject Box the Solid will actually tilt out of the screen.

My solution is use a box shape as the bounding box, since I dont need the object to be precisely cut. Anyway, when I put the Box as the boundingObject Box, it wont go to the center of the object, and, no matter how I change the dimensions of the Box, it wont fit the object as wished. So, here is my question: Can I move the "center" (in relation to the object)  of a boundingObject Box ?


here is the pic of the uncentered boundingObject Box
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/799363474299420732/unknown.png)
%end


PS: I'm on Ubuntu

##### Darko Lukić [Cyberbotics] 01/14/2021 19:55:04
You can add the `Box` node in a `Transform` node.

##### Kirlin 01/14/2021 19:56:45
Can you describe more how I do this ? I've never used a Transform node

##### Darko Lukić [Cyberbotics] 01/14/2021 19:59:54
It should be `boundingObject > Transform > children > Box`



[https://cyberbotics.com/doc/reference/transform](https://cyberbotics.com/doc/reference/transform)

##### Kirlin 01/14/2021 20:06:42
Wow, this is so useful, helped me pretty out, thanks so much!!

##### Wasabi Fan 01/15/2021 02:32:14
I'm taking a look at this in more depth, and now realize one part of my desired functionality is that I know \_what\_ the projectile hit. There is a particular surface on the robot (at the moment, I'm enclosing it in a TouchSensor boundary) which is being aimed at, and other parts of the robot (or elements of the surroundings) \_aren't\_ something I want to detect. In fact, at these speeds, there's some risk of going \_through\_ the robot and seeing the other target on the back of that robot.



I think this could be solved if there is a way to know what object the distance sensor is seeing -- is this a possibility? One option we see is to add a `Recognition` on a camera, with small FOV, pointing in the same direction as the distance sensor, and use that to disambiguate. I think it \_should\_ work, minus approximation error for the bounding boxes and any perf hit. Is there a more sensible way?

##### Olivier Michel [Cyberbotics] 01/15/2021 08:19:14
Yes, this should work but it looks a bit overkill. Instead of this, you could add `TouchSensor` nodes in the walls and when you move back the bullet into the wall, this touch sensor would be activated so that you know which wall was hit.

##### MartinG 01/15/2021 08:37:13
`@Wasabi Fan` I'd recommend taking a more mathematical approach to this, it would execute quite a bit faster than using all kinds of sensors and what not. If you can get the current position of both the projectile and your robot and you know the size of both of them, it's as easy as a couple if conditions to check for a collision.


There's a ton of information on collision detection online, however if you have any specific issue, I'd be glad to help.

##### Luftwaffel [Moderator] 01/15/2021 08:58:34
Perhaps try running it without the displays. That is a lot of memory. Sounds to me like a lot of visual data is cumulatively buffered. You could also share your project (you can pm me too) and I'll have a look.


Oh and I have some experience with RL and Webots too, just fyi 🙂

##### yash 01/15/2021 09:02:55
this happens when I use the function---  addTorque()
%figure
![Screenshot_from_2021-01-15_14-31-59.png](https://cdn.discordapp.com/attachments/565154703139405824/799564262326272000/Screenshot_from_2021-01-15_14-31-59.png)
%end

##### Luftwaffel [Moderator] 01/15/2021 09:08:49
In the Webots source code there is CCD functionality (Continuous collision detection). This would probably solve this problem. `@Olivier Michel` Is it possible to use that collision detection method? Either through a plugin or custom compile?

##### MartinG 01/15/2021 09:13:26
Where can I find it? I'd like to look through it.

##### Luftwaffel [Moderator] 01/15/2021 09:14:13
[https://github.com/cyberbotics/webots/tree/master/src/ode](https://github.com/cyberbotics/webots/tree/master/src/ode)


libccd is the library


[https://github.com/danfis/libccd](https://github.com/danfis/libccd)

##### Olivier Michel [Cyberbotics] 01/15/2021 09:14:35
This might be possible but would certainly require a significant development effort.

##### MartinG 01/15/2021 09:14:54
Thanks.

##### Luftwaffel [Moderator] 01/15/2021 09:17:42
I suspected as much. I hope something along these lines is somewhere on the roadmap. This is one of the few areas, where Webots is behind its competition: The low level control of physic engine settings and choice of different collision detection methods.


But I understand that it is not the highest priority and a lot of work

##### DrakerDG 01/15/2021 09:27:45
Hey, I tried to install webots on ubuntu but it tells me that it can't download the .deb file, apparently it can't find it. Does anyone know how to solve this problem?
%figure
![Screenshot_from_2021-01-15_03-23-15.png](https://cdn.discordapp.com/attachments/565154703139405824/799570511645376522/Screenshot_from_2021-01-15_03-23-15.png)
%end

##### Luftwaffel [Moderator] 01/15/2021 09:30:02
what command did you use?


did you follow these steps? [https://cyberbotics.com/doc/guide/installation-procedure#installing-the-debian-package-with-the-advanced-packaging-tool-apt](https://cyberbotics.com/doc/guide/installation-procedure#installing-the-debian-package-with-the-advanced-packaging-tool-apt)

##### DrakerDG 01/15/2021 09:32:55
Yes:



wget -qO- [https://cyberbotics.com/Cyberbotics.asc](https://cyberbotics.com/Cyberbotics.asc) | sudo apt-key add -

sudo apt-add-repository 'deb [https://cyberbotics.com/debian/](https://cyberbotics.com/debian/) binary-amd64/'

sudo apt-get update

sudo apt-get install webots

##### mjc87 01/15/2021 09:34:28
`@DrakerDG` I noticed that there is a mistake in the install script it should be releases/download/R2021a/webots\_2021a\_amd64.deb I think

##### Luftwaffel [Moderator] 01/15/2021 09:34:48
maybe download it manually. The version just changed to 2021. **[https://github.com/cyberbotics/webots/releases/tag/R2021a](https://github.com/cyberbotics/webots/releases/tag/R2021a)**


`@Olivier Michel` I think you should take a look and make sure the script is correct

##### DrakerDG 01/15/2021 09:35:43
Ok, I will try

##### MartinG 01/15/2021 09:36:28
What's the exact command you entered to download it? Can you copy it from your console?

##### Luftwaffel [Moderator] 01/15/2021 09:36:42
he did

##### MartinG 01/15/2021 09:36:53
Oh, sorry I didn't see.

##### Olivier Michel [Cyberbotics] 01/15/2021 09:48:37
Which script are you referring to?

##### Luftwaffel [Moderator] 01/15/2021 09:52:04
I dont know how apt works, but It looks for the wrong file. Read the last 4 lines of his console screenshot

##### Olivier Michel [Cyberbotics] 01/15/2021 09:53:27
Yes, I saw that, but there is no script about it.

##### Luftwaffel [Moderator] 01/15/2021 09:53:57
what could cause this issue?

##### Olivier Michel [Cyberbotics] 01/15/2021 09:54:10
I don't know. I am investigating...

##### mjc87 01/15/2021 09:54:45
Yes, thats what I was referring, I also have very little knowledge of apt

##### yash 01/15/2021 09:55:35
I am facing an issue where my controller is crashing when I use the supervisor function - addTorque()
%figure
![Screenshot_from_2021-01-15_14-31-59.png](https://cdn.discordapp.com/attachments/565154703139405824/799577517596868608/Screenshot_from_2021-01-15_14-31-59.png)
%end

##### MartinG 01/15/2021 09:56:06
I think seeing your code and world would be helpful to get a better idea of what might be wrong.

##### yash 01/15/2021 09:56:38
sure



> **Attachment**: [force\_control.py](https://cdn.discordapp.com/attachments/565154703139405824/799578002249089053/force_control.py)


this is the controller code

##### Olivier Michel [Cyberbotics] 01/15/2021 09:58:21
Are you on Ubuntu 20.04?

##### MartinG 01/15/2021 10:00:58
I think that the problem is in your last line of code, f=Node.addForce(hf,force,relative=False)

##### yash 01/15/2021 10:01:15
yes but how to rectify it

##### MartinG 01/15/2021 10:01:22
You're calling addForce from the Node object instead of on the node that you want it to be executed on.


actually no


try changing f to hf


I saw that you defined the foot as hf before the while loop


That is most likely your problem.

##### yash 01/15/2021 10:04:06
so should I define hf=robot.getFromDef("human\_foot")   in the while loop ?

##### MartinG 01/15/2021 10:04:31
No, in your last line just put an h before f


hf=Node.addForce(hf,force,relative=False)


I’m not sure that will work, but f doesn’t exist prior to that so it’s a likely cause.

##### yash 01/15/2021 10:05:46
its the same issue still, didnt work

##### MartinG 01/15/2021 10:06:05
Okay, give me five minutes.


I'll message you privately to not crowd the chat here.

##### Olivier Michel [Cyberbotics] 01/15/2021 10:38:38
I believe the problem is now fixed (it was due to a misconfiguration of our debian server). Can you try again and report and success or failure?

##### DrakerDG 01/15/2021 10:46:47
`@Olivier Michel` Ok, at the moment you are downloading the binary file

##### mjc87 01/15/2021 10:46:57
`@Luftwaffel` I've seen you've done some domain randomisation in the past, is it possible to introduce randomness to world descriptions so that blocks appear in a different place each time a simulation is started?

##### Olivier Michel [Cyberbotics] 01/15/2021 10:56:24
Great, let me know if that finally works.

##### Luftwaffel [Moderator] 01/15/2021 10:57:59
`@mjc87` [https://drive.google.com/file/d/1Z2332YFU1Um1NCwx3PoTcOE2jdu6QUxP/view?usp=sharing](https://drive.google.com/file/d/1Z2332YFU1Um1NCwx3PoTcOE2jdu6QUxP/view?usp=sharing) I did this a while back. Domain Randomization to create cv training dataset

##### mjc87 01/15/2021 10:59:55
Thanks, please could you give me a pointer how you implemented it? I'm trying to generate a student robot challenge where some 'targets' are randomly placed

##### Luftwaffel [Moderator] 01/15/2021 11:00:40
let me see if I can find that project


`@mjc87` [https://drive.google.com/file/d/1vp4ZzyA44JpcGbI5NEUsCNZ7eRFrYd4g/view?usp=sharing](https://drive.google.com/file/d/1vp4ZzyA44JpcGbI5NEUsCNZ7eRFrYd4g/view?usp=sharing) take a look at this


the large size is due to the textures

##### DrakerDG 01/15/2021 12:22:32
It is works 😆 thank you)



%figure
![Screenshot_from_2021-01-15_05-53-32.png](https://cdn.discordapp.com/attachments/565154703139405824/799614996047986708/Screenshot_from_2021-01-15_05-53-32.png)
%end



%figure
![Screenshot_from_2021-01-15_05-55-28.png](https://cdn.discordapp.com/attachments/565154703139405824/799615195914960906/Screenshot_from_2021-01-15_05-55-28.png)
%end

##### Olivier Michel [Cyberbotics] 01/15/2021 13:03:56
Nice! Thank you for the feedback.

##### R\_ 01/15/2021 13:57:14
[https://stackoverflow.com/questions/64875476/reinforcement-learning-webots-simulator](https://stackoverflow.com/questions/64875476/reinforcement-learning-webots-simulator)

##### valeria 01/15/2021 14:49:49
Hello, can anyone help me out? This is my very first time using webots and I'm using VS to write my Java code, however when I saved the file some "import errors" appeared. I have installed JDK and I use macOS then I don't understand why I have this. I also tried to clean the workspace but didn't work. Does anyone if I need to install something else in order to make it work?
%figure
![Screenshot_2021-01-15_at_15.48.25.png](https://cdn.discordapp.com/attachments/565154703139405824/799651562208755773/Screenshot_2021-01-15_at_15.48.25.png)
%end

##### Luftwaffel [Moderator] 01/15/2021 18:27:02
`@valeria` [https://www.cyberbotics.com/doc/guide/running-extern-robot-controllers?tab-os=macos&tab-language=java](https://www.cyberbotics.com/doc/guide/running-extern-robot-controllers?tab-os=macos&tab-language=java) This may help. You have to set up some environment variables when using extern controllers (your own IDE like VC)

##### devDbb 01/16/2021 15:58:04
I am trying to create a keyboard controller to my robot but it says INFO: my\_controller3: Starting controller: python.exe -u my\_controller3.py

WARNING: my\_controller3: The process crashed some time after starting successfully.

WARNING: 'my\_controller3' controller crashed.
%figure
![Cnt1.JPG](https://cdn.discordapp.com/attachments/565154703139405824/800031127715708938/Cnt1.JPG)
%end



%figure
![cnt2.JPG](https://cdn.discordapp.com/attachments/565154703139405824/800031139582574592/cnt2.JPG)
%end


Can anyone help me

##### Apashe 01/16/2021 17:59:25
Hello, What is the diameter of the wheels at iRobot's Create??

##### Chernayaten 01/16/2021 18:56:12
" Note [Python]: In C++, Python and Java the keyboard functions are in a dedicated class called Keyboard. In order to get the Keyboard instance, you should call the getKeyboard function of the Robot class. "


This is what I read about the Keyboard class, whereas in your code you do kb = Keyboard()


I believe it is 0.062

##### Apashe 01/17/2021 14:04:46
in general, where can I see all the data on the robot iRobot's Create as on the E-puck robot?

Can I have a link?

##### Chernayaten 01/17/2021 15:22:10
Robots are located under \Webots\projects\robots . From there you can navigate to the robot you can and find the protos folder (if there is one) and find the proto file you want. So for example the Create robot proto file for me is located under "C:\Program Files\Webots\projects\robots\irobot\create\protos" and the e-puck one under " C:\Program Files\Webots\projects\robots\gctronic\e-puck\protos"



You can read some more on the PROTO mechanism here: [https://cyberbotics.com/doc/reference/proto](https://cyberbotics.com/doc/reference/proto)


`@Apashe`

##### Tahir [Moderator] 01/18/2021 11:00:32
Hello,

How can we access individual value inside the SFVEC3F in proto files?


For example:

position IS frontRightLeg.x

Or

position IS frontRightLeg[0]


These both gave errors

##### Olivier Michel [Cyberbotics] 01/18/2021 11:02:58
You cannot based on the `IS` keyword. Instead, you should rely on Lua scripting to extract the individual components of a `SFVec3f`.

##### Tahir [Moderator] 01/18/2021 11:04:34
OK than instead

position IS frontRightLegHip


Where frontRightLegHip is SFFLOAT


This should work


?

##### Olivier Michel [Cyberbotics] 01/18/2021 11:08:55
Yes, see an example of this page: [https://cyberbotics.com/doc/reference/procedural-proto-nodes](https://cyberbotics.com/doc/reference/procedural-proto-nodes)


In particular `fields.stepSize.value.x` to extract X component from `SFVec2f stepSize`.

##### Tahir [Moderator] 01/18/2021 11:19:30
OK thanks alot

##### ahforoughi 01/18/2021 11:58:50
Hi guys, How can we use openai gym in this platform? i want to simulate and train a robotic arm

##### MartinG 01/18/2021 11:59:48
I'll go ahead and guess that the Supervisor functionality is going to be your best friend for that.

##### Darko Lukić [Cyberbotics] 01/18/2021 13:04:02
You may find the following project relevant:

[https://github.com/aidudezzz/deepbots](https://github.com/aidudezzz/deepbots)

##### John520 01/18/2021 17:11:34
Hi guys, would it be possible to create a crop field, for example a canola field, and a tractor can go inside the field to harvest? Thank you very much for your help!

##### Luftwaffel [Moderator] 01/18/2021 17:13:46
Probably depends on how visually accurate you want it. The simplest method I can imagine, is using a texture of the field, and then paining with the Pen node on top of that picture, where the tractor has harvested


[https://cyberbotics.com/doc/reference/pen](https://cyberbotics.com/doc/reference/pen)


that would probably have the least performance impact

##### John520 01/18/2021 17:26:36
Thank you very much for your help, `@Luftwaffel` ! Except for creating a field of canola, I would also like to use a Lidar sensor to measure the height of the canola so that the harvesting header in front of the tractor can adjust its height accordingly for better harvesting. Is it possible to do so? Thanks a lot.


In other words, could the canola field be created with different heights?

##### Luftwaffel [Moderator] 01/18/2021 17:31:01
[https://cyberbotics.com/doc/reference/elevationgrid?tab-language=python](https://cyberbotics.com/doc/reference/elevationgrid?tab-language=python)


perhaps this


I dont know how you would harvest it though

##### John520 01/18/2021 17:40:51
Thank you, `@Luftwaffel`. Can the tractor go inside the field created by the elevationGrid? Can a lidar sensor detect the field?

##### Luftwaffel [Moderator] 01/18/2021 18:45:07
it should be possible. You can disable collision and only have the visual Grid

##### John520 01/18/2021 20:56:29
Thank you `@Luftwaffel`. Sounds great! I am going to try it out. Would it be possible to model a simple header (like a rectangular shape) and attach it to the tractor?

##### Homeralf 01/18/2021 23:56:27
Hi guys,



I would like to thank the team for this great simulator, the API and documentation are so great.

I'm a hobbyist trying to develop a muscle-based robot and I've encountered a couple of issues.



I want to carry a simulation from a single python process.

As far as I know, each robot's external controller must be contained in its own process, so I spawn multiple processes from the main process (with the corresponding environment variables).

The actual problem comes when sharing data among processes. The objects I try to share can't be pickled (serialized) because they contain SwigPyObjects. I can solve this but is cumbersome and not idiomatic.



So I have a couple of questions I hope you can help me with:

Is there a way to run controllers without spawning additional processes?

I guess the serialization problem can't be solved because of Swig, however, I think an update on the python API is on the roadmap. It is possible this may solve this issue?





Thanks in advance!

##### Luftwaffel [Moderator] 01/19/2021 08:19:41
`@Homeralf` Taking a step back, why do you want it to run from the same process? What data do you want to share?


In general [https://docs.python.org/3/library/multiprocessing.html](https://docs.python.org/3/library/multiprocessing.html) can work really well for parallel processing and data sharing. Then there is middlewares such as ROS. Webots itself has the Transmitter and Receiver node, which you can use to send data between Robots

##### Darko Lukić [Cyberbotics] 01/19/2021 08:45:08
Hello `@Homeralf`. I am glad you like Webots. As you mentioned, the objects cannot be serialized because of SWIG. If you saw PR with objective to move away from SWIG in favor of Python native bindings then I believe that will not solve your problem. Maybe we can do something like this:

[https://stackoverflow.com/questions/9310053/how-to-make-my-swig-extension-module-work-with-pickle](https://stackoverflow.com/questions/9310053/how-to-make-my-swig-extension-module-work-with-pickle)


You cannot run the controllers in the same process

##### Luftwaffel [Moderator] 01/19/2021 09:29:02
You also might want to take a look at pyro5. Could be exactly what you need

##### Homeralf 01/19/2021 09:42:57
Hello `@Luftwaffel`



I want to run it from the same process because among other things I want to automate multiple simulations based on evolutionary algorithms.

The controllers must receive input from higher abstractions like the activations of the muscles, where the robot should be headed, the target speed of a solid, etc.



Yes, I was using the BaseManager from multiprocessing to share the data. However, it wouldn't work because the objects can't be serialized.

I would like to keep the project as lean as possible and I think using ROS may be a little bit overkill for now but I will consider it if things get complicated (I may be wrong).

Transceiver and receiver nodes seem like a good solution among robots.

Didn't know about pyro5, looks promising! I will give it a try!



Thanks for your time Simon, really appreciated it.


Hi `@Darko Lukić`,



Yes, that was the PR I saw.

Nice, looks exactly like the solution. I will try to implement it as soon as I get back from work.



Thanks for answering the questions, you've helped me a lot.

##### gaitt 01/19/2021 10:20:48
Hi guys,

I'm building a tutorial for our software. The tutorial use Webots and ROS2. So far, so good.

Basically, I have a scene with a UR5e robot and some objects. We execute some trajectories with the followJointTrajectory action.

I would like now to go further and to do so, I need to know the position of some Webots objects in ROS2. For example, the robot move a bottle and I would like to get the bottle position to be published in ROS2 through a geometry\_msgs::Pose.

Any idea how I can achieve this using C++/ROS2 API?

##### Darko Lukić [Cyberbotics] 01/19/2021 10:29:20
`@gaitt` You can use Supervisor:

[https://www.cyberbotics.com/doc/reference/supervisor#wb\_supervisor\_node\_get\_position](https://www.cyberbotics.com/doc/reference/supervisor#wb_supervisor_node_get_position)



Do you use the `webots_ros2` package or you created your own interface?

##### Luftwaffel [Moderator] 01/19/2021 10:31:16
If you want positions of objects relative to others (your robot for example), then you can use this script I made. Or you can at least take inspiration from it and create it in c++
> **Attachment**: [get\_relative\_position.py](https://cdn.discordapp.com/attachments/565154703139405824/801036050230673468/get_relative_position.py)

##### gaitt 01/19/2021 10:31:26
Yes I already use the  `webots_ros2` package.

##### Luftwaffel [Moderator] 01/19/2021 10:32:11
The supervisor only gives you absolute (world) coordinates. For inverse kinematics you usually need it realtive to the robot base


If you end up creating something like this in c++, it would be nice if you could share

##### gaitt 01/19/2021 10:38:43
Thanks `@Luftwaffel`, well absolute position is what I need.


I was thinking there was an easier solution that writing a new ROS2 node.

##### Luftwaffel [Moderator] 01/19/2021 10:40:46
You need a supervisor controller (can be your ur5e). It can then get and publish the positions of anything in the simulation

##### yash 01/19/2021 11:39:11
Hi ! I am using wb\_motor\_get\_torque\_feedback(),  to get torque of motors for a 2R manipulator. But the function returns me the same value of torque for all the motors ? What could be the issue ?

##### Luftwaffel [Moderator] 01/19/2021 11:47:41
can you post your code or controller file?

##### yash 01/19/2021 11:48:01
alright



> **Attachment**: [force\_control.py](https://cdn.discordapp.com/attachments/565154703139405824/801055822753955870/force_control.py)

##### Luftwaffel [Moderator] 01/19/2021 11:53:24
line 104-108


you use the same motor


that might be it 😉

##### yash 01/19/2021 11:58:30
shit yes ! thanks a lot , very silly thing.

##### Luftwaffel [Moderator] 01/19/2021 11:58:50
it happens :p

##### yash 01/19/2021 11:58:57
I would like to plot these values , how can it be done ?

##### Luftwaffel [Moderator] 01/19/2021 11:59:24
double click on the robot, it should be plotted there


the robot window

##### yash 01/19/2021 12:06:07
No, but these are values that give torque feedback and doesn’t take any sensor into Accout


account*

##### Luftwaffel [Moderator] 01/19/2021 12:06:56
then you have to either make a custom robot window, or plot it yourself with a python library


or use external IDEs

##### yash 01/19/2021 12:08:01
understood, I am using matplotlib, but I plot them with respect to time right i.e robot.step(timestep)?

##### Luftwaffel [Moderator] 01/19/2021 12:08:51
time = robot.getTime()

##### yash 01/19/2021 12:09:06
oh okay

##### Luftwaffel [Moderator] 01/19/2021 12:09:17
that is the simulation time you see in Webots


which is increased by the timestep amount every step

##### yash 01/19/2021 12:11:29
ok, thank you very much

##### KamiKairo 01/19/2021 14:59:32
hello is there any tutorials on how to creat a snake like robot in webots as i know you have the yamor but i need to make an orrigonal one but its my first time using the software]

##### gaitt 01/19/2021 15:07:29
Can I retrieve a Supervisor from an already running instance of webots?

##### Luftwaffel [Moderator] 01/19/2021 15:23:29
A supervisor is used like the robot node. So you have to start a controller of a robot, which has supervisor = true checkmark in the scene tree


And instead of robot =Robot() you do robot = Supervisor()

##### gaitt 01/19/2021 15:37:11
Ok I managed to get it! It look likes, if webots is running I can't get the handle. I need first to create the supervisor and then launch webots to get the handle properly. Now let see how to parse the rootNode ...

##### Luftwaffel [Moderator] 01/20/2021 08:49:55
`@gaitt` A supervisor needs to be initialized. For that a robot controller needs to be launched. Usually all robots controllers are launched, when the simulation starts. Through the use of a supervisor controller, you can start and stop other controllers. But I dont think you can start your first supervisor controller later on in the simulation.


You should also always have this open in a tab: [https://www.cyberbotics.com/doc/reference/supervisor?tab-language=python](https://www.cyberbotics.com/doc/reference/supervisor?tab-language=python)

You'll have to reference it constantly. Luckily it is very detailed. Also remember, that the `Supervisor() `also has all the functionality of `Robot()`. So you dont have to change any of your existing code, should you chose to turn your ur5e into a supervisor. All motor / sensor controls work the same

##### Majanao 01/20/2021 11:31:45
Hi all, I would like to balance the camera of the DJI Mavic. Is it possible to rotate it through a python script or do I have to add two motors to the drone model?

##### Olivier Michel [Cyberbotics] 01/20/2021 11:33:53
Sure, this is possible. You will have to edit the drone model (PROTO file) to add this capability.


In fact, you don't need to edit the drone model. Instead you should create a pan tilt camera proto and add it in the `cameraSlot` of the Mavic2Pro model so that it is used instead of the default `Camera` node.

##### Majanao 01/20/2021 11:53:47
Thanks a lot. I'll try that.

##### gaitt 01/20/2021 17:15:06
`@Luftwaffel` Ok I see. Thanks a lot.

Another question: can we add other sensors to a predefined robot. I use the predefined UR5e and so the controller is external.

My goal would be to add a fixed rangefinder to the UR5e base and access it from my ROS2 node to process the depth image.


BTW, is there somewhere a piece of code to transform a rangefinder depth image to 3d points in world coordinate frame?

##### Apashe 01/20/2021 17:28:43
Hello, what is the distance between the wheels and the radius of the wheels themselves for the robot E-puck?

I did self.wheel\_radius = 0.021 and self.distance\_between\_weels = 0.052

but I don't have the full turn angle converge (I do it through the values PositionSensor)

##### Darko Lukić [Cyberbotics] 01/20/2021 17:31:46
`@Apashe` This may help:

[https://github.com/cyberbotics/webots\_ros2/wiki/Tutorial-E-puck-for-ROS2-Beginners#differential-drive-calibration](https://github.com/cyberbotics/webots_ros2/wiki/Tutorial-E-puck-for-ROS2-Beginners#differential-drive-calibration)


Yes, you can add any node to `toolSlot`


```py
def depth2pointcloud(depth_image, k_matrix):
    inv_fx = 1.0 / k_matrix[0, 0]
    inv_fy = 1.0 / k_matrix[1, 1]
    ox = k_matrix[0, 2]
    oy = k_matrix[1, 2]
    image_height, image_width = depth_image.shape
    points = np.zeros((image_width * image_height, 3), dtype=np.float32)
    counter = 0
    for y in range(image_height):
        for x in range(image_width):
            dist = depth_image[y, x]
            # This follows the coordinate system of the gripper
            points[counter, 1] = -np.float32((x - ox) * dist * inv_fx)
            points[counter, 2] = -np.float32((y - oy) * dist * inv_fy)
            points[counter, 0] = np.float32(dist)
            counter += 1
    return points[:counter].astype(np.float32)


def get_calibration_matrix_from_range_finder(range_finder):
    image_width = range_finder.getWidth()
    image_height = range_finder.getHeight()
    focal_length = 0.5 * image_width * (1 / math.tan(0.5 * range_finder.getFov()))
    k_matrix = np.array([
        [focal_length, 0, image_width / 2],
        [0, focal_length, image_height / 2],
        [0, 0, 0]
    ])
    return k_matrix


def get_point_cloud_from_range_finder(range_finder):
    depth_image = np.asarray(range_finder.getRangeImage(), dtype=np.float32)
    depth_image = depth_image.reshape((-1, range_finder.getWidth()))


    k_matrix = get_calibration_matrix_from_range_finder(range_finder)
    return depth2pointcloud(depth_image, k_matrix)
```

This snippet creates a point cloud in the range finder's reference frame.

##### gaitt 01/20/2021 17:38:51
Thanks a lot, much appreciated.

##### Apashe 01/20/2021 17:39:00
I don't use ros

##### Darko Lukić [Cyberbotics] 01/20/2021 17:39:55
I know, but the principle is the same. You rotate the robot and move it along the line to calibrate it

##### Apashe 01/20/2021 17:40:19
I used the standard example for PositionSensor from Webots and [https://www.youtube.com/watch?v=WSjTWcTojHg&t=536s](https://www.youtube.com/watch?v=WSjTWcTojHg&t=536s)

##### Darko Lukić [Cyberbotics] 01/20/2021 17:41:01
`@Apashe`

```py
DEFAULT_WHEEL_RADIUS = 0.02
DEFAULT_WHEEL_DISTANCE = 0.05685
```

You can use these values

##### gaitt 01/20/2021 17:42:35
I did try `toolSlot` but as I expected it moves when the robot moves, I would like my rangefinder to be in a fixed frame

##### Apashe 01/20/2021 17:42:36
Thank you I'll go try it

##### Darko Lukić [Cyberbotics] 01/20/2021 17:43:33
I see, in that case you can add it in directly in the world

##### gaitt 01/20/2021 17:53:08
I'm not sure how, could you elaborate? Device node must belong to a robot node, right?

##### Darko Lukić [Cyberbotics] 01/20/2021 19:13:51
Yes, you would have two robot and two controllers, one of them just publishing the point cloud


Alternately, you can add the range finder to the UR PROTO directly

##### gaitt 01/21/2021 08:23:49
Ok thanks, I will try that!

##### MartinG 01/21/2021 10:22:45
Anyone have some tips on getting started with Lidars in Webots?

##### Luftwaffel [Moderator] 01/21/2021 10:46:21
Read the API documentation and just try them out :)

##### Tej 01/21/2021 14:55:02
good afternoon fellow robots

##### Apashe 01/21/2021 17:54:39
sending the robot coordinates from the supervisor to E-puck robot, but the data is not coming in

message = struct.pack('>7f', robot\_coords[0][0], robot\_coords[0][1], robot\_coords[0][2], robot\_coords[1][0], robot\_coords[1][1], robot\_coords[1][2], robot\_coords[1][3])

    emitter.send(message)



what could be the problem?
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/801872405399601182/unknown.png)
%end

##### fowzan 01/21/2021 17:59:09
Hi guys


Is there any simulation links available for Spot mini ?


`@Darko Lukić`


`@Olivier Michel`


I would love to simulate spot mini on my terminal , could you share links if available

##### Apashe 01/21/2021 18:26:40
I realized that the error in

self.receiver = self.getDevice('receiver')

if convert root to to base node and add receiver (with your hands and delete the old one)



everything works

why so?


the robot also has receiver, why doesn't it work?


how to connect to receiver without convert root to base node

##### Darko Lukić [Cyberbotics] 01/21/2021 19:06:06
[https://cyberbotics.com/doc/guide/spot](https://cyberbotics.com/doc/guide/spot)

##### fowzan 01/22/2021 08:42:53
Thank you


Is there any simulation for fleet management systems `@Darko Lukić`

##### Darko Lukić [Cyberbotics] 01/22/2021 08:45:02
Something like this:

[http://www.diegoantognini.com/projects/dis/](http://www.diegoantognini.com/projects/dis/)

##### Apashe 01/22/2021 08:45:11
Help me, please

##### Darko Lukić [Cyberbotics] 01/22/2021 08:47:12
I don't understand the issue. Can you send us a minimal example of the project so we can reproduce the problem?

##### Apashe 01/22/2021 08:52:58

> **Attachment**: [my\_odometry.7z](https://cdn.discordapp.com/attachments/565154703139405824/802098472752513044/my_odometry.7z)

##### fowzan 01/22/2021 08:54:23
What are the commands to move spot mini in webots ? I’m unable to navigate it
%figure
![image0.jpg](https://cdn.discordapp.com/attachments/565154703139405824/802098830870839366/image0.jpg)
%end


`@Darko Lukić`


Kindly share the commands

##### Darko Lukić [Cyberbotics] 01/22/2021 08:59:08
Your emitter and receiver don't use the same channel. Either change the `receiver_channel` value in the e-puck node, or `Emitter > channel` in the supervisor node.


[https://cyberbotics.com/doc/reference/nodes-and-api-functions](https://cyberbotics.com/doc/reference/nodes-and-api-functions)



But please go through the tutorials first:

[https://cyberbotics.com/doc/guide/tutorials](https://cyberbotics.com/doc/guide/tutorials)



Here is an example for Spot:

[https://github.com/cyberbotics/webots/blob/master/projects/robots/boston\_dynamics/spot/controllers/spot\_moving\_demo/spot\_moving\_demo.c](https://github.com/cyberbotics/webots/blob/master/projects/robots/boston_dynamics/spot/controllers/spot_moving_demo/spot_moving_demo.c)

##### Apashe 01/22/2021 09:07:10
thanks

##### fowzan 01/22/2021 09:08:08
Where should I change this ? Is it in the script


I tried but apart from raising the legs it is not navigating `@Darko Lukić`


Kindly help me out

##### MartinG 01/22/2021 09:49:48
getRangeImage and getLayerRangeImage both return the same amount of elements, the documentation says that getLayerRangeImage should only return the values of the requested layer.

##### Darko Lukić [Cyberbotics] 01/22/2021 10:02:11
`@MartinG` Can you confirm that `getRangeImage` is not equal to 1

##### MartinG 01/22/2021 10:06:37
I can now, just checked.

##### Darko Lukić [Cyberbotics] 01/22/2021 10:18:49
It indeed seems like a bug (I can reproduce it). Could please report the issue:

[https://github.com/cyberbotics/webots/issues/new?assignees=&labels=&template=bug\_report.md](https://github.com/cyberbotics/webots/issues/new?assignees=&labels=&template=bug_report.md)

##### MartinG 01/22/2021 10:19:11
Will do. Thanks.

##### gaitt 01/22/2021 10:36:59
Hey Darko, so I have tried the first approach. I added a 2nd robot with only the kinect in it. The robot controller is set to extern, supervisor is true for all robot. But when I launch the "webots\_robotic\_arm\_node", it seems to me that the joint state publisher get stuck! My custom ROS2 node seems to behave correctly and is loaded as controller for the 2nd robot. Can we have multiple supervisor, 1 per robot?

##### Darko Lukić [Cyberbotics] 01/22/2021 10:40:21
`@gaitt` Check this example on how to have more than 1 robot in a simulation:

[https://github.com/cyberbotics/webots\_ros2/blob/master/webots\_ros2\_demos/launch/armed\_robots.launch.py#L31-L45](https://github.com/cyberbotics/webots_ros2/blob/master/webots_ros2_demos/launch/armed_robots.launch.py#L31-L45)



The ROS2 interface will not handle two robots by itself as it cannot know how to assign controllers.

##### JSK 01/22/2021 10:49:48
hi fellows


how does the saveExperimentData() works in webots controller terminating?


It says  "NameError: name 'saveExperimentData' is not defined"

##### Darko Lukić [Cyberbotics] 01/22/2021 10:53:29
The `saveExperimentData` function is a placeholder function, you should implement it by yourself, it is just an example.

##### JSK 01/22/2021 11:00:23
ok

##### msoyer34 01/22/2021 22:44:43
Hey guys, I would like to ask a question



I am adding my own obj data to make a conveyor belt simulation but i fail to bound objects.



WARNING: DEF Simulation Robot > DEF stand\_pulley2 Solid > USE stand\_pulley2 > Shape > IndexedFaceSet: Mass properties computation failed for this IndexedFaceSet: the corresponding added mass defaults to 1kg, the added inertia matrix defaults to the identity matrix.Please check this geometry has no singularities and can suitably represent a bounded closed volume. Note in particular that every triangle should appear only once with its 'outward' orientation.



I am getting this error. What should i do ?



Thank you



I will add another question regarding to first problem, my object does not stand on the floor it passes, anyone knows anything about it?

##### Luftwaffel [Moderator] 01/23/2021 08:24:52
<@132121297277812736> your mesh file seems to be faulty. How did you generate it? There is tools and programs that can fix meshes. Webots told you the things that might be wrong


And for boundingObject, it is always better to approximate it with a simple geometric shape, such as a sphere, box, cylinder etc. It will make the simulation more stable and much faster


Should fix your second issue too

##### Azer Babaev [Starkit, TC] 01/23/2021 08:56:10
I am sorry for stupid question. Why Y axis stands for vertical direction? This I find in most of sample worlds. Conventionally Z stands for vertical. How much troubles I can encounter if I create world with Z vertical ?

##### Luftwaffel [Moderator] 01/23/2021 09:30:41
In world info you can change the coordinate system from nue to enu (or create a new world through the wizard with that)

##### msoyer34 01/23/2021 13:56:04
Thank you Simon for your responses. I am using NX for my design and I export my design as OBJ. But it seems it doesnt work properly in webots.


`@Luftwaffel`

##### Luftwaffel [Moderator] 01/23/2021 15:36:39
make sure the mesh is watertight

##### Azer Babaev [Starkit, TC] 01/23/2021 16:15:06
Thank you for answer. This feature is available in latest version of Webots therefore this  pushed me to update. Still I experience some inconvenience because after changing from nue to enu all protos comes imported in wrong orientation. Saving world  and re-loading world doesn’t help. Wizard doesn’t help to set up viewpoint and background light for enu. They must be changed by hands. May be I made something wrong with consequence of steps.

##### ptrepag 01/23/2021 19:58:55
Our robot has a set of omniwheels attached to encoders.  Each omniwheel can only rotate in one direction, but moves freely in the other direction.  This makes them ideal for capturing actual robot movement in the X and Y direction (we use this for position localization).  Does anyone have a suggestion for how best to model this in webots?    I could add a position sensor to a cylinder, but I worry that the drag in the other direction would mess things up.  Any assistance would be greatly appreciated.

##### Cyber Police Officer 01/24/2021 16:49:34
Hello. I tried to search this in the documentation, but found no results.



What does it mean when the "bounding objects" turn from white into purple?



(At t=0 some of the bounding objects are white but turn purple after a few seconds)



Thank you

##### Stefania Pedrazzi [Cyberbotics] 01/25/2021 07:21:27
The red/pink bounding objects means that this objects is colliding with some other objects. Then, if the object doesn't move any longer, after a while the boundingObject will turn blue. Otherwise if there is no collision the boundingObject color is white.

[https://www.cyberbotics.com/doc/guide/the-3d-window#selecting-an-object](https://www.cyberbotics.com/doc/guide/the-3d-window#selecting-an-object)

##### yash 01/25/2021 08:32:49
Hi ! I am using def getTorqueFeedback() function to compute torque of a mani[pulator link. I set the max available torque by using the function setAvailableTorque() to 2N.  Then I supply a velocity to the motors. So when I note down the values from the torque feedback, the values are not constant ? Since providing constant velocity to the motor, the torque should also be constant right ?


Please help me regarding this.

##### Cyber Police Officer 01/25/2021 09:25:31
Thank you!

##### Luftwaffel [Moderator] 01/25/2021 10:29:08
Hold something in a stretched out arm at your side and lift it up until you hold it horizontally. The torque required at your shoulder changes constantly, even if you move at constant speed. When accelerating or compensating external forces (stretched out arm), you need more torque. Without load and a constant speed, you need no torque (or just a little bit to compensate for friction)

##### yash 01/25/2021 10:35:02
therefore , since the link has mass, so when actuating it at a constant velocity the torque will change ?

##### Bitbots\_Jasper [Moderator] 01/25/2021 13:54:21
if a link has no mass it theoretically requires no torque to accelerate, does any child of the link have any mass?

##### yash 01/25/2021 14:13:00
Yes the link has mass , so definitely it will require torque

##### Bitbots\_Jasper [Moderator] 01/25/2021 14:13:33
ah sorry i misread your message

##### yash 01/25/2021 14:14:04
I give constant velocity, so the torque should also be constant right ?


Given by gettorquefeedback() function

##### Bitbots\_Jasper [Moderator] 01/25/2021 14:16:36
lets assume there is no gravity, at the beginning of the motion you will need some torque to accelerate the joint, when the joint has reached its desired velocity, you might need some torque to overcome friction, at the end of the motion you will require some torque in the opposite direction to decelerate the joint


if you now have gravity, the joint has to apply torque to overcome that gravity pulling on the center of mass of the attached link, depending on the angle between the gravity vector pointing downwards and the angle of the joint to the link it will require more or less torque to overcome this force

##### yash 01/25/2021 14:21:31
Therefore as per your your statement , there will always be increase or decrease in the torque .?

##### Bitbots\_Jasper [Moderator] 01/25/2021 14:22:05
it depends on what external forces are acting on the link

##### yash 01/25/2021 14:22:24
Only the gravity

##### Luftwaffel [Moderator] 01/25/2021 14:22:28
Just to make sure, do you understand what forces, torques, velocities and accelerations are? And how they interact with one another?

##### yash 01/25/2021 14:23:33
Yes.

##### Luftwaffel [Moderator] 01/25/2021 14:25:00
Okay, so lets assume an instance, where there is no gravity, and no friction. In this case, you only need torque to accelerate or decelerate. Remaining still,  or at constant velocity, requires no torque.


Is this clear, or is there something you want me to explain in more detail?

##### yash 01/25/2021 14:28:08
Oh okay , well understand !

##### Luftwaffel [Moderator] 01/25/2021 14:29:13
Now we turn gravity on. It will pull on the link and joint. This creates torque in the joint, assisting or fighting against the motor. So the motor torque has to change

##### yash 01/25/2021 14:30:56
Alright , because of the gravity or some exeternal force !

##### Luftwaffel [Moderator] 01/25/2021 14:31:45
Just imagine, you would suddenly turn the motor off, and it would just be a joint without friction. Would anything fall down, slow down, speed up? If the answer is yes, the motor would have to apply a torque to counter that

##### yash 01/25/2021 14:32:55
Understood, 👍

##### Luftwaffel [Moderator] 01/25/2021 14:33:07
[https://en.wikipedia.org/wiki/Newton%27s\_laws\_of\_motion](https://en.wikipedia.org/wiki/Newton%27s_laws_of_motion) Newtons laws in action 😄


Robotics is great. You actually need all the Maths and Physics you learned in school and at university

##### yash 01/25/2021 14:33:59
> Robotics is great. You actually need all the Maths and Physics you learned in school and at university

<@239507682111913984>  true !!!

##### Luftwaffel [Moderator] 01/25/2021 14:34:46
[https://en.wikipedia.org/wiki/Rotation\_around\_a\_fixed\_axis](https://en.wikipedia.org/wiki/Rotation_around_a_fixed_axis) this might be worth a read too.

##### yash 01/25/2021 14:35:21
Thank you !

##### Krish 01/25/2021 14:45:56
Is it possible for Webots arena/world to have pictures, animations and GIFs?

If so, how to add them?

##### Bitbots\_Jasper [Moderator] 01/25/2021 14:47:08
for images refer to [https://cyberbotics.com/doc/reference/imagetexture](https://cyberbotics.com/doc/reference/imagetexture)


you can also use normal and occlusion maps with PBRAppearance [https://cyberbotics.com/doc/reference/pbrappearance](https://cyberbotics.com/doc/reference/pbrappearance)


[https://cyberbotics.com/doc/reference/appearance](https://cyberbotics.com/doc/reference/appearance) might be the simples approach though

##### Cyber Police Officer 01/25/2021 14:59:52
Hello. Sorry to bother again with questions:



I'm trying to do a parallel manipulator, similar to the stewart platform, and i'm trying to close the kinematic loop. Like the stewart mechanism, this manipulator has a fixed platform and a mobile platform.



What i'm trying to do is defining the mobile platform. The mobile platform pose in space relative to the fixed is quite simple, but relative to the last joint is fairly complicated.

Is there any way to generate the mobile platform solid relative to the base (basically just making it a children of the robot node) while being a movable solid?



If I create the mobile platform as a children of the robot node, it won't move no matter how much force the actuators make. Also, if i remove all the links, the mobile platform just stays afloat, ignoring gravity. All solids in question have a physics node. On the other hand, if i create it as a child of the last joint, it behaves properly.



I tried to follow the stewart platform example, where they generate the mobile platform as a child of the last joint, but i was trying to avoid this path.



Thank you

##### alejanpa17 01/25/2021 17:26:50
Hi everyone! Hope you can help me with this, I have the 3d model of a specific traffic cone and I'm trying to put it some physics but im stuck with the bounding object.

First, I tried to use the mesh of the 3d model but when I run a sim im getting this error: "Your world may be too complex." that's obvious because the mesh got many faces.

Then I thought in using the cone geometry shape but apparently webots doesn't support the cone as a Bounding Object.

What do you suggest? Is there any way I can modify the default traffic cone of webots (because this one has physics)?

This is one of the cones I wanted to introduce in the sim:



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/803314977511440404/unknown.png)
%end

##### Luftwaffel [Moderator] 01/25/2021 17:28:49
Webots supports cones
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/803315455736414208/unknown.png)
%end


a cone plus box at the bottom should do the trick

##### alejanpa17 01/25/2021 17:34:58
It does supports cones but not as a  Bounding Object.
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/803317001136242708/unknown.png)
%end


link: [https://cyberbotics.com/doc/reference/node-chart](https://cyberbotics.com/doc/reference/node-chart)

##### Luftwaffel [Moderator] 01/25/2021 17:37:53
hmm you are right

##### duct 01/25/2021 18:58:57
in my simulation, my simulation window is drifting around in a circular shape without me doing anything. Any ideas why?

##### DrakerDG 01/26/2021 06:50:47
<@671921336385273856> check the view menu: The Follow Object submenu allows you to switch between a fixed (static) viewpoint and a viewpoint that follows a mobile object (usually a robot). If you want the viewpoint to follow an object, first you need to select the object with the mouse and then check one of the items of the submenu depending on the following behavior you want...

[https://cyberbotics.com/doc/guide/the-user-interface](https://cyberbotics.com/doc/guide/the-user-interface)

##### R\_ 01/26/2021 06:52:22
Is there a method Webots to create a 'ghost' robot (pure pose transformation through space without the effects of gravity and collisions affecting it?). This is shown in the video below. The robot in the darker shade is present in the physical world, whereas the other one is a ghost [https://www.youtube.com/watch?v=aiWxIjtMMFI](https://www.youtube.com/watch?v=aiWxIjtMMFI)

##### Olivier Michel [Cyberbotics] 01/26/2021 06:56:38
Yes, this possible by creating a robot without physics and animating it from a supervisor controller.

##### JSK 01/26/2021 07:40:41
Hello  there team


i am programming a controller for drone.


it takes of at 68.5


but i have given it more than 100 but it is not flying


motors are moving i.e. showing rotation


but the drone is not taking off


what could be the possible reason?


i am stuck here. need help

##### Olivier Michel [Cyberbotics] 01/26/2021 07:45:06
How did you create your drone model? Did you create it from the Mavic example?

##### JSK 01/26/2021 08:13:09
yes


Excuse me!

##### Olivier Michel [Cyberbotics] 01/26/2021 08:29:10
I would recommend you to revert back to the original drone model to check if it works with your controller and make changes step-by-step to identify where did the problem come from.

##### JSK 01/26/2021 09:30:03
Actually that drone is just imported in my\_first\_Simulation. it has nothing but just a drone. it is flying with "mavic2pro.c" controller but its not flying for mine. although  i have supplied rotor inputs. here is a screenshot of my envoirment.
%figure
![Screenshot_from_2021-01-26_14-01-08.png](https://cdn.discordapp.com/attachments/565154703139405824/803557358000930826/Screenshot_from_2021-01-26_14-01-08.png)
%end

##### Luftwaffel [Moderator] 01/26/2021 11:42:51
Perhaps share your project. It's hard to tell otherwise

##### Cyber Police Officer 01/26/2021 11:46:01
Is there a way to chain transform nodes in a bounding object? The bounding object allows a transform node with a shape child, I was wondering if there's a way to chain multiple transform nodes, where the last one has a shape child.


Or if there's a way to automatically compute the equivalent transform

##### Luftwaffel [Moderator] 01/26/2021 11:48:08
With just translations you can simply add them. Otherwise you have to do matrix multiplication


I'm sure there is online calculators for that. Basically you want to do forward kinematics


You can also see the translation and rotation of a node relative to others in webots

##### Cyber Police Officer 01/26/2021 11:55:08
Yeah, i have the transform on matlab. But i was trying to dynamically generate the manipulator, for given vector of design parameters, without having to manually input the transforms


Thank you

##### Luftwaffel [Moderator] 01/26/2021 12:07:31
You may be able to simply chain them. I don't know if it works or not

##### Cyber Police Officer 01/26/2021 12:14:26
Its a chain of 3 transform with both rotation and translation. I could indeed multiply the matrices to obtain the equivalent transform, and then extract the translation and rotation, but i was wondering if there was a tool, in the PROTO, to automatically compute the chain of transforms. Or if there was a way to allow the chain to be interpreted as one transform in the bounding object

##### Luftwaffel [Moderator] 01/26/2021 12:15:19
try it out

##### Cyber Police Officer 01/26/2021 12:16:25
I tried tried to chain them, but webots says it only allows a transform with a shape/geometry child, not a chain of transforms with a shape/geometry child:

"A Transform node inside a 'boundingObject' can only contain one Shape or one Geometry node. The child node is ignored.!"

##### Bitbots\_Jasper [Moderator] 01/26/2021 12:21:20
I think the structure of the proto you want is something like this:

```
Robot {
  Solid {
    translation ...
    rotation ....
    boundingObject Transform {
      translation ...
      rotation ...
      children [
        Box {
           size ...
        }
      ]
    ...
    }
    children [
      Solid {
      next link in the kinematic chain
      }
    ]
  }
}
```


the transform of the bounding object is relative to the solid

##### Cyber Police Officer 01/26/2021 12:30:35
Exactly, my problem is that, given the kinematics, i have to describe the bounding object with a chain of Transforms, like:

```
Robot {
  Solid {
    translation ...
    rotation ....
    boundingObject Transform {
      translation ...
      rotation ...
      children [
        Transform {
          translation ...
          rotation ...
          children [
            Transform {
              translation ...
              rotation ...
              children [
                Box {
                 size ...
                }
              ]
            }
          ]
        }
      ]
    ...
    }
    children [
      Solid {
      next link in the kinematic chain
      }
    ]
  }
}
```


And he doesn't allow this chain of transforms

##### Bitbots\_Jasper [Moderator] 01/26/2021 12:32:34
how are your solids connected?

##### Cyber Police Officer 01/26/2021 12:33:58
with ball and hingejoints


When i try to chain transform it says:

 A Transform node inside a 'boundingObject' can only contain one Shape or one Geometry node. The child node is ignored.

##### Bitbots\_Jasper [Moderator] 01/26/2021 12:34:23
but there are multiple bounding boxes in each link?

##### Cyber Police Officer 01/26/2021 12:35:11
No, each link only has one bounding object

##### Bitbots\_Jasper [Moderator] 01/26/2021 12:36:02
then the bounding box for each link should be inside that link (or solid how it is called in webots)


otherwise they will not move if the robot's joints move

##### Cyber Police Officer 01/26/2021 12:38:36
So the bounding shape must be a child of the solid and called to be used in the bounding object?

##### Bitbots\_Jasper [Moderator] 01/26/2021 12:40:25
i am not quite sure what you mean by "called to be used in the bounding object"


but yes the bounding object should be a child of the solid

##### Luftwaffel [Moderator] 01/26/2021 12:41:11
A solid node has the field BoundingObject, that's where you add the collision geometry

##### Cyber Police Officer 01/26/2021 12:41:27
```DEF MOBILE_PLATFORM Solid {
                          translation 0 0 0
                          rotation 1 0 0 0
                          name "mobile_plat"
                          children[
                             DEF MOBILE_PLATFORM_SHAPE Transform {
                              translation 0 %{=-d/2}% 0
                              rotation %{=up_k['x']}% %{=up_k['y']}% %{=up_k['z']}% %{=-alphap_k}%
                              children[
                                Transform {
                                translation 0 %{=-h}% 0
                                rotation 0 0 1 %{=-beta_k}%
                                  children [
                                    Transform {
                                      translation %{=-b_k["x"]}% %{=-b_k["y"]}% %{=-b_k["z"]+z}%
                                      rotation 1 0 0 1.5708
                                      children [
                                        Shape {
                                        appearance PBRAppearance {
                                          baseColor 0.12 0.56 1
                                          roughness 1
                                          metalness 0
                                        }
                                        geometry Cylinder {
                                          radius IS r_m
                                          height IS arm_r
                                          subdivision 48
                                        }
                                      }
                                ]}
                               ]}
                             ]}
                          ]
                          boundingObject USE MOBILE_PLATFORM_SHAPE
                          physics NULL
                        }
```


This is what i'm trying to do

##### Luftwaffel [Moderator] 01/26/2021 12:41:40
the visual shape you add in the children field

##### Cyber Police Officer 01/26/2021 12:41:48
Sorry for the horrible indentation


But it doesn't allow me, because the MOBILE\_PLATFORM\_SHAPE has a chain of Transforms. If it was only one transform it would work

##### Luftwaffel [Moderator] 01/26/2021 12:43:22
the Shape has to have the DEF

##### Cyber Police Officer 01/26/2021 12:44:53
Yeah, but if i do that the boundingObject will be in the wrong place, because it loses the transforms


I could start with the chain of transforms, and define the solid has a child of it. But this is a end-effector of a joint and it only allows the end-effector to be a solid

##### Luftwaffel [Moderator] 01/26/2021 12:46:37
why do you need that chain of transforms anyways?

##### Cyber Police Officer 01/26/2021 12:50:49
Basically i'm trying to describe where the blue platform is in space. And i don't know where it is relative to the green joint, but i do know where it is relative to the red plate.



So i'm transforming the coordinate system from the green joint referential into the red plate referential.
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/803607880410333194/unknown.png)
%end


I could know where the blue plate is relative to the green joint, but the direct kinematics are fairly complicated and i was trying to avoid that path

##### Bitbots\_Jasper [Moderator] 01/26/2021 12:52:55
you should start by defining your kinematic chain as solid->joint->....->solid

where the solid after a joint is in the endPoint field of the joint and a joint after a solid is a child to the solid

you also put in the translations and rotations between the solids in the translation and rotation field of the joint, make sure to also set the joint parameters of the joint correctly

then you can put the bounding objects into the solids where the transform you set it to is relative to the solid it belongs to

##### Cyber Police Officer 01/26/2021 12:58:57
Thank you. I'm doing that, i started by following the Stewart platform example

##### Bitbots\_Jasper [Moderator] 01/26/2021 12:59:03
the pose of the blue table is based on the pose of green rods, therefore it has to be defined relative to the green rods

##### Cyber Police Officer 01/26/2021 13:00:05
Yes, the problem is that implies solving the direct kinematics, which are nontrivial in parallel manipulators


For instance, in that manipulator it implies solving a system of 6 nonlinear equations


Thank you for the help!

##### Bitbots\_Jasper [Moderator] 01/26/2021 13:09:24
yes you are right, it's really a lot more difficult for parallel manipulators..

##### alejanpa17 01/26/2021 15:20:37
Is there any way I can modify the default traffic cone of webots with my model in order to have his physics?
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/803645582152433705/unknown.png)
%end

##### Luftwaffel [Moderator] 01/26/2021 15:21:46
of course, just add a new object and load in your model for the visual shape and Bounding object

##### alejanpa17 01/26/2021 15:28:13
the problem is that my model has too many faces so the sim is giving me "Your world may be too complex."

##### Luftwaffel [Moderator] 01/26/2021 15:29:10
you should approximate the bounding object with simple geometries


you can also specify the inertia matrix yourself.

##### jejay 01/26/2021 15:47:32
Hey guys I have a few questions: There is a kinematic mode mentioned (no physics, just animations) in the docs but it is not clear to me how to use it. Can I import animated objects (e.g. a car+trajectory animation) that I exported from blender? is there curves, interpolation etc?


and the other question extends this: is there a way to import humans + skeletal animation, again in kinematics mode?

##### Olivier Michel [Cyberbotics] 01/26/2021 15:51:46
The `TrafficCone.proto` has a `physics` field which is set to `NULL`. Simply adding a `Physics` node in there should add physics to it.


The `boundingObject` of the `TrafficCone.proto` is approximated with a `Box` and 3 `Capsule` primitives.


Simply removing the `Physics` nodes will disable physics in the simulation. Then, you will be able to animate the model from a supervisor controller by changing the `translation` and `rotation` fields of the objects you want to move.


As for human, see `WEBOTS_HOME/projects/humans/pedestrian` for some simple robotic human models.


Webots also support skeletal animation, see `WEBOTS_HOME/projects/samples/rendering/worlds/animated_skin.wbt`. However we do not distribute human model with skeletal animation, but it was tested and works.

##### jejay 01/26/2021 16:00:08
interesting, thanks!


so there is no simple way to play back a prerecorded animation or one that has been included e.g. in a collada file other than implementing it on your own step by step?

##### alejanpa17 01/26/2021 16:05:41
Thank you so much  `@Luftwaffel` `@Olivier Michel`  😀

##### jejay 01/26/2021 16:06:30
the motion functions ([https://cyberbotics.com/doc/reference/motion-functions](https://cyberbotics.com/doc/reference/motion-functions)) are for physics/actuators only? I dont understand how you record them and where the motion editor is that is mentioned in the docs

##### Olivier Michel [Cyberbotics] 01/26/2021 16:09:39
The motion editor doesn't exist any more. The motion functions work for both physics and non-physics actuators.


We have some skin animation code in the works: [https://github.com/cyberbotics/webots-doc/pull/96](https://github.com/cyberbotics/webots-doc/pull/96) but it didn't yet reached the release.


The motion editor is actually deprecated and provided only for the Robotis-OP2 robot: [https://cyberbotics.com/doc/guide/robotis-op2#motion-editor](https://cyberbotics.com/doc/guide/robotis-op2#motion-editor)


But you can create a motion file from a simple text editor (the format is human readable).

##### Luftwaffel [Moderator] 01/26/2021 16:15:27
you can also make a simple controller and use a supervisor to set jointagnles or right out the position and orientation of solids


and just read your trajectory or whatever you have and execute it in a loop

##### jejay 01/26/2021 16:16:02
thanks, yeah I guess thats kind of equivalent, thanks


Thanks a lot!

##### Luftwaffel [Moderator] 01/26/2021 16:21:11
let us know if you have further questions


[https://cyberbotics.com/doc/reference/supervisor?tab-language=python](https://cyberbotics.com/doc/reference/supervisor?tab-language=python)


you'll probably need this


This trajectory follower script for ROS could help you out perhaps


[https://github.com/cyberbotics/webots/blob/master/projects/robots/universal\_robots/resources/ros\_package/ur\_e\_webots/src/ur\_e\_webots/trajectory\_follower.py#L199](https://github.com/cyberbotics/webots/blob/master/projects/robots/universal_robots/resources/ros_package/ur_e_webots/src/ur_e_webots/trajectory_follower.py#L199)


has cubic interpolation

##### jejay 01/26/2021 16:25:57
I am actually an "expert" to help students in a robotics practical at  UoEdinburgh that sadly this year is conducted virtually, hence most student will use webots. I might come back if I have any other questions. Thanks a lot again!


thats sounds good 🙂

##### Luftwaffel [Moderator] 01/26/2021 16:26:52
you're welcome, and good luck 🙂

##### jejay 01/26/2021 16:37:17
ah maybe actually one final thing. If I stay in physics mode and take for example the bmw scene. Now I turn on manual mode and drive around. Can I record this into a motion file to replay the physics control in a later simulation? or would I need to write a controller that records my actions and then write those into a motion file (which in then could also be my own file format)?

##### Luftwaffel [Moderator] 01/26/2021 16:38:12
you can record and replay anything you want. You could log the position of the whole model for example, and the then just replay that


with a supervisor you can set anything really

##### jejay 01/26/2021 16:38:46
yeah but i need to code that supervisor, right

##### Luftwaffel [Moderator] 01/26/2021 16:39:04
very simple

##### jejay 01/26/2021 16:39:07
that was my question, there is nothing out of the box


yeah makes sense


yeah I see that this is simple 🙂

##### Luftwaffel [Moderator] 01/26/2021 16:39:34
you get a handle to the node or field you want to change, and change it


instead of motors, you can directly change the joints

##### jejay 01/26/2021 16:40:52
👍 thanks again

##### chungshan 01/27/2021 06:00:25
Hi, can I get the force in the Hing2Joint?

I can get the torque by adding the rotational motor, but I also want to know how to get the force in the Hing2Joint

##### Darko Lukić [Cyberbotics] 01/27/2021 07:42:59
Hello `@chungshan`, the Motor node returns a force feedback as well:

[https://cyberbotics.com/doc/reference/motor#wb\_motor\_get\_force\_feedback](https://cyberbotics.com/doc/reference/motor#wb_motor_get_force_feedback)

##### Luftwaffel [Moderator] 01/27/2021 10:03:31
`@chungshan` What exactly do you mean by the force in the joint? A joint can only have a torque. Only linear actuators can have forces. Perhaps you can clarify 🙂

##### DrVoodoo [Moderator] 01/27/2021 11:44:16
When creating new scenery proto objects, is there an additional step to make them pickable in the viewer? For example:


```PROTO Example [
  field SFVec3f     translation            0 0 0
  field SFRotation  rotation               0 1 0 0
  field SFString    name                   "example"
]
{
  Transform {
    translation IS translation
    rotation IS rotation
    children [
      CardboardBox {
        name %{= "\"" .. fields.name.value .. " top\"" }%
        translation 0 0 1
      }
      CardboardBox {
        name %{= "\"" .. fields.name.value .. " bottom\"" }%
      }
    ]
  }
}
```


Will not be selectable in the 3D viewer although it is still selectable in the scene tree

##### Stefania Pedrazzi [Cyberbotics] 01/27/2021 12:43:24
`@DrVoodoo` only `Solid` nodes are pickable from the 3D view

##### DrVoodoo [Moderator] 01/27/2021 12:58:24
`@Stefania Pedrazzi`  excellent, thanks. I was banging my head on that one

##### mayank.kishore 01/28/2021 01:27:09
Does anyone have experience creating an overhead map with a camera? And potentially stitching multiple images together to create an encompassing overhead map?

##### Laojiang 01/28/2021 06:35:05
How can I make a object whose the shape is a bowl?

##### Darko Lukić [Cyberbotics] 01/28/2021 07:53:16
In Webots? You can add a camera to a Supervisor robot or drone and take the images. Then, add the images to a software such as Pix4d (but probably there is a free alternative) to create a map.

##### Bitbots\_Jasper [Moderator] 01/28/2021 08:42:52
you can create a 3d model (many formats such as .stl, .obj, .dae and .blend are supported)


an example how to create a bowl model in open scad can be found here: [http://edutechwiki.unige.ch/en/OpenScad\_beginners\_tutorial#Simple\_CSG\_examples](http://edutechwiki.unige.ch/en/OpenScad_beginners_tutorial#Simple_CSG_examples)


then export it as stl (file->export) in open scad and import it in webots (file->import 3D model)

##### yash 01/29/2021 10:05:23
Sorry for the message before. Please ignore it.      I would like to know that if we have a structure like this -

          While robot.step(timestep)!=1

                    if (condition)                                                                                                                                                                                                                                                                                                                     for i in ----

   In this case when the execution is in the for loop will the robot.step(timestep) be updated ?

##### Luftwaffel [Moderator] 01/29/2021 10:06:37
no, only when the robot.step() is executed, which is every iteration of the while loop

##### JSK 01/29/2021 10:06:50
Nop.

##### Luftwaffel [Moderator] 01/29/2021 10:06:56
you could add an extra robot.step() inside the for loop

##### yash 01/29/2021 10:07:13
understood !! thanks

##### Lynerea 01/29/2021 10:43:53
Hi everyone, I recently downloaded Webots and when I went to make my own world, it comes up with an error saying that it can't find 'wbmath' and when I look at the file directory the files aren't there in any capacity - does anyone have any suggestions on how to solve that issue, would it just be a matter of reinstalling the program?

##### Bitbots\_Jasper [Moderator] 01/29/2021 10:45:11
how did you install webots?

##### Lynerea 01/29/2021 10:45:58
Via the cyberotics website using the newest Windows version it had available

##### Bitbots\_Jasper [Moderator] 01/29/2021 10:47:30
I'm sorry I don't know much about windows, maybe someone else can help with that.

##### Lynerea 01/29/2021 10:48:04
That's fine, thank you for trying anyways 🙂

##### Olivier Michel [Cyberbotics] 01/29/2021 10:48:59
Can you run the other demos of Webots (e.g., guided tour) without any problem?

##### Lynerea 01/29/2021 10:49:43
I opened the introductory demos, all of them I believe, with no issues at all

##### Olivier Michel [Cyberbotics] 01/29/2021 10:50:48
So what is particular with your world file? Did you add any specific object?

##### Lynerea 01/29/2021 10:52:10
I created a new project Directory via the wizard and ticked all the boxes when given the option but then the 'rectangle arena' caused an error but the rest of the world loaded successfully


I added a model of BB-8 after I created the world and the floor didn't work

##### Olivier Michel [Cyberbotics] 01/29/2021 11:33:29
I tried, but cannot reproduce this problem (tested on Windows 10).

##### Lynerea 01/29/2021 11:34:53
I don't understand how, after no tampering on my part, that the file was deleted, I don't know how it happened and I doubt I could reproduce the issue but reinstalling the program seems to have solved the issue for now

##### smasud98 01/30/2021 05:29:13
Hi everyone! I am new to webots and not sure if this is the right place to be asking this question. I am considering getting the Macbook with the M1 chip which uses ARM. I was wondering if anyone knows whether Webots will work well with this. Thanks

##### Krish 01/30/2021 06:03:49
Wait for this year's lineup.

##### Luftwaffel [Moderator] 01/30/2021 14:23:48
`@smasud98` This is generally the right place to ask any questions regarding Webots. I think you should be fine with the macbook. While Webots is an x86 program, Apple's Rosetta 2 - x86 emulation seems to be very good and powerful. In general you should ask yourself the question though, whether a macbook is the right tool. If you want to dive deep into programming and development, engineering applications and linux, then it might be more advisable to get an x86 machine.  Perhaps you can tell me what you want to use your laptop for in general. Whether you are willing to switch to linux and/or linux is another big factor.

##### Krish 01/30/2021 15:24:37
Yeah well said.

He told me that he is more interested in getting a Mac than a Linux machine, he says that he has the 2015 Macbook and webots runs very slowly in that.

Also, not all the apps and programming languages are configured to run on the M1.



So he says if Webots does not run on it, he will just return and take the refund back.

##### Luftwaffel [Moderator] 01/30/2021 15:39:30
The new macbook is a completely new hardware & software product. It probably works really well for a pure consumer, but as soon as you start development and go outside of MacOS, I foresee a lot of issues. Linux can run on arm, but by far not all software and programs.  I have a Lenovo Legion laptop. It is basically a gamer laptop, that looks more professional. I bought it for robotic simulation and Reinforcement Learning. I dont see macbooks being a good choice for that. For AI you kinda need a Nvidia GPU, and a powerful x86 CPU is a godsent when compiling and running lots of parallelized code / many instances.

##### Mumuxe 01/30/2021 15:46:55
Hi everyone, i'm having an issue with a basic HingeJoint for a wheel


I have a differential robot, and when it's turning in place, le wheels are "moving sideways"


like on a bad bike


By looking at the tree I see small  values in the `translation` field of the wheel although the joint is configured to only allow rotation on an axis

##### Luftwaffel [Moderator] 01/30/2021 15:51:18
can you share your world or a screenshot of your hingjoint? with JointParameters expanded in the scene tree

##### Mumuxe 01/30/2021 15:54:41

%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/805103704910200854/unknown.png)
%end



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/805103881205841930/unknown.png)
%end

##### Luftwaffel [Moderator] 01/30/2021 15:58:32
it is always good practice to have the same anchor as translation of the endPoint solid.  currently it rotates around the y-axis of in the 2nd image


move the anchor to where you want the center of rotation to be

##### Mumuxe 01/30/2021 15:59:18
Oh, ok


On top of my Hinge I have a Transform


I can remove the Transform, and instead use anchor & translation on the endpoint solid right ?

##### Luftwaffel [Moderator] 01/30/2021 16:00:19
the transform is fine.


send me your world, i can have a quick look


the issue is, if you have a translation of the endpoint, which is NOT along the rotational axis

##### Mumuxe 01/30/2021 16:07:04
The translation of the enpoint was the result of the bug, I did not manually edit these  values



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/805106901393604679/unknown.png)
%end


I just tried this, deleting the Transform above the Joint, no success

##### Luftwaffel [Moderator] 01/30/2021 16:08:58
the translation of the endPoint changes with when the joint rotates. So at the start, the anchor and translation have to be the same (assuming you want the endPoint to rotate around its origin)

##### Mumuxe 01/30/2021 16:09:47
which is the case on my last screenshot right ?

##### Luftwaffel [Moderator] 01/30/2021 16:09:56
yes

##### Mumuxe 01/30/2021 16:10:30

%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/805107686977830952/unknown.png)
%end

##### Luftwaffel [Moderator] 01/30/2021 16:10:47
this should work too

##### Mumuxe 01/30/2021 16:10:53
Which is also the case when the transform is done above; I have the same endpoint translation and anchor


Still have the problem though 😄

##### Luftwaffel [Moderator] 01/30/2021 16:11:06
what problem?

##### Mumuxe 01/30/2021 16:11:50
When the robot is turning in place, the wheels are slightly translating


instead of only rotating around the joint axis

##### Luftwaffel [Moderator] 01/30/2021 16:12:54
I would have to see the whole thing. But just stick with the solution that works


that is the 'proper' way to do it

##### Mumuxe 01/30/2021 16:13:06
No solution works atm haha

##### Luftwaffel [Moderator] 01/30/2021 16:13:21
share your world file


can also pm if you want

##### ljmanso 01/31/2021 15:14:48
Hello everyone. I am new to Webots and I have a quick question that I haven't seen in the documentation. Is there any way to simulate virtual humans moving around?

##### Bitbots\_Jasper [Moderator] 01/31/2021 15:31:43
There is the pedestrian proto (model) and a controller for it.

##### ljmanso 01/31/2021 19:15:06
Thanks! I will try to find more information about it 👍

##### Azer Babaev [Starkit, TC] 01/31/2021 20:20:54
Hello, can’t figure out why two solids pass through each other like non-material objects during simulation running. Bounding objects are defined and physics is added for both solids. Could it be due to that dencity is -1, but mass has positive value? Could it be due to that inertia matrix is not added? Could it be due to that center of mass is not added for solids?

##### paperwave 01/31/2021 22:33:56
`@Azer Babaev [Starkit, TC]` When you click on the boundingObject node you should see the bounding region surrounding the Solid, if you don't see it, it may be covered from your graphical view.

##### Azer Babaev [Starkit, TC] 01/31/2021 22:35:44
Bounding region covers solid and I can see it

##### Bitbots\_Jasper [Moderator] 01/31/2021 22:37:09
the density field is used to calculate the mass by using the volume of the bounding object, if a mass is specified it should be -1


are the two solids that should collide part of the same proto?

##### Azer Babaev [Starkit, TC] 01/31/2021 22:38:07
Solids are designed by myself from primitives

##### Bitbots\_Jasper [Moderator] 01/31/2021 22:39:22
what i am trying to ask is if the two solids are defined in the same file?

##### Azer Babaev [Starkit, TC] 01/31/2021 22:39:41
Yes

##### Bitbots\_Jasper [Moderator] 01/31/2021 22:40:09
in the robot node, there is a parameter selfCollision, you might need to enable that


[https://cyberbotics.com/doc/reference/robot](https://cyberbotics.com/doc/reference/robot)

##### Azer Babaev [Starkit, TC] 01/31/2021 22:43:06
It works!


Thank you!

##### Bitbots\_Jasper [Moderator] 01/31/2021 22:43:39
you're welcome 👍

##### Azer Babaev [Starkit, TC] 01/31/2021 22:44:11
👏

##### paperwave 01/31/2021 22:49:14
Question, I'm working on the tutorials (on 6) but I'm getting a compile error because some nodes' name field is the same, is there a way in the IDE to change that? double click on name isn't doing anything


compile error
%figure
![wheel_not_found.PNG](https://cdn.discordapp.com/attachments/565154703139405824/805570707551027250/wheel_not_found.PNG)
%end


[https://cyberbotics.com/doc/reference/solid#unique-solid-name](https://cyberbotics.com/doc/reference/solid#unique-solid-name) indicates the IDE should make a unique name hmmm


wait those are warnings, so it should run, I just want to use better descriptive names

##### Bitbots\_Jasper [Moderator] 01/31/2021 22:55:09
you can right click on the robot in the node view on the left and edit the proto file(view protofile) , control+f for name and find the names that are overlapping

##### paperwave 01/31/2021 22:58:07
I don't see that, I right clicked on the robot's root node, "Robot", I'll keep looking for a view protofile option somewhere

##### Bitbots\_Jasper [Moderator] 01/31/2021 23:00:31

%figure
![jo.png](https://cdn.discordapp.com/attachments/565154703139405824/805573259717246996/jo.png)
%end

##### paperwave 01/31/2021 23:04:38
Here's what I'm seeing, I made it with Base nodes > Robot



%figure
![missing_settings.PNG](https://cdn.discordapp.com/attachments/565154703139405824/805574353571938334/missing_settings.PNG)
%end


I see, it doesn't have that because it was a base node.


looking for the wbt file, maybe that'll do it


It's my second day of webots so I know it's something simple

##### Bitbots\_Jasper [Moderator] 01/31/2021 23:10:47
The problem is that it is probably save in a location where you can not edit it (because you need sudo or admin). Copy the proto file from your webots installation to your own proto folder


maybe this helps to understand how you should structure your webots projects: [https://cyberbotics.com/doc/guide/the-standard-file-hierarchy-of-a-project](https://cyberbotics.com/doc/guide/the-standard-file-hierarchy-of-a-project)

##### paperwave 01/31/2021 23:13:19
moving the protos folder now


Looks like this part of the tutorial only uses base nodes so there was no proto on it however, I restarted Webots and was able to rename the wheels which is great. Fixing something else I messed up present, thanks for the help

## February

##### まちこ (Bailey) 02/01/2021 05:12:30
I'm trying to change the fields of an object, but it looks like this. What do I need to do so that I can edit them? (This is my first time using Webots, sorry if it's a dumb question!)
%figure
![Screen_Shot_2021-01-31_at_9.11.53_PM.png](https://cdn.discordapp.com/attachments/565154703139405824/805666868773781504/Screen_Shot_2021-01-31_at_9.11.53_PM.png)
%end

##### Stefania Pedrazzi [Cyberbotics] 02/01/2021 07:06:18
There is a dedicated window to edit the field, but it seems that you hide it.

It is located just below this scene tree.

So to show you can click on the sidget separator (indicated by the three lines on the bottom of your screenshot) and drag it up, or restore the default application layout from the `Tools > Restore Layout`

##### まちこ (Bailey) 02/01/2021 07:15:46
Thank you!

##### iagsav 02/01/2021 12:31:47
Hi! Please tell me how you can read the data from the compass of the Firebird 6 robot?

##### Luftwaffel [Moderator] 02/01/2021 12:35:42
`@iagsav` if you right-click on the robot, you can select "view PROTO source"


in there you will find this section, with the sensors and their names
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/805778505736519750/unknown.png)
%end

##### iagsav 02/01/2021 12:40:56
Thank you!


I wrote this code


cmp = robot.getDevice('compassXY\_01')

print(cmp)


but it returns 'None'

##### Luftwaffel [Moderator] 02/01/2021 12:42:36
for i in range(robot.getNumberOfDevices()):

    device = supervisor.getDeviceByIndex(i)

    print(i, '  -  ', device.getName(), '   - Model:', device.getModel(),'   - NodeType:', device.getNodeType())


try running this


it should print all devices


also a good way to make lists of motors, sensors etc. by appending a list, if the device is of the type you want

##### iagsav 02/01/2021 12:44:35
should I set the supervisor field to true?



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/805780673922859038/unknown.png)
%end

##### Luftwaffel [Moderator] 02/01/2021 12:45:12
oh, do it robot.getDeviceByIndex


supervisor is not needed


took it from one of my controllers


where I use a supervisor for other stuff

##### iagsav 02/01/2021 12:46:15
Thanks you! it worked



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/805781066035757117/unknown.png)
%end

##### Luftwaffel [Moderator] 02/01/2021 12:46:47
hmm model doesnt seem to work for some reason


sensors = []

minPositions = []

maxPositions = []

for i in range(robot.getNumberOfDevices()):

    device = robot.getDeviceByIndex(i)

    print(i, '  -  ', device.getName(), '   - Model:', device.getModel(),'   - NodeType:', device.getNodeType())

    # if device is a rotational motor (uncomment line above to get a list of all robot devices)

    if device.getNodeType() == 54:

        motors.append(device)

        minPositions.append(device.getMinPosition())

        maxPositions.append(device.getMaxPosition())

        sensor = device.getPositionSensor()

        try:

            sensor.getName()

            sensors.append(sensor)

            sensor.enable(timeStep)

        except Exception as e:

            print('Rotational Motor: ' + device.getName() + ' has no Position Sensor')


\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_

this is an example, how I initialize robotic arms. It automatically creates a list of all rotational motors, their position sensors and the corresponting min and max positions


motors = [] missing in the first line


This works regardless of what robotic arm I use. I'm sure you can adjust it to your needs

##### iagsav 02/01/2021 12:52:23
Thank you! I will try!


It is very strange, but when I run e-puck obstacle avoidance tutorial, I get such result



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/805786926274576474/unknown.png)
%end


I reinstall python 3.7.9 (64) twice


and restart webots too

##### Luftwaffel [Moderator] 02/01/2021 13:10:37
ps[i] is empty in this case

##### iagsav 02/01/2021 13:11:33
I understand, but why? I use standard world file

##### Luftwaffel [Moderator] 02/01/2021 13:11:58
show me the controller?

##### iagsav 02/01/2021 13:12:18

%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/805787617240154132/unknown.png)
%end


I take it from tutorial


[https://cyberbotics.com/doc/guide/tutorial-4-more-about-controllers?tab-language=python](https://cyberbotics.com/doc/guide/tutorial-4-more-about-controllers?tab-language=python)

##### Luftwaffel [Moderator] 02/01/2021 13:13:32
put a "print(i)" in front of the ps[i].enable

##### iagsav 02/01/2021 13:14:12

%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/805788096221544488/unknown.png)
%end

##### Luftwaffel [Moderator] 02/01/2021 13:15:19
weird, that error is new now


you are using the correct robot?

##### iagsav 02/01/2021 13:15:32
I found similar issue here: [https://github.com/cyberbotics/webots/issues/2570](https://github.com/cyberbotics/webots/issues/2570)


I use file e\_puck.wbt, I think it is correct

##### Luftwaffel [Moderator] 02/01/2021 13:16:56
you are on the newest version of webots?


you could also try running that loop I showed you earlier

##### iagsav 02/01/2021 13:17:16
I download it now


Now i install newest webots version


It is very strange, but all works: I get compass in fire bird 6

##### Luftwaffel [Moderator] 02/01/2021 13:39:06
great 🙂

##### iagsav 02/01/2021 13:42:06
yee!!! Thank you!!!

##### PRVG 02/01/2021 15:33:51
Hello i would like to know if anyone as implemented a optical flow sensor in Webots. Looking through the documentation i do not think there is one available in the sensor nodes. Thank you very much.

##### Olivier Michel [Cyberbotics] 02/01/2021 15:39:16
You are right, there is no such sensor. But basically, this can be implemented at the controller level from a standard camera flow, not inside Webots.

##### PRVG 02/01/2021 15:41:49
Thank you for the reply. I was gonna try implementing  that in matlab just wanna make sure there was no sensor for it already implemented and if someone had any experience with it so they could give some pointers. Thank you

##### Chernayaten 02/01/2021 16:39:29
I'm trying to make k-team's hemisson robot rotate around itself using the setPosition command in Python (with getTargetPosition +/- rotate\_value). However whether I try to increase the position or decrease it the robot always moves forward


I'm also facing an issue with its pen node which simply doesn't work at times. I've made a few tests starting it from random positions and it might work or it might not work. At times when it is not working, if I start manually  moving the robot around while the simulation is running it might write a bit and then stop or it might start writing normally

##### Luftwaffel [Moderator] 02/01/2021 18:34:50
the setPosition most likely changes the wheel angle, not the robot rotation. So to rotate, you have to turn one clockwise and the other ccw

##### Chernayaten 02/01/2021 18:39:45
That is what I am doing. I use the motor.getTargetPosition() to get the position at that specific moment and then increase one wheel / decrease the other to make it turn. I've already used this code on a robot I made and it has been working without issues


I've performed the following simple test. Set both wheel positions at 100 and run it. The robot moves forward. Reset and set both wheel positions at -100. Robot moves forward again, even though it should be moving backwards

##### Luftwaffel [Moderator] 02/01/2021 18:53:34
for wheels you should probably use velocity control


and change the angles incrementally. Also remember, that the values are radian


so 100 is a lot

##### Chernayaten 02/01/2021 18:56:41
I've been trying to make the robot turn exactly 90 degrees (and then other angles) which is why I have been using position instead. I am aware values are radian,  the 100 is just an example to show it is not working as it should


Weirdly enough, if I do use setVelocity with +/- on the wheels it does work as it should. I really don't want to have to re-work my code though. The setPosition should be working as well which is what I am trying to solve

##### Mumuxe 02/01/2021 19:05:13
Hi everyone, I was wondering if someone tried to use asyncio for a python controller ?

##### Luftwaffel [Moderator] 02/01/2021 20:02:38
if your starting position is -200, then it will drive forward in both cases, setting the target to -100 and 100

##### Chernayaten 02/01/2021 20:38:15
That's why I said in my first message that I use the .getTargetPosition() method. The increase/decrease is always done in regards to the wheel position at that moment. That means that if my starting position was -200 then one wheel would increase to -100 and the other would decrease to -300

##### Luftwaffel [Moderator] 02/02/2021 10:57:01
`@Chernayaten`  Why are you using .getTargetPosition() instead of using the position sensor to get the current position?


positionSensor = motor.getPositionSensor()

positionSensor.enable(timestep)

pos = positionSensor.getValue()


I suspect that the issue lies here


.getTargetPosition()  gives you the last command issued with setPosition() and NOT the current position

##### Chernayaten 02/02/2021 13:12:48
I am doing it this way because I do not care about the current position of the motor. My code is working correctly in my own robot, it works correctly on a different robot I randomly picked (Lego's Mindstorms), but it doesn't work correctly on the Hemisson robot.


while self.step(self.TIME\_STEP) != -1:

    left.setPosition(left.getTargetPosition() - 10)

    right.setPosition(right.getTargetPosition() + 10)


Regardless of whether this is the smart way to do it, the following code should make the robot constantly rotate around itself. Hemisson robot doesn't do that and I can't figure out why. At the same time the other two robots I mentioned do

##### alireza\_9 02/02/2021 18:39:19
Hello everyone

dose anyone knows how can I train robot using pytorch in webots?

##### Luftwaffel [Moderator] 02/02/2021 18:59:26
[https://www.cyberbotics.com/doc/guide/running-extern-robot-controllers](https://www.cyberbotics.com/doc/guide/running-extern-robot-controllers)


use an extern python controller

##### John520 02/02/2021 20:25:42
Hi, I'd like to create a crop field for lidar detection simulation. I found out that Webots provides Trees and Plants objects. My questions are: 1. Can the tree and plant objects (shape and leaves) be detected by a lidar in the simulation? 2. Is there a way to create a crop object by myself? Thank you!

##### LucasW 02/03/2021 00:55:54
Hi all, I'm a student working on a project using Webots for the first time. This is a pretty basic question but I'm implementing an approximation of the VL53L1X tof sensor see [https://www.st.com/en/imaging-and-photonics-solutions/vl53l1x.html#overview](https://www.st.com/en/imaging-and-photonics-solutions/vl53l1x.html#overview) for details, or [https://www.pololu.com/product/3415/specs](https://www.pololu.com/product/3415/specs) for a quick specs overview. I was wondering what units resolution is measured in/should I just make it infinite and I don't understand what response values I should map the distances too? Any help would be appreciated thanks.

##### John520 02/03/2021 15:03:45
Hi guys, I'd like to create a crop field for a lidar detection simulation. I found out that Webots provides Trees and Plants objects. My questions are, 1. Can the Tree and Plant objects (shape and leaves) be detected by a lidar in the simulation? 2. Is there a way to create a crop object by myself? Thank you!

##### Darko Lukić [Cyberbotics] 02/03/2021 15:07:50
Hello `@John520`, 1. Yes. You can create a simple robot, add a Lidar, and visualize the point cloud (option in the View menu). 2. Yes. Create a terrain, add some plants, trees...



There are a few examples on YouTube (created in a very old version of Webots):

[https://www.youtube.com/watch?v=X7YFyVZc1Eg](https://www.youtube.com/watch?v=X7YFyVZc1Eg)


Hello `@LucasW`, the returned values from the DistanceSensor node are in meters.

##### John520 02/03/2021 15:13:24
`@Darko Lukić` Thank you very much for your reply. Would be possible to create a crop or plant that is not included in the Trees and Plants objects by myself. For example, can I create a cereal object somewhere and then import it into Webots? Thank you!

##### Olivier Michel [Cyberbotics] 02/03/2021 15:14:47
Yes, of course. It is just a matter of creating a new proto file.

##### gaitt 02/03/2021 15:16:22
Hello, I'm wondering how do I retrieve the camera behind a DEF. I'm using C++ API, supervisor->getNodeFromDef(CAMERA\_DEF) which seems to return valid pointer on a Node. But since a Device/Camera does not inherit from node I can't cast it to a camera ... any clue?

##### John520 02/03/2021 15:16:59
Oh sounds great! Thank you `@Olivier Michel`. Would you have any tutorial about creating a new proto file? Could you share a link, please? Thank you!

##### Olivier Michel [Cyberbotics] 02/03/2021 15:17:15
You should use the `getCamera` method instead.


[https://cyberbotics.com/doc/guide/tutorial-7-your-first-proto](https://cyberbotics.com/doc/guide/tutorial-7-your-first-proto)

##### John520 02/03/2021 15:20:07
Thank you very much `@Olivier Michel` for your help!!!

##### gaitt 02/03/2021 15:25:44
Well did not find such method in the documentation, on which class the method is available?

##### Olivier Michel [Cyberbotics] 02/03/2021 15:26:52
on Robot (from which Supervisor inherits).

##### Luftwaffel [Moderator] 02/03/2021 15:28:21
[https://drive.google.com/drive/folders/1rI7xeOP5CCi\_IFTOmZu37nEZDxR-Uj6\_?usp=sharing](https://drive.google.com/drive/folders/1rI7xeOP5CCi_IFTOmZu37nEZDxR-Uj6_?usp=sharing) this could be useful

##### gaitt 02/03/2021 15:33:29
Ok thanks, I found it in the .hpp but it definitely not in the doc [https://cyberbotics.com/doc/reference/robot](https://cyberbotics.com/doc/reference/robot)

##### Olivier Michel [Cyberbotics] 02/03/2021 15:34:06
It's there: [https://cyberbotics.com/doc/reference/robot?tab-language=c++#wb\_robot\_get\_device](https://cyberbotics.com/doc/reference/robot?tab-language=c++#wb_robot_get_device)


The C function is called `wb_robot_get_device`.

##### gaitt 02/03/2021 15:35:17
My bad, I was searching for the C equivalent *\_get\_camera

##### John520 02/03/2021 17:25:14
Hi `@Olivier Michel`, I am looking into the Cypress.proto [https://github.com/cyberbotics/webots/blob/released/projects/objects/trees/protos/Cypress.proto](https://github.com/cyberbotics/webots/blob/released/projects/objects/trees/protos/Cypress.proto). Would you please advise how to define the point values for "geometry IndexedFaceSet"? There are lots of point values there. Thank you!

##### LucasW 02/03/2021 17:30:19
Thanks `@Darko Lukić` but I don't think I was very clear. I'm a confused by the lookup table response values. I've read the Webots documentation but still not sure how you set the response values based on different sensors. For example in the webots\_ros2/webots\_ros2\_epuck/protos/E-puck\_enu.proto there is a tof sensor. Which approximates the VL53L0X sensor and I don't understand why those corresponding response values were chosen, I've looked at the sensor documentation and the Webots documentation and am still not sure why?

##### iagsav 02/03/2021 17:38:45
Hi! please explain how you can add a compass to the e-puck robot?

##### Krish 02/03/2021 18:49:01
`@John520` Did you forget to leave the voice channel?


Its been a while

##### John520 02/03/2021 19:18:15
`@Krish` Thanks. I forgot about it.

##### Olivier Michel [Cyberbotics] 02/04/2021 07:04:37
IndexedFaceSet are usually designed as meshes in a 3D modelling software (like Blender or other) and then exported to VRML97, copy/pasted in to the PROTO file.

##### Stefania Pedrazzi [Cyberbotics] 02/04/2021 07:20:32
You should add it in the `turretSlot` filed of the e-puck.

##### Darko Lukić [Cyberbotics] 02/04/2021 08:06:40
Ok, I see. It is possible that GCtronic integrated API that returns scaled values. However, if you don't have a strong reason to use the `lookupTable` parameter, you can skip modeling that part. Without the lookup table you will get actual distance. The other parameters, `numberOfRays`, `aperture`, and`resolution` are more important for modeling a realistic sensor. Also, you can use the lookup table without scaling the values, only imposing a noise at different distances.

##### Iris230 02/04/2021 08:47:29
hello guys, I'm wondering how could Logitech G29 get connected to webots and control the car  just like this?



%figure
![Screenshot_20210204_163925_com.google.android.youtube.jpg](https://cdn.discordapp.com/attachments/565154703139405824/806808172630507539/Screenshot_20210204_163925_com.google.android.youtube.jpg)
%end


I opened a sample world called 'village center' and I added a BMW node. But I can't change to this point of view, like you are sitting in this car. 🥲😭

##### Olivier Michel [Cyberbotics] 02/04/2021 08:54:20
A sample controller for interfacing a G29 (and other racing wheels) is available in `WEBOTS_HOME/projects/vehicles/controllers/racing_wheel/`.

##### Iris230 02/04/2021 08:58:04
wow thank you so much😆

##### iagsav 02/04/2021 11:03:37
Thank you! It works!!!

##### LucasW 02/04/2021 11:20:24
Thank you very much `@Darko Lukić`

##### John520 02/04/2021 18:09:32
Thank you `@Olivier Michel` again. I am looking for a wheat model online. Do you think if I can convert the wheat field models to proto files so that I can use them in Webots? The wheat field models are in Blender formats, please check [https://www.turbosquid.com/3d-models/section-wheat-field-3d-model-1572937#](https://www.turbosquid.com/3d-models/section-wheat-field-3d-model-1572937#) and [https://www.turbosquid.com/3d-models/wheat-field-3d-model-1175816](https://www.turbosquid.com/3d-models/wheat-field-3d-model-1175816). Or I need to work on the model conversion for single wheat instead of a wheat field?

##### yash 02/04/2021 18:22:11
Hi ! This warning pops up in middle of the program running.....whats the reason behind it ?
%figure
![Screenshot_from_2021-02-04_23-50-28.png](https://cdn.discordapp.com/attachments/565154703139405824/806952763439054878/Screenshot_from_2021-02-04_23-50-28.png)
%end

##### Darko Lukić [Cyberbotics] 02/04/2021 18:23:45
It means that the controller has crashed. Try to simplify it

##### yash 02/04/2021 18:26:18
oh okay ! any hints you could give me about how to do it if there's any general solution, or it depends on the way the controller code is written ?

##### Darko Lukić [Cyberbotics] 02/04/2021 18:26:48
It depends a lot on the controller implementation

##### yash 02/04/2021 18:27:40
okay thanks a lot, let me try it out then.

##### Troy 02/05/2021 03:33:04
Hi everyone! I have a question about Fluid. I looked at the 'floating\_geometries' example, and in my simulation, I set the sane fluid properties, like I set shape, velocity, and boundingObj, and build a solid, set its immersionProperties, but it doesn't work, this solid doesn't even flow in the fluid.


`@Darko Lukić` I added a solid box in the 'floating\_geometries' example, and added shape, immersionProperties, boundingObj, damping, as other geometries, but this solid won't flow with the water. Can you help me? I don't understand why.



%figure
![test.jpg](https://cdn.discordapp.com/attachments/565154703139405824/807094784840826891/test.jpg)
%end


As you can see from the picture, it won't flow with the water


This happens in my another simulation. I don't know how to fix this problem.

##### Darko Lukić [Cyberbotics] 02/05/2021 08:45:36
`@Troy` Please check this minimal example:

```vrml
#VRML_SIM R2021a utf8
WorldInfo {
  coordinateSystem "NUE"
}
Viewpoint {
  orientation 0.9947291283851613 0.0980963256805878 0.029850829637807465 5.68943875583334
  position -0.4920553249349089 5.987256278548413 8.041045316575675
}
TexturedBackground {
}
TexturedBackgroundLight {
}
DEF STILL_WATER Fluid {
  translation 0 0.2 0
  children [
    DEF S Shape {
      appearance PBRAppearance {
        baseColor 0 0.501961 1
        transparency 0.5
        roughness 1.1102230246251565e-16
        metalness 0
      }
      geometry Cylinder {
        height 0.4
        radius 1.8
        subdivision 24
      }
    }
  ]
  name "swimming pool"
  boundingObject USE S
}
DEF THIN_CYLINDER Solid {
  translation -0.474938 1.52181 0.0751348
  rotation 0.28982509088350455 0.7070662121554249 0.6450261919663017 4.07769
  children [
    DEF S Shape {
      appearance PBRAppearance {
        baseColor 0.501961 0.337255 0.2
        roughness 1.1102230246251565e-16
        metalness 0
      }
      geometry Cylinder {
        height 0.5
        radius 0.12
      }
    }
  ]
  immersionProperties [
    DEF SWIMMING_POOL_IMMERSION_PROPERTIES ImmersionProperties {
      fluidName "swimming pool"
      dragForceCoefficients 0.1 0 0
      dragTorqueCoefficients 0.001 0 0
      viscousResistanceTorqueCoefficient 0.005
    }
  ]
  boundingObject USE S
  physics Physics {
    density 500
    damping Damping {
      linear 0.5
      angular 0.5
    }
  }
}
```


Notice that `ImmersionProperties > fluidName`  and `Fluid > name` have to match.

##### Welsh\_dragon64 02/05/2021 11:35:16
I have been trying to code the robotis darwin-op\_2 to walk using python. I have been trying to access its packages through managers provided by webots, but i keep getting errors and some errors doesnt quite make sense. I have minor experience in python.



> **Attachment**: [robotis\_code\_.txt](https://cdn.discordapp.com/attachments/565154703139405824/807213002692493322/robotis_code_.txt)

##### John520 02/05/2021 15:10:56
Thank you `@Olivier Michel` again. I am looking for a wheat model online. Do you think if I can convert wheat field models to proto files so that I can use them in Webots? The wheat field models are in Blender formats, please check [https://www.turbosquid.com/3d-models/section-wheat-field-3d-model-1572937#](https://www.turbosquid.com/3d-models/section-wheat-field-3d-model-1572937#) and [https://www.turbosquid.com/3d-models/wheat-field-3d-model-1175816](https://www.turbosquid.com/3d-models/wheat-field-3d-model-1175816). Or Do I need to work on the model conversion for single wheat instead of a wheat field? Thanks a lot.

##### Bitbots\_Jasper [Moderator] 02/05/2021 18:23:02
I am a bit confused as to how some of the supervisor funtions work, maybe someone can explain or point me some documentation. The supervisor functions allow me to retrieve nodes in the world either with ID or DEF ([https://www.cyberbotics.com/doc/reference/supervisor?tab-os=linux&tab-language=c++#supervisor-functions](https://www.cyberbotics.com/doc/reference/supervisor?tab-os=linux&tab-language=c++#supervisor-functions)),



 is this the same DEF that is used in the proto file for the DEF-USE mechanism ([https://www.cyberbotics.com/doc/guide/tutorial-2-modification-of-the-environment#def-use-mechanism](https://www.cyberbotics.com/doc/guide/tutorial-2-modification-of-the-environment#def-use-mechanism)) or is it something different?

##### Luftwaffel [Moderator] 02/05/2021 18:23:59
`@Bitbots_Jasper` in the scene tree, you can give any node a DEF. You can then retrieve that node with the supervisor


nodes inside of proto files are a bit more tricky

##### Bitbots\_Jasper [Moderator] 02/05/2021 18:24:35
those are the ones I'm trying to reach

##### Welsh\_dragon64 02/05/2021 18:25:00
guys i have a question



how do i enable the robot window using roboits darwin\_op2 in webots using python?

##### Luftwaffel [Moderator] 02/05/2021 18:25:02
what exactly are you trying to do?

##### Bitbots\_Jasper [Moderator] 02/05/2021 18:25:24
finding the position of certain solids in world coordinates

##### Luftwaffel [Moderator] 02/05/2021 18:26:06
what robot?

##### Bitbots\_Jasper [Moderator] 02/05/2021 18:26:19
my own 😄


[https://github.com/bit-bots/wolfgang\_robot/blob/master/wolfgang\_webots\_sim/protos/Wolfgang.proto](https://github.com/bit-bots/wolfgang_robot/blob/master/wolfgang_webots_sim/protos/Wolfgang.proto)

##### Luftwaffel [Moderator] 02/05/2021 18:26:41
you can expose fields in a proto


like you do line 8 -> line 21


you can do that for any field


ahh.. you want the node so you can get the position


should work the same

##### Bitbots\_Jasper [Moderator] 02/05/2021 18:29:44
i read that there is wb\_supervisor\_node\_get\_from\_proto\_def or getFromProtoDef in python, should that not work as well?


[https://www.cyberbotics.com/doc/reference/supervisor?tab-os=linux&tab-language=python#description](https://www.cyberbotics.com/doc/reference/supervisor?tab-os=linux&tab-language=python#description)

##### Luftwaffel [Moderator] 02/05/2021 18:30:13
ohh right


that shouuld work


I only used fields inside of protos so far

##### Bitbots\_Jasper [Moderator] 02/05/2021 18:30:53
sorry this link is correct: [https://www.cyberbotics.com/doc/reference/supervisor?tab-os=linux&tab-language=python#wb\_supervisor\_node\_get\_from\_proto\_def](https://www.cyberbotics.com/doc/reference/supervisor?tab-os=linux&tab-language=python#wb_supervisor_node_get_from_proto_def)

##### Luftwaffel [Moderator] 02/05/2021 18:33:23
baseNode = supervisor.getSelf()

node1 = baseNode.getFromProtoDef("defName")

pos = node1.getPosition()


I think that should work

##### Bitbots\_Jasper [Moderator] 02/05/2021 18:38:29
awesome, it works, i only have to go back into my proto and add a DEF to each solid :D, or is there a option to do it using urdf2webots, otherwise i can work on implementing it

##### Luftwaffel [Moderator] 02/05/2021 18:39:14
urdf files dont have DEF names. they have names


I guess you could add a parsable option, to turn urdf link-names into DEF names for the solids, not just solid names

##### Bitbots\_Jasper [Moderator] 02/05/2021 18:40:58
that is what i meant, so that they can be retrieved using the getFromProtoDef function

##### Luftwaffel [Moderator] 02/05/2021 18:41:57
[https://github.com/cyberbotics/urdf2webots/blob/master/urdf2webots/writeProto.py#L101](https://github.com/cyberbotics/urdf2webots/blob/master/urdf2webots/writeProto.py#L101)


you would have to add it in this line


link.name contains the link-name

##### Bitbots\_Jasper [Moderator] 02/05/2021 18:42:43
thanks so much for your help `@Luftwaffel` , i'll work on it

##### Luftwaffel [Moderator] 02/05/2021 18:43:06
[https://github.com/cyberbotics/urdf2webots/blob/master/urdf2webots/importer.py#L190](https://github.com/cyberbotics/urdf2webots/blob/master/urdf2webots/importer.py#L190) here you have to add a parsable argument


you can parse a bool to the writeProto script like this: [https://github.com/cyberbotics/urdf2webots/blob/master/urdf2webots/importer.py#L64](https://github.com/cyberbotics/urdf2webots/blob/master/urdf2webots/importer.py#L64)

##### Welsh\_dragon64 02/05/2021 18:47:09
`@Luftwaffel`
%figure
![Robotis_op2.PNG](https://cdn.discordapp.com/attachments/565154703139405824/807321432954634260/Robotis_op2.PNG)
%end


can you look at this error plz?


i cant seems to display the robot window?

##### Luftwaffel [Moderator] 02/05/2021 18:48:20
is the library at the specified path?

##### Welsh\_dragon64 02/05/2021 18:48:33
yea


for some reason it cant seem to load it


the library is in the same the file i am using to work on this robot simulation


i am trying to remotely control the robot using my laptop

##### Bitbots\_Jasper [Moderator] 02/05/2021 19:03:41
`@Luftwaffel`  i made a pull request, thanks again for your help [https://github.com/cyberbotics/urdf2webots/pull/107](https://github.com/cyberbotics/urdf2webots/pull/107)


I think it depends on your use case, to convert the model to a proto you can use [https://github.com/cyberbotics/blender-webots-exporter](https://github.com/cyberbotics/blender-webots-exporter) as far as i know. If you want to very precisely place every little wheat plant you need individual models, if you only want to place it roughly you can probaly use the tiles they provide in the models you linked to. You need to pay a little attention to the amount of polygons you are using in the end, the models you linked to are quite high resolution and it might cause some issues if there is a gigantic amount of them on the screen.


if they do not come as a tile, you can create your own tile using single wheat plants. for that [https://www.cyberbotics.com/doc/reference/def-and-use](https://www.cyberbotics.com/doc/reference/def-and-use) is probably useful

##### Luftwaffel [Moderator] 02/05/2021 19:44:39
`@Bitbots_Jasper` PR looks good to me, havent tested it though. Please also add your changes to the readme [https://github.com/cyberbotics/urdf2webots/blob/master/README.md#arguments](https://github.com/cyberbotics/urdf2webots/blob/master/README.md#arguments)

##### John520 02/05/2021 21:18:25
Thank you `@Bitbots_Jasper` for your detailed instruction! I will give it a try.

##### Azer Babaev [Starkit, TC] 02/05/2021 21:42:20
Is there anybody familiar with backlashes in joints of robot?  Is there any method to define value of backlash in HinjeJoint or in RotationalMotor?

##### Bitbots\_Jasper [Moderator] 02/05/2021 22:29:52
done


can you give some more information on your setup? have you checked if the file that is missing `robotis-op2_window.dll` is not in your filesystem, as a last resort you could try to reinstall webots

##### Welsh\_dragon64 02/05/2021 23:16:52
`@Bitbots_Jasper` turns out some files were missing such as transfer,remote control and checkstart position. i just copied paste the webot orignal file to the file i am editing and that fixed the issue i had.
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/807389310331519056/unknown.png)
%end


`@Bitbots_Jasper` `@Luftwaffel` I am trying to work on the object detection on Robotis\_op2 on webots. I would like to know which is better YOLO or Open CV. I would also appreciate any open source codes available

##### Anand 02/06/2021 00:49:15
Hey! I have set all the env variables correctly. Yet when I type "webots" in the terminal, I get an error saying "Command not found, but can be installed with snap". Any idea how to fix this?

##### Luftwaffel [Moderator] 02/06/2021 10:55:52
`@Anand` you have to add an entry in the .bash\_aliases launching the executable


`alias webots='/home/simon/webots/webots'`  something like this

##### Bitbots\_Jasper [Moderator] 02/06/2021 11:37:01
It depends on what you want to detect. If it is just a red circle on a flat background open cv is fine, if you want to detect different object classes you might want to use yolo, but it could be overkill

##### Luftwaffel [Moderator] 02/06/2021 11:39:07
I've only dabbled in computer vision, but I think going opencv first is the best approach. You can add YOLO to opencv


`@Welsh_dragon64` If you want to use domain randomization for training your cv, I can probably give you a starting point. I played around with it last year [https://drive.google.com/file/d/1Z2332YFU1Um1NCwx3PoTcOE2jdu6QUxP/view?usp=sharing](https://drive.google.com/file/d/1Z2332YFU1Um1NCwx3PoTcOE2jdu6QUxP/view?usp=sharing)

##### Iris230 02/07/2021 09:52:18
hi guys, I'm wondering what does this error mean?
%figure
![CHVBGQG0CMSPSG0WS0K.png](https://cdn.discordapp.com/attachments/565154703139405824/807911611695890432/CHVBGQG0CMSPSG0WS0K.png)
%end


I just opened the 'highway' sample world, and I changed the controller to the 'racing\_wheel'

##### Usama 02/07/2021 17:43:24
hi guys, i am new to webot, i am trying to add a lidar sensor to my robot but i cannot seem to find it in the base nodes.  in fact i can not find any sensor. how can i add the sensors to the node library?

##### Luftwaffel [Moderator] 02/07/2021 17:44:13
Sensors have to be children of Solids, Robots or Transforms


and they only work in a robot

##### Usama 02/07/2021 17:45:04
okay thanks

##### Stefania Pedrazzi [Cyberbotics] 02/08/2021 09:35:49
Hi, to recompile the `racing_wheel` controller on Windows you can add the following line in the `Makefile` just after the `ifeq($OSTYPE),windows)` line:

```
LIBRARIES += -L"$(WEBOTS_HOME)/msys64/mingw64/bin"
```

##### yash 02/08/2021 12:21:30
Hi ! Are there any functionalities to model under-actuated behaviour ?  for example a  single motor drives multiple hinge joints.

##### bertlangton 02/08/2021 12:28:17
I have an issue starting up WeBots; it opens, but immediately shuts down after a couple of seconds. I've already tried:

-Updating graphics card drivers (I have an integrated AMD card)

-Starting in Safe Mode

-Older versions

What could be the issue? My computer isn't exactly new, but I believe it does have the required minimum specifications for the program to run.

##### Stefania Pedrazzi [Cyberbotics] 02/08/2021 12:30:30
Is this the first time you start Webots or at some point it was starting?

##### Park Jeong Woo 02/08/2021 12:34:09
Hi, I was trying to do stuff with physics ODE plugin. I wonder is there any way to create solid object that doesn't physically interact with objects but still detects collision?

##### Stefania Pedrazzi [Cyberbotics] 02/08/2021 12:34:48
Currently it is not possible to control multiple joints with the same motor, but this functionality is in our TODO list:

[https://github.com/cyberbotics/webots/issues/1365](https://github.com/cyberbotics/webots/issues/1365)

##### Park Jeong Woo 02/08/2021 12:34:57
ex) ball collides with box but box doesn't get pushed by the ball. Still collision is detected by the box.

##### Stefania Pedrazzi [Cyberbotics] 02/08/2021 12:36:20
Yes, you should define the `boundingObject` field of a `Solid` node but not the `physics` field.

##### Park Jeong Woo 02/08/2021 12:37:00
I tried setting physics with null, but when I moved that object around, it still interacted with other objects.

##### Stefania Pedrazzi [Cyberbotics] 02/08/2021 12:41:02
Ok, so you want to detect the collision to do your stuff but then let the physics engine ignoring it.

This is possible from the physics plugin `webots_physics_collide` function. If this function returns 1 or 2, then ODE will not handle the collision:

[https://www.cyberbotics.com/doc/reference/callback-functions#int-webots\_physics\_collidedgeomid-dgeomid](https://www.cyberbotics.com/doc/reference/callback-functions#int-webots_physics_collidedgeomid-dgeomid)

##### Park Jeong Woo 02/08/2021 12:42:56
Thanks

##### bertlangton 02/08/2021 12:43:50
Nope, it never lasted more than a few seconds

##### Stefania Pedrazzi [Cyberbotics] 02/08/2021 12:50:06
Which OS are you using?

##### bertlangton 02/08/2021 13:24:39
Windows 10

##### Stefania Pedrazzi [Cyberbotics] 02/08/2021 13:47:01
It would be helpful if you could open the Command Prompt, navigate to the Webots installation directory, type the following instructions and post the output:

```
cd msys64\mingw64\bin
webots.exe --sysinfo
```

##### bertlangton 02/08/2021 15:21:53
sure, here it is:



System: Windows 10 64-bit

Processor: Intel(R) Core(TM) i3-6100U CPU @ 2.30GHz

Number of cores: 2

OpenGL vendor: ATI Technologies Inc. (0x1002)

OpenGL renderer: AMD Radeon (TM) R5 M430 (0x6660)

OpenGL version: 4.5.13469 Compatibility Profile Context 21.19.512.4

##### Olivier Michel [Cyberbotics] 02/08/2021 15:28:18
Did you try to update your graphics driver?

##### bertlangton 02/08/2021 15:38:29
Yup.


After that, it stayed open for a few seconds longer, but other than that it didn't help

##### Stefania Pedrazzi [Cyberbotics] 02/08/2021 15:47:52
The OpenGL version seems rather new. I'm checking in our telemetry database to see if other users could successfully run Webots with this OpenGL version and similar setup. But for the moment it seems that most of the users that enabled the telemetry are using older OpenGL versions (usually 3.3, for example `3.3.13596 Core Profile Forward-Compatible Context`)


Maybe it could also be an option to try to downgrade the drivers to check if it works.

##### Iris230 02/08/2021 16:05:00
thank you! It works😆

##### Stefania Pedrazzi [Cyberbotics] 02/08/2021 16:07:02
Thank you for reporting this bug! I updated the Webots Makefile and the fix will be included in the next release of Webots.

##### alejanpa17 02/08/2021 16:38:47
Hey guys, i need some help here. I have DEF this boundingObject but when i want to use it in other solid It doesnt appear. Am I doing something wrong?
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/808376295079018548/unknown.png)
%end



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/808376461911261244/unknown.png)
%end

##### Olivier Michel [Cyberbotics] 02/08/2021 16:50:00
You can include a USE of this DEF only at a lower position in the scene tree. Where are you trying to include a USE of it?

##### alejanpa17 02/08/2021 16:52:41
For example in this one
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/808379791899099136/unknown.png)
%end


I just found out that you can include a USE only upper the DEF (in the way closer to the root of the scene tree). So if it is at the same level is impossible?

##### Olivier Michel [Cyberbotics] 02/08/2021 17:09:52
Yes, it should be possible at the same level, but the DEF has to come first (upper).


If you save your world file and search for the USE/DEF name, you should first find the DEF, then the USE.

##### alejanpa17 02/08/2021 17:26:24
Look, I have it the DEF there but the solids where I'm pointing It doesn't appear the USE
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/808388279052533810/unknown.png)
%end


I think is kind of a bug because I did a boundingObject DEF of a Box for testing and It works with the solids under it, just like you said


Its happening when you have this type of structure of the boundingObject DEF: Group>>Transform>>Box
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/808396782168965120/unknown.png)
%end


You can try yourself

##### Stefania Pedrazzi [Cyberbotics] 02/08/2021 19:29:02
`@alejanpa17` The DEF "test" node can only be used in `boundingObject` fields because this structure (without a `Shape` node between the `Transform` and the `Box` nodes) is a particular simplified structure not valid for graphical objects.

If you also want to use it outside the `boundingObject` to define the a graphical object, then I would suggest you to declare the DEF node for the graphical object and then the USE for the boundingObject.

##### alejanpa17 02/08/2021 20:40:19
Just found out this is working!! It turns out that you need a Shape node between Transform and Box node. Thank you!!
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/808437079990206534/unknown.png)
%end

##### Adyasha 02/09/2021 06:51:52
Which sensor in webots can differentiate between colors?

##### Olivier Michel [Cyberbotics] 02/09/2021 07:04:37
A standard RGB camera.


Note: an infra-red distance sensor is also affected by colors of obstacles.

##### Bitbots\_Jasper [Moderator] 02/09/2021 07:05:39
if you just want a simple color sensor you can probably set the resolution to 1x1 pixels

##### Adyasha 02/09/2021 07:06:00
I want to differentiate between black and white paths in a line follower

##### Olivier Michel [Cyberbotics] 02/09/2021 07:07:00
In that case, it is simpler and more efficient to use a DistanceSensor with type set to "infra-red". You will measure a larger value for the white and a lower value for the black.

##### Adyasha 02/09/2021 07:07:47
Somehow the reading of my infrared come just the opposite for white it is <1000 and for black it is 1000

##### Olivier Michel [Cyberbotics] 02/09/2021 07:10:18
That may depend on the values set in lookupTable of the DistanceSensor.

##### Adyasha 02/09/2021 07:11:31
Ok thanks !


I need a bit of help with my line following algorithm

##### popo74013 02/09/2021 09:05:00
i have a question related to the camera that works as rgb


i try to use the camera to read rgb but i am not getting the write value


my camera is close to an ir sensor, deos this affect it?

##### Olivier Michel [Cyberbotics] 02/09/2021 09:07:09
No, it shouldn't.

##### Bitbots\_Jasper [Moderator] 02/09/2021 09:07:17
you can try to visualize the cameras viewframe using view->show optional renderings->show camera frustum


maybe you also need to start your camera [https://cyberbotics.com/doc/reference/camera#wb\_camera\_enable](https://cyberbotics.com/doc/reference/camera#wb_camera_enable)

##### popo74013 02/09/2021 09:09:41
i did use enable command


but i am reading the wrong value


is it possible to go on a audio call with anyone?

##### Bitbots\_Jasper [Moderator] 02/09/2021 09:10:45
did you try this?

##### popo74013 02/09/2021 09:10:56
doing it now


it doesnt make any difference


i am quite sure that there is an issue related  to code


def colour():

    #identify colour

    cam.enable(TIME\_STEP)

    cameraData = cam.getImage()

    # get the red component of the pixel (5,10)

    red = cam.imageGetRed(cameraData, cam.getWidth(), 1, 1)

    green = cam.imageGetGreen(cameraData, cam.getWidth(), 1, 1)

    blue = cam.imageGetBlue(cameraData, cam.getWidth(), 1, 1)

    # red = pixel[0]

    # green = pixel[1]

    # blue = pixel[2]

    cam.disable()

    return (red,green,blue)


this is the function to read the colour


but the camera most of the time reads a certain colour and only at some random moments it reads a couple of more colours

##### Bitbots\_Jasper [Moderator] 02/09/2021 09:21:16
enable your camera once and then let it run, dont try to enable and disable it at every simulation step

##### popo74013 02/09/2021 09:22:47
compass = robot.getDevice('compass')

compass.enable(TIME\_STEP)


i have added these bits outside of the function

##### Bitbots\_Jasper [Moderator] 02/09/2021 09:24:06
i think it takes one simulation step to get the image from the simulation into the frame buffer of the camera


to test you can put a step simulation between the cam.enable and the cam.getImage

##### popo74013 02/09/2021 09:27:46
how can i do this


and why does reads red when there is nothing red in front of the robot?

##### Bitbots\_Jasper [Moderator] 02/09/2021 09:33:09
```
simulation -> camera buffer -> your code
            1                2
```


1 only happens when you step the simulation


and you are therefore doing 2 before 1


and there might be anything in the camera buffer before it is properly initialized


that is the nature of RAM


it should be something like controller.step(TIME\_STEP)

##### popo74013 02/09/2021 09:40:16
i think i figured it out


when you click on the camera which is located at the children file of the robot


i moved the pink pyramid shape of the camera in the front and now it reads the right colour


what is actually the pink pyramid?

##### Bitbots\_Jasper [Moderator] 02/09/2021 09:42:32
it is called the camera frustum


basically what the camera sees

##### popo74013 02/09/2021 09:42:45
ohhh


thank you! now it works perfectly and i get the rgb values


thank you!

##### nelsondmmg 02/09/2021 13:42:16
Hi, I'm would like to write a sh file that executes multiple webots simulations (sequentially), changing the arguments of the controllers used inside the simulation. Can I modify such parameters from the command line directly or do I need to modify the .wbt file before each execution? Also, is it possible to register videos from the simulation using the command line (if possible without opening the webots window). How can I automatize these simulations .In the documentation the "Starting webots" page only gives details about launching the application. Thanks.

##### Luftwaffel [Moderator] 02/09/2021 13:44:16
`@nelsondmmg` you could use extern controllers and start those seperately, parsing arguments with python for example

##### Darko Lukić [Cyberbotics] 02/09/2021 13:44:17
`@nelsondmmg` You can add a Supervisor node which changes the arguments and restarts the simulation. Same for videos, you can use the Supervisor node to record videos.

##### Luftwaffel [Moderator] 02/09/2021 13:46:24
you can also load the world from a python script



> **Attachment**: [launch\_webots\_world.py](https://cdn.discordapp.com/attachments/565154703139405824/808695365048991764/launch_webots_world.py)


on the bottom of the script is the example usage under \_\_main\_\_()


example on how to start your python controller
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/808697787134771261/unknown.png)
%end


this will launch the world, and make the extern controller connect to the correct webots instance

##### nelsondmmg 02/09/2021 14:06:13
Ok, but since I'm already working with C++ I would like to use it instead of python (but it's nice to know that there is an alternative). Now, if I create a supervisor node to manage the simulation (keeping in mind that all the objects in the simulation are also supervisors, since everyone recovers the position from the others directly from the node) how can I launch the other controllers (reset the controllers and the simulation and change the arguments can be done using the supervisor functions, but I do not see a start function). Also, if there a way to known that a controller ended execution, or some sort of message needs to be sent to the supervisor ?

##### popo74013 02/09/2021 14:11:23
hello, i have a question realated to motors


i try to se their position but they do some funny moves


i think it might be an issue with the reference position

##### Luftwaffel [Moderator] 02/09/2021 14:12:57
`@nelsondmmg` If it is the same world and robots, just turn the controllers into extern controllers. After a reset or world load, the simulation will only start, if all extern controllers have been started. So you can just launch them with the specific args you want


`@popo74013` you have to give us more details than that. Perhaps show us your controller code and explain exactly what it is doing, and what it SHOULD do

##### popo74013 02/09/2021 14:17:07
i made a robot and i used 2 motors to control the gripping mechanisms


and once the robot moves and detects an object it is supposed to grip it


but when i set the motors' position at an angle, they move randomy


i think it is because they are not oriented correctly

##### Luftwaffel [Moderator] 02/09/2021 14:19:08
Make sure the axis of the jont is defined properly


also the anchor and 'translation' field of the endPoint Solid for each joint


usually you want them to be identical

##### popo74013 02/09/2021 14:20:09
ohhh, thank you


i will try it and i will let you know!

##### nelsondmmg 02/09/2021 14:21:50
Is there some documentation about extern controllers? Maybe is a new feature and I'm not familiarized, but since there is some dependency related to the control of objects in the code (in my case I need to initialize the driver object to control vehicles) I should not start these controllers outside webots and then attach then to the webots process.

##### Luftwaffel [Moderator] 02/09/2021 14:22:27
[https://www.cyberbotics.com/doc/guide/running-extern-robot-controllers](https://www.cyberbotics.com/doc/guide/running-extern-robot-controllers)

##### nelsondmmg 02/09/2021 14:40:59
Ahh thanks, now it is much more clear.

##### Olivier Michel [Cyberbotics] 02/09/2021 15:51:37
It could be very nice if you could share your experience using Webots with ROS at [https://discourse.ros.org/t/why-is-robotics-simulation-hard/15888/11](https://discourse.ros.org/t/why-is-robotics-simulation-hard/15888/11)

##### popo74013 02/10/2021 10:02:13
hello


is there a way to make a motor act as a servo?


i am trying to make a really simple grabbing mechanism and i just want to make 2 beams to rotate from 0 to 90 degrees

##### Darko Lukić [Cyberbotics] 02/10/2021 10:03:53
Hello `@popo74013`, Yes, if you control the motor using `wb_motor_set_position` it acts as a servo.

##### popo74013 02/10/2021 10:04:15
grips = []

gripsNames = ['left\_motor', 'right\_motor']

for i in range(2):

    grips.append(robot.getDevice(gripsNames[i]))

    grips[i].setPosition(3.14/2)

    grips[i].setVelocity(0.0)


i am writing in python but this doesnt seem to work

##### Luftwaffel [Moderator] 02/10/2021 10:39:36
`@popo74013` dont set the velocity

##### popo74013 02/10/2021 10:39:56
ohh i think it works now


it was an issue in the design


the right grip was working fine but the left not


so i modified the right motor and beam to look like the left and now it works


thank you!

##### Luftwaffel [Moderator] 02/10/2021 10:41:21
[https://cyberbotics.com/doc/reference/motor?tab-language=python#force-and-torque-control](https://cyberbotics.com/doc/reference/motor?tab-language=python#force-and-torque-control)


this table tells you exactly what the commands do. Motors can be in position-, velocity-, and torque control

##### Saud 02/10/2021 11:16:36
Hello, I have created a sphere on a new world. I want to know if and how i can increase the size of this shpere with respect to time as the simulation runs? i am very new to webots

##### Luftwaffel [Moderator] 02/10/2021 11:22:30
`@Saud` The easiest would be to use a supervisor controller. Get a handle to the radius Field of the sphere, and change the value

##### bingdong 02/10/2021 11:52:53
Hi! New to Webots and Blender. As I understand both support python programming. But is it the case that python scripts can be used in blender to create animations and in Webots to build robot controllers?

I found a simple legged robot blender file online which makes it move when a python script. When I exported it to Webots, the model doesn't move. I'm guessing that the same script won't work for controller? What can I do to make the robot move then?

##### Luftwaffel [Moderator] 02/10/2021 12:11:05
You will have to write a controller [https://www.cyberbotics.com/doc/guide/controller-programming](https://www.cyberbotics.com/doc/guide/controller-programming)


<@&568329906048598039> Is there still separate animation functionality? Not sure about that

##### Stefania Pedrazzi [Cyberbotics] 02/10/2021 12:17:40
No, Webots doesn't have any built-in functionality for animations.

For the moment the way to go is to write a controller program that reads the animation file and using the Supervisor API moves the different robot parts accordingly.

##### bingdong 02/10/2021 12:34:31
<@239507682111913984> `@Stefania Pedrazzi` Thanks for the guidance. I'll try it out!

##### Luftwaffel [Moderator] 02/10/2021 12:48:51
is there an example for this? I remember this question coming up 3 times this winter already

##### Stefania Pedrazzi [Cyberbotics] 02/10/2021 12:50:57
Not yet, but it is in our short-term TODO list to add an example for the human animations (and release the experimental Skin node).

##### ChristinaP 02/10/2021 12:51:28
Hello everyone! I'm just starting using webots to simulate an autonomous vehicle. Is there an option to alter the input of the sensors (camera, lidar and gnss) while the simulation is running in order to figure out what's gonna happen at the vehicle in case one of those sensors malfunctions? Do those sensors affect the simulation on runtime?

##### samuel.nametala 02/10/2021 12:56:31
Hello everyone! I'm using a PEN function on the e-puck robot, it leaves a trail that doesn't erase. Can I define a distance from this trail? For it to erase as the robot walks

##### Olivier Michel [Cyberbotics] 02/10/2021 13:13:31
You can, at the controller level, add an extra layer that will alter sensor data before passing then to your control algorithm. Also, in Webots, depending on the sensor, you can add different types of noise. See the specific sensor descriptions in the documentation to understand what kind of noise can be added.


Yes, you can use WorldInfo.inkEvaporation, see [https://cyberbotics.com/doc/reference/worldinfo#worldinfo](https://cyberbotics.com/doc/reference/worldinfo#worldinfo)

##### samuel.nametala 02/10/2021 13:24:46
OK, thank you!


I found the problem I was having. I should control the evaporation of the pen in the inkEvaporation field of the WorldInfo node. thank you again.

##### waleed 02/10/2021 15:00:16
Can someone help on how to build a connection between the webots drone and kinect sensor

##### Luftwaffel [Moderator] 02/10/2021 15:01:35
Can you be a bit more specific? What exactly do you want? Physically attach the kinect to the drone?

##### waleed 02/10/2021 15:02:31
So i am using a physical kinect sensor and a simulated drone that is available in the webots software


So the drone is not physical


I want to develop a communication between the physical kinect sensor and the drone available in webots software

##### Luftwaffel [Moderator] 02/10/2021 15:04:11
[https://www.cyberbotics.com/doc/reference/emitter](https://www.cyberbotics.com/doc/reference/emitter)


you can use emitter and receiver nodes in Webots


basically simulates radio communication

##### waleed 02/10/2021 15:05:58
I see that so in my case i could send signals and use the kinect sensor to receive the nodes

##### Luftwaffel [Moderator] 02/10/2021 15:06:22
what exactly do you want to do?


send movement commands to the drone depending on what the kinect sees?

##### waleed 02/10/2021 15:06:59
Yes exactly


Like that

##### Luftwaffel [Moderator] 02/10/2021 15:07:17
then add a receiver to the drone, and an emitter to the kinect


both have to be defined as a robot. With a controller each

##### waleed 02/10/2021 15:08:57
Just one more clarification the code for my kinect is written in C# and i have used visual community in windows so do i have to change my code into C++ to make it possible

##### Luftwaffel [Moderator] 02/10/2021 15:09:46
I'm a python and ROS guy, so I dont know. But that seems right.


I'd recommend going through some of the documentation of Webots and having a look at some sample worlds, in order to get a better base understanding of Webots

##### waleed 02/10/2021 15:11:02
Okay fair enough! But#bw to run the testing of the physical kinect using webots


To test ny gestures on a physical kinect sensor is it possible


?

##### Luftwaffel [Moderator] 02/10/2021 15:11:36
wait, do you want to simulate the kinect, or use the physical kinect to control the simulated drone?

##### waleed 02/10/2021 15:11:54
Yes use the physical kinect to control the simulated drone

##### Luftwaffel [Moderator] 02/10/2021 15:12:02
ohhhh okay, that is different


you're using the mavic2Pro in Webots?

##### waleed 02/10/2021 15:12:25
Yes mavic 2 pro

##### Luftwaffel [Moderator] 02/10/2021 15:12:46
the default controller there is in c


you can take a look at it. You simply have to get your kinect data in there


how you do it, does not really matter


or you write your own in any of the supported languages

##### waleed 02/10/2021 15:14:29
Yes i have gone through the default controller snd the only part i dont get is how to get the kinect data in there

##### Luftwaffel [Moderator] 02/10/2021 15:15:03
I have no experience with c#


<@&568329906048598039> Does anyone know how communicate between c# and c/c++?

##### waleed 02/10/2021 15:16:39
Well i would change my code from C# to C++ so webots can support that language


It is just the communication bit that needs to be sorted between a physical kinect and a simulated drone

##### HANEEN AL ALI 02/10/2021 15:20:16
Hi, I am building a manipulator and I want the first joint to move 180 along the x axis.  How i can do that? Do I need to change the motor parameters or is it related to the code?

##### Luftwaffel [Moderator] 02/10/2021 16:54:37
Linear or rotational motor?


The type of movement is defined in the joint

##### HANEEN AL ALI 02/10/2021 17:54:36

%figure
![SmartSelect_20210210-175423_Samsung_Notes.jpg](https://cdn.discordapp.com/attachments/565154703139405824/809120151077257266/SmartSelect_20210210-175423_Samsung_Notes.jpg)
%end


Rotational motor like pic above . I want link 1 to move from -x to x

##### Luftwaffel [Moderator] 02/10/2021 18:12:03
ohh, like a cartpole?


well you have to set up the hingejointParameters correctly


with the axis defined the way you want

##### Adyasha 02/10/2021 18:16:14
Why is it that the code run on my bot with my world runs differently on someone else's computer with same world and same bot ?

##### Chernayaten 02/10/2021 18:23:30
Differently how? If it's the speed then that's most likely due to difference in the CPU/GPU capabilities of your computers



[https://www.cyberbotics.com/doc/guide/speed-performance](https://www.cyberbotics.com/doc/guide/speed-performance)

##### Adyasha 02/10/2021 18:25:04
Ok ill look to it thanks


I need a brief syntax of switching leds on and off in webots ...please help

##### Stefania Pedrazzi [Cyberbotics] 02/11/2021 07:27:24
Here is the LED API: [https://www.cyberbotics.com/doc/reference/led#wb\_led\_set](https://www.cyberbotics.com/doc/reference/led#wb_led_set)

##### Darko Lukić [Cyberbotics] 02/11/2021 07:44:08
`@waleed` You want to send images from your physical Kinect to the simulated drone? In that case, you don't need C#-C/C++ communication, you can read the images directly in your C/C++ controller:

[https://homes.cs.washington.edu/~edzhang/tutorials/kinect2/kinect1.html](https://homes.cs.washington.edu/~edzhang/tutorials/kinect2/kinect1.html)


In general, to write a controller in non-supported language, you can develop a third-party support like it is done for Haskell:

[https://github.com/cyberbotics/HsWebots](https://github.com/cyberbotics/HsWebots)



or use TCP/IP:

[https://cyberbotics.com/doc/guide/interfacing-webots-to-third-party-software-with-tcp-ip](https://cyberbotics.com/doc/guide/interfacing-webots-to-third-party-software-with-tcp-ip)

##### nelsondmmg 02/11/2021 10:03:12
Hi, is there some way to find if a controller for a robot is in execution? From the supervisor that launch the extern controllers (with the system call that detach this new process from the supervisor itself). Thanks

##### Saud 02/11/2021 10:45:34
Hi i just wanted to ask that this is the correct way to print something out right. I am using C++. I have also included iostream but nothing actually prints out
%figure
![Screenshot_2021-02-11_at_10.44.30.png](https://cdn.discordapp.com/attachments/565154703139405824/809374568019656704/Screenshot_2021-02-11_at_10.44.30.png)
%end


Am I doing something wrong

##### Stefania Pedrazzi [Cyberbotics] 02/11/2021 10:47:29
In C++ you also need to print `std::endl` at the end of the log to flush the buffers.

[http://www.cplusplus.com/reference/ostream/endl/](http://www.cplusplus.com/reference/ostream/endl/)

##### Saud 02/11/2021 10:50:04
hmm right i thought that was mostly for a new line. just tried it. nothing

##### Mohannad Kassar 02/11/2021 10:50:10
hello guys, I'm taking webots tutorial and I want to build my senior project using webots. I want to ask you if I can implement AI algorithms that can manipulate a robotic arm using a bayesian neural network that get the distination as an input and the output is the angles of the actuators of this arm. is this possible ?

##### Stefania Pedrazzi [Cyberbotics] 02/11/2021 10:52:19
Are you running the simulation step-by-step? In this case the logs are currently printed one step later in the Webots console.

##### Bitbots\_Jasper [Moderator] 02/11/2021 10:53:22
it sounds like you want to teacha bayesian neural network to do inverse kinematics, is that correct?

##### Mohannad Kassar 02/11/2021 10:53:40
exactly

##### waleed 02/11/2021 10:54:09
Hi — thanks for the help and i will look into it. But in my case i was going to do live gestures and in my opinion if i were to send images that would produce a lot error in controlling the simulated drone

##### Bitbots\_Jasper [Moderator] 02/11/2021 10:55:05
you dont really need a simulation for that, you only need forward kinematics to get the error between the pose that the manipulator would be in if you applied the joint angels from the network and the pose you wanted it to be in

##### Saud 02/11/2021 10:55:19
yes but this is out of the while loop at the moment just to test. the actual thing i want to print is in the while loop. i put it out to see if it actually prints something out

##### Bitbots\_Jasper [Moderator] 02/11/2021 10:56:34
what is the purpose of using a neural network rather than something like fastIK or trac\_ik

##### Mohannad Kassar 02/11/2021 10:56:52
yes but I proposed the neural networks methods in my proposal for the project. fell like I'm in a real trouble 🥲

##### Stefania Pedrazzi [Cyberbotics] 02/11/2021 10:57:59
It is tricky to do it within Webots because the simulation doesn't run until all the extern controllers are started. You may try to modify the world from your robot controller and check for the modification from the supervisor controller (for example setting the `Robot.customData` field).

It seems better to check which processes are running on the system using standard libraries (for example psutil for Python, etc.)

##### Bitbots\_Jasper [Moderator] 02/11/2021 10:59:56
for inverse kinematics tasks neural networks usually dont work that well as far as i know, there is an evolutionary ik called bioIK that we use and works pretty well

##### Mohannad Kassar 02/11/2021 11:00:16
I didn't get you dear

##### Stefania Pedrazzi [Cyberbotics] 02/11/2021 11:00:34
Try to run it in realtime mode instead of step-by-step. In any case the instruction seems correct and it should work if you don't have other issues in your controller.

You can also check the C++ example in `projects/languages/cpp/worlds/example.wbt` where many messages are printed from the controllers.

##### Bitbots\_Jasper [Moderator] 02/11/2021 11:01:00
why do you want to use a neural network to solve the problem of inverse kinematics rather than an interative algorithm?

##### Mohannad Kassar 02/11/2021 11:02:49
I can use anything that works, I want the robotic arm to reach a destination of a surface when it is detected using a smart camera

##### Saud 02/11/2021 11:02:57
sorry yes i mean that i am running it on realtime. and also i should say that i am using supervisor mode so i hope that doesn't make a difference

##### Bitbots\_Jasper [Moderator] 02/11/2021 11:06:22
it is definitely possible to simulate a robotic arm and a regular rgb camera as well as a deph camera (maybe you can elaborate on what you mean by smart camera?)  in webots if that is what you meant to ask


but moving an arm from a to b is not as simple as it might seem, if you do jointspace interpolation, meaning just turn all the joints to the target position, you will have unexpected movements and possibly collision

##### Mohannad Kassar 02/11/2021 11:09:42
iw webots I found a smart camera with object recognition, you can check it in the user manual


I will do my best to work

##### Bitbots\_Jasper [Moderator] 02/11/2021 11:11:24
ah ok, just found the recognition node, did not know about that

##### Mohannad Kassar 02/11/2021 11:11:39
called mobileye

##### Bitbots\_Jasper [Moderator] 02/11/2021 11:16:17
i'm not sure that i understand your use case well enough, but I would recommend some motion planning framework such as moveit if you want to achive any complex movements

##### Mohannad Kassar 02/11/2021 11:17:21
this is a software ?

##### Bitbots\_Jasper [Moderator] 02/11/2021 11:17:43
[https://moveit.ros.org/](https://moveit.ros.org/)

##### Mohannad Kassar 02/11/2021 11:18:46
I'm also creating a 3D model using blender, would it work using moveit ?

##### Bitbots\_Jasper [Moderator] 02/11/2021 11:25:39
you need a urdf (basically a description of your robots kinematics) and a sdf (basically a semantic description of your robot) for moveit to work


how complex is your manipulator?

##### Mohannad Kassar 02/11/2021 11:26:34
is 3 Degrees of Freedom an answer for your question ?

##### Bitbots\_Jasper [Moderator] 02/11/2021 11:28:04
then maybe moveit is a bit overkill, it depends on how complex your environment is but with only 3 DoF you can probably use some jointspace interpolation


i thought you had something like a 6 DoF robot arm

##### Mohannad Kassar 02/11/2021 11:29:24
no it is only 3. anyway i had a look in moveit, it is very complicated as my first impression

##### Bitbots\_Jasper [Moderator] 02/11/2021 11:30:26
yes it is quite complicated, but for more complex motion planning tasks with more degrees of freedom some motion planning framework is usually required

##### Mohannad Kassar 02/11/2021 11:32:59
I have 3 main algorithms in this project need to be implements, I'm thinking to make something on GitHub so maybe I can got some help if needed

##### Stefania Pedrazzi [Cyberbotics] 02/11/2021 11:33:05
No, there is no difference if you use the Supervisor.

##### Mohannad Kassar 02/11/2021 11:33:10
implemented*

##### nelsondmmg 02/11/2021 12:58:13
Hmm got it, I'm using c++ but I'm gonna try to find some function to check the pid from the controller process. Thanks!


I actually created a isCtrlRunning variable into the object proto as a flag, easier that to do a system call every step. Thanks 🙂


Is there a way to record a movie in full-screen without the window warning the change to full-screen appearing? I'm launching the movie from code and each time it blocks the execution.

##### John520 02/11/2021 15:45:06
Hi guys, I have a question about adding the physics to the potted tree. When the simulation starts, the potted tree with physics added sinks a bit into the floor. Could you please advise me on this issue?
%figure
![Kazam_screenshot_00005.png](https://cdn.discordapp.com/attachments/565154703139405824/809449947904737290/Kazam_screenshot_00005.png)
%end

##### Luftwaffel [Moderator] 02/11/2021 15:58:30
`@John520` you can give then a seperate contact material and decrease the soft\_cfm value


you can also decrease the cfm value of the whole world, but collisions might become "too hard"

##### John520 02/11/2021 16:10:41
`@Luftwaffel` Thank you for your direction. I added a contact material for TruckWheels before. Would it be similar to add one for the potted tree?
%figure
![Kazam_screenshot_00006.png](https://cdn.discordapp.com/attachments/565154703139405824/809456385867251722/Kazam_screenshot_00006.png)
%end


By the way, why it does not work if the material2 is "TruckWheel"?

##### Luftwaffel [Moderator] 02/11/2021 16:15:02
what does not work?


and yes, would be the same


you can add as many contact properties as you like

##### John520 02/11/2021 16:32:39
`@Luftwaffel`. Oh, I added a truck and a contact property for it. The truck will sink a bit into the floor if the material2 is "TruckWheel".


But if the material2 is "TruckWheels", the truck will not sink and it looks very good.

##### Luftwaffel [Moderator] 02/11/2021 16:37:32
contact properties adjust the interaction between 2 contact materials


so it depends on what material you have in your wheels

##### John520 02/11/2021 16:47:38
Thank you `@Luftwaffel`. Should I check the Proto file to know what the material it is?

##### Luftwaffel [Moderator] 02/11/2021 17:01:37
in the scene tree, just change the contactmaterial name of your wheels

##### John520 02/11/2021 17:19:08
Thank you very much. I found the contactMaterial name of the truck in the TruckWheel.proto.


But I could not find the contactMaterial name of the PottedTree.proto. Please see [https://github.com/cyberbotics/webots/blob/released/projects/objects/plants/protos/PottedTree.proto](https://github.com/cyberbotics/webots/blob/released/projects/objects/plants/protos/PottedTree.proto)

##### Luftwaffel [Moderator] 02/11/2021 17:22:26
you could convert it to basenodes and add it yourself


or you edit the proto


if something is not included, it uses the default values

##### John520 02/11/2021 17:27:42
Thank you very much for your help! It works!


Is there a setting in the PottedTree to allow a truck to go through it? It is like a tractor going through in the crop field.

##### Luftwaffel [Moderator] 02/11/2021 17:42:18
disable the bounding Object

##### vinwan 02/11/2021 17:52:16
I tried running the latest webots build on computer which has intel core i5 2520M which ha intel HD 3000 graphics with directX 12 but no dedicated GPU . After Webots was installed it opened and quit on me after 2 seconds or soo i only saw the loading screen .could someone help me out on this?

##### John520 02/11/2021 17:52:32
Thank you `@Luftwaffel` . I first convert the PottedTree to the base node and then reset its boundingObject Group to default value. But the PottedTree will sink and disappear under the floor.

##### Luftwaffel [Moderator] 02/11/2021 17:53:22
then disable physics to make them static objeccts

##### John520 02/11/2021 17:57:20
Thanks a lot for your help, `@Luftwaffel` !

##### KajalGada 02/11/2021 19:42:44
Has anyone used the Youbot in Webots? I tried to run each wheel with different velocity and they don't behave like a typical Mecanum wheel. I could only get the robot to drive forward, backward and turn while driving ahead. I wasn't able to get it to drive right/left while facing forward. Anyone faced similar problems?

##### bellino 02/11/2021 22:44:42
Has anyone here ever set up an extern controller and run it as a ROS node? I've set up both ROS and webots and installed ros-noetic-webots-ros but it keeps throwing an error at the first line (an import statement) of my python file

##### Bitbots\_Jasper [Moderator] 02/11/2021 22:45:37
you probably need to set your environment variables correctly


we use this: [https://github.com/bit-bots/wolfgang\_robot/blob/master/wolfgang\_webots\_sim/scripts/setenvs.sh](https://github.com/bit-bots/wolfgang_robot/blob/master/wolfgang_webots_sim/scripts/setenvs.sh)


then just `source setenvs.sh` and try to start your controller in the same terminal

##### bellino 02/11/2021 22:49:03
hm I have set most of them, I put them in my .bashrc file, except what's on line 5. What does that do exactly?

##### Bitbots\_Jasper [Moderator] 02/11/2021 22:49:35
dont really know to be honest


what exactly fails to import?

##### bellino 02/11/2021 22:50:12
Also, I just put my files in src in my catkin\_ws and I start the node using rosrun packagename filename (as opposed to roslaunch webots\_ros and so on, like they do in the docs)


this is the error message I get: line 1: import: command not foundfrom: can't read /var/mail/controllers


so I guess it is the import statement itself?

##### Bitbots\_Jasper [Moderator] 02/11/2021 22:51:29
you forgot your shebang


add this as the first line of your code


`#!/usr/bin/env python3`

##### bellino 02/11/2021 22:53:20
ooh nice, now it just tells me that it doesn't know controller, which is what I first had when my environment variables were set up wrongly. Thank you!

##### Bitbots\_Jasper [Moderator] 02/11/2021 22:54:20
but you know how to fix it?

##### bellino 02/11/2021 22:56:14
okay I take back what I said, this is not the same error because running the external controller outside of ROS still works

##### Bitbots\_Jasper [Moderator] 02/11/2021 22:57:00
can you start your controller using `python controller.py`


without rosrun

##### bellino 02/11/2021 22:57:37
yep, that works just fine

##### Bitbots\_Jasper [Moderator] 02/11/2021 22:58:48
we start our ros controller for webots using a shell script: [https://github.com/bit-bots/wolfgang\_robot/blob/master/wolfgang\_webots\_sim/scripts/start.sh](https://github.com/bit-bots/wolfgang_robot/blob/master/wolfgang_webots_sim/scripts/start.sh)


which is called in a launch file


basically only line 8 in [https://github.com/bit-bots/wolfgang\_robot/blob/master/wolfgang\_webots\_sim/launch/simulation.launch](https://github.com/bit-bots/wolfgang_robot/blob/master/wolfgang_webots_sim/launch/simulation.launch)

##### bellino 02/11/2021 23:00:25
thank you, I will take a look!


just as a little fyi and also because I cannot help shaking my head, there was no problem... the import that failed was from a file of mine that was in a folder called controllers. Thank you `@Bitbots_Jasper` for your help!

##### vinwan 02/12/2021 07:31:37
I tried running the latest webots build on computer which has intel core i5 2520M which ha intel HD 3000 graphics with directX 12 but no dedicated GPU . After Webots was installed it opened and quit on me after 2 seconds or soo i only saw the loading screen .could someone help me out on this?

##### Darko Lukić [Cyberbotics] 02/12/2021 07:56:41
Can you try a safe mode:

[https://www.cyberbotics.com/doc/guide/starting-webots#safe-mode](https://www.cyberbotics.com/doc/guide/starting-webots#safe-mode)

##### vinwan 02/12/2021 08:33:40
`@Darko Lukić` Thank you for replying I will try this out and let you know of the outcome

##### nelsondmmg 02/12/2021 14:28:39
Hi, I have a question about the usega of extern controllers. During a simulation the step is executed only after all robots executed the step() function. How can I make a simulation continue if one of these extern controller finished its execution (and therefore does not execute step() anymore)?

EDIT: Just found out that I just needed to set synchronization to false (but the pedestrians in my version, 2020a, did not have this attribute so I created).

##### Olivier Michel [Cyberbotics] 02/12/2021 14:54:59
Did you run the youbot demo distributed with Webots? The source code of the controller shows you how to make all these movements, including the side movement. Also, when the demo is over, you should be able to control the robot from the keyboard on all these motions.

##### vinwan 02/12/2021 15:03:25
Unfortunately it didn't workout webots still quits on me

##### Saud 02/12/2021 16:28:16
I am getting this error and i am quite confused why :

fatal error: 'webots/robot.h' file not found

##### Irunit 02/12/2021 17:22:33
Hi! I was writing custom scenarios for simulation with the help of a script. But when I reset the simulation the floor node is not removed and can be seen in the scene tree whereas other nodes (entities) are removed. Can anyone please help me with this?

##### Krish 02/12/2021 17:45:49
Can there be a feature added in Webots that can make a drop-down wherever we declare a function or write if-elif-else anywhere in the code so that we can minimize it by pulling it up with the arrow, if we dont need to see it that much.

This will surely decrease the time to scroll up & down, and is also found in most editors.

##### Saud 02/12/2021 19:21:24
I am doing one of the tutorials and i tried to add the supervisor. and got this error. does anyone know why ?
%figure
![Screenshot_2021-02-12_at_19.20.10.png](https://cdn.discordapp.com/attachments/565154703139405824/809866771536412682/Screenshot_2021-02-12_at_19.20.10.png)
%end

##### waleed 02/12/2021 20:06:53
Shello


Can someone guide me on how to use the kinect sensor in webots


Does it have its own controller code and can it do live skeletal gesture tracking

##### vinwan 02/13/2021 07:40:26
Can something be done about this?
%figure
![IMG-20210213-WA0001.jpg](https://cdn.discordapp.com/attachments/565154703139405824/810052752037380116/IMG-20210213-WA0001.jpg)
%end

##### Luftwaffel [Moderator] 02/13/2021 16:56:12
`@Saud` you initialize the robot class, and then the supervisor. The supervisor has all the robot functionality plus extra supervisor ones. So when your robot is a supervisor, don't use robot. Only use supervisor. You can use it in the very same wa as the robot


You can keep the same variable name as before, so you only need to change line 32 and not the rest of your code


`@vinwan` have you checked the documentation mentioned in the error message? And are the newest graphics drivers installed for your gpu?


`@Adyasha` I'll answer here, as it seems more like a technical question. Of course you can set the speed higher, but for very hogg speeds you mat have to lower the basic timestep. If you are at 32ms, that's about 30 steps per second. Can you provide more info? What error are you getting? Are you using velocity or position control? What are the parameters of your motor?

##### vinwan 02/13/2021 17:22:13
`@Luftwaffel` this was attempted with safe mode in both 2019 version and 2021Ra both had the same outcome . This error message is from the 2019 version . This computer is core i5 2nd generation without a dedicated gpu. I understand that this computer doesnt have the required openGL drivers  but webots is running on intel 3rd generation computers perfectly soo can there be a way to work this out?


`@Luftwaffel` I think an older version of webots such as webots 8,7 will work but unfortunately those require licensing . This not for me this for a few high school students im teaching webots to

##### Luftwaffel [Moderator] 02/13/2021 17:28:29
Problem is, that 2nd gen Intel integrated gpus only support opengl 3.1,nit 3.2


Perhaps look for a dirt cheap low end dedicated gpu?


<@&568329906048598039> this is not my expertise, but is it possible to run webots somehow with opengl3. 1?  I think docker uses CPU graphics

##### Olivier Michel [Cyberbotics] 02/13/2021 17:31:57
No, it's a no go unfortunately.


Webots in CI uses software rendering (super slow). It might be possible to replace your Windows OpenGL libraries with some software only rendering, i.e., Mesa, but I have no experience with this and the performance will be very low.

##### vinwan 02/13/2021 17:33:14
I thought of this but these are laptops and im not sure if this can be done

##### Olivier Michel [Cyberbotics] 02/13/2021 17:33:37
Unfortunately, with a laptop you're stuck and cannot upgrade the GPU...

##### Luftwaffel [Moderator] 02/13/2021 17:35:15
Is it just one machine or multiple?


10 year old is ancient when it comes to computers

##### vinwan 02/13/2021 17:35:44
4 machines so far

##### Olivier Michel [Cyberbotics] 02/13/2021 17:36:00
Can you tell me what is the model of your Intel GPU?

##### Luftwaffel [Moderator] 02/13/2021 17:36:12
Sandybridge


Zou need Intel HD 4000 or newer


So you need Intel 3rd gen or newer

##### vinwan 02/13/2021 17:37:44
I know but this is the best they've got

##### Luftwaffel [Moderator] 02/13/2021 17:38:14
And they are all laptops?


Are you a high school teacher?

##### Olivier Michel [Cyberbotics] 02/13/2021 17:39:08
You might be able to work out something with this: [https://www.reddit.com/r/archlinux/comments/8stpmt/how\_can\_i\_get\_opengl\_33\_with\_glsl\_33\_support/](https://www.reddit.com/r/archlinux/comments/8stpmt/how_can_i_get_opengl_33_with_glsl_33_support/)


(you will have to install Linux)

##### Luftwaffel [Moderator] 02/13/2021 17:39:54
Perhaps you can ask around for people who could donate an old laptop

##### vinwan 02/13/2021 17:39:55
I think most of them are but if some have desktops ill tell them to try out a old gpu


No im a college student from Sri Lanka teaching a few students at the high school i attended so that they may learn some robotics during this pandemic


Ill try thank you


Ill check it out thank you

##### Luftwaffel [Moderator] 02/13/2021 17:43:01
Awesome! Thx for doing that. Perhaps you can ask the school faculty or even just the other students. I bet there are people with older machines. We are talking 2012 or newer

##### vinwan 02/13/2021 17:45:33
The school can't help us because schools are closed so we are on our own. Thank you for this insight into webots ill keep these requirements in mind  for next time

##### Olivier Michel [Cyberbotics] 02/13/2021 17:51:23
The only two solutions I see are:

- Try this: [https://dhern023.wordpress.com/2020/05/15/update-intel-sandy-bridge-opengl-compatibility-to-3-3/](https://dhern023.wordpress.com/2020/05/15/update-intel-sandy-bridge-opengl-compatibility-to-3-3/)

- Install Linux on the laptop and use Webots from Linux.


But in any case, you will get a slow performance (you should probably disable all advanced OpenGL features from the Webots preferences).

##### vinwan 02/13/2021 18:18:09
Thank you will look into this

##### Vangiel 02/14/2021 10:11:39
Hello everyone, I am quite new in Webots and I am having a problem I cannot solve. I load a world with just the basic nodes and a supervisor robot. From the controller of that robot I load elements to the scenario using the python api (pedestrians, floor, robot, objects...). My problem is that when I reset the simulation all the nodes I added disappear but some of them remain (like the floor and one of the pedestrians). How can I do a clean reset? I have tried to use supervisor.worldReload but the world keep reloading all the time. I hope you can help me, thanks.

##### Bitbots\_Jasper [Moderator] 02/14/2021 10:13:10
Make sure that you save the world after you have added all the nodes


There also is a difference between resetting the world and reloading it.

##### Vangiel 02/14/2021 10:17:10
The problem with saving the world after I add the nodes is that it will save all of it in the wbt file right? and I want to load random scenarios each time

##### Luftwaffel [Moderator] 02/14/2021 16:14:29
`@Vangiel` what exactly do you want to happen? Remove everything? World reload seems like the easiest clean option. I'm not sure what exactly doesn't work for you there. Otherwise, you could simply remove all the nodes using the supervisor api


Then do a simulation reset


Feel free to pm me, I can take a look. Kinda curious about your project. Worked on domain randomization before, but not randomized environments

##### Qwerty23 02/14/2021 20:07:37
`@Luftwaffel` Was wondering on how to move the Robotis OP2's arms in terms of Pitch, Yaw, and Roll, to let the robots arm close in, python


controlling it individually

##### Darko Lukić [Cyberbotics] 02/15/2021 08:04:47
The reset feature is documented here:

[https://www.cyberbotics.com/doc/guide/the-user-interface#file-menu](https://www.cyberbotics.com/doc/guide/the-user-interface#file-menu)

(scroll to `Note: In order to reset...`)



However, according to your description it seems that the reset doesn't work properly. Could you please open an issue with a minimal example:

[https://github.com/cyberbotics/webots/issues/new?assignees=&labels=&template=bug\_report.md](https://github.com/cyberbotics/webots/issues/new?assignees=&labels=&template=bug_report.md)

##### Siliconlad 02/15/2021 08:05:43
Good morning! I'm currently trying to create an external C++  ROS noetic controllers for our robot. So in my `.cpp` file I have include statements of the form `#include "webots/Robot.hpp"` alongside ROS include statements like `#include "ros/ros.h"`. Is there a way to link the webots cpp api using CMake so that I can run `catkin build` in my workspace and then just run the controllers (using `rosrun` or via a launch file) and have them connect to the simulator?

##### Darko Lukić [Cyberbotics] 02/15/2021 10:03:56
Here is a CMake example for ROS 2, but for ROS 1 should be very similar:

[https://github.com/cyberbotics/webots\_ros2/blob/5af9fe3b25e4f5be9b584b4e64f62078b063eaad/webots\_ros2\_cpp/CMakeLists.txt#L17-L26](https://github.com/cyberbotics/webots_ros2/blob/5af9fe3b25e4f5be9b584b4e64f62078b063eaad/webots_ros2_cpp/CMakeLists.txt#L17-L26)



Note: Make sure the `WEBOTS_HOME` environment variable is configured.

##### Tahir [Moderator] 02/15/2021 12:35:26
I am trying to teleop a diff drive robot with in Webots but the nodes does not communicate. The controller runs fine but the robot does not move when teleoperated.

I am not able to get where is the problem. Anyone have any idea?


Here is my ROS specific controller which is running in Webots
> **Attachment**: [teleop\_robot.py](https://cdn.discordapp.com/attachments/565154703139405824/810852035628367892/teleop_robot.py)


Update:

rosnode info /teleop\_node

--------------------------------------------------------------------------------

Node [/teleop\_node]

Publications:

 * /rosout [rosgraph\_msgs/Log]



Subscriptions:

 * /cmd\_vel [unknown type]



Services:

 * /teleop\_node/get\_loggers

 * /teleop\_node/set\_logger\_level





contacting node http://rosPC:33375/ ...

ERROR: Communication with node[http://rosPC:33375/] failed!


The above rosnode info gives communication error whereas everything is running on same PC

##### Darko Lukić [Cyberbotics] 02/15/2021 12:58:19
```
 * /cmd_vel [unknown type]
```

This looks bad. It doesn't look directly related to Webots.



Which ROS distribution do you use?

##### Tahir [Moderator] 02/15/2021 13:00:11
No No this is when I am not publishing the cmd\_vel topic


after publishing this topic is recognised


I am having ROS melodic so that's Python2

##### Darko Lukić [Cyberbotics] 02/15/2021 13:02:26
[https://github.com/cyberbotics/webots\_ros/blob/master/scripts/ros\_python.py](https://github.com/cyberbotics/webots_ros/blob/master/scripts/ros_python.py)

Does this example work for you?

##### Tahir [Moderator] 02/15/2021 13:05:38
Let me just try


Nope its not working from me


Can you tell me the above mentioned controller is for which robot file I will try to debug


where is the problem


I have found the word


world*

##### Darko Lukić [Cyberbotics] 02/15/2021 13:26:29
[https://github.com/cyberbotics/webots\_ros/blob/master/launch/webots\_ros\_python.launch](https://github.com/cyberbotics/webots_ros/blob/master/launch/webots_ros_python.launch)

You should be able to launch this file

##### Tahir [Moderator] 02/15/2021 13:27:30
Yes this example is working

##### Darko Lukić [Cyberbotics] 02/15/2021 13:33:19
Your class `TeleopRobot` looks good, but maybe I am missing something. I would suggest to you to try rebuilding your controller from the example I sent to you

##### Tahir [Moderator] 02/15/2021 13:59:27
I've got things working but don't know whats happening and what was wrong.

The script which I've uploaded `teleop_robot.py` worked when I just added(`rospy.loginfo("")` before `self.sendWheelVelocitties(self.left_wheel_velocity, self.right_wheel_velocity)`)

In this part the real working is happening where I am sending the commands to the robot to move. Before adding the above `rospy.loginfo` there was no movement but after adding its working fine both in form of a ros package as `@Darko Lukić`  suggested with above mentioned example package and the standalone controller in `Robot controller` field.


I know `rospy.loginfo` is triggering something but what that I am not able to understand

##### Darko Lukić [Cyberbotics] 02/15/2021 14:37:00
Strange... Thank you for sharing details with us!

##### alejanpa17 02/15/2021 15:14:20
Hey guys, quick question, is there any way I can add a parameter of downforce to a car?

##### Darko Lukić [Cyberbotics] 02/15/2021 16:32:17
No, but you can simulate it. You can use `wb_supervisor_node_get_velocity` ([https://www.cyberbotics.com/doc/reference/supervisor#wb\_supervisor\_node\_get\_velocity](https://www.cyberbotics.com/doc/reference/supervisor#wb_supervisor_node_get_velocity)) to get car's velocity and `wb_supervisor_node_add_force` ([https://www.cyberbotics.com/doc/reference/supervisor#wb\_supervisor\_node\_add\_force](https://www.cyberbotics.com/doc/reference/supervisor#wb_supervisor_node_add_force)) to apply the downforce as a function of the velocity.

##### alejanpa17 02/15/2021 17:02:24
Thanks :))

##### Callum98 02/15/2021 17:12:34
Hey guys, can anyone help me program a camera using Java? I'm unsure what commands I need for the image to be shown: its currently just a black screen

##### Luftwaffel [Moderator] 02/15/2021 17:13:39
[https://www.cyberbotics.com/doc/reference/camera](https://www.cyberbotics.com/doc/reference/camera)

##### Bitbots\_Jasper [Moderator] 02/15/2021 17:14:03
make sure to enable your camera using  camera.enable(sampling\_peroid)

##### Luftwaffel [Moderator] 02/15/2021 17:14:06
you have to enable most sensors before you can use them


in the api documentation (link I posted before) you can see all functions and commands, in all the different programming languages

##### Callum98 02/15/2021 17:29:23
I think I've enabled it, does the line camera.enable(timeStep); work? Hasnt done anything


Ive had a look at the api documentation but Im new to programming so finding it a bit confusing

##### Siliconlad 02/15/2021 18:04:08
This worked a treat! Thank you very much 🙂

##### Bitbots\_Jasper [Moderator] 02/15/2021 18:09:31
i dont really know much about java programming but there is a tutorial for using java an webots here: [https://cyberbotics.com/doc/guide/using-java](https://cyberbotics.com/doc/guide/using-java)


you can also go through the webots tutorials here: [https://cyberbotics.com/doc/guide/tutorials](https://cyberbotics.com/doc/guide/tutorials)

##### Callum98 02/15/2021 18:18:25
thank you, Ill have a look trhough

##### R\_ 02/15/2021 18:26:49
I have an Nvidia GPU, but I'm getting this error. Any suggestions to mitigate this error?😊

I'm on Ubuntu 20.04 and installed it with `sudo snap install webots`

My Nvidia Config is setup to 'NVIDIA On-Demand'
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/810940196996513853/unknown.png)
%end

##### Luftwaffel [Moderator] 02/15/2021 18:39:37
on linux, integrated gpu + dedicated can be tricky sometimes


try disabling your integrated GPU in BIOS


or explicitly launching webots with Nvidia gpu

##### R\_ 02/15/2021 18:42:09
how do I do this?

##### Luftwaffel [Moderator] 02/15/2021 18:42:40
what operating system?

##### R\_ 02/15/2021 18:43:24
Ubuntu 20.04

##### Luftwaffel [Moderator] 02/15/2021 18:43:53
disable your iGPU or google it

##### R\_ 02/15/2021 18:49:18
But it is showing this
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/810945854043193394/unknown.png)
%end

##### Luftwaffel [Moderator] 02/15/2021 18:51:07
Did you install the latest nvidia drivers?

##### R\_ 02/15/2021 18:58:40
yes

##### Luftwaffel [Moderator] 02/15/2021 19:40:38
I just disabled the iGPU in bios, and everything works fine

##### modymu 02/16/2021 06:38:38
Use Editor instead!!

##### Steven37 02/16/2021 10:02:51
I'm trying to keep increasing the size of a box, as well as changing its color. In the image attached, it is my code to do it. I also have set the supervisor field to True. However, when I ran the simulation, the box didn't have any changes. Can someone help point out where I went wrong, please? Thank you!
%figure
![3Y_Iproject_supervisor_testCode.JPG](https://cdn.discordapp.com/attachments/565154703139405824/811175758138572860/3Y_Iproject_supervisor_testCode.JPG)
%end

##### Olivier Michel [Cyberbotics] 02/16/2021 10:21:12
1. You check that every `WbNodeRef` and `WbFieldRef` you retrieve is not NULL.

2. It's a bad idea to use `Box` for a DEF name as it is a reserved VRML keyword for the `Box` node.

3. Instead of changing  the `scale` field of a `Solid` node, I would suggest you to change the `size` field of the `Box` node.

4. The `baseColor` is not a field of a `Solid` node: you should get it from a `PRBAppearance` node instead.

##### Steven37 02/16/2021 10:47:54
`@Olivier Michel` I have followed your suggestions but it still doesn't work yet. Is there anything more I can do about this? Thank you!

##### nelsondmmg 02/16/2021 11:21:00
Hi, is there a way to continue a simulation given that one robot is already finished while maintaining the synchronization on?

##### oroulet [Premier Service] 02/16/2021 12:34:08
How can I run webots in the background to be used for functional testing? I could not find any command line arguments. Maybe some environment variable?

##### Olivier Michel [Cyberbotics] 02/16/2021 12:34:42
You should use the `--batch` command line option.

##### oroulet [Premier Service] 02/16/2021 12:35:16
but it still starts a window. Can we run it without window at all? or do I need to use framebuffer and co

##### Olivier Michel [Cyberbotics] 02/16/2021 12:36:53
You may add the `--minimize` command line option to have the window minimized at startup. It is not possible to avoid the creation of the window because Webots need to be connected to the OpenGL context via a window.


On Linux you can use a virtual framebuffer to avoid completely showing-up any window.

##### oroulet [Premier Service] 02/16/2021 12:37:54
OK. My goal was to use webots on gitlab/github CI. So then I probably need to set up some fake display


ja exactly. I will try. thanks

##### Olivier Michel [Cyberbotics] 02/16/2021 12:38:10
Yes.


We do use Webots in github CI and it works nicely.


See [https://github.com/cyberbotics/webots/tree/master/.github/workflows](https://github.com/cyberbotics/webots/tree/master/.github/workflows)

##### oroulet [Premier Service] 02/16/2021 12:39:35
Thanks. I just need to find out where in this files the framebuffer is set 😉

##### Olivier Michel [Cyberbotics] 02/16/2021 12:40:06
[https://github.com/cyberbotics/webots/blob/master/.github/workflows/test\_suite\_linux.yml#L102](https://github.com/cyberbotics/webots/blob/master/.github/workflows/test_suite_linux.yml#L102)


Or [https://github.com/cyberbotics/webots/blob/master/.github/workflows/test\_suite\_linux.yml#L140-L141](https://github.com/cyberbotics/webots/blob/master/.github/workflows/test_suite_linux.yml#L140-L141)

##### oroulet [Premier Service] 02/16/2021 12:41:12
thanks . found the lines now. I think I have done something similar earlier. I will try

##### Olivier Michel [Cyberbotics] 02/16/2021 12:43:19
You can either make that the robot will not actually quit, but execute `wb_robot_step()` in an endless loop, or you could simply replace the robot controller with an empty or void controller from a supervisor program.

##### oroulet [Premier Service] 02/16/2021 12:45:47
ahah. Last comment, made me think I need a way to stop webots if I make it run in the background. We use an external controller and that one will finish, but we need to stop webots too. Can we make webots quit from the external controller using some supervisor command?

you know we are the strange guys using webots without physics 😉

##### Olivier Michel [Cyberbotics] 02/16/2021 12:47:05
I remember 😄 . You need to use this function: [https://www.cyberbotics.com/doc/reference/supervisor#wb\_supervisor\_simulation\_quit](https://www.cyberbotics.com/doc/reference/supervisor#wb_supervisor_simulation_quit)

##### oroulet [Premier Service] 02/16/2021 12:47:45
great . thanks

##### nelsondmmg 02/16/2021 14:17:19
Thanks. Is there a way to remove the fullscreen warning when the movie recording is started by code? This step block the start of execution each time.

##### Olivier Michel [Cyberbotics] 02/16/2021 15:05:36
Did you try the `--batch` mode?

##### Callum98 02/16/2021 15:40:12
Hi guys, do any of the prebuilt robots have working cameras programmed in java that you know of?

##### Olivier Michel [Cyberbotics] 02/16/2021 15:41:29
Yes, many of them have a camera and all of them can be programmed in Java.

##### Callum98 02/16/2021 15:42:44
But are any of them written in java? Im trying to create a colour recognition robot as part of a coursework but I dont know how to get the camera working so wanna use one as an example

##### Olivier Michel [Cyberbotics] 02/16/2021 15:44:12
The Java example in projects/languages/java features robots with camera and Java controllers.

##### Callum98 02/16/2021 15:45:59
Sorry where is this?


Im new to this and programming haha

##### Olivier Michel [Cyberbotics] 02/16/2021 15:47:24
File menu / Open Sample World

##### Callum98 02/16/2021 15:48:02
Ah got it, thank you!

##### nelsondmmg 02/16/2021 16:25:04
Ahh thanks I did not saw this option before

##### bellino 02/16/2021 17:29:17
Hello all, this may be a trivial question but I have been stuck since yesterday. I want to use ros2 due to the nav2 package but with webots as my simulator. I am struggling to figure out how to exactly use this package because I suppose I need to use different topics like cmd\_vel to publish speed etc. to. Does this package only tell me by how much to rotate my robot/ where to go or can it handle the actual joint movement?

##### Darko Lukić [Cyberbotics] 02/16/2021 19:03:02
Have you checked `webots_ros2_turtlebot`:

[https://github.com/cyberbotics/webots\_ros2/tree/master/webots\_ros2\_turtlebot](https://github.com/cyberbotics/webots_ros2/tree/master/webots_ros2_turtlebot)



It implements support for navigation:

[https://github.com/cyberbotics/webots\_ros2/wiki/Navigate-TurtleBot3](https://github.com/cyberbotics/webots_ros2/wiki/Navigate-TurtleBot3)

##### bellino 02/16/2021 21:00:43
thank you! I also have another question. My robot has two wheels with a motor and one wheel for stabilization, I am turning by rotating the wheels in the opposite direction and using position sensors to track by how far each wheel has rotated, but the rotation is not exact. For instance, when I want to rotate by pi/2, I rotate by 1.58 instead. Is there a better way to deal with this?

##### Darko Lukić [Cyberbotics] 02/16/2021 21:33:37
You probably need to calibrate the axle length and wheel radius. Try with different values until you get a more accurate rotation.



However, if you robot is aware it got rotated by 1.58 then you have problem with the control, you need calibrate PID coefficients.



In general, error of 0.01 radians is not bad.

##### bellino 02/16/2021 21:41:58
right, I suppose it's very difficult to get 100% accurate rotations

##### Daniel Honerkamp 02/16/2021 21:50:44
Hi, I'm following the examples to use moveit in [https://github.com/cyberbotics/webots/tree/released/projects/robots/universal\_robots/resources/ros\_package/ur\_e\_webots](https://github.com/cyberbotics/webots/tree/released/projects/robots/universal_robots/resources/ros_package/ur_e_webots).

This includes the following:

```
from controller import Robot
robot = Robot()
```

using python 2.7. But when instantiating the Robot() the script simply terminates without any error messages. Any help appreciated. My pythonpath and ld\_library\_path should be set (the import succeeds) and include `/usr/local/webots/lib/controller/python27` and `${WEBOTS_HOME}/lib/controller` respectively

`

##### bellino 02/16/2021 23:36:21
Okay I followed the driver tutorial here [https://github.com/cyberbotics/webots\_ros2/wiki/Tutorial-Write-ROS2-Driver](https://github.com/cyberbotics/webots_ros2/wiki/Tutorial-Write-ROS2-Driver) and I think it works so far but I am not sure where I would put the code that actually moves the joints. I can't seem to find where that's in the turtlebot repo. Where would the controller be specified and how does it interact with the driver. From my understanding, the driver is the interface between ros2 and webots publishing webots data for ros2, correct?


Okay a little edit, I am now using WebotsDifferentialDriveNode and it says an external controller has been started. How would I go about actually moving the robot now? Do I have to publish something to some topic?

##### Darko Lukić [Cyberbotics] 02/17/2021 07:42:39
Hello Daniel, that sounds as a good approach. Can you run a Python2 controller from Webots UI? Make sure `Tools > Preferences > Python command` is set to `python2`


Yes, see this:

[https://github.com/cyberbotics/webots\_ros2/wiki/Tutorial-E-puck-for-ROS2-Beginners#velocity-control](https://github.com/cyberbotics/webots_ros2/wiki/Tutorial-E-puck-for-ROS2-Beginners#velocity-control)



Also, you can use `teleop_twist_keyboard`

##### Daniel Honerkamp 02/17/2021 08:04:13
This does seem to work in the webots UI itself


Looking at the environment variables set in the UI, there are numerous webots variables. Defining WEBOTS\_TMP\_PATH and WEBOTS\_SERVER I now at least get an error message from running `Robot()`. But copying the values from the UI won't work as they refer to tmp paths. Is there a guide somewhere which of these and how I have to set them?

##### Darko Lukić [Cyberbotics] 02/17/2021 09:16:18
What you did is enough to run an external controller:

```
export PYTHONPATH=${WEBOTS_HOME}/lib/controller/python27
export LD_LIBRARY_PATH=${WEBOTS_HOME}/lib/controller:${LD_LIBRARY_PATH}
```



Furthermore, those environment variables are automatically configured:

[https://github.com/cyberbotics/webots/blob/4027aa8c7ef7c0a7f4dd0692fdf89437cd99546f/projects/robots/universal\_robots/resources/ros\_package/ur\_e\_webots/launch/ur\_controller.launch#L4-L5](https://github.com/cyberbotics/webots/blob/4027aa8c7ef7c0a7f4dd0692fdf89437cd99546f/projects/robots/universal_robots/resources/ros_package/ur_e_webots/launch/ur_controller.launch#L4-L5)



So you don't need configure them manually.



I am trying to reproduce your problem, but it works fine for me with Noetic (I don't have Melodic)

##### Daniel Honerkamp 02/17/2021 09:26:23
Hmm. Outside of the webots UI it's as simple as running robot=Robot()  for me and the python shell immediately terminates. Happens in both python2.7 and python3. I'm using ros melodic. Maybe I'm missing a step that would configure these things when not using the webots UI? I actually don't think it is related to ROS

##### Darko Lukić [Cyberbotics] 02/17/2021 09:37:47
If you run only `robot = Robot()` the controller exists as there is no more things to do. You have have to add something like: `while robot.step(32) != -1: pass` to make it run.



If your controller crashes the problem is most likely in `LD_LIBRARY_PATH`. Try to print it in the controller running from UI and the external controller to see whether it clashes with some other shared library.

##### Daniel Honerkamp 02/17/2021 10:33:31
I have now set it to exactly `PYTHONPATH=/usr/local/webots/lib/controller/python27` and `LD_LIBRARY_PATH=/usr/local/webots/lib/controller`, so nothing else in those paths and still the same thing happens


In the UI I have this path: `LD_LIBRARY_PATH: /home/honerkam/Downloads/my_project/controllers/my_controller:/tmp/webots-26335-Ic2kFC//lib;/opt/ros/melodic/lib;/opt/ros/melodic/lib/x86_64-linux-gnu;/usr/local/cuda-10.2/lib64;/home/honerkam/.mujoco/mujoco200/bin;/usr/local/webots/lib/controller`. So the main difference in there is this tmp path `/tmp/webots-26335-Ic2kFC/`, but I assume I don't have to set this manually


And again, if I do define these two WEBOTS\_TMP\_PATH and WEBOTS\_SERVER I at least get an error about the server path being wrong. But I don't know if that means that I got further or less far in instantiating the Robot()

##### Darko Lukić [Cyberbotics] 02/17/2021 10:40:11
Are you sure the controller is crashing? Maybe it simply finished.

##### Daniel Honerkamp 02/17/2021 10:41:05
I'm just running a python shell at this point:

$python

>>from controller import Robot()

>>robot=Robot()

and then the python shell crashed

##### Darko Lukić [Cyberbotics] 02/17/2021 10:41:26
In your LD\_LIBRARY\_PATH you are using `;` and `:` as separator. I am not sure you can use `;`, it is usually `:`


But since you are overriding `LD_LIBRARY_PATH` it shouldn't make a difference

##### Daniel Honerkamp 02/17/2021 10:42:18
This is the path that it prints out in the webots UI where it works, not the one on my shell

##### Darko Lukić [Cyberbotics] 02/17/2021 11:00:57
It is really strange. Just to confirm a few things. You use Ubuntu 18.04 and you installed Webots R2021a from a Debian package? The `python` command comes from Ubuntu, not from Conda or similar?



1. Try creating a simple external C controller. If it crashes with no additional info then go to 2.

2. Compile Webots from source in debug mode: [https://github.com/cyberbotics/webots/wiki/Linux-installation](https://github.com/cyberbotics/webots/wiki/Linux-installation)

##### Daniel Honerkamp 02/17/2021 11:08:29
Ubuntu18.01, webots R202a installed through apt-get. Python is the system python27 interpreter


I was kind of hoping not to have to do that. I will have to see if I find time for that later this week


And there are really not other steps I'm missing than this to be configured correctly?

1. start a webots world with the robot

2. set paths

3. start a python console

##### Darko Lukić [Cyberbotics] 02/17/2021 11:15:00
The robot in the world has to have the  `controller` field equal to `<extern>`


Otherwise it looks good


If I get some idea why it doesn't work I will let you know

##### Steven37 02/17/2021 11:17:27
I am trying to get familiar with the camera in webots but I am wondering is there any function where I can get the width, height and color of only the recognized object from the camera instead of the image as a whole?

##### Olivier Michel [Cyberbotics] 02/17/2021 11:30:46
You should probably use the recognition module of the camera device, see [https://cyberbotics.com/doc/reference/camera#wb\_camera\_recognition\_enable](https://cyberbotics.com/doc/reference/camera#wb_camera_recognition_enable)

##### Steven37 02/17/2021 11:50:02
`@Olivier Michel` thank you!


I want to ask again to make sure my code is correct for me to know the colors of the object I want in the camera?
%figure
![3Y_Iproject_camera_testingCode.JPG](https://cdn.discordapp.com/attachments/565154703139405824/811570798238236722/3Y_Iproject_camera_testingCode.JPG)
%end


Because I'm not sure if the wb\_camera\_get\_width and wb\_camera\_get\_height functions will take the width and height of the whole image or is it just the recognised object?

##### Stefania Pedrazzi [Cyberbotics] 02/17/2021 12:15:34
The code is wrong because the `wb_camera_recognition_get_object` function doesn't return an image but a list of objects (`WbCameraRecognitionObjects`):

[https://www.cyberbotics.com/doc/reference/camera#camera-recognition-object](https://www.cyberbotics.com/doc/reference/camera#camera-recognition-object)


You can find an example in the `projects/samples/devices/worlds/camera_recognition.wbt` simulation.

Here is the source of the sample robot controller:

[https://github.com/cyberbotics/webots/blob/master/projects/samples/devices/controllers/camera\_recognition/camera\_recognition.c](https://github.com/cyberbotics/webots/blob/master/projects/samples/devices/controllers/camera_recognition/camera_recognition.c)

##### Saud 02/17/2021 13:41:27
where can i find a list of devices that i can use on the DJI MAVIC?

##### Stefania Pedrazzi [Cyberbotics] 02/17/2021 13:44:28
You can find the complete list of devices in the documentation page of the robot: on the menu on the right of the 3D viewer of the robot, all the devices names are listed grouped by type

[https://www.cyberbotics.com/doc/guide/mavic-2-pro](https://www.cyberbotics.com/doc/guide/mavic-2-pro)

##### Saud 02/17/2021 13:57:54
oh great thank you

##### Daniel Honerkamp 02/17/2021 14:00:43
Seems this is where I was going wrong. It wasn't clear to methat instantiating a Robot() object equates to having an external controller and instead used the `ros` controller in webots. With <external> I get it to work. (Might be helpful to add some check to the Robot() initialiser in case that's possible). Thanks for the help

##### alejanpa17 02/17/2021 20:00:44
Hi again guys! Is there any way I can make the tires of the car robot slippery?? Or is that too much complicated?

##### Chernayaten 02/17/2021 23:38:38
`@alejanpa17` I believe you have to establish ContactProperties between your tires and the floor and set the coulombFriction = 0 [https://www.cyberbotics.com/doc/reference/contactproperties](https://www.cyberbotics.com/doc/reference/contactproperties)

##### alejanpa17 02/18/2021 00:56:51
Thanks ^^

##### Bitbots\_Jasper [Moderator] 02/18/2021 11:51:13
I am trying to start multiple extern controllers as described here: [https://cyberbotics.com/doc/guide/running-extern-robot-controllers?tab-language=python#single-simulation-and-multiple-extern-robot-controllers](https://cyberbotics.com/doc/guide/running-extern-robot-controllers?tab-language=python#single-simulation-and-multiple-extern-robot-controllers)



I have multiple robots with the same proto but a different DEF. Is it possible to start an external robot controller and connect it to a Robot Node with a certain DEF? Otherwise, should I modify my proto files such that they have different names?

##### Darko Lukić [Cyberbotics] 02/18/2021 11:53:53
Hello `@Bitbots_Jasper`, usually the `name` field should be exported. For example:

[https://github.com/cyberbotics/webots/blob/794d40381d6179faaadf97cb8c890116cea5ce90/projects/robots/gctronic/e-puck/protos/E-puck.proto#L13](https://github.com/cyberbotics/webots/blob/794d40381d6179faaadf97cb8c890116cea5ce90/projects/robots/gctronic/e-puck/protos/E-puck.proto#L13)

[https://github.com/cyberbotics/webots/blob/794d40381d6179faaadf97cb8c890116cea5ce90/projects/robots/gctronic/e-puck/protos/E-puck.proto#L1137](https://github.com/cyberbotics/webots/blob/794d40381d6179faaadf97cb8c890116cea5ce90/projects/robots/gctronic/e-puck/protos/E-puck.proto#L1137)

##### Bitbots\_Jasper [Moderator] 02/18/2021 11:54:23
ohh, thank you so much I oversaw that

##### danielvicente 02/18/2021 16:03:14
Hi everyone,

is there a way that, if as a supervisor I have the node of a camera on a different robot, to get the image data of that camera?

##### Darko Lukić [Cyberbotics] 02/18/2021 18:08:54
It is not possible. You have to implement some kind of communication between those two controllers to transfer the images.

##### yanan 02/18/2021 18:10:18
Hi everyone, it seems like it is impossible to run both a robot like dji and a vehicle at the same time within an environment?  is that right?

##### Darko Lukić [Cyberbotics] 02/18/2021 18:10:50
It is possible, what error do you get?

##### yanan 02/18/2021 18:12:32
thanks for your reply. actually, I am trying to use both dji and a tesla within an environment.  it seems like I have to use ' wb\_robot\_init();

     wbu\_driver\_init();'   and it reports  'Error: Only nodes based on the 'Car' node can used the car library.'

##### Darko Lukić [Cyberbotics] 02/18/2021 18:17:05
There should be two controllers. One controller with `wb_robot_init` for the drone, and another one with `wbu_driver_init` for the car.

##### yanan 02/18/2021 18:24:25
thanks. something like this ?
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/812026757955059743/unknown.png)
%end

##### DDaniel [Cyberbotics] 02/18/2021 18:24:56
two separate files


one for the "controller" field of the dji, and another for the controller field of the tesla

##### yanan 02/18/2021 18:27:48
danke schoen. I will give it a try

##### danielvicente 02/18/2021 18:51:07
okay, thanks

##### mayank.kishore 02/18/2021 20:58:46
Would anyone be willing to chat with me on how to create a custom launch file? Am essentially trying to us `@Darko Lukić`'s navigation package and use it on a different environment with multiple robots:



[https://github.com/cyberbotics/webots\_ros2/wiki/Navigate-TurtleBot3](https://github.com/cyberbotics/webots_ros2/wiki/Navigate-TurtleBot3)



The environment:

[https://github.com/virtualclone/formation\_uavs](https://github.com/virtualclone/formation_uavs)

##### h.sciascia 02/19/2021 08:09:32
Hello everyone !



I would like to import a 3D model and define it as collision zones for my robot. However, I would like to define this model as one shape/solid/form.



Currently, when I import a 3D model, I get a multitude of Nodes (Transform, Solid, Shape, Group, etc) distinct from each other. So, I don't want to retrieve the ID of the respective boundingObjects of each of these shapes to compare them with my robot's boundingObject, that would be way too long...



So is there a way to merge each of these shapes of the 3D model (mesh?) In order to get only one object, with a single ID?



Thank you in advance !

##### Olivier Michel [Cyberbotics] 02/19/2021 08:12:10
Yes can either merge these object using a 3D modeling software, like Blender, or put them all together inside a Group node.

##### h.sciascia 02/19/2021 08:14:04
Ok I will try that, because I want only one boundingObject


Hello again !

Is that possible to launch Webots in command line (no graphical interface) ?

##### Olivier Michel [Cyberbotics] 02/19/2021 13:22:06
`webots --batch --minimize` should do it.

##### h.sciascia 02/19/2021 13:42:32
Thanks i will try that !

##### Callum98 02/19/2021 13:59:31
I anyone able to help me with programming in java?

##### bizzard 02/19/2021 15:30:50
I want to implement a multi robot controller, for example to realize some algorithm like: conflict based search(CBS), how can I do this?Are there any example controller?

##### bellino 02/19/2021 16:17:01
Hello, what unit is used for shape sizes in webots? I thought m at first but it doesn't seem quite right

##### mayank.kishore 02/19/2021 16:20:26
Do I need to have a share directory to create a launch file?

##### Olivier Michel [Cyberbotics] 02/19/2021 16:20:28
Yes, it's meters.

##### bellino 02/19/2021 18:19:32
Hello I have two questions, first of all, is it somehow possible to get a body's rotation in the world the way it's shown in the scene tree? (I.e. without using sensors) Also, I am trying to implement rotation for my robot using wheel encoders but I found that it is not very accurate (i.e. when turning by pi the closest values I have gotten are 1.56999 and 1.581). I tried playing around with the axle length and wheel radius but this is as close as I have gotten. The robot has two wheels and rotates by spinning the wheels in opposite directions.

##### Bitbots\_Jasper [Moderator] 02/19/2021 19:32:54
There is some documentation on how to do that here: [https://cyberbotics.com/doc/guide/running-extern-robot-controllers#single-simulation-and-multiple-extern-robot-controllers](https://cyberbotics.com/doc/guide/running-extern-robot-controllers#single-simulation-and-multiple-extern-robot-controllers)


it is not quite clear to me what your question is. What launch files are you talking about? ROS launch files?


to get the position and orientation of nodes in world coordinates you need to use a supervisor controller (see here: [https://cyberbotics.com/doc/reference/supervisor](https://cyberbotics.com/doc/reference/supervisor))  you can make the controller that is turning your robot into a supervisor controller by replacing the creation of your Robot by a creation of a Supervisor object (Supervisor inherits from robot so all functions should still work)

then you can call `getSelf()` (or the equivalent in the programming language of your choice) to get the robot node. On the robot node you can get the translation and rotation field using `getField("translation")` or `getField("rotation")`.  on the translation field you want to call `getSFVec3f()` to get an array of coordinates, on the rotation field you want to call `getSFRotation()` to get an array representing a rotation in the axis angle notation

##### bellino 02/19/2021 20:28:24
what about the rotation, it is even possible to have an 100% accurate rotation?

##### JMarple 02/19/2021 20:33:03
Hello all,



I have a PROTO file with a `robot` that contains a set of 8 identical `robot` from another PROTO file.  I have a controller on the highest level robot and want to access the motors on each of the 8 identical robots.  Normally this would be done using `getDevice`, however at the highest level robot, `robot.getNumberOfDevices()` returns 0.



Is there a proper way to go about this?  I also tried to adding a device parameter to my PROTO and explicitly defining a device list at the highest level, but I still can't seem to get access to this.



For reference, this is what the topology roughly looks like:

```
- Robot
  - controller
  - children
    - Robot slot0
       - HingeJoint
    - Robot slot1
       - HingeJoint
    - Robot slot2
       - HingeJoint
    - etc.etc
```



Thanks

##### Chernayaten 02/19/2021 20:55:43
`@bellino`  I recently programmed a two-wheeled robot that rotates on its axis. There's a formula for the calculation you want which takes the base of the rotation as the distance between the center of the wheels. What I found out, and a member of this server helped me confirm, is that the distance of the outside part of the wheel is more accurate.



However it was still not enough. Say I do a 90 degree turn a bunch of times, I will eventually be (visibly) off course. This problem becomes even worse when trying to do different angles (presumably, a 45 degree turn is half the 90 degree, but this was far from true for me).



I tried playing around by slowly increasing/decreasing the rotation amount and it works to an extend, if you want to do a couple angles only it may be worth trying.



Your best solution would be to use the supervisor to change the angle (or for a more realistic turn, let the robot rotate and when it is "done", set it to the correct angle, essentially fixing the small mistakes that happen)

##### Bitbots\_Jasper [Moderator] 02/19/2021 21:01:04
what you are essentially doing is called dead reckoning ([https://en.wikipedia.org/wiki/Dead\_reckoning](https://en.wikipedia.org/wiki/Dead_reckoning)) and it is inaccurate in simulation as well as in the real world. In simulation it can be caused by a variety of factors such as numerical inaccuracies or explicitly injected noise in the simulated sensor data and many others. In the real world it is cause by wheel slippage, which almost always occurs.

I am not sure how much wheel slippage occurs in simulation as well but I imagine it does. Maybe someone can correct me here or give some further information?


what is normally done in robotics is to have some kind of localization system such as SLAM or AMCL. The localization is normally based on the odometry (that is the pose the robot based on the turning of the wheels) and some sensor such as a Lidar or a camera


the solution proposed by `@Chernayaten` can work, but depending on the context might be considered "cheating"


The robot node is derived from Solid and not from Device, therefore it is not returned by getDevice


where did you get the idea to put multiple robot nodes in a single proto file, i have not seen that before

##### JMarple 02/19/2021 21:13:23
In real life, I have 8 motors on 8 different devices which are controlled by one controller.  My hope is instead of having to copy/paste 8 proto files into one massive file, I can re-use them.  Additionally, it'll more closely mimic how the system is architected IRL.

##### bellino 02/19/2021 21:14:54
I am building the robot for one of my university courses, so I don't think I should be using the supervisor for this. I think I will have to go with SLAM in this case (was trying to avoid it in order to keep it as simple as possible). Thank you very much for the information, I will probably come back once I have read more about the topic!

##### JMarple 02/19/2021 21:21:51
Oop I had a bit of a breakthrough, I changed the topology to:

```
- Robot
  - controller
  - children
    - Solid slot0
       - HingeJoint
    - Solid slot1
       - HingeJoint
    - Solid slot2
       - HingeJoint
    - etc.etc
```

And I'm getting some devices back.  Don't know which is which yet, but I'm sure I can figure that out. Thanks!

##### cooolwhip14 02/19/2021 21:24:59
Hi guys im making a rover and have tried to implement wheel turning through hinge joints perpendicular to my wheel planes. When suspending the rover in air the wheels turn and respond to the position change in the coding but when moving the rover along the floor the wheels dont turn, implying theres a confliction between the wheels and the floor. Is there any settings i can alter to fix this? Thanks


I feel like it has something to do with the wheels sinking into the floor but not sure

##### Bitbots\_Jasper [Moderator] 02/19/2021 21:27:43
another option you have is to have 8 separate robots with a controller each and combine these in some master controller


you can try comparing your proto to the one of a different wheeled robot such as the pioneer [https://github.com/cyberbotics/webots/blob/master/projects/robots/adept/pioneer2/protos/Pioneer2.proto](https://github.com/cyberbotics/webots/blob/master/projects/robots/adept/pioneer2/protos/Pioneer2.proto)

##### Chernayaten 02/19/2021 21:44:33
Yeah, I quickly came to the conclusion that accuracy is a fickle thing for what I wanted to do.



The default noise value is 0, which ofc can be changed. You can set ContactProperties which have fields such as coulombFriction and forceDependentSlip which should introduce some slippage, but I never tried them out cause it was not necessary for my needs.

##### cooolwhip14 02/19/2021 21:52:54
Hi thanks for the suggestion. The main difference i can see is the pioneer just uses the one set of hinge joints for wheels to turn, and then uses wheel PositionSensors in the joint device section. I dont have this setup as I have a hinge joint allowing turning movement for the wheels , and then a wheel hingejoint connected to this for wheel spinning. (Similar to sojourner proto in nasa files)


Yet i cannot see what the sojourner proto does much different to my model, The main difference i do observe is that my wheels sink into the surface

##### Chernayaten 02/19/2021 21:53:52
For PROTO nodes you should be able to use **wb\_supervisor\_node\_get\_from\_proto\_def** by giving DEF names to your nodes.


I would second jgueldenstein's suggestion to use 8 separate robots though


proto files are made to be re-used so why would you have to copy-paste them?

##### cooolwhip14 02/19/2021 22:14:06
Has anyone had any experience with wheels sinking into the surface and better yet how to fix it?

##### DDaniel [Cyberbotics] 02/19/2021 22:19:18
you can reduce the basicTimeStep in the worldinfo node and/or reduce the softCFM in the contact properties

##### cooolwhip14 02/19/2021 22:20:14
Ive set the timestep to 4 but no avail , softCFM?


changed CFM from 1e-5 -> 1e-10 didnt seem to work

##### DDaniel [Cyberbotics] 02/19/2021 22:22:22
worldinfo > contactproperties > softCFM

##### cooolwhip14 02/19/2021 22:25:08
No luck but im not even sure i have contact properties set up correctly

##### DDaniel [Cyberbotics] 02/19/2021 22:31:22
also doublecheck you didn't add very heavy parts by mistake (by setting a wrong density/mass or things like that)

##### cooolwhip14 02/19/2021 22:33:41
I havent actually defined any of the masses yet just all parts set to the default density of 1000


Is that a problem?

##### Bitbots\_Jasper [Moderator] 02/19/2021 22:34:33
if you have a bounding object and a density, it automatically calculates the mass

##### DDaniel [Cyberbotics] 02/19/2021 22:37:08
That's normal, isn't that then unless it's a huge robot

##### cooolwhip14 02/19/2021 22:44:13
Um id say its about 2.5m length 2m width 1m height


1m width 2m height*

##### Bitbots\_Jasper [Moderator] 02/19/2021 22:46:51
well, that makes your robot 2.5 * 1* 2 * 1000kg = 5000 kg heavy


just to test, try to set the density to 1

##### cooolwhip14 02/19/2021 22:48:37
When im next on my pc il give it a try and let you know. Cheers!


And is that to set the density of each bounding object i have on my rover to 1?


Nvm yes it would be

##### Bitbots\_Jasper [Moderator] 02/19/2021 22:50:22
you have basically two options, either you set the density to something that is realistic or you set the mass to something that is realistic. I think its generally easier to estimate the mass of each component than the density


if you set the mass you should set the density to -1, see here: [https://cyberbotics.com/doc/reference/physics#field-summary](https://cyberbotics.com/doc/reference/physics#field-summary)

##### cooolwhip14 02/20/2021 06:23:40
hi , I tried reducing the mass, i even reduced the scale in combination with the mass yet no avail, however when i did the wheels etc extremely light they would all go out of control and spin in random directions at the start of the sim. Anyone got any ideas?

##### Vangiel 02/20/2021 10:21:22
Hello, how can I rotate a solid around one axis without affecting the other axis (using python)? Thanks in advance.

##### DDaniel [Cyberbotics] 02/20/2021 12:14:55
put the solid in the endPoint of a hingeJoint and a rotationalmotor in the device field, then from the controller you access the device and control the motor


you can use the tutorial as reference: [https://www.cyberbotics.com/doc/guide/tutorial-6-4-wheels-robot](https://www.cyberbotics.com/doc/guide/tutorial-6-4-wheels-robot)

##### Bitbots\_Jasper [Moderator] 02/20/2021 14:45:34
can you share your proto file? it might be a lot easier to help you then.

##### Vangiel 02/20/2021 18:56:42
I will try that, thank you very much

##### Icy\_Flurry 02/20/2021 20:21:58
how can i set indentation to tabs in the webots text editor?

##### modymu 02/20/2021 20:29:51
+ Is there any add ons for webots text editor??

##### Icy\_Flurry 02/20/2021 20:36:41
if this isnt possible, how can i use webots with clion? the cmake instructions did not work

##### modymu 02/20/2021 20:37:58
can you compile the code directly from webots?

##### Icy\_Flurry 02/20/2021 20:38:11
yes

##### modymu 02/20/2021 20:40:24
I don't know about Clion but try to change where the executable file goes directory

##### Icy\_Flurry 02/20/2021 20:42:54
it compiles, but shows this message:

```
/media/<username>/Acer/Users/<username>/CLionProjects/webots-proj/cmake-build-debug/webots-proj: error while loading shared libraries: libController.so: cannot open shared object file: No such file or directory
```

##### bertlangton 02/21/2021 09:30:19
I keep on getting a "python.exe was not found" error when running WeBots, I've changed the Path variable and set the preference, but it doesn't help; what am I doing wrong？


I have windows 10

##### Olivier Michel [Cyberbotics] 02/21/2021 09:51:26
Which python version did you install?

##### bertlangton 02/21/2021 09:51:54
3.9.1


Ah, managed to clear it up... but now it doesnt seem to find numpy, though I installed it with anaconda

##### Olivier Michel [Cyberbotics] 02/21/2021 09:58:25
Anaconda is not supported out of the box, you should use python from python.org and pip to install numpy. Alternatively, you can recompile the python bindings to work with anaconda python. See details on this in the user guide.

##### bertlangton 02/21/2021 10:02:41
Ah, now it works; thanks

##### modymu 02/21/2021 22:11:38
It seems like Clion didn't know the libraries used by webots to compile your controller

##### Harris 02/21/2021 22:12:52
Hi, I am trying to put a imported gripper solid node in the toolslot of universal robot node. Here's the problem: when I drive the universal robot's motor to make some movement, the gripper cannot move well and the universal robot was stuck together if I turn on the boundingObject of each solid children node. Because I have to do collision detection later on so I am wondering is there anyway to solve this problem without turning off the boundingObject?

##### modymu 02/21/2021 22:13:27
I had this problem also in pylint in vs code it dose not recognized the libraries import at the beginning of the code

##### Icy\_Flurry 02/21/2021 23:19:38
yep, i fixed it by setting LD\_LIBRARY\_PATH in the environment variables section of the config

##### h.sciascia 02/22/2021 08:15:46
Hello ! I've installed Webots in Windows 10 and also in a docker in W10.

I would like to run a world created under W10 with Docker Command line . Is that possible ?

##### Darko Lukić [Cyberbotics] 02/22/2021 09:41:38
If you include the world file in your Docker image there should not be any problem. Do you want to Webots UI in Docker as well?

##### h.sciascia 02/22/2021 09:45:31
Ok (I'm new to Docker thanks)

No UI only command line interface, I try to explore all the possibilities to speed-up simulations

##### Darko Lukić [Cyberbotics] 02/22/2021 09:47:02
If you want to get a good performance in Docker make sure you use nvidia-docker (if you have NVIDIA GPU)


Also, check this:

[https://www.cyberbotics.com/doc/guide/speed-performance](https://www.cyberbotics.com/doc/guide/speed-performance)

##### h.sciascia 02/22/2021 09:48:19
A graphic card is required ?

##### Darko Lukić [Cyberbotics] 02/22/2021 09:49:22
It is not required, but it will boost performance, especially if you use LiDARs, cameras, range finders and similar

##### h.sciascia 02/22/2021 09:49:39
Ok thanks a lot ! 🙂


Ok it's working (for a really small basic STL exemple) using the option "using mesh for boundingObject" during the import process

##### Alirashidi 02/22/2021 11:49:02
Hi, I just downloaded webots and the UI is really small.


I am on Linux and I have a 4k screen


Can you guys tell me how I can scale the UI properly? I have had a look in the docs but couldn't find anything.

##### Darko Lukić [Cyberbotics] 02/22/2021 12:36:33
Check this:

[https://github.com/cyberbotics/webots/pull/2631](https://github.com/cyberbotics/webots/pull/2631)


You can either download the nightly build:

[https://github.com/cyberbotics/webots/releases/tag/nightly\_19\_2\_2021](https://github.com/cyberbotics/webots/releases/tag/nightly_19_2_2021)



or set the environment variable:

```
QT_ENABLE_HIGHDPI_SCALING = 1
```

##### cindy 02/22/2021 13:57:22
Hi guys for ultrasonic sensors, in the actual code, is there a way of editing the angle range at which rays will be returned from 45 to something else?

##### Olivier Michel [Cyberbotics] 02/22/2021 14:19:33
Do you want to change the `DistanceSensor.aperture` value at run-time?

##### cindy 02/22/2021 14:19:59
Yes, basically. Because we need to detect lots of small objects from a distance

##### Olivier Michel [Cyberbotics] 02/22/2021 14:20:18
But if you change it in the model, wouldn't that be sufficient?

##### cindy 02/22/2021 14:21:00
Ah how do you do that


I have not got much webots experience sadly

##### Olivier Michel [Cyberbotics] 02/22/2021 14:21:30
See [https://cyberbotics.com/doc/reference/distancesensor](https://cyberbotics.com/doc/reference/distancesensor)

##### cindy 02/22/2021 14:22:39
Oh right aperture

##### Chernayaten 02/22/2021 14:22:43
From the Scene Tree (on the left most likely), go to your Robot, find the distance sensor and then edit the field

##### cindy 02/22/2021 14:22:47
thank you

##### h.sciascia 02/22/2021 15:46:14
Hello again !

Do you know if there is a way to convert an URDF file to a 3D model file (obj, stl or other) ?

I want to use this model as my boundingObject because i do not have a mesh file included to my urdf model..

What do you think? I do not find an answer on the web

##### Luftwaffel [Moderator] 02/22/2021 15:48:52
a urdf file does not contain any 3D model definitions itself


it just defines, how links are connected through joints


what exactly do you want to achieve?


there is always this converter: [https://github.com/cyberbotics/urdf2webots](https://github.com/cyberbotics/urdf2webots)


it converts urdf files into proto files, which you can directly load into Webots. May I ask, which urdf file you want to convert?

##### h.sciascia 02/22/2021 15:52:12
I want to find a way to "resolve"/get around this issue [https://github.com/cyberbotics/webots/issues/2584](https://github.com/cyberbotics/webots/issues/2584)

##### Luftwaffel [Moderator] 02/22/2021 15:55:13
I'm not sure how your urdf comes into play here


you can use the shapes of your model as your bounding objects

##### h.sciascia 02/22/2021 15:56:54
Not for boundingObject Group nodes..

##### Luftwaffel [Moderator] 02/22/2021 15:57:37
share your world file (project dir) and urdf pls


you can pm me if you dont wanna post public

##### h.sciascia 02/22/2021 16:00:54
Ok I send you a pm in the evening

 `@Darko Lukić` must see what i mean

##### Luftwaffel [Moderator] 02/22/2021 16:21:59
I dont quite understand the issue to be honest

##### Steven37 02/22/2021 17:22:49
I am using a Pioneer robot with a camera attached to take a picture of the trees on the sides like in the video. Then I want it to print out some of the characteristics of those trees but nothing is printed. I have successfully tried with one tree, but it didn't work when I put several trees at the same time like that. Can someone tell me why, please? Thank you!
> **Attachment**: [3Y\_Iproject\_Pioneer3AT\_cameraTesting.mp4](https://cdn.discordapp.com/attachments/565154703139405824/813460803847454823/3Y_Iproject_Pioneer3AT_cameraTesting.mp4)

##### Luftwaffel [Moderator] 02/22/2021 17:23:43
Perhaps is something as simple as the trees not having unique names

##### Steven37 02/22/2021 17:23:47
Also, here's my code to print it out. I can still print "Hello World" but there are problems with my camera somewhere.
%figure
![3Y_Iproject_Pioneer_cameraTesting.JPG](https://cdn.discordapp.com/attachments/565154703139405824/813461049537200189/3Y_Iproject_Pioneer_cameraTesting.JPG)
%end

##### Luftwaffel [Moderator] 02/22/2021 17:26:56
did you enable object recognition?


[https://cyberbotics.com/doc/reference/camera?tab-language=c#wb\_camera\_has\_recognition](https://cyberbotics.com/doc/reference/camera?tab-language=c#wb_camera_has_recognition)

##### Steven37 02/22/2021 17:28:21
Must all the trees have a different name? So why doesn't it print the figure for a tree in it?

##### Luftwaffel [Moderator] 02/22/2021 17:28:38
was just a suggestion. can you post your entire code?

##### Steven37 02/22/2021 17:29:37
yes, i think so
%figure
![Pioneer_cameraEnable.JPG](https://cdn.discordapp.com/attachments/565154703139405824/813462518147710986/Pioneer_cameraEnable.JPG)
%end

##### Luftwaffel [Moderator] 02/22/2021 17:31:09
> Only Solids whose recognitionColors field is not empty can be recognized by the camera.

##### Steven37 02/22/2021 17:35:52

%figure
![3Y_pioneer_code1.JPG](https://cdn.discordapp.com/attachments/565154703139405824/813464088075173888/3Y_pioneer_code1.JPG)
%end


that's my code
%figure
![3Y_pioneer_code2.JPG](https://cdn.discordapp.com/attachments/565154703139405824/813464160930889759/3Y_pioneer_code2.JPG)
%end

##### Luftwaffel [Moderator] 02/22/2021 17:36:40
do the trees have recognition colors assigned?

##### Steven37 02/22/2021 17:36:57
and this is my solid scene tree
%figure
![Plant_sceneTree.JPG](https://cdn.discordapp.com/attachments/565154703139405824/813464360722235432/Plant_sceneTree.JPG)
%end


Is there any problem?

##### Luftwaffel [Moderator] 02/22/2021 17:40:12
I have never used this functionality


can you share your project? I can take a look


you can pm me


ohhh


you only execute the while loop AFTER you moved forward and then stopped


You should run that loop while you are moving

##### Steven37 02/22/2021 17:43:26
how can I?


I have successfully tried with one tree before

##### Luftwaffel [Moderator] 02/22/2021 17:44:29
just set the velocities and then execute the while loop


you can have an if statement in the loop, that aborts it or sets the speed to 0 after a certain time

##### Steven37 02/22/2021 17:48:48
I removed the stop section but still didn't work

##### Luftwaffel [Moderator] 02/22/2021 17:49:11
the 140*timestep is the issue

##### Steven37 02/22/2021 17:49:12
how can I share my project to you?


Why?

##### Luftwaffel [Moderator] 02/22/2021 17:49:27
just zip the project folder


well you execute 140 timesteps, BEFORE you start your object recognition

##### Steven37 02/22/2021 17:55:11
I have changed it but still the same

##### Luftwaffel [Moderator] 02/22/2021 17:55:27
zip your project and send it to me


just drag & drop in discord

##### Steven37 02/22/2021 17:55:44
this is the world
> **Attachment**: [Pioneer3AT.wbt](https://cdn.discordapp.com/attachments/565154703139405824/813469090978332732/Pioneer3AT.wbt)

##### Luftwaffel [Moderator] 02/22/2021 17:56:04
the whole directory, with the controllers folder and the worlds folder

##### Steven37 02/22/2021 17:56:17
this is my controller
> **Attachment**: [MyPoineer3AT\_controller.c](https://cdn.discordapp.com/attachments/565154703139405824/813469228480856085/MyPoineer3AT_controller.c)


sorry but is it still ok?

##### Luftwaffel [Moderator] 02/22/2021 17:57:15
whole directory is much easier for me


I dont have to manually create and name all the folders

##### Steven37 02/22/2021 18:03:00

> **Attachment**: [3Y\_Webots\_Pioneer.rar](https://cdn.discordapp.com/attachments/565154703139405824/813470919791476776/3Y_Webots_Pioneer.rar)

##### Luftwaffel [Moderator] 02/22/2021 18:03:32
of course this does not work


you are executing all the movement BEFORE you start your loop


dont execute robot steps outside of your loop

##### Steven37 02/22/2021 18:06:51
still the same when i put those code into the loop

##### Luftwaffel [Moderator] 02/22/2021 18:07:04
show me that code

##### Steven37 02/22/2021 18:08:08
i just cut all the movement code above and paste them inside the while loop

##### Luftwaffel [Moderator] 02/22/2021 18:08:20
dont call the timestep


that is your issue


you tell it to just exectue 9 seconds of simulation without doing anything

##### Steven37 02/22/2021 18:08:42
yes, i have changed it as wll


as well

##### Luftwaffel [Moderator] 02/22/2021 18:09:07
works perfectly for me

##### Steven37 02/22/2021 18:09:26
can you show me, please?


What have you changed exactly?

##### Luftwaffel [Moderator] 02/22/2021 18:10:30

> **Attachment**: [MyPoineer3AT\_controller.c](https://cdn.discordapp.com/attachments/565154703139405824/813472806300942376/MyPoineer3AT_controller.c)


as I said. removed all the extra robot steps

##### Steven37 02/22/2021 18:16:45
So if I don't just go straight now but I want my robot to turn at some points, what can I do? I think I must use wb\_robot\_step () to do that.

##### Luftwaffel [Moderator] 02/22/2021 18:20:25
Do it like this
> **Attachment**: [MyPoineer3AT\_controller.c](https://cdn.discordapp.com/attachments/565154703139405824/813475300750524416/MyPoineer3AT_controller.c)


I added an example for stopping after 8 seconds


this is probably a cleaner solution
> **Attachment**: [MyPoineer3AT\_controller.c](https://cdn.discordapp.com/attachments/565154703139405824/813478288496001074/MyPoineer3AT_controller.c)

##### Steven37 02/22/2021 18:33:18
I wrote the code like this so the robot can move the way I want, but this time it didn't move at all.
%figure
![3Y_pioneer_movement.JPG](https://cdn.discordapp.com/attachments/565154703139405824/813478543127609344/3Y_pioneer_movement.JPG)
%end

##### Luftwaffel [Moderator] 02/22/2021 18:34:25
check the newest example I uploaded


it's easier to implement and cleaner

##### Steven37 02/22/2021 18:44:35
it's perfect now


I don't know what can be said to thank you


Thank you, love you so much!

##### Luftwaffel [Moderator] 02/22/2021 18:45:33
just pass on your knowledge once you gathered more expertise 🙂


and you're welcome!

##### Steven37 02/22/2021 18:47:49
Of course, I also want to show this kindness to anyone I can like what I was helped by you.


Thank you!

##### SeanLuTW 02/23/2021 04:51:30
How can I set the initial joints' angle in my UR5e PROTO correctly? I added six float fields in the built-in UR5e PROTO file and imported it to my world. I set these joints to the values I wanted and everything seems all right. After reloaded the world, the arm recovered to the original pose while the position sensors reported the value I had set.

##### Bitbots\_Jasper [Moderator] 02/23/2021 09:54:40
If you open your world file in a text editor, there should be a list of items similar to `hidden rotation_1 0 0 1 2.4306877183167175e-01`, you can modify the parameter to the desired initial position


there might be an easier way to do it though 😄


I also have a question. I am looking to adjust the maximum velocity of a motor from my (non supervisor) controller. I had the idea to export the field from the proto, but this a) requires a supervisor and b) does not work without reloading the model. Does anybody have an idea? I am basically looking for an alternative to the function setMaxVelocity() (which does not exist)

##### Olivier Michel [Cyberbotics] 02/23/2021 10:09:50
Are you applying position, velocity or force control?

##### Bitbots\_Jasper [Moderator] 02/23/2021 10:10:01
position control

##### Olivier Michel [Cyberbotics] 02/23/2021 10:15:58
Did you try to use `wb_motor_set_velocity` followed by `wb_motor_set_position`? Does it take the specified velocity to achieve the requested position?

##### Bitbots\_Jasper [Moderator] 02/23/2021 10:16:17
I'll test it


That seems to work, I assumed, that `wb_motor_set_velocity` was only for velocity control, but it seems as they are used as upper limits according to ` The current values for velocity, acceleration and motor torque/force are taken into account.` here: [https://cyberbotics.com/doc/reference/motor#wb\_motor\_set\_velocity](https://cyberbotics.com/doc/reference/motor#wb_motor_set_velocity)


thank you for your help `@Olivier Michel`

##### Olivier Michel [Cyberbotics] 02/23/2021 10:23:37
I believe it is clear also from this table: [https://cyberbotics.com/doc/reference/motor#force-and-torque-control](https://cyberbotics.com/doc/reference/motor#force-and-torque-control)

##### Bitbots\_Jasper [Moderator] 02/23/2021 10:25:59
yes that table makes it quite clear

##### Steven37 02/23/2021 11:32:31
I want to use my robot to continuously record the colors of a box where I used my monitor to continuously change its color like in the video but why can't the camera recognize that box?
> **Attachment**: [3Y\_caemera\_boxChangeColor.mp4](https://cdn.discordapp.com/attachments/565154703139405824/813735037726883870/3Y_caemera_boxChangeColor.mp4)


I also have enabled the recognitionColors like this
%figure
![3Y_recogniseEnable.JPG](https://cdn.discordapp.com/attachments/565154703139405824/813735134649122836/3Y_recogniseEnable.JPG)
%end

##### Harris 02/23/2021 12:14:47
Hi, I am pretty new to webots. I am wondering if there's anyway to transfer list type data from a supervisor to a robot controller in Python? I use emmitter/reciever function(emmitter.send) but can only transfer string, thank you lol.

##### Olivier Michel [Cyberbotics] 02/23/2021 12:20:59
`recognitionColors` is not meant for that: it is to assign a color to each object so that the object gets segmented with that color. If you want to recognize the color of the cube, you should read the pixels of the camera image instead.


You could serialize your data into a string and use the Emitter/Receiver. Otherwise, you can use any IPC (Inter Process Communication) system or possibly simply a file shared between your robot and supervisor and synchronize the access to it with Emitter/Receiver messages.

##### Srivastav\_Udit 02/23/2021 12:33:20
Can someone please suggest a pick and transport algorithm using a camera?

##### Steven37 02/23/2021 12:50:30
Can you explain to me in a little more detail, please? I don't really get that yet.

##### Olivier Michel [Cyberbotics] 02/23/2021 13:44:24
You should look at this example to understand how to recognize the color of an object from a camera image: [https://cyberbotics.com/doc/guide/samples-devices#camera-wbt](https://cyberbotics.com/doc/guide/samples-devices#camera-wbt)

##### iagsav 02/23/2021 13:51:39
Hi! I try to start "Rats Life" world, but get such error:


Native code library failed to load. See the chapter on Dynamic Linking Problems in the SWIG Java documentation for help.

java.lang.UnsatisfiedLinkError: E:\Users\Xuser\AppData\Local\Programs\Webots\lib\controller\java\JavaController.dll: Can't load AMD 64-bit .dll on a IA 32-bit platform

WARNING: 'Rat0' controller exited with status: 1.


please tell me how it can be fixed?

##### DDaniel [Cyberbotics] 02/23/2021 13:54:52
did you you through the java and java compiler installation process? [https://www.cyberbotics.com/doc/guide/using-java](https://www.cyberbotics.com/doc/guide/using-java), specifically this looks like your error: [https://www.cyberbotics.com/doc/guide/using-java](https://www.cyberbotics.com/doc/guide/using-java)#troubleshooting-the-java-installation

##### iagsav 02/23/2021 13:56:45
Thank you!

##### John520 02/23/2021 15:09:09
Hi guys, I'd like to import a CAD vehicle model into Webots. I am happy that the latest Webots release already supports the direct importation of .stl and .obj model. My question is how to make the imported vehicle run, just like the vehicles here [https://cyberbotics.com/doc/automobile/car](https://cyberbotics.com/doc/automobile/car). Thanks a lot.

##### Olivier Michel [Cyberbotics] 02/23/2021 15:11:21
Importing meshes isn't enough to model a robot. You should follow the tutorial about robot modeling: [https://cyberbotics.com/doc/guide/tutorials](https://cyberbotics.com/doc/guide/tutorials) (at least until tutorial 7).

##### John520 02/23/2021 15:51:25
Thank you `@Olivier Michel`. I went through the tutorial before. Am I right that I will need to add joints and motors to the wheels for the imported vehicle to run?

##### Olivier Michel [Cyberbotics] 02/23/2021 15:53:12
Yes.

##### John520 02/23/2021 15:54:31
Thank you `@Olivier Michel`. I will look into it. Thank you for your help!

##### h.sciascia 02/23/2021 15:57:30
Hello !

I try to use Docker in W10 for running webots without GUI



I did this command to be able to get Windows files inside my docker :

`docker run -it -v C:\Users\h.sciascia\Documents\Webots\:/usr/local cyberbotics/webots:latest`



But when my container is opened in command line, there is no webots sources file



If I do only `docker run -it cyberbotics/webots:latest` , "webots" command is known and i'm able to run webots examples



Do you had this issue ?



Thank in advance !

##### Darko Lukić [Cyberbotics] 02/23/2021 16:14:59
Why do you want to mount the Windows folder to `/usr/local`?



The Webots installation is placed in `/usr/local`, so once you mount the Windows folder you override the Webots installation. Note that the Windows version of Webots cannot run inside of the Linux container.

##### h.sciascia 02/23/2021 16:21:58
Oh ok ..

I just want to run my Webots developped under Windows in a Docker container (to see if the simulation speed up without GUI)

##### Darko Lukić [Cyberbotics] 02/23/2021 16:24:03
Then you have to mount only the Webots project folder (from Windows)

##### h.sciascia 02/23/2021 16:24:12
It's ok now with this :

`docker run -it -v c:/Users/h.sciascia/Documents/Webots:/data cyberbotics/webots:latest ls /data`

##### Darko Lukić [Cyberbotics] 02/23/2021 16:24:49
Looks better

##### h.sciascia 02/23/2021 16:24:51
Thanks, i did not know that webots was at /usr/local

##### Darko Lukić [Cyberbotics] 02/23/2021 16:25:33
But your simulation will not run faster in Docker because the Docker image uses a virtual display. In the best case, it will run at the same speed.

##### Luftwaffel [Moderator] 02/23/2021 16:25:55
`@Darko Lukić` Is Webots actually running headless in docker, when not using any visual based sensors?

##### Darko Lukić [Cyberbotics] 02/23/2021 16:26:42
No, it never uses truly headless mode.

##### Luftwaffel [Moderator] 02/23/2021 16:26:51
For parallel simulation, this is the main thing holding Webots back compared to Pybullet

##### Darko Lukić [Cyberbotics] 02/23/2021 16:28:23
We should implement something like this:

[https://developer.nvidia.com/blog/egl-eye-opengl-visualization-without-x-server/](https://developer.nvidia.com/blog/egl-eye-opengl-visualization-without-x-server/)

##### Luftwaffel [Moderator] 02/23/2021 16:29:37
It would probably be a very tall order, but the Server-Client setup of gazebo and PyBullet makes a lot of sense. Wish Webots would support that

##### Darko Lukić [Cyberbotics] 02/23/2021 16:29:49
Do you have some analysis of that. I would like to know what was the bottleneck for you, VRAM or RAM?

##### Luftwaffel [Moderator] 02/23/2021 16:30:07
both


If I remember correctly, Vram was always at 800 MB, even when minimized and not rendering anything

##### Darko Lukić [Cyberbotics] 02/23/2021 16:30:40
How much RAM/VRAM usage, how many instances, and what is the world complexity?

##### Luftwaffel [Moderator] 02/23/2021 16:30:56
it was a very simple world with just a robotic arm


and rectangle arena


was like 5 month ago

##### h.sciascia 02/23/2021 16:31:42
So there is no way to run faster the simulation using Windows 10 ? :/

##### Luftwaffel [Moderator] 02/23/2021 16:31:46
webots also used I think 1.1 GB of ram minimum. However, now on windows, I see it uses below 370MB


I did parallel RL, that quicly saturated my VRAM and RAM


it was cpu only simulation, so it kinda sucked to spend resources on something that is not needed. I can test things again. that was on 2020b


`@h.sciascia` There is many things you can do to speed up the simulation. I have quite some experience with that.


What is your goal, what are you simulating?

##### Darko Lukić [Cyberbotics] 02/23/2021 16:35:35
I have just tested, it is 330MB with `pioneer3at.wbt` (relatively big world + LiDAR)

##### Luftwaffel [Moderator] 02/23/2021 16:35:52
windows or linux?

##### h.sciascia 02/23/2021 16:39:05
I cannot explain a lot for confidentiality reason but I use an URDF robot which explore all of its envrionment to detect the collisions (with a personalised physics plugin), go through them and save each collision in a CSV file

##### Luftwaffel [Moderator] 02/23/2021 16:39:25
Yeah, on windows I get 360MB RAM and 220MB VRAM. That is already MUCH better. I still wish it would be possible to run without any gui at all

##### Darko Lukić [Cyberbotics] 02/23/2021 16:39:33
Linux

##### Luftwaffel [Moderator] 02/23/2021 16:39:59
mobile robot or robotic arm?

##### h.sciascia 02/23/2021 16:40:11
So I did simulation for 1-2-3-4 DOF, but with 5 DOF it's becoming really really long (should take 2-3 days to explore all the possibilities)

##### Luftwaffel [Moderator] 02/23/2021 16:40:34
did you profile your code?


IK can take a significant portion of time


I recommend using IKFast, if you are not already


also, increase the step size of your simulation and use simple bounding boxes

##### h.sciascia 02/23/2021 16:41:49
No IK , just iterative imbricated loop for be sure to run trhough all the possibilities


yep i did the increase for step size of the motors and use cubes

##### Luftwaffel [Moderator] 02/23/2021 16:42:29
what is your realtime factor?

##### Darko Lukić [Cyberbotics] 02/23/2021 16:47:48
`@h.sciascia`  As Simon mentioned, you should profile your controller and the physics plugin. The controller is usually cause for the slow simulations.

##### Alirashidi 02/23/2021 16:48:34
Hi, just created my robot and I wanted to add a rgbD camera (RFID camera ) But I haven't had any luck finding one. Could you guys help me with that?


RgbD is a depth camera

##### Darko Lukić [Cyberbotics] 02/23/2021 16:49:11
You should combine the camera node and the range finder node

##### Alirashidi 02/23/2021 16:49:41
Oh OK, will have a look into that


Thanks so much

##### Darko Lukić [Cyberbotics] 02/23/2021 16:50:39
Just use the same pose for both nodes and the same intrinsic parameters (e.g. FoV)


I discovered a bug:

[https://github.com/cyberbotics/webots/issues/2776](https://github.com/cyberbotics/webots/issues/2776)

##### Luftwaffel [Moderator] 02/23/2021 16:51:27
let me verify


for me on windows it garbage collects most of it, but not all. about 60MB extra

##### hugos 02/23/2021 16:58:43
(always me with personnal account)

Ok thanks I will try that, thanks a lot for your time both of you 👍👍👍

##### Srivastav\_Udit 02/23/2021 18:12:29
Can someone please help me resolve this error?



Error: ignoring illegal call to wb\_differential\_wheels\_set\_speed() in a 'Robot' controller.

Error: this function can only be used in a 'DifferentialWheels' controller.

##### DDaniel [Cyberbotics] 02/23/2021 18:21:30
`@Srivastav_Udit`  The differential wheels node has been deprecated so you shouldn't be using it unless you really need to. You can achieve the same with a classic Robot node setting a hinge to either side and setting the left and right motor accordingly

##### Srivastav\_Udit 02/23/2021 18:33:27
Thank you so much Daniel! I'm trying to use the wb\_differential\_wheels\_get\_left\_encoder(); function with the epuck. Can you recommend another way to achieve this function on the epuck?

##### DDaniel [Cyberbotics] 02/23/2021 18:36:40
You can add also PositionSensors to the hinges, same way you add the motors

##### Srivastav\_Udit 02/23/2021 18:37:33
I'll try that, thanks again!

##### DDaniel [Cyberbotics] 02/23/2021 18:40:38
there's an epuck sample world already to see how it's done: file > open sample world > robot > gctronic > epuck

##### Srivastav\_Udit 02/23/2021 18:43:57
That's exactly what I was looking for, thanks a lot!

##### Chernayaten 02/23/2021 20:07:57
I think the robot tutorial on the webots website might help you as well: [https://cyberbotics.com/doc/guide/tutorial-6-4-wheels-robot](https://cyberbotics.com/doc/guide/tutorial-6-4-wheels-robot)

##### Srivastav\_Udit 02/23/2021 20:24:26
Has anyone worked on a simple object transportation algorithm using a camera with obstacle avoidance?


I'm essentially trying to search for an object and transport it to a "nest" in the fastest way possible avoiding any obstacles

##### Luftwaffel [Moderator] 02/23/2021 20:26:19
what do you mean by "transport" ?


Are we talking abstract 3d movement, or a roboter manipulating it?

##### Srivastav\_Udit 02/23/2021 20:27:46
I've created a robot that is supposed to detect a ball in an arena and transport it to a nest

##### Luftwaffel [Moderator] 02/23/2021 20:28:01
can you share a screenshot?

##### Srivastav\_Udit 02/23/2021 20:29:41

%figure
![PXL_20210223_202905478.jpg](https://cdn.discordapp.com/attachments/565154703139405824/813870218840375306/PXL_20210223_202905478.jpg)
%end

##### Luftwaffel [Moderator] 02/23/2021 20:30:21
oh, is this your actual physical setup?

##### Srivastav\_Udit 02/23/2021 20:30:49
Yes, the robot has a gripper that can hold the ball

##### Luftwaffel [Moderator] 02/23/2021 20:31:02
are you using ROS?


to control the bot

##### Srivastav\_Udit 02/23/2021 20:31:46
No, I'm not very familiar with ROS yet

##### Luftwaffel [Moderator] 02/23/2021 20:32:19
are you using an overhead camera? or onboard?


and how do you control the bot?

##### Srivastav\_Udit 02/23/2021 20:34:16
I have a camera attached to the bot. It essentially spins till it detects the ball and then attempts to move towards it and grips the ball if it is within the reach  of the gripper.


I'm trying to work out how it can find the best path to the nest avoiding obstacles. I also need to understand how I can release the ball in the nest and then go search the arena again.

##### Luftwaffel [Moderator] 02/23/2021 20:35:45
sorry, I dont have experience with this


you might want to look into "SLAM", but that is more advanced


but I think you need to implement odometry of some sort, so the robot knows where it is


simplest solution would probably trying to drive directly towards the nest and to just drive around obstacles

##### Bitbots\_Jasper [Moderator] 02/23/2021 20:37:48
mobile robot navigation is a relatively well researched topic with a lot of algorithms already implemented well. I think it is easier to learn ROS and use the navigation stack of ros than to reimplement these algorithms


the navigation stack may be overkill though if you want to find a "hacky" solution


but if you have lots of obstacles in the environment something like slam is definitely required


otherwise you could get away with some simple object detection and maybe potential field navigation


but if you want to get into robotics, it's really useful to know ROS

##### Srivastav\_Udit 02/23/2021 20:39:35
Do you have any algorithm/sample project I could use for reference?

##### Luftwaffel [Moderator] 02/23/2021 20:39:53
no, sorry

##### Srivastav\_Udit 02/23/2021 20:40:49
Can you give me a reference point to get started with ROS? I don't have a lot of obstacles in my environment but I do have to attempt a swarm implementation later on.

##### Luftwaffel [Moderator] 02/23/2021 20:43:20
ROS takes a while to wrap your head around

##### Bitbots\_Jasper [Moderator] 02/23/2021 20:43:43
the ROS wiki is your friend [https://index.ros.org/doc/ros2/](https://index.ros.org/doc/ros2/). In my opinion it is better to start using ROS2 right away since ROS 1 is nearing end of life (2025)


yes `@Luftwaffel`  is right, it takes quite a bit of time to get to know it


there is also the ROS2 controller for webots [https://github.com/cyberbotics/webots\_ros2](https://github.com/cyberbotics/webots_ros2)

##### Luftwaffel [Moderator] 02/23/2021 20:45:06
[https://www.theconstructsim.com/](https://www.theconstructsim.com/) I did this online academy. Yes it cost a bit of money, but I learned in 2 weeks much more than I did in the 2-3 moth before, trying to figure it out myself

##### Bitbots\_Jasper [Moderator] 02/23/2021 20:45:52
it is a bit difficult to estimate for your use case if it is better to learn ROS, which will benefit you a lot in the future if you continue doing robotics, or to implement your own solution

##### Srivastav\_Udit 02/23/2021 20:47:08
This might be a silly question but if I were to write a controller without ROS and had multiple robots to collect and drop these balls in a nest (probably like the hacky solution you mentioned) - what would you recommend ?

##### Bitbots\_Jasper [Moderator] 02/23/2021 20:48:17
if you want to stay inside webots there is the emitter and receiver: [https://cyberbotics.com/doc/reference/emitter](https://cyberbotics.com/doc/reference/emitter), [https://cyberbotics.com/doc/reference/receiver](https://cyberbotics.com/doc/reference/receiver)

##### Srivastav\_Udit 02/23/2021 20:49:50
Would this involve a supervisor since there are multiple robots?

##### Bitbots\_Jasper [Moderator] 02/23/2021 20:52:24
no, you dont need a supervisor controller to do that

##### Srivastav\_Udit 02/23/2021 20:54:50
Okay, thanks!

##### SeanLuTW 02/24/2021 02:55:44
I think I found the problem. After reload world or reset the simulator, the `hidden` descriptions in the world file were eliminated, which caused the angle offset. (`hidden` tells link how many angle to rotate, and `position` tells the position sensor current angle)


How can I avoid eliminating the `hidden` descriptions after reset the controller?

##### h.sciascia 02/24/2021 08:13:53
Hello ! Didn't see this message my bad



What do you mean by realtime factor ? Are you talking about the speed of the simulation ? Or the timeStep in my application ?

##### Bitbots\_Jasper [Moderator] 02/24/2021 08:56:14
did you properly save your world?

##### SeanLuTW 02/24/2021 08:58:45
Yes, I saved my world, and I can see the `hidden` in the file. But after I clicked reset simulator, the robot just went back to original pose.


I read the document from [https://cyberbotics.com/doc/reference/proto-hidden-fields](https://cyberbotics.com/doc/reference/proto-hidden-fields) . Maybe after clicking reset button, the `hidden` description just been ignored by the simulator?


If I used reload world, everything seems alright. But the world is pretty completed, it spend lots of time to load

##### Bitbots\_Jasper [Moderator] 02/24/2021 09:18:03
to clarify this a bit more, you changed the value of the position field in the JointParameter node?

##### SeanLuTW 02/24/2021 09:20:11
Yes, I defined a `SFFloat` variable to specify the initial angle in PROTO, and use this variable to set the `position` under `HingeJointParameters`

##### Vangiel 02/24/2021 09:21:10
hello everyone. I have two simple questions that I don't get to solve. Using python: How can I get the basictimestep of the simulation? How can I get the simulation time? Thanks

##### SeanLuTW 02/24/2021 09:26:40
`getBasicTimeStep` and `getTime`in  `Robot`  Here is the document [https://cyberbotics.com/doc/reference/robot?tab-language=python#wb\_robot\_get\_time](https://cyberbotics.com/doc/reference/robot?tab-language=python#wb_robot_get_time)

##### Vangiel 02/24/2021 09:27:02
Thanks a lot

##### Bitbots\_Jasper [Moderator] 02/24/2021 09:44:13
I think the problem with changing the position field is described in the field description of the JointParameters Node: [https://cyberbotics.com/doc/reference/jointparameters#field-summary](https://cyberbotics.com/doc/reference/jointparameters#field-summary)


`The position field represents the current position of the joint, in radians or meters. For an hinge or ball, it is the current rotation angle in radians. For a slider, it is the magnitude of the current translation in meters. When changing the position field from the Webots scene tree, Webots also changes the corresponding rotation (for a hinge or ball) or translation (for a slider) field in the endPoint solid of the parent joint node to keep the consistency of the model. Similarly, when changing the position field of a JointParameters node in a text editor, you should take care of also changing the corresponding rotation or translation field accordingly.`


so you only change the position of the joint but not the transformation to the endPoint


this kind of makes it hard to set different initial positions of a single proto model


and for each joint you need to calculate original\_rotation\_matrix x rotation\_introduced\_by\_joint (if these are rotation matrices)

##### SeanLuTW 02/24/2021 09:57:44
Maybe the best solution is to change the PROTO into base node 😦

##### Callum98 02/24/2021 11:26:10
Hey guys, I have two working cameras on my robot but they both seem blurry and out of focus, how do I fix this?

##### Bitbots\_Jasper [Moderator] 02/24/2021 11:27:31
could you share the definition of the camera node in your proto?

##### Callum98 02/24/2021 11:28:40
Sorry what do you mean by that?

##### Bitbots\_Jasper [Moderator] 02/24/2021 11:30:15
In the proto file, the file that defines your robot, there should be a camera definition that looks somewhat like this:

```Camera {
  fieldOfView 0.5
  ....
}
```

##### Callum98 02/24/2021 11:33:24
Oh the lines I've used in my code?

##### Bitbots\_Jasper [Moderator] 02/24/2021 11:33:59
not your controller code


what robot are you using, did you define it yourself, or did you use a preconfigured one?

##### Callum98 02/24/2021 11:34:56
Its one I'm making myself for a coursework, sorry I'm new to this only been doing it for about 2 weeks

##### Bitbots\_Jasper [Moderator] 02/24/2021 11:36:37
dont worry 😄

you should have created a `robot.proto`file, to define the robot. can you share that?

 if you dont want it publicly, you can also pm me

##### Luftwaffel [Moderator] 02/24/2021 11:39:42
realtime factor is the speed your simulation runs at. If you had an absolutely perfect 1x realtime factor, the simulation time and real time would progress at the same rate. From what you describe, you should be able to get realtime factors in the area of 10x-200x. Of course this also heavily depends on your system, in particualr the single core speed of your CPU. What are your system specs?

##### Callum98 02/24/2021 11:41:08
I don't think I have a proto file, the protos folder is empty. Don't worry they aren't too bad, should be good enough for my robot to work, thank you for the help anyway

##### Luftwaffel [Moderator] 02/24/2021 11:41:30
`@Callum98` how did you add the cameras?


[https://cyberbotics.com/doc/reference/camera?tab-language=python](https://cyberbotics.com/doc/reference/camera?tab-language=python)


perhaps you specified a focus value


look at your robot node in the scene tree on the left. What settings do you have there?

##### Callum98 02/24/2021 11:42:37
In robot children clicked the add button and specified camera, creating a shape as something to see

##### Luftwaffel [Moderator] 02/24/2021 11:43:05
the default resolution is 64x64

##### Callum98 02/24/2021 11:43:55
How do I change the resolution so I can show camera image bigger? without it losing focus

##### Luftwaffel [Moderator] 02/24/2021 11:44:37
expand the camera node


you should see all the settings there


use the documentation link I sent, to adjust the settings

##### Bitbots\_Jasper [Moderator] 02/24/2021 11:46:03
There is a difference between an image being really low resolution and being out of focus

##### Callum98 02/24/2021 11:49:57
Like this, I just want the image to be a bit clearer
%figure
![Camera.png](https://cdn.discordapp.com/attachments/565154703139405824/814101812394852372/Camera.png)
%end

##### Luftwaffel [Moderator] 02/24/2021 11:50:20
increase the resolution

##### Callum98 02/24/2021 11:55:45
Got it, thanks man!

##### h.sciascia 02/24/2021 12:36:20
Yes, there is two mean time, when I saved nothing simulation can go 300-400x, and when I save in csv x70-80 max



Very old specs : 4GB Ram, Intel Core i5 4310U (2-2.6 GHz) , no graphic card

##### Luftwaffel [Moderator] 02/24/2021 12:39:34
that is already really good. I dont think you'll get much faster than that. But for your task you might want to look into different solutions, as you dont require physics

##### h.sciascia 02/24/2021 12:40:37
Yes I will try ROS , maybe it's better for my app

##### Luftwaffel [Moderator] 02/24/2021 12:41:01
just rviz or moveit could work

##### h.sciascia 02/24/2021 12:41:37
Ok I will try them, thanks a lot ! 🙂

##### Luftwaffel [Moderator] 02/24/2021 12:42:03
[https://github.com/BerkeleyAutomation/python-fcl](https://github.com/BerkeleyAutomation/python-fcl)


or you give this a look

##### h.sciascia 02/24/2021 12:43:36
Ok it's noted , thanks !

##### John520 02/24/2021 15:17:48
Hi `@Olivier Michel`, I'd like to follow up on the question I asked yesterday. In order to run the imported vehicle, I will need to add joints and motors to the wheels. In the tutorial [https://cyberbotics.com/doc/guide/tutorial-6-4-wheels-robot?tab-language=c++](https://cyberbotics.com/doc/guide/tutorial-6-4-wheels-robot?tab-language=c++), a controller is used to control the motors. My question is, could I use ROS to control the motors? Thank you!

##### Olivier Michel [Cyberbotics] 02/24/2021 15:20:48
Yes, of course. There are many online tutorials explaining how to use ROS and ROS 2 with Webots.

##### John520 02/24/2021 15:30:08
`@Olivier Michel` Thanks a lot. I guess I would need to follow this [https://cyberbotics.com/doc/reference/motor?tab-language=ros](https://cyberbotics.com/doc/reference/motor?tab-language=ros) to control the motors. I used ROS to control the truck you provides in Webots successfully before.

##### yanan 02/24/2021 16:15:29
Hi there, I would like to generate a  dataset by frequently setting the position of tesla in the environment,  I am using this codes which dose not work and it always report : initializer element is not constant. is there anything wrong with my first line of code?
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/814168637875027998/unknown.png)
%end

##### Olivier Michel [Cyberbotics] 02/24/2021 16:24:00
It looks good to me. The error is probably somewhere else...

##### Bitbots\_Jasper [Moderator] 02/24/2021 16:29:55
can you post a screenshot of the scene tree (the list of elements on the left in webots)?

##### yanan 02/24/2021 16:39:12
Hi, thanks for your replies. there are two robots and two controllers, one is Mavic2pro the another is TeslaModel3.
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/814174605505593374/unknown.png)
%end


in tesla controller, I put something like this, the compiling is OK. but it dose not change the position of telsa
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/814174846929600582/unknown.png)
%end

##### Bitbots\_Jasper [Moderator] 02/24/2021 16:40:33
you need to set the DEF of the TeslaModel3 to be able to access it, click on the tesla in the scene tree and below there should be a text field


set that to TeslaModel3


or you can use wb\_supervisor\_node\_get\_self

##### yanan 02/24/2021 16:44:41
thanks a lot. it works. I forget to put TeslaModel3 as the DEF although the in scene tree it displays 'TeslaModel3', which is a little bit confusing

##### Bitbots\_Jasper [Moderator] 02/24/2021 16:45:28
yeah, what you are seeing is the name of the robot as defined in the PROTO file of the robot

##### yanan 02/24/2021 16:46:31
understood.  thanks

##### Bitbots\_Jasper [Moderator] 02/24/2021 16:49:37
good to hear it works 👍

##### yanan 02/24/2021 17:47:39
sorry to bother again. is there any way to share variables or communication between two controllers, such as mavic2pro and Tesla. Actually, I checked the Emitter and Receiver, it seems like it is for robots,  not robot and vehicle?

##### Olivier Michel [Cyberbotics] 02/24/2021 18:14:00
A vehicle in Webots is a Robot. So, it should work with Emitter/Receiver.

##### yanan 02/24/2021 18:14:46
thanks, I will have a try


just a feedback,  you are right, it works.  thanks

##### Kirlin 02/24/2021 22:06:53
Hello everyone, I am migrating the simulation of my robot project to Webots and, to be as close to reality as possible, I would like to use a controller based on ros topics, not services like the premade controller on Webots\_ros package. I tried use the Custom Ros Controller tutorials on the webots website itself, but I didn't get any results in compiling webots and ros together. Do you suggest any tutorial or material bigger or more complete than the site?

##### Darko Lukić [Cyberbotics] 02/25/2021 07:51:07
Hello, here is a custom ROS controller example:

[https://github.com/cyberbotics/webots\_ros/blob/master/scripts/ros\_python.py](https://github.com/cyberbotics/webots_ros/blob/master/scripts/ros_python.py)



If possible, I would highly recommend you to go with ROS 2, as our ROS 2 bridge creates a ROS 2 interface that is much closer to one on the real robots + the behavior is highly customizable:

[https://github.com/cyberbotics/webots\_ros2](https://github.com/cyberbotics/webots_ros2)

##### dA$H 02/25/2021 13:12:46
Hi.

How can i stop conveyorBelt in python?

##### Darko Lukić [Cyberbotics] 02/25/2021 13:20:15
You can use Supervisor to get the speed field and set it to 0:

[https://cyberbotics.com/doc/reference/supervisor](https://cyberbotics.com/doc/reference/supervisor)

##### Krish 02/25/2021 13:44:36
Is there a way that I can put mirrors in Webots?

I am planning to build a a kaleidoscope.



I know it sounds weird, but I just wanted to give it a try.

##### Darko Lukić [Cyberbotics] 02/25/2021 13:46:45
[https://cyberbotics.com/doc/guide/object-mirror](https://cyberbotics.com/doc/guide/object-mirror)

##### yanan 02/25/2021 14:26:36
Hi all, I am trying to move the vehicle into different postions in a loop, do you know why it only shows the last position I set?
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/814503623235993620/unknown.png)
%end

##### Darko Lukić [Cyberbotics] 02/25/2021 14:32:16
You cannot use `sleep(1)` you need `wb_robot_step(1024)` instead

##### yanan 02/25/2021 14:41:45
wow, you are right. it works.  thank you so much.

##### dA$H 02/25/2021 14:42:12
I am trying to get conveyorBelt speed but it's not work
%figure
![conveyor.jpg](https://cdn.discordapp.com/attachments/565154703139405824/814507547192852580/conveyor.jpg)
%end

##### yanan 02/25/2021 14:43:17
you saved my afternoon. danke schoen

##### Darko Lukić [Cyberbotics] 02/25/2021 14:44:35
If you use `getFromDef` then you have to match DEF of the ConveyorBelt

##### Chernayaten 02/25/2021 14:45:06
You probably need to do getSFFloat  to get the speed, and you should also be doing that inside the while, otherwise the value will not update

##### Darko Lukić [Cyberbotics] 02/25/2021 14:46:18

%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/814508581600755724/unknown.png)
%end


Also this. Thanks `@Chernayaten`

##### dA$H 02/25/2021 15:18:14
thank you
%figure
![empty_00_00_00-00_00_30.gif](https://cdn.discordapp.com/attachments/565154703139405824/814516615411793970/empty_00_00_00-00_00_30.gif)
%end

##### Le Fromage 02/25/2021 15:28:24
does anyone know how to set the point of rotation for a shape?

##### Luftwaffel [Moderator] 02/25/2021 15:28:55
what do you mean by point of rotation?

##### Le Fromage 02/25/2021 15:31:37
im pretty new, im basically trying to make 4 legs for an animal of some sort


so the rotational motor would need to be at the top of the leg

##### Luftwaffel [Moderator] 02/25/2021 15:34:01
a motor is always inside of hingejoint. And a hingejoint connects two Solids


Solid > children > hingejoint > endPoint Solid


the solids have translation and rotation fields, where you can position them


to make things easier, make sure that the translation of the endpoint solid is the same as the anchor of the hingejoint


[https://cyberbotics.com/doc/reference/hingejoint?tab-language=python](https://cyberbotics.com/doc/reference/hingejoint?tab-language=python)

##### Le Fromage 02/25/2021 15:39:18
thanks a bunch seems to work now

##### Steven37 02/25/2021 16:01:29
I am wanting to use the camera to analyze the colour of the image. I have coded it based on a sample camera code in this link: [https://github.com/cyberbotics/webots/blob/master/projects/samples/devices/controllers/camera/camera.c](https://github.com/cyberbotics/webots/blob/master/projects/samples/devices/controllers/camera/camera.c). But I don't understand why when I apply it to my project I get this error.
%figure
![3Y_project_cameraError.JPG](https://cdn.discordapp.com/attachments/565154703139405824/814527499685068880/3Y_project_cameraError.JPG)
%end

##### DDaniel [Cyberbotics] 02/25/2021 16:04:52
do you initialize (blue = 0) the variable blue somewhere before these lines?

##### Bitbots\_Jasper [Moderator] 02/25/2021 16:14:03
If I have multiple simulations running at the same time, I can use the environment variable WEBOTS\_PID to tell an external controller to which simulation it should connect. I am running a python external controller. Does someone by chance know if the state of this environment variable is relevant at the time of import or at the time of instantiation of the Robot object?

##### alejanpa17 02/25/2021 16:24:45
Hi, is it possible to give an object a malleability property?


And other question, is it possible to limit the render distance in order to optimize the simulation performance?

##### Darko Lukić [Cyberbotics] 02/25/2021 16:27:10
You can start a Webots instance and external controller pair with the same `WEBOTS_TMPDIR`:

[https://cyberbotics.com/doc/guide/running-extern-robot-controllers#running-extern-robot-controller-with-the-snap-version-of-webots](https://cyberbotics.com/doc/guide/running-extern-robot-controllers#running-extern-robot-controller-with-the-snap-version-of-webots)



That way you are sure multiple Webots instance/controller pairs are isolated from each other.

##### Steven37 02/25/2021 16:31:32
yes, i have for all green, blue and red. I don't know why only green is right but the other two are wrong.

##### Darko Lukić [Cyberbotics] 02/25/2021 16:31:58
No, Webots is a rigid body physics simulator


No, but check this:

[https://www.cyberbotics.com/doc/guide/speed-performance](https://www.cyberbotics.com/doc/guide/speed-performance)



The performance improvements can be done in another ways

##### DDaniel [Cyberbotics] 02/25/2021 16:38:33
`@Steven37` hard to say why like this, can you provide a snippet of the code?

##### Steven37 02/25/2021 16:44:42
This is my controller. The code may quite long but I hope you can help me check it out as I don't know where I could  go wrong. Thank you!
> **Attachment**: [controllerForTesting.c](https://cdn.discordapp.com/attachments/565154703139405824/814538375361069106/controllerForTesting.c)

##### BeastFromTheEast 02/25/2021 16:48:43
Hi, I am having issues with the compiler as I keep recieving " No rule to make target 'build/release/BotClass.h', needed by 'build/release/dez1.exe'.  Stop." I added the extra files I wanted to be compiled to the makefile already

##### DDaniel [Cyberbotics] 02/25/2021 16:54:41
`@Steven37` Line 112 bracket shouldn't be there and you're missing one on line 176

##### Steven37 02/25/2021 17:02:10
thank you so now that error gone


However, I want to read the color and detect the box and the tree as shown in my video but there isn't anything printed in my console. Can anyone show me why, please?
> **Attachment**: [3Y\_cameraTesting.mp4](https://cdn.discordapp.com/attachments/565154703139405824/814543350560194641/3Y_cameraTesting.mp4)

##### dA$H 02/25/2021 17:09:21
how can i see the value of "range Slider" in cyberbotic website?
%figure
![range.jpg](https://cdn.discordapp.com/attachments/565154703139405824/814544579268313138/range.jpg)
%end

##### Vangiel 02/25/2021 18:27:17
Hello, is there any implementation to check if a collision between two entities has occurred? (Using python)

##### Darko Lukić [Cyberbotics] 02/25/2021 19:01:29
You can use the touch sensor:

[https://cyberbotics.com/doc/reference/touchsensor](https://cyberbotics.com/doc/reference/touchsensor)



Alternatively, you can add a Physics plugin:

[https://www.cyberbotics.com/doc/reference/callback-functions#int-webots\_physics\_collidedgeomid-dgeomid](https://www.cyberbotics.com/doc/reference/callback-functions#int-webots_physics_collidedgeomid-dgeomid)

and send details about the collision to your Python controller.

##### yanan 02/25/2021 21:57:58
Hi, my Emitter sends a series of packs, how can my Receiver only get the latest pack instead of the next one?

##### Vangiel 02/26/2021 08:56:18
Thank you, I will give it a try

##### yanan 02/26/2021 09:33:09
Hello, I am using two controllers, one for Mavic2Pro with an emitter, the other for TeslaModel3 with a receiver.  The Tesla is receiving the position information from the drone. However, it seems like the receiver can not real-timely get the latest info from the emitter, it can only get a pack one by one hence resulting in a delay to get the latest info from the emitter.

##### Darko Lukić [Cyberbotics] 02/26/2021 09:34:07
How do you receive the messages?

##### yanan 02/26/2021 09:35:11

%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/814792671423758346/unknown.png)
%end



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/814792782798913546/unknown.png)
%end

##### Darko Lukić [Cyberbotics] 02/26/2021 09:39:40
If you send N messages in the single step you receive only 1?

##### yanan 02/26/2021 09:40:45
yeah, that's true.  and that 1 is not latest


is there any synchronization mechanism between two controllers using emitter and receiver?  or do I have to use same amount of sending packs and receiving packs?

##### Darko Lukić [Cyberbotics] 02/26/2021 09:43:50
That is strange. Can you send us a minimal example?


>  or do I have to use same amount of sending packs and receiving packs?

But you are receiving the packets in the loop which means that you should receive all the packets you have sent.

##### yanan 02/26/2021 09:50:13
this is a simplified version of two controllers
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/814796456417820692/unknown.png)
%end


it might also because the emitting frequency is different from receiver's.

##### Darko Lukić [Cyberbotics] 02/26/2021 09:51:39
But you are sending only one message per step


Can you send a project file (including the world file), so I can test with the same configuration

##### yanan 02/26/2021 09:54:10
Sure,  much appreciated for that.


[https://uob-my.sharepoint.com/:u:/g/personal/yl17692\_bristol\_ac\_uk/EfF90tkuB4xIr6Vq4wXFvW4Bor\_inj1V4Rqj7udHVXFR3Q?e=qyv4Jd](https://uob-my.sharepoint.com/:u:/g/personal/yl17692_bristol_ac_uk/EfF90tkuB4xIr6Vq4wXFvW4Bor_inj1V4Rqj7udHVXFR3Q?e=qyv4Jd)


I am using Windows 10 with the latest version of Webots

##### Darko Lukić [Cyberbotics] 02/26/2021 10:13:10
Inside of `while (wb_receiver_get_queue_length(receiver) > 0)` you are essentially doing:

```
int step = 3;
double rot_step = M_PI/4;
for(int i = -step; i <= step; i++ )
{
  for(int j = -step; j <= step; j++)
  {
     for(float r = 0; r <= M_PI; r +=rot_step)
     {
          wb_robot_step(64);
     }
  }
}
```


You have a lag of like 300 steps per single drone step

##### yanan 02/26/2021 10:39:06
thanks for pointing that, which is very helpfu;

##### h.sciascia 02/26/2021 10:43:36
Hello !

How can I get a 4x4 matrix describing the rotation and translation of the end-effector of URE10 ?

where R is the 3×3 submatrix describing rotation and T is the 3×1 submatrix describing translation. (I want to do some forward kinematics using Denavit Hartenberg)
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/814809890202845204/unknown.png)
%end

##### Luftwaffel [Moderator] 02/26/2021 10:56:20
`@h.sciascia` what language are you using?

##### h.sciascia 02/26/2021 10:56:28
Python

##### Luftwaffel [Moderator] 02/26/2021 10:56:33
use numpy then

##### h.sciascia 02/26/2021 10:57:09
I cannot get it with a node ? Like a GPS ?

##### Darko Lukić [Cyberbotics] 02/26/2021 10:57:14
[https://cyberbotics.com/doc/reference/supervisor#wb\_supervisor\_node\_get\_position](https://cyberbotics.com/doc/reference/supervisor#wb_supervisor_node_get_position)

##### Luftwaffel [Moderator] 02/26/2021 10:57:18
take a look at this python module I made for getting relative positions
> **Attachment**: [get\_relative\_position.py](https://cdn.discordapp.com/attachments/565154703139405824/814813337358434325/get_relative_position.py)


self.ee\_pose[:3,:3] = target\_rot

self.ee\_pose[:3,3] = target\_pos


you can fill a 4x4 array like this

##### h.sciascia 02/26/2021 10:59:00
Thanks, I will try the two solutions ! 🙂

##### Luftwaffel [Moderator] 02/26/2021 10:59:14
if you want a working ik / fk solution, let us know 😉

##### h.sciascia 02/26/2021 10:59:42
Yes I find one with PyRobotics for FK

##### Luftwaffel [Moderator] 02/26/2021 10:59:57
do you need FK only, or also IK?

##### Steven37 02/26/2021 11:29:22
Is it possible for me to use supervisor to remove an object and adding a new object to the same position?

##### Luftwaffel [Moderator] 02/26/2021 11:29:36
yes


remove and insert Field


[https://cyberbotics.com/doc/reference/supervisor?tab-language=python#wb\_supervisor\_field\_remove\_mf](https://cyberbotics.com/doc/reference/supervisor?tab-language=python#wb_supervisor_field_remove_mf)

##### Steven37 02/26/2021 11:39:38
If possible, is there any sample code on how to use those functions to do that?

##### Luftwaffel [Moderator] 02/26/2021 12:03:35
this is an example to spawn a node in a field
> **Attachment**: [spawn\_target.py](https://cdn.discordapp.com/attachments/565154703139405824/814830020979064832/spawn_target.py)

##### h.sciascia 02/26/2021 12:32:08
FK only, I use IKPY for IK

##### Luftwaffel [Moderator] 02/26/2021 12:37:57
ikpy has fk


ikpy for IK is really slow and has less than ideal results


I made a generik ikpy controller a while ago
> **Attachment**: [generic\_inverse\_kinematic\_.zip](https://cdn.discordapp.com/attachments/565154703139405824/814840204552699934/generic_inverse_kinematic_.zip)


you should be able to simple add it, and it works


has fk included too

##### h.sciascia 02/26/2021 12:44:32
oh ok... I will try with your's


thanks !

##### Bitbots\_Jasper [Moderator] 02/26/2021 13:35:35
Thanks for your response, I have not used `WEBOTS_TMPDIR` but again the PID and I figured out the response to my question through some testing. The environment variable `WEBOTS_PID` is read at the time when the robot controller is created (in python that is when you do `r = Robot()`) and not at import time. The same also holds for `WEBOTS_ROBOT_NAME`.

The original confusion came from rospy checking the parameter `ROS_NAMESPACE`at the time when it is imported and not at the time when a node is initialized.

##### SirLambda 02/26/2021 14:46:13
Hello, is it possible that I use different contact materials or textures for certain vertices in an IndexedFaceSet for example?

##### Olivier Michel [Cyberbotics] 02/26/2021 14:49:24
No: you will have to create two IndexedFaceSet nodes for that.

##### SirLambda 02/26/2021 14:52:43
Ok, thank you for the quick answer 🙂

##### Icy\_Flurry 02/26/2021 14:58:21
what units do the pioneer 3dx distance sensors use?

##### Darko Lukić [Cyberbotics] 02/26/2021 15:31:18
They use the following lookup table:

```
lookupTable [
  0 1024 0.01,
  5 0 0.01
]
```

See more about lookup tables here:

[https://cyberbotics.com/doc/reference/distancesensor#lookup-table](https://cyberbotics.com/doc/reference/distancesensor#lookup-table)

##### Icy\_Flurry 02/26/2021 15:33:39
thanks, ill look at that!


i dont quite understand how i would use that to convert the readings into mm/cm/m

##### Darko Lukić [Cyberbotics] 02/26/2021 17:20:54
The lookup table emulates the raw readings from the sensor


To get the actual distance from the particular lookup table you should do something like this:

```
distance_in_meters = 5 - (5 * value_from_sensor) / 1024
```

##### John520 02/26/2021 23:24:02
Hi guys, I am trying to import a harvester into Webots. I imported the green body and the wheels separately. And I follow the tutorial [https://cyberbotics.com/doc/guide/tutorial-6-4-wheels-robot](https://cyberbotics.com/doc/guide/tutorial-6-4-wheels-robot) to set up the HingeJoints between wheels and the body. But when I run the simulation, the harvester does not seem right. Could you please see the video and advise me? Thanks a lot!
> **Attachment**: [Kazam\_screencast\_00006.mp4](https://cdn.discordapp.com/attachments/565154703139405824/815001259899486269/Kazam_screencast_00006.mp4)

##### tbt24 02/27/2021 04:09:19
Hi, i was just wondering if anyone could tell me how to get a light sensor to differentiate between a green and a red spotlight

##### Krish 02/27/2021 06:14:10
Did you try performing image processing by a camera provided in the robot(if any) and using color detection algorithms, differentiate between colors.

##### Olivier Michel [Cyberbotics] 02/27/2021 07:57:14
Did you try to set a `colorFilter` to the `LigthSensor` node? [https://www.cyberbotics.com/doc/reference/lightsensor](https://www.cyberbotics.com/doc/reference/lightsensor)

##### tbt24 02/27/2021 11:30:48
Unfortunately I only have a light sensor available to me

##### Krish 02/27/2021 11:31:59
What does a light sensor actually do?

I have played with color sensors before, but not a light sensor.

##### tbt24 02/27/2021 11:35:30
The light sensor will just return the intensity of light. Then, when a colour filter is applied, ideally the light intensity will be multiplied by some value between 0 and 1 for RGB depending on the colour. However, the light sensor currently does not detect an 'LED' spotlight in my world

##### Olivier Michel [Cyberbotics] 02/27/2021 12:34:55
What about using two light sensors? One with a red filter and the other one with a green filter?

##### moeonethego 02/28/2021 12:23:52
If anybody can point me to the problem I've made a tracked robot , and added the left track with 7 wheels, defined the bounding Objects to include the wheels, but I get a strange shape as shown :
%figure
![strange-track-belt.JPG](https://cdn.discordapp.com/attachments/565154703139405824/815559899102576711/strange-track-belt.JPG)
%end


it seems like the problem with the animatedGeometry , or the definition of the bounding objects. waiting for your kind reply

## March

##### mayank.kishore 03/01/2021 01:52:56
Is it possible to base64 the camera.getImage() function?

##### Stefania Pedrazzi [Cyberbotics] 03/01/2021 06:47:29
Did you check that the wheels are all defined in the correct order?

As explained in the documentation the wheels have to be defined in clockwise order starting from the one with the smallest x-axis component:

[https://www.cyberbotics.com/doc/reference/track#geometries-animation](https://www.cyberbotics.com/doc/reference/track#geometries-animation)


`Camera.getImage()` returns the image raw data. In you controller program you can encode in base64 the raw data returned by `Camera.getImage()` using any image library specific to your programming language.

##### moeonethego 03/01/2021 12:01:56
thanks Stefania , this was the problem as you mentioned. , the order wasn't right
%figure
![track_belt_convex.png](https://cdn.discordapp.com/attachments/565154703139405824/815916767729156156/track_belt_convex.png)
%end

##### Krish 03/01/2021 12:04:30
The representation of the wheels looks awesome

##### moeonethego 03/01/2021 12:53:46
that's straight from the documentation link : [https://www.cyberbotics.com/doc/reference/track#geometries-animation](https://www.cyberbotics.com/doc/reference/track#geometries-animation)

##### Krish 03/01/2021 12:58:32
Oh 😂

##### h.sciascia 03/01/2021 14:53:44
Hello ! Where can I find the src/webots/engine/WbSimulationCluster.cpp in windows ? I would like to apply the updates for this issue [https://github.com/cyberbotics/webots/issues/2584](https://github.com/cyberbotics/webots/issues/2584)

##### John520 03/01/2021 14:58:13
Hi guys, I am trying to import a harvester into Webots. I imported the green body and the four black wheels separately. And I follow the tutorial [https://cyberbotics.com/doc/guide/tutorial-6-4-wheels-robot](https://cyberbotics.com/doc/guide/tutorial-6-4-wheels-robot) to set up the HingeJoints between wheels and the body. But when I run the simulation, the harvester does not seem right. Could you please see the short video and advise me? Thanks a lot!
> **Attachment**: [Kazam\_screencast\_00006.mp4](https://cdn.discordapp.com/attachments/565154703139405824/815961131314839582/Kazam_screencast_00006.mp4)

##### Stefania Pedrazzi [Cyberbotics] 03/01/2021 14:58:33
It is not enough to change the file, but you need to recompile Webots (clone the GitHub repo, modify the source file and compile Webots).

Otherwise you can download the latest nightly build of R2021a-rev1 that already contains the fix:

[https://github.com/cyberbotics/webots/releases/tag/nightly\_26\_2\_2021](https://github.com/cyberbotics/webots/releases/tag/nightly_26_2_2021)

##### h.sciascia 03/01/2021 14:59:11
Ok i will do that ! thanks !

##### Stefania Pedrazzi [Cyberbotics] 03/01/2021 15:05:00
From the video, it seems that the `JointParameter.anchor` may not be correctly aligned with the center of the wheel.

Usually, this value should correspond to the "endPoint" `Solid.translation`.

The joint axes can be visualized in the 3D scene by enabling the "Optional Rendering" > "Show Joint Axes" option  in the "View" menu. It may also be needed to increase the `WorldInfo.lineScale` value (for example to 2).

##### h.sciascia 03/01/2021 15:29:06
Not working

I have an URDF robot with multiple geometry for a joint and I go collide even if my physics plugin is intended to disable collisions

And now all my simulations collide 😢

##### John520 03/01/2021 15:33:07
`@Stefania Pedrazzi` Thank you very much for your help. I made the JointParameter.anchor and the Solid.translation the same. But I am seeing the Joint Axes now, I think I messed up the coordinates. I am trying to fix it and will let you know later. Thank you again!

##### Stefania Pedrazzi [Cyberbotics] 03/01/2021 15:40:51
Are you ignoring all the collisions or just some of them? Are you sure that the bodies to be ignored are detected correctly?

##### h.sciascia 03/01/2021 15:45:51
Hm I reload the world and the problem disapear , so works very well well !


Thanks a lot for this update !! 🥳

##### John520 03/01/2021 17:20:01
Hi `@Olivier Michel`, when I am running the simulation, the positions of axis of the wheels change. Could you please see the short video and advise me? Thank you very much.
> **Attachment**: [Kazam\_screencast\_00010.mp4](https://cdn.discordapp.com/attachments/565154703139405824/815996817367498812/Kazam_screencast_00010.mp4)

##### Bitbots\_Jasper [Moderator] 03/01/2021 17:38:10
I would like to start two controllers for two robots in the same process. Is there a way to do this or do they have to be separate processes? I currently get this error message: `Only one instance of the Robot class should be created`

##### Olivier Michel [Cyberbotics] 03/01/2021 18:02:12
This is unfortunately not possible.

##### Bitbots\_Jasper [Moderator] 03/01/2021 18:03:09
I was talking about external controllers


Thanks for your answer, we will do some inheritance magic then 😋

##### Vangiel 03/01/2021 18:30:13
Hello, anyone knows how can I access the lidar sensor in the tiago iron robot using python? Thanks.

##### Bitbots\_Jasper [Moderator] 03/01/2021 18:31:26
`robot.getDevice(lidar_sensor_name)`

##### Vangiel 03/01/2021 18:33:04
yes, I tried that, but because it is a proto it says that class Node doesn't have getDevice method. It seems that it doesn't recognise as a Robot node

##### Bitbots\_Jasper [Moderator] 03/01/2021 18:33:51
you need to do something like `robot = Robot()` in the beginning


if you are using a supervisor like `s = Supervisor()` then you need to call the function `getDevice`on the supervisor

##### Vangiel 03/01/2021 18:36:53
The thing is that I am using a robot supervisor node (without shape or anything) to control the whole simulation. So I get the robot node with the lidar sensor from the supervisor. For making it work I should call the getDevice in the controller of the robot with the lidar? Can't I do it from the supervisor robot?

##### Bitbots\_Jasper [Moderator] 03/01/2021 18:38:26
From your explanation it is not clear to me if you are using two different controllers or one controller with supervisor privileges

##### Vangiel 03/01/2021 18:39:01
I am using two controllers, one for the robot with the lidar and another one with supervisor privileges


And what I want is to get the lidar sensor from the one with supervisor privileges if possible

##### Bitbots\_Jasper [Moderator] 03/01/2021 18:39:48
can you post the code of the robot controller, private message is also ok if you dont want to share it publicly

##### Vangiel 03/01/2021 18:40:08
sure, give me a moment

##### Bitbots\_Jasper [Moderator] 03/01/2021 18:41:28
ah, ok, thats something different than I expected, I have an idea on how this could work but I need to test it, give me a moment.

##### Vangiel 03/01/2021 18:43:10
ok perfect, if you still need the code I can send it to you.

##### Bitbots\_Jasper [Moderator] 03/01/2021 18:49:36
I tested how I think it could have worked, but unfortunately it did not. I think devices are only accessible from the robots own controller and I am not aware that there is any method to do otherwise.


do you need to have the actual sensor data in the supervisor controller or can you do the required calculations in the robot controller and pass them to the supervisor controller using either a emitter receiver combo or the `customData` field?

##### Vangiel 03/01/2021 18:52:38
Ok thanks for the help. I can try to do the calculations in the robot controller. I know about the emitter receiver but what is the customData field?

##### Bitbots\_Jasper [Moderator] 03/01/2021 18:54:30
they explain it better than I could: [https://cyberbotics.com/doc/reference/robot#field-summary](https://cyberbotics.com/doc/reference/robot#field-summary)

##### Saud 03/01/2021 18:57:17
Hi, I want to use a lidar on the Mavic. but since it does not have one I have imported a Sick Lidar in the bodyslot but its quite big. Any Other suggestions ?

##### Bitbots\_Jasper [Moderator] 03/01/2021 18:58:36
have you checked here? [https://cyberbotics.com/doc/guide/lidar-sensors](https://cyberbotics.com/doc/guide/lidar-sensors)

##### Saud 03/01/2021 18:59:07
yes so i have decided to use SICK LMS 291

##### Vangiel 03/01/2021 18:59:45
Thank you very much

##### Saud 03/01/2021 19:00:13
Like i did not realise that this is huge. 😂
%figure
![Screenshot_2021-03-01_at_6.59.58_pm.png](https://cdn.discordapp.com/attachments/565154703139405824/816022032663314532/Screenshot_2021-03-01_at_6.59.58_pm.png)
%end


any way of scalling it down or something ?

##### Bitbots\_Jasper [Moderator] 03/01/2021 19:02:15
[https://github.com/cyberbotics/webots/blob/master/projects/devices/hokuyo/protos/HokuyoUtm30lx.proto](https://github.com/cyberbotics/webots/blob/master/projects/devices/hokuyo/protos/HokuyoUtm30lx.proto) is about 6x6x8.7cm large

##### Saud 03/01/2021 19:03:05
ok thanks let me have a look at that


i am not the greatest at webots so do excuse my wrongness if it is but i added the lidar and I am trying to use it in code. C++. I enabled the other devices using this but this one does not work. I am gonna guess because the others were already in mavic. But i have added the lidar to the bodySlot. Did it do this in a wrong way?
%figure
![Screenshot_2021-03-01_at_7.17.28_pm.png](https://cdn.discordapp.com/attachments/565154703139405824/816026397625679883/Screenshot_2021-03-01_at_7.17.28_pm.png)
%end

##### Bitbots\_Jasper [Moderator] 03/01/2021 19:28:06
for getting devices from the robot, you usually use the methods described here: [https://cyberbotics.com/doc/reference/robot?tab-language=c++#wb\_robot\_get\_device](https://cyberbotics.com/doc/reference/robot?tab-language=c++#wb_robot_get_device)


so you would have something like:

```Lidar *l;
l = robot->getLidar(lidar\_name)
```


or try:

`Lidar *l = new Lidar(lidar_name`


but i dont know if the second one works

##### Saud 03/01/2021 19:30:38
oh yes right ok let give that a go thanks

##### Welsh\_dragon64 03/01/2021 19:50:43
`@Bitbots_Jasper` `@Luftwaffel` I tried implementing opencv on webots using python on the robotis darwin op2. No errors were presented on the code , although the issue i am facing is that it is not detecting the robotis camera but instead it detects my default laptop webcam
%figure
![problem.PNG](https://cdn.discordapp.com/attachments/565154703139405824/816034742113271849/problem.PNG)
%end



> **Attachment**: [opencv\_code.txt](https://cdn.discordapp.com/attachments/565154703139405824/816034897868881920/opencv_code.txt)


this is the attached code

##### Bitbots\_Jasper [Moderator] 03/01/2021 19:54:26
yes because you told it to do so in line 56 and 62

##### Welsh\_dragon64 03/01/2021 19:55:40
can you provide me your insight on this?

i am still new to webots and opencv

##### Bitbots\_Jasper [Moderator] 03/01/2021 19:55:45
you want to use camera.getImage() instead of that

##### Welsh\_dragon64 03/01/2021 19:56:02
is that reserved variable?

##### Bitbots\_Jasper [Moderator] 03/01/2021 20:01:45
you create your camera in line 40 and enable it in line 41, then you need to use the camera object in your while loop to get the image using `img = camera.getImage()`


the webots image is `BGRA`encoded though


I don't know what you mean by reserved variable.

##### Welsh\_dragon64 03/01/2021 20:09:29
I dont understand where to  place img = camera.getImage() in the while loop.

##### Bitbots\_Jasper [Moderator] 03/01/2021 20:10:09
instead of line 62

##### Welsh\_dragon64 03/01/2021 20:11:29
got this error in line 62, after i modified it.
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/816039965699211294/unknown.png)
%end

##### Bitbots\_Jasper [Moderator] 03/01/2021 20:13:15
too many values to unpack means that you expect more return values than there are, you say you want 2 values, success and img but camera.getImage() only returns one value

##### Welsh\_dragon64 03/01/2021 20:15:51
I removed the success so it can return one value and now i got this new error.
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/816041065470885908/unknown.png)
%end

##### Bitbots\_Jasper [Moderator] 03/01/2021 20:17:24
you need to somehow transform the array of pixel data into a opencv image but I dont know how to do that


but you can check the documentation of the webots to see what its format is [https://cyberbotics.com/doc/reference/camera?tab-language=python#wb\_camera\_get\_image](https://cyberbotics.com/doc/reference/camera?tab-language=python#wb_camera_get_image)


scroll a bit down to the python note from the link

##### Luftwaffel [Moderator] 03/02/2021 11:25:45
`@Welsh_dragon64`

`def getFrame():

    data = camera.getImage()

    frame = numpy.frombuffer(data, numpy.uint8).reshape((camera.getHeight(), camera.getWidth(), 4))

    return frame`



Try this code


this should be a valid cv2 frame / image

##### bingdong 03/02/2021 12:47:48
Hi, I was following the export tutorial for blender files on GitHub. Could someone let me know how I can access the RotationalMotor panel to move individual motors during simulation? Closed it and can't seem to find it now.
%figure
![Screenshot_20210302-181104__01.jpg](https://cdn.discordapp.com/attachments/565154703139405824/816290698084352010/Screenshot_20210302-181104__01.jpg)
%end

##### Darko Lukić [Cyberbotics] 03/02/2021 13:16:21
Double click on the robot


Make sure you are running the simulation and that your robot has a controller (it can be `void`).

##### bingdong 03/02/2021 14:19:39
`@Darko Lukić` Thanks a bunch!

##### Callum98 03/02/2021 15:32:22
Hey guys, I've got my robot with a camera that recognises the colour red but I want it to send a message, for example 'Red object ahead', when it comes into its vision. Is this possible?

##### Chernayaten 03/02/2021 15:46:01
You can use an emitter and a receiver

[https://www.cyberbotics.com/doc/reference/emitter](https://www.cyberbotics.com/doc/reference/emitter)

[https://www.cyberbotics.com/doc/reference/receiver](https://www.cyberbotics.com/doc/reference/receiver)

##### Callum98 03/02/2021 16:03:37
Im looking at the sample camera robot and that does it with a camera but Im using java so having difficulty transferring it across

##### Chernayaten 03/02/2021 16:08:35
In the camera.wbt? That robot is not sending a message somewhere, it is simply printing it

##### Callum98 03/02/2021 16:09:37
Oh ok, I still don't see an emitter or receiver on the robot

##### Chernayaten 03/02/2021 16:11:21
The robot is not sending a message that can be received by someone else. It is simply printing it. What exactly are you having an issue with?

##### Callum98 03/02/2021 16:13:05
Yeah that's what I want. I will send a picture one sec but I want my robot to print out 'Red object detected' as there is a red object being outlined by the camera



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/816342416470573056/unknown.png)
%end


So since the robot detects that red object I want it to print out saying its found it

##### Chernayaten 03/02/2021 16:15:09
> if (redObjectDetected): print("Red object ahead")

If you want to print it why don't you print it then?

##### Callum98 03/02/2021 16:15:56
Is that the only line of code needed? Sorry I dont really know how to code thats the problem 😦

##### Chernayaten 03/02/2021 16:17:27
My guess is that you're asking the wrong thing and you want to know how to detected the red object, not how to print a message saying you did

##### Callum98 03/02/2021 16:19:02
Its already detected that's why there's a box around it

##### Chernayaten 03/02/2021 16:19:27
The lines of code that do this in camera.wbt are 120-139. The wb\_camera\_image\_get\_red (and blue/green) can be found here and you can choose the function in your language: [https://cyberbotics.com/doc/reference/camera?tab-language=c#wb\_camera\_image\_get\_red](https://cyberbotics.com/doc/reference/camera?tab-language=c#wb_camera_image_get_red)

##### John520 03/02/2021 16:20:24
Hi guys, I am working on a HingeJoint but am having an issue that some parameter values change by themselves when the simulation starts.


Please take a look at the below two figures. The translation and rotation of the endPoint Solid change after the simulation starts. So the robot cannot go straight because of this. The first figure shows the original setting, while the second one shows the values after the simulation starts.
%figure
![Kazam_screenshot_00016.png](https://cdn.discordapp.com/attachments/565154703139405824/816344257194754048/Kazam_screenshot_00016.png)
%end



%figure
![Kazam_screenshot_00017.png](https://cdn.discordapp.com/attachments/565154703139405824/816344294322339880/Kazam_screenshot_00017.png)
%end

##### Callum98 03/02/2021 16:21:58
Pk Ill have a look thank you man

##### Chernayaten 03/02/2021 16:22:00
If the object is already detected (make sure it detects the color as well and not just the object), then you can use a boolean variable to print your message

##### Callum98 03/02/2021 16:22:34
Ok sure thank you

##### Luftwaffel [Moderator] 03/02/2021 16:37:06
Take a look at this:

[https://cyberbotics.com/doc/reference/hingejoint?tab-language=python](https://cyberbotics.com/doc/reference/hingejoint?tab-language=python)


The axis and anchor is relative to the parent, so the translation and rotation of the endpoint Solid will change of course


Or at least, only rotating around the hingejoint axis

##### John520 03/02/2021 16:40:58
`@Luftwaffel` Thanks a lot for your explanation. Is it possible to make the translation of the endPoint Solid not change?

##### Luftwaffel [Moderator] 03/02/2021 16:41:50
it can be much easier to translate the parent to where you want it, and only translating the anchor and endPoint along the joint axis


in your case, only in x - direction

##### John520 03/02/2021 16:42:15
SInce other wheels have the same changes, the vehicle is not able to go straight.

##### Luftwaffel [Moderator] 03/02/2021 16:44:30
You can add Transforms or Solid nodes as a parent of the hingejoint


position them  xyz, where they should be (would be your current anchor and translation). Then you set the anchor to 0 0 0, and the translation to 0 0 0

##### John520 03/02/2021 16:48:49
`@Luftwaffel` I see, I am trying it. Thank you so much for your help! I really appreciate it.

##### Elizaveta\_Potemkina 03/02/2021 16:53:30
Hi guys,

I'm trying to select and place sensors on a robot that's meant to search for small blocks in an arena and go pick them up. Currently thinking of using ultrasonics to look for possible/clustered blocks, and then infrared readings while turning towards what it thinks is a block to actually get a bearing, because IR sensors seem to have a very small viewing angle at mid-range

My problem is, I don't understand why IR sensors are modelled to give an average distance reading with a gaussian weighting of the rays in Webots. Is that actually realistic to how an IR would work? I've looked at datasheets and I can't tell. I'm worried it would mess up the readings if blocks/a block and a wall are close in bearing but at different distances to the robot. Would it be reasonable to ignore the IR sensor presets on Webots and just model it to return the nearest distance with a small viewing angle?

##### Olivier Michel [Cyberbotics] 03/02/2021 17:36:33
No, IR sensors models in Webots are as realistic as possible. Because they reflect IR light, the return value depends on the amount of reflected light. If only one small area (represented by a few rays) reflects light, the measured value will be small, which is what you can observe in real IR sensors.


If you need the nearest value, you should set the type to "laser" or "sonar".

##### Elizaveta\_Potemkina 03/02/2021 17:39:05
I see. I've found a proto in the default Webots files for the exact IR I'd have access to IRL for this project. (Sharp GP2Y0A02YK0F). It's made by the manufacturer, and I can see that it's modeled as having only 1 ray. Should I just chalk that up to the manufacturer being optimistic about their own product?

##### Olivier Michel [Cyberbotics] 03/02/2021 17:40:48
Having only one ray is probably a performance / accuracy compromise.


If you need more accuracy, you should add more rays, but keep the aperture small enough to match the datasheet of the real sensor.

##### Welsh\_dragon64 03/02/2021 17:42:57
[https://cyberbotics.com/doc/guide/using-python#libraries](https://cyberbotics.com/doc/guide/using-python#libraries)



i cant seem to find the file at the location provided by the link above.



It say its located at WEBOTS\_HOME/projects/web/visual\_tracking  where the sample simulation uses opencv and numpy packages using python,but i cant find it anywhere. Can someone help me with this.

##### Elizaveta\_Potemkina 03/02/2021 17:43:38
That's one of the irritating things, they don't list an angle range on the datasheet at all. Best I've found is buried in a technical details file for a bunch of similar products giving something like a 5 degree viewing angle at the mid-high end of its range. I guess that's something to consider programming in

##### Pancha 03/02/2021 21:09:17
I have a general question with regards to Webots. We have a rather complex series of links that would be too difficult/time consuming to simulate. These links would extend out from a movable object in a straight line (essentially floating in air due to internal structures/tension). These links can extend and retract. My question then is;

  - Is it possible to make shapes that has ``boundingObject`` set but not ``physics`` (set to NULL)? This allows for the object to interact with others (collide) but still floats in the air. The moment I set ``physics`` to ``Physics`` it falls to the ground, but without ``physics`` set it does not collide.

  - Is it possible to make some shapes/solids collide (links colliding with wall for instance) whereas some solid/shapes does not (links not colliding with eachother / allows for them to be located inside each other)?

I really do hope there's a solution here 🙂

##### Bitbots\_Jasper [Moderator] 03/02/2021 21:11:20
you can disable gravity in webots using a supervisor controller if that does not interfere with the rest of your simulation

##### Pancha 03/02/2021 21:13:46
Hmm, that would interfere with the rest of the simulation as it depends on gravity. I guess I can do it the "easy way" and just refrain from using bounding objects on them and instead have some fictive distance sensors on the links emulating a "hit" on walls for instance 🙂

##### Bitbots\_Jasper [Moderator] 03/02/2021 21:18:06
I think the file has moved here: [https://github.com/cyberbotics/webots/blob/master/projects/samples/robotbenchmark/visual\_tracking/controllers/visual\_tracking/visual\_tracking.py](https://github.com/cyberbotics/webots/blob/master/projects/samples/robotbenchmark/visual_tracking/controllers/visual_tracking/visual_tracking.py)

##### Laojiang 03/03/2021 07:46:51
when I linked Pycharm with webots, I can't use numpy in Pycharm. That's the error image.
%figure
![16147575711.png](https://cdn.discordapp.com/attachments/565154703139405824/816577349012815952/16147575711.png)
%end


And If I don't use numpy, I can use Pycharm to control webots normally. Anybody could help me?

##### Tosidis 03/03/2021 08:54:48
Hey, I am using a display attached to my robot's camera to draw rectangles around objects detected by a object detector. Can I somehow delete the rectangles ,drawn on one frame , the next frame? Draw rectangle seems permanent on the display module.

##### Stefania Pedrazzi [Cyberbotics] 03/03/2021 08:58:30
Yes you can delete them by redrawing a transparent rectangle over the previously drawn objects.

Here is a sample code from the built-in Webots projects/samples/devices/worlds/display.wbt simulation:

[https://github.com/cyberbotics/webots/blob/master/projects/samples/devices/controllers/display/display.c#L111:L114](https://github.com/cyberbotics/webots/blob/master/projects/samples/devices/controllers/display/display.c#L111:L114)

##### Tosidis 03/03/2021 09:24:36
Thanks!

##### Darko Lukić [Cyberbotics] 03/03/2021 10:04:19
Check this out:

[https://cyberbotics.com/doc/guide/using-python#use-an-alternative-python-version](https://cyberbotics.com/doc/guide/using-python#use-an-alternative-python-version)

##### Tosidis 03/03/2021 10:06:33
I have a small bug, rectangle gets deleted, but when i draw the new one, it isn't a complete rectangle, some of the lines miss


example
%figure
![Screenshot_from_2021-03-03_12-06-55.png](https://cdn.discordapp.com/attachments/565154703139405824/816612751215689738/Screenshot_from_2021-03-03_12-06-55.png)
%end

##### Stefania Pedrazzi [Cyberbotics] 03/03/2021 10:08:08
If you could provide a small example (here or opening an issue in GitHub [https://github.com/cyberbotics/webots/issues/new?assignees=&labels=&template=bug\_report.md](https://github.com/cyberbotics/webots/issues/new?assignees=&labels=&template=bug_report.md)) we will look at it

##### Tosidis 03/03/2021 10:16:57
I will try to report it later when I finish this. It happens due to resizing (display box inside world window is smaller than actual size and some lines won't render correctly. If I resize the window to the original size it shows the rectangles correctly)

##### Stefania Pedrazzi [Cyberbotics] 03/03/2021 10:19:32
Ok, thank you. Good to know that the Display functions are working correctly and it is just a resizing issue. By the way I'm not sure it could be fixed: when making an image smaller it is normal that some pixel information is missing.

##### Tosidis 03/03/2021 10:23:43
True, didn't think of it right away cause with openCV and ImageNew worked fine (much much slower though)

##### Welsh\_dragon64 03/03/2021 11:43:11
thnx

##### h.sciascia 03/03/2021 12:41:46
Hello everyone ! how to find the optimal thread count for the worldInfo settings ?

##### Stefania Pedrazzi [Cyberbotics] 03/03/2021 12:47:22
The optimal thread count strictly depends on the simulation. So the only way to find the best value is by manually changing the value and check the simulation speed.

But note that only the physics engine is using multi-threading, so you will only get some benefits by setting the thread count > 1 if you have multiple robots or dynamic objects that doesn't interact or if you have distinct groups of interacting objects. In the latter case, a good threads count could be the number of distinct groups of robots/objects.

##### h.sciascia 03/03/2021 12:48:19
Oh okok thanks

##### Luftwaffel [Moderator] 03/03/2021 13:24:21
`@h.sciascia` in most circumstances 1 is the best

##### h.sciascia 03/03/2021 13:25:17
Ok :/ Because we are doing a lot of calculations and save with an reinforcement learning IA

##### Luftwaffel [Moderator] 03/03/2021 13:26:11
you can do multiple instances of webots

##### h.sciascia 03/03/2021 13:26:30
for a single simulation?

##### Luftwaffel [Moderator] 03/03/2021 13:26:36
yes


there is RL algorithms that you can train in parallel

##### h.sciascia 03/03/2021 13:27:12
how to do multiple instances ?

##### Luftwaffel [Moderator] 03/03/2021 13:27:22
[https://drive.google.com/file/d/1C4ICDz30GjKs5PkuYxNW8\_mFCcxEJlPs/view?usp=sharing](https://drive.google.com/file/d/1C4ICDz30GjKs5PkuYxNW8_mFCcxEJlPs/view?usp=sharing)


`@Darko Lukić` `@h.sciascia` Darko, perhaps you can show him the new python api. This would make this much easier

##### h.sciascia 03/03/2021 13:29:01
Ok but the purpose is to train only one RL agent

##### Luftwaffel [Moderator] 03/03/2021 13:29:20
what algorithm are you using?

##### h.sciascia 03/03/2021 13:29:26
td3



> **Attachment**: [Motion\_Planning\_of\_Robot\_Manipulators\_for\_a\_Smoother\_Path\_Using\_a\_Twin\_Delayed\_Deep\_Deterministic\_Po.pdf](https://cdn.discordapp.com/attachments/565154703139405824/816663760780918855/Motion_Planning_of_Robot_Manipulators_for_a_Smoother_Path_Using_a_Twin_Delayed_Deep_Deterministic_Po.pdf)

##### Luftwaffel [Moderator] 03/03/2021 13:30:40
that one does not support multi Processing

##### h.sciascia 03/03/2021 13:31:30
So it's not possible


thanks

##### Darko Lukić [Cyberbotics] 03/03/2021 13:31:41
We did some initial testings with TD3 and you should first verify whether your algorithm is bottleneck. If TD3 takes a lot of time calculate time than Webots multiprocessing will not help.

##### h.sciascia 03/03/2021 13:32:04
lot of time yes

##### Luftwaffel [Moderator] 03/03/2021 13:32:27
run a profiler and find out, what takes how long


if the simulation is only 5% of runtime, then there is little to optimize

##### Darko Lukić [Cyberbotics] 03/03/2021 13:33:12
How much time does the `step()` function from the OpenAI Gym takes?

##### h.sciascia 03/03/2021 13:34:06
we did not try it on OpenAI Gym Env because there is no environment that corresponds to our needs

##### Luftwaffel [Moderator] 03/03/2021 13:34:46
what are you using? stable-baselines? or some custom solution?

##### h.sciascia 03/03/2021 13:35:26
i built the algo using pytorch

##### Luftwaffel [Moderator] 03/03/2021 13:36:11
stable-baselines3 is based on pytorch. You might save yourself A LOT of work using that


[https://github.com/DLR-RM/stable-baselines3](https://github.com/DLR-RM/stable-baselines3)

##### Darko Lukić [Cyberbotics] 03/03/2021 13:36:24
You can easily integrate Webots with OpenAI Gym:

[https://www.cyberbotics.com/doc/guide/samples-howto?version=master#openai\_gym-wbt](https://www.cyberbotics.com/doc/guide/samples-howto?version=master#openai_gym-wbt)

##### h.sciascia 03/03/2021 13:36:46
thank you this is helpful

##### Luftwaffel [Moderator] 03/03/2021 13:36:58
[https://github.com/DLR-RM/rl-baselines3-zoo](https://github.com/DLR-RM/rl-baselines3-zoo) this can be easily combined with stable-baselines3

##### Darko Lukić [Cyberbotics] 03/03/2021 13:38:01
How much time does your algorithm take to calculate an action from the given state?

##### h.sciascia 03/03/2021 13:38:06
my problem is mainly the huge time of simulation needed to train the agent


i didn't mesure it. it's a 2 hidden layers neural network (actor: 600x400)  so not much


the function that takes a lot of a time is the learning function


that updates the neural networks


along side another function that check for collision with obstacles present in the environment

##### Luftwaffel [Moderator] 03/03/2021 13:40:02
maybe have a look at this paper: [https://www.groundai.com/project/towards-simplicity-in-deep-reinforcement-learning-streamlined-off-policy-learning/2](https://www.groundai.com/project/towards-simplicity-in-deep-reinforcement-learning-streamlined-off-policy-learning/2)


SAC could be a better choice, maybe.

##### h.sciascia 03/03/2021 13:40:48
okay thank you

##### Darko Lukić [Cyberbotics] 03/03/2021 13:41:30
Could you please benchmark all those functions so we better understand the bottleneck?

##### Luftwaffel [Moderator] 03/03/2021 13:41:56
also, you should use HER together with TD3 or SAC, if you want to significantly increase sample efficiency

##### h.sciascia 03/03/2021 13:42:09
yeah i use HER

##### Luftwaffel [Moderator] 03/03/2021 13:42:22
good 🙂

##### h.sciascia 03/03/2021 13:42:27
i will

##### Darko Lukić [Cyberbotics] 03/03/2021 14:32:29
`@h.sciascia` Please let us know the results. We are trying to optimize Webots for DRL, so your feedback will be very useful to us

##### h.sciascia 03/03/2021 15:36:14
Yes I will try to do this as fast as possible, lot of work in the company I cannot garantee you a date because I have others functions

##### Darko Lukić [Cyberbotics] 03/03/2021 15:48:37
Sure, no problem. Thank you!

##### Cyber Police Officer 03/03/2021 18:57:26
A quick question, is it possible to load a solid exported as .wbo into a solid node?


Forgot do specify: In a proto file. I know I can import in the GUI, but was wondering if it was possible in a proto file

##### Stefania Pedrazzi [Cyberbotics] 03/04/2021 07:20:16
There is no built-in function for this.  But you have different options:

1) turn the WBO node into a PROTO node so that it can easily be used in other PROTO files and nodes

2) import the WBO object from the Supervisor controller at the very beginning of the simulation

3) read and import the WBO file directly in the procedural PROTO file using Lua statements (a WBO object can be inserted as-is without any modifications to the file content other than removing the header line).

##### Master.L 03/04/2021 08:38:22
Hello! I have a question.

I am trying to create a simulation using webots and ros.

I am trying to control the joints by placing a motor on each joint of the webots robot by calling a service from ros.

In addition, I am trying to give values to a total of 3 joints by calling rosservice, but at the same time, a delay occurs because values are entered sequentially instead of entering each joint.

How can I send values at the same time?

##### Darko Lukić [Cyberbotics] 03/04/2021 08:41:36
If the `synchronization` field of your robot is set to `TRUE` then all service calls should be performed in the single timestep:

[https://cyberbotics.com/doc/reference/robot](https://cyberbotics.com/doc/reference/robot)


In addition, you should use the `--synchronize` argument:

[https://cyberbotics.com/doc/guide/using-ros](https://cyberbotics.com/doc/guide/using-ros)

to ensure that all the service calls are performed in the single timestep

##### Master.L 03/04/2021 09:19:58
`@Darko Lukić` Is there any example that I can refer to?


I currently use the controller as ros and create a ros package and run it externally.

##### Darko Lukić [Cyberbotics] 03/04/2021 09:25:23
Unfortunately, there is no example. You should configure the robot as in picture
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/816964535080321064/unknown.png)
%end


And you should get the `time_step` service exposed that you have to call at each step

##### Master.L 03/04/2021 09:48:00
`@Darko Lukić` Should I call time\_step before calling set\_position to each joint?

##### Darko Lukić [Cyberbotics] 03/04/2021 09:49:03
After. The `time_step` service calls the `wb_robot_step` function:

[https://cyberbotics.com/doc/reference/robot#wb\_robot\_step](https://cyberbotics.com/doc/reference/robot#wb_robot_step)

##### Master.L 03/04/2021 10:00:14
Thank you `@Darko Lukić` . I will try it and ask you again if there is a problem.

##### DNANA 03/04/2021 12:30:51
Does this work with Vex?

##### Cyber Police Officer 03/04/2021 15:21:39
Thank you! 1st one worked really well

##### Bitbots\_Jasper [Moderator] 03/04/2021 18:28:40
Here: [https://www.cyberbotics.com/doc/guide/tutorial-3-appearance#add-a-texture-to-the-ball](https://www.cyberbotics.com/doc/guide/tutorial-3-appearance#add-a-texture-to-the-ball) it says "Textures are mapped onto Geometry nodes according to predefined UV mapping functions described in the Reference Manual. A UV mapping function maps a 2D image representation to a 3D model."



I can not seem to find the documentation of which UV mapping is applied when `texCoordIndex` is empty in [https://cyberbotics.com/doc/reference/indexedfaceset](https://cyberbotics.com/doc/reference/indexedfaceset)


does somebody know where to find this information?

##### Olivier Michel [Cyberbotics] 03/04/2021 21:27:18
It's inherited from VRML97: [https://tecfa.unige.ch/guides/vrml/vrml97/spec/part1/nodesRef.html#IndexedFaceSet](https://tecfa.unige.ch/guides/vrml/vrml97/spec/part1/nodesRef.html#IndexedFaceSet)



%figure
![IFStexture.png](https://cdn.discordapp.com/attachments/565154703139405824/817146332371222579/IFStexture.png)
%end

##### Bitbots\_Jasper [Moderator] 03/05/2021 07:01:06
`@Olivier Michel` perfect, thanks for the info

##### h.sciascia 03/05/2021 09:03:37
Hello everyone !



How can I modify the initial coordinate system of a solid without modifying the position and orientation of this one ?



Thanks

##### Darko Lukić [Cyberbotics] 03/05/2021 09:13:30
`@h.sciascia` You have to change the solid so it matches the new coordinate system.

##### h.sciascia 03/05/2021 09:15:42
Okok thanks !

##### Darko Lukić [Cyberbotics] 03/05/2021 09:18:40
For example, if you are converting from NUE to ENU then you have rotate all solid's children and bounding objects by (-0.57, 0.57, 0.57, -2.09)

##### h.sciascia 03/05/2021 09:46:11
Thanks a lot !

It's to compare some results between my Denavit Hartenberg outside webots and the orientation/position given by Webots supervisor

##### Callum98 03/05/2021 14:02:02
Hi guys, I want my robot to turn for a specified amount of time before stopping, is there a command that tells the robot to perform an action for a set period of time?

##### Krish 03/05/2021 14:05:47
robot.step(time in ms)



Example - robot.step(1000)

Runs the commands above for 1 second.

##### Callum98 03/05/2021 14:12:43
Yeah that worked thank you man

##### Krish 03/05/2021 14:22:11
Welcome 😁

##### Yaksa 03/05/2021 20:17:26
hello everyone, I have a question how should I do tutorial 8 on windows, I've installed ROS packages, but these commands cannot use in windows
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/817491014948356166/unknown.png)
%end

##### Harris 03/06/2021 06:07:29
Hi, maybe a simple question, is there any way to change the center point of imported FBX models? Each models' center points are automatically set to the corner.

Also for the orientation? Is it possible to adjust them after importing models?

##### bingdong 03/06/2021 07:57:59
Hey, is there any way to use Blender keyframes for motion tracking of model animation and reusing it to create simulation on Webots?

##### moeonethego 03/06/2021 08:41:17
use the render options to view the rotation axis , follow this video , I had the same issue before but this developer made an extra step to adjust the rotation axis of the hingejoint : [https://www.youtube.com/watch?v=mX8p07a7K30](https://www.youtube.com/watch?v=mX8p07a7K30)

##### F\_Nadi 03/06/2021 08:42:44
Hi everyone, I have installed Webots R2021a and Matlab 2020a in Windows 10. Matlab is in my system path (as shown in the attached figure) but still Webots gives me this warning and cannot start my controller: 'WARNING: Unable to find the 'matlab' executable in the current PATH. Please check your matlab installation. It should be possible to launch matlab from a terminal by typing 'matlab'. It may be necessary to add the matlab bin directory to your PATH environment variable. More information about the matlab installation is available in Webots' User guide.' (I can start Matlab from a terminal by typing 'matlab' and Mingw-w64 compiler also has been installed using Add-Ons of Matlab software). would you please help me?



%figure
![Variables.PNG](https://cdn.discordapp.com/attachments/565154703139405824/817678740406009856/Variables.PNG)
%end

##### BeastFromTheEast 03/06/2021 11:45:03
Hi, I'm having an issue where my robot does not go in a straight line even though I have set both wheel velocities to the same speed and to my knowledge the wheels are parallel. Can anyone advice how I would look to eliminate such an issue>


?


Thanks

##### Krish 03/06/2021 12:48:18
It would happen due to external factors like friction and slipping.


To eliminate this maybe instill a PID control where you utilize the Gyro readings to make it go in a straight line.

##### benj3110 03/06/2021 18:07:33
Hi, I'm having alot of issues with solids going through eachother. Happens with robots and solids made in webots and with imported solids and I don't really know why. I've tried some of the suggestions on here [https://cyberbotics.com/doc/guide/modeling](https://cyberbotics.com/doc/guide/modeling) but nothing seems to work. Thanks

##### Bitbots\_Jasper [Moderator] 03/06/2021 18:15:48
is the problem that the center of the fbx file is not where you want it or is it imported incorrectly into webots? To test you could try to export it in a different format, .obj for example, and reload. You can add a Transform node around the import of the model to change translation or orientation (in axis angle convention).


do you have bounding objects for your solids? If not, add some. Otherwise, if the solids are part of the same robot you might need to enable self collision in the robot node

##### benj3110 03/06/2021 18:20:37
yea they are all bounded with physics and they are different solids.

##### Bitbots\_Jasper [Moderator] 03/06/2021 18:22:24
can you share your world file? pm is fine too

##### Darko Lukić [Cyberbotics] 03/08/2021 08:00:52
We fixed some issues regarding the MATLAB path (that may affect your problem as well):

[https://github.com/cyberbotics/webots/pull/2624](https://github.com/cyberbotics/webots/pull/2624)



Could you please try the Webots R2021a rev1 nightly build:

[https://github.com/cyberbotics/webots/releases](https://github.com/cyberbotics/webots/releases)

##### F\_Nadi 03/08/2021 08:07:06
Thanks a lot🙏 , I will do.


`@Darko Lukić`, my issue has been fixed. Thanks.

##### Vial 03/08/2021 18:05:28
Hi Webots community,

We are working on an automous robot competition where robots can't be connected to external PC

and usually runs on STM32 or dspic microcontrolers.

For debug purposes, we would like to display real sensor data/ point cloud/ pathfinding stuff from

a C/C++ node connected to our robot to the Webots environement.

I think usually the robot community uses ROS/rviz to do so, but for differents internal reasons, we would like

to not use ROS and there must be a way to do everything from Webots anyway.

So I dive in the Supervisor programming and try to display everything we need but I really feel like I'm doing it wrong.

Is there a proper way to display real time point cloud/ path in webots ?



So far I'm working with a Shape/ geometry / PointSet and I feel like I can do something from this but it's quiet messy,

it always feels like I have to find workarounds.

I need to create a Node somewhere in the tree to store point cloud, clean the previous points in the coord/color fields if

some points already exist but I can't get the exact amount of points in

the pointSet from supervisor so I have to delete/recreate the node (there is no endpoints to get the the number of points you have in a field).

At the moment I still have a few bugs/undersirable behavior but it seems that I can at least generate a point cloud (All the points are white though, I need to reload the whole world to see the

corect color).

Am I doing it right and it's just a matter of experience/knowledge with the supervisor API or is it beyond webots scope at the moment ?

Just to be clear, I'm not just criticize the API, I'm really enthousiastic about this project. I'm just trying to improve the development sharing my user experience.



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/818545029400100904/unknown.png)
%end

##### Luftwaffel [Moderator] 03/08/2021 18:22:39
`@Vial`  think it is as simple as "ctrl + 8"
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/818549292040978512/unknown.png)
%end


[https://cyberbotics.com/doc/reference/lidar?tab-language=c++](https://cyberbotics.com/doc/reference/lidar?tab-language=c++) this might help too


oh, but the data is not from inside the simulation right, it's from the actual robot


ROS and Rviz really are simple solution for this. lightweight too, as it only displays and not simulates anything


`@Vial` I think you are overthinking your solution


this is my scene tree
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/818554789364760646/unknown.png)
%end


if you want to have the same color for all the points, just add a normal appearance node to the shape, and define the emissive color


Then you just set the Shape > pointSet > Coordinate to your pointcloud


you can give the Coordinate node a DEF "PointCloudCoord" in my screenshot
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/818555492405608468/unknown.png)
%end


then you can use the supervisor "getFromDef" functionality


i might be easier to import the whole thing as a string



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/818558629325701180/unknown.png)
%end


instead of line 36, you could generate a string form your pointcloud, with the structure of my screenshot


every point being separated by a comma


this might be faster, as only one call will be made to Webots, instead of one call per point


I'm not good with c++, so I dont know how to construct that string


`@Darko Lukić` is there a way to "setMF" a whole MF, without having to do it index  by index?


Something like

`point.setMFVec3f( [[1, 1, 1], [2, 2, 2]] )`


or is that what

`insertMFVec3f()` does?


or can it be only done via the importMFNodeFromString() function

##### Vial 03/08/2021 19:55:15
Hi `@Luftwaffel` ,

Thanks a lot for your insights.

I should definitely try the string or file approach.

I just figured out that only some type of nodes can be exported to .wbo files.

I can try to save a template of the whole "shape pointCloud" as a .wbo file, and delete it/load it first and then update it as I can keep track on what I'm doing with this new node.

I'll try tomorow, thanks a lot for your time 🙂

##### Olivier Michel [Cyberbotics] 03/09/2021 07:11:46
You approach seems globally correct. If you need to reload the world to see the correct color, it might be a bug in Webots. Please test it with the latest Webots R2021a-rev1 nightly build where the bug might be already fixed. If not fixed, please open a bug report on GitHub with a simple source code example and we will look into it.

##### Darko Lukić [Cyberbotics] 03/09/2021 07:32:44
As far as I know you have to combine `wb_supervisor_field_set_mf_vec3f`, `wb_supervisor_field_insert_mf_vec3f`, and `wb_supervisor_field_remove_mf`.

##### Saud 03/09/2021 10:11:08
Hello, I am trying to add the lidar to the Mavic. I have added it on and enabled the lidar and the point cloud. But I am confused as to how to proceed further and start to get values and to get the points of the lidar to be seen in the simulation. I have enabled show lidar ray paths and point cloud. Also when how to store the values from the lidar?

##### Bitbots\_Jasper [Moderator] 03/09/2021 10:13:05
you need to write a controller for your robot, I recommend checking out the tutorials in the user manual [https://cyberbotics.com/doc/guide/tutorials](https://cyberbotics.com/doc/guide/tutorials)

##### Saud 03/09/2021 10:20:29
thank you which tutorial is best for lidar. I have gone through them


What am I doing wrong? quite lost and confused
%figure
![Screenshot_2021-03-09_at_11.12.47_am.png](https://cdn.discordapp.com/attachments/565154703139405824/818803666945179648/Screenshot_2021-03-09_at_11.12.47_am.png)
%end

##### Welsh\_dragon64 03/09/2021 12:33:32
I am trying to use <external> controller on the ROBOTIS OP 2 using Pycharm and got the following error. How do i set the content and path from webots to Pycharm???
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/818823824992763914/unknown.png)
%end

##### DDaniel [Cyberbotics] 03/09/2021 12:52:04
`@Saud` getPointCloud returns a const LidarPoint, not a LidarPoint

##### Saud 03/09/2021 12:57:10
ok great thanks i managed to change that. i am quite confused one how to represent the data which i get from the getPointCloud. Where do i save the array? do i need to use matlab to represent data?

##### DDaniel [Cyberbotics] 03/09/2021 12:59:29
To visualise it you can activate the rendering of the cloud: view > optional rendering >  show lidar point cloud

##### Darko Lukić [Cyberbotics] 03/09/2021 13:01:10
[https://cyberbotics.com/doc/guide/using-your-ide](https://cyberbotics.com/doc/guide/using-your-ide)

##### Deleted User 03/09/2021 14:20:25
Hello. Is it possible to integrate gamepad to webots?

##### Saud 03/09/2021 14:43:39
I have enabled this setting but all i get at the lines that you can see in the picture above

##### DDaniel [Cyberbotics] 03/09/2021 14:48:35
`@Saud` is it pointed in the right direction? (you can change the tilt angle of the lidar)

##### Saud 03/09/2021 14:54:20
I think that it is, or am I wrong?
%figure
![Screenshot_2021-03-09_at_2.53.47_pm.png](https://cdn.discordapp.com/attachments/565154703139405824/818859255246749726/Screenshot_2021-03-09_at_2.53.47_pm.png)
%end


I am also trying to get the point cloud but having trouble.
%figure
![Screenshot_2021-03-09_at_3.27.18_pm.png](https://cdn.discordapp.com/attachments/565154703139405824/818867588897570866/Screenshot_2021-03-09_at_3.27.18_pm.png)
%end

##### DDaniel [Cyberbotics] 03/09/2021 16:42:00
`@Saud` `const LidarPoint *points = lidar->getPointCloud()`. It depends what you're trying to do, have you taken a look at the

sample world for lidar? Could help you understand how it works (file > open sample world > samples > devices > lidar)

##### Saud 03/09/2021 17:56:40
Yes I have essentially what I am trying to do is get lidar values to calculate the volume of the boxes

I have had a look at the sample but i dont know how its using the values and i cant see the lidar points in my simulation for some reason


ok i have managed to get values now but when i get the number of layers of the lidar it only returns 1 which means there are only 2 layers? quite confused why this is. i guess it explains the two lines. Currently i am using Hokuyo UTM-30LX. What i want is the drone to make a scan of the ground like a scanner would. Is this the correct lidar for that?

##### Luftwaffel [Moderator] 03/09/2021 19:46:50
fieldOfView 4.71238

  verticalFieldOfView %{= 4.18879 / fields.resolution.value }%

  horizontalResolution IS resolution

  numberOfLayers 1

  spherical TRUE

  minRange 0.1

  maxRange 30

  noise IS noise


this is the settings of the UTM-30LX


it is one layer


it is a 2D-plane between the two lines you see

##### Uanuan 03/10/2021 01:35:20
Good day everyone, I'm new to webots, sorry if I'm asking a naive question. I'm wondering if it's possible to have an external program (let's say python) that modifies the attributes/properties of a robot while the simulation is running? For instance, let's say the hexapod is executing in webots, and I want it to "grow" an additional leg, or alter the shape or sensors on the bot dynamically. Could you give me some pointers as to how to start doing that? Thanks in advance.

##### SeanLuTW 03/10/2021 02:48:19
Hello, can I get object identity a connector currently connected to?

##### Olivier Michel [Cyberbotics] 03/10/2021 07:10:25
Yes, this is possible: you should use the supervisor API to add/remove nodes while the simulation is running.

##### Uanuan 03/10/2021 07:27:49
Sweet, thank you Olivier, appreciate it. I'll try that out 🙂

##### Harris 03/10/2021 09:52:42
Hi, I am trying to use connector function to simulate gripping hardware by a sucker. I already successfully connected the hardware with the gripper’s connector, and I try to move the end position, while the hardware doesn’t move together!(the lock state is still True) How can I fix this?



%figure
![image0.jpg](https://cdn.discordapp.com/attachments/565154703139405824/819145926610255882/image0.jpg)
%end



%figure
![image0.jpg](https://cdn.discordapp.com/attachments/565154703139405824/819146021317640192/image0.jpg)
%end


BTW, Thank for the previous help! Appreciate it.

##### AndyPandyO 03/10/2021 14:50:51
I am having trouble with my translation in endPoint solid not staying in place when i rotate an object. new to this, if anyone can help that would be great
> **Attachment**: [Recording\_1.mp4](https://cdn.discordapp.com/attachments/565154703139405824/819220768713080882/Recording_1.mp4)


I cannot get it to rotate around the axes point. any help? cheers

##### Stefania Pedrazzi [Cyberbotics] 03/10/2021 14:54:19
You should change the `JointParameters.anchor` value so that it matches the initial `endPoint Solid` translation.


You can also enable the visualization of the joint axes from the `View > Optional Rendering > Show Joint Axes` to make that it is correctly set.

##### AndyPandyO 03/10/2021 15:01:17
I did that, as you can see here. but it still resets the endPoint soldid translation
> **Attachment**: [Recording\_2.mp4](https://cdn.discordapp.com/attachments/565154703139405824/819223393395933204/Recording_2.mp4)

##### Stefania Pedrazzi [Cyberbotics] 03/10/2021 15:02:56
At position 0, both the endPoint translation and joint anchor should have the same value.

If the endPoint position is reset, then you can copy and paste the anchor value in the translation field.

##### AndyPandyO 03/10/2021 15:06:21
I did exactly that, same result. Thanks for the speedy response
> **Attachment**: [Recording\_3.mp4](https://cdn.discordapp.com/attachments/565154703139405824/819224668275736607/Recording_3.mp4)

##### Stefania Pedrazzi [Cyberbotics] 03/10/2021 15:12:08
Did you try to save and revert the simulation after fixing the `anchor` value?

##### AndyPandyO 03/10/2021 15:14:53
Yes! that's it, thanks so much

##### bellino 03/10/2021 16:01:22
Hello, I have a question about the charger and battery. I have a robot whose battery field is set to [51840, 51840, 2.4] and a charger whose battery field is set to the same values. When I move the robot to the charger the first field in the charger immediately goes to zero. I had a look at the example battery.wbt but besides the recharge speed and cpuConsumption (I am using the default value), I could not spot a difference. Any guess as to what I could be doing wrong?

##### Stefania Pedrazzi [Cyberbotics] 03/10/2021 16:24:05
Note that also in the example `battery.wbt` the first value of the `Charger.battery` field immediately goes to 0, but given that the recharge speed is higher, the robot gets recharged.


I'm reviewing the charging code to check if this is really the wanted behavior.

##### bellino 03/10/2021 16:56:18
higher then what? Do you mean the recharge time of the robot? I tried setting the recharge time of the robot to 4.8 but it didn't work, is this what you mean?

##### Stefania Pedrazzi [Cyberbotics] 03/10/2021 17:15:44
Yes. But you should try at least with 30 or similar (in the `battery.wbt` example).


By the way, the Charger behavior seems wrong and should be fixed ([https://github.com/cyberbotics/webots/issues/2843](https://github.com/cyberbotics/webots/issues/2843))

##### bellino 03/10/2021 17:39:41
thank you very much, it sort of works now with a higher recharge value!

##### cooolwhip14 03/10/2021 18:26:34
Hi , Im trying to make a python code to switch spotlights turn on when light goes below a certain value, however Im struggling as i cant see a way to call the spotlights name as the Spotlight device doesnt actually have a ‘name’ section to call. Anyone know a way around this?


light measured from a light sensor that is

##### Luftwaffel [Moderator] 03/10/2021 19:21:04
give them a DEF


and use a supervisor controller

##### EmzG 03/10/2021 19:41:21
Hi, I’m trying to get my robot to go forward and avoids walls but stop and pick up a small object. I am struggling to get it to do both. If I have a small object it stops like it’s supposed to but for the wall it starts to turn then it stops. I’m sure it’s something so small but hoping I could get suggestions on how to allow the robot to do what it to do. I have uploaded 2 photos of my code to see if there are any mistakes. I am using C++. Thank you



%figure
![image0.jpg](https://cdn.discordapp.com/attachments/565154703139405824/819293980885778462/image0.jpg)
%end



%figure
![image0.jpg](https://cdn.discordapp.com/attachments/565154703139405824/819294033511186493/image0.jpg)
%end

##### Luftwaffel [Moderator] 03/10/2021 19:50:35
`@EmzG` can you upload actual screenshots or the files themselves?


win + shift + s  to take a screenshot

##### EmzG 03/10/2021 19:55:45
this is a notpad file of my code
> **Attachment**: [controller\_help.txt](https://cdn.discordapp.com/attachments/565154703139405824/819297500069494834/controller_help.txt)

##### Luftwaffel [Moderator] 03/10/2021 20:19:26
your code is a bit confusing. What is the exact behavior you want?


what is `obstacle_p` supposed to mean?


`avoidObstacleCounter` you decrease by 1 every step, but obstacle\_p gets set to 100, but never lowered back down

##### EmzG 03/10/2021 20:23:21
obstacle\_p is supposed to be another counter for the object sensor. this sensor is the one that will stop at small object.

##### Luftwaffel [Moderator] 03/10/2021 20:23:35
you are using the same name for object and distance sensor


"ds"


try this
> **Attachment**: [obstacle.cpp](https://cdn.discordapp.com/attachments/565154703139405824/819305034164469790/obstacle.cpp)


changed ds to os for object sensors


also changed the indentation a bit. was hard to read

##### EmzG 03/10/2021 20:27:49
right is that what's the problem. cause i initially started with two file one which just had the two left and right sensors then the other file had the object sensor and both work fine independently. but combine them and wont work, i will give it a try. thank you

##### Luftwaffel [Moderator] 03/10/2021 20:28:37
also, the way you have set it up, it will never move again, once it detected an object and stops

##### EmzG 03/10/2021 20:34:57
these errors seem to come up. that os is not declared
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/819307365581062174/unknown.png)
%end

##### Luftwaffel [Moderator] 03/10/2021 20:35:23
yeah, you have to adjust your initialization


not sure why you do it in a loop anyways, when it is a single sensor


DistanceSensor *os;


or something


you can remove the loop


try this. I'm not very good with c++, but this might work
> **Attachment**: [obstacle.cpp](https://cdn.discordapp.com/attachments/565154703139405824/819308723154714704/obstacle.cpp)

##### EmzG 03/10/2021 20:49:07
thank you so so much that works perfect now. so all i needed to do was initialise it better . I was doing my nut trying to work out what was wrong the last few day and it was an oversite like that. you are amazing.

##### Luftwaffel [Moderator] 03/10/2021 20:49:26
welcome to programming 😄


you're welcome

##### cooolwhip14 03/10/2021 21:01:03
What does the supervisor controller allow?

##### Luftwaffel [Moderator] 03/10/2021 21:01:47
getting a handle to the light node and to manipulate it


Take a look at this project I did. It uses a supervisor controller to randomly change light sources
> **Attachment**: [domain\_randomization\_noTextures.zip](https://cdn.discordapp.com/attachments/565154703139405824/819315248133701655/domain_randomization_noTextures.zip)


just open the world and it should run automatically

##### cooolwhip14 03/10/2021 21:07:08
Great il check it out thanks

##### Harris 03/10/2021 21:52:53
Hi, I am trying to use connector function to simulate gripping hardware by a sucker. I already successfully connected the hardware with the gripper’s connector, and I try to move the end position, while the hardware doesn’t move together!(the lock state is still True) How can I fix this?



%figure
![image0.jpg](https://cdn.discordapp.com/attachments/565154703139405824/819327126552707162/image0.jpg)
%end

##### Luftwaffel [Moderator] 03/10/2021 21:55:45
Can you try to rephrase that or show with a video? (webots has included video capture)


what do you want the hardware to do? what is it doing instead?

##### danny!! 03/10/2021 22:55:28
Hi kind of related to the above question. I am working with some arms kind of like square rods (solid object) connected to motors. In real life the motors would apply a constant force so that there is friction and the block is held tightly. How do I model this in webots? I used setForce and it just pinged the robot halfway across the arena

##### Master.L 03/11/2021 04:47:09
Hi! I have a question.

I am currently using a GPS sensor, but the values come in differently because the coordinate axis of the robot and the coordinate axis of the world are not the same.

How can i align the axes??

##### Harris 03/11/2021 04:51:11

> **Attachment**: [pick\_up\_video1.mp4](https://cdn.discordapp.com/attachments/565154703139405824/819432244228915210/pick_up_video1.mp4)


I want the hardware to move with the gripper, and it is not moved

##### evoo 03/11/2021 09:00:53
I’m using Webots on MacOS. I created a controller using Python. When I run it I get ImportError: No module named pygame


Any idea on how to fix this?


Nvm I found the issue. I went to Preferences and then typed Python3 for “Python command”

##### Darko Lukić [Cyberbotics] 03/11/2021 09:13:44
The GPS sensor returns position in the global coordinate system. The coordinate system of your robot is not relevant. Can you provide more details about the issue?


[https://cyberbotics.com/doc/guide/moose#moose\_demo-wbt](https://cyberbotics.com/doc/guide/moose#moose_demo-wbt)

There is a Moose example. Press `A` to turn off the autopilot and use the arrow keys for teleoperation.

##### cindy 03/11/2021 10:10:07
Our code is written in C++ and it is crashing at different times every time we run it. It is a simple one robot controller for a uni project and we aren't entirely sure if it has anything to do with running on laptops that don't use the supported graphics cards (worth noting that if I close as many things as possible in Task Manager, the time of crash increases)? Would an indexing problem cause this sort of issue in multi-threading? And if so, how do I localise the issue if I can't use print statements?

##### Olivier Michel [Cyberbotics] 03/11/2021 10:11:13
See [https://cyberbotics.com/doc/guide/debugging-c-cpp-controllers](https://cyberbotics.com/doc/guide/debugging-c-cpp-controllers)

##### Elizaveta\_Potemkina 03/11/2021 11:32:59
When using Python for controller code, does .getLookupTable for sensors return a list with all the numbers in order just reading from one row to the next?

##### Lifebinder (tsampazk) 03/11/2021 12:05:26
Hello everyone, just a quick question. Is there a way to detect when self-collision is happening in a robot?

##### DDaniel [Cyberbotics] 03/11/2021 12:30:44
`@Lifebinder (tsampazk)` not programmatically but visually you can if you enable boundingObjects rendering,  when a collision occurs the color will change


view > optional rendering > show all bounding objects

##### Lifebinder (tsampazk) 03/11/2021 12:39:53
`@DDaniel` thank you very much for the quick answer!

##### alejanpa17 03/11/2021 13:49:19
Hey guys Im having troubles while displaying the lidar point cloud, I've already activate the View / Optional Rendering / Show Lidar Point Cloud but nothing shows up, is there something that I should have in consideration?


Also mention that I have the Lidar and Point Cloud enable in the robot window

##### Mohannad Kassar 03/11/2021 13:54:36
Hello, I have a question if a webots robot can be controller using a mobile application for example or a web page, any one can help ?

##### Darko Lukić [Cyberbotics] 03/11/2021 13:56:20
Yes, you can add a WebSocket server or web server in the robot controller


Which world are you trying to run? You may be affected with some bug resolved in R2021a rev1:

[https://github.com/cyberbotics/webots/releases](https://github.com/cyberbotics/webots/releases)

##### James Le Poidevin 03/11/2021 13:59:23
Hello, I have a problem when i create my own protos. The video below explains my probleme the best but I've been stuck for 2 days and can't figure it out.
> **Attachment**: [Kazam\_screencast\_00000.webm](https://cdn.discordapp.com/attachments/565154703139405824/819570203649507372/Kazam_screencast_00000.webm)


I add a proto. I save and then reload and they are gone. I tried on another PC and the proto isn't removed. If you have any idea why it would help alot thatnks

##### Darko Lukić [Cyberbotics] 03/11/2021 14:01:36
Are you getting any warnings in the console? What are the `LeftSide` and `RightSide` fields?

##### James Le Poidevin 03/11/2021 14:03:01
No Warnings, errors or even message
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/819571118162575410/unknown.png)
%end

##### Darko Lukić [Cyberbotics] 03/11/2021 14:05:59
Can you send the project to me, so I can test it

##### James Le Poidevin 03/11/2021 14:06:33
a ZIP ok ?



> **Attachment**: [RoverExomars\_GinestetJB.zip](https://cdn.discordapp.com/attachments/565154703139405824/819572690813583370/RoverExomars_GinestetJB.zip)


The world is TEST.wbt

##### Darko Lukić [Cyberbotics] 03/11/2021 14:11:58
It should look like this?
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/819573372399779880/unknown.png)
%end

##### James Le Poidevin 03/11/2021 14:12:33
yes it's the front bogie of a rover

##### Darko Lukić [Cyberbotics] 03/11/2021 14:12:57
Just rename the `World` folder to `worlds`

##### James Le Poidevin 03/11/2021 14:14:29
Brilliant thanks ! (sorry for taking up your time)

##### Master.L 03/11/2021 17:39:21
Thank you `@Darko Lukić`

I would like to know the position of the end-effector relative to the robot base through the sensor in the simulation. How can I do it?

##### Darko Lukić [Cyberbotics] 03/11/2021 17:53:05
Typical way of calculating end-point pose (in the real-world) is by putting an encoder in each joint of the arm. Then, you just calculate a forward kinematics given the encoder values and the robot model. You can do the same thing in the simulation.


If you are allowed to "cheat" then you can use:

[https://www.cyberbotics.com/doc/reference/supervisor#wb\_supervisor\_node\_get\_orientation](https://www.cyberbotics.com/doc/reference/supervisor#wb_supervisor_node_get_orientation)

(see the `Python Example: ` subsection)


There is a Webots example using `ikpy`:

[https://cyberbotics.com/doc/guide/irb4600-40#inverse\_kinematics-wbt](https://cyberbotics.com/doc/guide/irb4600-40#inverse_kinematics-wbt)

You can change it to calculate the forward kinematics:

[https://ikpy.readthedocs.io/en/latest/chain.html#ikpy.chain.Chain.forward\_kinematics](https://ikpy.readthedocs.io/en/latest/chain.html#ikpy.chain.Chain.forward_kinematics)

##### steakobhead 03/11/2021 18:06:00
hi ive been trying to use webots for school but the world doesnt play when i hit the play button, the timer just stays at 0. any ideas of what could be causing this?

##### Darko Lukić [Cyberbotics] 03/11/2021 18:06:22
Is there any warning in the console?

##### Luftwaffel [Moderator] 03/11/2021 18:06:58
you need a running controller, which periodically calls robot.step()

##### steakobhead 03/11/2021 18:08:43
i think i fixed it actually, nvm. thanks though!

##### Welsh\_dragon64 03/11/2021 19:48:54
thnx

##### YCL 03/12/2021 01:51:28
Hi Webots experts!


I met with a Webots problem recently. Could you please help me with it? Thank you so much!



My Webots can not work with my old files - which works well before. Recently I face up a problem that I use Webots 2019b and 2021a, which are different from what I used before.



When I build the controller, the error shows "Makefile:74: D:/Users/Liu/AppData/Local/Programs/Webots /resources/Makefile.include: No such file or directory

make: *** No rule to make target 'D:/Users/Liu/AppData/Local/Programs/Webots /resources/Makefile.include'.  Stop."





Then I did the following tries.



1. I checked my computer did include 'D:/Users/Liu/AppData/Local/Programs/Webots /resources/Makefile.include'



2. Then I delete my old "Makefile"  in the related controller file, and compile the controller in Webots, the Webots creates a new  "Makefile"  in the related controller file. The error above is solved but "WARNING: SL\_AGD\_Ini\_Star: The process crashed sometime after starting successfully.

WARNING: 'SL\_AGD\_Ini\_Star' controller crashed."



Thank you very much!



Have a nice day and keep healthy!


OK. I solved it now. Thank you so much!

##### Harris 03/12/2021 03:29:42
Hi, I am still struggling of this problem, can anyone plz help me to solve this connector problem? Thank you.

##### Darko Lukić [Cyberbotics] 03/12/2021 08:00:56
It is very time consuming to debug your simulation. Could you please create MRE:

[https://github.com/cyberbotics/webots/wiki/Webots-User-Support#how-to-ask-a-question](https://github.com/cyberbotics/webots/wiki/Webots-User-Support#how-to-ask-a-question)

##### Harris 03/12/2021 08:52:02
Here's my MRE project, press G to grip and press B to move. Thanks for your time if you can help!



> **Attachment**: [Webots\_MRE.7z](https://cdn.discordapp.com/attachments/565154703139405824/819855346155126795/Webots_MRE.7z)

##### Darko Lukić [Cyberbotics] 03/12/2021 08:55:12
Could you please make it simpler, just the world file is 10MB


> Never send the simulation you are working on. Your simulation is typically complex and it will cause confusion.

You should isolate the problem by creating a simulation from scratch

##### Harris 03/12/2021 09:11:40
Ok, sorry for that

##### pnaraltnsk 03/12/2021 12:35:58
Hi, I am trying to calculate the degree difference between my nao robot and a target point. My ultimate goal is to turn my robot in that direction and to move towards that direction.

            angle = round(math.atan2(-(relativeX), relativeZ), 4)



            degrees = round(angle * (180 / math.pi), 4)

This is how I calculate the degree between the robot and the target point. I subtract this from the robots angle and I rotate the robot according to result. But my robot doesn't stop rotating. I think that the problem is that robots position doesn't change so it keeps rotating and doesn't move forward. Do you have any ideas of how I can solve this problem.

##### Darko Lukić [Cyberbotics] 03/12/2021 13:16:47
You can check this example as a reference:

[https://github.com/cyberbotics/webots/blob/9a71190bb2084fec04246bd1008d9d311bef656f/projects/robots/clearpath/moose/controllers/moose\_path\_following/moose\_path\_following.c#L149-L190](https://github.com/cyberbotics/webots/blob/9a71190bb2084fec04246bd1008d9d311bef656f/projects/robots/clearpath/moose/controllers/moose_path_following/moose_path_following.c#L149-L190)



The robot in the example follows the provided checkpoints

##### Harris 03/12/2021 15:18:53
I just solve it, thank you for the reply and instruction!

##### Gregory Rasputin 03/12/2021 16:10:31
How can I access (set/get) a Device field? In particular I want to set the colorFilter field of the LightSensor

##### Darko Lukić [Cyberbotics] 03/12/2021 16:11:21
You can use the Supervisor node:

[https://cyberbotics.com/doc/reference/supervisor#wb\_supervisor\_node\_get\_field](https://cyberbotics.com/doc/reference/supervisor#wb_supervisor_node_get_field)

##### Gregory Rasputin 03/12/2021 16:12:27
Perfect. Never touched a supervisor before. Guess now's the time. Thanks 👍

##### Saud 03/12/2021 17:17:51
Hello, Is there a way to clear the console in webots using C++?

##### Master.L 03/12/2021 18:47:15
I am currently using ros controller for both robot and conveyor. However, there is no response when sending service to the conveyor's ros controller. Can you see why?

##### dA$H 03/12/2021 19:00:59
hello.

how can i get my robot translation in controller?

##### Luftwaffel [Moderator] 03/12/2021 19:01:37
Either through a gps sensor, or you "cheat" by using a supervisor controller


[https://cyberbotics.com/doc/reference/supervisor](https://cyberbotics.com/doc/reference/supervisor)

##### dA$H 03/12/2021 19:05:59

%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/820009748451688448/unknown.png)
%end

##### Luftwaffel [Moderator] 03/12/2021 19:07:13
use the checkbox "Supervisor" in your scene tree


you robot needs to be a supervisor


you can also use the getPosition() function


and if you are using the field method, it is `Field.getSFVec3f()`

##### Zändi 03/13/2021 11:18:54
Hello together! 🙂

I would like to program an agv so that it travels between three stations and avoids obstacles. I would like to implement this with a laser scanner. can you help me with this?

Do you have any ideas for the implementation, is there anything similar already?

##### g.michael Mico 03/13/2021 18:57:46
I was simulate  a wall follower epuck hawever, the robot couldnt reach all rooms but it can follow the walls inside one room . could some one help me to improve my codes ?

##### Luftwaffel [Moderator] 03/13/2021 23:45:24
You will have to give us more details than that. Perhaps show us in a video what it is doing and provide your controller code. Try to narrow down the issue yourself and try to ask a specific question 🙂

##### bingdong 03/14/2021 08:20:43
Hi, is there a simple example of how I can use the path stored in an external file to transform a solid/robot link in the simulation? I guess it would be using the supervisor property but not sure where to begin.

##### Zändi 03/14/2021 13:38:04
Hi ya 🙂

I am struggling with a code for an E-puck which should following a line. Can someone help me out with a code in C++?

##### Gregory Rasputin 03/14/2021 13:40:53
Have a look at my teaching materials especially section 5 [http://colin-price.wbs.uni.worc.ac.uk/Courses\_2020\_21/Comp2403/Workshops.htm](http://colin-price.wbs.uni.worc.ac.uk/Courses_2020_21/Comp2403/Workshops.htm)

##### Zändi 03/14/2021 13:45:27
oh thanks! Do you have more for Laserscanner or Infrared instead of using a camera?

##### Gregory Rasputin 03/14/2021 13:46:16
Nope. 😭 But camera is cool.

##### mayank.kishore 03/14/2021 21:54:41
Hi! Am working with the Moose robot and the right motors are not working? Says the velocity for each one is set at 10 but do not see any movement? Left motors work as expected, any ideas why?

##### Luftwaffel [Moderator] 03/14/2021 22:54:11
`@mayank.kishore` perhaps you can give us more information. Share your project folder. Are you sure you spelled the motor names correctly?

##### mayank.kishore 03/15/2021 01:26:06
Identified the issue as not setting the inital position to infinity

##### bingdong 03/15/2021 07:28:33
Hi, is there a simple example of how I can use the path stored in an external file to transform a solid/robot link in the simulation? I guess it would be using the supervisor property but not sure where to begin.

##### Darko Lukić [Cyberbotics] 03/15/2021 07:38:06
Check out this code:

[https://github.com/lukicdarkoo/webots-example-visual-tracking/blob/master/controllers/ball\_supervisor/ball\_supervisor.py](https://github.com/lukicdarkoo/webots-example-visual-tracking/blob/master/controllers/ball_supervisor/ball_supervisor.py)



It calculates a position and sets the position of the ball. You can read the position from the external file instead of calculating it at each timestep.

##### Stefania Pedrazzi [Cyberbotics] 03/15/2021 07:58:05
Actually I was wrong. It is possible to clear the console, here is the documentation:

[https://cyberbotics.com/doc/guide/controller-programming#console-output](https://cyberbotics.com/doc/guide/controller-programming#console-output)

And here you can find an example: [https://github.com/cyberbotics/webots/blob/released/projects/samples/howto/controllers/console/console.c](https://github.com/cyberbotics/webots/blob/released/projects/samples/howto/controllers/console/console.c)

##### sanindu 03/15/2021 09:21:18
How can I solve this?
> **Attachment**: [screen-capture\_4\_3.webm](https://cdn.discordapp.com/attachments/565154703139405824/820949773908836362/screen-capture_4_3.webm)

##### Darko Lukić [Cyberbotics] 03/15/2021 09:22:17
Try starting Webots in a safe mode:

[https://cyberbotics.com/doc/guide/starting-webots#safe-mode](https://cyberbotics.com/doc/guide/starting-webots#safe-mode)

##### Rody El Hamod 03/15/2021 09:22:22
Hello, i tried today to create two processes in python


the simulation was blocked


any ideas?

##### Darko Lukić [Cyberbotics] 03/15/2021 09:24:06
Can you share your controller?

##### Rody El Hamod 03/15/2021 09:25:29

> **Attachment**: [robot\_controller.py](https://cdn.discordapp.com/attachments/565154703139405824/820950825538945024/robot_controller.py)

##### sanindu 03/15/2021 09:32:07
`@Darko Lukić` It's not working😕

##### Darko Lukić [Cyberbotics] 03/15/2021 09:33:44
This doesn't look related to Webots. Your `p1` process is accessing to the `robot` instance from the main process. You need something like queues to synchronize them and exchange data. Note that multiprocessing is different from multithreading.

##### sanindu 03/15/2021 09:33:54
same
> **Attachment**: [screen-capture\_5.webm](https://cdn.discordapp.com/attachments/565154703139405824/820952945683726397/screen-capture_5.webm)


while I did it
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/820953043067600896/unknown.png)
%end


`@Darko Lukić` What should I do now?

##### Rody El Hamod 03/15/2021 09:37:31
if you noticed i have added a print() before the processes start. But console does not display it


before the nested for loop

##### James Le Poidevin 03/15/2021 09:39:57
Hello, I'm having a problem with webots the last couple of days and I keep getting this error:



```Warning: QStandardPaths: XDG_RUNTIME_DIR not set, defaulting to '/tmp/runtime-root'
AL lib: (WW) alc_initconfig: Failed to initialize backend "pulse"
Warning: QProcess: Destroyed while process ("/usr/local/webots/resources/projects/controllers/void/void") is still running.
/usr/local/bin/webots: line 88: 25429 Bus error               (core dumped) "$webots_home/bin/webots-bin" "$@"
```

I'm running webots for a docker (so have to use --no-sandbox), I don't know if that could be the error.

And also the bus error changes but the rest of the error is the same.

##### sanindu 03/15/2021 09:42:19
<@&568329906048598039> please help me

##### Darko Lukić [Cyberbotics] 03/15/2021 09:44:33
That is strange


Can you try simplifying the code? It stopped working as soon as you introduced the multiprocessing?

##### sanindu 03/15/2021 09:46:24
`@Darko Lukić` It's not working...😟


😕

##### Rody El Hamod 03/15/2021 09:47:45
yes i have a working version with no processes. I tried to add the two processes in order to parallylise two functions and speed up the simulation

##### Stefania Pedrazzi [Cyberbotics] 03/15/2021 09:49:21
Did you try the official Docker image for Webots? Does it work?

Here you can find the environment setup we use:  [https://github.com/cyberbotics/webots-docker/blob/master/Dockerfile](https://github.com/cyberbotics/webots-docker/blob/master/Dockerfile)

##### Darko Lukić [Cyberbotics] 03/15/2021 09:50:40
[https://cyberbotics.com/doc/guide/starting-webots#windows](https://cyberbotics.com/doc/guide/starting-webots#windows)

What do you get when you run Webots with the `--sysinfo` flag?

##### James Le Poidevin 03/15/2021 09:52:09
thanks, I'm using my companies docker package for webots but try your version.

##### sanindu 03/15/2021 09:52:44
What's meant by --sysinfo flag?

##### Darko Lukić [Cyberbotics] 03/15/2021 09:58:26
The `print()` should be visible only after the `robot.step()` is called. Make sure `robot.step()` is called after the `print()` function.

##### sanindu 03/15/2021 09:59:41
What's meant by *--sysinfo* \_flag\_?


please help me...

##### DrVoodoo [Moderator] 03/15/2021 10:04:38
Do not use the everyone tag

##### sanindu 03/15/2021 10:05:13
ok

##### DrVoodoo [Moderator] 03/15/2021 10:06:19
Regarding the --sysinfo flag.


It returns various bits of information regarding the hardware and OS that you are currently running webots on


If you are unclear how to run programs from the command line in windows


[https://www.wikihow.com/Run-a-Program-on-Command-Prompt](https://www.wikihow.com/Run-a-Program-on-Command-Prompt)

##### bellino 03/15/2021 13:14:41
What is the unit of the gaussianWidth field in the DistanceSensor? Can't seem to find this in the docs

##### Stefania Pedrazzi [Cyberbotics] 03/15/2021 13:29:16
`gaussianWidth` doesn't have any unit, it is just a factor applied to the DistanceSensor aperture to compute the standard deviation of the gaussian distribution of the sensors ray weights.

##### bellino 03/15/2021 13:29:44
right that makes sense, thank you!

##### nelsondmmg 03/15/2021 13:48:05
Hi, I'm trying to put a pedestrian crossing in my environment but the strips do not show. How can I make the texture appear? Thanks
%figure
![pedStrips.png](https://cdn.discordapp.com/attachments/565154703139405824/821016913459019886/pedStrips.png)
%end

##### Stefania Pedrazzi [Cyberbotics] 03/15/2021 13:56:06
Hi, it seems there is an issue with the `PedestrianCrossing` PNG texture (with transparency) that is not correctly displayed. Could you please open an issue on GitHub (

[https://github.com/cyberbotics/webots/issues/new?assignees=&labels=&template=bug\_report.md](https://github.com/cyberbotics/webots/issues/new?assignees=&labels=&template=bug_report.md)) ? We will then have a look at it as soon as possible.

##### nelsondmmg 03/15/2021 14:01:42
Done!

##### AleBurzio 03/15/2021 16:01:51
Hi everyone! I am trying to make a pothole detection system for an autonomous vehicle and I was wondering if there was a way to model the road directly to add the potholes (maybe applying an ElevationGrid to a road segment? But I'm not too sure about how to do that)

Does anyone have an idea?

##### Olivier Michel [Cyberbotics] 03/15/2021 16:20:33
You should probably create your own `RoadWithPothole.proto` file that could use a ElevationGrid or several Boxes to model the pothole...

##### AleBurzio 03/15/2021 16:42:03
Thank you very much! Is there any sample world that has a road proto that uses an elevation grid I could use as reference? I tried looking at the CH\_Vens world and I don't think the road is modeled that way there, but I might be looking in the wrong place

##### Zändi 03/15/2021 17:44:20
Hey

Where can I translate a Phyton Code into C++?

##### Gregory Rasputin 03/15/2021 17:45:02
In your mind

##### Zändi 03/15/2021 17:45:39
Can you help me please? I am a beginner 😅


its a really short one

##### Gregory Rasputin 03/15/2021 17:46:54
"Short one" - explain - perhaps show the python code


I suggest you start by "reading code". Look at the samples provided in Webots and try to understand how the code works.

##### Zändi 03/15/2021 17:47:58
left\_ir\_value = left\_ir.getValue();

    right\_ir\_value = right\_ir.getValue();



    void print ("left: {} right: {}".format(left\_ir\_value, right\_ir\_value));

    left\_speed = max\_speed;

    right\_speed = max\_speed;



    if (left\_ir\_value > right\_ir\_value) and (6 < left\_ir\_value 15);

      print ("Go left");

      left\_speed = -max\_speed

    else (right\_ir\_value > left\_ir\_value) and (6 < left\_ir\_value 15);

      print("Go right");

      right\_speed = -max\_speed;



     left\_motor.setVelocity(left\_speed);

     right\_motor.setVelocity(right\_speed);

##### Gregory Rasputin 03/15/2021 17:49:04
OK I will share my teaching resources with you. These use C and start from the beginning. Here we go ... [http://colin-price.wbs.uni.worc.ac.uk/Courses\_2020\_21/Comp2403/Workshops.htm](http://colin-price.wbs.uni.worc.ac.uk/Courses_2020_21/Comp2403/Workshops.htm)

##### Zändi 03/15/2021 17:50:14
Alright, thank you Ill try

##### Gregory Rasputin 03/15/2021 17:50:34
Good luck my friend 👍

##### Master.L 03/16/2021 01:24:08
Hello! I have a question.

I want to control the speed of the end-effector of the robot arm, not the speed of each joint. What should I do?

##### Luftwaffel [Moderator] 03/16/2021 01:24:33
You have to use inverse kinematics


what robot and what operating system are you on?

##### Master.L 03/16/2021 01:28:31
I am currently working on a project on Linux-ROS.

We are also using a delta robot, and we have solved the inverse kinematics of the delta robot to move the end-effector to the desired position.

When moving, I want to control the speed of the end-effector like a motion profile.


I want to include acceleration/deceleration in the speed.

##### Luftwaffel [Moderator] 03/16/2021 01:35:38
use moveit with ROS for exact motion control


but velocity control for the end effector in cartesian coordinates is not easy. You can do it with jacobian matrices, but you'll get a


an error drift


I managed to do a clean ik velocity control, but it requires IKFast, so you would have to compile a solver for your robot

##### Master.L 03/16/2021 02:20:47
Currently, I have created my own motion profile.

And it calls the position to each joint by rosservice as much as the resolution of the motion profile.

The time\_step is progressed in units of 32mm/s, and the project proceeds by calling time\_step after the joint position rosservice call.

There are several problems with this.

1. For 32mm/s, I cannot check whether each joint has moved to the desired position.

2. Simulation does not move in the middle of execution.

Checking other examples, it was a method of giving the first position once and continuing the time\_step without giving a position every time\_step.

Am I wrong the way I do it?

##### Luftwaffel [Moderator] 03/16/2021 02:26:21
use the trajectory follower example


publish a joint trajectory


[https://github.com/cyberbotics/webots/tree/master/projects/robots/universal\_robots/resources/ros\_package/ur\_e\_webots/src/ur\_e\_webots](https://github.com/cyberbotics/webots/tree/master/projects/robots/universal_robots/resources/ros_package/ur_e_webots/src/ur_e_webots)

##### Master.L 03/16/2021 02:55:01
Thank you!! but I want to control webots with ros without moveit. Could you please give me an example on how to do this?

##### Elizaveta\_Potemkina 03/16/2021 11:53:28
hey guys, is there a way in webots (using Python) to make the robot wait between executing one function and another? I have a rotational motor that needs to close a claw around an object before a sensor takes a reading. It's called using setPosition, and takes some time to actually get there, but the next line in the code is already to read the sensor, so it doesn't manage to close the claw. I believe time.sleep() wouldn't work, since I've tried to use that for some previous testing but it just stopped the controller for some reason, and I need setPosition to still be executing while the robot waits

##### Chernayaten 03/16/2021 12:02:32
I used a positionSensor to do the exact thing you're trying to do and had it loop through a while function until the diff was small enough. There might be a better way to do it though

##### Olivier Michel [Cyberbotics] 03/16/2021 12:33:41
Simply call the Robot.step() method with the number of milliseconds you need to wait.

##### Elizaveta\_Potemkina 03/16/2021 12:41:14
I ended up using a while loop to just iterate +=1 on an integer variable for a few timesteps. Will probably switch to robot.step(milliseconds) to be more efficient

##### h.sciascia 03/16/2021 15:38:47
Hello Everyone ! Can I deactivate completely the PID of my motors ?

##### Olivier Michel [Cyberbotics] 03/16/2021 15:49:24
Yes, if you control the motor in torque, Webots will not use it's built in PID controller.

##### madberg 03/16/2021 17:03:57
Is the world used for the example recognition segmentation image [0] available somewhere? 🙂



[0] [https://www.cyberbotics.com/doc/reference/recognition#](https://www.cyberbotics.com/doc/reference/recognition#)!

##### Darko Lukić [Cyberbotics] 03/16/2021 17:05:21
Yes, you can find it here:

[https://github.com/cyberbotics/webots/blob/master/projects/samples/devices/worlds/camera\_segmentation.wbt](https://github.com/cyberbotics/webots/blob/master/projects/samples/devices/worlds/camera_segmentation.wbt)

##### madberg 03/16/2021 17:05:50
Thanks!

##### reinaldobianchi 03/16/2021 19:21:44
Hello! Has anyone ever had a "Shader compilation fail" when opening Webots?



%figure
![Captura_de_Tela_2021-03-16_as_15.53.01.png](https://cdn.discordapp.com/attachments/565154703139405824/821463407995650079/Captura_de_Tela_2021-03-16_as_15.53.01.png)
%end


I Have just donwnloaded it to a new computer...


GPU ATI Radeon HD 4350...

##### Darko Lukić [Cyberbotics] 03/16/2021 19:39:41
[https://www.cyberbotics.com/doc/guide/verifying-your-graphics-driver-installation](https://www.cyberbotics.com/doc/guide/verifying-your-graphics-driver-installation)

##### reinaldobianchi 03/16/2021 19:41:09
But why a compiler error?

##### Olivier Michel [Cyberbotics] 03/16/2021 19:41:57
Because the graphics card is too old and doesn't support recent versions of OpenGL and corresponding shading language.

##### reinaldobianchi 03/16/2021 19:42:35
Usually I get the message "This computer does not support OpenGL 2..."


After installation.


This message was very criptic 🙂

##### Olivier Michel [Cyberbotics] 03/16/2021 19:43:27
AMD was not very good at being fully OpenGL compliant. This driver may in theory support OpenGL 3.3, but not in practice...

##### reinaldobianchi 03/16/2021 19:44:02
That's why there is no error after installation?


I am a teacher and this semester I am using Webots with 80+ students... I am facing errors I have never seen before 🙂

##### Luftwaffel [Moderator] 03/16/2021 20:12:20
`@reinaldobianchi` Webots requires 3rd gen intel cpus. For more detail, you can check this link. [https://www.katsbits.com/codex/blender-opengl-compatibility/](https://www.katsbits.com/codex/blender-opengl-compatibility/) OpenGL 3.3 has to be supported

##### reinaldobianchi 03/16/2021 20:14:10
Yes... What happened is that I trusted that the GPU was OK when no message of error or warning appeared after I installed it. Usually old or incompatible GPUs are screened out really fast...


This one wasn't.

##### Luftwaffel [Moderator] 03/16/2021 20:14:41
ATI Radeon HD 4350 should be supported. Perhaps the driver needs an update

##### reinaldobianchi 03/16/2021 20:15:46
Already did that... bus it is an old GPU...

##### Luftwaffel [Moderator] 03/16/2021 20:17:10
OpenGL 3.3 is installed? and it still does not work? Are you sure no integrated GPU might be accidentally used? Especially on Linux dual graphics can be tricky at times


what CPU are you using?

##### reinaldobianchi 03/16/2021 20:17:26
Windows... 😦


OpenGL installed...


single gpu

##### Luftwaffel [Moderator] 03/16/2021 20:18:00
which one?


CPU I mean

##### reinaldobianchi 03/16/2021 20:19:09
i5


not sure which one


have to check with the student

##### Luftwaffel [Moderator] 03/16/2021 20:19:35
I bet it's 1st or 2nd gen intel

##### reinaldobianchi 03/16/2021 20:19:40
probably

##### Luftwaffel [Moderator] 03/16/2021 20:19:52
it might try to use the integrated graphics, which dont support the openGL 3.3 version

##### reinaldobianchi 03/16/2021 20:19:55
old computer, as the one he was using fried...

##### Luftwaffel [Moderator] 03/16/2021 20:20:07
you could try disabling integrated gpu in bios

##### reinaldobianchi 03/16/2021 20:21:19
I will do that also...

##### Luftwaffel [Moderator] 03/16/2021 20:21:25
good luck!

##### reinaldobianchi 03/16/2021 20:21:27
Thanks!

##### Srivastav\_Udit 03/16/2021 22:21:06
Can someone please help me resolve this error: fatal error: webots/servo.h: No such file or directory

##### Luftwaffel [Moderator] 03/16/2021 23:06:00
Is the library present? servo.h is not a standard library of webots


I take it you based your controller code on some other? Make sure you provide all include libraries

##### Srivastav\_Udit 03/16/2021 23:17:58
Yes, is there anyway I can get the servo.h file?

##### Luftwaffel [Moderator] 03/16/2021 23:19:01
where did you get your code from? That code will surely have it

##### Srivastav\_Udit 03/16/2021 23:24:14
I'll have another look, thanks!

##### GiggityGiggity 03/17/2021 04:37:40
Hi could some one guide me on how to run my virtual environment in python controller.

##### xjs 03/17/2021 06:34:19
hi,I have encountered some troubles. After I joined the tactile sensor in the simulation of quadruped robot, I want to realize the robot to move backward for one movement cycle and then move forward after touching the obstacle. But I don't know how to write a program to realize it. Can anyone give me some suggestions? Thank you👀

##### Tahir [Moderator] 03/17/2021 14:35:27
any suggestions on how to do test driven development with Webots ?


running Webots from script in background testing everything and shuting it down


thanks for any advice in advance

##### Darko Lukić [Cyberbotics] 03/17/2021 15:28:10
Something like this?

[https://www.youtube.com/watch?v=CDOrTKQAOqs](https://www.youtube.com/watch?v=CDOrTKQAOqs)


We are doing it in our CI:

[https://github.com/cyberbotics/webots/tree/master/tests](https://github.com/cyberbotics/webots/tree/master/tests)



You can add a Supervisor controller to your simulation which will perform the tests and close the simulation in the end.

##### James Le Poidevin 03/17/2021 15:47:05
Hello, Do you know what could be causing this error ?

```
AL lib: (EE) ALCplaybackAlsa_open: Could not open playback device 'default': Device or resource busy
ALSA lib pcm_dmix.c:1052:(snd_pcm_dmix_open) unable to open slave
```

##### Darko Lukić [Cyberbotics] 03/17/2021 16:02:32
Webots has problem accessing the playback device. It is not critical for the simulation, only the sound will not work.

##### James Le Poidevin 03/17/2021 16:02:52
Ok thanks

##### Tahir [Moderator] 03/18/2021 07:51:57
Great thanks I was looking for something similar

##### Götz 03/18/2021 16:10:34
Good afternoon! Can a Supervisor control all robots in a world? I'm trying to have one supervisor that opens an API port to control a small fleet of robots....


I've been through the docs, to me it looks like no. But I might very well have overlooked something...

##### Darko Lukić [Cyberbotics] 03/18/2021 17:36:50
You cannot control motors or read sensors from the other robots, but you can change everything in the scene tree (for example translation/rotation of the robots). You can use emitter/receiver to send and receive data from the other robots:

[https://www.cyberbotics.com/doc/reference/emitter](https://www.cyberbotics.com/doc/reference/emitter)

[https://www.cyberbotics.com/doc/reference/receiver](https://www.cyberbotics.com/doc/reference/receiver)

##### Götz 03/18/2021 17:37:53
Okay, thanks a lot!


And another one... 😉

I'm running a world with 10 robots which are controlled via REST API calls on an AWS GPU instance. I'd like to give access to the visualization of the simulation to students who **control their robots** but **not to the full Webots** interface. I've tried the streaming server and it gives me very bad performance and nearly eats up all of my laptops CPU. Using a VNC connection to the AWS instance works, but then I have to stream the simulation to the students using web conferencing software.

Is there any other way to get the simulation from a headless server to viewers?

I've read in the news section a new web UI is coming up, would this help in my case?

##### Darko Lukić [Cyberbotics] 03/18/2021 17:49:16
In general, the web streaming should produce a minimal overhead. Did you use `x3d` or `mjpeg` streaming?

[https://cyberbotics.com/doc/guide/web-streaming](https://cyberbotics.com/doc/guide/web-streaming)

##### Götz 03/18/2021 17:49:29
X3D


Didn't get mjpeg to work...


I was a bit surprised myself about the performance.

##### Darko Lukić [Cyberbotics] 03/18/2021 17:55:22
Just to check, everything is fine on the server, but your laptop has performance issues just by showing the simulation in a web browser?

##### Götz 03/18/2021 17:59:17
Yup, this is how it looks to me. So the client should not get a lot of load during streaming?

##### Darko Lukić [Cyberbotics] 03/18/2021 18:00:33
No, I don't think we have ever had similar problem

##### Götz 03/18/2021 18:00:37
I better test with another client then...

##### Darko Lukić [Cyberbotics] 03/18/2021 18:01:06
What about this simulation:

[https://lukicdarkoo.github.io/webots-example-visual-tracking/master/#visual\_tracking](https://lukicdarkoo.github.io/webots-example-visual-tracking/master/#visual_tracking)

Do you experience performance issues with that simulation?


Maybe your simulation is too complex


If the issue persists please report it here:

[https://github.com/cyberbotics/webots/issues/new?assignees=&labels=&template=bug\_report.md](https://github.com/cyberbotics/webots/issues/new?assignees=&labels=&template=bug_report.md)

so we can investigate it.

##### Götz 03/18/2021 18:03:03
I took the Student Robotics Competition world as a base because it looks quite basic. I‘m afk right now, let me check. Would be really cool to get this working.


Thanks, will get back!

##### Hoplite 03/18/2021 23:09:56
Hello everyone, I have just begun using Webots and I have a question about transferring code to a robot. I read the documentation on the website, but it wasn't very clear. My group and I are trying to build a small drone and a robotic arm. We are probably going to use an arduino and I was wondering how can I cross-compile a webots controller code into arduino code (I think it is c++)


Also, does it matter if our webots controller is in C++ or Python ??

##### Olivier Michel [Cyberbotics] 03/19/2021 08:00:48
It all depends if your arduino board support C++ and Python. The idea is to write a wrapper between the Webots API and your hardware.


See [https://cyberbotics.com/doc/guide/transfer-to-your-own-robot](https://cyberbotics.com/doc/guide/transfer-to-your-own-robot)

##### James Le Poidevin 03/19/2021 08:24:51
Hello, I just wanted to know if there was anything integrated in webots that allows me to projected the FOV of a camera onto the floor or will i have to pas directly by openGL ?(For example for a NavCams or LocCams on a rover)

##### Olivier Michel [Cyberbotics] 03/19/2021 08:45:03
Not sure to understand your question... Do you want to see the intersection of the camera frustum with the floor?


Did you check the View menu, Optional Rendering, Show Camera Frustum?

##### James Le Poidevin 03/19/2021 09:02:12
Something like this
%figure
![FOV-airborne-image.png](https://cdn.discordapp.com/attachments/565154703139405824/822394517906653234/FOV-airborne-image.png)
%end


But only show like a square on the floor showing what the robot can see

##### Olivier Michel [Cyberbotics] 03/19/2021 09:19:07
Well, I believe this is not directly possible, but the View menu, Optional Rendering, Show Camera Frustum option will let you see what the robot see at the top of the frustum.

##### James Le Poidevin 03/19/2021 09:21:40
Ok thank you i'll look at OpenGL to see if it's possible . The Camera Frustum is good but the Frustum doesn't touch the ground so it won't work for what i need.


Hello again, I have a question about implementing a bogie (like what is on the sojourner), I've go the exact same hinge joint config as on the sojourner but mine messes up sometime. It often works fine but on some occasions it's as if the joint goes solid. (cf video)
> **Attachment**: [Bogie-test.mp4](https://cdn.discordapp.com/attachments/565154703139405824/822455077415026708/Bogie-test.mp4)

##### Olivier Michel [Cyberbotics] 03/19/2021 13:14:19
It looks like the left and right joints are connected, isn't it?

##### James Le Poidevin 03/19/2021 13:15:29
Yes it's 1 solid from the wheel on the left to the one on the right (of the bogie)

##### Olivier Michel [Cyberbotics] 03/19/2021 13:21:12
Then depending on the constraint on the other side, the behavior you get may be normal, isn't it?


If you would like to see the same behavior as the sojouner, you should probably decouple the left and right hand sides.

##### James Le Poidevin 03/19/2021 13:30:45
I have the same config as the Sojouner 1 Solid -> hinge joint(with no devices) -> 1 solid connected to the two wheels
%figure
![Capture_decran_du_2021-03-19_14-29-23.png](https://cdn.discordapp.com/attachments/565154703139405824/822462101540175902/Capture_decran_du_2021-03-19_14-29-23.png)
%end


The image doesn't show much but it explains what i am trying to reproduce.

##### Götz 03/19/2021 17:46:03
Just a heads up: making sure the AWS GPU is actually used by Webots 😁 and using mjpeg for the stream helped immensely, thanks.

##### pnaraltnsk 03/19/2021 18:20:32
Hi, I have implemented the code and the calculations worked fine but when I try to rotate my robot, since the angle values changes unexpectedly, it keeps turning. For example, angle value changes from 44 to -110. Is there a way to fix this? What am I doing wrong? Thank you in advance.
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/822535027258687528/unknown.png)
%end

##### Seedow 03/19/2021 22:07:47
Hey everyone!

I am trying to put together a robot with a distance sensor on it, for navigation and mapping purposes. I ran into a problem when I try to import 3D models for walls (tryed .stl and .obj files, exported from Autodesk Inventor or Blender).

As you can see on the attached video, the distance sensor returns the distance to the furthermost wall of the mesh that's in range. I also tried it with the Webots box shape, and it's working properly. The mesh is in the shape node of a Solid, and the bounding object of the solid is referenced to the shape. I tried with laser and generic sensor types.

Did anybody have any similar experience importing meshes? Any idea how can I overcome it?
> **Attachment**: [robot\_8.mp4](https://cdn.discordapp.com/attachments/565154703139405824/822592215268065300/robot_8.mp4)

##### Icy\_Flurry 03/19/2021 22:15:31
how do i add an image texture to a Wall or Solid?


i dont see the pbrappearance option

##### DDaniel [Cyberbotics] 03/19/2021 22:18:43
<@288787843042770945> This problem was solved already for indexedFaceSets, are you using the latest version of webots? Otherwise what might be causing the issue is if the normals of the faces aren't pointing in the right direction (they should point out of the solid, not in. You can visualize them from the optionalrendering under View menu)


`@Icy_Flurry` did you add a Shape children to the solid?

##### Icy\_Flurry 03/19/2021 22:20:21
no, ill try that


that did it, thanks!


wait, i cant see the image


do i need to do something to make it visible?

##### DDaniel [Cyberbotics] 03/19/2021 22:38:16
`@Icy_Flurry` set the image in the baseColorMap and define a geometry for the object in the Shape

##### Icy\_Flurry 03/19/2021 22:40:55
what should the geometry be defined as?

##### DDaniel [Cyberbotics] 03/19/2021 22:43:58
Depends what you're trying to do, for a wall you can use a Box

##### Icy\_Flurry 03/19/2021 22:44:33
that worked, thanks

##### Seedow 03/20/2021 00:30:10
This is how it looks like after I render the normals. Is this how they should look like? I've just updated to the R2021a version this week.
%figure
![robot_1.png](https://cdn.discordapp.com/attachments/565154703139405824/822628047491694622/robot_1.png)
%end


I installed the newest R2021b nightly build, it seems like it solved the problem. I was affraid to use nightly, because it might be unstable. How bad is it actually?

##### Iris230 03/20/2021 09:11:44
hello guys, I'm wondering that how can I fix this error? I just want to follow this step in the document
%figure
![error.png](https://cdn.discordapp.com/attachments/565154703139405824/822759303177568296/error.png)
%end



%figure
![step.png](https://cdn.discordapp.com/attachments/565154703139405824/822759358566891530/step.png)
%end

##### Darko Lukić [Cyberbotics] 03/20/2021 10:36:16
We have dozens of automated tests running in our CI, testing most of the API functions, physics, parser, rendering... We make sure they all pass before the nightly builds. Stable releases are tested manually in addition to the automated tests.



A few important things to note about the nightly builds:

- There are revisions and new versions. In the revisions, we are trying not to break the API, but only to fix the bugs. In the new versions, we are introducing new features and changes.

- A documentation targeting the new revision is available with the `?version=master` suffix, while documentation targeting the new version is available with the `?version=develop` suffix. For example [https://www.cyberbotics.com/doc/reference/supervisor?version=develop](https://www.cyberbotics.com/doc/reference/supervisor?version=develop)

- By using the nightly builds you are helping us by reporting bugs before the release.

- If you need a specific bug fixed and you need to be on the safe side it is a good idea to pick a nightly build that works well with your simulation and stick with it.

##### danielvicente 03/20/2021 11:31:31
Hi guys, I'm trying to run webots with an extern controller but I'm getting this error "ModuleNotFoundError: No module named 'controller'".  Did I do anything wrong in the env variables?
%figure
![Screenshot_2021-03-20_at_11.30.54.png](https://cdn.discordapp.com/attachments/565154703139405824/822794481522311188/Screenshot_2021-03-20_at_11.30.54.png)
%end

##### Darko Lukić [Cyberbotics] 03/20/2021 11:51:35
Delete the `add` prefix

##### danielvicente 03/20/2021 11:53:55
Still get the same error

##### Darko Lukić [Cyberbotics] 03/20/2021 11:54:54
What happens if you `ls ${PYTHONPATH}`?

##### danielvicente 03/20/2021 11:55:43

%figure
![Screenshot_2021-03-20_at_11.55.31.png](https://cdn.discordapp.com/attachments/565154703139405824/822800570942750780/Screenshot_2021-03-20_at_11.55.31.png)
%end


It's working now with python 3.7 instead of 3.8

##### bellino 03/20/2021 15:24:44
hello, I'm trying to run a webots simulation in my browser but it doesn't seem to work. I follow the quickstart tutorial here: [https://www.cyberbotics.com/doc/guide/web-simulation](https://www.cyberbotics.com/doc/guide/web-simulation) and after I start the servers using the given command it tells me: "session server created on port x; simulation server created on port x+1". So far so good, but when I try to connect to ws://localhost:5924 (5924 is where the simulation server is running) I get the error shown in the image. When I click on "here" it just resets but next time I try to connect the same thing happens.  Am I missing a step?
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/822853172468908082/unknown.png)
%end

##### ms71 03/20/2021 15:45:39
Hi, i am playing around with "Tutorial-E-puck-for-ROS2-Beginners", is there a feature, that the robot is just driving around and discover the full area.

##### aslisevil 03/20/2021 16:33:15
Hello, I am trying to calculate the angle between a target point and Nao robot. I tried to do vectoral angle calculation but it does not give correct result. Any ideas of how to do this? Sorry if the question seems a bit odd I am new to webots.

##### Luftwaffel [Moderator] 03/20/2021 21:50:17
`@aslisevil` I assume you only need the 2D angle (Thetha) around the vertical axis


for that use atan2()


in python it should be:

from math import atan2

theta = atan2(x1-x2, y1 - y2)

##### xjs 03/21/2021 06:59:15
Hello, what kind of objects can be identified in camera recognition, except in the example; how to add the recognition objects that users like

##### watchdogs132 03/21/2021 08:23:04
Hello . I wanted to know , in the coulomb friction field , do I have to set the coefficient of friction between material 1 and 2 ?

##### Max\_K 03/21/2021 13:55:04
Hello. I am working on a Gripper mounted on a robot. Does someone know why my fingers of the Gripper does not collide with any objects while i move the robot. And why do my fingers disconnect from my model and hanging around at the original position when i moved the robot and let an object collide with the fingers?

##### Luftwaffel [Moderator] 03/21/2021 17:32:06
`@Max_K` which gripper on which robot? how did you attach it?


`@watchdogs132` under world info > contact properties, you can specify the friction between two materials. All these settings only apply to interactions between those two materials

##### Max\_K 03/21/2021 17:39:31
Thanks for the reply. It's an self-desigend 3F-Gripper which grep objects from above on a robotino3. I exported the gripper from blender as .dae and created some hingejoints with the finger as EndPoint. I solved it meanwhile by applying first a Transform->Connector->and then Hingejoint.

Now I am trying to pick a puck or small cylinder, but it just falls to the ground. Is there something like a glue?

##### Luftwaffel [Moderator] 03/21/2021 17:41:44
you only need a connector node if you want to connect and disconnect something dynamically


I'd recommend you open the ure.wbt sample world and right click on one of the robots and convert it to base nodes


and have a look how they are structured. it's the universal robotics arms with a 3f gripper attached to them

##### Max\_K 03/21/2021 17:45:21
ok there is an connector node for picking with 3f gripper the bottles?

##### Luftwaffel [Moderator] 03/21/2021 17:45:45
no, you should use the fingers and the physics interactions

##### aslisevil 03/21/2021 18:59:54
thank you for the feedback but unfortunately it did not work. To calculate I took robot's rot vec and target's translation vector. Results were incoherent.

##### Luftwaffel [Moderator] 03/21/2021 19:33:35
`@aslisevil` the x and y values in my example were the both the translation values


[https://en.wikipedia.org/wiki/Inverse\_trigonometric\_functions](https://en.wikipedia.org/wiki/Inverse_trigonometric_functions) take a look at that picture on the right side.


so you should use the atan2 function, and put in the distances in the 2 horizontal axis


that should be the values from the translation vector of both


Of course this only works, if both are in the same coordinate system (world)


`@aslisevil` what programming language do you use?

##### Zändi 03/21/2021 20:33:36
hi guys 🙂

how can I average 3 output values from the robot E-Puck and use this for further processing?

##### Luftwaffel [Moderator] 03/21/2021 20:37:02
`@Zändi` just get all 3 values, and then do with those values whatever you want.  The simplest would be` v_avg = (v1 + v2 + v3)/3`

##### Zändi 03/21/2021 20:41:40
thanks, how can I declare v\_avg?

my basic is:

double left\_ir\_value = left\_ir->getValue();

double right\_ir\_value = right\_ir->getValue();



i want the average of the left\_ir\_value (infrared sensors for line following)


double left\_ir\_avg;

 left\_ir\_avg = (left\_ir\_value + left\_ir\_value + left\_ir\_value)/3;

##### Luftwaffel [Moderator] 03/21/2021 20:44:56
that is programming basics

##### Zändi 03/21/2021 20:45:00
does this make sense?

##### Luftwaffel [Moderator] 03/21/2021 20:45:07
i'm not good with c and c++

##### Zändi 03/21/2021 20:45:13
I am a beginner, sorry

##### Luftwaffel [Moderator] 03/21/2021 20:45:50
with Python I can help, but this is not webots specific. Just google online how to set and manipulate variables


and if you are a total beginner, you might want to research a bit, on what language to learn


Unless you are not required to do C or C++ (which one do you use?), I would recommend Python, as it is much easier to understand and more user friendly

##### Zändi 03/21/2021 20:47:30
Thank you. I must use c++

##### Luftwaffel [Moderator] 03/21/2021 20:50:44
then use google a lot. stack-overflow etc. are your friend

##### Zändi 03/21/2021 20:51:47
alright, thanks

##### pnaraltnsk 03/21/2021 22:30:04
Hi, I am trying to rotate my robot around Z-axis using this code.  I followed exactly the same steps on this resource [https://matthew-brett.github.io/transforms3d/reference/transforms3d.axangles.html](https://matthew-brett.github.io/transforms3d/reference/transforms3d.axangles.html) .According to this everything should work fine but Nao robot doesn't rotate as it should. When I write rotate(-180), it rotates 143 degrees or rotate(10) it rotates 154 degrees. Any ideas of what is wrong in the code? Thank you in advance.
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/823322601974661170/unknown.png)
%end

##### Luftwaffel [Moderator] 03/21/2021 22:37:13
all those calculations use Radians


you have to convert your rot\_degree into radians


rot\_radian = rot\_degree * pi / 180

##### pnaraltnsk 03/21/2021 23:09:03
Thank you, it worked!

##### aslisevil 03/21/2021 23:32:46
thank you for the response. Currently, I am able to calculate the angle correctly. When Nao starts with 1.57 rad angle, it rotates correctly towards the target point. But when it starts with a different angle it fails to rotate correctly. 'target\_angle' is the angle that is calculated with atan2. I tried to subtract target\_angle from nao\_angle which is the angle in axis-angle. But it didn't work. 😦
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/823338380301566052/unknown.png)
%end

##### Luftwaffel [Moderator] 03/21/2021 23:41:54
is the nao angle correct? This code can only work, if the axis in the rotation field points straight up


and why do you take -y?


just use the relativeY in atan2


and remove the `if target_angle` The angle given is still in radians


I'd really recommend using radians only. Degrees screw things up


pi = 180 degrees. 2*pi is a full circle.

##### Stefania Pedrazzi [Cyberbotics] 03/22/2021 06:59:17
Any `Solid` object whose `recognitionColors` field is set can be recognized from the `Camera.Recognition` functionality:

[https://www.cyberbotics.com/doc/reference/recognition](https://www.cyberbotics.com/doc/reference/recognition)

Some of the distributed objects (cars, street furniture, etc.) already have the `recognitionColors` field set, but if not you can set it yourself just by modifying the PROTO. Here is an example:

[https://github.com/cyberbotics/webots/blob/master/projects/objects/balls/protos/SoccerBall.proto#L47:L49](https://github.com/cyberbotics/webots/blob/master/projects/objects/balls/protos/SoccerBall.proto#L47:L49)


Which version of Webots are you using? Do you get any errors in the Webots console?

Did you try first to stream directly from Webots without starting a session server and a simulation server, i.e. as explained in the `Web Streaming`([https://www.cyberbotics.com/doc/guide/web-streaming](https://www.cyberbotics.com/doc/guide/web-streaming)) section?

##### Timcampy 03/22/2021 08:18:12
Hi, i am new to webots and i need help. The controller that i want to compile, does not want to compile. The error is makefile: no such file in directory. Does anyone know how to edit the INCLUDE variable from the Makefile to link to the correct directory?

##### Stefania Pedrazzi [Cyberbotics] 03/22/2021 09:53:41
Hi, you can find some documentation in the header of `Makefile.include` that should be linked in your controller `Makefile`:

[https://github.com/cyberbotics/webots/blob/released/resources/Makefile.include](https://github.com/cyberbotics/webots/blob/released/resources/Makefile.include)

If your header and source files are not located in the root folder of the controller, then you have to set the `INCLUDE` and `C_SOURCES`/`CXX_SOURCES` so that they contain your files.

Here there is an example:

[https://github.com/cyberbotics/webots/blob/released/projects/robots/kuka/youbot/libraries/youbot\_control/Makefile](https://github.com/cyberbotics/webots/blob/released/projects/robots/kuka/youbot/libraries/youbot_control/Makefile)

##### Timcampy 03/22/2021 10:31:28
`@Stefania Pedrazzi` Thx. I already solved it.

##### Götz 03/22/2021 11:33:23
Hi all, I'm trying to build some kind of very simple battle arena. The robots are controlled via a REST API. What I've build so far looks like this:
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/823519729435803668/unknown.png)
%end


It is actually way to slow, running on a AWS GPU instance. And I get the "...your world may be to complex..."


I've stripped down as far as I can, no shadows and so on. I've tried working the basic timestep, but below 16 nothing is moving anymore, works with 24 or 32... but really slow.


Is there any hope this can be done in the first place or is having 12 robot instances just too much? It works pretty nicely with, say, 4 robots. But even than I get the "too complex" warning...


Any hints would be highly appreciated!



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/823520716213321818/unknown.png)
%end

##### Timcampy 03/22/2021 11:50:51
Hi, i was writing some basic code for my homework on robot. I encounter weird issue for coding part. I write same if block and it execute differently. I don't know how to fix the issue. First If execute, reset the distance equal to 0 and match how i want it to be. However, other second if block that has same exact code execute differently.


the second code didn't execute properly and freeze
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/823524610346975262/unknown.png)
%end


I comment block one if block to execute other one

##### Darko Lukić [Cyberbotics] 03/22/2021 13:13:25
Your simulation seems to be relatively simple. In general, it should work just fine. Can you try deleting the nodes to identify what causes it work slowly? Try putting the `controller` field to `void` to isolate the impact of the controllers on the performance.

##### DDaniel [Cyberbotics] 03/22/2021 13:16:15
`@Timcampy` they're not the same, the second one has `oldX = Y` and the first one `oldY = Y`. Also it freezes because of the infinite loop, you don't change `Theta` so `newTheta` is always bigger than it.

##### Götz 03/22/2021 13:30:53
Hi Darko, do you mean reducing the number of robots? Or other non-robot nodes?

##### Darko Lukić [Cyberbotics] 03/22/2021 13:33:06
Both. Start by choosing a simple controller just move them around and then deleting the nodes, one by one, and comparing the performances

##### yanan 03/22/2021 14:36:14
Hi,  does anyone know whether we can get the mask of an image directly (from a camera on the drone) about one object (a car for example)?  thanks
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/823565743484174366/unknown.png)
%end

##### Stefania Pedrazzi [Cyberbotics] 03/22/2021 14:42:08
Hi, you should have a look at the `Camera.recognition` node:

[https://www.cyberbotics.com/doc/reference/recognition](https://www.cyberbotics.com/doc/reference/recognition)

This node has a segmentation functionality to automatically generate this kind of images. If you just need to get the car, then you could unset the `Solid.recognitionColors` of the other nodes.

Here is an example: [https://github.com/cyberbotics/webots/blob/master/projects/samples/devices/worlds/camera\_segmentation.wbt](https://github.com/cyberbotics/webots/blob/master/projects/samples/devices/worlds/camera_segmentation.wbt)

##### yanan 03/22/2021 14:43:02
thank you very much, Stefania, I'll have a look

##### Dorteel 03/22/2021 15:54:08
Hi! Is there an easy way to get the position and orientation of the Tool Center Point of a manipulator (UR-3) relative to the base frame? Tried using Transforms, but got stuck with it

##### danielvicente 03/22/2021 15:57:58
Hello, is the coordinate system in meters?

##### Dorteel 03/22/2021 16:01:52
Yes it is. And I saw that the transform node has a Position tab where I can see the relative position to the frame, but I'm not sure how to access it from a Supervisor node

##### Darko Lukić [Cyberbotics] 03/22/2021 16:05:25
Hello `@Dorteel`, you have to calculate it:

[https://cyberbotics.com/doc/reference/supervisor#wb\_supervisor\_node\_get\_orientation](https://cyberbotics.com/doc/reference/supervisor#wb_supervisor_node_get_orientation)

search for `Python Example`.



From the Supervisor node, you can either get the absolute pose of the a node or relative pose to the first parent node. Anything else you have to calculate.

##### Dorteel 03/22/2021 16:07:02
Thank you very much `@Darko Lukić` !

##### Götz 03/22/2021 17:15:36
Sigh... seems to be my controller, sim runs fine with a very basic collision avoidance Python controller even with 12 robots. My controller is actually a Python Tornado app going into a loop, listening for API commands and executing them. Finding the issue might be well beyond my dev capabilities, are there any things that come to your mind I could look for?  😔

##### Luftwaffel [Moderator] 03/22/2021 17:58:25
`@Götz` "world may be too complex" warning has nothing to do with the GPU. The limit will be the CPU. And it is usually limited by the speed of a single core. This makes servers less suited, as they have many weak cores.


It would be good to find out where the bottleneck actually lies.


Is every controller running in its own process (12 controllers for 12 robots)? or is it one controller running 12 robots?


I can take a look if you want

##### Götz 03/22/2021 18:00:38
Every robot is starting an instance of the python controller with customData=<portnumber>, the controller is then opening this port for the robot.

##### Luftwaffel [Moderator] 03/22/2021 18:01:34
send me your project and I can take a look

##### Götz 03/22/2021 18:01:52
The controller is working fine but is still more like a proof of concept. Just saying so it's not getting to embarrassing when you look at it. 😉

##### Luftwaffel [Moderator] 03/22/2021 18:02:35
😄 dont worry about it. Code usually looks messy until it's done


you can pm me, if you dont want to share publically

##### Götz 03/22/2021 18:02:51
[https://github.com/cloud-native-robotz-hackathon/robot-sim/blob/master/simulations/crash\_derby\_sim/controllers/srobo\_remote\_tornado/srobo\_remote\_tornado.py](https://github.com/cloud-native-robotz-hackathon/robot-sim/blob/master/simulations/crash_derby_sim/controllers/srobo_remote_tornado/srobo_remote_tornado.py)


Hey, I'm working for the worlds largest Open Source software company, sharing is caring... 😂


And BTW I'd be more then happy to have one controller controlling the robots... but I couldn't figure it out and a supervisor can't do it... if I'm correct...

##### Luftwaffel [Moderator] 03/22/2021 18:05:56
it would probably be slower too

##### watchdogs132 03/22/2021 18:19:13
Thank you for your reply .  I want to know do I have to set the friction coefficient between the surfaces in that field ?. In the sample world 'track' the coulomb friction is set at 300. However when it comes to coefficient of friction usually the values are like 0.5 0.6 something like that .

##### Luftwaffel [Moderator] 03/22/2021 18:37:09
I assume the friction was set to something that high as a workaround, to ensure non slip. If nothing is defined, default values are used


`@watchdogs132` [https://cyberbotics.com/doc/reference/contactproperties?tab-language=python](https://cyberbotics.com/doc/reference/contactproperties?tab-language=python) these are the default values

##### aslisevil 03/22/2021 20:55:12
thank you it worked.

##### Srivastav\_Udit 03/23/2021 02:39:12
What does the controlPID field do for rotational motors? I'm not seeing any changes when I'm setting different values for PID..


I'm essentially trying to draw a square but it isn't drawing a perfect one because of real world constraints, so I assumed changing values in the controlPID field would improve the robot's performance but that's not the case..

##### Luftwaffel [Moderator] 03/24/2021 02:23:44
`@Srivastav_Udit` Can you show us the issue in more detail? And you might want to read up on the documentation: [https://cyberbotics.com/doc/reference/motor](https://cyberbotics.com/doc/reference/motor)


but in general you should not have to change the PID values.  Webot's default method of controlling motors is very stable. Perhaps you can show a video of you project

##### main 03/24/2021 03:15:21
In contact properties, what goes in ‘material 1 ‘ and ‘material 2’ the PBR appearance name, or the name of the solids that are making contact?

##### Luftwaffel [Moderator] 03/24/2021 03:15:51
`@main` solids have a field called "contact material"

##### main 03/24/2021 03:18:28
Oh wow thank you

##### Master.L 03/24/2021 08:43:28
Hello I have a question.

I am trying to implement a vacuum gripper in webots.

I know you can use connectors to make vacuum grippers.

You need to add connectors for both the gripper and the box.

If so, should I add the connector to the child after converting the box to convert to base node?

##### Rico Schillings[Sweaty] 03/24/2021 08:44:17
Hey guys. In robocup we are using simspark in 3d-simulation league and we have a DRL framework with stable-baseline/ppo to learn kicks/walking etc. For the virtual competition this year I've implemented a external controller and connect it to our DRL, so I am able to learn in webots as well. Now I want to paralize  this process by using multiple simulation instances, but here's the problem: either the docker approach nor native (starting multiple webots instances and define WEBOTS\_PID to select instance\_X) is working. With docker I can't connect to the running instance inside the container (extern controller running locally/outside), with native webots instances it seems that the WEBOTS\_PID is ignored/not parsed correctly, cause it is always connecting to the same instance. I've seen some posts of solutions but no documentation is working. Would be nice if someone could help me? Further details: DRL implemented in Python, Controller/Behavior logic in Java (Client-Server communication between both)

##### Olivier Michel [Cyberbotics] 03/24/2021 08:46:06
Although it kinda works, the Connector is not the ideal way to model vacuum grippers. See details on this issue: [https://github.com/cyberbotics/webots/issues/2889](https://github.com/cyberbotics/webots/issues/2889)

##### Master.L 03/24/2021 09:02:09
Thank you `@Olivier Michel`. But I don't understand the content of the link you sent me.

Can you make it in a different way now than the way I said?

##### Olivier Michel [Cyberbotics] 03/24/2021 09:08:10
We should actually modify Webots to extend the connector node, so that it can connect with any solid node and works like a suction cup. Using a Connector node as it is currently implement doesn't work well to simulate a vacuum gripper.


I believe the modification of Webots is not very difficult, but is not on our roadmap yet. Any contribution (including from you) is welcome.

##### Darko Lukić [Cyberbotics] 03/24/2021 09:13:57
You can set a  `WEBOTS_TMPDIR` for each Webots instance and controller pair. See about the `WEBOTS_TMPDIR` here:

[https://cyberbotics.com/doc/guide/running-extern-robot-controllers#running-extern-robot-controller-with-the-snap-version-of-webots](https://cyberbotics.com/doc/guide/running-extern-robot-controllers#running-extern-robot-controller-with-the-snap-version-of-webots)

##### Srivastav\_Udit 03/24/2021 14:34:26
I'm having the same issue as this video [https://youtu.be/CDOrTKQAOqs](https://youtu.be/CDOrTKQAOqs) from 11:40 to 11:55

##### Rico Schillings[Sweaty] 03/24/2021 14:45:43
thanks for the hint, this brings me a bit closer to the solution. now I'm able to start multiple webot instances and connect to it with separated extern java controllers. But with the current approach (start ThreadPool and each thread create a new controller to specific webot instance) it crashes, since only 1 robot class should be created. So may I have to look for other controller-creation logic 🙂


sry, wrong answer link, thanks goes to `@Darko Lukić`  😉

##### Darko Lukić [Cyberbotics] 03/24/2021 15:20:12
In Python, we use the multiprocessing library to create multiple controllers. Probably there is something similar in Java

##### John520 03/24/2021 16:28:53
Hi guys, I'd like to connect the part on the left to the three links on the right. But I have no idea how to do it. Could you give me any advice? It is a closed-loop mechanism. By the way, I read through this tutorial:[https://cyberbotics.com/doc/guide/tutorial-6-4-wheels-robot](https://cyberbotics.com/doc/guide/tutorial-6-4-wheels-robot) and I think it is an open-loop system. I tried it myself and had no problem.
%figure
![Kazam_screenshot_00013.png](https://cdn.discordapp.com/attachments/565154703139405824/824318870398566410/Kazam_screenshot_00013.png)
%end


The local coordinate of the part on the left is not on the joints.

##### Darko Lukić [Cyberbotics] 03/24/2021 17:07:47
Check the Stewart Platform example, it is the closed-loop mechanism:

[https://cyberbotics.com/doc/guide/samples-demos#stewart\_platform-wbt](https://cyberbotics.com/doc/guide/samples-demos#stewart_platform-wbt)

##### John520 03/24/2021 17:19:32
Thank you, `@Darko Lukić`. I checked this model before. Do I need to move the part on the left to the correct pose so that the anchors of the three HingeJoints can be defined correctly?


Additionally, if the parts are connected correctly, when I control the rotation of the top link, will the lower two links (without control) rotate accordingly?


Thank you!

##### main 03/24/2021 17:39:03
What exactly is a supervisor controller/node?

##### Isha 03/24/2021 18:11:09
Hi! In the Webots, is it possible for two epuck robots to communicate via Bluetooth using python apis?

##### Luftwaffel [Moderator] 03/24/2021 23:18:49
`@Isha` Webots includes a transmitter and emitter node, which can be used for communication.


`@Rico Schillings[Sweaty]` I used stable baselines with parallel webots instances in the past. I'll pm you 🙂


`@main` [https://cyberbotics.com/doc/reference/supervisor](https://cyberbotics.com/doc/reference/supervisor) if a robot controller is a supervisor controller, it has all the normal robot controller functions, but expands its capabilities to do pretty much anything. Read the documentation to get an overview of all its functions

##### Olivier Michel [Cyberbotics] 03/25/2021 07:10:33
Beware that when you start Webots on Linux, there are two process created, one is named `webots-bin` and the other one is the launcher, called `webots`. The `WEBOTS_PID` variable correspond to the first one. You can check it by listing the content of the`/tmp/` folder which should contain a sub-folder with named `webots-PID` where `PID` is the value you should set in `WEBOTS_PID`. Let me know if that helps.

##### Rico Schillings[Sweaty] 03/25/2021 07:59:20
Thanks for this additional hint. Meanwhile I can connect to multiple instances, as well with the `WEBOTS_TMPDIR` solution of `@Darko Lukić` as also by reading the `WEBOTS_PID` from the subfolders you mentioned (even if modifying env-vars is not straight forward inside a java runtime..). But as already told, I have the problem with multiple robots per thread, so its only working with separated JVMs for each robot. So currently I am looking to switch to multiprocessing instead of multithreading in java or even switch our controller logic to Python to use its multiprocessing library and re-write our communication between java-python for the learning process

##### danielvicente 03/25/2021 09:10:12
Hello, I'm trying to run webots on fast mode but it doesn't do anything and runs like normal, I tried doing it with the menu option simulation > fast and also by running webots with the flag --mode=fast , none of the options worked. Anyone knows how to fix this? thank you

##### Olivier Michel [Cyberbotics] 03/25/2021 09:26:40
Normally the speedometer should indicate a value above 1 if your simulation is not too complex. Otherwise, it should display a value below 1 and the fast mode makes indeed no difference with the run mode in this case.

##### danielvicente 03/25/2021 09:27:24
the speedometer remains about the same in both modes, is that normal?

##### Olivier Michel [Cyberbotics] 03/25/2021 09:27:37
Yes, if it's below 1.


It means you are running Webots at the maximum speed.

##### danielvicente 03/25/2021 09:28:13
okay, thanks


I thought the 3d window was supposed to be black with fast mode enables

##### Olivier Michel [Cyberbotics] 03/25/2021 09:29:21
You can disable the rendering in the 3D rendering in the main window by pressing the button next to the fast button (the wireframe box).

##### danielvicente 03/25/2021 09:30:42
is there any way to do that through the command line?

##### Olivier Michel [Cyberbotics] 03/25/2021 09:30:53
Yes.


`webots --help` will help you.

##### danielvicente 03/25/2021 09:32:37
okay thank you

##### Master.L 03/25/2021 10:20:10
Hello, how can I increase the range of the distance sensor?

##### DDaniel [Cyberbotics] 03/25/2021 10:40:10
`@Master.L` you have to modify the look-up table accordingly, specifically the last row. [https://cyberbotics.com/doc/reference/distancesensor#lookup-table](https://cyberbotics.com/doc/reference/distancesensor#lookup-table)

##### Master.L 03/25/2021 10:59:15
Thank you `@DDaniel` !

##### Dorteel 03/25/2021 11:51:59
Hi! I'm trying to get the contact points of the UR3 arm to detect collisions, but I can't seem to get the contact points.  `getNumberOfContactPoints() `just gives 0, even through there are many contact points. I tried looking at the example with the cylinder\_stack world, but even that doesn't give the right contact points (it gives 4 contact points when the red cylinder is just in freefall). Can anybody explain how these points work or how they could be calculated?

##### Götz 03/25/2021 12:04:32
I'm getting into the InertialUnit to have my robots turn more exactly. So me not having an engineering background... when I test, I get these values (right are IU readings):
```Right turn

0 rad / 0 Deg = 0.05
1.5708 rad / 90 Deg = 1.57
3.14159 rad / 180 Deg = 3.14
4.71239 rad / 270 Deg = -1.57
6.28319 rad / 360 Deg = 0.05
```

So first thing: what is the smartest way to convert the values  into degrees from 1-360? Or even rad, but consecutive...


And then: when I use an IU to control turns, I do have to turn a bit, get yaw value, turn a bit... until I reach the desired angle. Right? So I would have to call robot.step on every loop run? Does this make sense perfomance-wise?


Thanks!

##### Darko Lukić [Cyberbotics] 03/25/2021 12:09:56
You can measure difference between two steps, if it is bigger than let's say 0.3 rad that means it means the robot has crossed 0/2pi


That's how a controller works in general


Did you set `includeDescendants` to `true`?

##### James Le Poidevin 03/25/2021 12:19:24
Hello, Is it possible to fill in the polygons on an imported mesh? (like the right screen on meshlab)
%figure
![Capture_decran_de_2021-03-25_13-17-57.png](https://cdn.discordapp.com/attachments/565154703139405824/824618473782902814/Capture_decran_de_2021-03-25_13-17-57.png)
%end

##### Stefania Pedrazzi [Cyberbotics] 03/25/2021 12:29:59
What is displayed in the Webots with white lines is the boundingObject and it is never "filled" but just displays the wireframe.

However the graphical object should automatically be displayed (as "filled"). If it is not, then you should first check if maybe the faces viewed from the back instead of the front. The IndexedFaceSet.ccw field lets you specify if faces are defined clockwise or counter-closkwise.

If this still doesn't solve the issue you should check if any warning is printed in the Webots console.

##### James Le Poidevin 03/25/2021 12:35:58
Sorry when i meant "filled" i mean that items could not pass in between the wires. I have a mesh in meshlab that i export in .stl (or .dae ...) and i want to use it as a floor for my simulation but the objects fall though it.

##### Olivier Michel [Cyberbotics] 03/25/2021 12:37:49
Did you set the boundingObject for the Solid node?

##### James Le Poidevin 03/25/2021 12:37:57
yes

##### Olivier Michel [Cyberbotics] 03/25/2021 12:38:38
Is it an IndexedFaceSet or an ElevationGrid?

##### James Le Poidevin 03/25/2021 12:39:05
indexedFaceSet

##### Olivier Michel [Cyberbotics] 03/25/2021 12:39:39
Collision detection with IndexedFaceSet nodes and small or large objects is sometimes buggy...

##### James Le Poidevin 03/25/2021 12:40:21
Ok It is a 1km floor so that could be it

##### Olivier Michel [Cyberbotics] 03/25/2021 12:40:57
Indeed.


Try to use an ElevationGrid instead, it should be more robust against this kind of bug.

##### James Le Poidevin 03/25/2021 12:43:59
I've spent the last 2 days trying to convert my .tif file to an elevation grid but there is often more than a million heights and so far they have all been very ugly(cf photo) to that's why i tried with an indexedface
%figure
![elevation.png](https://cdn.discordapp.com/attachments/565154703139405824/824624659990708244/elevation.png)
%end

##### Götz 03/25/2021 12:56:19
0/2pi...? TBH I still don't get it. How do I handle the IU value going up and then at 3.14 rad turning negative and going down? But hey, I'm perfectly aware you can't provide engineering 101 support here... I'll try to figure it out. Thanks!

##### Luftwaffel [Moderator] 03/25/2021 19:16:00
`@Götz` Take this image. If you turn counter clock wise, at 180° you have 3.14 (pi) radians. But instead of going up from there to describe the angle around the origin, you can start at 0 ° / 0 rad, and go clockwise. The values will become negative: -90° (- pi / 2) until you reach -180° (-pi). A Full circle is 360° or 2*pi. but you can just move it and define it from -180° to 180° and -pi to pi.
%figure
![xsAa3.png](https://cdn.discordapp.com/attachments/565154703139405824/824723314315755571/xsAa3.png)
%end


So if you were going counterclockwise increasing the angle more and more, once you pass 180° (pi), you would immediatly jump to -180° (-pi) and keep going from there


This jump is the major reason why Euler angles (roll, pitch, yaw) are usually not used for describing absolute orientations. Doing calculations with those can lead to issues around that jump. That's where axis angles, quaternion and Rotation matrices are far superior. But they are much harder to understand and less intuitive. For your current purpose euler angles should be enough

##### Westin 03/25/2021 20:44:19
Does anyone have advice for modeling a joint that is actuated using a linear actuator between the two segments? I made the lower and upper parts connected with the hinge, but I'm not sure how to make a slider joint also connect. It kind of ruins the robot tree since it makes a loop. I tried using DEF, but the node wouldn't show up when I was selecting the other end of the slider. I guess if this isn't possible, I could just use a normal motor and model the differences in the controller.
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/824745537420918894/unknown.png)
%end

##### Joanna 03/25/2021 20:51:58
Hello, everyone I followed wiki on [https://github.com/cyberbotics/webots/wiki/Docker](https://github.com/cyberbotics/webots/wiki/Docker). But when access the localhost:1999 or 2000 for simulation stream server in dicker. I see no simulation : can only upgrade to WebSocket message. Can someone help me in that?


Secondly, we tried to run webots using gpu in docker following this repository [https://github.com/cyberbotics/webots-docker](https://github.com/cyberbotics/webots-docker). We use vnc(not headless) and we can see the gpu inside the container by nvidia-smi. But when we launch the webbots simulation, the webbots doesn't detect any gpu. Does someone has experience in that?

##### Westin 03/25/2021 21:45:25
I found the SolidReference in the documentation and that is what I was missing. My joint still isn't working, but I suspect I have joint parameters that aren't in agreement about which way things are going to go.

##### Luftwaffel [Moderator] 03/25/2021 22:55:41
`@Westin` closed loops are very difficult. it is often easier to 'fake' the linear actuation by putting a motor into the joint.

##### Westin 03/25/2021 22:59:08
Okay, thanks for the tip. I'm not totally sure I'm able to do what I want, but I think I will be using a joint like this in a variety of scenarios with different configurations, and I'd like to get it right and parameterize it in a proto file. In the long term, that may be easier than faking it each time a bit different.


Is this what the tree should look like? I'm unsure whether the two hinge joints on the right side are required. I could see that going either way. I think I have all of my joints facing the right way, but I get no movement as I move the linear motor. The top and left solids are the two segments of the joint.
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/824780857847709786/unknown.png)
%end

##### erico 03/26/2021 02:57:58
I dont understand how to make the Hoap2 robot to move can anyone help?

##### Uanuan 03/26/2021 06:35:46
Hello, I am trying out the supervisor and robot API after completing tutorials. I have my script based largely on the materials from tutorial 6 (the 4-wheelers bot). However, I'm a bit stuck with what I need to do to get it to import a new wheel to attach to the bot, set the name, modify the hingeJoint parameters and such since I noticed that some of the parameters are immutable (such as the Device type which only has get\_name). I want to change the name for the imported new wheel so that I don't have duplicates in case I want to import additional wheels from the exported wheel prototype "HingeJoint.wbo." I also tried to modify the field directly (such as name) with the code "wheel.name = 'somename'" but to no avail. Could someone give me some pointers as to how to accomplish this in python?


Sorry for double posting, here's a screenshot of what I'm trying to do: the bot at the center top has one of the wheels deleted at the start of the simulation, whereas the center bottom image shows the bot gained a new wheel as a result of running my code. I tried various ways based on the doc to try to change a new name and modify the hingejoint and such while the simulation's running, but to no avail:
%figure
![Untitled.png](https://cdn.discordapp.com/attachments/565154703139405824/824894922473340958/Untitled.png)
%end

##### Laprase13 03/26/2021 08:13:26
Hi, how do I run Webots using the dedicated GPU of my laptop? It is an NVIDIA GPU, but the NVIDIA control panel doesn't show the application

##### Darko Lukić [Cyberbotics] 03/26/2021 08:13:53
You can use the `wb_supervisor_field_import_mf_node_from_string` function instead:

[https://cyberbotics.com/doc/reference/supervisor#wb\_supervisor\_field\_import\_mf\_node\_from\_string](https://cyberbotics.com/doc/reference/supervisor#wb_supervisor_field_import_mf_node_from_string)



Before passing the string to the function simply replace the name and everything else you need.

##### Uanuan 03/26/2021 08:17:25
Thanks Darko, I've just got it working with the following (gonna post it here for others):



def experimentAddWheel(robotHandle):

    node = robotHandle.getSelf()

    children = node.getField("children")

    # 0 corresponds to position: 0 - beginning of children

    children.importMFNode(-1,"HingeJoint.wbo")

    wheel = children.getMFNode(-1)

    #print("wheel is {0}".format(wheel.getField("device")))

    devicename = wheel.getField("device").getMFNode(-1).getField("name")

    #print("before change: {0} ".format(devicename.getSFString()))

    devicename.setSFString("blahblahblah")

    print("Type--- {0}".format(type(wheel)))

    #print("after change: {0} ".format(devicename.getSFString()))



    #field = node.getField("translation")

    #field.setSFVec3f([0.1,0.1,0.1])



    endpoint = wheel.getField("endPoint")

    name = endpoint.getSFNode().getField("name")

    name.setSFString("somenamehahaha")

    #print(name.getSFString())



    #test code for existing wheel2

    #wheel = children.getMFNode(2)

    #devicename = wheel.getField("device").getMFNode(0).getField("name")

    #print("before change: {0} ".format(devicename.getSFString()))

    #devicename.setSFString("blahblahblah2")

    #print("after change: {0} ".format(devicename.getSFString()))



Unfortunately, I ran into another problem. The "wbo" file has a predefined name "wheel1", so when I run the sim with a new name "blahblahblah" for that particular importMFNode motor, for some reason, the robot only shows the old name "wheel1". It doesn't seem to "refresh" the name of devices when I use getDeviceByIndex(). here's my code and output:
> **Attachment**: [my\_controller.py](https://cdn.discordapp.com/attachments/565154703139405824/824919964221308938/my_controller.py)


And output: Sorry that this is a bit messy since I'm still learning the thingy so there are a lot of prints 😛  total number of devices: 5 (before adding a new motor from the WBO file)

    Device 0 : <controller.Motor; proxy of <Swig Object of type 'webots::Motor *' at 0x7f7acd5c68d0> >

    Device 1 : <controller.Motor; proxy of <Swig Object of type 'webots::Motor *' at 0x7f7acd52c330> >

    Device 2 : <controller.Motor; proxy of <Swig Object of type 'webots::Motor *' at 0x7f7acd4cfed0> >

    Device 3 : <controller.DistanceSensor; proxy of <Swig Object of type 'webots::DistanceSensor *' at 0x7f7acd52c510> >

    Device 4 : <controller.DistanceSensor; proxy of <Swig Object of type 'webots::DistanceSensor *' at 0x7f7acd4cfe70> >



total number of devices: 6 (After adding the wbo file)

    Device 0 : <controller.Motor; proxy of <Swig Object of type 'webots::Motor *' at 0x7f7acd5c6db0> >

    Device 1 : <controller.Motor; proxy of <Swig Object of type 'webots::Motor *' at 0x7f7acd5c68d0> >

    Device 2 : <controller.Motor; proxy of <Swig Object of type 'webots::Motor *' at 0x7f7acd52c180> >

    Device 3 : <controller.DistanceSensor; proxy of <Swig Object of type 'webots::DistanceSensor *' at 0x7f7acd4cfde0> >

    Device 4 : <controller.DistanceSensor; proxy of <Swig Object of type 'webots::DistanceSensor *' at 0x7f7acd4cfe70> >

    Device 5 : <controller.Motor; proxy of <Swig Object of type 'webots::Motor *' at 0x7f7acd52c2d0> >

My name is: wheel2

My name is: wheel3

My name is: wheel4

My name is: ds\_right

My name is: ds\_left

My name is: wheel1 <--- it's supposed to be "blahblahblah" based on my\_controller.py, but it still stays as wheel1

##### Darko Lukić [Cyberbotics] 03/26/2021 08:26:19
You should restart the controller if you change the name like that

##### Uanuan 03/26/2021 08:28:09
thanks, how should I do that? I did try supervisor.\_\_init\_\_() but it seems to get stuck in an infinite loop. I think it reruns my\_controller.py again and again while trying to add wheel1 into the children node, which then generated an error with a message like: wheel1 already exists.

##### Darko Lukić [Cyberbotics] 03/26/2021 08:34:05
You can use the `wb_supervisor_node_restart_controller` function:

[https://cyberbotics.com/doc/reference/supervisor#wb\_supervisor\_node\_restart\_controller](https://cyberbotics.com/doc/reference/supervisor#wb_supervisor_node_restart_controller)



Before adding the joint and restarting the controller make sure that the new joint doesn't exist in the robot. That way you will prevent the infinite loop.

##### Uanuan 03/26/2021 08:34:55
Great, thanks again Darko, appreciate it. I'll try out the method later 🙂

##### Ruchi 03/26/2021 13:19:42
Hello!!

Can we have communication between webots simulator being the laptop and any bot in environment.

Because as far as I know two epucks can communicate with emitter and receiver node but not sure about the case I mentioned.

##### main 03/26/2021 18:11:47
what does a red bounding box usually mean?


Are objects with colliding bounding boxes allowed to move together in space? say a robot leg made of multiple shapes with overlapping bounding boxes

##### DDaniel [Cyberbotics] 03/26/2021 18:27:02
`@main`  they turn red when a collision occurs. Consecutive solids (two solids linked by a joint) don't trigger it, but if there's a third layer, that one can collide with the first. Internal collisions like these only occur if the selfCollision field at the level of the robot is enabled, otherwise all of them are ignored.

##### Luftwaffel [Moderator] 03/26/2021 19:26:48
Can you elaborate on what exactly you want to achieve? In general a Supervisor controller can get and set any information in a simulation.

##### Pancha 03/27/2021 17:41:31
Is there some way of simulating a suction cup (a type of gripper)? I have an arm with a suction cup on the end which would work in the same fashion as a pick-and-place robot.

##### Luftwaffel [Moderator] 03/27/2021 17:51:44
`@Pancha` there is the connector node, this could be used for suction gripping, however, you can only attach and detach two connectors, not grip an object at any spot you like

##### Pancha 03/27/2021 18:52:02
I'll take a look at this. Wouldn't be the most optimal solution, but it pushes me in the correct direction. Cheers 🙂


One more question, which seems rather simple, but I haven't found a proper solution for it. Is there any way to rearrange the order of nodes under a children other than cut --> pasting? This seems to be an issue when I'm using DEF and other nodes inherits from this one. When I add a new node (or copy-pastes) it appears on top of the hierarchy and can therefore not inherit from a DEF further below.
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/825455526938804274/unknown.png)
%end

##### Luftwaffel [Moderator] 03/28/2021 00:03:44
`@Pancha` you can select any of the children (so it is highlighted). Pasting or adding a node, adds it underneath the highlighted child

##### Pancha 03/28/2021 00:05:04
Wow! Why didn't I think of that 😅  Thanks again 😉

##### yash 03/28/2021 13:25:57
I want to use Model predictive control -MPC for trajectory tracking , but Webots already runs a PID controller , so how can I neglect the Webots  PID controller to design my own MPC controller ?

##### Olivier Michel [Cyberbotics] 03/28/2021 16:17:43
You can control your motor in torque and Webots won't use the built-in PID controller as documented in the table here: [https://cyberbotics.com/doc/reference/motor#force-and-torque-control](https://cyberbotics.com/doc/reference/motor#force-and-torque-control)

##### yash 03/28/2021 16:19:26
So but then I will have to drive the motors in torque mode right .?> You can control your motor in torque and Webots won't use the built-in PID controller as documented in the table here: [https://cyberbotics.com/doc/reference/motor#force-and-torque-control](https://cyberbotics.com/doc/reference/motor#force-and-torque-control)

`@Olivier Michel`  So but then I will have to drive the motors in torque mode right .?

##### Olivier Michel [Cyberbotics] 03/28/2021 16:19:47
Yes.

##### yash 03/28/2021 16:20:10
Alright thank you 👍

##### Chinwei.Chang 03/29/2021 00:59:47
How to experience VR tour using a virtual reality headset (HTC Vive) to view the simulation? I have installed steam and steamVR on windows. However, it doesn't work! My webots  version is 2021a.

##### Luftwaffel [Moderator] 03/29/2021 01:08:12
[https://cyberbotics.com/doc/guide/computer-peripherals](https://cyberbotics.com/doc/guide/computer-peripherals)


did you do the room setup?

##### Chinwei.Chang 03/29/2021 01:20:54
yes, room setup is done!

##### Stefania Pedrazzi [Cyberbotics] 03/29/2021 06:24:45
Usually, from the NVIDIA control panel, you can add any program manually selecting the application from the file manager.

##### Laprase13 03/29/2021 06:30:39
Yes, I have checked the list of programs, but Webots doesn't seem to be there

##### Stefania Pedrazzi [Cyberbotics] 03/29/2021 06:34:07
When adding new programs to the list, the file manager opens. Then you have to navigate to the installation directory. Did you do it? or did you simply checked in the list of applications already available by default in the NVIDIA control panel programs list?


Another options, but I don't remember exactly if it works, would be to set the NVIDIA GPU as default for all the programs, launch Webots and then check again if Webots is in the list of programs in the NVIDIA control panel.

##### Laprase13 03/29/2021 06:43:42
I haven't checked the Add button and Webots was there! Thanks for the help!

##### xjs 03/29/2021 08:07:58
Does anyone know what the delay function of C language in webots is

##### AleBurzio 03/29/2021 11:48:48
Hello, I have a question on ros2 + webots for vehicles.



I have tried the webots\_ros2\_tesla package and it works fine (even though lane\_follower crashes whenever the yellow line is not detected, e.g. in crossroads because a division by zero happens somewhere), but when I tried applying the extern controller on a car in a different world it starts running significantly slower (about x0.2-0.3 vs tesla world x0.8-0.9) as soon as I start acquiring camera data.



I thought the problem was the basic time step in my world being a lot smaller but they're both set to 10, so I'm not exactly sure what could be causing this issue? Is there a setting for camera frames per second? (camera resolution is the same)

##### Darko Lukić [Cyberbotics] 03/29/2021 11:53:40
Hello, it is a simple example, not robust, but it should not crash, we should fix it.



> I tried applying the extern controller on a car in a different world it starts running significantly slower



Check the camera resolution and the frequency at which you are acquiring and sending the images. I noticed that the bottleneck is on the ROS side, but hopefully it will be better in the future thanks to the FastDDS zero-copy feature.

##### AleBurzio 03/29/2021 11:59:55
thanks for the fast reply, I'll send you a quick video to reproduce the crash



how can I check how fast the image is being acquired? Is this a ROS problem or is there some setting that can force a certain acquisition speed for the camera directly in webots?

##### Darko Lukić [Cyberbotics] 03/29/2021 12:07:17
You change the camera resolution in the Webots world and the camera publish rate through the ROS 2 driver, see an example:

[https://github.com/cyberbotics/webots\_ros2/blob/d0f772b358252cda6b9e56768e5ec5cf7454a5ff/webots\_ros2\_epuck/webots\_ros2\_epuck/driver.py#L72](https://github.com/cyberbotics/webots_ros2/blob/d0f772b358252cda6b9e56768e5ec5cf7454a5ff/webots_ros2_epuck/webots_ros2_epuck/driver.py#L72)



In your case it should be something like:

```python
self.start_device_manager({'camera_name': {'timestep': 128}})
```



See the available ROS 2 configurations for the sensor devices:

[https://github.com/cyberbotics/webots\_ros2/wiki/API-Devices#sensordevice](https://github.com/cyberbotics/webots_ros2/wiki/API-Devices#sensordevice)

##### AleBurzio 03/29/2021 12:09:14
Thank you! That's what I was looking for 🙂


This is a video of the crash, should I open an issue on GitHub?
> **Attachment**: [lane\_follower\_crash.mp4](https://cdn.discordapp.com/attachments/565154703139405824/826067795573866556/lane_follower_crash.mp4)

##### Darko Lukić [Cyberbotics] 03/29/2021 12:19:12
Yes, please. Thank you!


Feel free to open a PR if you know how to fix it 🙂

##### AleBurzio 03/29/2021 12:46:51
So I have found a quick fix which doesn't make the program crash, but the car still crashes after a while so I'm not sure how good of a fix it is 🥲

##### benj3110 03/29/2021 12:54:42
is there a way to to set an acelerometers to measure acceleration in the worlds coord sys rather than the objects?

##### ClBaze 03/29/2021 12:58:39
Hello, I am controlling a robotic arm in velocity. I want to switch to position control for the last point of the trajectory. Is it enough to use setPosition(pos) to switch back to that mode ?


The documentation says that using setPosition() when controlling in torque will switch to position control mode but it doesn't say when controlling in velocity


[https://cyberbotics.com/doc/reference/motor#force-and-torque-control](https://cyberbotics.com/doc/reference/motor#force-and-torque-control)

##### Stefania Pedrazzi [Cyberbotics] 03/29/2021 13:43:00
Yes, it is enough to set the position to switch to position control. Velocity control is only enabled when the position is set to infinity.

##### Darko Lukić [Cyberbotics] 03/29/2021 14:52:11
You can stop the car when there is no lane. It is an example, we are not making autonomous cars 😄

##### g.michael Mico 03/29/2021 15:58:57
Haw can I change the  objects size in the world. I add a bed hawever I couldnt change the size of the bed. could you help me with that?

##### Darko Lukić [Cyberbotics] 03/29/2021 16:24:10
You cannot change the size of the bed. You can import different 3D model though.



Website with free 3D models:

[https://free3d.com/](https://free3d.com/)



Search for the `Import 3D Model...` feature:

[https://cyberbotics.com/doc/guide/the-user-interface#file-menu](https://cyberbotics.com/doc/guide/the-user-interface#file-menu)

##### Westin 03/29/2021 20:17:54
Does physics need to be enabled for a robot to have a functional mechanical loop?

##### Olivier Michel [Cyberbotics] 03/29/2021 20:22:37
Yes.

##### Westin 03/29/2021 20:24:31
`@Olivier Michel` Maybe that is my problem. Does this tree drawing look right for modeling a joint controlled by a linear motor?
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/826190107853848617/unknown.png)
%end



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/826190144650084362/unknown.png)
%end

##### Olivier Michel [Cyberbotics] 03/29/2021 20:32:03
Yes, that looks good.

##### Westin 03/29/2021 20:38:48
`@Olivier Michel` Great, thank you. It made sense to me but nothing would move. I'll try again with physics enabled for the robot.


`@Olivier Michel` do you think the two hinges noted in the tree are required? Does the slider require that the points it attaches to stay at the same angle throughout movement or can they rotate freely without a hinge to explicitly allow it to?

##### SeanLuTW 03/30/2021 02:20:02
In the document, it mentioned that `the duration parameter must be a multiple of the WorldInfo.basicTimeStep`. What if, say, I have `basicTimeStep` 16 and try to call `robot.step(8)`?

##### Luftwaffel [Moderator] 03/30/2021 02:21:43
that is an issue


you can only call 16, 32 etc.

##### SeanLuTW 03/30/2021 02:44:55
In my simulation with `basicTimeStep` set to 16, I called `robot.step(1000)` and it just worked fine. I wonder what will happen if the duration is non-integer multiple of `basicTimeStep`

##### Luftwaffel [Moderator] 03/30/2021 02:45:12
it probably rounds

##### Srivastav\_Udit 03/30/2021 03:02:22
I'm using the same controller on three robots in the same world. I need them to have the ability to update the same int array. Is it possible via the Supervisor?

##### SeanLuTW 03/30/2021 03:26:21
Maybe you can add a PROTO supervisor robot with `MFFloat` field, and use your controller to access/change the data?

##### Srivastav\_Udit 03/30/2021 03:32:43
Could you direct me to some documentation/example I could use?

##### James Le Poidevin 03/30/2021 09:25:30
Hello, Is it possible to publish GPS and RangeFinder data to a ros2 topic ? I can't find any examples.

##### Bitbots\_Jasper [Moderator] 03/30/2021 11:26:54
I have a question about terminology. what are the fields in the beginning of a proto which can be overwritten in the world file called? exported fields, exposed fields?

##### Olivier Michel [Cyberbotics] 03/30/2021 11:27:19
exposed fields.

##### Bitbots\_Jasper [Moderator] 03/30/2021 11:27:25
thanks


is the second column of a LookupTable ([https://cyberbotics.com/doc/reference/distancesensor#lookup-table](https://cyberbotics.com/doc/reference/distancesensor#lookup-table)) an integer value and will the function returning the current value of a sensor also only return an integer value when a LookupTable is used?

##### [DER]Mad[MAN] 03/30/2021 13:46:32
Hello to all! I am developing a basic simulator to be able to develop an autonomous navigation system. I'm working with your simulator, but the prototyping of the system goes through Ros2 Foxy. I wrote a controller to drive my robot model and manage its sensors. I want to use an IMU/GPS couple to generate a perfect odometry at first. Unfortunately, I have difficulties to activate the IMU and read its data. The controller is written in Python. The IMU is named in the simulation : inertial\_unit, and I load it via the getDevice() method when initializing my object. In a function belonging to my object, I then try to read the quaternion with the getQuaternion() method. However, the IMU informs me that I am trying to read data from a disabled device.



```
        self.gps = self.robot.getDevice("gps")
        self.imu = self.robot.getDevice("inertial_unit")
        self.odometry_topic = '/odom'
        self.odometry_frame = 'odom'
        self.robot_base_frame = 'base_link'
        self.gps_sampling_period = 10
        self.imu_sampling_period = 10
        self.gps.enable(self.gps_sampling_period)
        self.imu.enable(self.imu\_sampling\_period)
```



```def position_read(self):
        self.get_logger().info('IMU sampling period is : "%f"' % self.imu.getSamplingPeriod())
        self.get_logger().info('GPS sampling period is : "%f"' % self.gps.getSamplingPeriod())
        orientation = self.imu.getQuaternion()
        position = self.gps.getValues()
        stamp = self.get\_clock().now().to\_msg()
```



```[sylvester_controller-3] [INFO] [1617110834.248941546] [sylvester_controller]: IMU sampling period is : "0.000000"
[sylvester_controller-3] [INFO] [1617110834.249945361] [sylvester_controller]: GPS sampling period is : "10.000000"
[sylvester\_controller-3] Error: wb\_inertial\_unit\_get\_quaternion() called for a disabled device! Please use: wb\_inertial\_unit\_enable().
```



I don't understand what I'm doing wrong. Is it a bug?

##### Urmom 03/30/2021 14:02:36
Hi, Just wondering does anyone know how to draw in Webots? Im trying to draw a rectangle or a straight line but I have some errors and here's my code. Thank you so much and have a great day



robot = Robot()



\#make this the output for drawing

ground\_display = robot.getDevice("ground\_display")



\#make the output floor white

ground\_display.setColor(0x000000)



\#draw rectangle with corner at (0,0), width of 30 and height of 30

ground\_display.fillRectangle(0,0, 30, 30)





And my error
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/826456383947669514/unknown.png)
%end

##### Olivier Michel [Cyberbotics] 03/30/2021 14:04:22
You need to equip your Robot with a Display device named "ground\_display"...

##### Urmom 03/30/2021 15:21:08
Hi Olivier, I did but I still have the error
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/826476145507696700/unknown.png)
%end

##### Olivier Michel [Cyberbotics] 03/30/2021 15:22:03
It's not a Display, it's a Solid node...

##### Darko Lukić [Cyberbotics] 03/30/2021 15:22:57
Have you tried?

[https://github.com/cyberbotics/webots\_ros2](https://github.com/cyberbotics/webots_ros2)

##### Urmom 03/30/2021 15:25:40
I see thanks Olivier!

##### [DER]Mad[MAN] 03/30/2021 15:25:52
yes I use webots\_ros2

##### John520 03/30/2021 15:30:29
Hi guys, I am looking for an inclinometer in Webots but could not find one in Nodes. Does Webots have a sensor that works similarly to an inclinometer? Thank you!

##### Darko Lukić [Cyberbotics] 03/30/2021 15:31:45
GPS and IMU data should be automatically published, that doesn't work for you?


You can use the IMU instead:

[https://cyberbotics.com/doc/reference/inertialunit](https://cyberbotics.com/doc/reference/inertialunit)

##### John520 03/30/2021 15:34:23
Ahh, thank you `@Darko Lukić` !

##### [DER]Mad[MAN] 03/30/2021 15:37:25
I tried several way. The one that I post here, GPS works. But I can't read data from the IMU. I use this one  [https://cyberbotics.com/doc/reference/inertialunit?tab-language=python#wb\_inertial\_unit\_enable](https://cyberbotics.com/doc/reference/inertialunit?tab-language=python#wb_inertial_unit_enable). I tried to load the IMU with the device\_manager. But when I tried to echo topic's data, the controller stoped

##### Darko Lukić [Cyberbotics] 03/30/2021 15:39:18
Sounds like a bug. Can you report it:

[https://github.com/cyberbotics/webots\_ros2/issues/new?assignees=&labels=&template=bug\_report.md](https://github.com/cyberbotics/webots_ros2/issues/new?assignees=&labels=&template=bug_report.md)

##### [DER]Mad[MAN] 03/30/2021 15:40:07
Okay !

##### Darko Lukić [Cyberbotics] 03/30/2021 15:42:18
BTW, the device manager automatically disables a device when not used. See here how to enable it all the time:

[https://github.com/cyberbotics/webots\_ros2/blob/d0f772b358252cda6b9e56768e5ec5cf7454a5ff/webots\_ros2\_epuck/webots\_ros2\_epuck/driver.py#L60](https://github.com/cyberbotics/webots_ros2/blob/d0f772b358252cda6b9e56768e5ec5cf7454a5ff/webots_ros2_epuck/webots_ros2_epuck/driver.py#L60)

##### [DER]Mad[MAN] 03/30/2021 15:45:43
I will check with that


this is my device\_manager call :

```
self.start_device_manager({
            'robot': {'publish_base_footprint': True},
            'LDS-01' : {'topic_name' : '/sylvester/scan'},
            'inertial_unit' : {'always_publish': True, 'topic_name': '/sylvester/IMU'}
        })
```

I get this error :

```
AttributeError: 'InertialUnit' object has no attribute 'getValues'
```

But I never call getValues() method in my controller.



either I'm not using the IMU correctly or the problem comes from calling a function that doesn't seem to exist in the IMU driver

##### Darko Lukić [Cyberbotics] 03/30/2021 16:08:51
I see, we fixed that in the `develop` branch, but it targets Webots R2021b:

[https://github.com/cyberbotics/webots\_ros2/blob/dce214b403edee795fee63d926cb70d015fffefc/webots\_ros2\_core/webots\_ros2\_core/devices/imu\_device.py#L90](https://github.com/cyberbotics/webots_ros2/blob/dce214b403edee795fee63d926cb70d015fffefc/webots_ros2_core/webots_ros2_core/devices/imu_device.py#L90)

##### [DER]Mad[MAN] 03/30/2021 16:12:46
Yes I run R2021a. Do I still must open bug report ? (I'm junior and new in debugging world ^^') Or do something else ?

##### Darko Lukić [Cyberbotics] 03/30/2021 16:15:49
Yes please. No worries, it is good that you noticed the bug

##### Luftwaffel [Moderator] 03/30/2021 18:57:37
video capture does not work. ubuntu 20. 2021a (.ros install)
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/826530625141342238/unknown.png)
%end


sudo apt-get install libx264-dev

sudo apt-get install libfdk-aac1

Is installed


reinstalled ffmpeg with "sudo apt install ffmpeg"


now I get this error:

ffmpeg: error while loading shared libraries: libvo-amrwbenc.so.0: cannot open shared object file: No such file or directory


FIX:  running `linux_runtime_dependencies.sh` fixed the issue


<@&568329906048598039> perhaps you should check, if the automatic ros install takes the dependencies into account. Might just be some other issue on my system though.

##### Westin 03/30/2021 20:18:22
Is there a way to change the size of the joint axes?

##### Luftwaffel [Moderator] 03/30/2021 21:07:15
change the size?


the way it is displayed or the actual size?

##### Westin 03/30/2021 21:25:36
`@Luftwaffel` The way it is displayed. I'm talking about the xyz triad that is visible when the "Show Joint Axes" option is enabled.

##### Luftwaffel [Moderator] 03/31/2021 00:36:26
`@Westin` you can use "lineScale" under Worldinfo to change the size of optionally rendered lines such as the joint axes

##### Olivier Michel [Cyberbotics] 03/31/2021 06:14:57
How did you install Webots? From the .deb package, snap or tarball? Depending on the installation method, in particular with the tarball, some additional steps are needed to get ffmpeg properly installed to allow Webots to make movies. This is normally fully documented here: [https://cyberbotics.com/doc/guide/installation-procedure#installing-the-tarball-package](https://cyberbotics.com/doc/guide/installation-procedure#installing-the-tarball-package)

##### SeanLuTW 03/31/2021 06:17:43
Can I get the status of `movieStopRecording`? I want to reload and restart my world after the video is saved, currently I use sleep to wait the process, but the duration is hard to decide

##### Olivier Michel [Cyberbotics] 03/31/2021 06:19:44
Did you try to use movieIsReady()? See [https://www.cyberbotics.com/doc/reference/supervisor#wb\_supervisor\_movie\_is\_ready](https://www.cyberbotics.com/doc/reference/supervisor#wb_supervisor_movie_is_ready)

##### SeanLuTW 03/31/2021 06:31:31
`@Olivier Michel`  Oh! I misunderstood its meaning, I will try. Thank you!

##### James Le Poidevin 03/31/2021 09:37:26
Hello, I'm using webots with ros2 and using the start\_device\_manager(), it correctly detects that i have 18 motors (6 wheel Protos with 3 motors per wheel with different names each time). The problem is that when I echo joint\_states there is just 6 times the same three motors (should have Wheelmotor1\_1,1\_2 ...). Does anyone have any idea why?
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/826752040771387422/unknown.png)
%end

##### Darko Lukić [Cyberbotics] 03/31/2021 12:17:22
Is it possible that you have multiple position sensors for a single motor? This is how the joint state publisher is discovering the motors:

[https://github.com/cyberbotics/webots\_ros2/blob/d0f772b358252cda6b9e56768e5ec5cf7454a5ff/webots\_ros2\_core/webots\_ros2\_core/joint\_state\_publisher.py#L50-L53](https://github.com/cyberbotics/webots_ros2/blob/d0f772b358252cda6b9e56768e5ec5cf7454a5ff/webots_ros2_core/webots_ros2_core/joint_state_publisher.py#L50-L53)

##### James Le Poidevin 03/31/2021 12:18:27
Ok thanks I'll try that

##### Srivastav\_Udit 03/31/2021 17:53:34
How can I change the colour of a solid after a particular event?

##### benj3110 03/31/2021 19:16:07
hey guys sry to ask again but is there a way to set the measurement of an accelerometer to the world coordinate sys rather than the objects? or should i use a GPS node and then work out the acceleration?

##### Luftwaffel [Moderator] 03/31/2021 20:35:15
`@benj3110` you can get the orientation rotation 3x3 matrix (R) of the robot and transform your acceleration vectors into those coordinates


a\_world = R\_object * a\_object


* being the dot product


you have to use the supervisor functionality to change the color field of the solid

##### puntigamer 03/31/2021 21:13:34
Hello, I imported a map from OSM and added mavic drone to this map but drone cannot take off


What can I do?


If take drone up and leave, only this time I can turn drone to left or right but other buttons don't work

##### Srivastav\_Udit 03/31/2021 22:07:31
Is it possible to make the recognitionColors field for a solid null after a certain point in the supervisor?

##### Luftwaffel [Moderator] 03/31/2021 22:07:57
you can edit any field in the supervisor

##### puntigamer 03/31/2021 22:11:58
Even if I edit drone controller code, I cannot see the change in simulation. Can anybody help?

##### Srivastav\_Udit 03/31/2021 22:15:52
Could you guide me to some sample world/code that does this?

##### Luftwaffel [Moderator] 03/31/2021 22:16:14
[https://www.cyberbotics.com/doc/reference/supervisor?tab-language=python](https://www.cyberbotics.com/doc/reference/supervisor?tab-language=python)


get a node reference, thena field ref


then change that field


robot = Supervisor

node= robot.getFromDef(DEF\_target)

field = node.getField('fieldName')


field.set....


you have to set the correct data type

##### puntigamer 03/31/2021 22:20:46
Can't I change controller of drone?

##### Luftwaffel [Moderator] 03/31/2021 22:20:55
you can


change the controller or edit the current one


you have to reset the simulation for it to go into effect


if it's c, c++ or java, you have to compile the changes first

##### puntigamer 03/31/2021 22:21:53
Okay, I'll try this, thank you

##### Luftwaffel [Moderator] 03/31/2021 22:22:10
F7 in webots I believe.. check the menu

##### puntigamer 03/31/2021 22:22:28
Okay, thank you very much

##### Welsh\_dragon64 03/31/2021 22:55:35
I was trying to remotely connect the webots simulation to my actual robot, Dawrin robotisop2 and in the robot console i got the following message :Warning: File `/robotis/Framework/src/minIni/minIni.c' has modification time 2.2e+04 s in the future and this message been going in a infinite loop for a long time, has anyone one of you experienced this?

## April

##### benj3110 04/01/2021 12:00:15
Can you elaborate on how to get R\_object?


found the formula but should it not be the inverse if R\_object? i was thinking R\_object*a\_world = a\_object, if R\_object is the rotation matrix for the object?

##### Shyam 04/01/2021 13:18:20
I am trying to integrate Webots using TCP/IP ,initially I would like to add some common things like LIDAR, IMU, CAMERA, MOTOR, etc from Webots. I have gone through API  and TCP/IP documentation of Webots.

I would like to know on which ports does Webots publish data of different sensors?

It would be grate if anyone can share some additional resources for this.

##### Joanna 04/01/2021 18:53:30
Hello,everyone. Do anyone have a link or model of an environment for warehouse for simulation of mobile robot?

##### DDaniel [Cyberbotics] 04/01/2021 18:58:01
`@Joanna` the closest available might be the factory environment, you can adapt it to your needs if it doesn't suit as is. [https://cyberbotics.com/doc/guide/samples-environments#factory-wbt](https://cyberbotics.com/doc/guide/samples-environments#factory-wbt)

##### Joanna 04/01/2021 19:01:17
Yes,I am aware of factory environment. But anyway, thanks Daniel. Was just kinda sure that somebody has already sucha Kinda environment "typical warehouse " since most of mobile robotics work is done in warehouses . Will see if somebody has it maybe.

##### Urmom 04/01/2021 19:51:49
Hi Olivier, So I changed the Solid node to a Display, and the ground supposed to be white but it showing a different color. Im just wondering If you know how to draw a simple rectangle in webots. Thank you so much Olivier



Here's my code

robot = Robot()



\#make this the output for drawing

ground\_display = robot.getDevice("ground\_display")



\#make the output floor white

ground\_display.setColor(0x000000)



\#draw rectangle with corner at (0,0), width of 30 and height of 30

ground\_display.fillRectangle(0,0, 30, 30)

##### Luftwaffel [Moderator] 04/01/2021 21:14:08
you are right, you should do the inverse


rot\_base = np.transpose(rot\_base)


`rot_base = np.transpose(np.array(base.getOrientation()).reshape(3, 3))`


as one line to get R


base being the robot (copied it from some of my code)


np being numpy. For other languages you gonna have to figure it out yourself 😉

##### deleted 04/01/2021 22:14:14
hey, i want to make a robot that has leg joints controlled by servos


but i dont want it to collapse while unpowered


what would be my solution to this?

##### Luftwaffel [Moderator] 04/01/2021 23:29:13
you are asking inside of webots?

##### deleted 04/01/2021 23:50:03
no, physically

##### Luftwaffel [Moderator] 04/02/2021 00:10:50
this is the webots discord, I'm sure there is robotics servers and forums 🙂


perhaps adding spring tension or something

##### deleted 04/02/2021 00:30:26
yeah i just assumed that people here would know that.. since its something you would have to consider while designing a robot lol

##### Luftwaffel [Moderator] 04/02/2021 00:48:25
most robots I know are collapsed when unpowered

##### KNTRL [Premier Service] 04/02/2021 10:42:27
Hi guys, I'm absolutely new and just finished the tutorial up to the ROS part (I need to get to know ROS first), and I'll be writing my master thesis with Webots + ROS, so I'll be more active here for the next months probably.



I have a question already: I observed that the software has some troubles with heavy objects (example a 1x1x1m box that falls off of a meter, etc..) that will sink through a plane floor for example, and stop at a certain point. Now I am aware that there might be some heavy numerical operations to solve which can easily lead to unwanted results, but what can I generally do to know that my object will most likely remain above the surface? Is there some kind of a rule of thumb, or is it a pure trial & error for anybody else too?

Cheers, and I'm looking forward to the further input in here.

##### DDaniel [Cyberbotics] 04/02/2021 11:29:38
`@KNTRL` when you notice interpenetration between solids like you mention it's usually that the `basicTimeStep` (in worldInfo node) being used is too big. This is especially noticeable for heavy objects. The physics engine will detect the violation and progressively correct it in the following steps but  the fact remains that the timestep being used isn't suitable. Another factor is the contactProperties (also in worldInfo) between the two objects, you can lower the `softCFM` parameter to get better results. [https://cyberbotics.com/doc/reference/worldinfo](https://cyberbotics.com/doc/reference/worldinfo)

##### KNTRL [Premier Service] 04/02/2021 11:35:10
<@787796043987025941> thank you, appreciate the info!

##### Shyam 04/02/2021 15:52:43
I am trying to integrate Webots using TCP/IP ,initially I would like to add some common things like LIDAR, IMU, CAMERA, MOTOR, etc from Webots. I have gone through API  and TCP/IP documentation of Webots.

I would like to know on which ports does Webots publish data of different sensors?

It would be grate if anyone can share some additional resources for this.

##### satyar 04/03/2021 07:18:14
Hello everyone,

I have problem for working Webots with MacOS .

I installed python 3.9 and set python command “python3”

I tested the code and this world with windows pc that completely work 😕

Can anyone help!?



I have M1 MacBook with 11.2.3 macOS bigsur
%figure
![image0.jpg](https://cdn.discordapp.com/attachments/565154703139405824/827804172610175016/image0.jpg)
%end

##### Olivier Michel [Cyberbotics] 04/03/2021 07:28:53
Did you try with Python 3.8 from python.org?

##### Yi Zhou 04/03/2021 07:35:43
Hello everyone, I have a question about webots. When I try to integrated a kinect camera into panda robot, the kinect was attached perfectly, but the image windows show nothing, I checked some demo about camera, it look like I need  some code to make kinect work. So, does anyone know how to make kinect work?

##### Darko Lukić [Cyberbotics] 04/03/2021 13:57:04
You have to enable the camera:

[https://cyberbotics.com/doc/reference/camera#wb\_camera\_enable](https://cyberbotics.com/doc/reference/camera#wb_camera_enable)

##### satyar 04/03/2021 13:58:44
I tried but show error the code crash 😢 and didn’t work

##### benj3110 04/03/2021 14:19:20
Thank you! really big help!😁

##### Ali\_1 04/05/2021 03:32:29
Hi,

How can I move a solid object (with physics) on a path in the  supervisor node?  Since physics is enabled if falls when I simply change its position.

##### DDaniel [Cyberbotics] 04/05/2021 08:28:38
`@Ali_1` if the object is supposed to be entirely moved by the supervisor you need to manually set it's translation/rotation field at every timestep. If instead you want the object to have physics but "float"  then you can insert the solid object as a child of the robot, then give physics to the object itself but not to the parent (the robot)

##### Yi Zhou 04/05/2021 09:33:15
Hello, thanks for your reply, I get my kinect camera by using "getFromDEF" because the kinect camera was defined as DEF. But there is no enable function

##### Pancha 04/05/2021 15:55:19
I've seen that there's plenty of people trying to get a vacuum/suction gripper to work, but have anyone succeeded and have an example? I'm new to Webots, but I am really struggling with getting this to work. Programming in `Python` for this project.



The idea I have been working around is for an arm to extend out and for it to pick a box by the use of a suction gripper (or electromagnet). This seemed simple enough, but I'm just unable to get the gripper and the box to connect.



So far I've created the arm with a `Connector` node as the end effector on the `Robot` node. In order to allow for the suction gripper to be  locked/unlocked  (`lock()` / `unlock()`) to the box on demand, each box also had to be a `Robot` node with a `Connector` node. So far this works as intended. When extending or retracting the robot over the box I'm printing out `getPresence()` for each connector and I see them change from `0` to `1` when they're in the correct position based on the tolerance of the connector nodes. The issue I then have, which I seem to be unable to work around is to actually connect them together. When moving the robot arm the box doesn't follow.



I've followed various online resources and the `connector.wbt` sample world (programmed in C) which have lead me where I am today.



Hope someone has an idea nudging me in the correct direction 🙂

##### tudor 04/05/2021 16:10:01
Hello Webots community, I have a question regarding proper usage of Supervisor.simulationReset() function. My .wbt file initially cotains only a supervisor robot node with a non-void controller (SimulationController.py). The pseudocode of this controller reads as follows:



    for usecase in usecases:

        Supervisor.simulationReset() # step 1.

        Supervisor.step(64)  # step 2. basicTimestep is 64 as well. This, as far as I understand, is required for SimulationManager.py to communicate the simulation reset request to webots. Without this the robots are never loaded successfully

        load\_robots(usecase) # step 3 . Here I am loading various robots from string. Robots have non-void controllers



        #The following loop lets the simulation run until a preset MyTimeout. After MyTimeout is reached, simulation should reset

        while not self.step(self.timestep) == -1 and now <= MyTimeout:

            now = self.getTime()



This loop runs succesfully for the first iteration, then crashes with a segmentation fault during the second iteration, during step 1. Output messages vary sporadically:

Message 1:

munmap\_chunk(): invalid pointer

Message 2:

Assertion 'newindex >= 0 && newindex < (int) flist->size' failed at pulsecore/flist.c:93, function stack\_push(). Aborting.

Or simply:

./webots: line 90: 30204 Aborted                 (core dumped) "$webots\_home/bin/webots-bin" "$@"





My questions are :

1. Am I doing something obviosuly wrong with the way I am trying to reset my simulation?

2. The documentation seems to me a bit vague in specifying exactly what happens to controllers of programatically created robot nodes when calling simulationReset. Am I assuming correctly, that in my case, when calling simulationReset, the controllers of the robots spawned in load\_robots should be killed, whereas the SimulationController.py controller should continue running?



Thanks for reading!

##### reinaldobianchi 04/05/2021 19:35:46
Dear Friends. I have a doubt about the Sensors on the Pioneer AT3. Is the figure on page [https://cyberbotics.com/doc/guide/pioneer-3at](https://cyberbotics.com/doc/guide/pioneer-3at) wrong?


It looks like the sensors that are in front should be in the back...


Sensors 0 to 7 should be in the back, and sensors 8 to 15 in the front, no?


I also think that the Front and Back views of the robot are switched...


I think it is also wrong for the Pioneer 3 DX

##### g.michael Mico 04/05/2021 19:53:08
anyone have  Idea LIGHT\_THRESHOLD = 500

NOSE\_SENSITIVITY = 0.25



%figure
![epuck_con.PNG](https://cdn.discordapp.com/attachments/565154703139405824/828719645582164018/epuck_con.PNG)
%end


what is LIGHT\_THRESHOLD = 500 ?

NOSE\_SENSITIVITY = 0.25   ?  Where can I get any explanation about  that?

##### Luftwaffel [Moderator] 04/05/2021 20:47:54
look lower in the code and see how it is used

##### g.michael Mico 04/05/2021 21:58:16

%figure
![Capture_11.PNG](https://cdn.discordapp.com/attachments/565154703139405824/828750413578502184/Capture_11.PNG)
%end



%figure
![Capture_12.PNG](https://cdn.discordapp.com/attachments/565154703139405824/828750449691328532/Capture_12.PNG)
%end


what is LIGHT\_THRESHOLD = 500 ?

NOSE\_SENSITIVITY = 0.25   ?  Where can I get any explanation about  that?

##### Luftwaffel [Moderator] 04/05/2021 22:05:51
it is using those variables to comprehend the distance sensor values


top\_wall and side\_wall are boolean (True or false).

##### g.michael Mico 04/05/2021 22:52:52
Still not clear to me .  LIGHT\_THRESHOLD = 500 ? what is 500 ?  or what is 0.25 ?

##### Luftwaffel [Moderator] 04/05/2021 22:54:54
values that get compared to the sensor values

##### James Le Poidevin 04/06/2021 13:18:24
Hello, Is it possible to use the supervisor API with ros2 to move an object during a simulation ?

##### Darko Lukić [Cyberbotics] 04/06/2021 13:25:02
Hello `@reinaldobianchi`. Could you please provide a more details?



For example, the `s04` sensor is in the front (the wide side with a black sticker) in the 3D robot model.



This picture matches it:

[https://raw.githubusercontent.com/cyberbotics/webots/released/docs/guide/images/robots/pioneer-3at/wheels.png](https://raw.githubusercontent.com/cyberbotics/webots/released/docs/guide/images/robots/pioneer-3at/wheels.png)



And the following picture as well:

[https://raw.githubusercontent.com/cyberbotics/webots/released/docs/guide/images/robots/pioneer-3at/sonars.png](https://raw.githubusercontent.com/cyberbotics/webots/released/docs/guide/images/robots/pioneer-3at/sonars.png)



It is possible I am missing something though.

##### reinaldobianchi 04/06/2021 13:25:28
Hi.


When using this robot, if you move the viewpoit to the front, you will se the robot's back.


Alsi, in this image, sensor so3 is said to be on the front, but it is on the back.


if you move the robot with positive velocity on the wheels, it will move to the real front of the robot.


but if you use sensor s03 as a front sensor, distance to a wall will increase...


DX and AT

##### Darko Lukić [Cyberbotics] 04/06/2021 13:30:06
Position of the `so3`
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/828984920038178856/unknown.png)
%end

##### reinaldobianchi 04/06/2021 13:30:40
try running this code...


"""bate\_e\_volta controller."""



\# You may need to import some classes of the controller module. Ex:

\#  from controller import Robot, Motor, DistanceSensor

from controller import Robot



\# create the Robot instance.

robot = Robot()



\# get the time step of the current world.

timestep = int(robot.getBasicTimeStep())



motor\_FL = robot.getDevice('front left wheel')

motor\_FR = robot.getDevice('front right wheel')

motor\_BL = robot.getDevice('back left wheel')

motor\_BR = robot.getDevice('back right wheel')



motor\_FL.setPosition(float('inf'))

motor\_FR.setPosition(float('inf'))

motor\_BL.setPosition(float('inf'))

motor\_BR.setPosition(float('inf'))



motor\_FL.setVelocity(6.28)

motor\_FR.setVelocity(6.28)

motor\_BL.setVelocity(6.28)

motor\_BR.setVelocity(6.28)





sensor\_Front = robot.getDevice('so11')

sensor\_Front.enable(timestep)

sensor\_Back = robot.getDevice('so3')

sensor\_Back.enable(timestep)





\# Main loop:

\# - perform simulation steps until Webots is stopping the controller

while robot.step(timestep) != -1:

   valor\_F = sensor\_Front.getValue()

   valor\_B = sensor\_Back.getValue()

   print ("Sensor frontal: %f" % valor\_F)

   print ("Sensor traseiro: %f" % valor\_B)



   pass



\# Enter here exit cleanup code.


And see the values of the frontal and back sensor.


Frontal = front


traseiro = back


using the AT


Pioneer 3 AT

##### Darko Lukić [Cyberbotics] 04/06/2021 13:32:53
Yes, you can extend the `WebotsNode`, see an example:

[https://github.com/cyberbotics/webots\_ros2/blob/99fa4a1a9d467e4ba71eff17ddf4e82444c78938/webots\_ros2\_examples/webots\_ros2\_examples/khepera\_driver.py#L69-L108](https://github.com/cyberbotics/webots_ros2/blob/99fa4a1a9d467e4ba71eff17ddf4e82444c78938/webots_ros2_examples/webots_ros2_examples/khepera_driver.py#L69-L108)

##### Dorteel 04/06/2021 13:34:12
Hi, I have a question regarding supervisor's getNumberofContactPoints() function. I'm trying to do Reinforcement Learning, where the episode ends when the robot collides with itself. But when I use simulationReset() the  number of contact points does not reset but stays the same, so the robot gets stuck in an endless cycle of simulation resets. Does anyone have a workaround for that problem?

##### James Le Poidevin 04/06/2021 13:45:54
I'm not sure I explained properly what i wanted. i want to use the function setSFVec3f(self, values) on a a class that inherited from WebotsNode.

##### Darko Lukić [Cyberbotics] 04/06/2021 13:52:47
I have just properly checked and the orientation is correct. The confusion may come from the fact that the Pioneer robot uses a lookup table for the distance sensors:

[https://github.com/cyberbotics/webots/blob/ab8b93ff30523825a8193327db756f44f12d390c/projects/robots/adept/pioneer3/protos/Pioneer3DistanceSensor.proto#L191-L194](https://github.com/cyberbotics/webots/blob/ab8b93ff30523825a8193327db756f44f12d390c/projects/robots/adept/pioneer3/protos/Pioneer3DistanceSensor.proto#L191-L194)



See details:

[https://cyberbotics.com/doc/reference/distancesensor#lookup-table](https://cyberbotics.com/doc/reference/distancesensor#lookup-table)



Closer the obstacle the higher value is. This is done to imitate the real hardware, although I am not sure how accurate it is at this point.



Feel free to open a pull request and propose changes.

##### reinaldobianchi 04/06/2021 13:55:45
Just another question: why the views are wrong?


if you move to the viewpoint "Front", you will see the back of the P3 AT


And vice versa.

##### Darko Lukić [Cyberbotics] 04/06/2021 13:57:14
Maybe a better example:

[https://github.com/cyberbotics/webots\_ros2/blob/master/webots\_ros2\_tesla/webots\_ros2\_tesla/tesla\_driver.py](https://github.com/cyberbotics/webots_ros2/blob/master/webots_ros2_tesla/webots_ros2_tesla/tesla_driver.py)



So, you would have something like:

```python
class YourDriver(WebotsNode):
    def __init__(self, args):
        super().__init__('tesla_driver', args, controller_class=Supervisor)
        self.start_device_manager()
        field = self.robot.getSelf().getField(...)
        field.setSFVec3f(...)
```

##### James Le Poidevin 04/06/2021 13:58:16
Brilliant thanks 👍

##### Darko Lukić [Cyberbotics] 04/06/2021 14:00:20
`Front View` refers to the world, not to the robot

##### reinaldobianchi 04/06/2021 14:03:21
Ok.


Thanks.

##### Harris 04/07/2021 06:11:53
Hi, maybe a simple question but struggling this~ I am trying to use pycharm to run webots controller in Ubuntu. I follow the tutorial of "Using your IDE" chapter, but it returns out this error

ImportError: libCppController.so: cannot open shared object file: No such file or directory

How can I solve this problem?

##### Deleted User 04/07/2021 06:13:37
Hello , I wanted to know if there was a webots model for the intel realsense camera .

##### Darko Lukić [Cyberbotics] 04/07/2021 07:10:13
Make sure the `LD_LIBRARY_PATH` is pointing to the correct directory

##### Harris 04/07/2021 07:28:14
Yes it is pointing to the correct one
%figure
![2021-04-07_01-27-56_.png](https://cdn.discordapp.com/attachments/565154703139405824/829256238565949460/2021-04-07_01-27-56_.png)
%end



%figure
![2021-04-07_01-27-34_.png](https://cdn.discordapp.com/attachments/565154703139405824/829256254685708319/2021-04-07_01-27-34_.png)
%end

##### Darko Lukić [Cyberbotics] 04/07/2021 07:37:10
You can check whether the configuration works independent from your IDE:

```bash
export WEBOTS_HOME=/usr/local/webots
export LD_LIBRARY_PATH=${WEBOTS_HOME}/lib/controller
export PYTHONPATH=${WEBOTS_HOME}/lib/controller/python38
python3 UR5e_1.py
```

If it works, then the problem is isolated and you can focus on configuring your IDE.

##### Harris 04/07/2021 08:22:21
Do u mean type these in the IDE terminal? Programs can be started in the terminal but it still not work when I press run. Sorry I am new to PyCharm as well..
%figure
![2021-04-07_02-19-35_.png](https://cdn.discordapp.com/attachments/565154703139405824/829269859526246431/2021-04-07_02-19-35_.png)
%end

##### Darko Lukić [Cyberbotics] 04/07/2021 08:26:13
That's a good sign. Now, you just need to configure PyCharm. Unfortunately, I have close to zero experience with PyCharm.



This tutorial should help:

[https://cyberbotics.com/doc/guide/using-your-ide#pycharm](https://cyberbotics.com/doc/guide/using-your-ide#pycharm)



If you discover a problem in the tutorial feel free to open a PR.

##### Harris 04/07/2021 08:34:27
This is what I followed lol. Actually I once worked this in Windows so maybe Sth goes wrong with Linux tutorial? Anyway thx for your time!

##### James Le Poidevin 04/07/2021 09:59:42
Hello could someone explain this error to me.
```[ERROR] [driver-3]: process has died [pid 5427, exit code 1, cmd '/workspace/planetary-simulator/external_ros_controleur/install/webots_ros2_rosalind_franklin/lib/webots_ros2_rosalind_franklin/driver --webots-robot-name  --webots-node-name webots_driver --ros-args --params-file /tmp/launch_params_glzi3e0_'].
[seram_0_2.wbt" --batch --no-sandbox --mode=realtime-2] /usr/local/webots/webots: line 88:  5434 Bus error               (core dumped) "$webots_home/bin/webots-bin" "$@"
[ERROR] [seram_0_2.wbt" --batch --no-sandbox --mode=realtime-2]: process has died [pid 5425, exit code 135, cmd '"/usr/local/webots/webots" "/workspace/planetary-simulator/external_ros_controleur/install/webots_ros2_rosalind_franklin/share/webots_ros2_rosalind_franklin/worlds/seram_0_2.wbt" --batch --no-sandbox --mode=realtime'].
[INFO] [robot_state_publisher-1]: sending signal 'SIGINT' to process[robot_state_publisher-1]
[robot_state_publisher-1] [INFO] [1617789338.941998681] [rclcpp]: signal_handler(signal_value=2)
[INFO] [robot_state_publisher-1]: process has finished cleanly [pid 5423]
```

It happens after there is a mistake in my external controleur(i.e forgot a " or indentation error). After the mistake i cannot use webots again unless i reboot my PC.

##### [DER]Mad[MAN] 04/07/2021 12:14:26
Hello there ! I have a question about a detail from Webots ros2 sensors messages. It seems that they are not reliable, I need to switch rviz2 topic subscription to best\_effort to be able to visualize pointcloud (for example). Is this normal? Is there a way to get reliable messages?

##### Darko Lukić [Cyberbotics] 04/07/2021 12:22:02
The newest version of `webots_ros2` (available in the master branch) uses `qos_profile_sensor_data` QoS for all sensors.


I suppose your ROS 2 controller has crashed and it crashed the Webots instance

##### [DER]Mad[MAN] 04/07/2021 12:26:26
Okay, thanks. I'll check, but I thought I had the latest version of the package

##### Westin 04/07/2021 22:14:23
Is there a way to batch import STL files?

##### Olivier Michel [Cyberbotics] 04/08/2021 06:02:46
You can use the Mesh node to import STL files, see [https://cyberbotics.com/doc/reference/mesh](https://cyberbotics.com/doc/reference/mesh)

##### Pancha 04/08/2021 09:06:54
I've seen that there's plenty of people trying to get a vacuum/suction gripper to work, but have anyone succeeded and have an example? I'm new to Webots, but I am really struggling with getting this to work. Programming in `Python` for this project.



The idea I have been working around is for an arm to extend out and for it to pick a box by the use of a suction gripper (or electromagnet). This seemed simple enough, but I'm just unable to get the gripper and the box to connect.



So far I've created the arm with a `Connector` node as the end effector on the `Robot` node. In order to allow for the suction gripper to be  locked/unlocked  (`lock()` / `unlock()`) to the box on demand, each box also had to be a `Robot` node with a `Connector` node. So far this works as intended. When extending or retracting the robot over the box I'm printing out `getPresence()` for each connector and I see them change from `0` to `1` when they're in the correct position based on the tolerance of the connector nodes. The issue I then have, which I seem to be unable to work around is to actually connect them together. When moving the robot arm the box doesn't follow.



I've followed various online resources and the `connector.wbt` sample world (programmed in C) which have lead me where I am today.



Hope someone has an idea nudging me in the correct direction 🙂

##### Darko Lukić [Cyberbotics] 04/08/2021 09:17:01
If you are comfortable with C/C++ you can try to implement it in the Webots core:

[https://github.com/cyberbotics/webots/issues/2889#issuecomment-804073941](https://github.com/cyberbotics/webots/issues/2889#issuecomment-804073941)



Another idea is to use the Supervisor robot. On each timestep you measure a distance between an object and the suction cup. Once it gets close enough, you stick the object to the suction cup by changing the position/orientation of the object at each timestep depending on the position of the suction cup.

##### Pancha 04/08/2021 09:18:14
Cheers, I’ll try this out 😁👍

##### tudor 04/08/2021 10:26:40
Could anyone please clarify: What happens to controllers of robots created during the simulation, when using simulationReset? Am I right to assume that the get killed by the webots main process?

##### Darko Lukić [Cyberbotics] 04/08/2021 10:50:58
Nothing, you have to reset each controller explicitly:

[https://cyberbotics.com/doc/reference/supervisor?version=develop#resetreload-matrix](https://cyberbotics.com/doc/reference/supervisor?version=develop#resetreload-matrix)

##### tudor 04/08/2021 11:12:35
Thanks for the prompt response. Don't you find this behaviour a bit weird ? Say the supervisor adds a robot node with a supervisor at t=10s (using importMFNodeFromString). At t=100s the supervisor decides to reset the simulation, ie bring it to t=0s, where there is no added robot node yet. But the controller of that robot which is not existing anymore is still running? Even if I reset this controller manually from the supervisor, what will it do running from t=0, when it has no robot node to operate on(as again, supervisor will try to create that robot only at t=10s)?

##### Yi Zhou 04/08/2021 11:14:27
Hello everyone, I have got the image array by using python function "getImageArray" from camera, but when I try to show image array by using Pillow, it did not show the image that camera shows on webots, does anyone know what's the reason?

##### Darko Lukić [Cyberbotics] 04/08/2021 11:20:10
That function returns list of lists in Python. You should use `getImage` instead, see here:

[https://github.com/lukicdarkoo/webots-example-lane-follower/blob/3ca866b0c41b65faa01d3d998de062c941680708/controllers/lane\_follower/lane\_follower.py#L17-L18](https://github.com/lukicdarkoo/webots-example-lane-follower/blob/3ca866b0c41b65faa01d3d998de062c941680708/controllers/lane_follower/lane_follower.py#L17-L18)

##### Yi Zhou 04/08/2021 11:21:36
Thank you so much, I'll try👍

##### Stefania Pedrazzi [Cyberbotics] 04/08/2021 11:33:05
Yes, if a robot is created during the simulation, then it is deleted on simulation reset and its controller is automatically killed by Webots.

Controllers of robots that are part of the original world and won't be deleted on simulation reset continue to run.

##### tudor 04/08/2021 12:07:34
Thank you very much, makes sense! As a followup question, am I right to assume that when the supervisor is calling wb\_simulation\_reset, the reset is actually happening only after also calling the step(basicTimestep), because only then the supervisor controller communicates to the main webots process?

##### Stefania Pedrazzi [Cyberbotics] 04/08/2021 12:16:33
The `wb_supervisor_simulation_reset()` request is sent immediately to the Webots main process but it is executed at the end of the ongoing simulation step. So if your robots have the `synchronization` field set to TRUE, yes you can assume that the reset happens when all the controllers call the step(basicTimestep) instruction.

##### Westin 04/08/2021 16:42:18
Can the mesh node only be used in a PROTO file? I'm not seeing it in the scene tree nodes
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/829758062306525204/unknown.png)
%end

##### DDaniel [Cyberbotics] 04/08/2021 16:46:51
`@Westin` need to add a Shape child first

##### jasonc1025 04/09/2021 01:25:33
Hi, this is my first time posting where I could use your help.  Yet as a JrHi/SrHi teacher, I'm excited about Webots as a solution in providing Robotics Education... online esp. during this pandemic season.  I've used a few sim tools (e.g. VRT, RVW) in the past, yet I appreciate the open-source, real-time responsiveness, and web-based features (e.g. RobotBenchmark.net) of Webots.  I need your advise as best practice on sending my students a Zipped File of the 'controllers/protos/worlds' directories - so they can open the .wbt file to test/mod that lesson's sim (kindly see a screenshot of a simple prototype below).  Yet I'm finding that what I create on Win does not load correctly on a Mac, and vice-versa (e.g. a 'Matlab' path issue: 'WARNING: To run Matlab controllers, you need to install Matlab 64-bit and ensure it is available from the DOS CMD.EXE console. ...  Warning: ... failed to start:  !).   What seemed to work is exporting VRML97 - as well as - copy/paste the Controller code into 'File: New World' for that respective Win/Mac platform.  Thus, I need to have *both*  a Win and Mac version for every zip-file-sim-lesson.  Any recommended process to have just 'one' zip file, yet be cross-platform friendly?  Sorry for the long text.  I'm such a newb.  😉
%figure
![2021-04-08_17-40-46.png](https://cdn.discordapp.com/attachments/565154703139405824/829889744669507604/2021-04-08_17-40-46.png)
%end

##### thonk enthusiast 04/09/2021 05:52:12
Ah so the wbt file doesn’t work cross-platform?

##### Olivier Michel [Cyberbotics] 04/09/2021 06:24:36
Everything should work cross-platform, especially if your controllers are interpreted language (MATLAB or Python) or Java. For C and C++ controllers, you will need to recompile them from the source, but that's very easy from the Webots IDE.

##### thonk enthusiast 04/09/2021 06:30:34
`@jasonc1025` could you post what errors/warnings you get when you try and open it?

##### Pancha 04/09/2021 14:13:34
Is there a way through code to reset the console if `Reset Simulation` button is pressed in Webots except for manually right clicking the console and selecting `Clear Console`? 🙂

##### AleBurzio 04/09/2021 14:22:57
Hello! Is there any way I can acquire the simulation time, aside from counting the simulation steps and multiplying by the world time step?

##### Darko Lukić [Cyberbotics] 04/09/2021 14:24:04
[https://cyberbotics.com/doc/reference/robot#wb\_robot\_get\_time](https://cyberbotics.com/doc/reference/robot#wb_robot_get_time)

There is the `wb_robot_get_time()` function


You can use the `CTRL` + `K` shortcut instead of the clicking

##### jasonc1025 04/09/2021 20:08:10
Hi Olivier `@Olivier Michel` and '! Thonk enthusiast' `@thonk enthusiast` , Thanks for the helpful, timely responses.  Oliver's advice helped tremendously, as the C-based controllers do need a rebuild - via the convenient 'Build' Button - esp. when switching between Win & Mac.



I only ran into one 'corner case' where the solution may involve a little more TLC, since the sample 'MyBot' - that I'm learning from - features multi-directory controllers: 1) Simple, 2) Camera and 3) Physics.  The first two rebuilt ok, yet the third had difficulty finding the desired controller file for re-building.  To minimize this post from becoming a 'thousand words', a screenshot/picture is being posted.  Thx again for any supportive time on this. 🙂
%figure
![2021-04-09_11-49-11.png](https://cdn.discordapp.com/attachments/565154703139405824/830172259682877480/2021-04-09_11-49-11.png)
%end

##### Ren is festive 04/09/2021 20:11:17
<:tSmile:816483891275759656>

##### thonk enthusiast 04/09/2021 20:51:00
uh, what exactly do you mean by 'TLC'?

##### jasonc1025 04/09/2021 20:51:19
Here is a second follow-up where I could use Olivier's and anyone else's help... 🙂



Question 1: Thx `@Olivier Michel`  to suggest that Python could be a solution to bypass this extra-step of manual-rebuilding, esp. when trying to provide a zipped .wbt package to students with either Win or Mac.   I like the idea, yet are there any Python Samples to learn from - similar to the following C Samples: 1) MyBot (nice & simple .wbt & controller file), 2) 4\_Wheels\_Robot (another nice & simple .wbt & controller file), and/or 3) Surveyor (nice tele-op via keyboard - since kids enjoy remote-control action - just as much as autonomous-mode ;).



Question 2: For my younger students who are still using 'block' programming, would it be advised that I just provide two downloadable zipped-packages - Win and Mac - and they just download, unzip and double-click the .wbt file (assuming they already have Webots installed)?   These are the same students who love the one-URL/Browser approach of RobotBenchmark.net (of which I'm also excited about and could use some help later - exploring the idea of sharing teacher-developed missions via the same platform, as a full curriculum-unit).  Believe me, teaching online under this pandemic has been draining - and I would celebrate the opportunity of not having to worry/support downloadable apps among a hundred+ JrHigh/SrHigh students with various computer types (Win, Mac, iOS, Android, etc.). 😉



Our budget is limited - as we *also* seek to reach out to 'under-resourced' students (feel free to verify our authenticity as I serve as Lead for open-source-based RoboQuest Robotics (second-listed program on [https://questforspace.com/quest-portal/](https://questforspace.com/quest-portal/)), yet I'll be happy to seek my Upper Admin to insure a win-win for everyone.  (Thx for anyone's support towards such a long post.  Now, off to more curriculum-dev.)  😉


TLC = Tender Loving Care... 😉

##### thonk enthusiast 04/09/2021 20:52:56
Ahh, ok.

##### Ren is festive 04/09/2021 20:54:27
so is this two separate programs? or is this one program for the same set of students?

##### Deleted User 04/09/2021 20:55:48
What do you mean by “python”


o7

##### jasonc1025 04/09/2021 21:04:26
Thx `@Ren is festive` & `@Deleted User` (cc: `@Olivier Michel`) for asking.  If I understand the question properly, any one given class can have students with a Win, Mac, or iPad (iOS).   Since I don't have enough skill-set to leverage the super-cool 'Web-Sim', we'll need the students to download the Webot desktop on their respective device, as well as download our Sim-Lessons per Zipped-.wbt Package (of which I'm seeking Olivier and others for best-practices advice, such as using *Python* language as a more turn-key solution to 'C' for younger students [no need to rebuild]).   Hope this makes sense. 🙂

##### thonk enthusiast 04/09/2021 21:05:46
Also,
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/830186756765646939/unknown.png)
%end


did you mean "Microsoft"? `@jasonc1025`

##### Deleted User 04/09/2021 21:06:45
`@sihan` please dont joke around, this is a serious discord server


I think its a documentary

##### Ren is festive 04/09/2021 21:08:10
ah, so the following class has students that have windows, IPADOS and Mac. In that case i think its better to give the two downloadables only if the staff can successfully manage to keep the class running smoothly even with multiple operating systems. Hope that helps <:tWink:821238815078219826>


ipad os = IOS for the ipad after IOS 13 I belive


[https://en.wikipedia.org/wiki/IPadOS](https://en.wikipedia.org/wiki/IPadOS)

##### Deleted User 04/09/2021 21:09:33
Yeah, ipad os but how about ipa dos

##### Ren is festive 04/09/2021 21:10:23
np <a:ANIwelcome:736304466080301176>

##### jasonc1025 04/09/2021 21:13:57
`@thonk enthusiast` Nice observation.  Amazingly enough, we have many volunteer-students helping with our non-profit company - such as web-dev.  So it appears that they haven't gotten to our spelling-correction request. 😉  I'll follow-up with them again.  🙂

##### thonk enthusiast 04/09/2021 21:15:34
> web-sim

I actually tried setting up the Web Simulation the other day, it wasn't *too* hard but the reverse proxy (for SSL + production deployments) was a bit tricky too


[https://cdn.discordapp.com/emojis/693723538552782888.png?size=64](https://cdn.discordapp.com/emojis/693723538552782888.png?size=64)


your experience may vary though

##### Ren is festive 04/09/2021 21:17:34
alright. also, could you tell more about your "project?". I'm passionate about helping elementry and JH peoples, and want to see if I can help with this is any way

##### Deleted User 04/09/2021 21:17:43
`@sihan` i think you sent the wrong emojis for your reactions, you might have misclicked

##### thonk enthusiast 04/09/2021 21:18:25
He called his project "Roboquest" which is the second row on that link he sent to questforspace


It looks interesting

##### Ren is festive 04/09/2021 21:18:40
hmm


I have experience helping out others in Robotics in my organization as well


`@thonk enthusiast` mind if we go into DM's?

##### thonk enthusiast 04/09/2021 21:20:06
Uhh yeah sure


`@Ren is festive` Check your friend requests

##### Ren is festive 04/09/2021 21:20:40
aight thxx

##### Deleted User 04/09/2021 21:20:48
I think you have to click alt+f4


No need to get angry


Its the... (guys, whats the altf4 equivalent on mac)

##### onecelerysticc is festive 04/09/2021 21:22:14
I don’t use macs a lot, perhaps you should ask someone else?


Thats not very nice, I do not have experience in this field, perhaps you should listen to Ow Ocelot


Oh but I saw you fixed it? I guess you don’t need help anymore

##### Deleted User 04/09/2021 21:25:43
<@&605343389285744640> whats with the trolls lately? Pls fix


Oh, im sorry


Please take a cookie as a sign of my apology 🍪

##### onecelerysticc is festive 04/09/2021 21:26:45
Perhaps you should go to a doctor?

##### Ren is festive 04/09/2021 21:27:52
`@sihan` this is a serious server, please leave if you are not here to contribute to the webot community, thank you

##### Deleted User 04/09/2021 21:28:32
Your*


Please stop trolling

##### onecelerysticc is festive 04/09/2021 21:29:30
I’m not too sure with doctor terminology, but I think you could try a podiatrist? I’m not too sure if thats the correct one though

##### Ren is festive 04/09/2021 21:30:40
says the person who doesnt have one

##### onecelerysticc is festive 04/09/2021 21:30:48
:0

##### thonk enthusiast 04/09/2021 21:31:34
`@Ren is festive` You shouldn't engage with the trolls they'll target you

##### Ren is festive 04/09/2021 21:31:42
youre right


<@&605343389285744640> please do something about this situation

##### Deleted User 04/09/2021 21:32:32
Just block them guys

##### Ren is festive 04/09/2021 21:33:09
i already did that

##### thonk enthusiast 04/09/2021 21:33:10
Yeah I did that already

##### Deleted User 04/09/2021 21:33:19
Kk


The moderation staff on this server really needs to step up and stop the trolls

##### thonk enthusiast 04/09/2021 21:34:22
I mean they probably don't have to deal with trolls often, this is a kinda niche community

##### Ren is festive 04/09/2021 21:34:27
yeah the mods here are pretty incompetent


yeah


the server seems dead as well

##### thonk enthusiast 04/09/2021 21:34:46
not to discredit them but


[https://cdn.discordapp.com/emojis/693723538552782888.png?size=64](https://cdn.discordapp.com/emojis/693723538552782888.png?size=64)

##### Luftwaffel [Moderator] 04/09/2021 21:38:51
`@sihan` This is a technical support server for Webots. Please refrain from using profane language, insulting people and try to conduct yourself in a respectful manner. Otherwise we'll have to ban you.


oh and `@Ren is festive` this was literally the first instance ever I have seen of a troll here, for the year I have been active here

##### Ren is festive 04/09/2021 21:54:48
oh wow ok

##### thonk enthusiast 04/09/2021 21:54:57
oh wow

##### Ren is festive 04/09/2021 21:55:03
yeah i never expected trolls in this place

##### thonk enthusiast 04/09/2021 21:55:06
+1

##### Ren is festive 04/09/2021 21:55:21
hopefully this doesnt happen again

##### thonk enthusiast 04/09/2021 21:57:00
Yeah probably not

##### jasonc1025 04/10/2021 00:08:40
Given `@Olivier Michel`  'scope-of-responsibility' in Webots, I appreciate your valuable time  - even via your kind 'thumb-up' emoji - to confirm that I should be in the right direction re: Rebuilding for Win/Mac Controller Code in C.  Now to hopefully learn more about the Python option. 😉


After further browsing, I ran into this exciting news 'The sample players as well as the "automatic referee" are implemented in *Python*, which should allow for easily updating the code to match the rules and *avoid any compilation issues*.' from [https://robocupjuniortc.github.io/rcj-soccer-sim/](https://robocupjuniortc.github.io/rcj-soccer-sim/).  Perhaps this is a good model to learn how to code in Python for Webots, plus I've been searching for an alternative robotics competition for my students (trying to wean off of FLL [Lego EV3]). 😉  Any other suggested Webots Sims in Python to explore?

##### diluccockballs 04/10/2021 00:14:38
very interesting


maybe you ought to implement a *rules channel*

##### Olivier Michel [Cyberbotics] 04/10/2021 08:49:54
For graphical programming of robots in Webots, you might be interested to check this out: [https://www.stormingrobots.com/prod/dev2.html](https://www.stormingrobots.com/prod/dev2.html) (especially the first project with Blockly programming in Webots).

##### Stormtrooper 04/10/2021 12:22:02
(Sorry for posting multiple times, i posted the wrong picture at first)

I'm having trouble with measuring how much the robot's CG is shifting, i need this data to measure the robot's stability margin. I've "borrowed" the code from the  center\_of\_mass.wbt sample from the 'how to' page, but the data produced is very small, even after multiplying by 1000 (i need the data in mm). The data output does seem to make sense though, since it is changing proportionally to the change in my robot's direction.
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/830417340512206878/unknown.png)
%end

##### alireza1992 04/10/2021 13:47:34
hi,

I have a humanoid robot, op3;

I want to know its joint's velocity.

I know that we can read the angular position of each joint from 'getPositionSensor("motor's name") ' ; I want what like this.

I don't want to use gyro sensor in my joints, because gyro get angular velocity respect to global coordinate, so I should do some summations and subtractions to compute the relative angular velocity.

how can I do it?

thanks 🙏

##### Bitbots\_Jasper [Moderator] 04/10/2021 13:49:49
The motor device has a function called getVelocity()


[https://cyberbotics.com/doc/reference/motor?tab-language=python#wb\_motor\_get\_velocity](https://cyberbotics.com/doc/reference/motor?tab-language=python#wb_motor_get_velocity)

##### alireza1992 04/10/2021 13:51:50
Thank you for your quick response 🙏 🙏 🙏 .

I need to get current velocity of a joint. However getVelocity() returns the velocity that is specified by setVelocity() method or the maxVelocity parameters in Proto file.

##### Bitbots\_Jasper [Moderator] 04/10/2021 15:53:52
you can do getPosition at each timestep and calculate the difference in position/timestep to get the velocity

##### jasonc1025 04/10/2021 18:02:12
Thx again `@Olivier Michel` for your precious time to support the students/families of which I serve (btw, in 'Silicon Valley', CA).  First Python, and now Blockly... sweet.  As an appreciation for this highly supportive community - as led by Olivier and Crew - I ran into an amazing tutorial for the RoboCupJunior Soccer Sim in Webots... using Python!  This is the best Python tutorial that I've seen so far, where even the Supervisor concept is introduced.  (Based on the educational-quality of this tutorial, perhaps this was developed in-house by Webots?)  😉  And what's so cool about this Webots Soccer Sim... it works turnkey style - unlike other Sim Engines that requires so much more setup/dependencies 'TLC'.  😉  Here is the link: [https://robocupjuniortc.github.io/rcj-soccer-sim/how\_to/](https://robocupjuniortc.github.io/rcj-soccer-sim/how_to/)  Cheers.  🙂

##### thonk enthusiast 04/10/2021 19:11:13
So, if I’ve gotten this correct, you’re planning a competition style simulation with Blockly and python using Webots?

##### jasonc1025 04/10/2021 19:37:42
It's a key way to get Jr Highers (younger and older) motivated to learn, yet we wish also emphasize team-vs-team (so no solo lone rangers). 😉

##### Ren is festive 04/10/2021 19:40:06
thats pretty nice, since Junior Highers like competition. I think its a great idea to motivate students and make the learning process more enjoyable <:tWink:821238815078219826>

##### jasonc1025 04/10/2021 19:57:05
just for fun, no obligation, yet it's kind of nice to learn more about the community here.  I'm from 'Silicon Valley' (South Bay) in CA, USA.  Where are you `@thonk enthusiast`  and `@Ren is festive`  from(?), assuming i'm not just talking to 'smart bots'.  😉  I assume that we're from all parts of this world?  🙂

##### diluccockballs 04/10/2021 21:23:43
[https://cdn.discordapp.com/emojis/771407331489087569.png?size=64](https://cdn.discordapp.com/emojis/771407331489087569.png?size=64)

##### Ren is festive 04/11/2021 04:38:33
I’m a student residing in the United States

##### thonk enthusiast 04/11/2021 04:39:48
Yeah, I'm also a student


`@Ren is festive` Where in the US? If you're in the west coast go to DMs

##### Ali\_1 04/11/2021 05:08:50
Hi, is it possible to change the cursor style in 3D view?

##### Ren is festive 04/11/2021 05:11:06
oh you live in west coast as well? Aight check dms

##### Supernova 04/11/2021 08:45:10
Hey! Is it possible to use path planning in webots?

##### umairnaseer21 04/11/2021 14:49:17
Hi, how can I import a 3D model in webot along with joints and other stuff?

##### Bitbots\_Jasper [Moderator] 04/11/2021 14:51:13
webots itself does not have path planning algorithms implemented but you can either implement them yourself or (preferably) use existing implementations

this may be a good refernce: [https://github.com/AtsushiSakai/PythonRobotics/tree/master/PathPlanning](https://github.com/AtsushiSakai/PythonRobotics/tree/master/PathPlanning)

and if you are already using ros then the ros navigation stack is a good option


what format is your model in?

##### umairnaseer21 04/11/2021 14:51:53
Secondly any material for coding. Actually i am working on project and don't have any idea about coding


Its in stl filw


File


There is a tool, robotic arm pick it and put it in AGV, then AGV moves and again robotic arm pick it and put it on convayer belt.


This is the case scenario.

##### Bitbots\_Jasper [Moderator] 04/11/2021 14:54:09
firstly, check if your robot is already included in webots [https://cyberbotics.com/doc/guide/robots](https://cyberbotics.com/doc/guide/robots)

##### umairnaseer21 04/11/2021 14:55:05
I think we can use universal robotic system.


For AGV, i have designed an AGV

##### Bitbots\_Jasper [Moderator] 04/11/2021 14:55:58
creating a robot model is quite a long task and an stl does not have all the information that a robot model needs such as the pose of the joints

##### umairnaseer21 04/11/2021 14:56:33
No i want to instal the tool only


And AGV

##### Bitbots\_Jasper [Moderator] 04/11/2021 14:57:20
agv = autonomous guided vehicle ? so just a mobile robot?

##### umairnaseer21 04/11/2021 14:57:31
Yes


Universal robot is already present


In library

##### Bitbots\_Jasper [Moderator] 04/11/2021 14:58:20
do you have a urdf for the mobile robot?

##### umairnaseer21 04/11/2021 14:58:21
Universal robotic arm.


No

##### Bitbots\_Jasper [Moderator] 04/11/2021 14:58:49
do you have a CAD model?

##### umairnaseer21 04/11/2021 14:58:50
Its again designed in fusion 360


Yes

##### Bitbots\_Jasper [Moderator] 04/11/2021 15:01:15
if the model is quite complex it can be a good idea to automate the export, you could use [https://github.com/syuntoku14/fusion2urdf](https://github.com/syuntoku14/fusion2urdf) in combination with [https://github.com/cyberbotics/urdf2webots](https://github.com/cyberbotics/urdf2webots) to get a proto model


if it is not that complex it is probably quicker to model it yourself using the proto language

##### umairnaseer21 04/11/2021 15:02:21
Proto language?

##### Bitbots\_Jasper [Moderator] 04/11/2021 15:02:44
there is a tutorial [https://cyberbotics.com/doc/guide/tutorial-7-your-first-proto](https://cyberbotics.com/doc/guide/tutorial-7-your-first-proto) and an extensive documentation [https://cyberbotics.com/doc/reference/proto](https://cyberbotics.com/doc/reference/proto) on how to create these proto models


proto is the format used by webots for robot models

##### umairnaseer21 04/11/2021 15:03:59
Secondly i need to write a script in python. Any source of help?


<@321244789527805964>  thankyou soo much Man.


I was bit worried because i don't have much time. But you really helped me alot.

##### Bitbots\_Jasper [Moderator] 04/11/2021 15:08:04
This seems to be a quite complex scenario you are trying to build. Could you elaborate a bit more on how robust this has to be? should the arms just perform preprogrammed motions or do you need to do adaptive motions with some sensing of the part that is being picked up?

##### umairnaseer21 04/11/2021 15:09:59
It is like one cube is placed on table and robot will pick it and put it in AGV.  That AGV travels and reach a place where that part will be picked up by robotic arm.


I need to install a gripper as well


If i could get some tutorial related to this seen. Then it will be very easy. But i could not find on youtube.

##### Bitbots\_Jasper [Moderator] 04/11/2021 15:45:11
"should the arms just perform pre-programmed motions or do you need to do adaptive motions with some sensing of the part that is being picked up?" is really the important question, if you have to do motion planning it becomes much more complex

##### umairnaseer21 04/11/2021 15:45:56
No, its just simple motion


Without sensors

##### Beginner26798 04/11/2021 15:46:27
Does anyone have the UR10e robotic arm code please

##### Bitbots\_Jasper [Moderator] 04/11/2021 15:48:01
there are some written tutorials in the documetation, I believe they are a good starting point


is this what you are looking for: [https://github.com/cyberbotics/webots/blob/master/projects/robots/universal\_robots/controllers/ure\_can\_grasper/ure\_can\_grasper.c](https://github.com/cyberbotics/webots/blob/master/projects/robots/universal_robots/controllers/ure_can_grasper/ure_can_grasper.c) ?

##### umairnaseer21 04/11/2021 15:49:00
I think yes


Thankyou soo much.


I will start with this.

##### Beginner26798 04/11/2021 15:50:25
Can someone help me please

##### Bitbots\_Jasper [Moderator] 04/11/2021 15:50:49
i just replied to you

##### umairnaseer21 04/11/2021 15:51:11
This is for you as well.

##### Beginner26798 04/11/2021 15:51:12
Oh sorry i didn't see that thanks

##### Stormtrooper 04/11/2021 15:52:01
Does anyone know how to obtain the distance traveled by a robot's COM during turning/movement (relative to its current position)?

##### Bitbots\_Jasper [Moderator] 04/11/2021 15:55:14
what sensors do you have available? do you want to use a supervisor controller (something that you will not have in the real world and is therefore "cheating")

##### Stormtrooper 04/11/2021 15:58:47
Thanks for replying, the robot has Lidar, a distance sensor, accelerometers, GPS, and IMU. And yes i am willing to use a supervisor controller. i miight have it already as i "borrowed" the code from the center\_of\_mass.wbt sample from the how to page. but theres not that much documentation so i dont really understand whats going on that well

##### Bitbots\_Jasper [Moderator] 04/11/2021 16:04:10
you have a few options:

1. for the position you can use the GPS sensor [https://cyberbotics.com/doc/reference/gps](https://cyberbotics.com/doc/reference/gps), for orientation you can use your IMU [https://cyberbotics.com/doc/reference/inertialunit](https://cyberbotics.com/doc/reference/inertialunit)

2. you could also calculate the odometry [https://en.wikipedia.org/wiki/Odometry](https://en.wikipedia.org/wiki/Odometry) based on how much you wheels have turned (if you have a wheeled robot?)

3. you can request the fields "translation" and "rotation" from the robot node using the supervisor controller [https://cyberbotics.com/doc/reference/supervisor#wb\_supervisor\_node\_get\_field](https://cyberbotics.com/doc/reference/supervisor#wb_supervisor_node_get_field)

##### Stormtrooper 04/11/2021 16:18:31
Thanks again for replying, i dont think i quite understand how these options may help me. sorry but I may have phrased the question wrongly. i meant to ask for the distance traveled by a robot's CG from its COM during turning in mm. As in, the robot's CG should be on top of its COM during constant velocity movement, but when turning the CG should be offset from the COM by a certain distance. i meant to ask how to find this distance?

##### Maurice Faraj 04/11/2021 16:21:23
hello everyone


I need a ur10e code with an attached camera on its endpoint can anyone help me please

##### Bitbots\_Jasper [Moderator] 04/11/2021 16:22:16
ok i assumed you have a mobile robot with a static center of mass, could you specify what kind of robot you are using?

##### Stormtrooper 04/11/2021 16:28:26
I am using a custom made robot, its meant to simulate a robot ill be building soon.
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/830841736188002364/unknown.png)
%end

##### Bitbots\_Jasper [Moderator] 04/11/2021 16:29:41
it seems like the com is not moving relative to the robot so you can take the reading of the imu and gps at the beginning of the motion and at the end and the difference between them is how much your robot has moved

##### Maurice Faraj 04/11/2021 16:33:52
I'm trying to control this can any one help me please its a ur10e that have a camera in the place of the last link
%figure
![camera.png](https://cdn.discordapp.com/attachments/565154703139405824/830843104097468436/camera.png)
%end

##### Beginner26798 04/11/2021 16:36:06
Nice Idea 👍 help him please

##### Stormtrooper 04/11/2021 16:47:22
sorry that was a unrepresentative screenshot of the data, here is a better representation of the data. it shows the CG movement data while in uniform travel, straight line braking, and turning. but the data output is very small? though the change does seem to correlate with the change in direction
%figure
![2fyp4.png](https://cdn.discordapp.com/attachments/565154703139405824/830846503006240788/2fyp4.png)
%end

##### Supernova 04/11/2021 17:17:36
thank you, i will look into that ❤️

##### jasonc1025 04/11/2021 19:26:03
Thanks also `@Bitbots_Jasper` for the Python lead.  For the WeBots Team: might there be plans to build a 'simple' version of path-planning, within WeBots API set, as an educational tool for Jr/Sr High Students & even Adults - like myself - to experiment & learn from?  I understand this is a tall-order, since as an indie-game-developer, path-planning for enemy-bots is a bonus, advanced feature to experience.  So no rush in replying to this   😉


`@Bitbots_Jasper` wow, you rock :).  Your 'Tutorial-7-Your-First-Proto' lead brought me to the earlier lesson:  [https://cyberbotics.com/doc/guide/tutorial-6-4-wheels-robot?tab-language=python](https://cyberbotics.com/doc/guide/tutorial-6-4-wheels-robot?tab-language=python), which helps me convert an existing C-Coded Controller into Python, to avoid the need for rebuilding in a Win/Mac cross-platform classroom-environment (a topic I had posted earlier).  Even all 5 languages are *clearly* featured.  Can't wait to have my Jr/Sr High students to start looking at this.  Super-rocking.  🙂
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/830894796981403679/unknown.png)
%end

##### alireza1992 04/12/2021 08:35:13
Hi everybody;

I have an OP3 robot, I want to access to one of its link with supervisor, for example its shoulder, is it possible? how can I do it?

How can I use "supervisor.getFromProtoDef()" in python?

##### Darko Lukić [Cyberbotics] 04/12/2021 09:26:29
The `getFromProtoDef` is a member method of a node, so you should get the node first. For example, `supervisor.getFromDef('MY_ROBOT').getFromProtoDef(...`

##### alireza1992 04/12/2021 10:02:39
Thank you🙏

##### Harris 04/12/2021 12:46:05
Hi, I am doing collision check in a specific situation. Stage 1 is detect a moving robot arm is collided with other objects or not, and stage 2 is that detect collision of a moving robot with a connected solid(use connector). I use touch sensor function which has to be called with a robot controller. Is there any way to do stage 2 collision check without adding a robot node/controller to the connected solid?

##### Yi Zhou 04/12/2021 14:40:29
Hello everyone, I have tried to use ikpy package in my python script, and there is a demo about how to use it in webots, but when I try to use getUrdf to get my link, the number of link I got is incorrect. Could anyone tell me if you have better way to use ikpy in webots?

##### Darko Lukić [Cyberbotics] 04/12/2021 14:47:47
Hello, you can define links manually, see:

[https://github.com/cyberbotics/webots/blob/d7ecc8022d19c00242781a0edb173c6b494c8b84/projects/robots/abb/irb/controllers/inverse\_kinematics/inverse\_kinematics.py#L31-L68](https://github.com/cyberbotics/webots/blob/d7ecc8022d19c00242781a0edb173c6b494c8b84/projects/robots/abb/irb/controllers/inverse_kinematics/inverse_kinematics.py#L31-L68)



Do you get less or more links with `getUrdf`? The link is exported if the corresponding Webots solid node has a name.

##### Yi Zhou 04/12/2021 14:48:38
Hi, actually, I got less link

##### Darko Lukić [Cyberbotics] 04/12/2021 14:52:09
Hello, maybe this can help:

[https://cyberbotics.com/doc/reference/supervisor?tab-language=python](https://cyberbotics.com/doc/reference/supervisor?tab-language=python)



Alternatively, you can create a physics plugin:

[https://www.cyberbotics.com/doc/reference/physics-plugin](https://www.cyberbotics.com/doc/reference/physics-plugin)


You should be able to solve it by adding more solid nodes

##### Yi Zhou 04/12/2021 14:54:59
Could you please tell me how I can add more solid nodes?

##### Darko Lukić [Cyberbotics] 04/12/2021 14:56:39
Did you model the robot in Webots?

##### Yi Zhou 04/12/2021 15:03:20
the robot can show by webots


Actually, I have 7 link solid nodes

##### Beginner26798 04/12/2021 17:14:57
Hi , I'm trying to inegrate a camera and I'm using the code posted on the webots site,but i m getting this error what should i do
%figure
![20210412_201230.jpg](https://cdn.discordapp.com/attachments/565154703139405824/831215832293703710/20210412_201230.jpg)
%end


// File:          discordtest.cpp

// Date:

// Description:

// Author:

// Modifications:



// You may need to add webots include files such as

// <webots/DistanceSensor.hpp>, <webots/Motor.hpp>, etc.

// and/or to add some other includes

\#include <webots/Robot.hpp>

\#include <webots/Camera.hpp>

// All the webots classes are defined in the "webots" namespace

using namespace webots;



// This is the main program of your controller.

// It creates an instance of your Robot instance, launches its

// function(s) and destroys it at the end of the execution.

// Note that only one instance of Robot should be created in

// a controller program.

// The arguments of the main function can be specified by the

// "controllerArgs" field of the Robot node

int main(int argc, char **argv) {

  // create the Robot instance.

  Robot *robot = new Robot();

  namespace webots {

    class Camera : public Device {

      virtual void enable(int samplingPeriod);

      virtual void disable();

      int getSamplingPeriod() const;

      // ...

    }

  }



  // get the time step of the current world.

  int timeStep = (int)robot->getBasicTimeStep();



  // You should insert a getDevice-like function in order to get the

  // instance of a device of the robot. Something like:

  //  Motor *motor = robot->getMotor("motorname");

  //  DistanceSensor *ds = robot->getDistanceSensor("dsname");

  //  ds->enable(timeStep);



  // Main loop:

  // - perform simulation steps until Webots is stopping the controller

  while (robot->step(timeStep) != -1) {

    // Read the sensors:

    // Enter here functions to read sensor data, like:

    //  double val = ds->getValue();



    // Process sensor data here.



    // Enter here functions to send actuator commands, like:

    //  motor->setPosition(10.0);

  };



  // Enter here exit cleanup code.



  delete robot;

  return 0;

}


This is my code

##### KNTRL [Premier Service] 04/12/2021 17:17:38
Hi guys,

So I am trying to figure out all of the sensors and while trying to work on the range-finder, I have my doubts that the sample-file is working as intendet for me? I also tried to play around in a simple project, but the results on the data-array are either minrange or maxrange values, no matter what I do
> **Attachment**: [range\_finder\_example.mp4](https://cdn.discordapp.com/attachments/565154703139405824/831216507798290492/range_finder_example.mp4)

##### Maurice Faraj 04/12/2021 18:14:00
Me to I’m having the same error if anyone can help us please I well be so grateful

##### DDaniel [Cyberbotics] 04/12/2021 19:13:20
`@KNTRL` Hi, which version of Webots are you using? Just tested the sample world on R2021a and it appears to be working

##### Beginner26798 04/12/2021 19:47:01
I have rhe 2020b

##### KNTRL [Premier Service] 04/12/2021 20:01:12
<@787796043987025941> I'm on 2021a too, and I haven't touched the file before simulating.

##### Beginner26798 04/12/2021 20:30:29
Can you please send the link of the latest version of webots maybe that's the problem

##### DDaniel [Cyberbotics] 04/12/2021 20:58:51
`@Beginner26798` you can't simply copy-paste the code snippet from the documentation and expect it to work like you did here

```
namespace webots {
    class Camera : public Device {
      virtual void enable(int samplingPeriod);
      virtual void disable();
      int getSamplingPeriod() const;
      // ...
    }
  }
```

but instead

```
Robot *robot = new Robot();
Camera *camera;
camera = robot->getCamera("name_of_the_camera");
camera->enable(TIME_STEP);
```



If you're not comfortable with c++ there's other options, and I suggest you follow the tutorials to begin with.


`@KNTRL` very odd, what OS are you on?

##### smasud98 04/12/2021 23:38:05
Hi guys

I am very new to Webots so apologies if this question is very basic or has been answered already. I want to make a monitor/global controller that would keep track of the positions of all the objects in the environment. I was wondering if it is possible to extract the translation, size, and rotation attributes of all of the objects in the environment. Thanks

##### Baziyad 04/13/2021 00:05:20
Hello everyone


I am trying to remotely control my OP2 robot using Webot, but I am getting the following error:

[sudo] password for robotis: [sudo] password for robotis: sudo: /robotis/Linux/project/webots/remote\_control/remote\_control: command not found







What could be the problem and how to solve?



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/831319292950872164/unknown.png)
%end


Thanks in advance 🙂 Really enjoying Webot

##### Deleted User 04/13/2021 00:35:04
I have no idea

##### thonk enthusiast 04/13/2021 01:10:04
I think you've either linked it incorrectly or using the wrong path
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/831335399329759273/unknown.png)
%end


If I remember how `ln` works correctly


You linked /robotis/Linux/project/demo/demo to /robotis/Linux/project/webots*/default*


but you didn't specify default in your remote control command path


try this one


```bash
echo 111111 | sudo -S /robotis/Linux/project/webots/default/remote_control/remote_control 2 2
```

##### Baziyad 04/13/2021 01:38:15
Thank you very much for your kind reply

##### thonk enthusiast 04/13/2021 01:38:52
You're welcome

##### Baziyad 04/13/2021 01:40:46
But Webot generates automatically the code and installs it on OP2 robot.

I think the directory is correct, when I navigate to:

 /robotis/Linux/project/webots/remote\_control/



I find this folder, but I find any  remote\_control file inside


but I don't find*


Webot did not install it on the OP2 robot?



%figure
![WhatsApp_Image_2021-04-13_at_5.41.54_AM.jpeg](https://cdn.discordapp.com/attachments/565154703139405824/831343540071825409/WhatsApp_Image_2021-04-13_at_5.41.54_AM.jpeg)
%end


Webot is trying to run the follwoing:

/robotis/Linux/project/webots/remote\_control/remote\_control



Which there is no file named "remote\_control" inside remote\_control folder as shown in the image.

Looks like Webot is not installing all the required files? How to solve?

##### thonk enthusiast 04/13/2021 01:47:17
[https://cdn.discordapp.com/emojis/771407331489087569.png?size=64](https://cdn.discordapp.com/emojis/771407331489087569.png?size=64)


apparently someone else had this problem


this one


The recommended solution was to uninstall webots + reinstall it

##### Baziyad 04/13/2021 01:48:18
I already did 😭

##### thonk enthusiast 04/13/2021 01:48:39
uhhh


try running make?


I see a makefile in the directory


maybe it didn't compile ¯\\\\_(;-;)\_/¯

##### Baziyad 04/13/2021 01:53:01
I get:

no makefiles found. Stop.

##### thonk enthusiast 04/13/2021 01:54:13
uhh try "make -f Makefile.robotisop2" or "make -f Makefile.robotis-op2"


just try pointing the make to the makefile

##### Baziyad 04/13/2021 01:57:46
I get:

no rule to make the make target Makefile.robotis-op2. Stop.


no rule to make the target Makefile.robotis-op2. Stop.


Btw: in the remote window in Webot, I get an error before:



[sudo] password for robotis: LinuxNetwork.cpp:225:70: error: no ‘const Robot::LinuxServer& Robot::LinuxServer::operator<<(const string&) const’ member function declared in class ���Robot::LinuxServer’

LinuxNetwork.cpp:235:62: error: no ‘const Robot::LinuxServer& Robot::LinuxServer::operator<<(const int&) const’ member function declared in class ‘Robot::LinuxServer’

LinuxNetwork.cpp:248:64: error: no ‘const Robot::LinuxServer& Robot::LinuxServer::operator>>(std::string&) const’ member function declared in class ‘Robot::LinuxServer���

LinuxNetwork.cpp:258:46: error: no ‘void Robot::LinuxServer::accept(Robot::LinuxServer&)’ member function declared in class ‘Robot::LinuxServer’

LinuxNetwork.cpp:266:58: error: no ‘bool Robot::LinuxServer::send(unsigned char*, int)’ member function declared in class ‘Robot::LinuxServer’

LinuxNetwork.cpp:271:57: error: no ‘int Robot::LinuxServer::recv(unsigned char*, int)’ member function declared in class ���Robot::LinuxServer’

make[1]: *** [LinuxNetwork.o] Error 1

make: *** [darwin.a] Error 2


The file LinuxNetwork.cpp is dropping errors



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/831348185888587826/unknown.png)
%end


Another error while scrolling in the console:



Note that here it is trying to run "make" in the directory "remote\_control", but "LinuxNetwork.cpp" is dropping error
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/831348945288167424/unknown.png)
%end


I think "LinuxNetwork.cpp" is causing the problems!

This file is specific to the OP2 robot


Is there any workaround to run a Webot world file code in the OP2 robot rather than the Transfer window in Webot?

##### Olivier Michel [Cyberbotics] 04/13/2021 05:43:12
Yes, using a supervisor.

##### aja\_discord 04/13/2021 06:04:18
Hi Guys, I'm trying to make a self balancing robot that learns from a genetic algorithm. But I'm unable to restore the position of the robot properly..From my observations it seems the supervisor and controller are out of sync...meaning that when the supervisor resets the robots position the robot controller still keeps on running it motors hence loosing its balance early on, unlike what I want...I don't understand how to get this fixed...Here are the links to the supervisor and controlloer...Thanks in advance...The functions in concern are  **restore\_robot\_position(), run\_optimization(), evaluate\_genotype() ** ***Links :***[https://pastebin.com/H0jnEjN5](https://pastebin.com/H0jnEjN5)     [https://pastebin.com/eyzcPrey](https://pastebin.com/eyzcPrey)

##### KNTRL [Premier Service] 04/13/2021 06:41:07
<@787796043987025941> I'm on Windows 10. I'll try a new installation later today

##### h.sciascia 04/13/2021 06:45:55
Hello everyone !

I would like to create a world with a robot (6 DOF) which responds as close as from the reality. The most important item I would like is the deceleration of the robot. For exemple, if the robot is doing a very large arm movement (high speed and acceleration), and the robot need to stop, how can I simulate the deceleration from the moment I said stop to the robot ?

In other terms, how can I get the "real" paramaters torque and velocity (maybe controlPID and acceleration) for each motor ?

Thank in advance

##### bingdong 04/13/2021 08:38:36
Hello!

How can I take text input from user while running a Python-based controller?

When using the input() function, the console just hangs.

##### Master.L 04/13/2021 09:42:50
hello!

I am trying to do reinforcement learning on webots using deepbots.



What is the difference between emitter-receiver method and supervisor method?

##### DDaniel [Cyberbotics] 04/13/2021 09:46:13
`@bingdong` if you want to control the robot using the keyboard you can use the keyboard functions [https://cyberbotics.com/doc/reference/keyboard?tab-language=python](https://cyberbotics.com/doc/reference/keyboard?tab-language=python)

##### bingdong 04/13/2021 10:05:30
From what I understand, the Keyboard Functions are for key press input. I want to  be able to give a text input of a list according to which the robot simulates.

##### aja\_discord 04/13/2021 10:06:22
supervisor is something like another controller but it has special functions, more that that of the robot class.You can think of it like adding the presence of a human to your simulation.Emitter\_Reciever method is like adding a radio module or infrared module to your robot.You are esentially opening a communication link for the robot...Hope this helps

##### DDaniel [Cyberbotics] 04/13/2021 10:27:16
I don't see that working well, but maybe I'm misunderstanding. If you have multiple robots that have the same controller but want them to behave differently you can do so using controller arguments [https://cyberbotics.com/doc/guide/controller-programming#using-controller-arguments](https://cyberbotics.com/doc/guide/controller-programming#using-controller-arguments)

Alternatively, you can create a supervisor that communicates with the robot through an emitter/receiver and sends out that information to the robot at the appropriate time.


The difference and use-cases is explained in the deepbots repository: [https://github.com/aidudezzz/deepbots/blob/dev/README.md](https://github.com/aidudezzz/deepbots/blob/dev/README.md)

##### Maurice Faraj 04/13/2021 10:31:03
Hello everyone hope you’re fine I’m facing a problem in my webots project I’m trying to enable the camera on I’m used several code to do this but the camera did not function and nothing wrong with the code . if any one can help me please I will be so grateful and thank you all

##### DDaniel [Cyberbotics] 04/13/2021 10:34:39
`@aja_discord` The supervisor `simulationReset` function doesn't actually restart the controllers. If you want it to, you need to manually do so [https://www.cyberbotics.com/doc/reference/supervisor?tab-language=c++#wb\_supervisor\_node\_restart\_controller](https://www.cyberbotics.com/doc/reference/supervisor?tab-language=c++#wb_supervisor_node_restart_controller)

##### bingdong 04/13/2021 10:59:43
Controller Arguments was what I needed, yes. Thank you!

##### KNTRL [Premier Service] 04/13/2021 11:20:08
<@787796043987025941> I installed the R2021a new and I am still having the same problem (Windows 10, 64 Bit), but here comes the interesting part: I also have a 2020b Version on the machine where it seems to work.


If I take the working file from the R2020b folder and try to open it with R2021a version, it won't work (like in the previously posted video)



Furthermore I noticed that when I start Webots R2021a and it autostarts the range-finder sample project, it throws an



ERROR: Shader compilation failed! Filename: encode\_depth.frag

0(5) : error C1059: non constant expression in initialization

##### Baziyad 04/13/2021 12:22:03
Hello everyone,



Can someone help me with my problem?

##### Johan2021 04/13/2021 12:41:27
Hi everyone, I am trying to model a Physics plugin that would perform some action depending on the value of a Connector node's `isLocked` value ([https://cyberbotics.com/doc/reference/connector#wb\_connector\_is\_locked](https://cyberbotics.com/doc/reference/connector#wb_connector_is_locked)). I found that ODE provides functions such as `dBodyGetPosition()` to directly retrieve information about the robot, but I was wondering whether there is some functionality that would allow to retrieve (and not necessarily change) the `isLocked` field that is part of the Connector node - being governed by the controller.



It should be possible to send the boolean value of `isLocked` from the controller using the `dWebotsReceive()` function in the plugin and the `wb_emitter_send()` function of an Emitter node - as explained here [https://www.cyberbotics.com/doc/reference/utility-functions#dwebotssend](https://www.cyberbotics.com/doc/reference/utility-functions#dwebotssend). But for design reasons I was hoping to avoid this approach. Does someone have more knowledge or ideas on this? Greatly appreciated!

##### Sutirtha38 04/14/2021 06:39:18
Hi All,

I  am trying a NAO  robot to react to a video, I am unable to include the video source into the environment. Any Help?

Cheers,

Suti

##### Darko Lukić [Cyberbotics] 04/14/2021 06:59:41
Hello, Webots creates a fixed joint between two connectors when locked:

[https://github.com/cyberbotics/webots/blob/180777b4f9114e336eb39f70f8feda42a7ffc552/src/webots/nodes/WbConnector.cpp#L486](https://github.com/cyberbotics/webots/blob/180777b4f9114e336eb39f70f8feda42a7ffc552/src/webots/nodes/WbConnector.cpp#L486)



Maybe, you can exploit it in the physics plugin


You can set an image to the Display node:

[https://stackoverflow.com/questions/58286019/webots-displaying-processed-numpy-image-opencv-python/58298221#58298221](https://stackoverflow.com/questions/58286019/webots-displaying-processed-numpy-image-opencv-python/58298221#58298221)

So, maybe you can do it continuously from a controller.



One more idea (that I am not sure about) is to use `wbr_camera_set_image`:

[https://github.com/cyberbotics/webots/blob/114ef740e47613c8235022716d7cf0782e383f3a/projects/robots/gctronic/e-puck/plugins/remote\_controls/e-puck\_bluetooth/EPuckInputPacket.cpp#L127](https://github.com/cyberbotics/webots/blob/114ef740e47613c8235022716d7cf0782e383f3a/projects/robots/gctronic/e-puck/plugins/remote_controls/e-puck_bluetooth/EPuckInputPacket.cpp#L127)

and then `wb_display_attach_camera`:

[https://cyberbotics.com/doc/reference/display#wb\_display\_attach\_camera](https://cyberbotics.com/doc/reference/display#wb_display_attach_camera)



In any case, you need a controller that reads frame by frame from a video file and sends it to Webots.

##### Uanuan 04/14/2021 08:46:34
Hi all, I'm trying (hopefully) to create a socket server that will eventually control a bunch of bots simulated in the webots environment, so I have setup a python server (separated from the main controller thread), and in turn, it listens to connection requests from other programs. One thing I noticed is that the main thread appears to be stuck at 0 when I start the simulation (the timer stays at 0), and it will only spit out a bunch of text when I  terminate the simulation (which kills the server as well). Although the client/server interactions appear to be correct based on my test drivers, I'm obviously doing something very wrong. Can you give me some pointers on how to fix this problem? Here's how the controller code looks like:

def main():

    robot = Robot()



    #sets up the server thread and start it

    server = SocketServer(server\_address, serverStatusCallback, PORT, maxConns)

    server.start()

whereas SocketServer class looks like the following and I've called threading.Thread.\_\_init\_\_(self) beforehand to start the server, so I ddin't get any errors from Python =>

class SocketServer(threading.Thread): <--- when run() is called, it just enters into a loop to listen() and spawn additional threads to handle client connections. In addition, I've also set all of the print to console with flush=True option.

##### James Le Poidevin 04/14/2021 09:26:49
Hello, Is there an example of a ros2 package that doesn't launch a world file but uses one already open (either by another pkg or just by hand)?

##### Darko Lukić [Cyberbotics] 04/14/2021 09:29:20
No, but you should be able to exclude the Webots world from the launch files and then run only controller

##### Stefania Pedrazzi [Cyberbotics] 04/14/2021 09:40:16
You should make sure that in your controller program you have the simulation main loop that calls `robot.step(timestep)` otherwise if the Robot has the `synchonization` field set to true the simulation won't advance because it will wait for this controller:

[https://www.cyberbotics.com/doc/guide/controller-programming#controller-programming](https://www.cyberbotics.com/doc/guide/controller-programming#controller-programming)

##### James Le Poidevin 04/14/2021 09:48:10
I'm using an example of the robot_launch.py file from github and i keep getting the error
```  RuntimeError: Included launch description missing required argument 'world' (description: 'Path to Webots' world file. Make sure `controller` field is set to `<extern>`.'), given: [package, executable, robot_name]

```

Do i even need to use the `webots = IncludeLaunchDescription(...)` part ?

##### Darko Lukić [Cyberbotics] 04/14/2021 11:00:02
You cannot use `robot_launch.py`, but you can take inspiration from it:

[https://github.com/cyberbotics/webots\_ros2/blob/master/webots\_ros2\_core/launch/robot\_launch.py](https://github.com/cyberbotics/webots_ros2/blob/master/webots_ros2_core/launch/robot_launch.py)



For example, to run the controller you need only this part:

[https://github.com/cyberbotics/webots\_ros2/blob/57f8f48121243f24f35675ba1b54b886da8690f4/webots\_ros2\_core/launch/robot\_launch.py#L108-L122](https://github.com/cyberbotics/webots_ros2/blob/57f8f48121243f24f35675ba1b54b886da8690f4/webots_ros2_core/launch/robot_launch.py#L108-L122)



And to run the simulation:

[https://github.com/cyberbotics/webots\_ros2/blob/57f8f48121243f24f35675ba1b54b886da8690f4/webots\_ros2\_core/launch/robot\_launch.py#L101-L105](https://github.com/cyberbotics/webots_ros2/blob/57f8f48121243f24f35675ba1b54b886da8690f4/webots_ros2_core/launch/robot_launch.py#L101-L105)

[https://github.com/cyberbotics/webots\_ros2/blob/57f8f48121243f24f35675ba1b54b886da8690f4/webots\_ros2\_core/launch/robot\_launch.py#L142-L147](https://github.com/cyberbotics/webots_ros2/blob/57f8f48121243f24f35675ba1b54b886da8690f4/webots_ros2_core/launch/robot_launch.py#L142-L147)

##### James Le Poidevin 04/14/2021 12:05:06
Ok thank you i'll give it a try


Thank you  i got it to work just needed to remove the 'webots' from the launch

##### bingdong 04/14/2021 15:13:17
Hi!

Is it the case that I can't run an infinite while loop inside the main loop in robot controller like this?

while robot.step(timestep)!=-1:

    #Commands

     while True:

         # Commands

##### Darko Lukić [Cyberbotics] 04/14/2021 15:14:36
`@bingdong` You can, but nothing from the loop will be executed until you call `robot.step()`

##### Nick R 04/14/2021 17:19:46
Hi all, I'm very new to Webots and evaluating it against a few other simulators for use at my company. I'm trying to test a number of sensors (eg a few Velodyne LIDARs and a handful of mono cameras) in a reasonably-complex world. However, I'm struggling to understand how I can extend any of the sample robot/car model PROTOs to add these sensors. `@Olivier Michel` suggested I use the extension slots on the BmwX5 model (thank you VERY much for all your help yesterday by the way!) but it would be very helpful if there's some example model I can follow which has a sensor added to a slot.



Alternatively, if there is a simpler way to evaluate a number of sensors please do let me know. Mainly looking to test real-time performance and understand processing limitations. Thank you!

##### Harun KURT 04/14/2021 18:00:05
Hi, How can I make YOLOv3 with Webots? Webots' controller give me image parameters 4 (BGRA) and Yolov3 is getting image array parameters 3(BGR).

##### Luftwaffel [Moderator] 04/14/2021 19:38:33
`@Nick R` You can simply add a Robot base node and add all the sensor as children. as controller select 'Void'. run the simulation and right click on the robot in the scene tree -> view Robot Window. Here you can enable the sensors and view them. You can move the robot in the 3d view when selected. And you can move the sensors relative to the robot when you select them.


`@Harun KURT` [https://cyberbotics.com/doc/reference/camera?tab-language=python#wb\_camera\_get\_image](https://cyberbotics.com/doc/reference/camera?tab-language=python#wb_camera_get_image) I suggest you study the api documentation. It really depends on what language you use, and what exactly you want and need

##### Beginner26798 04/14/2021 20:41:03
Good evening everyone ... i need a code to control the ur10e robotic hand please

##### Luftwaffel [Moderator] 04/14/2021 21:51:13
`@Beginner26798` which hand? the Robotiq 3f gripper?


and what language?

##### Beginner26798 04/14/2021 21:52:51
If ther is a code to this hand without a gripper i will replace it with a camera.

Using C language

##### Luftwaffel [Moderator] 04/14/2021 21:53:07
what exactly do you want to achieve?

##### Beginner26798 04/14/2021 21:54:05
I am working of a controlled hand that moves due to color recognition caused by the camera


If you want more details i can dm you

##### Luftwaffel [Moderator] 04/14/2021 22:12:11
look at the documentation, motors are very simple to control

##### Emiliano Borghi 04/15/2021 00:24:26
Hello, I'm doing some tests with Pioneer with ROS. I was able to compile the official controller  ([https://github.com/cyberbotics/webots\_ros/blob/master/src/pioneer3at.cpp](https://github.com/cyberbotics/webots_ros/blob/master/src/pioneer3at.cpp)) and run it as "ros", but when I set the world option as "<extern>", it's not able to find it.



Webots terminal is not showing any useful data. How can I see more useful logs?

##### Luftwaffel [Moderator] 04/15/2021 00:28:08
pretty sure you have to run the ros controller in webots, not the extern

##### Uanuan 04/15/2021 01:15:26
Cool, thanks a lot. I'm going to try that out. I'm also wondering if there's a way to reference multiple (different) robot supervisor in the world? is there such a thing: bot1 =Supervisor("some id") then bot2 = Supervisor("another id") in the API?

##### Nick R 04/15/2021 03:15:52
Thanks a bunch! I was able to do this and get a number of sensors running simultaneously and streamed to ROS2 using the webots\_ros2\_core launch file robot\_launch.py, however I have the issue that the transform tree in ROS2 is empty. I get launch errors like the following, seems a link is not unique, anyone have an idea where to look to solve this? The 'solid\_37725' is not referenced anywhere in the .wbt that I can see, not sure where this comes from...



[robot\_state\_publisher-1] Error:   link 'solid\_37725' is not unique.

[robot\_state\_publisher-1]          at line 134 in /tmp/binarydeb/ros-foxy-urdfdom-2.3.3/urdf\_parser/src/model.cpp

[robot\_state\_publisher-1] [WARN] [1618456336.778552563] [robot\_state\_publisher]: Unable to initialize urdf::model from robot description

##### Stefania Pedrazzi [Cyberbotics] 04/15/2021 06:23:59
An independent controller instance is run for each Robot/Supervisor, so you can only create one supervisor instance per controller and use the Supervisor API with the robot associated with the controller.

But you can use the same controller for multiple robots (multiple instances will be started) and identify and use for example the `Robot.name` value to identify it (see [https://www.cyberbotics.com/doc/reference/robot#wb\_robot\_get\_name](https://www.cyberbotics.com/doc/reference/robot#wb_robot_get_name)).

##### Darko Lukić [Cyberbotics] 04/15/2021 06:53:19
Webots doesn't require solid names to be unique, so we add a suffix to the solid name if there is a solid with the same name. However, it is strange that you are getting the error. Is it a custom robot?

##### Uanuan 04/15/2021 08:32:33
Thanks again. I got the timestep thingy in place, and everything is working fine atm. Really appreciate your help on this, I'm going to experiment with the Robot.name in my python code later 🙂

##### Maurice Faraj 04/15/2021 09:07:17
Hello everyone hope you’re doing well I’m facing some problems to controle a ure10 hand that contain a camera on its periferic and the camera by recongnize color should order the ure10 to move if anyone can help me please how to controle it and thank you everyone

##### Baziyad 04/15/2021 09:38:37
Dear `@Darko Lukić`, thanks for your efforts.

I am facing the following error when  I try to remotley connect Webot  to OP2 robot:

Any clues?
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/832188154474790912/unknown.png)
%end

##### Johan2021 04/15/2021 10:13:12
Hi `@Darko Lukić` , thanks a lot for your reply! In this case, the fixed joint would only be created when a compatible peer connector is present - if I understood correctly - which would not necessarily be the case for me. Would there be a way to declare the `isLocked` value as a "global variable" to the simulator or scene tree that could then be read out from the plugin (I am still new with Webots)?

##### Darko Lukić [Cyberbotics] 04/15/2021 10:55:30
Yes, you can write the start in e.g. `customData` robot field:

[https://cyberbotics.com/doc/reference/robot](https://cyberbotics.com/doc/reference/robot)



And update it using:

[https://cyberbotics.com/doc/reference/supervisor#wb\_supervisor\_field\_set\_sf\_string](https://cyberbotics.com/doc/reference/supervisor#wb_supervisor_field_set_sf_string)

and read it using:

[https://cyberbotics.com/doc/reference/supervisor#wb\_supervisor\_field\_get\_sf\_string](https://cyberbotics.com/doc/reference/supervisor#wb_supervisor_field_get_sf_string)

##### KNTRL [Premier Service] 04/15/2021 11:05:59
Can someone explain the way the RadarTarget list is being sorted? I don't seem to figure out the way it gets sorted after a new target is added.

##### Stefania Pedrazzi [Cyberbotics] 04/15/2021 11:18:24
At simulation load the RadarTarget list is initialized using the order in the scene tree. If you then add new targets after the simulation load, the new target is appended to the end of the list.

##### Johan2021 04/15/2021 11:19:27
This is great! Just to make sure; this would mean that the supervisor class and its functions are available to the `plugin` (reading out the value) as well as to the `controller` (setting the value), after declaring the robot node as supervisor?

##### Darko Lukić [Cyberbotics] 04/15/2021 11:39:52
Unfortunately, I don't think you can access these fields from the Physics plugin. I afraid you need to fallback to your initial idea.

##### Emiliano Borghi 04/15/2021 12:01:54
But it's possible according to the documentation but I haven't found an example in webots\_ros package.

##### aslisevil 04/15/2021 12:40:30
hello, is it possible to create a motion file automatically for Nao robot using some program? I am trying to add a box lifting motion to it.

##### Iris230 04/15/2021 12:49:18
guys, I just added the controller' racing\_wheel' to a BMW5.

But when I keep my foot on the gas, the speed is so low. Is there someone knowing what the problem is? :smiling\_face\_with\_tear:
%figure
![68b2c851b73d6578.png](https://cdn.discordapp.com/attachments/565154703139405824/832236141054132245/68b2c851b73d6578.png)
%end
%figure
![-1add8774e3bb647a.png](https://cdn.discordapp.com/attachments/565154703139405824/832236141318635520/-1add8774e3bb647a.png)
%end


sorry It's a BmwX5

##### Nick R 04/15/2021 14:14:01
Yes, this is a custom "robot" created as a Robot base node with two LIDAR sensors as children. The LIDAR names are unique, so I'm not sure what else is preventing this from working. Unfortunately since the robot\_state\_publisher won't run, I can't access /tf and visualize all the data in map frame (which I assume should work if launched successfully)

##### Steven37 04/15/2021 15:12:06
I am trying to create a function to control my 4-wheeled robot by continuously changing the speed of 4 wheels so that the robot can move in random directions. Then, I want to print out the robot's position every 3 seconds using the supervisor. I have coded for that function as shown in the image I attached. However, I did not see the robot's position printed out. Can someone help me, please?
%figure
![3Y_project_CodeForExperiment11.JPG](https://cdn.discordapp.com/attachments/565154703139405824/832272078747992084/3Y_project_CodeForExperiment11.JPG)
%end

##### DDaniel [Cyberbotics] 04/15/2021 16:45:43
`@Steven37` the condition for it to print doesn't do what you want it to do, variable `t` doesn't change. The function you're thinking of is probably [https://cyberbotics.com/doc/reference/robot?tab-language=c++#wb\_robot\_get\_time](https://cyberbotics.com/doc/reference/robot?tab-language=c++#wb_robot_get_time) (still need to fix the condition though)

##### ~E 04/15/2021 16:49:57
Hi all,



I am using the e-puck sample bot with the collision detection and pulling accelerometer data for further data analysis. I am using matlab for the code since my school gets paid A LOT of money to use them, and therefore cannot use Python like any other sensible person would (only joking a little bit ;).



I can post my code, but would like to limit how much I post since this is a project for school, and I do not want classmates to find this and plagiarize.



> **Attachment**: [E-Puck\_jerky\_movement.mp4](https://cdn.discordapp.com/attachments/565154703139405824/832297321935929434/E-Puck_jerky_movement.mp4)

##### Darko Lukić [Cyberbotics] 04/15/2021 17:14:12
Is it possible to send the robot model to me so I can investigate it? Also, we did some improvements to the URDF exporter in R2021b. Therefore, if it doesn't take too much time then you can try R2021b:

[https://github.com/cyberbotics/webots/releases](https://github.com/cyberbotics/webots/releases)

##### ~E 04/15/2021 17:25:27
I just spoke to my professor, and apparently we aren't even supposed to make the robot collide with anything. I can still DM the files to it if you're curious

##### Nick R 04/15/2021 17:36:22
Sure, I can send it, but I'll try to use 2021b instead first (currently on 2021a). Thanks!

##### ~E 04/15/2021 19:24:57
Can someone confirm for me that if your basicsteptime = 4, that means that each step is equal to 0.004 seconds (4ms)?

##### Luftwaffel [Moderator] 04/15/2021 19:29:23
yes


4 is quite small. Usually 16 works quite well


webots is very stable compared to other simulators

##### ~E 04/15/2021 19:30:29
I just have some REALLY high jerk in starting my movement, and my prof wants us to integrate to find velocity


Also, I hate that matlab starts arrays at 1

##### Luftwaffel [Moderator] 04/15/2021 20:18:49
😆  I feel you


oh integrate acceleration to fin vel?


I guess when you are only allowed to use the accelerometer. Wheel motors seem more logical


can you show an example of the jerk in starting movement? It might just be a very high torque setting (unrealisticly high).


you can always speed up in a slower and controlled manner

##### geflowers 04/16/2021 04:06:15
Hey everyone, I'm pretty new with working on webots and had a quick question on how to obtain a certain movement with a rotational motor


So the idea is to have this arm begin at this initial position and after a timestep, have the rotational motor kind of "jerk" the arm back to this horizontal position and repeatedly do that
%figure
![Concept_art_-_Function.PNG](https://cdn.discordapp.com/attachments/565154703139405824/832467213767671828/Concept_art_-_Function.PNG)
%end


Was recommended to base it off PID control but kinda struggling on getting the rotational motor to move using the created controller


Any ideas or resources I could use as reference to do this?

##### Max\_K 04/16/2021 07:13:58
Hey, is it possible to run a opc ua server inside webots and are there any examples?

##### KNTRL [Premier Service] 04/16/2021 08:21:21
What could cause that the point cloud randomly disappears during the simulation? This was done on Win10, R2021a, and it is the same with R2021a on Ubuntu 18.04.5.
> **Attachment**: [lidar\_samplefile\_win10\_R2021a.mp4](https://cdn.discordapp.com/attachments/565154703139405824/832531097040191528/lidar_samplefile_win10_R2021a.mp4)

##### DDaniel [Cyberbotics] 04/16/2021 08:24:28
`@KNTRL` was a bug, [https://github.com/cyberbotics/webots/pull/2666](https://github.com/cyberbotics/webots/pull/2666) but should be fixed in the nightly version of webots

##### bingdong 04/16/2021 15:45:48
Hi, I seem to have done something in the properties which is why I'm seeing this in the rendering screen. Can someone let me know how I can fix this?
%figure
![Screenshot_from_2021-04-16_21-05-30.png](https://cdn.discordapp.com/attachments/565154703139405824/832642948872011806/Screenshot_from_2021-04-16_21-05-30.png)
%end

##### Nick R 04/16/2021 15:45:52
The nightly version seems to have fixed my issue with URDF export/robot description generation to be used in building the tf tree. Thank you for the suggestion!! Maybe worth making a note that there may be an issue with 2021a

##### DDaniel [Cyberbotics] 04/16/2021 15:51:05
`@bingdong` not sure as the pic isn't super clear but try F11 or view > plain rendering, might be that

##### bingdong 04/16/2021 16:05:49
Yes, right. I'd switched it to wireframe rendering somehow. Thank you!

##### Nick R 04/16/2021 17:26:44
When simulating a VLP-16 LIDAR, I can run the simulation in fast mode at >10x speed. However, if I subscribe to the ROS2 topic for the LIDAR data in any way (for example viewing it in RViz2, or even just echoing the topic), then the speed cuts in half. Is this expected due to the overhead of ROS2 communication? Anything that can be done about it?

##### Darko Lukić [Cyberbotics] 04/16/2021 20:25:25
By default, the Lidar publishes data every 128ms as data is very large:

[https://github.com/cyberbotics/webots\_ros2/blob/b37b9916f002503148171279a9a4a1051cd1092d/webots\_ros2\_core/webots\_ros2\_core/devices/lidar\_device.py#L44](https://github.com/cyberbotics/webots_ros2/blob/b37b9916f002503148171279a9a4a1051cd1092d/webots_ros2_core/webots_ros2_core/devices/lidar_device.py#L44)



P.S. FastDDS recently published a zero-copy feature that should significantly improve transfer speeds between nodes. This should allow publishing lidar data at higher rates.

##### Nick R 04/16/2021 20:52:22
Would the zero-copy feature work to reduce overhead from webots to ROS2 though? I'm new to ROS2, but that sounds like the concept of nodelets in ROS1


Also, I experimented a bit more and the RTF (realtime factor) actually decreases much more when subscribing to a single camera stream (800x800) than a single VLP16, which I was surprised by. Unfortunately I want to stream several of each of those sensors at once, but the RTF goes down below 1.0 in that case 😦

##### Luftwaffel [Moderator] 04/16/2021 21:05:57
`@Nick R` This is a lot of data. 800 * 800 * 4 Byte = 2.5 MB per frame


if you have 30 frames per second (32ms timestep), that is 75MB/s


this can easily saturate a network connection


keep in mind, that this image data is uncompressed


you might want to consider publishing at a lower rate, or turning it into a service or action, only publishing on request

##### Nick R 04/16/2021 21:10:12
Thanks, it does make sense then. I'm actually not sure the output rate, it's the default for the Camera sensor, but I forgot to check on the ROS2 side. Can the data be sent as a compressed ROS2 msg?

##### Luftwaffel [Moderator] 04/16/2021 21:10:32
I'm actually googling that right now :p

##### Nick R 04/16/2021 21:10:42
I was suprised because in Gazebo, I was able to run at RTF=1.0 for a large number of camera sensors. They must use some zero-copy mechanism under the hood, I should dig further

##### Luftwaffel [Moderator] 04/16/2021 21:10:52
[http://wiki.ros.org/compressed\_image\_transport](http://wiki.ros.org/compressed_image_transport)

##### Nick R 04/16/2021 21:11:28
Thanks, yeah I'm aware of this for ROS1, not sure about ROS2, and if webots side would need to be modified in either case

##### Luftwaffel [Moderator] 04/16/2021 21:11:30
the question is, where exactly the bottleneck lies. It might be inside webots or in ros


do you have python code?

##### Nick R 04/16/2021 21:12:45
I just use the webots\_ros2\_core launch file robot\_launch.py to create the ROS2 interface, with my simple "robot" having some sensors and the controller set to <extern>

##### Luftwaffel [Moderator] 04/16/2021 21:12:55
oh, what gpu do you have? and is it being utilized properly?


could you pm me your project? wanna do some digging and analysis

##### alireza1992 04/17/2021 10:38:10
Hi everyone;

I would like to change the position of robot's links immediately after taking command, that is I don't want to use from joints and motors of robot because they need to spent several time step.

Probably one way is that define several field corresponding to every link and change their values by supervisor. Is there any other way?

Can you help me?

Thank you.

##### Beginner26798 04/17/2021 20:36:19
Good evening ... i need a code to change the shoulder and elbow angle of the ure10 robot please


Continously


`@Darko Lukić` can you please help me

##### Luftwaffel [Moderator] 04/18/2021 01:20:12
`@Beginner26798` use the motors to change the position. The  position is the angle in radian. Take a look at the example world ure.wbt

##### moris 04/18/2021 22:58:50
Hi! I came across some problems while I was working on my robot.



I defined some additional parameters on the top of the proto and used them in the file with command IS. However webots shows me the error which says that my parameter has no matching IS field.



Next problem occured when I was adding HingeJointWithBacklash. I think that everything is written correctly but I still see error that HingeJointWithBacklash is skipped.



Do you have any ideas what I could have done wrong?
%figure
![errory_backlash.PNG](https://cdn.discordapp.com/attachments/565154703139405824/833476700058026064/errory_backlash.PNG)
%end



%figure
![definicja_nie_dziala.PNG](https://cdn.discordapp.com/attachments/565154703139405824/833476775463223306/definicja_nie_dziala.PNG)
%end



%figure
![hingejointwithbacklash.PNG](https://cdn.discordapp.com/attachments/565154703139405824/833476855330897940/hingejointwithbacklash.PNG)
%end

##### Luftwaffel [Moderator] 04/18/2021 23:22:25
`@moris`  try avoiding the dashes, that could be it

##### moris 04/18/2021 23:27:50
Unfortunately, it didn't help

##### Luftwaffel [Moderator] 04/18/2021 23:46:00
What is HingeJointWithBacklash?


did you actually add this node or is it a dev build node?


[https://cyberbotics.com/doc/reference/hingejointparameters?tab-language=python](https://cyberbotics.com/doc/reference/hingejointparameters?tab-language=python)


these fields dont exist in hingjointparams

##### main 04/19/2021 03:32:20
Anyone know why when STL files are used to import models they end up so huge?


I imported a wheel as an stl file but its bigger than the entire scene (should only be a few hundred millimeters by a few hundred) does anyone know how this scaling works?


As i can scale it down to say 0.001 making it small , but i dont know how much to scale it so that the dimensions are identical to the real dimensions of the stl file (hope that makes sense?)

##### SeanLuTW 04/19/2021 06:08:04
Is it possible to take screenshot by the supervisor API when the simulator is running?

##### Stefania Pedrazzi [Cyberbotics] 04/19/2021 06:09:30
Yes with the `wb_supervisor_export_image` function [https://www.cyberbotics.com/doc/reference/supervisor#wb\_supervisor\_export\_image](https://www.cyberbotics.com/doc/reference/supervisor#wb_supervisor_export_image)

##### SeanLuTW 04/19/2021 06:11:17
Oh, thanks!

##### Stefania Pedrazzi [Cyberbotics] 04/19/2021 06:11:31
There are just two ways to move joints to specific position:

1) use the Motor API to simulate real motor behavior

2) use the Supervisor API to change the joint position field


You could use a position sensor to detect when the joint reaches the desired position. Note that there is the gravity force acting on the joint end solid so you have to make sure that your motor has enough torque to keep the position.

Alternatively, if you don't want to reproduce a real motor behavior, you can use the Supervisor API to immediately set the joint position field.

Here are some examples:

- [https://www.cyberbotics.com/doc/guide/samples-devices#position\_sensor-wbt](https://www.cyberbotics.com/doc/guide/samples-devices#position_sensor-wbt)

- [https://www.cyberbotics.com/doc/guide/samples-devices#motor-wbt](https://www.cyberbotics.com/doc/guide/samples-devices#motor-wbt)

##### geflowers 04/19/2021 06:20:40
Thank you so much! Really appreciate the help

##### Stefania Pedrazzi [Cyberbotics] 04/19/2021 06:31:33
It depends on the scale. Webots scale unit is meters, when exporting STL you should make sure that the meters scale unit is used as well. Usually graphical editors like Blender give the option to choose the scale unit in the export dialog.

Otherwise, you can simply scale the Mesh node by setting the `Transform.scale`. The correct scale value depends on the scale unit used in the STL file.

##### DDaniel [Cyberbotics] 04/19/2021 06:34:34
`@moris` Hi, which version of Webots are you using? The `HingeJointWithBacklash` proto is available only in the develop branch of Webots, so if you're using anything else it won't find it. Also, did you follow the hierarchy described here for your project? [https://cyberbotics.com/doc/guide/the-standard-file-hierarchy-of-a-project#the-root-directory-of-a-project](https://cyberbotics.com/doc/guide/the-standard-file-hierarchy-of-a-project#the-root-directory-of-a-project). As for the other error, I assume you're making your own robot proto. From what you've showed the call to `HingeJointWithBacklash`  looks good to me, could you post more (or send via PM) about the robot proto itself? Might be easier to pin point.

##### Johan2021 04/19/2021 07:43:03
Hi everyone, I am writing a Physics plugin that is supposed to exert a force onto a body at every timestep, but the simulation crashes at start-up pointing to `dBodyAddForce()` or to `dBodyAddRelForce()` when I replace the former. I found an old issue ([https://cyberbotics.com/doc/discord/technical-questions-2020?tab-language=c++&tab-os=macos#troy-04242020-01-27-23](https://cyberbotics.com/doc/discord/technical-questions-2020?tab-language=c++&tab-os=macos#troy-04242020-01-27-23)), but was this resolved in any way -- other than by using a Supervisor?

##### Master.L 04/19/2021 07:50:18
Hi.

I would like to implement a force/torque sensor in webots.

In the webots documentation, I found a force sensor that came with a 3-axis force value, but couldn't find a sensor that could get the torque value.

How can I get the torque value?

##### Olivier Michel [Cyberbotics] 04/19/2021 07:53:14
This is currently not implemented. I believe the way to go is to implement a new type of touch sensor that would be called "force-6d" and would return both the force and torque.

##### B0Bhead 04/19/2021 07:55:10
Is there currently a SLAM version that runs on the RoboMaker Pro Kit?

##### Stefania Pedrazzi [Cyberbotics] 04/19/2021 07:58:17
Did you check that the body you are using is valid and correctly initialized?

Here are a couple of Webots sample projects using the `dBodyAddRelForce` function that are working correctly:

[https://www.cyberbotics.com/doc/guide/blimp#blimp\_lis-wbt](https://www.cyberbotics.com/doc/guide/blimp#blimp_lis-wbt)

[https://www.cyberbotics.com/doc/guide/samples-howto#physics-wbt](https://www.cyberbotics.com/doc/guide/samples-howto#physics-wbt)

##### Master.L 04/19/2021 08:17:30
Thanks `@Olivier Michel` !

I'll ask you one more question!

There was a way to implement a new type of sensor that returns both force and torque called "force-6d", but I don't know what to do.

Can you give me some advice?

##### Olivier Michel [Cyberbotics] 04/19/2021 09:19:44
It should be implemented in C++ into this file: [https://github.com/cyberbotics/webots/blob/develop/src/webots/nodes/WbTouchSensor.cpp](https://github.com/cyberbotics/webots/blob/develop/src/webots/nodes/WbTouchSensor.cpp) and possibly other files, properly documented and tested.

##### Yi Zhou 04/19/2021 09:30:07
Hello everyone, does anyone know if there are some example about control robot grasp object in webots?

##### DDaniel [Cyberbotics] 04/19/2021 09:33:48
`@Yi Zhou` Hi, you can find one on `file > open sample world > robots > k-team > khepera3_gripper.wbt`

##### Yi Zhou 04/19/2021 09:34:11
Thank you so much!

##### alireza1992 04/19/2021 09:48:35
Thanks for your reply,

I am working on a reinforcement learning project in which I need to reset a humanoid robot position and gesture randomly at the start of each episode. Is there any way to set the joint positions before simulation started?

##### Stefania Pedrazzi [Cyberbotics] 04/19/2021 09:59:53
Usually for reinforcement learning, you use a Supervisor controller to set the world and robot and the Supervisor API has a reset function to prepare the world to the next episode.

Depending on your needs, you can dynamically add the robot from the Supervisor controller so that it is already inserted in the world with the desired pose, or use the Supervisor API to change just the joints position.

Note that the Supervisor API also has options to restart the robot controller in case it is needed after setting it to the desired position.

##### alireza1992 04/19/2021 10:25:47
Thank you;

But "reset" takes a lot of time, I want a faster process like defining fields for position of links and use from "node.getField()", but I have some problem with it
> **Attachment**: [RobotisOp3.proto](https://cdn.discordapp.com/attachments/565154703139405824/833649575390478336/RobotisOp3.proto)

##### Troy 04/19/2021 13:15:14
Hi guys, is there anyway to get a distance feedback in webots controller? I want to detect the distance between my robot and a solid, and get real time feedback, how can i do it?


And the solid will be random subject on the ground

##### Olivier Michel [Cyberbotics] 04/19/2021 13:20:53
Use a distance sensor.

##### Troy 04/19/2021 13:23:19
can i get lidar feedback in webots? not using ros?

##### Olivier Michel [Cyberbotics] 04/19/2021 13:27:45
Yes.

##### Srivastav\_Udit 04/19/2021 13:43:15
Are there any default properties for a solid in Webots? (for example, Young's Modulus etc.)


I'm trying to figure out what the properties of a solid are if the physics is enabled. What material would it represent? Plastic, metal, etc.

##### satyar 04/19/2021 16:25:13
Hi guys ,

Which version of Webots work completely with M1 processor MacBook !? Or dose webots work with m1 Mac !?

##### Saud 04/19/2021 18:36:49
Hello, I have collected lidar points by attaching LIDAR on DJI. exported points into a csv file. Now i want to represent it in 3D in maybe matlab. But it wants a PLY file. Can anyone give any suggestions on what i should do?

##### Luftwaffel [Moderator] 04/19/2021 21:05:55
I think it should work through rosetta 2, like any other x86 program


Webots is a rigid body simulator, internal material stresses and deformations are not calculated. Bodies are rigid and only their kinematics and interaction is simulated.


you can convert / save the data as .ply files. [http://paulbourke.net/dataformats/ply/](http://paulbourke.net/dataformats/ply/) this might give you some insight in the format. Not that different from .obj files. What language are you using for your python controller?


You can also read the csv file in matlab and assign it manually: [https://www.mathworks.com/help/vision/ref/pcplayer.view.html](https://www.mathworks.com/help/vision/ref/pcplayer.view.html)

##### Nick R 04/19/2021 22:04:33
Can anyone tell me whether there's a quick way to 'killall webots' which will take care of anything hanging on after I close the GUI? I see a process lingering which is supposedly taking up half my GPU memory...

##### Saud 04/19/2021 22:06:42
right. thank you. i will have a look at this. I am using C++ btw for the controller of the robot

##### Luftwaffel [Moderator] 04/19/2021 22:08:01
`@Saud` [https://github.com/ddiakopoulos/tinyply](https://github.com/ddiakopoulos/tinyply) this might help

##### Olivier Michel [Cyberbotics] 04/20/2021 05:33:30
I assume you are on Linux. Normally, killing Webots with SIGTERM should clean-up all the resources it uses.

##### Tosidis 04/20/2021 08:45:07
Hello, I just installed the latest nightly build because i was having problems with Supervisor.simulationReset() (webots kept crashing), but I still face the same issue. Are there any workarounds?

##### Asger Printz 04/20/2021 09:16:09
Hello Webots community. I have a problem with the control of the UR3 model. Whenever I give it a positive velocity it doesn't allow me to go into a negative angular position. I have changed it by converting it to base notes and removed the "boundingObject Group" how most of the links and joints and I have added touch sensors to them. Maybe that has messed something up? I have tried to mess around with minStop and maxStop of the hinge joint parameters, but nothing seems to help.

##### Emiliano Borghi 04/20/2021 15:30:25
Is it possible to have multiple ros controllers in simulation?

##### Olivier Michel [Cyberbotics] 04/20/2021 15:30:43
Yes.

##### Emiliano Borghi 04/20/2021 15:31:56
I tried setting  different --name as argument but one of the controller crashes without any explanation.


No worries, I was able to make it work. I chime in too early.

I'll post my results soon!

##### Nick R 04/20/2021 17:14:39
Just curious, is this for multi-robot simulation controlled externally from ROS? I'm interested in doing the same if so

##### alejanpa17 04/20/2021 22:01:59
Hello, I was trying to match the objects detected by the camera recognition and the measure distance by the point cloud of the lidar. Is there anyway you can make than sensor fusion/calibration in webots?

##### moris 04/21/2021 00:06:33
Hi! I have problem with applying lua to proto. Even though lua output says red, if and elseif conditions are skipped. I was following lua documentation and everything seems ok, but I might be wrong
%figure
![if_not_working.PNG](https://cdn.discordapp.com/attachments/565154703139405824/834218518718316654/if_not_working.PNG)
%end

##### Olivier Michel [Cyberbotics] 04/21/2021 06:17:23
Did you try to declare the color and number variables non-local (e.g., remove the `local` keyword)?

##### DDaniel [Cyberbotics] 04/21/2021 06:25:19
`@moris` also, you don't need to create full nodes for all three variants if you plan on using just one, can do something like this

```
Shape {
  appearance PBRAppearance {
    %{ if color == "red" then }%
      baseColor 0 0 0
    %{ elseif color == "blue" then }%
      baseColor 1 1 1
    %{ else }%
      baseColor 0.5 0.5 0.5
    %{ end }%
      transparency 0
      roughness 1
      ...
  }
  geometry Mesh {
   ...
  }
}
```

##### Yi Zhou 04/21/2021 06:26:59
Hello guys, does anyone know how to use ikpy in webots? I found a example, but I cannot get all my link follow the example

##### Dorteel 04/21/2021 07:36:56
which robot are you using it with? It worked for us with the UR3

##### Yi Zhou 04/21/2021 07:37:31
franka panda robot

##### Tosidis 04/21/2021 10:36:43
Any updates for supervisor.simulationReset() (python) ? It still crashes webots, even with nightly build

##### Stefania Pedrazzi [Cyberbotics] 04/21/2021 11:05:45
Did you already provide an example where the crash is reproducible? Are you using Webots R2021a rev 1 or R2021b?

##### Tosidis 04/21/2021 11:48:18
webots\_2021a (stable) and webots\_2021a-rev1, happens in both. I am gonna create a very simple example (i suppose it will do the same) , so its minimal and easy to reproduce

##### Stefania Pedrazzi [Cyberbotics] 04/21/2021 11:49:35
Yes, having an simple example we will be able to inspect the issue. Because I tested and in my project it is working just fine, the simulation is reset and Webots doesn't crash.

##### Tosidis 04/21/2021 11:49:58
which version?

##### Stefania Pedrazzi [Cyberbotics] 04/21/2021 11:50:33
I tested both on the master (R2021a rev1) and develop (R2021b) branches.

##### Tosidis 04/21/2021 11:51:14
doing it now and i will post the code

##### alejanpa17 04/21/2021 11:58:58
why am I getting these fake recognition?
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/834397800916582420/unknown.png)
%end

##### Stefania Pedrazzi [Cyberbotics] 04/21/2021 12:01:30
We fixed some issues with the camera recognition functionality recently.

I would suggest you to try the latest nightly build of Webots R2021a rev1 and check if this issue is still reproducible:

[https://github.com/cyberbotics/webots/releases/tag/nightly\_19\_4\_2021](https://github.com/cyberbotics/webots/releases/tag/nightly_19_4_2021)

##### Tosidis 04/21/2021 12:32:48
Working on the mavic2 controller (translated to python)



robot = Supervisor()

root = robot.getRoot()

children = root.getField('children')



while robot.step(timestep) != -1:

    if robot.getTime() > 10:

        robot.simulationReset()

        human\_model = 'human.wbo'

        children.importMFNode(-1, human\_model)


if i dont import the node after each reset it works fine, but if I import the object it crashes (after a couple of resets)

version: R2021a rev1

Another thing happening, is that the drone won't get to the initial state after a couple of resets either (2 of the 4 motors stop moving)

##### younes 04/21/2021 12:40:09
hi guys i am using webots2021a and Matlab2018, i am trying to command an epuck2 using webot-matlab , while creating the world in webot , i'm getting this error :


remote control initialisation failed

[matlab] Error: Cannot load the "C:/Webots/projects/robots/gctronic/e-puck/plugins/remote\_controls/e-puck\_bluetooth/e-puck\_bluetooth.dll" remote control library.

##### Stefania Pedrazzi [Cyberbotics] 04/21/2021 12:51:49
A simple workaround to the crash that works for me is to change the import index for example from `-1` to `2` or any other index value that is valid after reset.

I will inspect why the `-1` is not correctly translated to valid index.

##### moris 04/21/2021 13:11:42
It did work! Thank you very much! `@DDaniel` thank you too. I have been working long hours recently so I hadn't thought of simplifying code. Thank you all!

##### Yi Zhou 04/21/2021 13:15:35
Hello guys, does anyone know how to fix the robot position? I import a robot proto file, but when I run, the robot arm will fall down

##### Olivier Michel [Cyberbotics] 04/21/2021 13:21:16
Simple: remove the Physics node from the base Robot.

##### Yi Zhou 04/21/2021 13:23:06
Thank you, could you tell me how to remove? from webots? or from robot proto file?

##### Olivier Michel [Cyberbotics] 04/21/2021 13:23:32
From proto file.

##### Yi Zhou 04/21/2021 13:37:28
Thank you so much! Do you know how I can get the robot by python code?

##### alejanpa17 04/21/2021 14:50:26
Solved thanks ^^

##### Maurice Faraj 04/21/2021 21:08:01
Hello everyone hope all is fine I’m trying to combine a robot with. An robotic hand every part of this robot work prefectly alone but when I merge the 2 robot only the robotic hand work any help know how to solve this problem please

##### Stefania Pedrazzi [Cyberbotics] 04/22/2021 06:18:22
I would suggest you to start by following this tutorial: [https://www.cyberbotics.com/doc/guide/tutorial-4-more-about-controllers](https://www.cyberbotics.com/doc/guide/tutorial-4-more-about-controllers)


You could use a sensor, for example the Compass, to measure the orientation of the robot or a PositionSensor to measure how much the the motor turned

[https://www.cyberbotics.com/doc/reference/compass](https://www.cyberbotics.com/doc/reference/compass)

[https://www.cyberbotics.com/doc/reference/positionsensor](https://www.cyberbotics.com/doc/reference/positionsensor)

##### JSK 04/22/2021 07:58:41
Hello there. Any one know the working of compas in webots?


i want to know how does the values of -1 to 1 in compas deals with angle?


i mean if the compas value is 0.89 then what is it in degrees? is it a cosine relation?

##### Stefania Pedrazzi [Cyberbotics] 04/22/2021 08:06:27
The Compass device returns the vector direction pointing from the Compass center to the world north.

In the documentation you can find a sample code to compute the bearing angle based on this vector:

[https://www.cyberbotics.com/doc/reference/compass#compass-functions](https://www.cyberbotics.com/doc/reference/compass#compass-functions)

##### JSK 04/22/2021 08:35:17
Thanks Stefania..!! it worked

##### Haladin 04/22/2021 08:41:37
Hi.  I am getting an empty page when I click on the documentation links such as [https://www.cyberbotics.com/doc/reference/positionsensor](https://www.cyberbotics.com/doc/reference/positionsensor).  Is anyone else getting this?

##### Stefania Pedrazzi [Cyberbotics] 04/22/2021 08:44:09
Yes, the documentation is currently down.


Alternatively you can open the offline documentation from the Webots > Help > Offline Documentation > Reference Manual

##### Haladin 04/22/2021 08:45:44
Thanks Stefania.  I will check out the offline documentation.

##### Stefania Pedrazzi [Cyberbotics] 04/22/2021 08:45:53
or open the documentation from GitHub: [https://github.com/cyberbotics/webots/blob/released/docs/reference/positionsensor.md](https://github.com/cyberbotics/webots/blob/released/docs/reference/positionsensor.md)

##### Dorteel 04/22/2021 11:41:48
Hi there! I'm trying to replace robot.setVelocity(velocity) with robot.setPosition(currentPosition + velocity*timestep/1000), but getting different rates, setting it with position is about 3x slower. Is there a quick fix to this?
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/834755869735387186/unknown.png)
%end

##### DDaniel [Cyberbotics] 04/22/2021 11:48:01
`@Dorteel` if you set a position that isn't infinity, it switches from velocity control to position control as described in this table: [https://cyberbotics.com/doc/reference/motor#force-and-torque-control](https://cyberbotics.com/doc/reference/motor#force-and-torque-control), the functions have different effects depending on which type of control you are doing

##### Dorteel 04/22/2021 12:10:56
Thanks  `@DDaniel`  I'll have a look at the table!

##### AndreiSPb 04/22/2021 14:38:30
Hello! Can someone explain how should I treat 2nd string for moments of inertia in physics of Solid? What Input should I make? I dont really get why the matrix is not 3x3... I can get values of 3x3 matrix from CAD.

##### Maël Wildi [Cyberbotics] 04/22/2021 14:42:34
The first vector is the diagonal [I11, I22, I33] of the matrix and the second one is for [I12, I13, I23] ([https://cyberbotics.com/doc/reference/physics](https://cyberbotics.com/doc/reference/physics))

##### AndreiSPb 04/22/2021 14:50:25
Well yeah I read that in docs and it seems not absolutely correct. Matrix can be not symmetrical with [I12, I13, I23] not equal to [I21, I31, I32]. Or am I missing something?

##### Maël Wildi [Cyberbotics] 04/22/2021 14:55:13
In the case of matrices of inertia I think they are the same because these terms are the products of inertia with respect to a plane, for instance I12 is for the XY plane = YX plane.

##### AndreiSPb 04/22/2021 19:03:14
Thank you for your answers!

In that case, what coordinate system is used in webots to define this matrix, how does it change during the movements and should I provide any coordinate transform to ensure the correctness of the matrix?

##### Luftwaffel [Moderator] 04/22/2021 20:18:01
`@AndreiSPb` The inertia matrix is 3x3, but since the lower left corner is symetrical to the upper right corner, it is common to express with the diagonal, plus the upper right corner, which is precisely how it is done in Webots. Hope that helps
%figure
![slide_8.png](https://cdn.discordapp.com/attachments/565154703139405824/834885780269826068/slide_8.png)
%end

##### AndreiSPb 04/22/2021 20:47:44
Thank you!

What I was struggling with is that CAD gives Principal moments and axis in model frame:
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/834893258286432266/unknown.png)
%end


So I had to make some calculations
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/834893553552851014/unknown.png)
%end

##### Luftwaffel [Moderator] 04/22/2021 21:10:10
what CAD program are you using?

##### AndreiSPb 04/22/2021 21:21:08
that was spaceclaim

##### Luftwaffel [Moderator] 04/22/2021 21:44:25
`@AndreiSPb` [https://forum.ansys.com/discussion/13650/mass-concentreted-moment-of-inertia](https://forum.ansys.com/discussion/13650/mass-concentreted-moment-of-inertia) this might help

##### Welsh\_dragon64 04/22/2021 23:32:52
i uploaded a video of the robotisOp2 trying to walk as it picks up an item.
> **Attachment**: [pick\_and\_walk\_fail.mp4](https://cdn.discordapp.com/attachments/565154703139405824/834934816914276372/pick_and_walk_fail.mp4)


`@Luftwaffel` `@Bitbots_Jasper`  i would appreciate any help

##### Luftwaffel [Moderator] 04/22/2021 23:36:06
well for one you are setting positions that are outside of the range of motion for the robot


does the robot work without picking up the box first?

##### Welsh\_dragon64 04/23/2021 00:20:48
no it doesnt work


its falls down with or without picking up the box

##### Luftwaffel [Moderator] 04/23/2021 00:35:05
well you have to get your walking motion in order then


try to avoid all those errors coming up


stay within the motor limits

##### thonk enthusiast 04/23/2021 05:22:22
Hello,

I was trying to use robotbenchmark tonight (not sure if that falls under webots support) but it seems like your session/simulation server's certificates have expired.
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/835022772128055316/unknown.png)
%end

##### JSK 04/23/2021 06:13:08
Hello there. I have mess with the coordinates of the world and shifted it to ENU but the direction of gravity has changed to left, so whenever I start the simulation it drops to the left. I wanna say that it  does not fall on the ground rather it falls on left
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/835035545167069214/unknown.png)
%end


It should have to fall on square mainhole but it is not


kindly help me to change the gravity. i want to make north on y-axis, east on x-axis, and up on z-axis

##### Olivier Michel [Cyberbotics] 04/23/2021 06:43:00
Thanks for reporting this. It is now fixed. Our crontab script for the certificate renewal was not called properly.

##### Dorteel 04/23/2021 14:31:19
Hi! Does anyone has any suggestions how to get an image processed with opencv onto a display? I tried a stackoverflow solution from 2020 february ([https://stackoverflow.com/questions/58286019/webots-displaying-processed-numpy-image-opencv-python](https://stackoverflow.com/questions/58286019/webots-displaying-processed-numpy-image-opencv-python)) But that doesn't seem to work anymore (bytes object has no attribute 'tolist'). Also tried a sample code provided by `@Olivier Michel` ([https://github.com/cyberbotics/webots/pull/1033](https://github.com/cyberbotics/webots/pull/1033)) but that doesn't run either, even if I replace the deprecated function names with the newer ones. Does anyone have any idea how to solve this?

##### Bitbots\_Jasper [Moderator] 04/23/2021 14:40:08
python or c++?

##### Dorteel 04/23/2021 14:40:55
It's python

##### Bitbots\_Jasper [Moderator] 04/23/2021 14:42:57
```python
img_raw = self.camera.getImageArray()
img = np.array(img_raw, dtype=np.uint8)
img = np.swapaxes(img, 0, 1)
cv2.imshow("window", img)
cv2.waitKey(0)
```


something like this worked for us

##### Dorteel 04/23/2021 14:44:45
Thanks, that also works for me, but I need to display it on a display within the simulator, which doesn't seem to work

##### Bitbots\_Jasper [Moderator] 04/23/2021 14:47:39
sorry I misunderstood you question then, I dont have any experience with the webots display unfortunately

##### Dorteel 04/23/2021 14:49:19
This is the closest I got to it without error, but when I try to increase the resolution of the image simply nothing appears
%figure
![error.png](https://cdn.discordapp.com/attachments/565154703139405824/835165446240075786/error.png)
%end


No problem, thanks for trying to help!

##### Joanna 04/23/2021 18:29:35
Hello everybody,

I tried to run extern controller (following this tutorial [https://cyberbotics.com/doc/guide/running-extern-robot-controllers?tab-os=linux&tab-language=c++](https://cyberbotics.com/doc/guide/running-extern-robot-controllers?tab-os=linux&tab-language=c++)) from ros2 component in cpp to contol the ur5 simulation ([https://github.com/cyberbotics/webots\_ros2/wiki/Example-Universal-Robots](https://github.com/cyberbotics/webots_ros2/wiki/Example-Universal-Robots)). The controller in simulation is already extern and set to true. But I have this error in webots console.

(WARNING: Failed to attach extern robot controller: no available "<extern>" robot controller found). Any help?

##### Alejandro Pescathore 04/23/2021 21:28:07
Hello everyone!! i'm modeling a robot arm in webots using HingeJoints and rotational motors as devices, how can do move all the joints of the robot at the same time? when i use the motor set position funcion only can move one by one joint

##### DDaniel [Cyberbotics] 04/23/2021 21:36:39
`@Alejandro Pescathore` you gave all rotational motors the same name? If so then yes, only one will move. The possibility of controlling multiple motors at once is being worked on at the moment, but for now you'll have to give each their own unique name, and in the controller get the corresponding `WbDeviceTag` and give the position command to each

##### dA$H 04/24/2021 19:19:59
hello.

how can i add a camera in webot world.

no in robot node


i want add camera here
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/835596573093920778/unknown.png)
%end

##### Luftwaffel [Moderator] 04/24/2021 19:23:40
A camera has to be a child of a robot


so add a robot node, and then a camera to its children node

##### dA$H 04/24/2021 19:24:54
I did this but I could not get the camera on the controller

##### Luftwaffel [Moderator] 04/24/2021 19:26:07
Is that controller launched by the robot node containing the camera?


And is the camera called "robot"?

##### dA$H 04/24/2021 19:28:04

%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/835597984262520893/unknown.png)
%end

##### Luftwaffel [Moderator] 04/24/2021 19:29:38
you have to use the name, not the DEF


[https://www.cyberbotics.com/doc/reference/robot?tab-language=python#wb\_robot\_get\_device](https://www.cyberbotics.com/doc/reference/robot?tab-language=python#wb_robot_get_device)


and this only works if it's the same robot


are you trying to get the camera from a different robot?

##### dA$H 04/24/2021 19:30:19
yes

##### Luftwaffel [Moderator] 04/24/2021 19:30:55
it might be easier to add the camera to those robots, with a transform from the base (which is static I assume)


then you dont have to fiddle with extra controllers


A device is not the same as a node, and a controller only has access to the devices of the robot that started the controller

##### aslisevil 04/24/2021 19:38:23
Hello, I am currently making my Nao robot hold a box as exhibited in the photo. But my problem is that when I make it rotate with supervisor rotation function, it drops the box. Is there a way of fixing this problem. Your answers would be much appreciated.
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/835600581388402688/unknown.png)
%end

##### Luftwaffel [Moderator] 04/24/2021 19:38:54
how exactly do you rotate it?

##### aslisevil 04/24/2021 19:40:14
With setSFRotation function.


It drops the box while rotating with this function.
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/835602230484271125/unknown.png)
%end

##### Luftwaffel [Moderator] 04/24/2021 19:58:06
of course it does, you forgoe the physics simulation by simply changing the state


if you dont want it to drop, you have to move the box accordingly


use motors and joints to simulate with proper physics


As an ugly fix, you could perhaps try moving in very small increments and a lower timestep, but no guarantee that it works.

##### aslisevil 04/24/2021 20:09:08
okey thank you so much.

##### main 04/24/2021 20:28:52
When hinge joints unexpectedly turn by themselves is setting the static friction higher to prevent this good practice?

##### Dinossauro.Bebado 04/24/2021 20:53:31
hey guys, i am trying to import a robot file from solidworks to webots.Right now


its only import the solid


there is a easier way to solve this issue ?

##### Luftwaffel [Moderator] 04/24/2021 20:54:33
try to export as an urdf file and import the urdf in webots

##### Dinossauro.Bebado 04/24/2021 20:55:40
will try, tks for the fast response

##### Yi Zhou 04/25/2021 07:31:56
Hello guys, does anyone know the reason that positionSensor value is nan?

##### DDaniel [Cyberbotics] 04/25/2021 11:14:24
`@Yi Zhou` hard to say, how do you get the position value? Can you show a snippet of the code?

##### tabousoud 04/25/2021 13:02:48
Hey everyone, noob question. I'm trying to build a robot from imported mesh geometry and can't figure out how to import a mesh as a bounding obj. When I import the mesh directly (from url) as a bounding object and try to assign physics, I get a warning that "boundingObj"  is  not defined and I can't assign mass or inertia. However, it *seems* to work if I first import the mesh using file -> Import 3D Model then create a DEF for the mesh shape to use in the robot. Is this the way it's supposed to work or am I missing something?

##### Luftwaffel [Moderator] 04/25/2021 15:20:18
`@gus` [https://www.hmc.edu/lair/ARW/ARW-Lecture01-Odometry.pdf](https://www.hmc.edu/lair/ARW/ARW-Lecture01-Odometry.pdf) slide #23 has the formula


After some algebra, you are left with this formula:

`delta_motor_pos = theta_turn * axle_length / wheel_radius`


theta\_turn would be the turn angle in radians


delta\_motor\_pos is the difference in angle for the left and right wheel.


so you could turn one wheel + delta\_motor\_pos/2 and the other - delta\_motor\_pos/2

##### Sérgio 04/25/2021 19:33:12
Hi

##### main 04/26/2021 02:03:39
When using scaling on a robot, is the mass also scaled with this? e.g if my robot goes from 1 down to 0.5 scale, will my entered mass go from 10kg to 5kg in theory (If 10kg is entered in the physics node) Or will the mass still be 10kg, just the robot will be smaller?

##### Stefania Pedrazzi [Cyberbotics] 04/26/2021 06:06:38
Which  Device method are you using to load the image into the display?Because from the screenshot it seems that the format is wrong (for example 3 channels instead of 4 channels).

If you are using `wb_display_image_new`, you should make sure that the format that you pass to the Display API corresponds to the format of your image (e.g., RGB, ARGB, BGRA, etc.).

If you are using a Webots version older than R2021a, I would also suggest you to upgrade because we fixed issues with the Display image format.


This is probably a bug. I will inspect this.

However it is not recommended to use complex mesh geometries as boundingObjects because it will very likely cause instabilities in the physics computation. Instead, it is suggested to approximate the mesh using simple geometries (sphere, box, cylinder, capsule).


Yes, after scaling the mass is updated but not linearly as you would expect. When you scale a robot, its bounding objects are scaled as well. If all the Physics nodes of the robot define the density value (and not the mass value), then the actual mass (and resulting inertia matrix) of the robot should be scaled appropriately as well. However, if one of the Physics nodes of the robot defines a mass value explicitly, then, this mass will remain unscaled. For these reasons it is not recommended to scale robots because the physical behavior could no longer correspond to the originally unscaled robot.

##### ChristmasLights 04/26/2021 08:21:26
Hey everyone, is there anyone with the experience of using webots controller to control a web simulation? I have several motion files that I can run on the robot while using desktop application. But not sure about how can i manage to use this controller to control a web simulated robot.

##### Stefania Pedrazzi [Cyberbotics] 04/26/2021 09:45:02
It depends on which kind of web simulation are you using. If you refer to [Web Simulation]([https://www.cyberbotics.com/doc/guide/web-simulation](https://www.cyberbotics.com/doc/guide/web-simulation)) described in the User Guide, then a Webots instance and the controller is executed locally on a machine and the simulation updates are sent to the client browser.

##### ChristmasLights 04/26/2021 09:46:51
Yes, this is the one I am referring to. I am trying to use an external controller (written in Python) to run some motion files on a web simulation.

##### Stefania Pedrazzi [Cyberbotics] 04/26/2021 09:48:39
Once you start the Webots instance, and given that it is external, the controller, then the simulation should be streamed automatically. Note that in any case the controller is run locally on your machine/server and not on the web.

##### ChristmasLights 04/26/2021 09:51:50
Should I make any changes to my controller that works locally? I've followed this link for the local one: [https://www.cyberbotics.com/doc/guide/controller-programming](https://www.cyberbotics.com/doc/guide/controller-programming)

##### tabousoud 04/26/2021 09:52:19
Thank you for the follow up and advice!

##### Stefania Pedrazzi [Cyberbotics] 04/26/2021 09:54:19
No because the controller will in any case run locally.


`@ChristmasLights` I think that it is not clear what you want to achieve. Do you want to stream your simulation + controller on the web or do you want to modify the controller from the web simulation?

##### ChristmasLights 04/26/2021 09:59:26
I want to use an external controller on a web simulation (no need to modify it), have backend written in django. What I'm trying to achieve is, trigger some motion files depending on the state (assuming there are multiple states with multiple motion files are attached to). Like if situation 1 happens, my external controller should run the specific motion file on the simulation.

##### Stefania Pedrazzi [Cyberbotics] 04/26/2021 10:01:47
Ok, so I don't see where is the issue. Once you can run it locally, it can also be streamed on the web.

##### ChristmasLights 04/26/2021 10:39:41
When I try to run the local controller, it gives the following error: Webots doesn't seems to be ready yet: (retrying in 1 second). But its up and running and i can see the robot on localhost.

##### Yi Zhou 04/26/2021 10:43:52
Hello guys, I try to use getRangeImage to get the depth image of kinect, but the value is None, kinect works but no image data get, do anyone know the reason?

##### Stefania Pedrazzi [Cyberbotics] 04/26/2021 11:08:49
The external controller should run on the same computer as the Webots instance. Here are the instructions to use external controllers:

[https://www.cyberbotics.com/doc/guide/running-extern-robot-controllers](https://www.cyberbotics.com/doc/guide/running-extern-robot-controllers)

##### yash 04/26/2021 13:22:47
Hello ! Is the robot translation field updated at every time step .?

##### DDaniel [Cyberbotics] 04/26/2021 13:24:43
`@yash` Hi, if it changes yes.

##### yash 04/26/2021 13:26:15
Okay , thanks 👍


The time step at which the loop -

while robot.step(timestep)!=-1 is updated is as per the basic time step specified in the world info right .?

##### DDaniel [Cyberbotics] 04/26/2021 13:41:14
`@yash` don't know if I understand your question right, but the value you provide as argument (`timestep`) is the duration in milliseconds that will be simulated before the function is called again. Which ideally should be a multiple of `basicTimeStep` in worldInfo. So you can simulate the world very accurately, but sense/control at lower frequency.

##### yash 04/26/2021 13:52:35
> `@yash` don't know if I understand your question right, but the value you provide as argument (`timestep`) is the duration in milliseconds that will be simulated before the function is called again. Which ideally should be a multiple of `basicTimeStep` in worldInfo. So you can simulate the world very accurately, but sense/control at lower frequency.

`@DDaniel`  oh okay , I have understood a bit . Will try and implement. Thanks 👍

##### Stefania Pedrazzi [Cyberbotics] 04/26/2021 14:52:17
Did you enable the "kinect range" device of the Kinect PROTO node?

You can find here a sample C controller using the Kinect range image. The workflow is the same in each programming languages:

[https://www.cyberbotics.com/doc/guide/pioneer-3dx#pioneer3dx\_with\_kinect-wbt](https://www.cyberbotics.com/doc/guide/pioneer-3dx#pioneer3dx_with_kinect-wbt)

##### Yi Zhou 04/26/2021 14:53:17
Yes, I enable the camera

##### Stefania Pedrazzi [Cyberbotics] 04/26/2021 14:53:56
It is not enough to enable the camera device `kinect color`. You also have to enable the range finder device `kinect range`.

##### Yi Zhou 04/26/2021 14:55:26
Sure, I enable this, I can see image from webots, but I cannot get it

##### Stefania Pedrazzi [Cyberbotics] 04/26/2021 14:56:20
What code do you use to get the range finder data?


And the range finder device

##### Yi Zhou 04/26/2021 14:58:49
img\_array = self.kinect\_range.getRangeImage()    self.kinect\_range = self.getDevice("kinect range")

##### Stefania Pedrazzi [Cyberbotics] 04/26/2021 15:02:25
Here is a sample Python controller that works just fine in printing the Kinect range finder image:

```
from controller import Robot

robot = Robot()
timestep = int(robot.getBasicTimeStep())
kinect_range = robot.getDevice("kinect range")
kinect_range.enable(timestep)

while robot.step(timestep) != -1:
    print(kinect_range.getRangeImage())
```

##### Yi Zhou 04/26/2021 15:03:55
Thanks. I'll try😀

##### Fareed 04/26/2021 17:06:15
Hi there! I'm a student from New Rochelle High School in the Advanced Robotics class. While using WeBots we ran into several glitches which left me and my classmates stumped. Such examples are as followed: The robot itself glitching through the floor, the robot flinging itself while holding the ring, some portion of the robot being left behind while moving up or down on the Z-axis, and the robot falling through the floor even though physics are enabled. Some of these issues were resolved after shutting down and reopening WeBots but later persisted. If you have a fix to these problems please let me know.


Heres a picture of the part remaining afloat yet when we move it it will move back to its original positioning
%figure
![Screenshot_2021-04-26_130719.png](https://cdn.discordapp.com/attachments/565154703139405824/836287863640817704/Screenshot_2021-04-26_130719.png)
%end

##### ChristmasLights 04/26/2021 20:39:25
For now, I am running the web server locally (on the same computer with the controller), but still getting the mentioned error. When I use the controller with the desktop app, there is no problem. I am using the web simulation with the docker, settings are mentioned as in the link. Maybe there is something I am missing with external controller. Is there any setting that I should change in the dockerfile in order to use my external controller on the web simulation? As long as I know, the webots is using the default nao controller instead of the external.

##### fero taraba 04/26/2021 21:33:15
Hello, my HTML export does not contain labels created via "set\_label" method. Should it be there or is it currently not supported?

##### Luftwaffel [Moderator] 04/26/2021 22:55:08
`@Fareed` I suggest you fix the warnings that Webots shows you.

##### Yi Zhou 04/27/2021 06:52:21
Hi, the camera can be enabled, but both color image and depth image cannot show, is it possible because of the kinect camera?

##### Johan2021 04/27/2021 09:18:45
Hi all, I would have to detect a collision/distance threshold between a dynamic body and any other body in the world, and subsequently align these 2 bodies - very much like the connector snap functionality (which I would not be using). For the collision I would implement an IR sensor. However, I am not sure how to align these 2 bodies/retrieve their orientation - since it is not known a priori which body the other body should align with. Would anyone know more about this?

##### tabousoud 04/27/2021 10:12:43
Hi all, is there a way to construct other simple shapes in Webots beyond the basic primitives? For example, truncated cones (drafted cylinder) or prism-type shapes? Thanks!

##### DDaniel [Cyberbotics] 04/27/2021 10:25:18
`@tabousoud` Hi, not directly but you can create them with other software and import them: [https://cyberbotics.com/doc/reference/mesh](https://cyberbotics.com/doc/reference/mesh)

##### tabousoud 04/27/2021 10:33:21
`@DDaniel` Hi Daniel, thanks for the feedback. I want to use these shapes for bounding object geometry and it seems that the recommendation is to avoid imported mesh geometry for that, so I was trying to use standard shapes in Webots. Does that same caveat also apply for simple meshes?

##### DDaniel [Cyberbotics] 04/27/2021 10:44:59
Yes, generally it is suggested to avoid very complex shapes (typically, using the mesh of the piece itself, with potentially hundreds or thousands of faces is overkill) for boundingObjects as it makes the collision detection computationally very intensive and at times also less reliable, but if none of the basic shapes (or a combination of them) fits the bill for your application you can still use something else. As for the primitive shapes, keep in mind you can group more of them together

##### tabousoud 04/27/2021 10:46:41
`@DDaniel` Got it, many thanks!

##### Dorteel 04/27/2021 12:16:40
Thanks! I managed to get it work, but it's a pretty ugly solution:



`       cameraData = camera.getImage()

        image = ... bunch of processing with openCV

        # Displaying the camera image directly

        #ir = display\_score.imageNew(cameraData, Display.BGRA, camera.getWidth(), camera.getHeight())

        # Displaying the processed image

        cv2.imwrite('tmp.jpg', image)

        ir = display\_score.imageLoad('tmp.jpg')

        display\_score.imagePaste(ir, 0, 0, False)

        display\_score.imageDelete(ir)`



The commented line displays the right image directly from the camera, but I couldn't get to display the processed image with the `imageNew` function

##### Venkat 04/27/2021 12:52:25
Hello All,


Hello All, I am looking to integrate a LIDAR sensor from SICK, that is not already available in the model database of webots. I am looking for the information regarding using the laser scanners that arent available within webots yet. If anyone have information, kindly help !!!

##### Darko Lukić [Cyberbotics] 04/27/2021 12:55:40
You can always use the generic Lidar node:

[https://cyberbotics.com/doc/reference/lidar](https://cyberbotics.com/doc/reference/lidar)

and parameterize it so it has the same characteristics as your Lidar.

##### HamedMahmudi [MRL-HSL] 04/27/2021 13:27:22
Hello, I want to make a matlab controller, but it doesn't work and it could not start matlab.

Matlab is run correctly with the command window



%figure
![IMG-20210427-WA0003.jpg](https://cdn.discordapp.com/attachments/565154703139405824/836594553770213396/IMG-20210427-WA0003.jpg)
%end

##### Darko Lukić [Cyberbotics] 04/27/2021 13:38:34
You are probably affected by this bug:

[https://github.com/cyberbotics/webots/issues/2608](https://github.com/cyberbotics/webots/issues/2608)



which is fixed in (R2021a rev1):

[https://github.com/cyberbotics/webots/pull/2624](https://github.com/cyberbotics/webots/pull/2624)



Unfortunately, our Windows CI doesn't work at the moment and we don't R2021a rev1 nightly build:

[https://github.com/cyberbotics/webots/releases](https://github.com/cyberbotics/webots/releases)



Until the nightly builds are back you can install MATLAB in a `matlab` folder.

##### James Le Poidevin 04/27/2021 13:41:49
Hello, I saw on a ROS forum that webots is debating using URDF files instead of proto files ([https://discourse.ros.org/t/urdf-with-webots/19665](https://discourse.ros.org/t/urdf-with-webots/19665)).  Do you have any idea how you are going to proceed for indexedFaces seeing that webots doesn't not keep a reference of the original mesh file(stl,dae ...)  once imported. I ask the question because i'm currently try to convert a robot containing mainly meshs and i would like to create a urdf for this robot.

##### Darko Lukić [Cyberbotics] 04/27/2021 13:43:04
In Webots, you can include meshes or reference them. See the Mesh node:

[https://cyberbotics.com/doc/reference/mesh](https://cyberbotics.com/doc/reference/mesh)

##### James Le Poidevin 04/27/2021 13:46:57
OK thank you.


But they still are exported in the urdf even as a mesh ?

##### Darko Lukić [Cyberbotics] 04/27/2021 14:26:25
The URDF export is limited, it replaces visual meshes by bounding objects:

[https://cyberbotics.com/doc/reference/robot#wb\_robot\_get\_urdf](https://cyberbotics.com/doc/reference/robot#wb_robot_get_urdf) (check the note)



Regarding the Discourse post, we concluded that we want to allow URDF importation (the other way around).

##### James Le Poidevin 04/27/2021 14:27:45
Ok I see, Thank you.

##### Luftwaffel [Moderator] 04/27/2021 19:56:44
`@James Le Poidevin` I've written a tool that extracts the meshes from proto files. So using the webots -> urdf export, and a bit of manual adjusting, you can get a full urdf file with all visual meshes included


[https://github.com/cyberbotics/webots/blob/master/scripts/proto\_splitter/proto2mesh.py](https://github.com/cyberbotics/webots/blob/master/scripts/proto_splitter/proto2mesh.py)

##### Affonso 04/27/2021 20:10:39
Do Webots have a native delay function on the controller with C?

##### Luftwaffel [Moderator] 04/27/2021 20:11:51
You can use a normal C delay function?!


Webots controllers only continue the simulation when you explicitly call the robot step function

##### Affonso 04/27/2021 20:13:00
We are using this


void delay(int time, int atual)

{

    while (wb\_robot\_step(TIME\_STEP) != -1) {

      if (wb\_robot\_get\_time() > time + atual){

        break;

       }

  }

}


Is there an error?

##### Luftwaffel [Moderator] 04/27/2021 20:13:40
what do you want to achieve?

##### Affonso 04/27/2021 20:15:10
My robot needs make a reverse curve when the infra sensor detects the line

##### Luftwaffel [Moderator] 04/27/2021 20:16:19
so you want a function that simply executes the current commands for a certain amount of time?

##### Affonso 04/27/2021 20:16:52
exactly


Now we are calling a function that curves and interrupts the code using delay

##### Luftwaffel [Moderator] 04/27/2021 20:18:03
if (wb\_robot\_get\_time() < t\_simulate){

        continue;


you could put that at the start of your loop


and when you want the main loop to skip any logic, you set the t\_simulate to the current sim time + the duration


as soon as wb\_robot\_get\_time() is bigger than that t\_sim, it will execute the rest of your loop


also, time is double, not int

##### Affonso 04/27/2021 20:21:53
Ok, but i need use this logic of delay more times in the code that's why I create the function above

##### Luftwaffel [Moderator] 04/27/2021 20:22:20
void delay(double duration)

{

    double time\_end = wb\_robot\_get\_time() + duration;

    while (wb\_robot\_step(TIME\_STEP) != -1) {

      if (wb\_robot\_get\_time() > time\_end ){

        break;

       }

  }

}

##### Affonso 04/27/2021 20:22:29
You think that will works?

##### Luftwaffel [Moderator] 04/27/2021 20:22:33
not a c programmer, but perhaps like this?

##### Affonso 04/27/2021 20:22:45
yeah


thanks

##### Luftwaffel [Moderator] 04/27/2021 20:23:08
you're welcome 🙂


make sure to use the documentation [https://www.cyberbotics.com/doc/reference/robot?tab-language=c#wb\_robot\_get\_time](https://www.cyberbotics.com/doc/reference/robot?tab-language=c#wb_robot_get_time)


it has all variable types and functions explained

##### main 04/27/2021 21:35:51
`@Stefania Pedrazzi` Thanks, so say if i was to make a leg 30kg and scale it to 0.5, it will remain at 30kg (just in a smaller bounding box area?)

##### Luftwaffel [Moderator] 04/27/2021 21:38:59
`@main` it depends on whether you define the weight through mass or density


if you define the mass as 30kg, it will remain the same

##### tabousoud 04/27/2021 21:55:56
Hi All,

Quick question: For a camera node, which axis aligns with the camera's line of vision? I looked in the docs but can't seem to find it.

##### Ragemor 04/27/2021 23:07:56
ı have different colored objects in my simulation. and i want to move my robots to different colored objects. how can i perform that? basicly a leader follower concept with camera recognition. I try to use objects[].colors[] but i cant made what i want. my english is not pretty good. anyone can help me about that?


this is my simulation. reds first and greens behind them. this is working for a while but if green object robots see another colored robot it stopped moving.
%figure
![webbb.jpg](https://cdn.discordapp.com/attachments/565154703139405824/836740552145764412/webbb.jpg)
%end


and this is my code [https://discord.com/channels/565154702715518986/565155651395780609/836732423982415883](https://discord.com/channels/565154702715518986/565155651395780609/836732423982415883)

##### nslinco 04/28/2021 02:04:51
Hello all! I'm currently working with the Neuronics IprHd6ms180 and the gripper only opens partially. I'm using a python controller and the following line to alter the motor position: "motors[len(motors)-1].setPosition(1.22171)". Does anyone have experience with a similar problem?


Altering the value passed to setPosition affects the correct motor, but it only opens a fraction of the amount it should


Nvm

##### Joanna 04/28/2021 06:03:16
`@Darko Lukić` Hello everybody,

I tried to run extern controller (following this tutorial [https://cyberbotics.com/doc/guide/running-extern-robot-controllers?tab-os=linux&tab-language=c++](https://cyberbotics.com/doc/guide/running-extern-robot-controllers?tab-os=linux&tab-language=c++)) from ros2 component in cpp to contol the ur5 simulation ([https://github.com/cyberbotics/webots\_ros2/wiki/Example-Universal-Robots](https://github.com/cyberbotics/webots_ros2/wiki/Example-Universal-Robots)). The controller in simulation is already extern and set to true. But I have this error in webots console.

(WARNING: Failed to attach extern robot controller: no available "<extern>" robot controller found). Any help?

##### fero taraba 04/28/2021 15:46:37
Hello, my HTML export does not contain labels created via "set\_label" method. Should it be there or is it currently not supported?

##### Benjamin Délèze [Cyberbotics] 04/28/2021 15:57:42
Hello, sorry labels are currently not supported in HTML exports

##### Dorteel 04/28/2021 19:07:11
Hi there! Is it possible to change the mass of the object through supervisor? I have troubles getting to the Physics node of an object in the scene tree without using a specific DEF tag on the Physics node

##### Dizz 04/29/2021 02:32:53
would anyone happen to know how to adjust the robots rotation in code? currently programming in python.

##### Luftwaffel [Moderator] 04/29/2021 02:33:31
using a supervisor controller


[https://cyberbotics.com/doc/reference/supervisor?tab-language=python](https://cyberbotics.com/doc/reference/supervisor?tab-language=python)


from controller import Supervisor



robot = Supervisor()

robotNode = robot.getSelf()

robotNode.setOrientation()


check the documentation, that is from what I remember, might be wrong

##### Dizz 04/29/2021 02:36:02
Thank you for your help!

##### Luftwaffel [Moderator] 04/29/2021 02:36:16
oh and you have to make the robot a supervisor. Set it to true in the scene tree

##### bingdong 04/29/2021 06:57:02
Hi, can Python multiprocessing be run in the controller script?

##### SeanLuTW 04/29/2021 09:23:54
Hi, I'm writing a script to run and record the simulation. My controller add several PROTOs into my world during simulator running and the cursor will highlight the added object. So in my video, the object's coordinate (three axes with RGB) will be recorded. How can I avoid this?

##### Stefania Pedrazzi [Cyberbotics] 04/29/2021 09:33:58
One option is to hide the handles to move the object (the three axes with RGB and arrows) from the "View" > "Scene Interactions" > "Disable Object Move". Note that handles are only disabled if the node is selected from the 3D scene and not from the scene tree.

##### jasonc1025 04/29/2021 11:41:06
Thx `@Stefania Pedrazzi`  for helping me with my attempted "Web Simulation: Quick Start: 'Simulation starting' " frozen status.   (I've move my question-thread over to Webots, to be topic-consistent.)  ; )  Unfortunately, I'm not that good w/ PHP for Website Hosting.



Just curious re: my 'Quick Start: Simulation starting...' frozen status, how important do my ports need to be opened? (1999 and 2000 are opened, yet my Comcast-xFinity is having issues opening 443, 2001+ as I read somewhere as being needed.) Btw, Is there a 'LocalHost' approach to see if it can work w/in my own LAN? If this could help, a 'localhost:2000/monitor' has been attached. I would be happy to post my session & simulation output.log, if needed.  Thx  for anyone's kind support.  : ) (Thx Stefania for the earlier reply: [https://discord.com/channels/595546443498913822/595550130019631105/837270555132166164](https://discord.com/channels/595546443498913822/595550130019631105/837270555132166164))
%figure
![Screenshot_from_2021-04-29_02-59-22.png](https://cdn.discordapp.com/attachments/565154703139405824/837292407228858438/Screenshot_from_2021-04-29_02-59-22.png)
%end

##### Stefania Pedrazzi [Cyberbotics] 04/29/2021 11:51:23
Ports 1999, 2000 are used by the web simulation server, ports 2001+ are used by the Webots instances. So you have to make sure that at least ports to 1999 to 2005 are open. Note that this range of port is configurable as described in documentation.

Port 443 is required to use HTTPS so it will probably be open by default.


All what is described in the documentation runs on localhost.

If you want to access from another computer in the same network, then you should use the IP address.

##### jasonc1025 04/29/2021 11:54:42
`@Olivier Michel` and related Colleagues, as program manager... my supervisors have been very impressed with Webots and we would be honored to be annual subscribers if we can get Web Simulation working, as we're looking for an open-source Robotics Sim platform to develop EdTech curriculum with our partner NASA ISS.  Yet our server experience is more node.js and python (flask-based), vs. PHP & Java.  We're based in Silicon Valley, CA USA ([https://questforspace.com/](https://questforspace.com/)), so feel free to verify us as needed.  ; )


`@Olivier Michel` , `@Stefania Pedrazzi`, et al,  re: Web Simulation, due to our limited server skill-sets, e.g. running Docker would be cool, yet we need just simple copy & paste lines to 'mindlessly' create and run the Docker image.  Hope this makes sense.  ; )


Thx `@Stefania Pedrazzi`, I'll see what I can do to get those ports opened.  : )

##### Stefania Pedrazzi [Cyberbotics] 04/29/2021 12:00:21
You can find here some instructions to run the simulation server locally on a Docker container:

[https://github.com/cyberbotics/webots/wiki/Docker#run-streaming-server-in-docker-container](https://github.com/cyberbotics/webots/wiki/Docker#run-streaming-server-in-docker-container)

Note that to use it in production and make it available online you need additional steps.

##### jasonc1025 04/29/2021 12:03:11
Wow, thx `@Stefania Pedrazzi`, that's way cool.  My staff and I will 'hack away' at the helpful Github Docker recipe.  ; )

##### Stefania Pedrazzi [Cyberbotics] 04/29/2021 12:04:14
In any case, yes with paid support we will help you setting up your web simulation server.

You can ask for an offer at sales@cyberbotics.com.

##### jasonc1025 04/29/2021 12:08:03
Thx for such timely and helpful responses.   Great, I can relay this helpful info back to my supervisors, to see what we can do for a hopeful long-term partnership.  : )

##### Venkat 04/29/2021 15:43:40
`@Darko Lukić` Thank you. I was able to do so. With a 270 degree scanning angle for the lidar, I am able to visualize the "Lidar Ray Path" exactly the way being defined. But I am unable to see the "Lidar Point cloud" as expected. The point cloud visualization displays light around few areas, but not for the whole area (270 degrees). I tried slowing the simulation by reducing the basicTimeStep, but still the display remains the same.

##### havilesa 04/29/2021 16:33:15
Hi everyone, I am new to this forum, my robot do not seem to respond to setPositition request. I'm using Python and sojourner. Any help is appreciated: """usodecamarasojourner controller."""





back\_left\_bogie = 0

front\_left\_bogie = 1

front\_left\_arm = 2

back\_left\_arm = 3

front\_left\_wheel = 4

middle\_left\_wheel= 5

back\_left\_wheel = 6

back\_right\_bogie = 7

front\_right\_bogie = 8

front\_right\_arm = 9

back\_right\_arm = 10

front\_right\_wheel = 11

middle\_right\_wheel = 12

back\_right\_wheel = 13



part\_name = ['BackLeftBogie','FrontLeftBogie',

'FrontLeftArm','BackLeftArm', 'FrontLeftWheel','MiddleLeftWheel',

'BackLeftWheel','BackRightBogie', 'FrontRightBogie',

'FrontRightArm','BackRightArm', 'FrontRightWheel', 'MiddleRightWheel',

'BackRightWheel']



joints = []

for i in range(len(part\_name)):

  joints.append(robot.getDevice(part\_name[i]))

  joints[i].setPosition(float('inf'))

  joints[i].setVelocity(0.0)



VELOCITY = 0.6

def move\_6\_wheels(v):

  joints[middle\_right\_wheel].setAvailableTorque( 2.0)

  joints[middle\_left\_wheel].setAvailableTorque( 2.0)



  joints[front\_left\_wheel].setVelocity( v * VELOCITY)

  joints[middle\_left\_wheel].setVelocity( v * VELOCITY)

  joints[back\_left\_wheel].setVelocity( v * VELOCITY)

  joints[front\_right\_wheel].setVelocity( v * VELOCITY)

  joints[middle\_right\_wheel].setVelocity( v * VELOCITY)

  joints[back\_right\_wheel].setVelocity( v * VELOCITY)



def turn\_wheels\_right():

  joints[front\_left\_arm].setPosition(0.4)

  joints[front\_right\_arm].setPosition(0.227)

  joints[back\_right\_arm].setPosition(-0.227)

  joints[back\_left\_arm].setPosition(-0.4)





def turn\_wheels\_left():

  joints[front\_left\_arm].setPosition(-0.227)

  joints[front\_right\_arm].setPosition(-0.4)

  joints[back\_right\_arm].setPosition(0.4)

  joints[back\_left\_arm].setPosition(0.227)

##### Skev 04/29/2021 19:11:34
Hello, my base nodes list when I click on "add a node" doesn't seem to be complete. Is there something wrong with my version or the cameras, lightsensors... are somewhere else ?

##### DDaniel [Cyberbotics] 04/29/2021 19:15:07
`@Skev` hi, only the compatible nodes you can put in the spot you're currently selecting will show up. Add a Robot node first and then select the children field before clicking the (+) button


`@havilesa` hi, how do you do it? Can you show a snippet of the relevant code?

##### Skev 04/29/2021 19:19:19
Oh thank you very much !

##### devPRS 04/29/2021 20:30:25
Hello everyone, I have recently implemented radars in my webots world. I noticed however that I do not get multiple detections for a large building, instead I just get one single hit. I have used radars quite a bit in the real world and the simulated data was not quite what I expected.


Is there anything I can do about this?

##### DDaniel [Cyberbotics] 04/29/2021 21:45:27
`@havilesa` By doing this

```
joints[i].setPosition(float('inf'))
joints[i].setVelocity(0.0)
```

you're setting the motors for Velocity control, but afterwards with this `joints[front_left_arm].setPosition(-0.227)` you're switching them to Position control and in Position control what you provided using the setVelocity (0) specifies the maximal velocity, so they won't move. Take a look at this table [https://cyberbotics.com/doc/reference/motor#motor-control-summary](https://cyberbotics.com/doc/reference/motor#motor-control-summary)

##### Darth Jon 04/30/2021 01:10:34
Hi there, I have a question I couldn't an answer anywhere still: Does webots support machining simulation, like milling or cutting by a robotic end effector?

##### Luftwaffel [Moderator] 04/30/2021 01:12:37
`@Darth Jon` No, Solids are "indestructible". You could probably find a complicated way to make it work, but it does not support such a feature.

##### Darth Jon 04/30/2021 01:13:00
Tyvm Simon!

##### Luftwaffel [Moderator] 04/30/2021 01:13:24
May I ask what exactly it is you want to accomplish?

##### Darth Jon 04/30/2021 01:14:35
I'm deciding which platform I'm going to use in my PhD, I'm comparing the features and limitations of each

##### Luftwaffel [Moderator] 04/30/2021 01:15:03
What are your requirements? What exactly do you want to simulate?

##### Darth Jon 04/30/2021 01:17:06
I'll develop the digital twin of an automation laboratory of university and develop a CPS on top of it and simulating all the factory processes may be interesting from a research point of view


I'm in the preliminary stages so may need it or not


not sure still


but once I start, there's no way back kinda


wont migrate all work after months of development

##### Luftwaffel [Moderator] 04/30/2021 01:19:12
You wont find a robotic simulator who can actually simulate machining.


like FEM and CFM can't be done properly in real time in a rigid body physics engine


The robot simulators such as Gazebo, Webots, PyBullet, Mujoco etc. are rigid body simulators


you can simulate all the movement, but not the actual cutting process

##### Darth Jon 04/30/2021 01:25:10
It probably doesn't use FEM but I found one that allows mesh manipulation in real time, so the robots can simulate cut and milling but it has another limitations like very small robot library

##### Luftwaffel [Moderator] 04/30/2021 01:25:23
which one?

##### Darth Jon 04/30/2021 01:26:02
Coppeliasim (new name for V-REP)

##### Luftwaffel [Moderator] 04/30/2021 01:26:54
it's proprietary. I'd stick with open source and free if I were you


also has lots of other drawbacks

##### Darth Jon 04/30/2021 01:28:03
yeah, it can be used for PhD cause it has an educational free license but yeah it has weakness too that's why I'm studying the case

##### Luftwaffel [Moderator] 04/30/2021 01:28:26
I did an academic paper on robotic simulators, pm me if you like. We shouldnt spam the channel here

##### Darth Jon 04/30/2021 01:28:45
right

##### Darko Lukić [Cyberbotics] 04/30/2021 06:54:46
If a LiDAR measurement is outside the provided range then the measurement is considered invalid and thus, it is not displayed

##### Deleted User 04/30/2021 11:59:04
Hey everyone. I would appreciate some assistance. I'm working with the built-in "iRobot's Create" world but I've run into an issue.



Within the controller for the robot (create\_avoid\_obstacles.c), a turn() function is specified that takes an angle in Radians as input.



I've messed around with the function, giving it specific instead of random values, like 90 ° (M\_PI / 2) but I notice that it's extremely inaccurate and imprecise.



For example, if I give 180°, it only turns by about 140°. If I give 90°, it only turns by about 60. Can anyone help me with this?

##### Beginner26798 04/30/2021 14:21:25
Hi guys im attaching a ure hand to an irobot vacum cleaner but when the irobot move and the hand rotate , the hand detached from the robot how can i fix this problem

##### Markita 04/30/2021 14:58:46
Hi everyone! Does anybody know how can I change the contact properties so that they are "glued" together? I just can't figure it out

##### sa33 04/30/2021 16:36:39
Hi guys, I am working on a robot attached with 2 solid frames getting rotated independently. outer frame will rotate along one axis and the inner frame is connected to outer with a motor and rotates in another axis. so the inner has to rotate along its own axis with outer frame. I have anchored the frames same as the endpoint translation. outer is working fine but inner frame is not rotating properly. Inner frame's anchoring is not working properly and its anchor position is changing while rotation.  Can anyone help me to solve this issue?

##### Beginner26798 04/30/2021 20:02:58
Anyone??!!

##### Luftwaffel [Moderator] 04/30/2021 21:35:45
`@Beginner26798` can you post a screenshot of the problem?


There is no adahesion. You can increase the friction by a lot, so they wont move, but it will still require some force to press the two objects together. If you want them to be actually stuck together, you either have to link them with a transform node, or use connector nodes


[https://cyberbotics.com/doc/reference/connector?tab-language=python](https://cyberbotics.com/doc/reference/connector?tab-language=python)

##### Nick R 04/30/2021 22:23:30
Can anyone explain why the Velodyne HDL-32 sensors don't have concentric rings where they hit the floor, but star-like patterns - is this intentional? The VLP-16 (superimposed in white) has circular rings as I would expect. [https://imgur.com/a/zcl5RCT](https://imgur.com/a/zcl5RCT)

##### Luftwaffel [Moderator] 04/30/2021 22:23:40
Your problem is hard to visualize. Can you share a screenshot or quick video?


It seems like it has 6 sensors aranged in a circle pointing outward


if you overlay their waves, that would result in the pattern you see


hmm no, that does not seem to be it

##### Nick R 04/30/2021 22:29:39
Based on real data ([https://velodynelidar.com/products/hdl-32e/](https://velodynelidar.com/products/hdl-32e/)) something looks quite off

##### Luftwaffel [Moderator] 04/30/2021 22:29:47
ahh, it is rotating. Try lowering the timestep and see if the pattern changes

##### Nick R 04/30/2021 22:31:24
Thanks, still confused about how to lower the timestep. As with my tests before, this is running as an external controller... launched with the ROS2 interface

##### Luftwaffel [Moderator] 04/30/2021 22:31:40
in world info, you set the timestep lower


looking at the HDL-32 proto file, you can see the properties:

`tiltAngle -0.19896287

  horizontalResolution 4500  # 360 / 0.08

  fieldOfView 1.570795       # 6.28318 / 4

  verticalFieldOfView 0.468

  numberOfLayers 64

  minRange 0.8

  maxRange 120

  spherical TRUE

  type "rotating"

  noise 0.000167 # 0.02 / 120

  defaultFrequency 5

  minFrequency 5

  maxFrequency 15`


so it rotates with 5 hz


at 32ms timestep, your simulation runs at about 30 hz


so one rotation only has about 6 positions that get simulated


hence the star pattern


Does that make sense?

##### Nick R 04/30/2021 22:34:19
Yes it does, thank you 🙂 If I set the WorldInfo timestep lower then they approach circular rings. But of course the RTF takes a hit

##### Luftwaffel [Moderator] 04/30/2021 22:34:23
If you were to lower the timestep to 16ms, one rotation of the lidar would have 12 positions and so on


yes, that is the issue


you could fake it and make a surround lidar with 360° FOV

##### Nick R 04/30/2021 22:41:40
Does this amount to using the basic Lidar and setting type to "fixed" ? Any way to override the rotation of the HDL-32 or I have to go back to using the basic LIDAR if I want to achieve this?

##### Luftwaffel [Moderator] 04/30/2021 22:42:50
A basic lidar I assume. You can also duplicate the proto file and adjust it


changed it to fixed and 360°


try this
> **Attachment**: [VelodyneHDL-32E\_360.proto](https://cdn.discordapp.com/attachments/565154703139405824/837821899840552991/VelodyneHDL-32E_360.proto)


the file name and the proto name (line:8 in the file) have to be identical, otherwise Webots does not open it

## May

##### Steven37 05/01/2021 11:10:33
I have a robot like in the video and when it moves it will recognize the objects it has passed and read the color of that object. However, as you can see in the camera image, the colors of these objects will be read again and again. So is there a way for me to get the camera to only recognize each object once and which object has already read its color then won't read it again? Thank you so much!
> **Attachment**: [3YProject\_SagaRobot\_ask\_recognise\_1\_object.mp4](https://cdn.discordapp.com/attachments/565154703139405824/838009497606815744/3YProject_SagaRobot_ask_recognise_1_object.mp4)

##### dA$H 05/01/2021 12:54:12
Does anyone know why my controller stops?
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/838035582629576704/unknown.png)
%end


Prints two link.names and then stops


I'm trying to implement inverse kinematic on ure10


According to a example in webot.

inverse\_kinematic.wbt

##### Dorteel 05/01/2021 15:10:50
The error message says "timeStep not defined", correcting "timeStep" to "timestep" with lower s should solve the issue

##### mileny 05/01/2021 17:17:47
Hi everyone, is it possible to create a sticky wheel on the webots?

##### Mohannad Kassar 05/01/2021 17:24:26
Hello, I just finished a 3D model using solid-works, I export the VRML file (.wrl), how can I import it to webots to program it ?

##### Markita 05/01/2021 17:44:34
Thank you `@Luftwaffel`  !!


I think my question was pretty much the same, check the answer just above, maybe it helps you

##### mileny 05/01/2021 18:03:08
I will try that, thank you!

##### dA$H 05/01/2021 18:07:45
thanks man.


Does anyone know the cause of this error?

Robot: URE10

Inverse kinematic
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/838124628006010900/unknown.png)
%end

##### Luftwaffel [Moderator] 05/01/2021 18:48:49
arrays start with 0. So an array with size 8 goes from 0-7

##### dA$H 05/01/2021 18:50:37
Where is more than 7?


len(motors) = 6


line 166: ikResults = armChain.inverse\_kinematics([x, y, z], max\_iter=IKPY\_MAX\_ITERATIONS, initial\_position=initial\_position)

##### Gustavo Cruz 05/01/2021 19:59:17
Helo! I am trying to create a web simulation service, but I have a problem. I start the session and simulation servers normally, but when I try to start a new simulation by the client an error appears in the command prompt of the servers and the client is in the state of starting simulation. Does anyone know how to solve this problem? Thank you very much!
%figure
![Erro2.PNG](https://cdn.discordapp.com/attachments/565154703139405824/838142556395143188/Erro2.PNG)
%end

##### Maurice Faraj 05/01/2021 20:17:01
Hello everyone hope all is fine I’m facing a problem in my project that my ure10 robotic arm pass through solides  and the floor can anyone help me please to fix it and thank you every one

##### Bitbots\_Jasper [Moderator] 05/01/2021 20:32:44
Your solids probably need a bounding object

##### Maurice Faraj 05/01/2021 20:44:20
Ok thank you

##### dA$H 05/01/2021 20:53:16
Does anyone know why the robot does not go exactly to the ball?
> **Attachment**: [empty\_2.mp4](https://cdn.discordapp.com/attachments/565154703139405824/838156143490236476/empty_2.mp4)


I wrote the controller according to a example in Webot (irb inverse\_kinematic)

##### Luftwaffel [Moderator] 05/01/2021 21:44:59
self collision probably. Also, ikpy is not very good. Slow and unstable. I'd recommend ikfast

##### dA$H 05/01/2021 21:46:35
Is there an example of ikfast in webot?

##### Luftwaffel [Moderator] 05/01/2021 21:47:17
you can compile it yourself


[https://github.com/cyberbotics/pyikfast](https://github.com/cyberbotics/pyikfast)


are you using the ur10e?

##### dA$H 05/01/2021 21:48:00
yes

##### Luftwaffel [Moderator] 05/01/2021 21:52:30
I don't have the solver on this machine


hold on


what os are you on?

##### dA$H 05/01/2021 21:54:23
windows 10

##### Luftwaffel [Moderator] 05/01/2021 21:54:58
ur10e needs lapack installed


I tried doing so without success on win10


Try to install this with "pip install ."
> **Attachment**: [pyikfast\_ur10e.zip](https://cdn.discordapp.com/attachments/565154703139405824/838171882162880512/pyikfast_ur10e.zip)


but it will most likely fail. You need the lapack library. Maybe you manage to get it to compile


let me know if you do

##### dA$H 05/01/2021 22:01:49
Gave an error


Why ikpy works well with irb but has problems with ur10e?

##### Luftwaffel [Moderator] 05/01/2021 22:04:28
ur10e is more complex and requires the linear algebra library "lapack"


on Linux I can tell you how to solve it. WIndows I was not able to do it. However it may have been due to an outdated version. Just recently updated to version 20H2


[https://www.google.com/search?client=firefox-b-d&q=lapack+windows+10](https://www.google.com/search?client=firefox-b-d&q=lapack+windows+10)

##### tabousoud 05/02/2021 13:55:28
Hello everyone, I'm trying to model a gripper similar to this one in the pic and can't figure out how to use `SolidReference` to close the loop.



Using the right  linkage as an example, I first attempted:

body -> joint j1 -> endpoint L1 -> j2 -> L2 -> ... -> j5 -> endpoint = SolidReference(body)

but this didn't seem to work.

I tried a different approach with L3 as the SolidReference node closing the inner (L4) and outer links (L1, L2)  where L3 is an endpoint for j3 and a SolidReference endpoint for j4.



Can someone please advise the way to define this linkage? Thanks!
%figure
![gripper_linkage.png](https://cdn.discordapp.com/attachments/565154703139405824/838413387477286912/gripper_linkage.png)
%end

##### DDaniel [Cyberbotics] 05/02/2021 13:56:33
`@tabousoud` search for the khepera3 gripper sample, it's very similar and uses solid reference

##### tabousoud 05/02/2021 13:58:09
Thanks `@DDaniel` , I'll take a look at it

##### DDaniel [Cyberbotics] 05/02/2021 13:59:53
also don't forget to enable physics in all intermediary endpoints otherwise it won't work

##### tabousoud 05/02/2021 14:01:04
Got it, thanks again!

##### DDaniel [Cyberbotics] 05/02/2021 14:11:30
`@tabousoud` or you can check this one instead, it's basically like the khepera one but has much less stuff so might be easier to understand
> **Attachment**: [gripper.zip](https://cdn.discordapp.com/attachments/565154703139405824/838417421290831902/gripper.zip)

##### tabousoud 05/02/2021 14:22:36
Yes, this looks more straightforward. Many thanks!

##### Luftwaffel [Moderator] 05/02/2021 19:28:36
[https://github.com/cyberbotics/community-projects/tree/master/devices/robotiq/protos](https://github.com/cyberbotics/community-projects/tree/master/devices/robotiq/protos) `@tabousoud` try this one I did

##### tabousoud 05/02/2021 20:03:38
Thanks for sharing! Yes, I actually downloaded both the `Robotiq2f.proto` and `Robotiq85Gripper.proto` to see if I could use those. I noticed that those models used rotational motors for every joint, so was trying to see if I could build a model with a single actuator motor and utilize the linkages to model the grip. So far, it's not going very well...
> **Attachment**: [stacking\_env\_DEV01.mp4](https://cdn.discordapp.com/attachments/565154703139405824/838506037626667048/stacking_env_DEV01.mp4)

##### Luftwaffel [Moderator] 05/02/2021 20:13:07
I think it is easier to "fake" it. I have done so sucessfully in the past. Also had a controller for it, but can't find it


But please post, if you manage to do it successfully

##### tabousoud 05/02/2021 20:18:00
For sure. If I get it to work I'll share what I did. Thanks!

##### Luftwaffel [Moderator] 05/02/2021 20:27:35
`    def set\_robotiq\_2f\_gripper\_pos(self, gripperPos):

        pos = self.gripper\_minPos[0] + gripperPos * (self.gripper\_maxPos[0]-self.gripper\_minPos[0])

        self.gripper\_motors[0].setPosition(pos)

        self.gripper\_motors[1].setPosition(-pos)

        self.gripper\_motors[2].setPosition(pos)

        self.gripper\_motors[3].setPosition(pos)

        self.gripper\_motors[4].setPosition(-pos)

        self.gripper\_motors[5].setPosition(pos)`


I found the function. This controls the gripper nicely doing it the "fake" way


I'm sure you can initialize the class variables yourself, they should be self explanatory

##### tabousoud 05/02/2021 20:32:10
Perfect, this is very helpful `@Luftwaffel` . Thanks again!

##### Stefania Pedrazzi [Cyberbotics] 05/03/2021 06:07:56
The simulation server needs to create an isolated folder in `/tmp/webots/instances` where to store the projects file requested by the client each time a client connects and asks to start a simulation.

You should first make sure that this folder can be created and accessed by `simulation_server.sh` script.

##### Milacuk 05/03/2021 06:49:03
hello,maybe somebody can help me with this problem,i am using makefile which is included into webots
%figure
![2021-05-03_09.45.16.png](https://cdn.discordapp.com/attachments/565154703139405824/838668463022276668/2021-05-03_09.45.16.png)
%end

##### Stefania Pedrazzi [Cyberbotics] 05/03/2021 06:53:18
Here there is some confusion. The robot controller file `distance.c` should contain a C code to control the robot. But your file contains a world definition that should be saved in a `.wbt` file and cannot be compiled.

I would strongly suggest you to read the tutorials to understand how Webots works:

[https://www.cyberbotics.com/doc/guide/tutorials](https://www.cyberbotics.com/doc/guide/tutorials)

##### Johan2021 05/03/2021 10:46:41
Hi everyone, I am modeling a robot that is locked to a surface (alternating between its 2 feet) when in motion. To lock the feet, I exert a force onto the foot body perpendicular to the bottom surface of the foot, but this yields some weird behavior (going into a rigid body) during simulation -- anyone from Webots who could help me on this?
> **Attachment**: [force\_approach\_bad.mp4](https://cdn.discordapp.com/attachments/565154703139405824/838728264637218887/force_approach_bad.mp4)

##### Stormtrooper 05/03/2021 12:51:54
Hello everyone, i have a quick question...how can i tell how often my robot is printing data onto the console? im aware TIME\_STEP is used to get data from a sensor after that specified period of time, but is it also the time taken for the software to go through the main's while loop once?

##### Gustavo Cruz 05/03/2021 12:52:37
The simulation server is creating the folder in /tmp /webots /instances, but it is not creating any files in it when I try to start a simulation. I have already tried to change some permissions on the folder, but the problem continues.
%figure
![Instances.PNG](https://cdn.discordapp.com/attachments/565154703139405824/838759957679308830/Instances.PNG)
%end

##### Stefania Pedrazzi [Cyberbotics] 05/03/2021 13:38:17
Did you check in the logs (default path: `$WEBOTS_HOME/resources/web/server/log/simulation/` and `$WEBOTS_HOME/resources/web/server/log/session/`) if other errors are printed?

If not, I would suggest you to debug the `simulation_server.py` script and in particular the `setup_project` function to better understand why the project files are not copied.

##### Yannnick3 [Cyberbotics] 05/03/2021 19:33:55
Hello everyone ! I'm implementing a VIO module in Webots using ROS. The module has a camera, an accelerometer and a gyroscope. I enable them using the corresponding ROS services. Once activated, each sensor publishes its values on its topic (example: /Module/camera/image for the camera). My problem is the following: I can enable them with any sampling period, the different sensors always publish their value on the topics with a period corresponding to the basicTimeStep of the Webots world. For example, for my camera to publish images at a frequency of 40hz, I enable it with a period of 25ms. Despite this, the camera topic receives an image every 5ms, which is the period of my Webots world. Is there a way to obtain the correct publishing frequency on the topics? Thanks in advance ! 🙂

##### Gustavo Cruz 05/03/2021 20:06:13
I checked the simulation server logs and found that the problem was with the setup\_project\_from\_github function.

The function was checking for the presence of the word "tag" or "branch" in the project link on github, but it was not checking the word "blob".

Thanks for helping me.
%figure
![TrechoProblema.PNG](https://cdn.discordapp.com/attachments/565154703139405824/838869079141384312/TrechoProblema.PNG)
%end


Unfortunately, even correcting the problem, the simulation is not yet started and the client keeps displaying the message "Starting simulation ...".



No error is shown and this is the siling server log at the moment:
%figure
![NovoLog.PNG](https://cdn.discordapp.com/attachments/565154703139405824/838869287291846656/NovoLog.PNG)
%end

##### Boichu 05/04/2021 00:00:23
Hello, I have a problem, I created a test 6-wheeled robot, and wanted to check if the engines are powerful enough for different types of terrains, I've added contact properties and changed Coulomb friction for all of the different surfaces, but the speed of the robots on each of the surface is same, what did i do wrong? 😦
> **Attachment**: [problem.mp4](https://cdn.discordapp.com/attachments/565154703139405824/838928008391426068/problem.mp4)

##### Luftwaffel [Moderator] 05/04/2021 01:37:13
`@Boichu` That means that there is most likely no slippage. Set the friction to 0 for one of them as a sanity check


wait.. I think I misunderstood your question. Why would they move at different speeds in your opinion?

##### Boichu 05/04/2021 01:48:44
Shouldn't there be some resistance to motion on different friction surfaces? I might be wrong though please don't judge too hard.

I did check on 0, no movement, so it's fine

##### Luftwaffel [Moderator] 05/04/2021 01:49:33
You have wheels, as long as they dont slip, there is almost no resistance


You would be right if you were to drag a block across those surfaces, but you are rolling them


There is rolling friction, but i'm not sure it is simulated here, and it very small compared to other sources of friction or drag


Just think of rolling a rubber toy wheel across sandpaper. Rolls without any issues right? Now try to drag it across without spinning. Almost impossible

##### Boichu 05/04/2021 02:02:59
I guess you are right, was thinking about slipping like car on ice, or slowing down on sand, but i'm not sure if it should appear here, thank you for your help

##### Luftwaffel [Moderator] 05/04/2021 02:05:47
the slipping on ice can be simulated. Sand is more tricky, as it is not a solid surface

##### Boichu 05/04/2021 02:09:59
I will try tommorow to create a ramp 😄 I think it can be created from box + rotation right? since i didn't see triangle shape or anything like that

##### Darko Lukić [Cyberbotics] 05/04/2021 06:44:47
The period should be a multiple of the basic timestep:

[https://github.com/cyberbotics/webots/blob/dde08ba5aa324cf2d9d8efdfc53f0363d00cf47e/projects/default/controllers/ros/RosSensor.cpp#L85](https://github.com/cyberbotics/webots/blob/dde08ba5aa324cf2d9d8efdfc53f0363d00cf47e/projects/default/controllers/ros/RosSensor.cpp#L85)

##### Eduardo Tavares 05/04/2021 07:47:09
Hi guys, I'm a newbie and wanted to develop a DH table simulation of a simple puma 560 style robot can you help me?

##### Yannnick3 [Cyberbotics] 05/04/2021 08:11:59
Thanks for your answer. In my case the sampling period is 25ms, while the basic timestep is 5ms. But the sensors still sample values every 5ms (topic frequency is 200hz instead of 40hz). The get\_sampling\_time service returns the correct sampling period though. Am I missing something here ?

##### Darko Lukić [Cyberbotics] 05/04/2021 08:19:39
It seems we are not increasing the `mStep` here:

[https://github.com/cyberbotics/webots/blob/73fe51ccc30a82fede130c67a8d983eec96589a1/projects/default/controllers/ros/Ros.cpp#L491-L492](https://github.com/cyberbotics/webots/blob/73fe51ccc30a82fede130c67a8d983eec96589a1/projects/default/controllers/ros/Ros.cpp#L491-L492)



Is it possible for you to debug it?

[https://github.com/cyberbotics/webots/wiki/Linux-installation](https://github.com/cyberbotics/webots/wiki/Linux-installation)

##### Yannnick3 [Cyberbotics] 05/04/2021 11:54:17
Yes that's the source of the problem ! I added the mStep incrementation. I also needed to replace mStepSize by mRobot->getBasicTimeStep() in the following line, because mStepSize is always equal to 1 and not to the actual duration of a step: [https://github.com/cyberbotics/webots/blob/73fe51ccc30a82fede130c67a8d983eec96589a1/projects/default/controllers/ros/Ros.cpp#L483](https://github.com/cyberbotics/webots/blob/73fe51ccc30a82fede130c67a8d983eec96589a1/projects/default/controllers/ros/Ros.cpp#L483)



Thanks a lot for your help, it works perfectly now !

##### Nexos 05/04/2021 12:25:34
Hello! Is it possible to retrieve the global coordinates (wrt the origin of the world) of an object detected through a robot's Camera? I have used the CameraRecognitionObject.get\_position() function and then followed the instructions on the documentation (calculating p' = R * p + T) but the result is way off.

##### ~E 05/04/2021 13:14:46
Does anyone know of a good, in-depth place to learn about PID controllers? I want to be able to design on from scratch in matlab

##### Luftwaffel [Moderator] 05/04/2021 18:45:09
[https://www.youtube.com/watch?v=wkfEZmsQqiA](https://www.youtube.com/watch?v=wkfEZmsQqiA)

##### Beginner26798 05/04/2021 21:59:44
Good evening what application can we use to do a 3D model and import it to webots

##### tabousoud 05/04/2021 22:07:00
Webots supports a lot of 3D formats, here is a list of what it can import. There are many CAD and modeling programs that can export these file formats.
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/839261861785763910/unknown.png)
%end

##### Deleted User 05/05/2021 04:56:58
Hello, does anybody knows how to change the icon size of Webots UI?

##### Stefania Pedrazzi [Cyberbotics] 05/05/2021 06:08:43
Next step to debug is try to run the exact same instruction to start Webots from a terminal and check if the simulation is started.

##### Darko Lukić [Cyberbotics] 05/05/2021 06:32:05
It's great you found a solution. Can you share the implementation in a GitHub pull request?

##### Olivier Michel [Cyberbotics] 05/05/2021 07:41:25
I assume you are on a retina display, right? Then, setting an environment variable like `QT_ENABLE_HIGHDPI_SCALING=1` should help. See [https://github.com/cyberbotics/webots/pull/2631](https://github.com/cyberbotics/webots/pull/2631). Otherwise, you may try to edit `WEBOTS_HOME/resources/stylesheet.*.qss` with a text editor and see whether you can change icon sizes in there.

##### Max\_K 05/05/2021 12:56:22
Hello, does anybody know if artags or apriltag are available in webots?

##### tabousoud 05/05/2021 13:03:09
Hello everyone! I'm trying to figure out how to implement a robot extension slot within a PROTO.



From what I've seen looking at the existing protos and some of the examples, the way to do this is to add the `MFFloat` field instantiated with an empty array and reference this at the associated node (e.g. endpoint -> solid -> transform -> `children IS extensionSlot`).  I modeled a manipulator and gripper, and used this approach to specify an expansion slot on the manipulator robot. The associated protos for both are in the same project directory and all devices (motors, sensors, etc.) on the robot and gripper have unique names. When using the models, I can add the gripper to the slot as expected. However, I get a "device not found" error when running the controller and referencing a device from the gripper (e.g. `robot.getDevice("left_finger_actuator")`).



This doesn't seem to be an issue when working with existing robots and devices in Webots. My guess is I need to add a path to the child proto but have no clue where/how to do this. Any pointers? Thanks!

##### Darko Lukić [Cyberbotics] 05/05/2021 13:12:38
The name of your motor (inside the PROTO) is `left_finger_actuator`?

##### tabousoud 05/05/2021 13:15:08
Yes, that is the name in the PROTO (in this example, at least).

##### Darko Lukić [Cyberbotics] 05/05/2021 13:19:40
If you `(Right click on the PROTO) > Convert to Base Node` you should be able to see a generated robot structure inside the scene tree. Try to run `robot.getDevice("left_finger_actuator")` then. If that fails, try to find the `left_finger_actuator` node in the scene tree.

##### tabousoud 05/05/2021 13:23:27
Cool, I'll give that a shot. Just to clarify: Is it the child (i.e. gripper) PROTO that I should convert?

##### Gustavo Cruz 05/05/2021 13:40:41
I executed the instruction on a terminal. The Webots program started but then closed quickly. And then a message appeared at the terminal. I think the problem is because he is trying to open the file that is in the path '/tmp/webots/instances/140192500708640/worlds/empty.wbt' but the right path is' / tmp / webots / instances / 140192500708640 / WebotsWorld / worlds /empty.wbt '
%figure
![OpenFile.PNG](https://cdn.discordapp.com/attachments/565154703139405824/839496830605066300/OpenFile.PNG)
%end

##### tabousoud 05/05/2021 14:26:11
`@Darko Lukić` Thanks, I have it working now. The problem is that I tried to convert the Robot node I made for the gripper into a Solid node by manually editing its PROTO and removing some fields. I noticed when using `Convert to Base Node` that it still shows up as a `Robot` node. I reversed the process by converting the Robot node into a solid (from the scene tree) first and then adding back the actuators - which get lost when converting Robot to Solid - manually in the PROTO. This fixed the issue.

##### milacuk 05/05/2021 14:31:01
hello friends,can somebody explain me why i could't buid and simulate  a project
%figure
![2021-05-05_15.21.04.png](https://cdn.discordapp.com/attachments/565154703139405824/839509497348620318/2021-05-05_15.21.04.png)
%end

##### DDaniel [Cyberbotics] 05/05/2021 14:38:15
`@milacuk` Hi, what error do you get?

##### Yannnick3 [Cyberbotics] 05/05/2021 14:45:43
Yes of course ! I made the pull request just now.

##### milacuk 05/05/2021 14:49:32
Actually ,i cant build it
%figure
![2021-05-05_17.48.29.png](https://cdn.discordapp.com/attachments/565154703139405824/839514158197637130/2021-05-05_17.48.29.png)
%end

##### DDaniel [Cyberbotics] 05/05/2021 14:51:02
`@milacuk` you're using a python controller, you don't need to build it, only to save it

##### milacuk 05/05/2021 14:55:59
ok, but when i run the simulation nothing happens

##### DDaniel [Cyberbotics] 05/05/2021 14:57:26
because you're not giving any instructions to the robot, the controller you're showing is an empty loop


`@milacuk` replace it with this and it will do stuff: [https://cyberbotics.com/doc/guide/tutorial-4-more-about-controllers?tab-language=python#the-controller-code](https://cyberbotics.com/doc/guide/tutorial-4-more-about-controllers?tab-language=python#the-controller-code)

##### milacuk 05/05/2021 15:01:00
ok, i will try tnx a lot

##### Gustavo Cruz 05/05/2021 17:32:24
I executed the instruction in the terminal and the simulation started in Webots, but in the browser it still continues "Starting simulation..."
%figure
![Open.PNG](https://cdn.discordapp.com/attachments/565154703139405824/839555143850524693/Open.PNG)
%end

##### main 05/05/2021 17:56:42
Is the max torque on webots the Stall Torque?

##### Mohannad Kassar 05/05/2021 19:10:49
Hello Every one, please any one who tried to import a VRML file to webots and worked reply to me.


I builded a model using solidwork and exported the VRML file and when importing it it gives many erros of this type: ERROR: 'C:/Users/ASUS/Desktop/finall/bag holder.wrl':2:1: error: Skipped unknown 'Separator' node or PROTO.


and I tried to import only one part of the simulation, for the fact this error may be from the complexity of the model, and even this part didn't work and gave the same error


any solution ?

##### Luftwaffel [Moderator] 05/05/2021 22:24:15
`@Mohannad Kassar` As the error says, the file has Separator nodes, which do not exist in Webots.


`@main` It is the maximum torque the motor can utilize. It is not dependent on rotational speed

##### Stefania Pedrazzi [Cyberbotics] 05/06/2021 06:04:55
About the browser, if you start the simulation manually then, you should pay attention because on the browser the use simulation server port may not match.

But if the simulation starts from a terminal then it should also start directly from the script (if you are using the exact same instructions). You should debug what is the difference and why the simulation server doesn't work.

##### Majanao 05/06/2021 10:31:49
Hi everyone, I'm trying to control the motors of a Robotique2F gripper attached to a Kinova Gen3 through a tool slot with 'getDevice('xxx')'. It finds all the motors of the Gen3 but none of the gripper. Can you tell me what I'm doing wrong?
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/839811690233462824/unknown.png)
%end

##### Stefania Pedrazzi [Cyberbotics] 05/06/2021 10:47:14
Note that each `Robot` node is an independent system with each own robot controller and can only access its own devices. So you cannot access devices from a descendant robot from the parent robot controller.

in practice, if the `Robotiq2f` PROTO is of type `Robot`, then you should add a dedicated controller in the `Robotiq2f.controller` field to control its devices.

Alternatively, you should replace the `Robot` node with a `Solid` node in the `Robotiq2f` PROTO definition

##### bingdong 05/06/2021 10:55:43
Hi, how can I add an LCD screen on my robot in simulation?

##### DDaniel [Cyberbotics] 05/06/2021 11:01:53
`@bingdong` hi, you can add a display: [https://cyberbotics.com/doc/reference/display](https://cyberbotics.com/doc/reference/display)

##### Gustavo Cruz 05/06/2021 12:30:35
I did some tests here and found that the problem is in that part of the image code. The simulation server is never receiving the "open" message from the webots. The condition "if line.startswith ('open')" is never true and is always in the loop.
%figure
![Open.PNG](https://cdn.discordapp.com/attachments/565154703139405824/839841575865155624/Open.PNG)
%end

##### Stefania Pedrazzi [Cyberbotics] 05/06/2021 12:32:05
Which Webots version are you using?

I just tested on R2021a and everything works correctly.


You should probably also make sure that the Webots version you are using is the same as the session and simulation server.

##### Gustavo Cruz 05/06/2021 12:41:26
I am using a version R2021a-x86-64.

##### Stefania Pedrazzi [Cyberbotics] 05/06/2021 12:45:51
Note that the "open" message is only sent if Webots is started with the streaming `monitorActivity` option.


The original `simulation_server.py` code already enables this option by default.

##### Gustavo Cruz 05/06/2021 13:00:39
Webots are being started with the streaming monitorActivity option here.

I think I will try to reinstall Webots or install on another version of Ubuntu.



Thanks for helping me. I'm sorry for the inconvenience.

##### Seedow 05/06/2021 13:06:27
Hi! I'm using Webots R2021a revision 1 Nightly 19/3/2021 and Matlab R2020a. If I want to run a controller in extern mode, at first time it works well, but after I stop it or it crashes, after the second start (after resetting the simulation) Matlab crashes completely. Has anyone run into this issue? Should I upgrade my Matlab to a newer version?

##### Majanao 05/06/2021 14:13:41
Thanks a lot `@Stefania Pedrazzi`! I set it to Solid and it work just fine.

##### bingdong 05/06/2021 14:21:39
@<@787796043987025941> Thanks a lot!

##### alejanpa17 05/06/2021 16:11:30
Hello everyone, Im trying to get the absolute position of an object given the relative position from the camera recognition any clue of the formulas i have to apply?

##### bingdong 05/06/2021 16:12:09
<@787796043987025941> I actually wanted to have the display as a 2D texture on a shape inside of an overlay. The functions described worked for the overlay but I'm not sure how to use them for texture.

Display>children>Shape>Appearance>baseColorMap>ImageTexture>url

Is there a display function for making changes to the url or will I have to use Supervisor?

##### Luftwaffel [Moderator] 05/06/2021 18:52:00
`@alejanpa17` [https://cyberbotics.com/doc/reference/supervisor?tab-language=python#wb\_supervisor\_node\_get\_position](https://cyberbotics.com/doc/reference/supervisor?tab-language=python#wb_supervisor_node_get_position) take a look at the python example


If you are working in python, I can give you a easy to implement module

##### alejanpa17 05/06/2021 18:56:18
Awesome, i get the idea thank you!

##### jasonsteakham4 05/06/2021 22:22:23
hey, could anyone detail how to go about saving a camera image through python? I can't seem to make sense of the code in the doccumentation

##### Luftwaffel [Moderator] 05/06/2021 22:54:15
`@jasonsteakham4` you want to save it as an image file?


if you use opencv (cv2), then you can use this: [https://www.geeksforgeeks.org/python-opencv-cv2-imwrite-method/](https://www.geeksforgeeks.org/python-opencv-cv2-imwrite-method/)

##### jasonsteakham4 05/06/2021 22:55:29
Yes ideally

##### Luftwaffel [Moderator] 05/06/2021 22:55:31
otherwise look for general python documentation.

##### jasonsteakham4 05/06/2021 22:55:39
Thanks!

##### ~E 05/08/2021 00:37:56

%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/840387007431966740/unknown.png)
%end


does anyone know how to fix these weird wireframe things?

##### DDaniel [Cyberbotics] 05/08/2021 00:39:01
`@~E` Hi, View > Plain rendering

##### chika 05/08/2021 08:46:31
Hi. I am using webots 2021 and I'm trying to get the color of a color patch on ground using webots camera node. I program with C++.

I came across 2 problems.

1. When I reload the world and simulate for the first time, it take some time for the camera to start capturing (about 2 seconds) and by that time the color patch is already passed. But when I reset the world (without reloading) and simulate again, camera start capturing right from the beginning (just the way I want it to).

How can I solve this issue?

2. When the camera gets disabled through code after serving it's purpose, the camera keep disabled even in next simulations (even after I reload the world the camera is still disabled). Why?

##### aslisevil 05/08/2021 12:07:09
hello, I have a question. I use the supervisor rotate function in my simulation. But when I do rotation, my robot starts to walk with a curve instead of walking in a straight line. And sometimes it starts shifting out of nowhere after rotation. Do you know why this might be happening?

##### Beginner26798 05/08/2021 12:36:53
Hi guys ... i need please anything that helps me to make a robotic arm i don't want to use the samples in webots

##### Donny\_234 05/08/2021 14:48:56
Hello I am a beginner in Webots. I wanted to ask whether it is possible to control the motion of a robotic arm using hand gestures as live input from the computer's webcam?

##### pnaraltnsk 05/08/2021 17:45:27
Hello, is there any way of changing the angular velocity magnitude of nao robot?

##### Luftwaffel [Moderator] 05/08/2021 23:03:21
It is possible, but sounds very complicated. You would need some form of computervision algorithms recognizing and translating the video input into movement commands. That is not included in Webots


Dont use the supervisor for controlling a robot. It "cheats" or "teleports", which screws up the physics. You should only control your robot with motor commands


A custom arm or an existing one? For existing ones you can convert urdf into Webot's proto format


otherwise I suggest you add an existing arm to your webots world, right-click > convert to base nodes


then take a look at the structure and create your own arm accordingly

##### main 05/09/2021 03:46:11
Any appropriate way to add delays in your script?


(to have a delay between code continuously executing)

##### Luftwaffel [Moderator] 05/09/2021 03:49:08
`@main` just add waiting loops or pauses. You can either use simulation time or computer time

##### main 05/09/2021 03:49:31
As in the python sleep function?

##### Luftwaffel [Moderator] 05/09/2021 03:49:42
yes


or you do a check on what simulation time it is


and only execute your code when enough sim time has elapsed

##### main 05/09/2021 03:51:03
The sleep function would be better for the scenario, however I always have trouble defining it?

##### Luftwaffel [Moderator] 05/09/2021 03:51:47
what exactly do you want to accomplish?

##### main 05/09/2021 03:53:27
Ive got distance sensors on my offroad truck , and im trying to make it so the distance isnt being repeatedly checked


so theres a bit of timing in between distance sensor measurments

##### Luftwaffel [Moderator] 05/09/2021 03:54:31
enable the sensor with a different frequency then


(should be a multiple of basicTimeStep

##### main 05/09/2021 03:55:00
Thats where ive been going wrong with the multiple of time step, thanks


Its in milliseconds right? so 2048 is around 2s

##### Luftwaffel [Moderator] 05/09/2021 03:57:14
yes

##### SeanLuTW 05/09/2021 17:25:13
I made some customized revised of `UR5e.proto` and `Kinect.proto` and put them in the `protos` in my project directory. When I try to import them, I found that only `UR5e (Robot)` under `PROTO nodes (Current Project)`  and couldn't find Kinect. Does anyone know why?

##### aslisevil 05/09/2021 18:25:49
hello, I was wondering if it's possible to disable distance sensor for one specific object only.

##### mmoralesp 05/09/2021 19:33:34
Hello Everyone!,  I am working on a project for my university on ROS and Webots, I am trying to control two epuck in the same Webots environment with ROS but I am not able to make them work, as if I can do it with only one epuck. I would like to know if anyone has tried to do this and if you could help me thanks.

##### Luftwaffel [Moderator] 05/09/2021 20:39:26
`@mmoralesp` you need one controller per robot, but they can be "dumb" controllers, simply subscribing and publishing topics. All your logic can be done from the same script / node


The name of the proto file and the name of the proto node inside the file have to be exactly the same.  Post the file and I can take a look

##### SeanLuTW 05/10/2021 00:54:51
If I named the file which doesn't match with the name of the PROTO node, the console will show `'FILE_TO_PROTO': error: PROTO identifier does not match filename`. But if I fixed it, it still not shown.

##### Luftwaffel [Moderator] 05/10/2021 00:55:15
post the file here, i'll take a look


it is in the protos folder of your project?

##### SeanLuTW 05/10/2021 00:55:38
Here's my PROTO
> **Attachment**: [Kinect.proto](https://cdn.discordapp.com/attachments/565154703139405824/841116239266971689/Kinect.proto)


Yes, I put them into the protos subdirectory
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/841118431172624424/unknown.png)
%end

##### Luftwaffel [Moderator] 05/10/2021 01:04:37
not showing up for me either, i'm investigating


`@SeanLuTW` figured it out. It only shows up when you add it as a child node of a robot


or a handslot etc of a robot


only if "devices" show up under Webots Projects, can your device show up as well
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/841120213969010688/unknown.png)
%end


It contains sensors, any device needs a robot as a parent

##### SeanLuTW 05/10/2021 01:13:25
Yes, it show up when I add it as a child of a robot


Thanks! I forgot it is a `Solid` instead of a `Robot`

##### Luftwaffel [Moderator] 05/10/2021 01:15:03
if you want to simply place a kinect "in the room" you have to add a base Robot node and add it as a child


it does not need any other solids or shapes

##### Luiz Felipe 05/10/2021 09:38:39
Hello, is it possible to stream a simulation to the browser in 'run' mode? (Running as fast as possible but also able to see the graphics) It seems I can only run in real time or fast mode without graphics during training.

##### h.sciascia 05/10/2021 09:54:17
Hello everyone,

Is that possible to do a check collision with a Physics Plugin if the robot and environment are not moving ?


I can only detect collision when colliding, not when my robot and environment are already in collision

##### Stefania Pedrazzi [Cyberbotics] 05/10/2021 10:50:25
Which version of Webots are you using? Are you using X3D or MJPEG streaming?

I just checked and the run mode with the X3D streaming works correctly on Webots R2021a after enabling the `webots.showRun = true;` option in the streaming viewer.

##### Luiz Felipe 05/10/2021 10:52:01
Oh... I am testing with Webots 2020b and MJPEG mode `@Stefania Pedrazzi`... Does it work only with the R2021a and X3D mode?

##### Stefania Pedrazzi [Cyberbotics] 05/10/2021 10:54:12
It works on R2020b too, but with the MJPEG mode you need to enable the graphics rendering in Webots.

If you disabled them in Webots, then the MJPEG streaming cannot work.


To speed up the physics computations, objects are "disabled" if they do not move or don't have new collisions. These "idle" objects are represented in Webots by changing the color of the bounding object from white to blue.

One thing you could try in your physics plugin is to check if the body is enabled using the function `bool dBodyIsEnabled(dBodyID)` and if not try to enabled it manually using  `void dBodeEnable(dBodyID)` and check again if you can detect the collisions.

You can find additional information in the ODE physics engine manual:

[http://ode.org/wiki/index.php?title=Manual#Collision\_handling](http://ode.org/wiki/index.php?title=Manual#Collision_handling)

##### Luiz Felipe 05/10/2021 11:07:00
Locally I can run the three modes (real-time, run, and fast) in 2020b. Yups... it seems the 3 types are supported by the webots class... when I run the 'real-time' mode with MJPEG it works fine with graphics in the stream... If I run the 'run' or 'fast' mode the simulation run as fast as possible but both of them without graphics in the stream...


If i get the graphics in 'real-time' it means the graphics rendering in Webots is enabled right?

##### Stefania Pedrazzi [Cyberbotics] 05/10/2021 11:09:16
Yes. The MJPEG won't work when running with the FAST mode, but should work running the simulation in RUN mode.

If it doesn't, then I would suggest you to upgrade to the latest Webots R2021a.

##### Luiz Felipe 05/10/2021 11:10:30
Okkz! I will test again... because the websocket call changes to R2021a right?

##### Stefania Pedrazzi [Cyberbotics] 05/10/2021 11:16:00
In R2021a, the "run" and "fast" mode have been changed in Webots: only the "fast" remains and the graphics rendering has been added as separate option. In the streaming communication nothing changed.

The main reason to upgrade is that we won't be able to fix bugs, if any, in the old Webots R2020b release.

##### Luiz Felipe 05/10/2021 11:19:42
ok!

##### h.sciascia 05/10/2021 11:33:17
Ok thanks i will try that

##### Iris230 05/10/2021 13:19:22
guys I'm wondering how can I use the vehicle libraries in pycharm?

##### Darko Lukić [Cyberbotics] 05/10/2021 13:19:56
[https://cyberbotics.com/doc/guide/using-your-ide#pycharm](https://cyberbotics.com/doc/guide/using-your-ide#pycharm)

##### Iris230 05/10/2021 13:23:36
thank you, I've seen this😂 but  what exactly value of path should I type?

##### Darko Lukić [Cyberbotics] 05/10/2021 13:25:32
Check this:

[https://cyberbotics.com/doc/guide/running-extern-robot-controllers#environment-variables](https://cyberbotics.com/doc/guide/running-extern-robot-controllers#environment-variables)

##### Iris230 05/10/2021 13:28:18
but there is no vehicle libraries🥲



%figure
![IMG_20210510_212543.jpg](https://cdn.discordapp.com/attachments/565154703139405824/841305700470882354/IMG_20210510_212543.jpg)
%end


here is the error🥲

##### Darko Lukić [Cyberbotics] 05/10/2021 13:31:10
That means that your `LD_LIBRARY_PATH` is not properly configured. What do you get when you do `echo $LD_LIBRARY_PATH`?


Oh, my bad, you are in Windows

##### Iris230 05/10/2021 13:34:01
yes,I'm in windows😂

##### Darko Lukić [Cyberbotics] 05/10/2021 13:34:08
What is your PATH?

##### Iris230 05/10/2021 13:35:45
sorry give me a second



%figure
![IMG_20210510_213810.jpg](https://cdn.discordapp.com/attachments/565154703139405824/841308208903356446/IMG_20210510_213810.jpg)
%end

##### Darko Lukić [Cyberbotics] 05/10/2021 13:40:37
Can you check whether those directories exist?

##### Iris230 05/10/2021 13:42:30
they do exist, cause I just copied and add them

##### Darko Lukić [Cyberbotics] 05/10/2021 13:48:40
Can you run the controller from a CLI using these instructions?

[https://cyberbotics.com/doc/guide/running-extern-robot-controllers#environment-variables](https://cyberbotics.com/doc/guide/running-extern-robot-controllers#environment-variables)

##### Iris230 05/10/2021 13:56:30
it seems like there is no instruction about running the controller from a  CLI?

##### Darko Lukić [Cyberbotics] 05/10/2021 13:57:48
You should be able to run `python3 /path/to/your_controller.py` once all environment variables are set

##### Iris230 05/10/2021 14:12:25
nothing happened… it still can't control my car



%figure
![IMG_20210510_221258.jpg](https://cdn.discordapp.com/attachments/565154703139405824/841316923597258802/IMG_20210510_221258.jpg)
%end


I couldn't see anything🥲

##### Darko Lukić [Cyberbotics] 05/10/2021 14:19:06
You use Python from Anaconda :/

[https://cyberbotics.com/doc/guide/using-python#use-an-alternative-python-version](https://cyberbotics.com/doc/guide/using-python#use-an-alternative-python-version)

##### Iris230 05/10/2021 14:23:57
oh thank you very much

##### Luiz Felipe 05/11/2021 00:54:21
Just as a feedback `@Stefania Pedrazzi` , with the R2021a it works fine... Thank you!

##### h.sciascia 05/11/2021 06:35:05
Hello everyone,

I am doing a simulation with a personalized physics plugin.



My code is generating a lot of random configuration of a 6 dof arm robot and realize them.

For each configuration I setPosition to the motors, and then erase the previous configuration with a new random one.



But my simulation is freezing about 5-6 secs after i launch the process.



Have you any idea for the resolution of my problem ?

Because even if I reset the physics plugin and erase all of the components of my environment to only keep the robot arm the simulation freeze...



Thanks in advance 😉

##### Darko Lukić [Cyberbotics] 05/11/2021 06:45:15
The Physics plugin is usually a critical part, you may have a blocking code there. Is it possible for you to test without the plugin?

##### yash 05/11/2021 14:20:55
Hi ! I want to know the radius of the wheels of iRobot’s create that’s available in WEBOTS.



I couldn’t find it ... please help me if there’s any way to find out.

##### harrymcc 05/11/2021 15:00:22
wb\_motor\_set\_position(left\_motor, 1);

 wb\_motor\_set\_position(right\_motor, 1); i have been going through the tutorials and this code according to it makes the robot come to a stop after 1 rotation of the wheel but it just keep going. Any clue why it does this. Even tried a straight copy and paste of the tutorial code and still nothing

##### Majanao 05/11/2021 16:58:15
Hi, is someone able to use the Blender import function. I always get the same error even with different Blender models.... WARNING: Invalid data, please verify mesh file (bone weights, normals, ...): BLEND: Expected at least one object with no parent

##### KajalGada 05/12/2021 00:08:25
From my understanding, any set position or set velocity command once given will continue to be in that state and not a one off.



If you want it stop after a rotation, you can add an if condition to check current position of wheel and once reached to 1, stop it.

##### Luftwaffel [Moderator] 05/12/2021 02:02:36
`@harrymcc` `@KajalGada` wb\_motor\_set\_position(right\_motor, 1) gives the motor the command to reach the position 1. Once it reaches that position, it stops and holds it. The value is in radian (2*pi = 6.28...) is one rotation. So if your current motor position is 0 and you turn to 1, the robot will only roll a bit. However, if your current position is -100, it will roll quite a bit.


`@Majanao` what type of file did you try to import? Perhaps try to export it as an .obj file and import that


It sounds like you want to export a scene or special structure.

##### Darko Lukić [Cyberbotics] 05/12/2021 08:15:16
Hello `@cahyadiryan30`, I had remove your post as it contained images that make hard for users to debug your simulation. Please post the code to services like Gist ([https://gist.github.com/](https://gist.github.com/)) or use a proper tag ([https://support.discord.com/hc/en-us/articles/210298617-Markdown-Text-101-Chat-Formatting-Bold-Italic-Underline-](https://support.discord.com/hc/en-us/articles/210298617-Markdown-Text-101-Chat-Formatting-Bold-Italic-Underline-)).

##### KajalGada 05/12/2021 14:29:14
That makes sense.

##### harrymcc 05/12/2021 14:42:45
okay thanks for help turns out my bot must have been well in the minuses and just wasn't stopping

##### Max\_K 05/12/2021 16:17:18
Hello, i am trying to use a camera in Webots for the detection of apriltags in ros2 foxy. I tried with the 'Webcam for Robotino3' and the custom camera, but the /camera\_info topic in ros2 is empty, there is only one message at start.

 Do i have to fill the camera\_info msgs myself or do i miss something?

##### Darko Lukić [Cyberbotics] 05/12/2021 16:18:27
Hello, the CameraInfo topic is latched, so you should verify QoS of your subscriber

##### Max\_K 05/12/2021 16:29:01
Okay, so its not possible to echo the camera\_info via cmd without QoS settings? I also do not see the image in rviz2 when subscribing to the /image\_raw, are the QoS setting also reason for that?

##### Darko Lukić [Cyberbotics] 05/12/2021 16:49:27
You can use echo, but:

[https://answers.ros.org/question/371521/ros2-foxy-qos-durability-transient\_local-rclpy-to-echo-robot\_description/](https://answers.ros.org/question/371521/ros2-foxy-qos-durability-transient_local-rclpy-to-echo-robot_description/)



For image in RViz2 yes, it may be the reason, but you can change QoS in RViz2.

##### Max\_K 05/12/2021 17:00:42
ok thanks! i m just getting one msgs when echo to the CameraInfo topic with QoS settings, but that helps.

##### Alejandro Pescathore 05/12/2021 22:18:53
Hello there!

Is it possible to record a simulation with audio?  And if it is possible, how can I do it?

##### Luftwaffel [Moderator] 05/12/2021 23:02:36
Do you have audio in the simulation?

##### Alejandro Pescathore 05/12/2021 23:03:26
Yes, i ise the speakers

##### Luftwaffel [Moderator] 05/12/2021 23:04:13
I dont have experience with it, but if it is not implemented, that would be a good feature request

##### pewpewpew 05/13/2021 02:54:31
Are the left and right sensor values getting printed to the console in decimeters? Thanks in advance.
%figure
![Screenshot_1447.png](https://cdn.discordapp.com/attachments/565154703139405824/842233318715686932/Screenshot_1447.png)
%end

##### Luftwaffel [Moderator] 05/13/2021 03:12:15
radians. They are motors, so it's angles in radians

##### pewpewpew 05/13/2021 04:37:47
it says that these sensors "allow the robot to know the distance traveled so far",  how would I convert two meters to radians?

##### DDaniel [Cyberbotics] 05/13/2021 08:40:52
For a full rotation of the motor (2pi radians)  the robot will advance roughly by a distance equal to the circumference of the wheel

##### pewpewpew 05/13/2021 08:57:19
thanks! I eventually figured that out, now I'm just trying to get the robot to follow the square path correctly

##### bingdong 05/13/2021 09:12:10
Hi, not sure how the motor.setPosition() function works. I initialised the rotational motor in scene tree and python script, then called motor.setPosition(PositionValue) in the main loop. From what I understand, the controller should calculate velocity according to set PID values to reach position. But the motor doesn't seem to be rotating.

##### DDaniel [Cyberbotics] 05/13/2021 09:15:09
`@bingdong` did you set motor.setVelocity(0) somewhere by any chance? In position control this command specifies the maximal velocity, if you did it won't move.

##### bingdong 05/13/2021 09:17:10
Ah okay. Thought it would change the setVelocity() value while running. Got it, thanks!

##### DDaniel [Cyberbotics] 05/13/2021 09:18:53
`@bingdong` no, only in velocity control it would do that, in position control it specifies the maximal velocity. Keep in mind that the motor API functions have different meanings depending on which type of control you're making (position control, velocity control, torque control). It's summarised in this table: [https://cyberbotics.com/doc/reference/motor#motor-control-summary](https://cyberbotics.com/doc/reference/motor#motor-control-summary)

##### bingdong 05/13/2021 09:27:12
Will go through it. Thank you.

##### raerae 05/13/2021 09:42:06
Hi guys, I'm new here. I just want to ask, is there a possible method to export Solidworks model to Webots that will include its original appearance?

##### alejanpa17 05/13/2021 18:40:10
Hi, im getting this error while compiling the racing\_wheel controller. Any clue whats happening?
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/842471300152950804/unknown.png)
%end

##### Suke 05/13/2021 20:02:28
We are trying to figure out if we can implement a conveyor with teeth shown in the attached figure with the track node. We tried to use group that includes both track and box (teeth) in the bounding geometry. Is it possible or do we need to implement this as slider joints to mimic this behavior?
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/842492011101683722/unknown.png)
%end


Go to "File>Save as" and select VRML (.wrl). Click option and select version "VRML 97". Still You may loose some apperance, but this is the best way so far for me.

##### Supernova 05/13/2021 20:37:46
Hey, can anyone tell me why do I have a message: "Connect to SUMO... This operation may take a few seconds." that well, never dissapears? My vehicle never connects to sumo and the simulation just stops the moment it starts, for some reason.

##### Luftwaffel [Moderator] 05/13/2021 22:39:52
Can you give more information? What did you run, where did the error show?

##### Supernova 05/14/2021 05:57:48
Im running my own autonomus vehicle controller. Its tesla with a compass, gps, lidar and seven distance controllers. But most of the code is commented - i only wanted to test a tiny function i prepared for distance sensors, so the only think the car does is going forward and checking if anything is too close, and this happends. Its not even an error, just an information - nothing else gets printed out. So im just trying to ask If its my fault and i messed up the code, or is it just some form of a bug...?

##### Darko Lukić [Cyberbotics] 05/14/2021 06:30:46
You probably have a `SumoInterface` PROTO somewhere in your world. Deleting it should fix the error:

[https://cyberbotics.com/doc/automobile/sumo-interface](https://cyberbotics.com/doc/automobile/sumo-interface)


It seems you are missing the Qt library in your PATH

##### Dorteel 05/14/2021 11:49:08
Hi everyone! Can anybody give me an advice on how to align connectors? I'm trying to grasp, and lock when there is a presence of a connector, but the can just teleports to the side after locking. The connector in the robot is in the middle of the tool center point, and the connector in the can is in the middle as well. There is a distance tolerance of 0.02. Any help is greatly appreciated, have ran out of ideas...
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/842730251021058088/unknown.png)
%end

##### alejanpa17 05/14/2021 16:31:13
isn't that supposed to be included in webots when installing it? I didnt touch anything in that path

##### antehc 05/14/2021 20:10:23
Hi guys, I'm new here. I just want to ask, is there a way to have some fire or explotion effect in webots?

##### Luftwaffel [Moderator] 05/14/2021 20:51:44
`@alejanpa17` [https://www.cyberbotics.com/doc/guide/running-extern-robot-controllers#environment-variables](https://www.cyberbotics.com/doc/guide/running-extern-robot-controllers#environment-variables) you have to set environmental variables


`@Dorteel` can you share a project so we can take a closer look?


Fire or explosions are not included. Perhaps you could try a point light, which you change the properties of with a script

##### mmoralesp 05/14/2021 21:35:20
Ok, but how i set in the launch file the controller or where i set this? Thanks!!

##### Luftwaffel [Moderator] 05/14/2021 21:39:08
`@mmoralesp` just select the ros controller for each robot. It should automatically create topics and action servers / services to control the robot


all controllers get started automatically when the simulation starts

##### mmoralesp 05/14/2021 21:40:57
but the controller is external so where i set that

##### Luftwaffel [Moderator] 05/14/2021 21:41:17
in webots


you can still start your external controller

##### mmoralesp 05/14/2021 21:45:01
I launch the world from the terminal with the ros command and then the ros controller to set the velocity


so i dont know how to launch this from webots

##### Luftwaffel [Moderator] 05/14/2021 21:45:51
what command? Is it your own world?

##### mmoralesp 05/14/2021 21:47:11
ros2 launch webots\_ros2\_epuck robot\_launch.py (Robot\_launch.py is where is configured the world, executable...)

##### Luftwaffel [Moderator] 05/14/2021 21:48:50
ohh you're using ros2. You did not mention that

##### mmoralesp 05/14/2021 21:49:01
sorry mate


yes im using ros2

##### Luftwaffel [Moderator] 05/14/2021 21:49:10
not very experienced with ros2

##### mmoralesp 05/14/2021 21:49:44
if i can do this with ros, i dont mind to change


but i like to use the publish and subscription

##### alejanpa17 05/15/2021 11:49:25
Environmental variables were good. I fixed doing this: [https://github.com/cyberbotics/webots/issues/2717](https://github.com/cyberbotics/webots/issues/2717) I have the version nightly\_13\_5\_2021

##### dA$H 05/15/2021 14:33:05
hi.

can we use "input()" in  webot's console?
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/843133895607975936/unknown.png)
%end

##### alejanpa17 05/15/2021 17:59:11
Hi, im trying to calibrate the engineFunctionCoefficients of a car node but I have no clue on how to do it, the rest of the configuration is on the image. I tried other values but the rpm never go higher than 900 and I dont know why
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/843185763084271656/unknown.png)
%end

##### abhicv 05/16/2021 04:51:52
Hi, how to visualize things like fluid being sprayed by a robotic arm on objects?

##### [BU] Heinrich Mellmann 05/16/2021 10:00:39
Hi everybody, I have a problem with using the `Pen`. it works perfectly on a floor with a single texture tile, but stop working as soon as there are more texture tiles. To reproduce the issue:



1. open `projects/samples/devices/worlds/pen.wbt`

2. start => pen works

3. change `RectangleArena->floorSize->x = 2`

4. start => pen is double

5. change `RectangleArena->floorSize->y = 2`

4. start => pen doesn't work



`@DDaniel` I adjusted the test scenario: you have to change the `floorSize` to make sure there are several tiles. As long as there is only one tile everything works fine, but there seems to be a problem as soon as the floor consists of several tiles. Alternatively you can set `floorTileSize->x=0.5`, `floorTileSize->y=0.5`

##### Beginner26798 05/16/2021 10:18:58
Hi guys ... i'm using a regular wheel not a differential one so i need another sentence to get the encoder can you help please and give me another sentence than this in the photo below



%figure
![20210516_131647.jpg](https://cdn.discordapp.com/attachments/565154703139405824/843432378797260820/20210516_131647.jpg)
%end

##### DDaniel [Cyberbotics] 05/16/2021 10:54:26
`@[BU] Heinrich Mellmann` I can't reproduce the bug on 2021a, what version are you using?


`@Beginner26798` As explained here [https://www.cyberbotics.com/doc/reference/differentialwheels#differentialwheels](https://www.cyberbotics.com/doc/reference/differentialwheels#differentialwheels), you can replace the differential wheel with a hingejoint + rotational motor + position sensor. You need to use Motor API [https://www.cyberbotics.com/doc/reference/motor](https://www.cyberbotics.com/doc/reference/motor) and Position Sensor API [https://www.cyberbotics.com/doc/reference/positionsensor](https://www.cyberbotics.com/doc/reference/positionsensor) to interact with them


`@dA$H` Hi, haven't checked but depending on what you need to do there might be better ways to do it. If you want to control a robot using the keyboard you can use the Keyboard API [https://www.cyberbotics.com/doc/reference/keyboard](https://www.cyberbotics.com/doc/reference/keyboard), which is available by default for Robot nodes (useful for 1 stroke inputs typically, like steering). If you have multiple robots that all have the same controller but want them to behave differently you can do using using controller arguments [https://cyberbotics.com/doc/guide/controller-programming#using-controller-arguments](https://cyberbotics.com/doc/guide/controller-programming#using-controller-arguments). Lastly, you can use a supervisor to send out unique commands to each robot using emitters/receivers.

##### [BU] Heinrich Mellmann 05/16/2021 11:34:28
Thanks for the fast reply! I'm using the same version. You are right, I mistyped a variable name in my test case: for the bug to appear you have to change `floorSize` to make sure your floor texture has more than one tile. I also adjusted the test case description above.

##### DDaniel [Cyberbotics] 05/16/2021 12:16:54
`@[BU] Heinrich Mellmann` I see, I can reproduce it as well. It's due to the fact that the `RectangleArena` PROTO doesn't handle the mapping by itself when changes occur, so when you change the `floorSize` you also need to change the `floorTileSize` accordingly as reported here: [https://github.com/cyberbotics/webots/issues/1529#issuecomment-615062207](https://github.com/cyberbotics/webots/issues/1529#issuecomment-615062207), but I do agree that it can be misleading

##### Beginner26798 05/16/2021 12:23:29
I have used the position sensors it is giving me this error



%figure
![20210516_152222.jpg](https://cdn.discordapp.com/attachments/565154703139405824/843463786090594334/20210516_152222.jpg)
%end


<@787796043987025941>

##### DDaniel [Cyberbotics] 05/16/2021 12:27:05
`@Beginner26798` you only need to pass `ps0`, `WbDeviceTag` is the type. I suggest you do this tutorial before: [https://cyberbotics.com/doc/guide/tutorial-4-more-about-controllers](https://cyberbotics.com/doc/guide/tutorial-4-more-about-controllers)

##### Beginner26798 05/16/2021 14:33:04
I used this code to initialize the position sensors but it is giving me the same error can you please tell me what the specific code that i should add ... and thanks for helping <@787796043987025941>
%figure
![Screenshot_20210516-173046_Chrome.jpg](https://cdn.discordapp.com/attachments/565154703139405824/843496279316889611/Screenshot_20210516-173046_Chrome.jpg)
%end



%figure
![20210516_173313.jpg](https://cdn.discordapp.com/attachments/565154703139405824/843496357373280276/20210516_173313.jpg)
%end


What's wrong with this
%figure
![20210516_173918.jpg](https://cdn.discordapp.com/attachments/565154703139405824/843498094838284338/20210516_173918.jpg)
%end

##### DDaniel [Cyberbotics] 05/16/2021 15:18:06
`@Beginner26798` like I said you need to drop the `WbDeviceTag` and just call `wb_position_sensor_get_value(ps0)` as shown in the tutorial. Also, is `ps0` a global variable? Otherwise your function `compute_odometry` won't know what that is.

##### Daemongear 05/16/2021 17:21:43
Hey there. I'm trying to connect ROS with WeBots. I already have an Rviz launch file, the urdfs, protos, worlds setup, but I can't figure out how exactly I can connect RViz to the motor sensor feedbacks.


I figured that there should be a way to pass them to the joint\_state\_publisher, but I'm not sure how


as far as I have found, I still need to write a node to connect the two, where I simply take the results from the respective topics (whose names change each time) and plug them into their joint\_state.name and .position, then publish the results

##### Luftwaffel [Moderator] 05/16/2021 20:50:55
your robot's controller has to get the sensor values and publish them

##### Beginner26798 05/16/2021 21:28:46
Any i dea on what can cause these errors ??
%figure
![20210517_002742.jpg](https://cdn.discordapp.com/attachments/565154703139405824/843600892355805204/20210517_002742.jpg)
%end

##### Luftwaffel [Moderator] 05/16/2021 21:31:44
which errors are you referring to? The lower half are only warnings


and it's hard to say without seeing your code


can you upload your controller file here?

##### Beginner26798 05/16/2021 21:39:19

> **Attachment**: [final\_one.c](https://cdn.discordapp.com/attachments/565154703139405824/843603549739810856/final_one.c)


<@239507682111913984> this is the file

##### Luftwaffel [Moderator] 05/16/2021 21:39:44
`@Daemongear` are you using ROS or ROS2? If using ROS, did you use the default ROS controller

##### Beginner26798 05/16/2021 21:40:29
I'm trying to make a obstacle avoider robot with color recognition

##### Luftwaffel [Moderator] 05/16/2021 21:40:31
you get the errors when building?

##### Beginner26798 05/16/2021 21:40:39
Yes

##### Luftwaffel [Moderator] 05/16/2021 21:40:52
and can you post the whole output, without any old console messages

##### Beginner26798 05/16/2021 21:44:11

%figure
![20210517_004335.jpg](https://cdn.discordapp.com/attachments/565154703139405824/843604772379951124/20210517_004335.jpg)
%end

##### Luftwaffel [Moderator] 05/16/2021 21:44:28
Okay, so first of all, you have wrong variable types. Check the reference manual: [https://www.cyberbotics.com/doc/reference/positionsensor#wb\_position\_sensor\_get\_value](https://www.cyberbotics.com/doc/reference/positionsensor#wb_position_sensor_get_value)

get\_value is double, not int


`@Beginner26798` I suggest you orient yourself on an example controller such as this one
> **Attachment**: [e-puck.c](https://cdn.discordapp.com/attachments/565154703139405824/843605350808027146/e-puck.c)


change and expand it


understand its functionality

##### DDaniel [Cyberbotics] 05/16/2021 21:47:01
```
static double compute_odometry()

{
    WbDeviceTag ps[2];
    char ps_names[2][10] = { "ps0", "ps1"};

       for (i = 0; i < 2; i++) {
        ps[i] = wb_robot_get_device(ps_names[i]);
        wb_distance_sensor_enable(ps[i], TIME_STEP);
}

    int l =  wb_position_sensor_get_value('ps0');

    int  r =  wb_position_sensor_get_value('ps1');


    // distance covered by left wheel in meter
    double dl = l / ENCODER_RESOLUTION * WHEEL_RADIUS;

    // distance covered by right wheel in meter
    double dr = r / ENCODER_RESOLUTION * WHEEL_RADIUS;

    // delta orientation
    double da = (dr - dl) / AXLE_LENGTH;

    X = X + (((dr + dl) / 2) * cos(da));
    Y = Y + (((dr + dl) / 2) * sin(da));

    // printf("X: %3.3f m | Y: %3.3f m | D: %3.3f\n", X, Y, da);

    // printf("estimated change of orientation: %g rad.\n", da);

    return da;
}
```

the brackets `{}` here make no sense, and you can't access the array `ps`, using `'ps0'`, but instead using `ps[0]`. Like I said before already, most of what you want to do is in the tutorial-4

##### Beginner26798 05/16/2021 21:47:46
I'm using this one actually and my robot is just going forward


Ok I'll see what I'll get sorry for bothering I'm new to webots

##### Luftwaffel [Moderator] 05/16/2021 21:48:37
Tutorials are your friend :). Try to do them first and understand them

##### DDaniel [Cyberbotics] 05/16/2021 21:48:50
if you're not comfortable with c, you can use other languages like python or matlab

##### Beginner26798 05/16/2021 21:49:39
The issue that I'm low on time and I'm using webots to simulate my university project that's why I'm not taking my time in reading tutorials

##### Luftwaffel [Moderator] 05/16/2021 21:50:14
Is c as a programming language demanded by the professor?


You'll save lots of time using Python. Much quicker and easier to learn than c.

##### Beginner26798 05/16/2021 21:51:19
No but i started with it and i don't have the time to restart using another language

##### Luftwaffel [Moderator] 05/16/2021 21:51:41
believe me, you'll be faster with python

##### Beginner26798 05/16/2021 21:52:31
Actually i tried python first but i didn't now how to run it


Know*

##### Luftwaffel [Moderator] 05/16/2021 21:52:39
no compiling, easier syntax

##### Beginner26798 05/16/2021 21:54:24
Is it possible that you can help me to do the code personally?

##### Luftwaffel [Moderator] 05/16/2021 21:54:44
pm me

##### Daemongear 05/16/2021 21:55:52
hey `@Luftwaffel` sorry for the delay, I didn't notice the ping. I'm using ROS, and currently I'm using the standard ROS controller, as provided in the tutorials. I've advanced a bit in my search, and if I'm not mistaken, I should be able to remap the same controller that I have for RViz to the webots data. (I am also using an auto generated package from a Fusion360-urdf exporter, which provides launch files for RViz, including a basic controller and such.)

##### Luftwaffel [Moderator] 05/16/2021 21:58:11
`@Daemongear` when the simulation is running, do a` rostopic list` and see what is published. If i'm not mistaken, the standard ROS controller should automatically publish all sensors. You just have to select the appropiate topic in Rviiz

##### Daemongear 05/16/2021 23:08:36
yeah, but is rename enough to connect them to RViz if I model it right in  the launch file?

##### Luftwaffel [Moderator] 05/16/2021 23:43:54
verify first that everything gets published


then just open rviz, make all the changes and save the config

##### Daemongear 05/17/2021 00:36:12
did that just fine, played around with the webots controller as well, I can get movement and feedback from the terminal via the rosservices


I do have to enable all the motor sensors first, then I can see them in the rostopic list, as expected


I have a launch file for RViz, with config and the proper project, but the launch file that I have declares a static joint\_state\_publisher source, or rather as I understand it, declares one but leaves it unconnected


so sorry to be responding so late, i have been in a meeting up until now

##### Luftwaffel [Moderator] 05/17/2021 00:38:03
just launch rviz. once it is open, add all the visualization you want. Then save the config

##### Daemongear 05/17/2021 00:38:12
did that too

##### Luftwaffel [Moderator] 05/17/2021 00:38:22
what is the issue then?

##### Daemongear 05/17/2021 00:38:32
having what I do in webots translate to rviz 🙂

##### Luftwaffel [Moderator] 05/17/2021 00:38:46
what exactly do you want to visualiize?

##### Daemongear 05/17/2021 00:39:11
the robot's internal movements (relative to itself, not an environment)

##### Luftwaffel [Moderator] 05/17/2021 00:39:25
so just the joints moving?

##### Daemongear 05/17/2021 00:39:29
the joints being replicated, yeah


Hello, so as Simon (many thanks btw) asked, I'm rephrasing my question, maybe someone can help with advice. I want to publish the WeBots joints to the ROS joint\_state\_publisher. I am using the standard, tutorial ROS controller

so far the only options I've found were A) rewrite parts of the standard controller (which is heavily distributed of course) to get the joints directly published to the right topic or B) write my own node (much simpler) to subscribe to the default topics after enabling the motor sensors, and publish them to the joint\_state\_publisher. this would of course induce some delay.

Any other ideas?

##### harrymcc 05/17/2021 11:41:49
in a tutorial i have seen the code robot.getTime() but would be an equivalent in c?

##### Stefania Pedrazzi [Cyberbotics] 05/17/2021 11:43:49
Yes, the C function is `wb_robot_get_time()`. All the API functions are documented in the Reference Manual:

[https://www.cyberbotics.com/doc/reference/robot#wb\_robot\_get\_time](https://www.cyberbotics.com/doc/reference/robot#wb_robot_get_time)

##### harrymcc 05/17/2021 11:45:04
sorry, i dont know how i missed that. thank you

##### h.sciascia 05/17/2021 14:46:50
Hello everyone !

I have two robots with the same architecture and node names.

For exemple, I have two RotationalMotor called "motor 0", two "motor 1", two "motor 2" etc



I would like to create two list which refers to the id of my two robots motors architecture and be sure that I do not get the same motor



I would like to do something like this :



`Robot1 = supervisor.getFromDef("Robot1")

Robot2 = supervisor.getFromDef("Robot2")



for link in armChain1.links:

    if 'moteur ' in link.name:

        motor = Robot1.getDevice(link.name)

        motors1.append(motor)

for link in armChain2.links:

    if 'motor ' in link.name:

        motor = Robot2.getDevice(link.name)

        motors2.append(motor)`



In the documentation we can use getDevice for the robot but i get the error : "AttributeError: 'Node' object has no attribute 'getDevice'"

Thank in advance !

##### Stefania Pedrazzi [Cyberbotics] 05/17/2021 15:14:59
First, from a controller you can only access devices in the current robot and not devices from other robots.

Then, the `getDevice` is a method of the `Robot` object but your `Robot1` retrieved using the Supervisor API has the `Node` type.

So you should rather call `supervisor.getDevice` to retrieve the devices defined in the Robot node associated with the current controller.

##### h.sciascia 05/17/2021 15:17:27
Ok so I cannot use one controller for two same robots okok

Thanks

##### Stefania Pedrazzi [Cyberbotics] 05/17/2021 15:18:32
You can use the same controller for multiple robots, but multiple instances of the same controller will be started

##### h.sciascia 05/17/2021 15:20:06
ok I will do two controller then if I cannot use something like Node.getDevice("#")

Thx

##### Stefania Pedrazzi [Cyberbotics] 05/17/2021 15:23:27
You don't need the Supervisor API to identify the robot, you could for example set a unique name or set some value in the `Robot.customData` field or use the Supervisor simply to get the DEF name of the `supervisor.getSelf().getDef()` node but without using the returned node for getting the devices.

##### h.sciascia 05/17/2021 15:24:19
Oh okok I will try that ! Great

##### jmarsik 05/17/2021 16:22:01
Hello guys, is there any way to have a distance sensor that interacts with Solids (not their bounding boxes) and does not take into account the color (like the infra-red type)?

##### Luftwaffel [Moderator] 05/17/2021 20:08:11
`@jmarsik` [https://www.cyberbotics.com/doc/reference/distancesensor#distancesensor-types](https://www.cyberbotics.com/doc/reference/distancesensor#distancesensor-types)


I believe they all use the shape, not bounding box, as they are visual sensors and use GPU


but i'm not 100% sure

##### harrymcc 05/17/2021 20:26:15
WARNING: Forward: The process crashed some time after starting successfully.

WARNING: 'Forward' controller crashed. Is this crash likely to do dodgy C code. Just in the console it didnt come up any issues

##### DDaniel [Cyberbotics] 05/17/2021 20:29:34
`@jmarsik` Laser/sonar and generic interact with `boundingObject`, infra-red with the solid itself. But since you can make the `boundingObject` as arbitrarily complex as you need it to be, the distinction shouldn't matter much. Can you explain more why you need it to interact with the solid instead of `boundingObject`? As for colored surfaces, only the infra-red is affected by it.


`@harrymcc` remembered to put `wb_robot_init();` and `wb_robot_cleanup();` ?

##### harrymcc 05/17/2021 20:39:05
yeah all thats in.  These lines seem to cause the issue   (not in order of code


``` int linear_velocity = wheel_radius * MAX_SPEED;
  int duration_side = length_side/linear_velocity;                  if (current_time > start_time + duration_side) {
 left_speed = 0;
 right_speed = 0;
 }
```

##### DDaniel [Cyberbotics] 05/17/2021 20:44:32
hard to say from that, can you post the file?


`@harrymcc` `duration_side` isn't defined


or rather, `linear_velocity`, at least in the full code

##### harrymcc 05/17/2021 20:53:02
yeah tbh  i have really confused my self messing about. That what i sent wasnt the code that would compile and crash. Sorry for messing you about


is it okay if i upload it again. Got to same point i was on about

##### DDaniel [Cyberbotics] 05/17/2021 21:11:15
sure

##### harrymcc 05/17/2021 21:12:09
thank you
> **Attachment**: [Forward.c](https://cdn.discordapp.com/attachments/565154703139405824/843959101787996170/Forward.c)

##### DDaniel [Cyberbotics] 05/17/2021 21:25:59
`@harrymcc` `wheel_radius` should be a double, if you set it as int it assigns it zero, not 0.025. Hence, also `linear_velocity` becomes zero and `duration_side` is infinity. Similarly, `wb_robot_get_time()` also returns a double, not a int. You should recheck all the types of your variables

##### harrymcc 05/17/2021 21:28:32
Okay thanks for the help I'll take a look. Got it going now youre a life saver. Need to go back to c basics. Doing 1st year electrical engineering so i have only known C for last few months on and off

##### SeanLuTW 05/18/2021 02:53:27
I have a `MFFloat` field with 6 values, how can I access the 0th index in my PROTO?

##### Olivier Michel [Cyberbotics] 05/18/2021 06:17:52
You should use `wb_supervisor_node_get_proto_field` to get a handler to your field and then `wb_supervisor_field_get_mf_float` with `index=0` on it.

##### SeanLuTW 05/18/2021 06:21:44
I want to use these values in my PROTO instead of controller.


I found some examples here. ([https://github.com/cyberbotics/webots/tree/master/tests/protos/protos](https://github.com/cyberbotics/webots/tree/master/tests/protos/protos))

##### Olivier Michel [Cyberbotics] 05/18/2021 06:24:16
I see. You should then be able to access it as a Lua array. Note however that the first index in a Lua array is 1, not 0.

##### SeanLuTW 05/18/2021 06:26:02
Yes, the problem solved! But I wonder which language is PROTO file used, VRML or Lua?

##### Olivier Michel [Cyberbotics] 05/18/2021 06:27:23
It's the PROTO format (inspired from VRML97) to which you can apply Lua templating.

##### TheGiant 05/18/2021 07:29:01
Hello everyone,

I'm working with hydraulic actuators, which are commanded using a velocity. Their are really strong, hence their is two behavior : 1) when a velocity is requested, it's reached almost immediately (their is a internal regulation in it, which is very good, and I don't want to simulate it). I've tweaked the P[ID] value to get something nice, and also change the max force to something very large, which is what the actuator could do. If the requested velocity is positive (resp negative), then whatever the load the actuator will not output a negative (resp positive) speed. At worst it will not move.

2) When the velocity requested is 0, then the actuator will never move, (independently of the load), because the circuit in which the oil flow is closed.

For the moment, I'm using a linear motor, which seems to work fine, but not for a speed of 0 (the actuator retract because of the gravity and the load), which is actually logical.

Do you have any thought on that ?

I thought about using connector to "lock" the actuator when speed == 0, but its not pretty.

I thought also about adding a "lock" option to "transform" the motor in mechanical link when speed == 0.

##### Olivier Michel [Cyberbotics] 05/18/2021 07:33:24
Why not switching to position control instead of velocity control when velocity is 0?

##### TheGiant 05/18/2021 07:36:21
Yes, but I don't know which position should be used, and I'm not huge fan of adding a position sensor just for that (which don't exist in reality). Additionally, it will continue to cost time, because the solver will continue to regulate if some perturbation push it out of position, is it ?

##### Olivier Michel [Cyberbotics] 05/18/2021 07:39:13
Yes...

##### jmarsik 05/18/2021 08:46:16
That's right, but complex bounding objects really slow down physics computation and also make it unstable sometimes. Or at least that's my experience. But I will try it because it seems like the only option right now. Maybe another is to create a pull request and try to add a property like `red color sensitivity` that would tune this sensitivity by a factor (0..1) for infra-red sensors? But I am not confident if I have enough experience to do that.

##### TheGiant 05/18/2021 08:48:52
`@Olivier Michel` fyi, devil strike again : I'm been stuck on "Finalizing node" (oscillating weirdly between 19% and 99%) when creating (and so opening) a new project directory...Add to reboot my PC.


Is their any logs produced during file opening ?


And here we go again, but this time, stuck on "Opening world file" at 99%. SIGKILL send, htop confirm webots shutdown, but back in gui the windows is still here, screen frozen, with mouse cursor moving but messed up...

I'm using a webots version built with "debug", but I don't expect to be the issue...

##### Olivier Michel [Cyberbotics] 05/18/2021 09:09:21
Did you try to debug it with gdb?

##### TheGiant 05/18/2021 09:25:15
I'm not, actually, that would be interesting.


I'm currently rebuilding it on master with "release" makefile, and see if it change anything, I wil give gdb a try next


Well, that didnt go according to the plan :/ Master + release => same issue (actually, I don't even see the "loading world" popup)

Rebuild with "debug", on the branch makefile-improvement (to get -ggdb flags) did nothing more... gdb doesn't seems to catch anything. (but I can see m gdb output, cause screen freeze...)

I think I will reinstall ubuntu, and give it another try. Also I continu to also blame my pc on that one, I've got very strange stuff in the past

At least it's consistant : run webots from command line with a fresh empty world, cause it to crash each time

##### jmarsik 05/18/2021 12:24:36
Ok, I tried to implement it and submitted a PR 🙂 [https://github.com/cyberbotics/webots/pull/3077](https://github.com/cyberbotics/webots/pull/3077)

##### ShuffleWire 05/19/2021 08:24:20
I've made progress ! 🙂 Trying to reinstall Ubuntu doesn't change the issue (however, now I could say that python3-dev and python-is-python3 are mandatory to build Webots (and docs) on a fresh Ubuntu install)

I've added info to the bug, it's nicely reproducible,  and I found the faulty line. Updated to related issue [https://github.com/cyberbotics/webots/issues/3065](https://github.com/cyberbotics/webots/issues/3065) . Hope it might help...

##### Olivier Michel [Cyberbotics] 05/19/2021 13:09:57
Unfortunately, since we cannot reproduce this bug on our machines, you will have to continue to investigate on yours.

##### h.sciascia 05/19/2021 14:32:35
Hello everyone !

I  have a problem when I try to use PyQt5 with webots

The application seems to do not find PyQt



If I uninstall PyQt everthing is ok



Do you have any clue ?

##### ftsell 05/20/2021 20:42:18
Hey folks,



I currently have the problem that webots starts lagging like crazy after resetting a world.

- Everything runs completely fine and smooth before the reset

- I don't have any controllers running

- I use this world: [https://github.com/bit-bots/wolfgang\_robot/blob/master/wolfgang\_webots\_sim/worlds/1\_bot.wbt](https://github.com/bit-bots/wolfgang_robot/blob/master/wolfgang_webots_sim/worlds/1_bot.wbt) (you can set the controllers to void)

- I was able to debug that our custom robot proto: [https://github.com/bit-bots/wolfgang\_robot/blob/master/wolfgang\_webots\_sim/protos/Wolfgang.proto](https://github.com/bit-bots/wolfgang_robot/blob/master/wolfgang_webots_sim/protos/Wolfgang.proto) seems to somehow be causing the problem because the simulation survives a reset when the robot is not in it.

- I am using `Webots version: R2021b Nightly Build 11/5/2021 1585fa928cccee28dbab882d925361a21369e727`



If anyone has any idea on how to debug this further I'd be happy to! Although imho it seems to be at least partially a webots internal problem since the problem only occurs after resetting the simulation.

##### mmoralesp 05/20/2021 21:45:03
Hi everyone, Im using the epuck robot to simulate an enviroment and i want to obtain the position on the enviroment via ROS or other way, does anybody know how to do this? Thanks

##### Luftwaffel [Moderator] 05/20/2021 21:45:47
`@mmoralesp` use supervisor functionality or gps sensor


I downloaded your entire webots\_sim folder and there is many errors.


probably because i'm not on develop

##### lolMan 05/21/2021 08:52:18
I am using webots in ubuntu I am facing this error. I have added circle floor but its not rendering. were sample files are rendering excellently.
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/845222461141155850/unknown.png)
%end

##### DDaniel [Cyberbotics] 05/21/2021 08:56:14
`@lolMan` Hi, it's because there's no light source on your world. Add the `Background` node, or `TexturedBackgroundLight` & `TexturedBackground` nodes for example, or something analogous to it

##### lolMan 05/21/2021 08:58:00
yeah thanks it works.

##### Maurice Faraj 05/21/2021 10:44:04
Hello everyone I’m facing a problem while I’m enabling the camera in my robots can anyone help me please



%figure
![image0.jpg](https://cdn.discordapp.com/attachments/565154703139405824/845251260944744508/image0.jpg)
%end
%figure
![image1.jpg](https://cdn.discordapp.com/attachments/565154703139405824/845251261347004416/image1.jpg)
%end

##### gian 05/21/2021 14:58:53
hey guys, im having a problem to align the wheels in my proto. they are running, but with a little pull to the right (the side that is misaligned)! does someone know how to make them with the same alignment on both sides, please?

##### DDaniel [Cyberbotics] 05/21/2021 19:22:57
Can you post the relevant part of the proto? Hard to say without

##### ftsell 05/21/2021 19:26:25
your controller is not valid python syntax. that's why it exits with an error exit code (1 in this case) and throws indentation errors.



If you want to have functions which don't have any implementation yet you can use the `pass` keyword like the following:

```
class MyClass:
    def my_function(self):
        pass
```

##### gian 05/21/2021 22:04:23

%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/845421798257328158/unknown.png)
%end

##### スカイツー 05/22/2021 06:25:11
Hello everyone, Have you completely solved the camera lens distortion problem?



It seems that mainly radial distortions (radialCoefficients) have not been resolved.



[https://github.com/cyberbotics/webots/pull/2961](https://github.com/cyberbotics/webots/pull/2961)

##### Skev 05/22/2021 23:01:43
Hello, is it possible to move an object in the scene (like a can) that is not directly connected to a robot, programmatically, from the robot controller ? (for a project using object detection)

##### Luftwaffel [Moderator] 05/22/2021 23:02:24
yes, using the supervisor functionality


[https://cyberbotics.com/doc/reference/supervisor?tab-language=python](https://cyberbotics.com/doc/reference/supervisor?tab-language=python)


the robot needs to be set to supervisor = True in the scene tree for it to work

##### Skev 05/22/2021 23:03:12
ok thanks I'm going to try that


Yes it works thank you

##### Seedow 05/23/2021 22:29:52
Hi!

Is there a way to programmatically build a world? Preferably from MATLAB

##### DDaniel [Cyberbotics] 05/23/2021 22:31:00
<@288787843042770945> Hi, you can use a supervisor to spawn the objects of the world yes

##### Seedow 05/23/2021 22:34:27
Thanks for your reply. Is it possible to do that without running the whole program? I wanted to generate a world file that could be later used for simulation.

##### Max\_K 05/24/2021 13:33:33
Does anyone have an idea why i get just one camera\_info message on the rostopic when starting webots? I m trying to use apriltags in webots with ros2. I m using robotino3 and his webcam. In the header the stamp is also missing. I know its a latched topic but i don't know how to use it.

header:

  stamp:

    sec: 0

    nanosec: 0

  frame\_id: ''

height: 480

width: 640

distortion\_model: plumb\_bob

d:

##### harrymcc 05/24/2021 14:13:35
double current_time = wb_robot_get_time(); is there anyway i can reset this current_time to 0 with code?
``` if ( current_time > start_time + time + duration_side){
 left_speed = MAX_SPEED;
 right_speed = 0;
 }
 if ( current_time > start_time + time * 2){
  left_speed = MAX_SPEED;
 right\_speed = MAX\_SPEED;
``` currently im * with each turn but i want to find a way to turn it into a function that can be repeated instead of timesing

##### DDaniel [Cyberbotics] 05/24/2021 14:23:57
Not without resetting the entire simulation. What you can do instead is to track the number of timesteps that have elapsed (at every call of `wb_robot_step`) instead of relying on simulation time

##### harrymcc 05/24/2021 14:28:27
okay thanks, so would basically change the current\_time to what ever i declare wb\_robot\_step as

##### DDaniel [Cyberbotics] 05/24/2021 14:38:55
Depends what you're making, there's multiple options. You can keep a counter that you increase at every call of `wb_robot_step` (in the infinite loop for example) and change the program flow based on the counter value, or you call `wb_robot_step` by providing as argument the duration it has to similate, like `wb_robot_step(XX)` which will simulate the next XX ms.

##### harrymcc 05/24/2021 14:39:43
its just a simple 1 metre square


```double current_time = wb_robot_step(432);
 left_speed = MAX_SPEED;
 right_speed = MAX_SPEED;

 if (current_time > start_time + duration_side){
 left_speed = MAX_SPEED;
 right_speed = 0;}
 if (current_time > start_time + duration_side + turn_time  ){
  left_speed = MAX_SPEED;
 right\_speed = MAX\_SPEED;
``` so something like that?

##### DDaniel [Cyberbotics] 05/24/2021 14:49:02
No, like

```
action A

wb_robot_step(duration_action_A)

action B

wb_robot_step(duration_action_B)
```

##### harrymcc 05/24/2021 15:31:33
```  while (wb_robot_step(TIME_STEP) != -1) {
    left_speed = MAX_SPEED;
 right_speed = MAX_SPEED;
 wb_robot_step(5000);
 left_speed = MAX_SPEED;
 right_speed = 0;
  wb\_robot\_step(10000);
``` think i have got hang of it nearly however one last question if you dont mind so after 15 second in spins on the spot but it doesnt do the first action. Am i meant to separate these further

##### DDaniel [Cyberbotics] 05/24/2021 15:35:02
Why did you keep the infinite while loop? Doesn't make much sense to mix the two.

##### Ilya Ryakin [Starkit] 05/24/2021 15:35:17
Hello!

##### harrymcc 05/24/2021 15:37:07
tbf im not sure im just doing some messing about because i have never really used the robot\_step and forgot aha

##### DDaniel [Cyberbotics] 05/24/2021 15:38:23
Or  you want to have it run around the square multiple times? If so then sure you can have a `while(1)` around  the sequence

##### harrymcc 05/24/2021 15:40:20
no sorry it literally needs to go around once. What i mean is so when i added 1 timestep it did after 5 seconds i added the second set of instruction which was 10 seconds but instead of doing it in order it added the 5 seconds and 10 seconds together and only did the last step which has confused me abit

##### DDaniel [Cyberbotics] 05/24/2021 16:02:50
Sorry I didn't understand much, but it could be due to the while loop messing things up. From what I understood you want to do, all you really need is something like:

```
while(1){ // or just do 4x times

action_go_straight

wb_robot_step(how_long_go_straight)

action_turn_on_itself

wb_robot_step(how_long_turn)
}
```

##### harrymcc 05/24/2021 16:04:12
Right that looks alot better actually. I just couldn't get my head around it at all. Thank you for the help anyways I  appreciate it alot

##### insaanimanav 05/25/2021 06:38:11
hi , so I had a .wbo file which was an object made by another team member of mine


how do I import this object into my enviroment and use it ?

##### Darko Lukić [Cyberbotics] 05/25/2021 07:38:38
You can use the `wb_supervisor_field_import_mf/sf_node` Supervisor functions:

[https://cyberbotics.com/doc/reference/supervisor#wb\_supervisor\_field\_import\_mf\_node](https://cyberbotics.com/doc/reference/supervisor#wb_supervisor_field_import_mf_node)

or simply copy/paste the content of the .wbo file into your world (.wbt) file.

##### insaanimanav 05/25/2021 09:03:22
also I had another small question , I am trying to use the distance sensor in my robot


but whenever I try see the value of the distance sensor by using `print(ds.value())`


I get nan


how else do I see the current value being read by the sensor ?


This is my entire controller code that I am using for a robot which just has one child , distance sensor
```from controller import Robot
from controller import LED
import time

robot = Robot()

ds = robot.getDevice("distance sensor")
ds.enable(64)
print((ds.getValue()))
```

##### Darko Lukić [Cyberbotics] 05/25/2021 09:10:25
You are missing the `step()`:

```py
from controller import Robot

robot = Robot()

ds = robot.getDevice("distance sensor")
ds.enable(64)
robot.step(64)
print(ds.getValue())
```

##### insaanimanav 05/25/2021 09:10:58
shit yes


thanks


saved the day

##### h.sciascia 05/25/2021 11:37:22
Hello ! Does anyone use a personalised physics plugin ?

I would like to get the position of my contact point with something like this : dWebotsConsolePrintf("%f, %f, %f", &contact[i].geom.pos[0], &contact[i].geom.pos[1], &contact[i].geom.pos[2]);

But it return only 0.000000, 0.000000, 0.00000 ...



If you know how can I get those position between a robot and the environnement it would be perfect !



Have a nice day 😉

##### Tahir [Moderator] 05/25/2021 13:08:03
Hello I am trying to simulate a tracked robot, imported from Blender
%figure
![robot.png](https://cdn.discordapp.com/attachments/565154703139405824/846736374548004884/robot.png)
%end


Everything so far seems OK but I am stuck on how ti create joints in Webots?


Track of the robots looks like this:
%figure
![track.png](https://cdn.discordapp.com/attachments/565154703139405824/846736631075700796/track.png)
%end


The motor(in below figure) powering the robot on each side is connected to the yellow parts in the above figure.
%figure
![motor_selected.png](https://cdn.discordapp.com/attachments/565154703139405824/846736877301006336/motor_selected.png)
%end


This motor rotates, which is coupled to the yellow part of the above figure. The assembly of the robot rotates(in the figure below) which rotates the tracks(second figure from above)


There are two adjustments wheels to tighten the tracks as desired. They rotate normally with the tracks.
%figure
![support_wheels.png](https://cdn.discordapp.com/attachments/565154703139405824/846737540723900456/support_wheels.png)
%end


I am not able to convert this mechanism to Webots anyone who can comment on how to create joints so that the tracks with all other assmebly and adjustments wheels rotates?


Thank you so much in advance for any suggestions

##### DDaniel [Cyberbotics] 05/25/2021 17:13:46
`@Tahir` Hi, have you looked into the sample world `track.wbt`? You will need to use the `Track` and `TrackWheel` nodes. [https://cyberbotics.com/doc/reference/track](https://cyberbotics.com/doc/reference/track)

##### Blindera 05/26/2021 00:51:15
Hello i have this issue idk how can i solve.. i'm using linux nightly build version and im new about linux too
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/846913339787313172/unknown.png)
%end

##### Luftwaffel [Moderator] 05/26/2021 02:12:51
you are trying to change a default controller


just hit "OK", and it will create a copy of the controller in another location

##### Blindera 05/26/2021 02:17:24
But if i create a copy i cant simulate anymore.. these controller was created for my robo team and my teamates build The project like this and o cant do at The same way

##### Luftwaffel [Moderator] 05/26/2021 02:18:17
just copy the project to your documents and open the world there

##### Blindera 05/26/2021 02:18:54
I Will try thank u

##### James Le Poidevin 05/26/2021 07:39:30
Hello, I am trying to simulate large terrain (multiple Km) using precise elevation grids and i was wondering if it's possible to load 'chunks' of the elevation grid(like in minecraft) around a robot to help the simulation?

##### oroulet [Premier Service] 05/26/2021 13:44:38
box\_node.getPosition() returning (nan, nan, nan) in nightly, does that say anything to anyone? same code return the position in stable release


same with getOrientation()


is that a nightly bug or an API change?

##### Stefania Pedrazzi [Cyberbotics] 05/26/2021 14:11:40
What is the `box_node` a node visible in the scene tree, a PROTO internal node or a base node?


Which nighlty are you testing? R2021b or R2021a-rev1?


We fixed an issue in R2021b with the `getPosition` function. It would be good if you could provide an example where this function is not working as you expect.

##### Darko Lukić [Cyberbotics] 05/26/2021 14:36:27
We added `wb_supervisor_node_get_pose`:

[https://github.com/cyberbotics/webots/pull/2932](https://github.com/cyberbotics/webots/pull/2932)

but we the `wb_supervisor_node_get_position` should still work.


You mean levels, something like this?

[https://ignitionrobotics.org/api/gazebo/2.10/levels.html](https://ignitionrobotics.org/api/gazebo/2.10/levels.html)

##### James Le Poidevin 05/26/2021 14:39:18
Yes i can't see the images but it sounds like that


Is it already in webots ?

##### bingdong 05/26/2021 16:14:16
Hi! For the LED node that is non-gradual (gradual parameter is False and multiple colours can be assumed by the Light node), can the intensity be modified from the controller? Documentation specifies it can be done for a monochromatic LED, but nothing is mentioned in case of multicolor LED.

##### Darko Lukić [Cyberbotics] 05/26/2021 16:28:44
Unfortunately not, but you can use Supervisor to delete and elements in the scene

##### Matt Estrada 05/26/2021 16:58:43
Hello! I am interested in aquatic simulation of an amphibious robot we are developing in the Biorobotics Lab at EPFL. We have implemented this in the past via `Fluid Nodes` and `Immersion Properties` .



We are curious about a more complex interaction than  a single direction of fluid flow-- perhaps to implement flow along a "river" that might curve and simulate "flow" of this fluid in different directions, which could lead to some interesting motion planning problems.



I notice `streamVelocity` as part of a [Fluid]([https://cyberbotics.com/doc/reference/fluid](https://cyberbotics.com/doc/reference/fluid)) node seems to implement a single direction of flow. Do you know if anyone has tried to vary this streamVelocity, or any node's property, while the simulation was running? If so, this might allow us imitate a water flow that changes with respect to the robot's position in the map.



Not sure if I'm missing a higher level API for changing node properties in general that I might be able to use to attain this desired effect...

##### robert.hobbs 05/26/2021 18:12:56
Matt,  I was just reviewing the discord channel before asking the same question.  I need to model an AFV in a stream and it would be beneficail to include at least varying water velocities if not turbulent flows. I will follow your thread with interest and let you know if I find an answer beforehand.  Thanks

##### mclzc 05/26/2021 19:03:03
Hi, I was hearing this interview

[https://www.theconstructsim.com/webots-robot-simulator-ros-olivier-michel/](https://www.theconstructsim.com/webots-robot-simulator-ros-olivier-michel/)



and at minute 9:30 Oliver talks about preconfigured sensors. Is there an available list of these pre-configured sensors? I'd like to know of there are rgbd cameras configured like the Intel Realsense ones.

##### pnaraltnsk 05/26/2021 19:29:49
Hi, I am using Nao robot’s distance sensor and I want to disable the sensor for a specific object. Is that possible? Do you have any suggestions of how to do it?

##### mclzc 05/26/2021 21:21:20
Where could I find more information on how to translate Gazebo URDF to PROTO files?



I know and have used the `xacro2proto` script (which underneath uses `urdf2webots`),  but I don't really know what did it do and to what extent did it work. I see the Gazebo robot that I'm using being rendered in Webots... but I'm completely clueless of if it's a complete and successful translation into the PROTO format. The first question that comes to my mind is, "are the sensors correctly defined in the PROTO file now?"



In this Github question ([https://github.com/cyberbotics/urdf2webots/issues/112](https://github.com/cyberbotics/urdf2webots/issues/112)) I have found the first piece of information that I have not seen around in the Webots tutorials that I've come across: `Why not introduce a <webots> xml tag instead of parsing the <gazebo> tags?`. Now I know that the script is indeed gazebo-tags aware and will look into the code, but would be nice to know what is it capable of.

##### Olivier Michel [Cyberbotics] 05/27/2021 05:50:36
Here the list of pre-configured sensors in Webots: [https://cyberbotics.com/doc/guide/sensors#commercially-available-sensors](https://cyberbotics.com/doc/guide/sensors#commercially-available-sensors). You can use a Kinect if you need a RGBD camera, or implement a Intel Realsense from basic sensors:  RGB camera + range finder camera: [https://cyberbotics.com/doc/reference/camera](https://cyberbotics.com/doc/reference/camera) + [https://cyberbotics.com/doc/reference/rangefinder](https://cyberbotics.com/doc/reference/rangefinder).


You can use the supervisor API to change any field of any node (including the `streamVelocity` field). See this example to change a field from a supervisor: [https://cyberbotics.com/doc/guide/supervisor-programming#setting-the-position-of-robots](https://cyberbotics.com/doc/guide/supervisor-programming#setting-the-position-of-robots)


Turn that object into a Transform (instead of a Solid)?


The best way is probably to study the source code the `urdf2webots` script, study the content of the URDF and PROTO files to determine how successful the conversion was. This `urdf2webots` script is constantly evolving and improving, but still has some limitations for some specific cases, you are welcome to contribute to improve it if you spot any problem.

##### bingdong 05/27/2021 06:22:30
Hi! For the LED node that is non-gradual (gradual parameter is False and multiple colours can be assumed by the Light node), can the intensity be modified from the controller? Documentation specifies it can be done for a monochromatic LED, but nothing is mentioned in case of multicolor LED.

##### Olivier Michel [Cyberbotics] 05/27/2021 06:24:11
Yes, simply setting a RGB color with less intensity (lighter or darker) should work.

##### bingdong 05/27/2021 06:25:37
But these changes would be to colour and not the intensity parameter?

##### Olivier Michel [Cyberbotics] 05/27/2021 06:25:53
Yes.

##### bingdong 05/27/2021 06:26:06
Alright, thanks!

##### oroulet [Premier Service] 05/27/2021 07:00:32
using 2021b

the node is an instanciated proto.

getting the relative position works fine with box\_node.getField("translation").getSFVec3f()

`

getPose() works also (What is getPose btw, the same as getPosition AND getOrientation()?)


box\_node.getPosition()

[nan, nan, nan]

(Pdb) box\_node.getPose()

[1.0, 0.0, 0.0, 1.455, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 1.0, -1.5, 0.0, 0.0, 0.0, 1.0]

##### Stefania Pedrazzi [Cyberbotics] 05/27/2021 07:02:22
Ok, could you please open an issue on the Webots GItHub posting your PROTO node? This way we will be able to inspect the issue

[https://github.com/cyberbotics/webots/issues/new?assignees=&labels=&template=bug\_report.md](https://github.com/cyberbotics/webots/issues/new?assignees=&labels=&template=bug_report.md)

##### oroulet [Premier Service] 05/27/2021 07:04:26
I will try but as usual our model is big so we need to simplify it before sending


`@Stefania Pedrazzi` what is node.getPose() also the global position? I cannot find it in documentation

##### Stefania Pedrazzi [Cyberbotics] 05/27/2021 07:06:14
Yes, it is the global world position and orientation of the node. Here is the R2021b documentation:

[https://www.cyberbotics.com/doc/reference/supervisor?version=develop#wb\_supervisor\_node\_get\_pose](https://www.cyberbotics.com/doc/reference/supervisor?version=develop#wb_supervisor_node_get_pose)

##### oroulet [Premier Service] 05/27/2021 07:06:51
ah OK this is a new one. Good

##### Greemfy 05/27/2021 09:33:00
Hi guys👋  I hope you can help me with my (probably far too easy to solve) question. I´m using python and got my Lidar sensor working. Right now I calculate the coordinates of every point with the values of getRangeImage and the angular position of the lidar. It´s painfull 😂  To my suprise there is the easy solution getting the coordinates from LidarPoint.*. But I can´t figure out how to access those values. In the WB doc theres something written about @property. Never worked with that. If I want to get one coordinate of a point it says "<property object at 0x000002990325B9A0>". Thank you so much!

##### Darko Lukić [Cyberbotics] 05/27/2021 11:27:12
Can share the part of the code in which you are accessing the point data?

##### James Le Poidevin 05/27/2021 13:23:19
OK i thought i would have to try that. Do you think it would be possible to use one elevation grid or will i have to use multiple one that i load one by one ?

##### Darko Lukić [Cyberbotics] 05/27/2021 13:57:03
It would probably be easier to have multiple elevation grids

##### mclzc 05/27/2021 14:53:12
Thanks for your answers `@Olivier Michel`

##### Jhon mathew 05/27/2021 16:50:57
hello, I have used camera recognition in webots using python. I did everything according to the resources but I have 2 major issue. 1. values is updating only 0

2.  It says the index exceeds the list....







I need some basic pre-build code in *Python*  atleast to get id using camera recognition... Other things I can manage with that reference.

##### Matt Estrada 05/27/2021 19:00:17
Thank you for the very quick and helpful response! That should accomplish what I am looking for!

##### Robot 05/27/2021 19:53:30
I have an environment where i need to recognize an object (Wooden Box) and reach that location. I am using E-Puck for my project. I got how to recognize the object which is inbuilt. Not sure what logic should i follow once i detect it.

##### Luftwaffel [Moderator] 05/27/2021 23:07:16
`@Robot` [https://cyberbotics.com/doc/reference/camera?tab-language=python#camera](https://cyberbotics.com/doc/reference/camera?tab-language=python#camera)


you can enable recognition

##### Jhon mathew 05/28/2021 02:13:25
please someone give basic code in python..  I need to get information about recognised object.

##### Luftwaffel [Moderator] 05/28/2021 02:14:16
recognitionObjects = camera.getRecognitionObjects()

    if len(recognitionObjects) > 0:

        recognitionPosition = recognitionObjects[0].get\_position()

        recognitionSize = recognitionObjects[0].get\_size()


` camera.getRecognitionObjects()` returns a list, so when there is no recognized objects, the list is empty


objects need their recognition color field defined in order to be detected

##### Jhon mathew 05/28/2021 03:07:57
thank you. ill try that now


Object is detecting by the camera. I have done some minor mistake.. thank you

##### Robot 05/28/2021 04:31:44
Thanks Simon, but I think Epuch does not has Recognition node. Because when i do camera.hasRecognition(), it gives false. Can you guide me how to add one.

##### Luftwaffel [Moderator] 05/28/2021 04:32:19
you have to enable recognition mode


use the api documentation


camera = robot.getDevice('camera')

camera.enable(timeStep)

camera.recognitionEnable(timeStep)


something like that

##### Robot 05/28/2021 05:03:46
Yeah i tried that but its giving me below error: Error: wb\_camera\_recognition\_enable() called on a Camera without Recognition node.


I tried this


camera = robot.getDevice("camera")

    camera.enable(time\_step)

    camera.recognitionEnable(time\_step)


where robot is EPuck robot

##### Luftwaffel [Moderator] 05/28/2021 05:22:53
you might have to check the camera node, or maybe add a recognition color to the bot and or the camera

##### Cyber Police Officer 05/28/2021 10:19:58
I've tried to search the documentation, but didn't find any information about this. Is it possible, using the propeller node, to make a propeller have a different thrust coefficient depending on the rotation direction?



I know i can workaround using two propellers, facing in opposite directions, having each the correct thrust coefficient, but was wondering if there were a cleaner way.



Thank you

##### Beginner26798 05/28/2021 13:06:47
Hi.. is there any helpful tutorials to help me if i want to make a robot that follows the recognised object


Python language


??

##### Darko Lukić [Cyberbotics] 05/28/2021 14:51:46
If you set a negative velocity it doesn't invert the thrust?


[https://github.com/lukicdarkoo/webots-example-visual-tracking](https://github.com/lukicdarkoo/webots-example-visual-tracking)

##### Beginner26798 05/28/2021 15:10:00
Thank you


What's the solution of this
%figure
![20210528_181021.jpg](https://cdn.discordapp.com/attachments/565154703139405824/847854388370079752/20210528_181021.jpg)
%end

##### Cyber Police Officer 05/28/2021 15:20:26
It does. But some propellers have different thrust coefficients depending on the thrust direction

##### Beginner26798 05/28/2021 17:00:52
`@Darko Lukić` ?

##### Robot 05/28/2021 18:18:22
Can anyone tell how to add recognition colors to the WoodenBox in webots

##### Luftwaffel [Moderator] 05/28/2021 21:36:47
`@Robot` you have to convert it to Base Nodes (right click). Then you can add the colors

##### Robot 05/28/2021 21:37:14
Thanks simon. I will try that.


And one more thing I have got the object recognized. And I am not able to understand what is the difference between position and position\_on\_image in the API?

##### Luftwaffel [Moderator] 05/28/2021 21:39:07
read the text under the commands. It explains it


are you working on the vacuum project as well?

##### Robot 05/28/2021 21:39:44
Yeah i read it but not able to understand what it says exactly. I am getting x and y values in that


No I am working on my own college Project

##### Luftwaffel [Moderator] 05/28/2021 21:40:17
> The position\_on\_image and size\_on\_image can be used to determine the bounding box of the object in the camera image, the units are pixels

##### Robot 05/28/2021 21:40:57
Does it give the center of the bounding box of the recognised object?

##### Luftwaffel [Moderator] 05/28/2021 21:41:06
I would assume so

##### Robot 05/28/2021 21:41:11
Okay


and what does just Position gives ?

##### Luftwaffel [Moderator] 05/28/2021 21:41:41
it gives the relative position of the recognized object to the camera


as a sidenote: get\_size() has a bug in the current release, where it returns a integer instead of a float. So you will get the size rounded to the next full meter. Install the the latest nightly build if that is the case for you

##### Robot 05/28/2021 21:44:22
Thanks Simon. This was super helpful

##### Deleted User 05/29/2021 04:05:05
```webots/projects/default/controllers/ros/ros: error while loading shared libraries: libroscpp.so: cannot open shared object file: No such file or directory

WARNING: 'ros' controller exited with status: 127.
```

All I did was create a world , get a robot in and attach the generic 'ros' controller. Is there anything else I have to do ?


hello ?

##### insaanimanav 05/29/2021 08:39:29
How do I create sensors of my own ?


For example I want to create a simple sensor that reads some value of a node in the world , I couldn't find anything in the docs for that

##### Bitbots\_Jasper [Moderator] 05/29/2021 08:47:45
If you have ROS installed try running webots from a terminal where ROS is sourced


What exactly are you trying to read? If you want to know some information about some object in your simulation have a look at the supervisor API. That might already fulfill your requirements

##### bingdong 05/29/2021 08:51:41
`@Beginner26798` You'll have to install the cv2 library to your system. If you have pip installed, open command prompt on windows and type: pip install opencv-python

 [https://stackoverflow.com/questions/19876079/cannot-find-module-cv2-when-using-opencv](https://stackoverflow.com/questions/19876079/cannot-find-module-cv2-when-using-opencv)

##### insaanimanav 05/29/2021 08:55:45
Also one small question how can I add a custom property to something ?


For example I want to have solid which has the custom property of let's say Ph


Maybe humidity too

##### Deleted User 05/29/2021 09:40:29
Thanks I got it.

##### R K gupta 05/29/2021 15:24:12
Does there is any way to add some extra sensors like temperature and PH sensors in webots to analyse the environment around it !like how  do  we get temperature of a particular thing  like environment in  webots ?

##### SHAHRRUCK 05/30/2021 05:18:01
Is there any way to create water pump in webots for irrigation purposes ??

##### viorel\_gheorghe 05/30/2021 21:36:19
Hi guys!


Maybe is an already answer question, but I have not found the proper response 🙂


Is there a way to save the sensor data from a robot (position, gyro, accelerometer) and plot them in excel?

##### Luftwaffel [Moderator] 05/31/2021 01:11:46
`@viorel_gheorghe` you should google that for the programming language that you use. This is not Webots specific

##### viorel\_gheorghe 05/31/2021 05:05:44
`@Luftwaffel`, I'm using Python. I thought there is an in-built feature of the controller since it can print the evolution on the sensors  if selected


But we learn and learn 🙂

##### hanm 05/31/2021 10:28:46
hi, I have met some problem about webots, a create a env which have a ur10e robot and a conveyor belt. I set the ur10e  as a supervisor and I want the ur10e controller can enable a kinect which is a child in the conveyor belt, but I failed to enable it.


my code is :


ur10erobot = Supervisor()



\# Get the time step of the current world.

timestep = int(ur10erobot.getBasicTimeStep())



conveyor\_belt = ur10erobot.getFromDef("CONVEYOR\_BELT")

assert(conveyor\_belt != None)

conveyor\_kinectcolor = conveyor\_belt.getDevice("kinect color")

conveyor\_kinectcolor.enable(int(1000/24))


the error report is :


conveyor\_kinectcolor = conveyor\_belt.getDevice("kinect color")

  File "/usr/local/webots/lib/controller/python27/controller.py", line 1756, in <lambda>

    \_\_getattr\_\_ = lambda self, name: \_swig\_getattr(self, Node, name)

  File "/usr/local/webots/lib/controller/python27/controller.py", line 96, in \_swig\_getattr

    raise AttributeError("'%s' object has no attribute '%s'" % (class\_type.\_\_name\_\_, name))

AttributeError: 'Node' object has no attribute 'getDevice'

##### Stefania Pedrazzi [Cyberbotics] 05/31/2021 10:46:11
It is not possible to control device of another robot, i.e. in your case you cannot controller the conveyor belt devices from the ur10e controller if they are two distinct robots.

Many different solutions exists depending of the specific use case.

One option could to use the Emitter/Receiver mechanism to send a message from the ur10e controller to the conveyor belt controller notifying that the Kinect should be enabled.

##### hanm 05/31/2021 10:55:03
thanks, by the way, I want to know how can  I set two robot 's controller as `extern`  and control it by two progress?

##### Stefania Pedrazzi [Cyberbotics] 05/31/2021 10:55:58
here is the documentation:

[https://www.cyberbotics.com/doc/guide/running-extern-robot-controllers#single-simulation-and-multiple-extern-robot-controllers](https://www.cyberbotics.com/doc/guide/running-extern-robot-controllers#single-simulation-and-multiple-extern-robot-controllers)

##### hanm 05/31/2021 10:57:30
thanks~

##### mmoralesp 05/31/2021 17:40:44
Does anybody know how to output in ros2 the odometry info?

##### R K gupta 05/31/2021 18:28:48
Does any one have any idea how we add some extra sensors like temperature and PH sensors in webots to analyse the environment around it !like a farm environment in  webots ?

##### SHAHRRUCK 05/31/2021 20:33:17
How to display/play videos in webots ??


I am trying Motion class in webots


But I am getting Unexpected end of file as error, How Should I solve this


`from controller import Supervisor`motion = `Motion("C:/Users/Shahrruck/Downloads/water2.mp4")

 video = Motion.play(motion)`

## June

##### Luftwaffel [Moderator] 06/01/2021 01:38:22
Adding "true" extra sensors is difficult, but may be achieved with physics plugins [https://cyberbotics.com/doc/reference/physics-plugin](https://cyberbotics.com/doc/reference/physics-plugin) . You can also try using existing sensors. Camera with object recognition comes to mind. You could store information such as PH and Temp in the recognition color values (RGB, so you have 3 values) [https://cyberbotics.com/doc/reference/camera?tab-language=python#camera-recognition-object](https://cyberbotics.com/doc/reference/camera?tab-language=python#camera-recognition-object)

##### hanm 06/01/2021 03:06:41
hi, I meet a problem when I get camera image in python


the code is :



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/849121847232299008/unknown.png)
%end


but the image  in 23 line is None

##### Luftwaffel [Moderator] 06/01/2021 03:08:22
you have to execute a step before. You can't get an image before you simulated the first step

##### hanm 06/01/2021 03:09:43
it work! thanks 🙂

##### mclzc 06/01/2021 03:10:38
Hi, are you planning to support the parsing of SDF tags, for example <gps>?

##### Darko Lukić [Cyberbotics] 06/01/2021 07:23:41
We plan only to parse what is specified by URDF and for the missing components we plan to introduce a `<webots />` tag:

[https://github.com/cyberbotics/urdf2webots/issues/112](https://github.com/cyberbotics/urdf2webots/issues/112)

##### viorel\_gheorghe 06/01/2021 07:31:50
`@Darko Lukić` If I have a parallel robot, and I need the position and orintatio  of the moving platform (yellow one). I must use an IMU, or there is some other things that I can do


parallel robot
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/849188543557140490/unknown.png)
%end

##### Darko Lukić [Cyberbotics] 06/01/2021 07:33:17
You can use `wb_supervisor_node_get_position` and `wb_supervisor_node_get_orientation`:

[https://cyberbotics.com/doc/reference/supervisor#wb\_supervisor\_node\_get\_position](https://cyberbotics.com/doc/reference/supervisor#wb_supervisor_node_get_position)

##### viorel\_gheorghe 06/01/2021 07:33:59
sexy! it's just a RTFM thing!


thank you, it seems that the supervisor is the way! 👍

##### Ayk 06/01/2021 11:35:23
Hey there,

I'm working with webots and Nao and trying to get it to move for x distance.

What do you think is the best approach to do this (im new to webots).

Just using the motion file and doing the forward motion for a certain time (dependend on my distance)? Or is there a better approach ?

##### Luftwaffel [Moderator] 06/01/2021 22:18:16
`@Ayk` you can turn the wheels an exact angle. Together with its radius, you can calculate the distance.

##### Kirlin 06/02/2021 02:35:13
Hi everyone, can you help me with a question ?

I have a custom controller linked with ros, that use as "extern", and I'm trying to make a Supervisor, so it will be more simple to reset the position of the robot when it falls, but I've read all the documentation and tried a lot of things, but I had no progress.

Do you guys have any suggestion ?

##### Luftwaffel [Moderator] 06/02/2021 02:35:51
The robot has to be a supervisor (checkbox in the scene tree)


`from controller import Supervisor` instead of Robot

##### Kirlin 06/02/2021 02:36:52
yep, I've done that


but I capture the robot node like self.natasha = Robot()


and then I operate self.natasha with all the functions


when I import Supervisor


how can I capture the Robot node ?

##### Luftwaffel [Moderator] 06/02/2021 02:37:57
self.natasha = Supervisor()


it has all the Robot functionality

##### Kirlin 06/02/2021 02:39:10
wow


I have tried so many things


I was trying self.supervisor = Supervisor and then self.natasha = supervisor.getFromDef('Natasha') or getSelf()


so now I can just operate self.natasha with the Robot functions and the Supervisor functions ?


thank you so much

##### Luftwaffel [Moderator] 06/02/2021 02:40:44
you have to do that if you want a handle to the robot node, for doing supervisor manipulations


you're welcome :)=

##### Kirlin 06/02/2021 02:42:15
like set translation or rotation ?

##### Luftwaffel [Moderator] 06/02/2021 02:43:45
yes

##### mclzc 06/02/2021 03:06:20
Hi, Do you have a way of outputting `sensor_msgs/msg/PointCloud2` from a `RangeFinder`? I see that the `range_finder_device.py` file creates a publisher for `sensor_msgs/Image`.

##### Darko Lukić [Cyberbotics] 06/02/2021 07:25:52
No, only the Lidar publishes `sensor_msgs/msg/PointCloud2`. Can you contribute `sensor_msgs/msg/PointCloud2` for the range finder? Although I am not sure whether it is better to implement the point cloud generation in the Webots core. Please open the issue about that so we can discuss.

##### AloneLeader 06/02/2021 14:18:47
Hey, i just was looking for a tutorial and end up with this channel. I need to create a robotic simulation for my term project. Is there anyone who like to help a newbie?

##### mclzc 06/02/2021 15:52:46
Alright, done `@Darko Lukić` [https://github.com/cyberbotics/webots\_ros2/issues/227](https://github.com/cyberbotics/webots_ros2/issues/227)

##### Darko Lukić [Cyberbotics] 06/02/2021 16:16:59
Thank you!

##### viorel\_gheorghe 06/02/2021 22:31:27
Start with these 🙂 [https://cyberbotics.com/doc/guide/tutorials](https://cyberbotics.com/doc/guide/tutorials) as a beginner to beginner

##### sk 06/02/2021 23:48:41
hi guys



so for my university's robotics team, we want to train our neural network to detect a ball and a robot. we have a webots simulation of our robot working and we would like some way to automate the process of getting images from the simulation. manual taking screenshots would be incredibly tedious so we want some way to automate getting pictures of the robot and the ball and goalpost at different angles and distances. is there any way to do this?

##### Olivier Michel [Cyberbotics] 06/03/2021 06:10:53
Sure, you can use `wb_camera_save_image` API function: [https://cyberbotics.com/doc/reference/camera#wb\_camera\_save\_image](https://cyberbotics.com/doc/reference/camera#wb_camera_save_image) combined with moving the robot to different locations/orientations using a supervisor process.

##### sk 06/03/2021 06:12:20
is there a way to automate moving the robot?

##### Olivier Michel [Cyberbotics] 06/03/2021 06:12:56
The easiest is probably to use a supervisor process that will change the translation/rotation fields of the robot.

##### Rody El Hamod 06/03/2021 08:47:38
hello

what is the maximum velocity of a rotational motor?

Thank you in advance

##### DDaniel [Cyberbotics] 06/03/2021 10:16:13
`@Rody El Hamod` Hi, whatever you set in the `maxVelocity` field of the motor

##### Dee 06/03/2021 13:01:04
Hi all, I'm trying to make the epuck move a certain distance, ive made the code however when i run it webots sort of does nothing for a while then the robot moves and then it just keeps going forever? i'm using time.h to make it move as i assume if i have distance and the speed of the bot and i can tell it do go for say 8 seconds to move a metre


im using c programming
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/849996355182526484/unknown.png)
%end

##### Stefania Pedrazzi [Cyberbotics] 06/03/2021 13:05:22
It is not necessary to set the velocity at each simulation step. Once set it is applied automatically to the robot at each step. To stop the robot you have to reset the motor velocity to 0.

##### Rody El Hamod 06/03/2021 13:06:00
but it seems strange to me that there's no limitation. at the end of the day it's a physics simulator..

##### Dee 06/03/2021 13:09:37
so i should do wb\_motor\_set\_velocity(left\_motor, 0 * MAX\_SPEED); wb\_motor\_set\_velocity(right\_motor, 0 * MAX\_SPEED); after the while loop i assume?

##### Stefania Pedrazzi [Cyberbotics] 06/03/2021 13:09:54
Yes

##### Dee 06/03/2021 13:10:19

%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/849998436765270056/unknown.png)
%end


ive added it and recompiled it, the e puck doesnt move now

##### Stefania Pedrazzi [Cyberbotics] 06/03/2021 13:11:49
Instead of sleep you should call `wb_robot_step(TIME_STEP)` and the loop condition should be based on the simulation time and not the system time

##### Dee 06/03/2021 13:12:12
how would i make it based off the simulation time?

##### Stefania Pedrazzi [Cyberbotics] 06/03/2021 13:12:52
A simple way would be to simply count the number of times the loop body is executed (and multiply it by `TIME_STEP`).

##### harrymcc 06/03/2021 13:15:28
```int main(int argc, char **argv) {

  wb_robot_init();

  WbDeviceTag left_motor = wb_robot_get_device("left wheel motor");
  WbDeviceTag right_motor = wb_robot_get_device("right wheel motor");
  wb_motor_set_position(left_motor, INFINITY);
  wb_motor_set_position(right_motor, INFINITY);
  wb_motor_set_velocity(left_motor, 0);
  wb_motor_set_velocity(right_motor, 0);





left_speed = MAX_SPEED;
 right_speed = MAX_SPEED;

wb_robot_step(500);

 right_speed = MAX_SPEED;
left_speed = 0;
wb_robot_step(1000);


 wb_motor_set_velocity(left_motor, left_speed);
 wb_motor_set_velocity(right_motor, right_speed);



    wb_robot_cleanup();

 return 0;
}
``` hi, can anyone explain why these timesteps add together and instead of going in order and do  left_speed = MAX_SPEED;

 right\_speed = MAX\_SPEED; and then  right\_speed = MAX\_SPEED;

left\_speed = 0; just does  right\_speed = MAX\_SPEED;

left\_speed = 0;

##### Dee 06/03/2021 13:16:04
ah okay i understand, Thank you very much for your help 🙂

##### DDaniel [Cyberbotics] 06/03/2021 13:19:09
`@harrymcc` Hi, because you define the variables `left_speed` and `right_speed` but don't actually set the motor speed to those values. Before each of those `wb_robot_step`  calls you should call `wb_motor_set_velocity`

##### harrymcc 06/03/2021 13:22:02
oh right thank you thats fixed

##### James Le Poidevin 06/03/2021 13:29:26
Hello, I developed a stereo camera proto (like the base node camera) with changable distance and respecting the the robotic conventions. Is there any use doing a pull request for just one file ?

##### Stefania Pedrazzi [Cyberbotics] 06/03/2021 13:39:11
If the PROTO is not trivial and can simplify the work of users that need stereo cameras,  we will be happy to review your PR adding it. Note that simple PR are very welcome even if they contain just one file.

##### James Le Poidevin 06/03/2021 13:40:12
Ok thank you I'll try and do a PR soon

##### FlamingToaster 06/03/2021 14:24:37
Hello! I'm doing a remote controlled delivery drone and I wanted to control it through external client application. I'm trying to create a scenario where I connect to it, connection is lost, simulation goes on for a while, and after some time connection is re-established.

I've seen the khepera\_tcpip example, but my problem is that whenever the socket is listening for connections, it completely stops whole simulation. Is there any way to listen for connection while the simulation is running?

##### Olivier Michel [Cyberbotics] 06/03/2021 15:45:49
You should use either non-blocking sockets or multi-threading.

##### FlamingToaster 06/03/2021 15:51:19
Thanks for answer! Also this is what I was afraid of, since I've never done either. Anyway, which approach would you suggest? From what I've gathered it's not advised to go on the multi-threading route when using webots

##### Olivier Michel [Cyberbotics] 06/03/2021 15:59:07
Yes, the non-blocking route seems simpler indeed. Are you on Linux, Windows or macOS?

##### FlamingToaster 06/03/2021 15:59:31
Windows

##### Olivier Michel [Cyberbotics] 06/03/2021 16:02:13
You may take inspiration from this one: [https://github.com/RoboCup-Humanoid-TC/webots/blob/release/projects/samples/contests/robocup/controllers/player/player.cpp](https://github.com/RoboCup-Humanoid-TC/webots/blob/release/projects/samples/contests/robocup/controllers/player/player.cpp)

##### FlamingToaster 06/03/2021 16:05:10
Thank you! I'll look into it, examples are good way to learn 😄

##### James Le Poidevin 06/04/2021 09:53:41
Hello, I've just tried to pass to the new webots\_ros2 and webots version and when tring to lanch the webots\_ros2 exemples i keep getting the same error :

```
ImportError: /opt/ros/foxy/lib/python3.8/site-packages/webots_ros2_msgs/webots_ros2_msgs_s__rosidl_typesupport_c.cpython-38-x86_64-linux-gnu.so: undefined symbol: webots_ros2_msgs__msg__wb_camera_recognition_object__convert_to_py
```

Do you know why ? (tested with mavic and abb)

##### Darko Lukić [Cyberbotics] 06/04/2021 10:58:32
You are compiling from source?

##### James Le Poidevin 06/04/2021 11:02:41
webots no, but i run colcon build for webots\_ros2


webots works fine by itself

##### Darko Lukić [Cyberbotics] 06/04/2021 11:04:07
`webots_ros2_msgs` is coming from `/opt` which means that the compiled `webots_ros2` package and the one installed through apt are clashing. Delete the `webots_ros2` using apt.

##### James Le Poidevin 06/04/2021 11:06:42
i didn't use apt to install webots\_ros2. To install webots\_ros2 i cloned the github repo and changed branch to develop


by using locate I can see that webots\_ros2 is present in only 2 places: where I installed it(using git clone) and in the /opt/ros/foxy/...

##### Darko Lukić [Cyberbotics] 06/04/2021 12:10:34
Run:

```bash
apt list --installed | grep webots-ros2
```

to identify whether you have `webots_ros2` installed.



And this should delete everything related to `webots_ros2`:

```bash
sudo apt remove --purge ros-foxy-webots*
```

##### Rody El Hamod 06/04/2021 12:28:43
hello i have a question about setPosition for a rotational motor.

does webots choose the shortest path between 2 angles? if the start angle is pi and the target angle is -3.13 will the rotational motor do almost a full rotation or it will move just a bit as it should?

##### James Le Poidevin 06/04/2021 13:44:18
I tried it but still the same error, I've also just seen that I have this at the beginning for the launch `[mavic_driver-3] Cannot open file: /tmp/webots-154849-kTJ9Hr/WEBOTS_SERVER (retry count 8)` I don't know if there's a max number of retries

##### Darko Lukić [Cyberbotics] 06/04/2021 15:45:50
I am not sure whether it is safe to delete the folder:

```
rm -rf /opt/ros/foxy/lib/python3.8/site-packages/webots_ros2*
```

There is limit of around 60s (10 retries) if you are using Webots R2021a, or no limit if you are using Webots R2021b.

##### harrymcc 06/04/2021 16:09:47
I have a task of measuring 50cm 25cm 7cm away from an object with the e-puck however the prox sensors dont seem to have the range to measure out 50cm and 25cm is there anyway to increase the range

##### DDaniel [Cyberbotics] 06/04/2021 16:20:45
`@harrymcc` hi, the range and response of the distance sensor can be modified by changing the look-up table of the device. Here's the details: [https://cyberbotics.com/doc/reference/distancesensor#lookup-table](https://cyberbotics.com/doc/reference/distancesensor#lookup-table)

##### harrymcc 06/04/2021 16:36:18
yeah thats what I was thinking but does 0.5 seem unrealistic for a distance sensor especially when the biggest number on the lookup table seems to 0.07m

##### viorel\_gheorghe 06/04/2021 16:42:37
is not quite a technical questions, but I have to do a intro for my students regarding webots. 🙂 In this tutorial [https://cyberbotics.com/doc/guide/tutorial-6-4-wheels-robot](https://cyberbotics.com/doc/guide/tutorial-6-4-wheels-robot) a high level representation of the robot is made


in what software it is done, in webots the hierarchy chart? Can be do automatically or it's a manual endeavor?

##### Dee 06/05/2021 12:56:09
hi all im trying to make a function that will calculate the time needed for the motors to run to achieve a certain distance however when i added the function the controller keeps crashing as soon as i start the simulation


(written in c)
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/850719673174458378/unknown.png)
%end

##### TerryWr1st 06/05/2021 13:01:07
`@Dee` Put in some print statements, so you can see which line the controller is crashing at.

##### Dee 06/05/2021 13:11:19
i tried that but all i got out of the console was WARNING: my\_controller: The process crashed some time after starting successfully.

WARNING: 'my\_controller' controller crashed.

##### TerryWr1st 06/05/2021 13:14:57
Does it run if you replace line 17 with int miliseconds = 1;



?

##### Dee 06/05/2021 13:22:30
yeah

##### TerryWr1st 06/05/2021 13:27:57
Velocity should be a double, not an int, try that


And rotational speed/time


All doubles


Any variable that will be initialised or could return as an decimal number will need to be a float or a double.

##### Dee 06/05/2021 13:34:52
alright it sorta works now its not crashing, thanks so much for your help

##### TerryWr1st 06/05/2021 13:47:38
All good. But basically for your code, try to keep all your sensor updating/kinematic updates/decision making within the loop on line 38 if you can. The other loop doesnt seem necessary?



For velocity control (you are using velocity control because the kinematics is controlled by setVelocity, not setPosition) you can just check the position at each timestep. Something like below pseudo code:



Update kinematic model (the position, orientation etc)

if position\_achieved, update velocity to stop, turn or whatever you want

else, do nothing, wait for next timestep

##### Dee 06/05/2021 13:50:03
yeah i got confused by how that loop on line 38 worked


i see what you mean tho thanks 🙂

##### TerryWr1st 06/05/2021 13:51:27
I'll see if I can find a slide on the kinematic model of the epuck, so you can see the equations

##### Dee 06/05/2021 13:53:01
that would be great thanks 🙂

##### It'sMe 06/07/2021 06:39:02
Hii


How to import CAD model in Webots?

##### Darko Lukić [Cyberbotics] 06/07/2021 06:46:03
You have to convert it to some other format and then use `Import 3D Model... `. Check the following link for the supported formats:

[https://cyberbotics.com/doc/guide/the-user-interface#file-menu](https://cyberbotics.com/doc/guide/the-user-interface#file-menu)

##### It'sMe 06/07/2021 09:07:08
Ok

Thanks👍

##### mihir 06/07/2021 11:07:26
I want to have a supervisor to apply a algorithm on the camera data(in Matlab) on another robot, can anyone suggest a way to do so. Thank you in advance.


Particularly I wanted to get the depth data of the kinect.

##### Darko Lukić [Cyberbotics] 06/07/2021 11:46:24
You cannot access devices from another robot. You have to create a custom mechanism to retrieve depth data from another robot, it can be based on Emitter/Receiver or something else.

##### mihir 06/07/2021 11:47:52
Okay will try using emitter/receiver.


I am trying the emitter and receiver, but I am not sure how I can send the kinect data as the wb\_range\_finder\_get\_range\_image() returns a pointer. Could you suggest how I should proceed as I didn't find any documentation regarding sending depth data. Currently I am receiving a null vector. Any help is appreciated.

##### nap 06/07/2021 18:39:23
Hi, I've created a 'forklift' attachment to an epuck that uses a linear motor to move the forks up and down.  However, when I place a pallet over the forks and try to lift the pallet, the forks simply pass through the pallet.  What haven't I setup?


A reference to an example would suffice.

##### Stefania Pedrazzi [Cyberbotics] 06/07/2021 18:41:48
Hi, you should first make sure that you correctly define the boundingObject of the fork and the pallet. Physics doesn't use the graphical appearance but just geometries defined in `Solid.boundingObject` field.

##### nap 06/07/2021 18:42:22
I have bounding boxes on the forks, but not the pallet.


Actually, the boundingObject on the pallet is set to TRUE

##### Stefania Pedrazzi [Cyberbotics] 06/07/2021 18:51:20
Here is an example sending a simple double array:

[https://github.com/cyberbotics/webots/blob/master/projects/samples/devices/controllers/gps\_supervisor/gps\_supervisor.c#L44](https://github.com/cyberbotics/webots/blob/master/projects/samples/devices/controllers/gps_supervisor/gps_supervisor.c#L44)

Sending the range image would be similar, but you would need to also send additional information like the image size. This is commonly called "serialization" and depending on the programming language you  use it may be available in standard libraries.


If theboundingObject is correctly defined (you should see the outline when selecting the objects in the 3D scene), the second step is to check if both the fork and the pallet have are dynamic and thus if their `Physics` node is defined.

##### nap 06/07/2021 18:53:47
My slider joint endpoint is a solid that has three children (the backing plate (shape) and two forks (solids/shapes)).


Ok, all the physics on the forklift are null.  The pallet has no real options for physics and dynamics, just boundingObject = TRUE.

##### Stefania Pedrazzi [Cyberbotics] 06/07/2021 18:56:10
For the pallet, if it is the default one, you can enable the physics by setting its mass.

##### nap 06/07/2021 18:57:44
Mass == 0 right now.  Is that enabled?  Or does it have to be >0?

##### Stefania Pedrazzi [Cyberbotics] 06/07/2021 18:58:10
If mass is 0, then physics is disabled. You should set a positive mass.

##### nap 06/07/2021 19:02:14
lol.

When I lift the forks, they go through the pallet.  But when I try to lower the forks back to the floor, the epuck is jacked up when the forks touch the top of the pallet.  I can't get the forks back under the pallet.


The forks are passing through the empty gaps in the pallet, but maybe the bounding box of the pallet does not consider this?  If that's the case, then the forks are starting inside the pallet, which explains why they come out but can't go back through it.

##### Stefania Pedrazzi [Cyberbotics] 06/07/2021 19:07:14
> The forks are passing through the empty gaps in the pallet, but maybe the bounding box of the pallet does not consider this?

The default PROTO models empty gaps only in one direction. But you can modify it and re-redefine the bounginObject if this doesn't fit your needs.

##### nap 06/07/2021 19:09:55
I'm going to put the pallet on top of something so it's not sitting directly on the floor.  However, I've just discovered that a box has a minimum size, that is too big for my needs.

##### Stefania Pedrazzi [Cyberbotics] 06/07/2021 19:11:11
Minimum size for boxes is anything greater than 0.

##### nap 06/07/2021 19:13:39
Not quite.  I can't make a WoodenBox that is 0.0006^3.  I tried with a SolidBox and it seems to be working.


Is it normal to have an 'earthquake' near the start of a run?  A second or so into it but before anything dynamic has happened.

I'm going to check the wbt file for big/small numbers.


Ok, I've worked it out.  A combination of saving after running (thus having very large/small numbers) and the masses were too large for an epuck, so I needed to reduce them down to the order of 0.0007 kg.

##### yash 06/08/2021 06:27:55
Hello ! If I set the world coordinate system to “ENU”, then does the local reference frame of the robot,solids , rectangular arena set to “ENU”. ? Because if I set global frame to ENU , then the robot or rectangular arena frame doesn’t align with the global frame. So is it possible to make everything follow ENU.?

##### Darko Lukić [Cyberbotics] 06/08/2021 08:12:10
Coordinate system (e.g. ENU) and object orientation (e.g. FLU) are not related although there are often used in the same context. ENU stands for x-East, y-North, and z-Up, while FLU stands for x-Forward, y-Left, and z-Up.



You have to convert objects individually to follow the FLU convention. We plan to convert all existing PROTOs to FLU after June.

##### yash 06/08/2021 09:22:19
oh okay, so should I the rotation field to convert to FLU ?

##### Darko Lukić [Cyberbotics] 06/08/2021 09:33:23
You have to open each PROTO and rotate all children inside

##### yash 06/08/2021 10:07:22
Oh okay, thanks !

##### Даша 06/08/2021 11:38:06
Hello! I have a controller for the Mavic 2 Pro robot with object recognition: camera.recognitionEnable(timestep). But the Camera does not recognize all objects, but only machines (Tesla, Lincoln), static objects. Why? You need to recognize ordinary robots, epuck, pioneer and others

##### bingdong 06/08/2021 12:13:33
Hi, can custom color values be set for for LED nodes from the controller?

##### Darko Lukić [Cyberbotics] 06/08/2021 12:30:08
Make sure that all objects have the recognition color parameter defined.



> Only Solids whose `recognitionColors` field is not empty can be recognized by the camera.



— [https://www.cyberbotics.com/doc/reference/recognition](https://www.cyberbotics.com/doc/reference/recognition)


Yes, you can use change fields using the supervisor functions. Or you can change the LED type.

##### Olivier Michel [Cyberbotics] 06/08/2021 12:33:05
[https://cyberbotics.com/doc/reference/led#wb\_led\_set](https://cyberbotics.com/doc/reference/led#wb_led_set) allows you to set the RGB color of a LED if the gradual field is TRUE and the color list is empty.

##### bingdong 06/08/2021 12:38:17
Got it, thanks! `@Darko Lukić` `@Olivier Michel`

##### pri-eus 06/08/2021 19:39:07
What is the current outlook for MacOS support since Apple deprecated OpenGL?

##### Lucas Waelti 06/09/2021 11:58:04
Hi, is there a way to rotate the camera in the 3D window around its own position without clicking on the background? I have a world where there are tight spaces and no way of clicking on the background. Since the space is tight, in place rotations of the view point are required to not go through obstacles.

> **Camera rotation**: In the 3D window, click on an object with the left mouse button and drag the mouse to rotate the viewpoint around it. If you click on the background, the camera will rotate around its own position.

##### Darko Lukić [Cyberbotics] 06/09/2021 12:00:10
You can change the parameters in the `Viewpoint` node (in the scene tree). Also, since you are in the tight space you might benefit from a bigger field of view (`fieldOfView`)

##### Lucas Waelti 06/09/2021 12:05:59
Thanks for the hints, but I was thinking of a way of navigating with the mouse. For instance, `ctrl` + `left click` (or smth similar) could force a rotation in place instead of around the selected object... Editing the `Viewpoint` node directly for navigation (typically while developing a world) is not convenient.

But yes, increasing the field of view already helps (although not totally sufficient), thanks 👍

##### Darko Lukić [Cyberbotics] 06/09/2021 13:26:04
You can use the Keyboard API ([https://cyberbotics.com/doc/reference/keyboard](https://cyberbotics.com/doc/reference/keyboard)) in conjunction with the Supervisor API ([https://cyberbotics.com/doc/reference/supervisor](https://cyberbotics.com/doc/reference/supervisor)) to achieve the desired behavior. Once the key combination is detected you use the Supervisor to manipulate the fields inside the Viewpoint node.



I am not sure whether it is a good idea to include something like that in the Webots core. You can open an issue to discuss

##### Troy 06/09/2021 14:06:34
Hi! Is there any method that I could constrain the movement of the robot in one plane? Like I wanna make the robot walk straight forward, no left and right offset

##### Dee 06/09/2021 15:36:33
Hi, Im trying to use the pen to draw the path of the bot, but the trail only shows up when I increase the tile size of the floor to the size of the arena which then makes the trail really big even tho the leadsize is set to 0.003



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/852209625696960542/unknown.png)
%end

##### mclzc 06/09/2021 17:49:01
Hi, is there any reason for not having a Radar device in webots\_ros2\_core? I guess it's because it can be implemented as a Lidar?

##### Troy 06/09/2021 20:18:18
Or can I constrain the robot not to rotate alone Y axis?


Hi I used the  wb\_supervisor\_field\_set\_sf\_rotation to set the robot body rotation in y axis to be zero, I first used wb\_supervisor\_node\_get\_def, then used  wb\_supervisor\_node\_get\_field, but when I call  wb\_supervisor\_field\_set\_sf\_rotation(), it return Error: wb\_supervisor\_field\_set\_sf\_rotation() called with NULL 'field' argument. Does anyone know why this happend?

##### Luftwaffel [Moderator] 06/09/2021 22:55:10
`@Troy` can you post your actual code?


and is it a PROTO? or a robot made of base nodes?

##### Troy 06/10/2021 01:13:50
It is a robot made of base nodes


WbNodeRef Body;

WbFieldRef Body\_Field;

const double Y\_angle[4] = {0,1,0,0};



in main:

Body = wb\_supervisor\_node\_get\_from\_def("Body");

  Body\_Field = wb\_supervisor\_node\_get\_field(Body, "Body\_Field" );



wb\_supervisor\_field\_set\_sf\_rotation(Body\_Field,Y\_angle);

##### DDaniel [Cyberbotics] 06/10/2021 06:12:10
`@Troy` Hi, have you verified that the WbNodeRef and WbFieldRef are not NULL? Also, when getting the field using `wb_supervisor_node_get_field`, the field name must coincide with what appears on the scene tree. So in your case it would be: `wb_supervisor_node_get_field(Body, "rotation");`

##### Stefania Pedrazzi [Cyberbotics] 06/10/2021 06:39:15
Did you set an image texture for the floor where the pen is painting?

The problem could be the texture resolution, so I would suggest you to set the appearance of the floor and set a completely white texture with a good resolution (for example you can try with 1024x1024). In case the texture is already set, you should try to replace with a texture with higher resolution.

##### Johan2021 06/10/2021 08:00:04
Hi, is there a way to implement vibrations inside Webots, or to sense their intensity?

##### Darko Lukić [Cyberbotics] 06/10/2021 08:05:31
You can use the `wb_supervisor_node_add_force` function to apply random force to an object:

[https://cyberbotics.com/doc/reference/supervisor#wb\_supervisor\_node\_add\_force](https://cyberbotics.com/doc/reference/supervisor#wb_supervisor_node_add_force)



To sense the vibrations maybe you can use Accelerometer:

[https://cyberbotics.com/doc/reference/accelerometer](https://cyberbotics.com/doc/reference/accelerometer)

##### James Le Poidevin 06/10/2021 13:23:30
Hello, Has anyone ever tried to interface PX4 with webots? I see it works on gazebo but would like not to use ROS.

##### Dee 06/10/2021 13:33:06
thank you so much its working now 🙂

##### Darko Lukić [Cyberbotics] 06/10/2021 13:47:43
There is an ArduPilot support for Webots:

[https://ardupilot.org/dev/docs/sitl-with-webots.html](https://ardupilot.org/dev/docs/sitl-with-webots.html)

##### James Le Poidevin 06/10/2021 13:49:09
Yes I've already used it but i have to use px4, i'll try and use the same principal as arduPilot for px4. Thanks 👍

##### Darko Lukić [Cyberbotics] 06/10/2021 13:50:55
I am looking forward to hear about the integration once it is done 😉

##### TheGiant 06/10/2021 15:55:59
Hello, I'm wondering why webots don't use all my core when doing simulation ? I've set more than 1 core in both webots preference, and in the model, but it doesn't seem to affect. I've only one robot, is it why I could use only one core ?

##### Darko Lukić [Cyberbotics] 06/10/2021 16:00:24
It is very hard to run the physics simulation on multiple cores. If you have multiple robots that don't interact with each other and `optimalThreadCount` is greater than 1 then Webots will use multiple cores. Otherwise it will stick to a single core. This is a limitation of the current physics engines in general.

##### TheGiant 06/10/2021 16:02:26
Yep, got it, seems legit ! We plan to use webots in a gitlab pipeline CI/CD, and so get the simulation run as fast as possible (server got many core to spare). But It will do the job for now !

##### Darko Lukić [Cyberbotics] 06/10/2021 16:04:31
You can try some tricks to optimize the simulation:

[https://www.cyberbotics.com/doc/guide/speed-performance](https://www.cyberbotics.com/doc/guide/speed-performance)

##### TheGiant 06/10/2021 16:11:40
Currently, I've been doing only proof-of-concept, so everything is rather poorly designed, but I'm currently reworking all of it.

My main concern was the addition of a lidar, which eat a lot of performance... (it's 715 point, but still).

Additionally, I'm sometime stuck with a linear motor which can't move (speed control mode) even if the max force is huge (10k N) and mas very light (10kg). I'm working with hydraulic arm, hence I've kinematic loop. Could they cause any issue, at solver level, which could cause non convergence or so ? My arm act like if mechanical links were "gripped" :/

##### Darko Lukić [Cyberbotics] 06/10/2021 17:12:31
The lidar scan is processed on GPU while point cloud generation is done on CPU (something we want to optimize).



If you believe the linear motor issue is a bug then please open an issue.

##### TheGiant 06/10/2021 17:15:01
I'm not using the point cloud, however. But I will look into the number of point available, first !

I will do if needed, but it seems very wacky....

##### James Le Poidevin 06/11/2021 08:57:39
Hello, I'm using the dji mavic 2 pro in a ardupilot simulation and i've added a gimbal (not yet implemented in ardupilot). To test that it is correctly set i opened the Generic robot window to move the gimbal motors. The simu fps took a hit 0.8 -> 0.6. When i go to the rotationMotor view i go from 0.6 -> 0.1 or 0.2, even if i don't change anything when i leave the generic robot window my simu fps doesn't go back up. Is it an issue or is there something i'm missing ?

##### Olivier Michel [Cyberbotics] 06/11/2021 08:59:00
Does closing the robot window restore the original speed?

##### James Le Poidevin 06/11/2021 09:00:14
No, if it was only in the robot window It doesn't really matter but its when i leave that it is a problem

##### Olivier Michel [Cyberbotics] 06/11/2021 09:02:11
What do you mean by "leave"? Close it? Move the mouse pointer away from it?

##### James Le Poidevin 06/11/2021 09:03:00
Close it with the X at the top


I'll try and film it to show you

##### Olivier Michel [Cyberbotics] 06/11/2021 09:04:07
And did you disabled what you previously enabled in the robot window before closing it?

##### James Le Poidevin 06/11/2021 09:04:24
I didn't enable anything

##### Olivier Michel [Cyberbotics] 06/11/2021 09:04:59
Then, it looks like a bug... Can you open an issue about it, including as much material as possible, so that we can reproduce it?

##### James Le Poidevin 06/11/2021 09:05:22
Ok i'll do that

##### hanm 06/11/2021 10:16:16
hi,I want to know how to create a solid box by Python


I want to add boxs at the end of coveyor belt by python API

##### Dee 06/11/2021 10:37:13
Hi im trying to increse the distance sensor range of an e-puck however when i went into the lookup table it was already set to 2m but the e-puck clearly doesnt have that 2m range



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/852859109052514334/unknown.png)
%end

##### Darko Lukić [Cyberbotics] 06/11/2021 10:58:22
It is a ToF sensor, that one has a range of 2m. There is only one ToF sensor on e-puck2, the others are ultrasonic.


You can use `wb_supervisor_field_import_sf/mf_node_from_string`:

[https://cyberbotics.com/doc/reference/supervisor?tab-language=python#wb\_supervisor\_field\_import\_mf\_node\_from\_string](https://cyberbotics.com/doc/reference/supervisor?tab-language=python#wb_supervisor_field_import_mf_node_from_string)

##### Dee 06/11/2021 11:00:27
so this only relates to the E-puck2 then? how would i change the distance sensors of the normal E-Puck?


because thats the only lookup table i could find for the e-puck

##### Darko Lukić [Cyberbotics] 06/11/2021 12:12:32
[https://github.com/cyberbotics/webots/blob/55f079a24abddefa9ac5cc4dad7afee98975d990/projects/robots/gctronic/e-puck/protos/E-puckDistanceSensor.proto#L57-L66](https://github.com/cyberbotics/webots/blob/55f079a24abddefa9ac5cc4dad7afee98975d990/projects/robots/gctronic/e-puck/protos/E-puckDistanceSensor.proto#L57-L66)

##### Caio Viturino 06/11/2021 12:23:05
Hello! I am trying to use a STL model in Webots in robot grasping applications but I still can't figure out how to stabilize the BoundingObject in Webots.

This is what happens when I import the mesh...

[https://www.youtube.com/watch?v=BcTyDNSJoKE](https://www.youtube.com/watch?v=BcTyDNSJoKE)



It is highly important to have a BoundingObject as the same shape of the geometry


I tried to set all kind of ContactProperties between the objects but no success


Has anyone ever tried to do this?

##### Olivier Michel [Cyberbotics] 06/11/2021 12:30:08
I would strongly recommend to to approximate the boundingObject with a series of basic primitives (Spheres, Capsules, Boxes, Cylinders) instead of a complex mesh which yields to instabilities. You can compose arbitrarily complex boundingObjects with compound solids, see [https://cyberbotics.com/doc/guide/tutorial-5-compound-solid-and-physics-attributes](https://cyberbotics.com/doc/guide/tutorial-5-compound-solid-and-physics-attributes)

##### Caio Viturino 06/11/2021 12:37:15
Thank you `@Olivier Michel`. I'll try it 🙂


`@Olivier Michel` .. it works!

I finally implemented robotic grasping in Webots using depth camera, RGB camera and transforming it into Point Clouds in order to visualize it in RVIZ.



[https://www.youtube.com/watch?v=SvJ\_B82\_Ofc](https://www.youtube.com/watch?v=SvJ_B82_Ofc)



Simulation available at [https://github.com/lar-deeufba/ur5\_webots\_lar](https://github.com/lar-deeufba/ur5_webots_lar)

##### Olivier Michel [Cyberbotics] 06/11/2021 14:08:30
It looks very nice! Thanks for sharing it.

##### harrymcc 06/11/2021 21:14:09
``` bool right_obstacle_c =
   0.07 ==  ps_values[0]  ||
    0.07 == ps_values[1] ||
    0.07 == ps_values[2];
    bool left_obstacle_c =
     0.07 == ps_values[5]||
     0.07 == ps_values[6]||
     0.07== ps_values[7];
     int a=0.03;
     int b=0.07;
        bool right_obstacle_d =
      ps_values[0] < 0.065 && ps_values[5] > 0.00||
       ps_values[1] < 0.065 && ps_values[6] > 0.00||
       ps_values[2] < 0.065 && ps_values[7] > 0.0;

       bool left_obstacle_d =
      ps_values[5] < 0.065 && ps_values[5] > 0.0||
       ps_values[5] < 0.065 && ps_values[6] > 0.0||
       ps_values[5] < 0.065 && ps_values[7] > 0.0;



    }
if (left_obstacle_d) {

      left_speed  = -0.05 * MAX_SPEED;
      right_speed = -0.05 * MAX_SPEED;
    }
    else if (right_obstacle_d) {

      left_speed  = -0.05 * MAX_SPEED;
      right_speed = -0.05 * MAX_SPEED;
    }
   if (left_obstacle_c) {

      left_speed  = 0;
      right_speed = 0 ;
    }
    else if (right_obstacle_c) {

      left_speed  = 0;
      right_speed = 0;
    }
``` im trying to make it stop fully but it just keep jittering is it even possible to make it come to a stop like this using the distance sensors

##### Luftwaffel [Moderator] 06/11/2021 22:30:18
`@harrymcc` something like this:

`0.07 ==  ps_values[0] `

will basically never happen. The sensor value has to be EXACTLY that value. So i'm guessing that only the obstacle\_d cases are true

##### Spur 06/12/2021 06:42:20
does anyone know why a distancesensor on e-puck might be returning "nan"?

##### DDaniel [Cyberbotics] 06/12/2021 07:18:38
`@Spur` Hi, did you enable the distance sensor? Does at least one time step pass after enabling it and requesting the first value?

##### Spur 06/12/2021 08:31:03
yes and no

##### hanm 06/12/2021 12:03:35
thanks  for help, It work!


I find the function `wb_supervisor_field_remove_sf/mf`, this function need a param `index`, but how can a get a solid node's index of the scene tree?


I try

```
robot = Supervisor()

root_node = robot.getRoot()
root_children_field = root_node.getField("children")

box_node = robot.getFromDef('box3')
idx = box_node.getId()

root_children_field.removeMF(idx)
```


but the idx is `4029` which is out of range

##### harrymcc 06/12/2021 17:32:19
can the pen node draw over the default tile flooring? just cant get it working for some reason

##### DDaniel [Cyberbotics] 06/12/2021 17:40:11
`@harrymcc` did you change the `floorSize` ? If so, you also need to change `floorTileSize` by the same amount, otherwise the lines might not be visible.


`@hanm` Hi, from what I understood, you want to remove a node from the children list of a Robot, however the `getRoot()`, returns the reference to the Group that contains all top-most level nodes of the scene tree (so stuff like background, worldinfo etc), not the reference of the Robot.

##### harrymcc 06/12/2021 17:47:02
i have reset it back and still wont must be my code thats wrong might have missed read it


```
wb_robot_init();
void wb_pen_write(WbDeviceTag tag, bool write);
  void wb_pen_set_ink_color(WbDeviceTag tag, int color, double density);
  WbDeviceTag left_motor = wb_robot_get_device("left wheel motor");
  WbDeviceTag right_motor = wb_robot_get_device("right wheel motor");
  wb_motor_set_position(left_motor, INFINITY);
  wb_motor_set_position(right_motor, INFINITY);
  wb_motor_set_velocity(left_motor, 0);
  wb_motor_set_velocity(right_motor, 0);
wb_motor_set_velocity (left_motor, MAX_SPEED);
wb_motor_set_velocity (right_motor,   MAX_SPEED);
write(true);
wb_robot_step(4000);

write(true);
  wb_motor_set_velocity (left_motor, 0);
wb_motor_set_velocity (right_motor,   0);
wb\_robot\_step(300);
```

##### DDaniel [Cyberbotics] 06/12/2021 17:50:17
I was talking about the RectangleArena/CircleArena, did you change its `floorSize` parameters? Also, you can take inspiration from the provided sample world regarding the pen drawing: [https://www.cyberbotics.com/doc/guide/samples-devices#pen-wbt](https://www.cyberbotics.com/doc/guide/samples-devices#pen-wbt)


you can access it from: `file > open sample world > search pen.wbt`

##### harrymcc 06/12/2021 17:53:22
ill take a look thanks


i dont understand how i ve messed up that bad it seems easier to just do a straight line then how bad ive got it to not follow my bad going in a straight line
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/853342881431814164/unknown.png)
%end

##### chinex 06/12/2021 23:59:45
I am glad to be home, please how can I transfer my webots files to a real robot

##### Luftwaffel [Moderator] 06/13/2021 00:30:53
`@chinex` that really depends on your robot, what API or interfaces it uses and more.

##### hanm 06/13/2021 01:39:58
No, I want to remove some solid box at the top-most level scene


such as the box1-box8
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/853448801016479764/unknown.png)
%end

##### chinex 06/13/2021 06:17:59
I want to transfer the program to a khepera iv using C


Hallo it's great to be here, please how can I transfer my webots simulation program to a real  khepera iv robot using C API?

##### scott.nortman 06/14/2021 02:45:38
Hi, I am following through the tutorials regarding use of webots with ROS2; and I was able to import a URDF of a Kuka iiwa robot and lauch a joint\_state\_controller\_gui to control the joints, this is working in webots.  However, I want to be able to get the coordinate frames of each link from webots.  What is the API call to get the frame of a given link of the imported robot?

##### nap 06/14/2021 02:45:55
When using a LinearMotor, how can its position be determined?  There doesn't seem to be a `getPosition` method. (Note this isn't necessarily the same as its `target_position`.)

##### DDaniel [Cyberbotics] 06/14/2021 05:51:40
`@nap` you can add a position sensor to the device list and retrieve it using the `getValue` method

##### nap 06/14/2021 05:53:02
Thanks Daniel, I've just done that and now I'm working on making the motor track my commands.


`getValue` should report values between the min/max positions of the linear motor?  I assume the units are the same.

##### DDaniel [Cyberbotics] 06/14/2021 05:56:17
Yes, for a linear motor the units are meters

##### hanm 06/14/2021 06:06:35
hi, I am looking for a function which can get the index of a node at the  top-most level scene, so that I can remove them by  `removeMF(idx)`


such as the box1-box8



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/853878160214196244/unknown.png)
%end

##### Darko Lukić [Cyberbotics] 06/14/2021 06:27:22
Maybe you can use `wb_supervisor_node_get_pose` (from R2021b):

[https://cyberbotics.com/doc/reference/supervisor?version=develop#wb\_supervisor\_node\_get\_pose](https://cyberbotics.com/doc/reference/supervisor?version=develop#wb_supervisor_node_get_pose)

##### DDaniel [Cyberbotics] 06/14/2021 10:35:40
`@hanm` since you obtained the `WbNodeRef` using `getFromDef` you can simply use `box_node.remove()` to remove the box. [https://cyberbotics.com/doc/reference/supervisor?tab-language=python#wb\_supervisor\_node\_remove](https://cyberbotics.com/doc/reference/supervisor?tab-language=python#wb_supervisor_node_remove)

##### scott.nortman 06/14/2021 11:51:14
`@Darko Lukić` Thank you for pointing that out. How can I install 2021b?  In the meantime, I did take a look at the existing documentation for version 2021a, and from what I understand there is a method .getPosition, [https://cyberbotics.com/doc/reference/supervisor#wb\_supervisor\_node\_get\_position](https://cyberbotics.com/doc/reference/supervisor#wb_supervisor_node_get_position) however, when I call that method on  a Node, object, I get an AttributeError exception

##### Darko Lukić [Cyberbotics] 06/14/2021 11:57:30
`getPosition` + `getOrientation` is also fine to get a pose.



> How can I install 2021b?

[https://github.com/cyberbotics/webots/releases](https://github.com/cyberbotics/webots/releases)



> when I call that method on  a Node, object, I get an AttributeError exception

That is not expected. Are you sure you are calling the method on a Node object?

##### Даша 06/14/2021 21:04:13
Hello! Thank you for your help in the last question.

Now there is a new question.  I have code to process a video file using OpenCV. Using "cv2. VideoCapture", we can access the video file on the disk or the webcam on the computer. Help please. Can I also access the robot's camera in Webots? To process the video received from the robot in real time. If so, how do I access the camera?

##### scott.nortman 06/14/2021 21:27:49
`@Darko Lukić`  I think this issue I have is that I imported a URDF to create the top level PROTO, and I don't see how to access the nodes of each link

##### mclzc 06/15/2021 03:35:05
Hi, I'm having trouble compiling `webots_ros2` from master.



```
--- stderr: webots_ros2_driver
In file included from /opt/manuel/workspace/src/webots_ros2/webots_ros2_driver/src/plugins/dynamic/Ros2IMU.cpp:15:
/opt/manuel/workspace/src/webots_ros2/webots_ros2_driver/include/webots_ros2_driver/plugins/dynamic/Ros2IMU.hpp:20:10: fatal error: webots/InertialUnit.hpp: No such file or directory
   20 | #include <webots/InertialUnit.hpp>
      |          ^~~~~~~~~~~~~~~~~~~~~~~~~
compilation terminated.
make[2]: *** [CMakeFiles/webots_ros2_driver_imu.dir/build.make:63: CMakeFiles/webots_ros2_driver_imu.dir/src/plugins/dynamic/Ros2IMU.cpp.o] Error 1
make[1]: *** [CMakeFiles/Makefile2:80: CMakeFiles/webots_ros2_driver_imu.dir/all] Error 2
make: *** [Makefile:141: all] Error 2
---
Failed   <<< webots_ros2_driver [7.06s, exited with code 2]
Aborted  <<< webots_ros2_demos [1.65s]

Summary: 15 packages finished [10.6s]
  1 package failed: webots_ros2_driver
  1 package aborted: webots_ros2_demos
  1 package had stderr output: webots_ros2_driver
  3 packages not processed
```

- I can `locate` the mentioned file here: `/usr/local/webots/include/controller/cpp/webots/InertialUnit.hpp`

- I already did `source /opt/ros/$ROS_DISTRO/local_setup.bash`

- I'm up to date with master (at commit `33e9616314fdb65c4fa33f309aba68b69bb4ad4d`)

- I have the following env variables (and some variations of the second one with other dirs):

    - `export WEBOTS_HOME=/usr/local/webots`

    - `export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:$WEBOTS_HOME/include:$WEBOTS_HOME/include/controller/cpp`



What am I missing please?

##### DrVoodoo [Moderator] 06/15/2021 04:10:04
Have you set your environment variables?


Not sure about the ros2 interface but I am pretty sure that the Ros1 build script needed WEBOTS\_HOME set in order to locate the libraries

##### mclzc 06/15/2021 04:24:06
Yes, I was just testing that. I have updated my post above to include that information. Thanks.

##### Darko Lukić [Cyberbotics] 06/15/2021 06:37:50
Can the `wb_supervisor_node_get_from_proto_def` function help?

[https://cyberbotics.com/doc/reference/supervisor#wb\_supervisor\_node\_get\_from\_proto\_def](https://cyberbotics.com/doc/reference/supervisor#wb_supervisor_node_get_from_proto_def)

You should edit your PROTO, so each node you want to access has a DEF


Did you clone the repository with the `--recurse-submodules` flag:

[https://github.com/cyberbotics/webots\_ros2/wiki/Build-and-Install](https://github.com/cyberbotics/webots_ros2/wiki/Build-and-Install)

##### Luiz Felipe 06/15/2021 07:07:25
My environments all have the error message: `error: Wrong order of fields in the instance of PROTO Field: USE nodes might refer to the wrong DEF nodes.` after updating to Webots 2021a... any specific reason for this error message? (they seem to work fine regarding of the error)

##### Olivier Michel [Cyberbotics] 06/15/2021 07:09:01
That's probably due to some mix-up between DEF and USE nodes. Please check that DEF nodes are defined first, before being USEd.

##### Luiz Felipe 06/15/2021 07:10:27
Okkz!

##### hanm 06/15/2021 07:35:10
thanks

##### mclzc 06/15/2021 13:42:42
Yeah I did clone with `--recurse-submodules`.



When I add `/usr/local/webots/include/controller/cpp` to `include_directories` in `CMakeLists.txt` I get it to compile. Then it breaks with:



```
--- stderr: webots_ros2_driver
/usr/bin/ld: cannot find -lController
/usr/bin/ld: cannot find -lCppController
collect2: error: ld returned 1 exit status
make[2]: *** [CMakeFiles/webots_ros2_driver_imu.dir/build.make:202: libwebots_ros2_driver_imu.so] Error 1
make[1]: *** [CMakeFiles/Makefile2:80: CMakeFiles/webots_ros2_driver_imu.dir/all] Error 2
```

##### Darko Lukić [Cyberbotics] 06/15/2021 13:51:37
There is a `webots` submodule in the `webots_ros2_driver` that contains necessary dependencies. Is there any way for you to check why your CMake is ignoring the content from `webots_ros2_driver/webots`?



If you don't need the C++ interface you can

```bash
colcon build --packages-ignore webots_ros2_driver webots_ros2_turtlebot webots_ros2_control`
```

In any case, please open an issue so we can reproduce the problem

##### mclzc 06/15/2021 14:03:43
Oh thanks `@Darko Lukić` , I see what's the problem now. I was doing exactly this:

`git clone --recurse-submodules -b $ROS_DISTRO [https://github.com/cyberbotics/webots_ros2.git](https://github.com/cyberbotics/webots_ros2.git) src/webots_ros2`

And then I switched branches to master (`-b` was taking me to the foxy branch by default, which doesn't have the new `webots_ros2_driver` package) which doesn't have the pulled `webots` submodule.



Either removing the `-b $ROS_DISTRO` or doing `git submodule update --init --recursive` after checking out master solves it. Thanks.

##### sa33 06/16/2021 01:21:01
Hi, I have a question. I am not sure whether it's an adequate one or not. Anyhow I just need to clarify it.  So the question is: Is It possible to control Webot simulator robot from other system via internet or something? Its like controller is in IDE of one system and simulator is in another system. Is it possible?

##### Luftwaffel [Moderator] 06/16/2021 01:39:38
`@sa33` [https://cyberbotics.com/doc/guide/web-interface](https://cyberbotics.com/doc/guide/web-interface) this might be of interest to you


You can also use the ROS or ROS2 api, which are network based

##### sa33 06/16/2021 02:31:41
Ok. I will definitely check it. Thank you `@Luftwaffel`

##### Skyrim 06/16/2021 10:20:09
Hello guys, I have been using webots for a while now but I have recently come across this problem of the simulation being blocked


Any idea how I can fix it?


To elaborate, whenever I run webots, it seems to be blocked by a controller

##### Darko Lukić [Cyberbotics] 06/16/2021 10:24:18
Your controller probably starts automatically and crashing, run Webots with:

```
webots --mode=pause
```

[https://cyberbotics.com/doc/guide/starting-webots](https://cyberbotics.com/doc/guide/starting-webots)

##### Gregory Rasputin 06/16/2021 10:27:24
@Darko Hi! Would it be possible to tweak Webots so it starts in the 'paused' state? This would solve a load of issues I have had with my undergraduate students!

##### Darko Lukić [Cyberbotics] 06/16/2021 10:31:09
There is a `Startup mode` in the preferences window:

[https://cyberbotics.com/doc/guide/preferences#general](https://cyberbotics.com/doc/guide/preferences#general)



Slightly different behavior, but it can help. You can set the `WEBOTS_SAFE_MODE` environment variable:

[https://cyberbotics.com/doc/guide/starting-webots#safe-mode](https://cyberbotics.com/doc/guide/starting-webots#safe-mode)

##### Gregory Rasputin 06/16/2021 10:32:22
Thanks - total embarrassment here 😭

##### Skyrim 06/16/2021 13:39:23
Hey so I started in pause mode, but when I tried to run the controller externally it failed, so when I resumed simulation, I got back the same problem


I think what I am experiencing is, when sometimes I start the controller and it crashes, webots gets blocked somehow expecting communication wit the controller


Any ideas?

##### Darko Lukić [Cyberbotics] 06/16/2021 14:26:34
> I tried to run the controller externally it failed

Since your controller is failing (and not Webots) you should debug it:

[https://cyberbotics.com/doc/guide/debugging-c-cpp-controllers](https://cyberbotics.com/doc/guide/debugging-c-cpp-controllers)

##### Skyrim 06/16/2021 15:50:54
It failed to communicate with webots

##### mclzc 06/16/2021 16:10:04
Hi, how can I run the Turtlebot 3 example with the new plugin system?



Running:

```
ros2 launch webots_ros2_turtlebot robot_launch.py
```

Does bring up the simulation, but I see in the console:

```
[driver-3] /opt/manuel/workspace/install/webots_ros2_driver/lib/webots_ros2_driver/driver: error while loading shared libraries: libCppController.so: cannot open shared object file: No such file or directory
```

##### Darko Lukić [Cyberbotics] 06/17/2021 06:33:11
Can you pull the master branch and submodules again? It should be fixed here:

[https://github.com/cyberbotics/webots\_ros2/pull/235](https://github.com/cyberbotics/webots_ros2/pull/235)

##### JSK 06/17/2021 07:01:11
Hello team! I need some help related to data saving


i want to store all the values from gps and gyro.


i wanna know, is there is any builtin function that can do this ?


it is because i want to plot whole simulation results in a single plot


but  webots plots are limited

##### Darko Lukić [Cyberbotics] 06/17/2021 07:03:52
Hello JSK, No, you have to it by yourself. However, it shouldn't be hard to write everything in a CSV file.

##### JSK 06/17/2021 07:04:08
yeah i was also thinking about it


i think i have to make a small program for it


that's ok not a big deal.


how to access and save the simulation running time?

##### Olivier Michel [Cyberbotics] 06/17/2021 09:00:25
[https://cyberbotics.com/doc/reference/robot#wb\_robot\_get\_time](https://cyberbotics.com/doc/reference/robot#wb_robot_get_time)

##### Dorteel 06/17/2021 11:07:27
Hi! There is an *ikpy* Python example for the inverse kinematics (*/projects/robots/abb/irb*), where you have a line:

`for i in [0, 6]:

    armChain.active\_links\_mask[0] = False`

Shouldn't it be *i* instead of *0* ? If not, could anyone explain what does this line do?

##### chinex 06/17/2021 11:43:31
Hi team!, Please how can I remotely control a real  khepera IV robot on webots using C?

##### Darko Lukić [Cyberbotics] 06/17/2021 13:07:56
It should disable optimization for that link (related joint). However you might be right about the `i` thing. Can you make a PR for that?

##### bingdong 06/17/2021 14:05:46
Hi, I'm using Fusion 360 for a CAD file that I want to import to Webots. I converted the .step file it to .obj and then chose the Import 3D Model option in Webots. However the imported file is not to scale. How can I ensure correct scaling in this process?

##### Dorteel 06/17/2021 14:47:12
Tried to do a PR, not sure if it's done correctly though, never done it with a forked project before.

##### TheGiant 06/17/2021 14:52:09
Hello everyone,

I've been reading Webots code, and I've found it:

WbMotor.cpp:308

if (acc == -1.0 || acc > mMotorForceOrTorque)

    acc = mMotorForceOrTorque;

If I get thing right, acc is in m/s², and mMotorForceOrTorque in N or Nm (depending on the motor)

That make them incompatible for comparison or affectation :/

Did I missed something ?

##### mclzc 06/17/2021 15:00:05
Thanks `@Darko Lukić` , I don't see that error anymore.



1) I however see one repetitive message hundreds of times:

`[driver-3] wb_device_init(): node not handled`



2) If I follow the instructions here:

[https://github.com/cyberbotics/webots\_ros2/wiki/SLAM-with-TurtleBot3](https://github.com/cyberbotics/webots_ros2/wiki/SLAM-with-TurtleBot3)

RViz opens up but throws this message forever:

`[occupancy_grid_node-2] [WARN] [1623941505.604937197] [occupancy_grid_node]: submap_slices and last_frame_id is empty`

And the Turtlebot doesn't really move.



3) Similarly with the Navigation2 tutorial:

[https://github.com/cyberbotics/webots\_ros2/wiki/Navigate-TurtleBot3](https://github.com/cyberbotics/webots_ros2/wiki/Navigate-TurtleBot3)



`[controller_server-4] [INFO] [1623941695.908499944] [local_costmap.local_costmap]: Timed out waiting for transform from base_link to odom to become available, tf error: Invalid frame ID "odom" passed to canTransform argument target_frame - frame does not exist`



4) `ros2 topic list` shows me:

```
/joint_states
/parameter_events
/robot_description
/rosout
/tf
/tf_static
```

Which don't really echo anything.





I guess something is missing?

##### Darko Lukić [Cyberbotics] 06/17/2021 15:25:17
That first message you are getting is the problem. Unfortunately I cannot reproduce it. Which Webots version do you use?


Also, before `colcon build` run `rm -rf install log build` to be sure that something old hasn't found a way to the new binaries

##### mclzc 06/17/2021 15:48:46
I'm with 2021a. Deleting the directories doesn't change it.

##### Darko Lukić [Cyberbotics] 06/17/2021 16:18:48
Can you enter `webots_ros2_driver/webots` and do `git log`?


I am testing it with R2021a-rev1, but they should be compatible

##### mclzc 06/17/2021 16:21:56
Sure:

```
commit f3df885f05edb4fc781931c145ce3af2c050d51e (HEAD)
Author: lukicdarkoo <lukicdarkoo@github.com>
Date:   Thu May 20 10:57:21 2021 +0000

    Automatic update

commit c17c0839c86239cc0f1d823b4fa0e039e3373dc6
Author: lukicdarkoo <lukicdarkoo@github.com>
Date:   Wed May 19 15:13:01 2021 +0000

    Automatic update

commit 6649158e03df2c4424c9f336a89109d00b87a6ee
Author: lukicdarkoo <lukicdarkoo@github.com>
Date:   Wed May 19 14:36:04 2021 +0000

    Automatic update

commit 2bf60c620c311efd42b6214a3bc4813208f49ad4
Author: lukicdarkoo <lukicdarkoo@github.com>
Date:   Wed May 19 14:34:00 2021 +0000

...
```

##### Darko Lukić [Cyberbotics] 06/17/2021 16:23:09
That doesn't look updated, it should point to here:

[https://github.com/cyberbotics/webots-libcontroller/tree/R2021a-revision-1](https://github.com/cyberbotics/webots-libcontroller/tree/R2021a-revision-1)

##### mclzc 06/17/2021 16:29:14
My `.gitmodules` says this:

```
[submodule "webots_ros2_driver/webots"]
        path = webots_ros2_driver/webots
        url = https://github.com/cyberbotics/webots-libcontroller.git
```



Inside `webots_ros2_driver/webots`:

```
$ git status
HEAD detached at f3df885
nothing to commit, working tree clean
```



I don't really understand submodules, so this may be useless, but here it is (inside  `webots_ros2_driver/webots`):

```
$ git pull
You are not currently on a branch.
Please specify which branch you want to merge with.
See git-pull(1) for details.

    git pull <remote> <branch>
```


I see that the latest commit mentioned in my git log refers to:
%figure
![Kazam_screenshot_00000.png](https://cdn.discordapp.com/attachments/565154703139405824/855122923253661726/Kazam_screenshot_00000.png)
%end


To make that webots submodule point to the latest commit in the `r2021a-revision1` branch, I did `git checkout fdc0a9f7853ccea396c6dec045d26b0f4c2c0f98`, however, after `colcon build`, I get the those errors mentioning missing headers:



```
/opt/manuel/workspace/src/webots_ros2/webots_ros2_driver/include/webots_ros2_driver/plugins/Ros2SensorPlugin.hpp:19:10: fatal error: webots/RangeFinder.hpp: No such file or directory
   19 | #include <webots/RangeFinder.hpp>
      |          ^~~~~~~~~~~~~~~~~~~~~~~~
compilation terminated.

... <- (many more similar messages here referring to different devices)
```


I have installed the latest r2021-b nightly build (webots\_2021b\_amd64.deb) and now it seems to work correctly. I pointed out the `webots_ros2_driver/webots` submodule to the latest r2021b branch commit.



Rviz is showing me this though, but I don't know if its serious:

```
[occupancy_grid_node-2] [WARN] [1623950378.518803902] [occupancy_grid_node]: submap_slices and last_frame_id is empty
```
%figure
![Kazam_screenshot_00001.png](https://cdn.discordapp.com/attachments/565154703139405824/855134904664064030/Kazam_screenshot_00001.png)
%end


I've just noticed these error messages:

```
[driver-3] Error: libgeneric_robot_window.so: cannot open shared object file: No such file or directory (dynamic library)
[driver-3] Error: failed to load /usr/local/webots/resources/projects/plugins/robot_windows/generic/libgeneric.so library
```

##### Darko Lukić [Cyberbotics] 06/18/2021 06:22:17
Make sure to enable the differential controller:

```
ros2 control load_start_controller diffdrive_controller
```

I missed to include the `controller_manager/spawner`  node to automatically start necessary controllers


Those error messages concern the robot window, they shouldn't affect the ROS 2 driver

##### chinex 06/18/2021 07:17:56
Hallo Team, please how do I transfer a webots C API to a real khepera IV robot?

##### bingdong 06/18/2021 09:30:29
Hi, is there a CAD file type that maintains the hierarchy of components when being exported to Webots? Right now, in .obj, all of them get restructured as children of a single solid node.

##### Luftwaffel [Moderator] 06/18/2021 22:06:41
try .wrl

##### Skyrim 06/19/2021 10:25:49
Can someone guide me as to how can I have the human walking in webots using cpp


Any help is appreciated

##### zapata 06/20/2021 07:35:19
Hi everyone, I haven't installed Matlab in my PC, but Octave is installed;

Can I use it to run a m file in Webots controller?


You can study this book: [https://link.springer.com/book/10.1007/978-3-642-54536-8](https://link.springer.com/book/10.1007/978-3-642-54536-8)

##### mclzc 06/21/2021 03:17:27
Hi, I'm having trouble moving a robot to the new plugin system. I'm first trying to replicate what the Turtlebot example has. I'm getting this error:

```
[driver-3] Warning: "inertial_unit" device not found.
[driver-3] terminate called after throwing an instance of 'std::runtime_error'
[driver-3]   what():  Cannot find InertialUnit with name inertial_unit
[ERROR] [driver-3]: process has died [pid 423470, exit code -6, cmd '/opt/manuel/workspace/install/webots_ros2_driver/lib/webots_ros2_driver/driver --ros-args --params-file /tmp/launch_params_985fv4cq --params-file /opt/manuel/workspace/install/mbot4_webots/share/mbot4_webots/resource/ros2control.yml -r /diffdrive_controller/cmd_vel_unstamped:=/cmd_vel'].
```



- In the urdf file I have the IMU defined.

- In the PROTO file it is not, although it is in the world file, just like in the Turtlebot example.

- The `ros2control.yaml` file is as well present.

##### Darko Lukić [Cyberbotics] 06/21/2021 06:29:17
Can you check whether the IMU name matches in your world and URDF?

##### bingdong 06/21/2021 11:39:58
Hi, I'm trying to simulate a differential drive robot in Webots. It's derived from a fairly simple CAD file which has several parts assembled together for the body and wheels.



After importing it into Webots, I set HingeJoint for the two wheels (end point Solid had the children: tyre, rim, axle, gear) and Hinge2Joint for the front castor wheel (End point Solid; Spherical Shape from CAD file). The rest of the body is children nodes of a Solid, which itself is a child node of a Transform.

 [Robot>Transform>Solid>(SolidPartA>ShapeA), (SolidPartB>ShapeB)...]



I have activated physics for the wheels with the tyre as the bounding object and for the physics for the Robot with ShapeA as the bounding object. However, the simulation isn't performing well. The robot falls back throught the floor and keeps revolving instead of moving forward. I assume that's because I haven't structured the nodes properly and set the bounding object correctly for the Robot. Any help with be greatly appreciate.

##### DDaniel [Cyberbotics] 06/21/2021 11:44:26
`@bingdong` Hi, is it a heavy vehicle? Have you tried lowering the timestep otherwise floor penetration might be noticeably high. Can you show a video/picture of the issue? And possibly the world/proto? Might be easier to pinpoint the issue

##### Jhon mathew 06/21/2021 11:56:28
Hii guys I have used Camera recognition with ros controller.. the problem is there is 3-5 object is recognised in webots window but I am getting only 2 recognised object data in rostopic... please do  give solution how to get all the data of the 5 recognised object. ?

##### bingdong 06/21/2021 12:02:13
I haven't change any of the default physics parameters. I'll share the details and files with you, yes.

##### DDaniel [Cyberbotics] 06/21/2021 12:04:44
keep in mind the default value for density is `1000 kg/m³`, setting the mass instead to something reasonable for your application might be better (like the mass value as measured in your CAD software)

##### Stefania Pedrazzi [Cyberbotics] 06/21/2021 12:08:09
Could you please share your ROS code? This will make it faster to check the issue

##### Jhon mathew 06/21/2021 12:11:56
```def enable_cam(self):

        self.service_name = overhead_cam_name+'/overhead_camera/enable'
        rospy.wait_for_service(self.service_name)
        try:
            handle = rospy.ServiceProxy(name=self.service_name,
                                       service_class=set_int)
            handle(1)   # 1 -> enable & 0 -> disable
            self.img_recognition()

        except:
            print('Service call failed: enabling camera')
```


```def img_recognition(self):
        self.service_name = overhead_cam_name+'/overhead_camera/recognition_enable'
        rospy.wait_for_service(self.service_name)
        try:
            handle = rospy.ServiceProxy(name=self.service_name, service_class=set_int)
            handle(1)

        except:
            print('Service call failed: enabling recognition')
```


I just enabled the camera and enabled recognition.. when I was echoing rostopic it gives me max 2 data of the object even tried to subscribe the topic in python it gives same result. !


max object in recognition is set -1 and all 5 objects is recognized in webots window

##### bingdong 06/21/2021 12:17:13
<@787796043987025941> noted.

##### nap 06/21/2021 12:41:33
When a C/C++ controller crashes, where can I find the reason for the crash?  I.e. the error message or log?  (MacOS/Linux)

##### Darko Lukić [Cyberbotics] 06/21/2021 12:42:08
See: [https://cyberbotics.com/doc/guide/debugging-c-cpp-controllers#using-the-gnu-debugger-with-a-controller](https://cyberbotics.com/doc/guide/debugging-c-cpp-controllers#using-the-gnu-debugger-with-a-controller)

##### Jhon mathew 06/21/2021 13:09:21
please anyone solve this

##### Stefania Pedrazzi [Cyberbotics] 06/21/2021 13:09:44
I'm trying to reproduce the issue. but it will take some time

##### Jhon mathew 06/21/2021 13:10:38
sure ill wait thanks for the reply

##### nap 06/21/2021 13:38:54
I followed the instructions on that page but my controller runs though doesn't stop at my breakpoint.

I set my robot's controller to "<extern>" (and saved it).

I ran 'gdb myController'  (I did 'info sources' to confirm debug symbols were loaded.)

I used "break myContollerClass.cpp:1100" (gdb was able to do tab completion as I entered the name of the file, and showed the memory location of the breakpoint.)

I then typed `run` in gdb, and gdb printed "Starting program: path/to/controller" and indicated it created a new thread for the process, but did not stop.

(*my breakpoint is in a function called from the run loop*)



I then went into my Webots World and pressed the "RUN" button but the time did not start advancing.

(so my controller is waiting for Webots and Webots is waiting for my controller.)



Any tips?

##### mclzc 06/21/2021 13:39:29
Yeah, they match:

```
<inertialUnitName>inertial_unit</inertialUnitName>
```

```
InertialUnit {
  rotation 0 1 0 3.14
  name "inertial_unit"
}
```

##### nap 06/21/2021 13:51:37
`@Darko Lukić`

I set a BP on the 1st line of my code, before the controller is instantiated and I got an error stating "dyld: Library not loaded: @rpath/lib/controller/libController.dylib"

I think I need to figure out how to set @rpath correctly.  The controller usually runs, but started crashing due to some code I added which I need to debug.

##### Darko Lukić [Cyberbotics] 06/21/2021 13:52:41
Did you set the `DYLD_LIBRARY_PATH`? See: [https://cyberbotics.com/doc/guide/running-extern-robot-controllers?tab-os=macos](https://cyberbotics.com/doc/guide/running-extern-robot-controllers?tab-os=macos)

##### nap 06/21/2021 13:53:10
no, I only have `WEBOTS_HOME` set.

##### Darko Lukić [Cyberbotics] 06/21/2021 13:54:11
That should work, maybe you are not loading the latest version of the world file. It looks like some small detail is missing


It is not enough

##### mclzc 06/21/2021 13:56:04
Alright, thanks, I'll look from the ground up.

##### nap 06/21/2021 14:48:38
`@Darko Lukić` :  Interesting.

1st:  Thanks for the instructions.  Essentially they work.

2nd: However, gdb is unreliable as **sometimes**, instead of stopping at the first breakpoint, it simply runs the controller and basically hangs. (Nothing happens in Webots and I have to kill the process.)  Re-running gdb again, usually causes the next run to actually stop at a breakpoint.

3rd: My controller crashes on a unlikely line: `iteration++` (where iteration is defined as an int32\_t). (Seg fault )

4th: Sometimes my controller runs one pass through the run loop but I can't get it to make another iteration as I get a bus error.

##### Darko Lukić [Cyberbotics] 06/21/2021 14:53:23
> 2nd: However, gdb is unreliable as sometimes

Hmm, gdb is typically quite stable for me.



> 3rd: My controller crashes on a unlikely line: iteration++ (where iteration is defined as an int32\_t). (Seg fault )

You can do `bt` to see what caused the segmentation fault.

##### nap 06/21/2021 14:57:16
yea.  I get:

(gdb) bt

\#0  0x000000010001489d in fPuckWhiteboardIfaceClass::run (this=0x101808200) at fPuckWhiteboardIfaceClass.cpp:284

\#1  0x00007ffeefbfe5f0 in ?? ()

\#2  0x0000000101808200 in ?? ()

\#3  0x010000000000001a in ?? ()

\#4  0x0000000101808200 in ?? ()

\#5  0x00007ffeefbfe640 in ?? ()

\#6  0x000000010001cfed in main () at fPuckInterfaceContainer.cpp:16

Backtrace stopped: frame did not save the PC



line 284 is:   ` iteration++;` and after executing the line, it equals `1`.  Seg fault??


I don't usually use `gdb` from the CLI.  I'm going to see if I can make use of Xcode to help me debug this.  (See you next year! 😉 )

##### Darko Lukić [Cyberbotics] 06/21/2021 15:52:11
Visual Code is well integrated with `gdb`, I have a great experience. Everything works almost out-of-the-box, you only need to configure the `launch.json`, something like this:

[https://gist.github.com/lukicdarkoo/8b99429863682f0b990fb13cf7b417b4#file-launch-json](https://gist.github.com/lukicdarkoo/8b99429863682f0b990fb13cf7b417b4#file-launch-json)

##### mclzc 06/21/2021 16:03:36
I was missing something like this:

```
field MFNode     extensionSlot   [ ]
```

Created an issue:

[https://github.com/cyberbotics/urdf2webots/issues/123](https://github.com/cyberbotics/urdf2webots/issues/123)

##### Darko Lukić [Cyberbotics] 06/21/2021 16:13:21
Can the `--tool-slot` argument help?

##### Stefania Pedrazzi [Cyberbotics] 06/21/2021 16:15:13
I can reproduce the issue. Webots ROS controller is correctly publishing all the messages but sometimes the subscribers only get part of them. I'm now inspecting how to solve it.

##### nap 06/21/2021 16:21:47
Using an Xcode 12.4 External Build System, I'm able to build my controller.  However, I'm not able to debug it from Xcode because the controller can't find `libController.dylib` even though I've set WEBOTS\_HOME and DYLD\_LIBRARY\_PATH in the schema's environment.

Anyone on MacOS know how to fix this issue?



FIXED:

Instead of defining `DYLD_LIBRARY_PATH=${WEBOTS_HOME}/lib/controller`  (where `WEBOTS_HOME` was defined in the env entry above this one) I defined it as `DYLD_LIBRARY_PATH=/Applications/Webots.app/lib/controller`.

Seems that Xcode does not do variable expansion across entries....

##### Jhon mathew 06/21/2021 16:36:45
thanks 🙂.



note : even I tried "rostopic echo" it gives same 2 object data !

##### TheGiant 06/21/2021 17:51:44
Hello, I was playing with USE/DEF, and found the hard way that I can't use it with Solid.

The doc state that we could use PROTO to do that, but I still need somewhere in it a Solid node, to be able to add physic and so on.

But Webots complain that even inside a PROTO node and I can't use use/def with those PROTO...

I had to modify the code to allows definition of use/def on (nested) solid node, but I was wondering if there is a proper solution to that.

##### mclzc 06/21/2021 18:10:28
I've answered in the Github issue `@Darko Lukić`, thanks.


I have a different question. My PROTO file, generated from a URDF, looks like this for the IMU-related section:

```
Robot {
    ...
    children [
        ...
        Solid {
            translation 0.000000 0.000000 0.075000
            rotation 0.000000 1.000000 0.000000 0.000000
            children [
                Shape { ... }
                InertialUnit {
                    name "imu inertial"
                }
                Accelerometer {
                    name "imu accelerometer"
                }
                Gyro {
                    name "imu gyro"
                }
                Compass {
                    name "imu compass"
                }
            ]
            name "imu_link"
            boundingObject Box { ... }
        }
    ]
}
```



However, the `/imu` topic gives me `nan` accelerations and zero angular velocities. Only when I manually move the IMU devices outside of that `Solid` and make them first-level children of `Robot` in the PROTO file, is that I get actual `/imu` actual values.


The message with the default conversion looks like this:

```
header:
  stamp:
    sec: 1624299940
    nanosec: 148959939
  frame_id: imu_link
orientation:
  x: 0.0019437122298485167
  y: 0.7071041087741524
  z: 0.7071041072736537
  w: 0.0019449458111361168
orientation_covariance:
- 0.0
...
angular_velocity:
  x: 0.0
...
angular_velocity_covariance:
- 0.0
...
linear_acceleration:
  x: .nan
...
linear_acceleration_covariance:
- 0.0
...
```

##### Stefania Pedrazzi [Cyberbotics] 06/21/2021 19:04:21
DEF/USE cannot and should not be used with Solid and joint nodes:

[https://www.cyberbotics.com/doc/reference/def-and-use?tab-language=ros#use-exceptions](https://www.cyberbotics.com/doc/reference/def-and-use?tab-language=ros#use-exceptions)

DEF/USE nodes represents identical nodes and different instances of Solid node would never be identical.

So modifying the Webots code to support DEF/USE for Solid nodes is fundamentally wrong.

Instead, as suggested you should define your Solid in a PROTO file and add different instances of this PROTO (without using DEF/USE)

##### TheGiant 06/21/2021 19:20:52
`@Stefania Pedrazzi`  Hmm... that make sense, i've just tweak the code to check if I didn't have issues anywhere else, so no worry 🙂 I will give another try to use solid in proto, but for the moment I had no luck (that why I'm here) , webots still complain :/ maybe need to sleep a bit before ! (I was thinking about def/use in different transform node, to get the solid at different position) . gonna try again, thank for the feedback !

##### Jhon mathew 06/22/2021 06:49:04
might be problem is due to queue size of publisher.. If I am not wrong .

##### Darko Lukić [Cyberbotics] 06/22/2021 06:53:38
> The parent node of an Accelerometer node should have a Physics node defined in its physics field, so that correct measurements can be performed.

[https://cyberbotics.com/doc/reference/accelerometer](https://cyberbotics.com/doc/reference/accelerometer)



It seems that your Solid doesn't have a Physics node

##### Stefania Pedrazzi [Cyberbotics] 06/23/2021 06:41:49
Just for info, you can find updates on this issue here: [https://github.com/cyberbotics/webots\_ros/issues/64](https://github.com/cyberbotics/webots_ros/issues/64)

##### nap 06/23/2021 06:57:18
Is there a way of rearranging nodes in the UI without editing the WBT file?  I'm getting a warning that Viewpoint should be at position 2.

##### Stefania Pedrazzi [Cyberbotics] 06/23/2021 07:00:24
You can copy and paste nodes from the UI to rearrange them, but then you have to save the changes to the WBT file otherwise you will always get the warning at load.

##### nap 06/23/2021 07:02:49
Thanks!  Bit clunky but worked.  Would be nice to drag/drop instead.

##### oroulet [Premier Service] 06/23/2021 09:11:08
Hi, We want to do external control of an axis at 100+Hz. Currently we do that by just changing the node position without motor and joints. That works fine and the moves are smooth.

Now we are looking at the doing that the "normal" way using motor and joints. but the moves are hacking a lot even with really high velocity and -1 as acceleration. Is there any best practice on joint/motor setup for that? should we try to change joint position directly instead of sending position to motor?

In reality we send pos, acc and vel at 100+Hz to a PLC and the PLC does what it can follow that


also we can set velcoity to INFINITY in code but we found no way to set MAxVelcotiy for a motor than way so we get that warning:



WARNING: DEF MyRobot1 RobotGrab1 (PROTO) > SliderJoint > Forks (PROTO) > HingeJoint > DEF Axis1 Axis1 (PROTO) > SliderJoint > DEF Axis2 Axis2 (PROTO) > SliderJoint > LinearMotor: The requested velocity inf exceeds 'maxVelocity' = 1e+10.

##### Olivier Michel [Cyberbotics] 06/23/2021 09:43:01
Some hints:

1. You should increase not only the maxVelocity, but also the maxTorque (or maxForce if it is a LinearMotor).

2. Using a large value for the velocity (e.g., = maxVelocity) instead of INFINITY should fix the warning.

3. I don't recommend changing the joint position directly as it bypasses the physics engine and will produce unstable results.

##### Johan2021 06/23/2021 11:21:50
Hi, I am controlling a robot modeled as a series of rigid segments connected by spring-damper balljoints including 3 rotational motors (.proto extract attached as file with a foot, ankle and body segment shown respectively). As shown in the (good) video, the robot crawls by bending the main body (by controlling the joints), and attaches itself to the surface by exerting a force on the foot segments (via a plugin). The foot segment joints are rigid and not controlled, while the ankle joints are generally flexible (torque = 0) and only controlled when the front foot should lift itself (this happens after a force is applied (lock) to the back foot and is taken away (unlock) from the front foot). Controlling the joint positions is done via the rotational motors.



The 2 videos show the intended (good) case, and an unintended (bad) one where the ankle position 'overflows' to 8.4 radians (the output from position sensors in the ankle joints). Both use exactly the same controller and plugin, but the bad video takes longer to contract and extend the body (via a controller parameter). Once this 'overflow' occurs, it also continues to show unintended behavior when lifting the feet again (i.e. when actively controlling the ankle joints). Is there anyone who may have a clue why or how this 'overflow' could happen in the ankle joints - or some clues on how to avoid this (best practices)?



It seems that the simulator is simulating physics correctly as there is no error message, so I wonder what interaction / physics step could cause this?



%figure
![demo_bad.png](https://cdn.discordapp.com/attachments/565154703139405824/857218928011116544/demo_bad.png)
%end



> **Attachment**: [demo\_bad.mp4](https://cdn.discordapp.com/attachments/565154703139405824/857218928044146698/demo_bad.mp4)



%figure
![demo_good.png](https://cdn.discordapp.com/attachments/565154703139405824/857218934033612840/demo_good.png)
%end



> **Attachment**: [demo\_good.mp4](https://cdn.discordapp.com/attachments/565154703139405824/857218933891530772/demo_good.mp4)



> **Attachment**: [proto\_extract.proto](https://cdn.discordapp.com/attachments/565154703139405824/857218937804685322/proto_extract.proto)

##### pyphais 06/23/2021 21:26:07
Hi, I'm trying to run a purely kinematics simulation using a robot that's set up in the way that should use a kinematics algorithm to compute the location of the vehicle (from this in the physics documentation: "The Robot nodes with a differential wheels configuration are a special case: they can move even if they don't have Physics nodes. That's because Webots uses a special kinematics algorithm for this kind of robots without Physics"). However, I am having some issues: firstly, the wheels spin backwards as the robot moves forwards, which makes no sense. Second, even if the wheels were spinning the correct way, the robot is not moving as it should when the left and right wheels are set to different speeds (ie when turning). I made a quick world to check what's going on and tested what happened when I set the left wheel motor speed to 1.5 and the right wheel motor speed to 1 (rad/s). With a wheel radius of 0.04m this should mean the left wheel is moving linearly 0.06m/s and the right is moving at 0.04 m/s. Using a position sensor on the wheels confirms that the motors do spin at 1 and 1.5 rad/s. However, putting a gps at the same position as the center of each wheel tells me the wheels are actually moving linearly 0.0580364 m/s instead of 0.6, and 0.0427993 m/s instead of 0.4, so the robot obviously does not turn on the arc I specify, the turning radius is much larger. What's going on? This 'special kinematics algorithm' seems to be flawed in my world and I can't find it anywhere to see why the vehicle won't move at the correct speed while turning, or why it's moving in the opposite direction that the wheels turn in. Any information or help would be appreciated, thank you.

##### mclzc 06/24/2021 03:32:47
Thank you, adding this to my URDF and letting urdf2proto process it added the missing `Physics` node to my PROTO. Now I see the IMU values.

```
<inertial>
  <origin xyz="0 0 0" rpy="0 0 0"/>
  <mass value="0.01"/>
</inertial>
```

##### It'sMe 06/24/2021 04:58:31
Hii team, I have created assembly of robotic arm in Webots by importing CAD parts of arm, I have given hinge joints between different parts but I am not able to add motors in devices under hinge joint node.

 Any solution ?

##### Luftwaffel [Moderator] 06/24/2021 06:23:01
The assembly has to be part of a robot. You can only add devices to robots, not solid nodes

##### oroulet [Premier Service] 06/24/2021 07:07:08
Thanks for the update. We followed the hints over but the moves are still hacking much more than when moving the nodes 🤔 . What method does the ROS drivers use? They are also very keen into controlling motors at high frequencies

##### Olivier Michel [Cyberbotics] 06/24/2021 07:10:03
They use the same. I suspect the problem is more in your model rather than in the control method. Can you send a simplified simulation at support@cyberbotics.com which demonstrates the problem? We will look into it and determine what's wrong.

##### It'sMe 06/24/2021 12:56:34
Ok

Thanks

##### TheGiant 06/24/2021 13:21:20
Hello, I'm playing with the mass property of the physic node, and I'm confused about how the mass work : for instance : with a robot (a body 10kg and 4 legs 2kg each), I get 18kg. I'm using a node physic for each 5 Solid(4 leg, and the body), which is fine. But I need (is that right ?) a physic node on the robot node to get him moving, and I can't use a mass of zero in this one. I always end up putting a small negligible mass here (it's node pretty), but I don't understand the meaning of this mass. Did I miss anything ?

##### Darko Lukić [Cyberbotics] 06/24/2021 13:26:09
In that case you should have 4 solids (4 legs) and the 5th one should be a Shape node (robot's body). Your robot's physics and bounding object should be related to the Shape node.



Check the `DEF_BODY` in the picture:

[https://cyberbotics.com/doc/guide/tutorial-6-4-wheels-robot#low-level-representation-of-the-4-wheeled-robot](https://cyberbotics.com/doc/guide/tutorial-6-4-wheels-robot#low-level-representation-of-the-4-wheeled-robot)

##### TheGiant 06/24/2021 13:33:15
`@Darko Lukić` Thanks ! Never understood why I need a shape in that case before, that make more sense now. Is this true for nested Solid ? I mean for instance : if the leg (which is a solid) is composed of multiple part, the mass of the physic node of this solid is related to all the Shape in the "children" list. Could I put multiples Shape in here ? (i do think yes) (maybe in a group)

##### Darko Lukić [Cyberbotics] 06/24/2021 13:39:58
Less solids you have the better, it's easier for the physics engine and your simulation will run faster. Avoid adding a solid in a solid (if not necessary), you can always define multiple shapes inside a solid and multiple bounding objects.



P.S. There is an optimization in Webots to cope with unnecessary solid chains. It basically tries to merge two or more solids if possible before sending them to the physics engine.

##### TheGiant 06/24/2021 13:48:13
I agree, I'm here because of weird behavior and a "difficult" simulation (many solid, closed loop...) (performance not a big issue, for now), and I'm trying to understand what impact what... I'm using model coming from CAD, and nested assemblies are the norm. But I'm figuring out, as you said, that copying this pattern could cause trouble... Could I use nested Transform node, still ?

Yes, read about that one, clever trick. However I will try to replace as much Solid as I can with Shape, it should help out.

##### Darko Lukić [Cyberbotics] 06/24/2021 13:49:46
> Could I use nested Transform node, still ?

I don't see why not 🙂

##### TheGiant 06/24/2021 13:50:14
About bounding box : I've a large part of my robot in which I don't care about collision, and I've figured out that I could use the inertia matrix computed by CAD, and use it there. Is it a good idea ?

##### DDaniel [Cyberbotics] 06/24/2021 13:53:19
You can either define the mass/density and a boundingObject (in which case Webots will compute the rest using this info) or just set the Physics node and additionally provide the `centerOfMass` and `inertiaMatrix` yourself. Either option is fine

##### TheGiant 06/24/2021 13:55:46
`@DDaniel` Yes I think I will go this route. And I think I've read that is I specify both (matrix and bounding box), the provided inertia matrix (and center of mass) will take over, but the bounding box will still be used for collisions

##### DDaniel [Cyberbotics] 06/24/2021 13:57:22
I believe so yes

##### TheGiant 06/24/2021 14:00:29
Thank for your help `@DDaniel`  `@Darko Lukić`  🙂

##### Majanao 06/25/2021 06:02:58
Hi all, month ago was working a simulation run by an external controller where I was able to do simulationReset() without killing the external controller. Now I'm using the same code for a different simulation and the controller stops after calling simulationReset(). Did Webots change or did I miss a simulation parameter which is defining this behaviour?

##### Darko Lukić [Cyberbotics] 06/25/2021 06:26:34
Normally it shouldn't reset the controllers. Which version do you use? See:

[https://cyberbotics.com/doc/reference/supervisor?version=develop#resetreload-matrix](https://cyberbotics.com/doc/reference/supervisor?version=develop#resetreload-matrix)

##### Majanao 06/25/2021 07:15:51
Hi Darko, we were using 2020b earlier and 2021a now.

I just figured out, that it is the robot model, not the code. I imported our old protos model and it works. The new one doesn't. It was created with URDF2Webots. I tried to copy all the setup parameters from the old protos into the new one, but that doesn't work either.



`field SFVec3f    translation     0 0 0             # Is `Transform.translation`.

  field SFRotation rotation        1 0 0 0           # Is `Transform.rotation`.

  field SFString   name            "GEN3-6DOF"           # Is `Solid.name`.

  field SFString   controller      "extern"            # Is `Robot.controller`.

  field MFString   controllerArgs  []                # Is `Robot.controllerArgs`.

  field SFBool     supervisor      TRUE             # Is `Robot.supervisor`.

  field SFBool     synchronization TRUE              # Is `Robot.synchronization`.

  field SFBool     selfCollision   TRUE              # Is `Robot.selfCollision`.

  field MFNode     toolSlot        []                # Extend the robot with new nodes at the end of the arm.

  field SFBool     staticBase      TRUE              # Defines if the robot base should ba pinned to the static environment.

  field MFNode     cameraSlot          [ Camera {    fieldOfView 1.134464013798

                                                width 320

                                                height 240

                                                near 0.01

                                                } ]

  field MFNode     rangeFinderSlot        [ RangeFinder { fieldOfView 1.256637061438

                                                    width 424

                                                    height 240

                                                    near 0.18

                                                    minRange 0.18

                                                    } ]

]`

##### Darko Lukić [Cyberbotics] 06/25/2021 07:35:10
I am not sure if understand the problem. The simulationReset() works with the old PROTOs, but not with the PROTO generated with urdf2webots?

##### Majanao 06/25/2021 07:38:16
I have to admit, that this is a weird issue. But that seems to be the case. The only difference between both versions is the proto model and the one is working, the other one (generated with URDF2Webots) doesn't.

##### Darko Lukić [Cyberbotics] 06/25/2021 07:41:03
If you put both PROTOs in the same simulation and you reset it simulationReset() than one controller is reset, while the other is running? Can you send us the minimum example to reproduce it?

##### Majanao 06/25/2021 07:41:53
I have a meeting now. I'll do that afterwards. Thanks for help!

##### Jan Weber 06/25/2021 08:37:25
Hello,

I am currently working on a cosimulation between Webots and a human crowd simulator. The idea is to move crowds of pedestrians realistically in Webots. This works quite well so far. Since the crowd simulator (Menge crowd simulator) also needs a map of the world, I am looking for a way to export a 2D map of the obstacles from the Webots world.

My approach so far is to export to VRML, convert it to STL and slice it. However, this seems quite complex to me. Does anyone have a better idea?



Many greetings

Jan Weber

##### Darko Lukić [Cyberbotics] 06/25/2021 08:44:54
Maybe you can put a range finder at a very high altitude pointing to the ground (with a high value for the focal length). Then you should be able to use a simple thresholding, everything above the threshold is an obstacle.



That is one idea. Maybe somebody else has a better idea?

##### Jan Weber 06/25/2021 08:57:30
Thank you! That's a good idea and I'll give it a try. However, this approach also recognises objects as obstacles under which pedestrians can pass.

##### bingdong 06/25/2021 09:34:21
Hi, I wish to remove noise from my simulation. Which node contains the lookup table?


I have hinge joints in my robot. The noise for the position sensor device added to those is 0. Does that mean any noise in the simulation will only be amounting from the physics engine?

##### DDaniel [Cyberbotics] 06/25/2021 09:38:08
`@bingdong` Hi, here's more details: [https://cyberbotics.com/doc/guide/modeling#how-to-remove-the-noise-from-the-simulation](https://cyberbotics.com/doc/guide/modeling#how-to-remove-the-noise-from-the-simulation)

##### bingdong 06/25/2021 09:40:39
I was following the same. It says, set the third  column in each lookup table to zero. I'm not sure where I can find that.

##### DDaniel [Cyberbotics] 06/25/2021 09:41:01
For instance if you have a `DistanceSensor`


or an `accelerometer`,  `Gyro`

##### bingdong 06/25/2021 09:42:20
In case of a Position Sensor, that would be the noise parameter?

##### DDaniel [Cyberbotics] 06/25/2021 09:42:50
yes

##### bingdong 06/25/2021 09:43:04
Cool, cool, thanks!

##### oroulet [Premier Service] 06/25/2021 11:13:16
Looks like we solved the issue by increasing even more the max velocity and forces. Thanks for the feedback

##### Julius 06/25/2021 11:39:11
Hi, we are trying to implement connectors to move the pallet together with the arm in the gif. At this point the connectors locks together, but when moving the arm, the pallet stays still. It also loses its "solidness" and the arm is able to move through it. The same happens when trying on a standard solid box with a connector. We have tried both symmetrical and active/passive connectors. Physics is enabled on both of the connectors parentnode, and mass defined.

On the right side of the gif is values from the connector on the moving arm.

Do anyone have any ideas what could be the problem?
%figure
![Connector_fail.gif](https://cdn.discordapp.com/attachments/565154703139405824/857948032595525632/Connector_fail.gif)
%end


We figured it out 😃

##### Olivier Michel [Cyberbotics] 06/25/2021 13:51:18
What was the problem?

##### Julius 06/25/2021 13:54:30
Conflicting boundingObject definitions in the proto and world-file for the arm i believe

##### Ameera Said 06/25/2021 15:03:18
Hello , please can you help me how to write program for this humanoid robot . I need it to move

How can i write codes in C program
> **Attachment**: [humanoid\_robot.wbt](https://cdn.discordapp.com/attachments/565154703139405824/857999404183060540/humanoid_robot.wbt)


Please help me

##### mclzc 06/25/2021 22:51:14
Hi, is it ROS convention to have "/point\_cloud" [there]([https://github.com/cyberbotics/webots\_ros2/blob/55043633c37b6afb5b2c80b768ceb0aaa8b7afe7/webots\_ros2\_driver/src/plugins/static/Ros2Lidar.cpp#L57](https://github.com/cyberbotics/webots_ros2/blob/55043633c37b6afb5b2c80b768ceb0aaa8b7afe7/webots_ros2_driver/src/plugins/static/Ros2Lidar.cpp#L57)) ? I was expecting to be able to fully define my topic name in the `<topicName>/something</topicName>` tag.

##### Vin 06/26/2021 03:09:47
In the case of the dji mavic drone, why does the drone drift over time?


I would appreciate it if someone could explain it.


I solved it . Thank you


I would like to ask whether webots has an optical flow module that can be used to hover the drone indoors.

##### Sergen Aşık 06/27/2021 13:37:28
Hi, is there anyone work on octomap?


I can't figure out

##### bingdong 06/28/2021 08:04:08
Hi, I wanted to ask how does changing the basicTimeStep solve the Robot sinking problem. (It worked for me, just want to understand how it'll affect the rest of the simulation).

 [https://cyberbotics.com/doc/guide/modeling#my-robotsimulation-explodes-or-behaves-weirdly-what-should-i-do](https://cyberbotics.com/doc/guide/modeling#my-robotsimulation-explodes-or-behaves-weirdly-what-should-i-do)

##### Darko Lukić [Cyberbotics] 06/28/2021 08:06:53
It will be slower, but more accurate. You can also change CFM, it is a free way to fix the sinking issue.

##### bingdong 06/28/2021 08:16:29
Got it, thanks!

##### Darko Lukić [Cyberbotics] 06/28/2021 08:17:21
We can change that, we can add two parameters:

```xml
<scanTopicName>/something</scanTopicName>
<pointCloudTopicName>/something/point_cloud</pointCloudTopicName>
```


Something like this should work:

```py
led = robot.gedDevice('leds.circle.led0')
led.set(32)
```

##### Julius 06/28/2021 08:24:12
Hi, I'm running into a problem trying to move my robot after connecting to a solid object with a connector. All the movement works except moving downwards. It seems like the arm collides with the object it's holding which stops the movement. When increasing the distanceTolerance for the connectors and connecting with some space inbetween it works. Do anyone know what could be the problem, or a way to fix it without changing the boundingObject?

##### Darko Lukić [Cyberbotics] 06/28/2021 08:25:12
No, but you can use GPS inside or the Supervisor node:

[https://cyberbotics.com/doc/reference/supervisor#wb\_supervisor\_node\_get\_position](https://cyberbotics.com/doc/reference/supervisor#wb_supervisor_node_get_position)

##### Luftwaffel [Moderator] 06/29/2021 00:00:14
`@Julius` can you share your project or show the issue in a video clip?

##### mihir 06/29/2021 04:36:46
I am working wih the pr2, I am currently writing a controller for it in matlab. I wanted to ask if webots has a inbuilt IK solver, or if matlab's IK solver can be used.

##### Julius 06/29/2021 05:07:18
Figured it out! Was a problem with our controller

##### Darko Lukić [Cyberbotics] 06/29/2021 06:51:45
Webots doesn't integrate IK solvers or motion planning algorithms. We provide the ikpy example integration:

[https://github.com/cyberbotics/webots/blob/master/projects/robots/abb/irb/controllers/inverse\_kinematics/inverse\_kinematics.py](https://github.com/cyberbotics/webots/blob/master/projects/robots/abb/irb/controllers/inverse_kinematics/inverse_kinematics.py)

and the OMPL motion planner example (with MoveIt, but also with MoveIt2):

[https://github.com/cyberbotics/webots\_ros/pull/61](https://github.com/cyberbotics/webots_ros/pull/61)



Unfortunately, we don't have any example for MATLAB.

##### mihir 06/29/2021 08:22:13
It should be possible with matlab too right, once I get the target poses? Will try it out.

##### h.sciascia 06/29/2021 09:57:14
Hello everyone,

Is there an option in the PHYSICS Plugin to check a collision for an immobile environment and robot ?

Actually I can only detect collision if one of my objects is moving

Thank in advance ! 😉

##### Даша 06/29/2021 11:21:18
Hello!

Tell me, I didn't find this in the documentation. How are these expressions set? Where do the parameters come from? This is the mavic controller



roll\_input = k\_roll\_p * CLAMP(roll, -1.0, 1.0) + roll\_acceleration + roll\_disturbance

    pitch\_input = k\_pitch\_p * CLAMP(pitch, -1.0, 1.0) - pitch\_acceleration + pitch\_disturbance

    yaw\_input = yaw\_disturbance

    clamped\_difference\_altitude = CLAMP(target\_altitude - altitude + k\_vertical\_offset, -1.0, 1.0)

    vertical\_input = k\_vertical\_p * pow(clamped\_difference\_altitude, 2.0)

##### iagsav 06/29/2021 11:22:32
Hi! I'm programming the copter control algorithm. I found an example of the source code in samples. Please explain what the components in this formula mean: front\_left\_motor\_input = k\_vertical\_thrust + vertical\_input - roll\_input - pitch\_input + yaw\_input

##### Darko Lukić [Cyberbotics] 06/29/2021 12:09:15
`@Даша` `@iagsav` That's the standard quadcopter PD controller. The parameters are empirically determined.

##### iagsav 06/29/2021 12:37:29
Thanks! Maybe you can explain what the parameters "vertical\_input", "roll\_input" , "pitch\_input" , "yaw\_input" mean"

##### mclzc 06/29/2021 22:05:58
That would be great.


Hi, is there a way to configure the topic name where the current /odom info will be published?

##### Darko Lukić [Cyberbotics] 06/30/2021 06:27:02
You can use `remappings`:

[https://github.com/cyberbotics/webots\_ros2/blob/feedcb5293fc717b41db177eadc56a8b82b50d3c/webots\_ros2\_turtlebot/launch/robot\_launch.py#L65-L67](https://github.com/cyberbotics/webots_ros2/blob/feedcb5293fc717b41db177eadc56a8b82b50d3c/webots_ros2_turtlebot/launch/robot_launch.py#L65-L67)



The same can also be applied for the LiDAR topic names

##### Annan 06/30/2021 08:58:55
Hello,  I have a question: is it possible to  train the PPO in multiprocess model with webots. Which means that  I will use one external controller(agent) to collect datas in several webots instantiation. I can train the ppo in one webots simulation and want to speed it up by data parallelism


I find some hints from the discord archive, but didn't understand very well.


[https://www.cyberbotics.com/doc/guide/running-extern-robot-controllers?tab-os=linux&tab-language=python](https://www.cyberbotics.com/doc/guide/running-extern-robot-controllers?tab-os=linux&tab-language=python)



%figure
![archive.png](https://cdn.discordapp.com/attachments/565154703139405824/859722523423932446/archive.png)
%end

##### Darko Lukić [Cyberbotics] 06/30/2021 09:10:23
You can spawn multiple Webots simulations and then attach an external controller to each of them

##### Annan 06/30/2021 09:13:52
yes, but for each Webots simulations, it need at least one external controller, which means training several agent simutaneously. I hope to train one agent with multiple Webots simulations to collect data.


Luftwaffel have shared a demo in this link:[https://drive.google.com/file/d/1C4ICDz30GjKs5PkuYxNW8\_mFCcxEJlPs/view?usp=sharing](https://drive.google.com/file/d/1C4ICDz30GjKs5PkuYxNW8_mFCcxEJlPs/view?usp=sharing), but I am not sure this demo trains four agent or just one agent. Would you please give me more details

##### Darko Lukić [Cyberbotics] 06/30/2021 09:17:48
It trains one agent, but it collects an experience from multiple simulations


If you use baselines, there is the `SubprocVecEnv` module which allows interaction with multiple agents running in different processes

##### Annan 06/30/2021 09:30:00
Amazing work! Thank you very much. I use stablebaselines3, it  aslo has the SubprocVecEnv, but I don't know how to make each simulation and external controller become consistent. Should I launch the webots in my gym-env class and give unique PID to WEBOTS\_PID variable, ................or just wrapper  my custom env into SubprocVecEnv, then stablebaselines3 will do the other things automaticly?


I try to use Webots to train a humanoid with 24 DoF, the actions space is very high, so that multiprocessing is very important for me

##### Darko Lukić [Cyberbotics] 06/30/2021 09:34:24
You have to assign a controller to the correct Webots instance either with  `WEBOTS_PID` or `WEBOTS_TMPDIR`.


Something like this:

```py
def make_env(unique_id):
    os.environ['WEBOTS_TMPDIR'] = os.path.join('/tmp', unique_id)
    subprocess.call(['webots'])
    supervisor = Supervisor()
    env = MyWebotsEnv(supervisor)
    return env

env = SubprocVecEnv([lambda: make_env(i) for i in range(n_jobs)])
model = PPO('MlpPolicy', env)
model.learn()
```

##### Annan 06/30/2021 09:39:06
Thank you very much for the kind help,  I will try it.  👍 👍


Thank you again, these are really helpful😃

##### Darko Lukić [Cyberbotics] 06/30/2021 09:41:41
Note, it is a pseudo code, it will not work out-of-the-box

##### Annan 06/30/2021 09:44:13
Yes, I will code by myself.

##### Johan2021 06/30/2021 11:26:52
Hi, I am using a ballJoint with 3 rotational motors as shown in the extract, to control a robot joint. The jointParameters nodes specify the axes of rotation ([https://cyberbotics.com/doc/reference/jointparameters?tab-language=python](https://cyberbotics.com/doc/reference/jointparameters?tab-language=python)). When I spawn the model with a different orientation (either inside the proto file or the wbt file), these axes seem to be in **absolute** coordinates, and not w.r.t. the body frame. While if the robot is spawned with zero rotation, the axes remain expressed w.r.t. the body frame while the robot is moving and changing its global orientation. Is this intended or is there a way to express the axes in relative coordinates?
> **Attachment**: [extract.wbt](https://cdn.discordapp.com/attachments/565154703139405824/859756873241853952/extract.wbt)

##### James Le Poidevin 06/30/2021 12:14:29
Hello, I'm having a hard time converting a C controller to python. While converting these lines :

```
  // Robot init for webots
  wb_robot_init();

  // Activate keyboard input
  wb_keyboard_enable(TIME_STEP);

  // get the root children field
  const WbNodeRef root_node = wb_supervisor_node_get_root();
  const WbFieldRef root_children_field = wb_supervisor_node_get_field(root_node, "children");


  // Get the droneE and droneA node using the supervisor
  droneE = wb_supervisor_node_get_from_def("Drone");
  droneA = wb_supervisor_node_get_from_def("DroneA");

  // Enable the camera
  camera = wb_robot_get_device("camera1");
  wb_camera_enable(camera, 64);
```

I have 2 robots in the simulation and both are nearly identical. I want to get the robot node for DroneA and activate the camera, in C it works fine but i can't get it to work in python. Do you have any idea how to use the supervisor to activate cameras and move motors ?

Precision: Using Supervisor and controller on DroneA

##### Stefania Pedrazzi [Cyberbotics] 06/30/2021 12:27:07
`@James Le Poidevin` You can activate the camera for DroneA only from the controller of DroneA using the Camera API.

This is exactly the same independently if using C or Python controller.

##### James Le Poidevin 06/30/2021 12:29:25
```
# create the Supervisor instance.
supervisor = Supervisor()

DroneE = supervisor.getFromDef("Drone")
DroneA = supervisor.getFromDef("DroneA")

cameraPitch = DroneA.getDevice("camera pitch")
cameraPitch.setPosition(float('+inf'))
cameraPitch.setVelocity(0)
```

This is for the motors but it's the same problem.

This is the error:

```
Traceback (most recent call last):
  File "drone_ally_defense.py", line 22, in <module>
    cameraPitch = DroneA.getDevice("camera pitch")
  File "/usr/local/webots/lib/controller/python38/controller.py", line 1756, in <lambda>
    __getattr__ = lambda self, name: _swig_getattr(self, Node, name)
  File "/usr/local/webots/lib/controller/python38/controller.py", line 96, in _swig_getattr
    raise AttributeError("'%s' object has no attribute '%s'" % (class_type.__name__, name))
AttributeError: 'Node' object has no attribute 'getDevice'
```

##### Stefania Pedrazzi [Cyberbotics] 06/30/2021 12:32:56
Ok. So let me better explain.

First, you can activate the camera only if the `DroneA.controller` is set to run this supervisor controller.

Then, the `getDevice` method is part of the `Robot` class and not the `Node` class. This means that you should call `supervisor.getDevice("camera pitch")`.

##### James Le Poidevin 06/30/2021 12:35:11
Thank you, It works now 👍

##### AloneLeader 06/30/2021 19:01:09
Is there anyone who knows how to make a pulley and rope system


I cant figure it out which joint should i use

## July

##### Johan2021 07/01/2021 10:22:01
if it is just a planar rope-pulley case, normal hingeJoints are simple and sufficient to connect a series of smaller rigid segments, but if you would move or exert force in multiple directions, you should use a ballJoint - for both cases, you can model cord extension/tension using the spring/damper fields of the joint nodes. For interaction with the pulley you should modify the contact properties between rope and pulley - hope that helps, but I am no expert

##### Stefania Pedrazzi [Cyberbotics] 07/01/2021 11:25:38
Axes should always remain expressed in local coordinates w.r.t to parent node.

Could you provide the complete PROTO model of the robot?

You are moving the joint using the motors and not directly changing the JointParameter position, is it correct?


`@AloneLeader` additionally you can find here a simple example of rope simulation.


`@Johan2021` I can reproduce the issue with ball joint. This is clearly a bug. We will inspect and fix it.

##### Johan2021 07/01/2021 12:40:50
That is correct

##### Batrox 07/01/2021 16:27:06
is ist normal that the simulation speed varies? because i set up a robot with a leg that is moving in constant speed most of the time (and hitting the ground) but every 10 seconds it rotates extremely fast for about half a second

##### Bitbots\_Jasper [Moderator] 07/01/2021 19:56:49
simulation speed depends on many factors such as how many collisions need to be calculated and how complex the objects colliding are. It can therefore vary quite a bit depending on whats going on

##### Batrox 07/01/2021 19:57:38
alright that's good to know, thanks

##### Bitbots\_Jasper [Moderator] 07/01/2021 19:59:36
if your simulation is too slow then there are a few things you can do to improve it: [https://cyberbotics.com/doc/guide/speed-performance](https://cyberbotics.com/doc/guide/speed-performance)

##### Batrox 07/01/2021 20:00:55
nice i'll have a look at this, thanks 👍

##### GKiggz 07/02/2021 02:57:57
hello, I keep on getting the current message on my terminal when I run my code (attached in the image). What does it mean and is it related to the fact that no matter what I do to my code, the simulation runs the same exact thing (I can delete my code and save it and the simulation will still run the same thing it has been running for hours)?
%figure
![Screen_Shot_2021-07-01_at_10.55.33_PM.png](https://cdn.discordapp.com/attachments/565154703139405824/860353578287628329/Screen_Shot_2021-07-01_at_10.55.33_PM.png)
%end

##### DDaniel [Cyberbotics] 07/02/2021 06:17:06
`@GKiggz` Hi, like the message says, you're using functions in your controller that in the future will no longer be supported and although it's still working for now, you should consider using the new ones. As for python, you might already have a higher version of it installed, if on Linux you probably already have python3 in which case you can set that as the default python command in the preferences to make the message disappear. If not, you'll need to install a newer version first and then do it.

##### GKiggz 07/02/2021 12:54:02
how do I know what the "new" functions are that I should use? I should also mention that when my friend uses the exact same code, he has no problem

##### DDaniel [Cyberbotics] 07/02/2021 13:49:45
it's written in the message 🙂 Replace the calls of `robot.getMotor` with `robot.getDevice`. He doesn't have the messages probably because he's using a older version of webots.

##### GKiggz 07/02/2021 13:51:02
Thank you! I'll make sure to try it. (I will probably come back with questions because I started using webots 2 days ago)


hi, even when I do robot.getDevice, the same error message comes up, and the code runs the exact same thing


I can literally delete the code and save it and press run and it will do the exact same thing

##### Luftwaffel [Moderator] 07/04/2021 02:07:54
`@GKiggz` can you share your controller? I can take a look


Ohh.. from what you are saying, you are not actually editing the controller


is it your own project? Did you download it?


how are you editing the controllers?

##### GKiggz 07/04/2021 02:10:42
everything is a downloaded file except for some code I am editing

##### alejoxbg 07/04/2021 02:11:04
are you sure you added the controller to the robot?

##### GKiggz 07/04/2021 02:11:14
yes

##### Luftwaffel [Moderator] 07/04/2021 02:11:35
can you share your project?

##### GKiggz 07/04/2021 02:11:45
wait. Maybe not


one sec

##### Luftwaffel [Moderator] 07/04/2021 02:12:12
the surest way to edit the correct controller is to click on "edit" inside Webots


you have to save of course before running it again

##### GKiggz 07/04/2021 02:12:38
yes I did

##### Luftwaffel [Moderator] 07/04/2021 02:13:25
you can discord call me if you want, can take a look with screenshare

##### GKiggz 07/04/2021 02:13:28
at least I have some controller

##### Luftwaffel [Moderator] 07/04/2021 02:13:40
seems like some easy but fundamental mistake

##### GKiggz 07/04/2021 02:14:13
okay, thanks

##### alejoxbg 07/04/2021 02:32:26
Does anyone know how to convert the data from the getImage function in python to a Unit 8 format?

##### Luftwaffel [Moderator] 07/04/2021 02:48:38
[https://www.cyberbotics.com/doc/reference/camera#wb\_camera\_get\_image](https://www.cyberbotics.com/doc/reference/camera#wb_camera_get_image)

##### alejoxbg 07/04/2021 02:50:42
here it says that in python it returns a string, but I need to convert it to Unit 8 to publish it in a ROS Topic
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/861076526577614848/unknown.png)
%end

##### Luftwaffel [Moderator] 07/04/2021 02:51:21
i assume you mean uint8

##### alejoxbg 07/04/2021 02:51:30
yes

##### Luftwaffel [Moderator] 07/04/2021 02:51:54
camera.getImageArray() would be the best bet probably

##### alejoxbg 07/04/2021 02:52:22
I will try, thanks

##### Luftwaffel [Moderator] 07/04/2021 03:00:44
you might want to use default roscontroller. Publishing every image using python image array will be very slow I think

##### alejoxbg 07/04/2021 03:04:50
I just want to visualize it in rviz

##### Luftwaffel [Moderator] 07/04/2021 03:10:13
[https://github.com/cyberbotics/webots\_ros2/blob/master/webots\_ros2\_core/webots\_ros2\_core/devices/camera\_device.py#L117](https://github.com/cyberbotics/webots_ros2/blob/master/webots_ros2_core/webots_ros2_core/devices/camera_device.py#L117)


look at this


it is for ROS2, but the message is the same

##### alejoxbg 07/04/2021 03:14:46
This helps me a lot, thank you


it seems that rospy automatically interprets byte arrays as strings so it does not convert them

##### Rodrigues 07/04/2021 14:55:53
Hello, can anyone help me?


i'm trying to reset the initial positions of objects/robots but the only function to do this is the supervisor.resetSimulation() and this do all the steps in loop


the function resetPhysics() dont work for me


Have another function to do this?


when i set supervisor off i can do but the positions are note restarted


solved with Field/getFromDef/getRotation/getTranslation/Set's in end of the Pool and (finally...) activating the Supervisor to True.

##### thonk enthusiast 07/04/2021 19:12:14
what

##### Icy\_Flurry 07/04/2021 19:12:23
wtf


why is everyone ping enabled

##### sk 07/04/2021 19:12:29
da fuck

##### Maximo Cansino Mateo 07/04/2021 19:12:36
Its spam dont worry

##### Ren is festive 07/04/2021 19:12:53
what

##### thonk enthusiast 07/04/2021 19:13:11
some steam scammer was on here

##### charkoteow 07/04/2021 19:13:28
but i want the knife <:lul:640814880605208616>

##### Ren is festive 07/04/2021 19:13:35
^

##### DavidF 07/05/2021 13:42:40
Is there any good beginner tutorial for using ROS with Webots? I have only been able to find one for ROS2

##### alejoxbg 07/05/2021 17:10:17
I haven't found a good tutorial on ROS with Webots but I think the process for using ROS with Webots is very similar to using it with ROS2, you can help yourself with the ROS tutorials on how to create services, publishers, subscribers and packages and follow the ROS2 tutorial from Soft Ilution changing the ROS2 stuff for the ROS stuff.

##### DavidF 07/05/2021 17:12:00
Thanks! I have done that stuff and found the ROS2 tutorial, but I hoped that there was a good ROS one too 😅

##### amruthraghav 07/05/2021 17:51:14
Hi everyone! I am new to webots and was wondering if there are some good tutorials for webots on python. I did find a few sample codes here and there in the documentation but nothing concrete. Most of the example(sample world) code is in c or c++ as well. I was wondering If anyone could point me to a decent tutorial or GitHub repo with a few sample codes in python. Would highly appreciate! Thanks in advance.

##### alejoxbg 07/05/2021 18:49:00
I think Soft illusion has very good tutorials here is a link to them: [https://www.youtube.com/c/Softillusion/videos](https://www.youtube.com/c/Softillusion/videos)

##### amruthraghav 07/05/2021 18:51:11
`@alejoxbg` thank you so much for the fast reply! This will help a lot. Have a great day/night ahead.

##### Troy 07/05/2021 20:30:22
Hi, in the latest version, the fluid can have force on the solid node, can the force sensor measure the fluid force exerted on the sensor if I submerged the sensor into the fluid and face the sensor towards the waves? I tried with the touch sensor type "force", but the output is always 1.

##### scott.nortman 07/06/2021 03:36:10
Hi, I am unable to have any webot camera work... Even when I download the example worlds that use a camera, images are not displayed.  Has anyone see this before?

##### Ashish Varma 07/06/2021 03:45:02
Hi, i want to teleoperate my bot with keyboard using C language ,,, where  can i find the guidance to make code in    C ????

##### DDaniel [Cyberbotics] 07/06/2021 05:49:29
<@776390965967060993> Hi, Robot nodes can be controlled using the Keyboard API directly [https://www.cyberbotics.com/doc/reference/keyboard](https://www.cyberbotics.com/doc/reference/keyboard). You can search for the Kuka Youbot robot in the samples to have an idea on how to use it

##### Ashish Varma 07/06/2021 06:19:17
`@DDaniel` thank you sir

##### DDaniel [Cyberbotics] 07/06/2021 06:25:51
`@scott.nortman` Hi, if not even the pre-compiled samples (for example: `file > open sample world > samples > devices > camera` ) don't work, the problem might be on your end

##### LucasW 07/06/2021 11:22:18
Hi, I'm using the webots\_ros2\_epuck. I notice in device manager it adds an IMU, so I wanted to use it. However, when I test it by reading the published topic '/imu' the values don't seem to change, or at least, only change a minimal amount (orders of e-03). I don't have any experience using IMU's, is this the correct behaviour?

##### scott.nortman 07/06/2021 12:13:26
`@DDaniel` Thank you for the suggestion, the example cameras work, so it is somthing I am doing incorrectly.

##### Víctor Ávila 07/06/2021 18:05:30
Hey guys, how're you doing? I have a problem with cameras and ROS. I can't enable any cameras using rosservice, it says "Wrong sampling period: 1 for device: camera." and it seems that the sampling period is always set as 0. Do you have any idea on how to fix this?



%figure
![Captura_de_tela_de_2021-07-06_15-02-50.png](https://cdn.discordapp.com/attachments/565154703139405824/862031579868823582/Captura_de_tela_de_2021-07-06_15-02-50.png)
%end

##### alejoxbg 07/06/2021 18:12:15
You can set the sample period when you enable the device


[https://cyberbotics.com/doc/reference/camera?tab-language=python#wb\_camera\_enable](https://cyberbotics.com/doc/reference/camera?tab-language=python#wb_camera_enable)

##### Víctor Ávila 07/06/2021 18:57:51
Thanks


It turns out it is an issue with the most recent 2021b Nightly Build


I replaced my Webots with the 2021a apt-get package and now I am able to run the rosservice call .../camera/enable "value: 1" command

##### scott.nortman 07/06/2021 22:02:04
`@Víctor Ávila` I too am trying to get a camera working with ROS2; do you have any examples you can share?

##### alejoxbg 07/06/2021 22:55:08
I have an example that I recently made with a camera, if you want I can share it with you

##### scott.nortman 07/06/2021 22:58:23
`@alejoxbg` , yes, that will be great, can you please email me scott.nortman@gmail.com, and thank you!!!

##### KC 07/07/2021 08:24:52
Hi. I'm simulating a game of robot soccer and I'm using ROS through webots\_ros package for the robot controllers. The whole simulation is working fine, just the thing is that I can't reset the simulation once a goal is scored as it would restart the robot and camera services and break the link between ROS nodes and webots. I need to restart all my image processing nodes manually after resetting.

So, I was looking to build a python script which would detect whether the goal is scored and will just pull the robots and the ball to their initial positions without resetting the environment and the game will continue. Is there a way I can do that through a ROS node? I'm aware that it can be done using supervisor API but that would require a webots robot controller as far as I know.  Any help on this would be great

##### Bitbots\_Jasper [Moderator] 07/07/2021 09:13:00
You can simply add a "fake" robot node and make it a supervisor controller. Otherwise you could make the ball a robot node with a GPS sensor and let itself publish it a goal was scored. In the second option resetting is not really possible though

##### KC 07/07/2021 15:00:15
Thanks. I implemented the supervisor controller finally and it works as expected.

##### TheGiant 07/07/2021 15:06:40
Hello,

Is there any way to "lock" a Joint temporary using controller ? Because sometime two parts can't and shouldn't move on relatively to the other, whatever the force on the Joint. I've succeed to do this with Connectors on each part linked by the Joint, but it's not a very elegant solution, nor very practical, when the number of Joint increase....

##### akshayvnayak 07/07/2021 15:06:42
Hello everyone,

I am just a beginner in webots and ros. I am trying to integrate SLAM for iRobot Create. I have gone through the [http://wiki.ros.org/webots\_ros/Tutorials/Sample%20Simulations#Simulation\_Pionneer\_3\_AT](http://wiki.ros.org/webots_ros/Tutorials/Sample%20Simulations#Simulation_Pionneer_3_AT)

But I am not able to get how to integrate the same slam package with iRobot Create.

Could anyone please give me the steps to do so?



Thank you.


Do the ros controller automatically publish all the sensor nodes?

##### Bitbots\_Jasper [Moderator] 07/07/2021 15:27:25
You could try adding a break to the joints [https://cyberbotics.com/doc/reference/brake](https://cyberbotics.com/doc/reference/brake)

##### TheGiant 07/07/2021 15:31:53
Yes, but afaik, it will only add damping to the Joint (or Could I specify and "infinite" damping ?). And that not enough, because it will not forbid the part to slowly drift away... (at low speed, F = -Bv, which is too small to keep part in place, when speed is very low) Furthermore, It would be nice to help out the physic solver by removing this Joint from the simulation, and basically "stuck" the two part one onto each other.

##### yanan 07/07/2021 21:49:18
Hi ,  it seems like in the webots document, we can change the appearance of objects, such as road  [https://cyberbotics.com/doc/guide/object-road](https://cyberbotics.com/doc/guide/object-road)  , however, it seems there is no such option to change the road appearance  .  and appearance asphalt dose not work here
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/862450229181808700/unknown.png)
%end

##### scott.nortman 07/08/2021 03:03:19
Hi, I think there is a possible bug with the Webots / ROS2 camera interface; please see video:  [https://youtu.be/8u2jWI1ZFpg](https://youtu.be/8u2jWI1ZFpg)

##### mihir 07/08/2021 04:58:11
I want to transform the pointcloud coordinates to robot frame for pick and place, how do I go about it?

##### Olivier Michel [Cyberbotics] 07/08/2021 07:10:26
Please open a bug report about it on GitHub: [https://github.com/cyberbotics/webots\_ros2](https://github.com/cyberbotics/webots_ros2)

##### Darko Lukić [Cyberbotics] 07/08/2021 09:11:15
Try adding the `"always_publish": True` parameter to the `SENSOR_DICT` for both cameras

##### DDaniel [Cyberbotics] 07/08/2021 09:13:29
Hi, it should be possible to change the road appearance, do you get an error or something when deleting the `Asphalt` node? What version of webots are you using?

##### yanan 07/08/2021 10:02:31
Hi Daniel, I am using the Webots R2021a. actually, there is no option to change the appearance of the road within the appearance Asphalt
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/862634750769102848/unknown.png)
%end

##### DDaniel [Cyberbotics] 07/08/2021 10:08:55
The asphalt appearance is predefined. If you want a custom appearance, right-click and delete it. In its place you can add a new appearance which you can customise.
%figure
![road.png](https://cdn.discordapp.com/attachments/565154703139405824/862636361849110538/road.png)
%end

##### yanan 07/08/2021 10:25:00
thanks, Daniel.

##### amruthraghav 07/08/2021 12:26:47
Hey everyone, I was wondering if anyone had problem to import a config file for a bot,. While importing Config it says "No module named Config". However I did install Config using Pip earlier and its shows that the package has installed. Thanks in advance
%figure
![Screenshot_2021-07-08_at_8.25.36_PM.png](https://cdn.discordapp.com/attachments/565154703139405824/862671056052944935/Screenshot_2021-07-08_at_8.25.36_PM.png)
%end

##### scott.nortman 07/08/2021 13:17:40
`@Darko Lukić` `@Olivier Michel` Thank you, that fixed the issue!  Where is this documented?

##### Darko Lukić [Cyberbotics] 07/08/2021 14:21:07
Here:

[https://github.com/cyberbotics/webots\_ros2/wiki/API-Devices#class-webots\_ros2\_coredevicessensor\_devicesensordevicenode-device\_key-wb\_device-paramsnone](https://github.com/cyberbotics/webots_ros2/wiki/API-Devices#class-webots_ros2_coredevicessensor_devicesensordevicenode-device_key-wb_device-paramsnone)



But it should work without the parameter as well. The cameras are disabled by default (an optimization technique). The cameras are enabled only if the number of subscribers is greater than 0 or the `always_publish` parameter is set to true.



For some reason, your camera subscribers are not counted in the ROS 2 API. QoS may affected it. Have you tried subscribing to cameras from RViz2 (there you can control QoS)?

##### Troy 07/08/2021 20:13:20
Hi! Does anybody know hoe to add such terrains?



%figure
![terrainSS.jpg](https://cdn.discordapp.com/attachments/565154703139405824/862788495792930846/terrainSS.jpg)
%end

##### DDaniel [Cyberbotics] 07/08/2021 20:24:10
`@Troy` Hi, they're just rocks added to an arena. Click the plus button and search for rocks. [https://www.cyberbotics.com/doc/guide/object-rocks](https://www.cyberbotics.com/doc/guide/object-rocks)



If you don't want to use the arena, something more fitting might be "UnevenTerrain", you can add it the same way.

##### Troy 07/08/2021 20:24:32
Thank you!

##### scott.nortman 07/08/2021 21:09:26
`@Darko Lukic` Woukd you know how to prevent these error messages in the terminal: Error: wb\_camera\_recognition\_disable() called on a Camera without Recognition node.

##### Olivier Michel [Cyberbotics] 07/09/2021 07:18:46
You should simply add a Recognition node ([https://cyberbotics.com/doc/reference/recognition](https://cyberbotics.com/doc/reference/recognition)) to your Camera ([https://cyberbotics.com/doc/reference/camera](https://cyberbotics.com/doc/reference/camera)) device, in the `recognition` field.

##### FunkyPants 07/09/2021 09:55:03
Hey, I'm pretty new to Webots, in my robot, when I use a Ball Joint with an initial position, when I reset the simulation the endpoints positions and rotations reset to weird values

##### scott.nortman 07/09/2021 12:29:33
`@Olivier Michel` Thank you, will do.  Even if I do not need to use the built-in recongnition, it is suggested tht I add the node?

##### Affonso 07/09/2021 12:31:19
Hey, have any API to apply to use ESP32 libraries like esp now?

##### Olivier Michel [Cyberbotics] 07/09/2021 12:32:11
No, if you don't use it, no need to add the node.

##### DDaniel [Cyberbotics] 07/09/2021 14:08:47
`@FunkyPants` did you change the initial position through the interface before saving or did you manually set it by editing the world file?

##### FunkyPants 07/09/2021 14:10:46
I changed it through the interface, right now I found that by setting it to default and changing manually in the controller seems to work


However when I try to set the initial position of the hinge nodes on the interface the children nodes end up in weird positions after I reset


It only happens when I have more than one hinge set to non zero on the ball joint

##### DDaniel [Cyberbotics] 07/09/2021 14:16:49
can you provide the world file you're using? (ideally, remove everything except what is causing the issue)

##### FunkyPants 07/09/2021 14:29:37

> **Attachment**: [test.wbt](https://cdn.discordapp.com/attachments/565154703139405824/863064354223816745/test.wbt)

##### DDaniel [Cyberbotics] 07/09/2021 15:03:03
Yes you're right, I can reproduce it as well. The resetting of the `BallJoint` is buggy. We'll look into it, thank you

##### FunkyPants 07/09/2021 23:47:06
Thanks for looking into it, any suggestions on what I should do in the meantime or is the controller thing the best thing I could do

##### scott.nortman 07/10/2021 03:45:36
`@Darko Lukić` As you suggested, I tried viewing the images in Rviz without success.  Do you happen to know the needed QoS settings to allow Rviz to display the images?


`@Darko Lukić` Figured it out, I needed to set the frame\_id, all working, thank you

##### Batrox 07/11/2021 08:19:31
is it possible to use a class from another script in the main controller, like for example i have a leg script with a class called "leg", is it possible to instantiate an object of this leg class in the main controller script even if the leg class is not directly written in the controller scirpt?

##### chinex 07/11/2021 15:22:47
Good day all, I have been having problems on transferring my webots C API to my real robot (khepera iv) please can I get a guide here!


I have tried the webots guide and it's not working

##### Stefania Pedrazzi [Cyberbotics] 07/12/2021 06:15:20
What is not working from the Webots Guide?

Please do no duplicate questions on multiple the channels.

##### chinex 07/12/2021 08:11:08
I am sorry for duplicating my questions  as I am seriously in of the solution.



I followed the guide on how to setup the transfer of my webots simulation to a real robot and wasn't getting it .

My robot is a khepera IV with gumstix overo board (Linux built in) and according to the webots guide, the transfer system for khepera TM has been setup on webots



%figure
![20210712_101240.jpg](https://cdn.discordapp.com/attachments/565154703139405824/864056706047410206/20210712_101240.jpg)
%end


Here is the robot node
%figure
![20210712_101509.jpg](https://cdn.discordapp.com/attachments/565154703139405824/864057339341570048/20210712_101509.jpg)
%end

##### Stefania Pedrazzi [Cyberbotics] 07/12/2021 08:15:33
The transfer to the real robot was implemented for the Khepera I robot and not Khepera IV. So currently Webots doesn't provide out of the box transfer system for the Khepera IV robot.


But you can write your own remote control plugin to communicate with the real robot:

[https://www.cyberbotics.com/doc/guide/controller-plugin#remote-control-plugin](https://www.cyberbotics.com/doc/guide/controller-plugin#remote-control-plugin)

##### aa-234 07/12/2021 12:10:04
Hi,

I am trying to make a tic-tac-toe game in Webots.



I have 2 robot one that draw circle and the others draw crosses using the device "pen".



I need them to recognise when the other robot draws something, but the camera recognition seems to work only on solid.



Is there a way to make the camera recognise drawings ?

##### Stefania Pedrazzi [Cyberbotics] 07/12/2021 12:13:43
Hi, not with the Camera Recognition functionality.

In this case you should implement a vision algorithm that analyzes the camera image and extracts the drawings.

##### aa-234 07/12/2021 12:17:26
Thanks I will try that method

##### iiiiiian 07/12/2021 13:15:10
Recently, I met a problem. I ran webots 2019b in Ubuntu1604, and it often blocks. I have to close it forced. And I can't reopen it again. When I saw top, I found Xorg uses 100% cpu. When I kill Xorg, I can reopen Xorg. How can I solve this problem.

##### Julius 07/12/2021 17:26:38
Hi!

I have a robot containing a hingejoint (y-axis) -> solid endpoint -> sliderjoint (y-axis) -> solid endpoint -> sliderjoint (x-axis) -> solid endpoint. Physics is enabled on all solids. Im running into a problem where turning the hingejoint at 2π max velocity that the last solid endpoint (the one on the sliderjoint across the x-axis) shoots out. it seems out it is affected by a centrifugal force which results in this movement. I have observed that increasing the mass or the distance between the endpoint and the hingejoint worsens this problem, which build in to that this is a result of a centrifugal force as well.

Do somebody have an idea what could help in this situation?

##### Luftwaffel [Moderator] 07/12/2021 22:57:35
`@Julius` to test your hypothesis, you could set the mass of the last solid to 0. Also you can try to increase the maxForce


max force of theslider joint that is


`@iiiiiian` update to the newest version of webots. You are using a very old version


and it sounds like you dont have gpu drivers installed. Xorg doing the graphics on cpu, which is bad

##### scott.nortman 07/13/2021 00:45:14
Is there a way to programmatically control the position and orientation of a camera sensor?  For example, is there a .setRotation() or a setTranslation() method?

##### Luftwaffel [Moderator] 07/13/2021 00:45:50
there is, but it can mess with physics


what exactly do you want to do?


Do you just want to have a "standalone" camera recording a scene, or is it actually attached to a real robot? If it is the latter, I would strongly advice against it


But if you just want to move a camera around, add an empty Robot node to the scene and add the camera as its child. Then use the supervisor functionality to move the robot's base coordinates and orientation [https://cyberbotics.com/doc/reference/supervisor](https://cyberbotics.com/doc/reference/supervisor)

##### Mumuxe 07/15/2021 06:30:34
Hi, I'm trying to setup a ROS 2 custom driver for my robot.

I have previous experience doing so with ROS 1, where I created a ROS1 node from scratch, using the Webots library directly to make the bridge.



For ROS2, I stumbled upon [https://github.com/cyberbotics/webots\_ros2/](https://github.com/cyberbotics/webots_ros2/) which I'm not exactly sure about the role it's fulfilling.



The "Universal launcher" seems to be the equivalent of the previous "ros1 controller", exposing topics / service automatically based on the loaded robot, which i'm not interested in.

In the custom driver section of the documentation, example is shown written in Python. I've seen the "WebotsNode" class also existing in C++ : can it be used to write a driver in C++ instead of Python ?



Finally, what does"WebotsNode" approach bring compared to use the plain Webots library in a custom ROS2 node ?

##### Darko Lukić [Cyberbotics] 07/15/2021 06:55:12
The webots\_ros2 package uses Python to create a ROS 2 interface out of a Webots robot model. The C++ you saw suppose to replace the Python based interface.



You can implement the ROS 2 interface as you started, no problem there. However, the webots\_ros2 package will simply help you with a few things:

- it automatically creates topics for common sensors and actuators (we were careful to optimize this and to follow ROS 2 conventions),

- it integrates ros2\_control (C++ version only),

- it provides joint\_state\_publisher, trajectory\_follower, and differential\_drive,

- it provides a convenient way to launch the simulation from a launch file (there is a custom action for that, and it also finds the Webots installation),

- it integrates urdf2webots as a ROS 2 node,

- it publishes the ROS 2 clock,

- it automatically installs Webots if not present (useful when sharing a ROS 2 application).



Besides, there are a lot of examples.



WebotsNode implements initiates the creation of ROS 2 interface. You can use it to configure or extend the ROS 2 interface.

##### Mumuxe 07/15/2021 07:49:34
Thanks `@Darko Lukić` 🙂



I tried to create a package which depends on `webots_ros2`, however CMake fails to resolve the dependency.

Looking at potential examples, I found `webots_ros2_control` which depends on `webots_ros2_driver` (where the WebotsNode.cpp lives), but I couldn't depend on this package either, CMake fails to resolve it. In addition, `ros2 pkg list | grep webots` gives me the following :



> webots\_ros2

> webots\_ros2\_abb

> webots\_ros2\_core

> webots\_ros2\_demos

> webots\_ros2\_epuck

> webots\_ros2\_examples

> webots\_ros2\_importer

> webots\_ros2\_msgs

> webots\_ros2\_tesla

> webots\_ros2\_tiago

> webots\_ros2\_turtlebot

> webots\_ros2\_tutorials

> webots\_ros2\_universal\_robot

> webots\_ros2\_ur\_e\_description



I then tried to depend on `webots_ros2_core` but still no success.


For reference, here is my CMakeLists.txt :


```cmake_minimum_required(VERSION 3.8)
project(jrb_webots)

if(CMAKE_COMPILER_IS_GNUCXX OR CMAKE_CXX_COMPILER_ID MATCHES "Clang")
  add_compile_options(-Wall -Wextra -Wpedantic)
endif()

# find dependencies
find_package(ament_cmake REQUIRED)
find_package(rclcpp REQUIRED)
find_package(webots_ros2_core REQUIRED)


add_executable(driver_node src/driver_node.cpp)
ament_target_dependencies(driver_node rclcpp webots_ros2_core)

install(TARGETS
    driver_node
    DESTINATION lib/${PROJECT_NAME}
)

if(BUILD_TESTING)
  find_package(ament_lint_auto REQUIRED)
  # the following line skips the linter which checks for copyrights
  # uncomment the line when a copyright and license is not present in all source files
  #set(ament_cmake_copyright_FOUND TRUE)
  # the following line skips cpplint (only works in a git repo)
  # uncomment the line when this package is not in a git repo
  #set(ament_cmake_cpplint_FOUND TRUE)
  ament_lint_auto_find_test_dependencies()
endif()

ament_package()
```


And the CMake error :


> CMake Error at CMakeLists.txt:11 (find\_package):

>   By not providing "Findwebots\_ros2\_core.cmake" in CMAKE\_MODULE\_PATH this

>   project has asked CMake to find a package configuration file provided by

>   "webots\_ros2\_core", but CMake did not find one.

>

>   Could not find a package configuration file provided by "webots\_ros2\_core"

>   with any of the following names:

>

>     webots\_ros2\_coreConfig.cmake

>     webots\_ros2\_core-config.cmake

##### Darko Lukić [Cyberbotics] 07/15/2021 08:36:29
The `webots_ros2_core` is a Python package, so you cannot depend on it in a CMake file. The `webots_ros2_driver` is not released yet, you have to compile the package from source (and source it).

##### sa33 07/16/2021 14:33:33
Hi, I made a proro for solid object. Then I added that in to tree. After that I tried to add accelerometer and gyro devices to it. But I couldn't see both objects in 3D view. Can anyone help me to solve the issue?

##### DDaniel [Cyberbotics] 07/16/2021 14:41:00
`@sa33` Hi, did you define the shape of the solid? The sensors themselves don't have a shape (except some special ones like these [https://cyberbotics.com/doc/guide/lidar-sensors](https://cyberbotics.com/doc/guide/lidar-sensors))

##### Maximo Cansino Mateo 07/16/2021 14:41:43
Can you import your models from fusion 360 to webots?

##### DDaniel [Cyberbotics] 07/16/2021 14:48:18
`@Maximo Cansino Mateo` Hi, as long as it's one of the supported  formats yes [https://cyberbotics.com/doc/reference/mesh](https://cyberbotics.com/doc/reference/mesh)

##### Maximo Cansino Mateo 07/16/2021 14:48:38
Thank you 🙂

##### sa33 07/16/2021 14:49:58
`@DDaniel`Yes I defined shape. Then also its not visible in 3D view

##### DDaniel [Cyberbotics] 07/16/2021 14:54:00
Can you share the file you created?

##### Skyrim 07/17/2021 07:12:13
Hello everyone, I have been using webots to train a RL agent. I just saw that webots released a new version wherein you could run the simulation in a headless mode. Is that true?

##### Nummer\_42O 07/17/2021 08:31:49
Sooo.. Windows Defender is sceptical about the R2021b update. Idk if that message also popped up when I initially installed 2021a but: Should I worry?
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/865873413607915530/unknown.png)
%end

##### DDaniel [Cyberbotics] 07/17/2021 09:31:46
Since it isn't signed with a certificate, windows will always complain about it, even more so if it was just released and doesn't have a reputation yet. As long as you downloaded it from the official github it's safe


`@FunkyPants` the bug you were having with the balljoint reset should hopefully be fixed now in the new release

##### FunkyPants 07/17/2021 09:37:44
Wow, thanks for working on it so quickly, will test it out on monday!

##### lolMan 07/17/2021 14:16:21
there are two message files for recognition. Which message file is used to get the data of the object ? please do give some short info on this ?
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/865960120228118539/unknown.png)
%end

##### nozomi 07/17/2021 15:45:27
I am using the webots-ros interface. And after updating to webots2021b, I got this warning when I tried to set the sampling period of lidar sensor. I have tried several values for the argument and both SICK LMS 291 and  Velodyne VLP-16 lidar sensors. But all of them didnt work. Could anyone please help to solve this problem?
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/865982541230768149/unknown.png)
%end

##### DrVoodoo [Moderator] 07/17/2021 22:57:46
`@lolMan` recognitionobjects should be a list of recognitionobject


Recognitionobjects = all the recognized objects


Recgnitionobject = the details of one of those objects

##### Nummer\_42O 07/18/2021 08:25:04
I mean I downloaded it from the webpage behind the link provided in this popup message. ^^
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/866234103903944704/unknown.png)
%end

##### Jfish 07/18/2021 16:39:04
Hi,  I am wondering if it is possible to import my Solidworks CAD into webots. Any advice would be much appreciated!

##### alejoxbg 07/19/2021 00:08:24
Is there any way to include a stereo camera in webots?

##### Luftwaffel [Moderator] 07/19/2021 01:17:22
`@alejoxbg`  yes, you simply add two cameras


or you add a depth camera

##### alejoxbg 07/19/2021 01:26:43
but isn't there something implemented to have a stereo view?


I need a point cloud from which I can save a map.

##### Luftwaffel [Moderator] 07/19/2021 01:29:00
use a lidar


[https://cyberbotics.com/doc/reference/lidar?tab-language=python](https://cyberbotics.com/doc/reference/lidar?tab-language=python)

##### alejoxbg 07/19/2021 01:38:54
I have a zed camera, do you think that with a lidar, 2 cameras and a RangeFinder I could simulate it?

##### Luftwaffel [Moderator] 07/19/2021 01:41:10
[https://cyberbotics.com/doc/reference/rangefinder](https://cyberbotics.com/doc/reference/rangefinder) I think this is what you are looking for

##### alejoxbg 07/19/2021 01:44:35
is it possible to visualize this in rviz as a point cloud?

##### Luftwaffel [Moderator] 07/19/2021 01:45:25
for point cloud you need a lidar. And it is quite slow to get the pointcloud data from webots and then to publish it in ROS


The depth image is fast, accurate and very useful

##### alejoxbg 07/19/2021 01:46:00
thanks, I will give it a try

##### SeanLuTW 07/19/2021 05:12:01
How can I get current world title, info etc., using `supervisor`?

##### Stefania Pedrazzi [Cyberbotics] 07/19/2021 06:20:44
With the Supervisor API you can first get the WorldInfo node and then get the specific field of the node.

You can find an example here: [https://www.cyberbotics.com/doc/guide/samples-devices#supervisor-wbt](https://www.cyberbotics.com/doc/guide/samples-devices#supervisor-wbt)


To complete the answer of `@DrVoodoo`, please find here the documentation: [https://www.cyberbotics.com/doc/reference/camera?tab-language=ros#wb\_camera\_recognition\_get\_objects](https://www.cyberbotics.com/doc/reference/camera?tab-language=ros#wb_camera_recognition_get_objects)

The API function to get the Camera Recognition Objects is now returning the `RecognitionObjects` message.

##### SeanLuTW 07/19/2021 06:37:02
Thanks! For Python, it would be `supervisor.getRoot().getField('children').getMFNode(0).getField('title').getSFString()`

##### DrVoodoo [Moderator] 07/19/2021 07:32:20
`@alejoxbg` you can get a depth image and then convert to a point cloud


Depth\_image\_proc node

##### FunkyPants 07/19/2021 14:07:27
it works great! thanks!

##### johnnycannoli 07/20/2021 02:19:56
is there any way for a solid to share multiple parents? I am trying to make a delta robot like this [https://github.com/AutoRoboCulture/delta-robot-simulation-gazebo/blob/master/demo/DeltaRobotPickandplaceapplication.gif](https://github.com/AutoRoboCulture/delta-robot-simulation-gazebo/blob/master/demo/DeltaRobotPickandplaceapplication.gif)

##### DDaniel [Cyberbotics] 07/20/2021 06:21:22
`@johnnycannoli` Hi, you can create closed mechanical loops using SolidReferences [https://cyberbotics.com/doc/reference/solidreference](https://cyberbotics.com/doc/reference/solidreference). The closest thing to a delta robot currently available in the sample library is the Stewart platform [https://www.cyberbotics.com/doc/guide/samples-demos#stewart\_platform-wbt](https://www.cyberbotics.com/doc/guide/samples-demos#stewart_platform-wbt), you can inspire yourself from it. To save you some headaches, when doing loops with SolidReferences make sure all intermediary solids have a Physics node, otherwise it won't work.

##### SeanLuTW 07/20/2021 10:15:44
Hello, I want to automatically add  `.3ds` model given by user into my world file. I set `Solid > Shape > geometry > Mesh > url` to given file path and added `PBRAppearance` into the `geometry` node. This resulted in weird looking object, which is pretty different from the result from  `File > Import 3D model`.  Where is the different between two methods? Is there any API to generate `.wbo` file from the latter one?

##### Darko Lukić [Cyberbotics] 07/20/2021 10:24:05
Can you send us the results? What is weird about the first one?

##### SeanLuTW 07/20/2021 13:02:41
The color is not imported in the first one
%figure
![empty.png](https://cdn.discordapp.com/attachments/565154703139405824/867028743050231828/empty.png)
%end

##### Darko Lukić [Cyberbotics] 07/20/2021 13:48:32
`File > Import 3D model` imports meshes and textures, while `Solid > Shape > geometry > Mesh` contains only a mesh. Unfortunately, there is no an API function for that, but you can make a request:

[https://github.com/cyberbotics/webots/issues/new?assignees=&labels=&template=feature\_request.md](https://github.com/cyberbotics/webots/issues/new?assignees=&labels=&template=feature_request.md)


There is the `wb_supervisor_node_export_string` function that exports VRML of a node:

[https://cyberbotics.com/doc/reference/supervisor#wb\_supervisor\_node\_export\_string](https://cyberbotics.com/doc/reference/supervisor#wb_supervisor_node_export_string)

##### ClBaze 07/20/2021 14:04:07
Hello, I've made a robot composed of 3 hingejoints with the last joint holding a Solid which has a gyroscope and an accelerometer.

I've only set the physics field of the Solid.

The accelerometer outputs data but the gyro doesn't.

Why is that ?


(I mean the gyro always return 0 0 0)


All the parents should have Physics ?

##### Troy 07/20/2021 14:31:35
Hi, I have my robot imported, then I pull the position bar of the rotational motors in the generic robot window, one of the motors is very slow, does anybody know what caused that?
> **Attachment**: [motor.mp4](https://cdn.discordapp.com/attachments/565154703139405824/867051117204602930/motor.mp4)

##### ClBaze 07/20/2021 14:35:50
Hi, maybe the value of the maxTorque and maxVelocity fields of the motor are too low ?

##### Troy 07/20/2021 14:39:09
I took a look, motor parameters are the same, max velocity is 2.21 and max torque is 30

##### Funnydeth 07/20/2021 16:49:19
Hi, I'm trying to create a bunch of boxes for a robot to move around. Each box has an emitter in it which repeatedly sends out a fixed message so it can be located. Is there a way I can control all the box's emitters from a single supervisor?

##### Darko Lukić [Cyberbotics] 07/20/2021 16:50:01
No, you cannot access devices in another robot

##### Funnydeth 07/20/2021 16:51:21
Ok, thanks. I assume you couldn't have all the boxes be in the same robot but be able to move independently of each other?

##### Darko Lukić [Cyberbotics] 07/20/2021 16:53:13
Maybe you can attach all of them to the robot using two linear actuators (per box)

##### Funnydeth 07/20/2021 16:53:49
Thanks for your help I'll have a look into that

##### johnnycannoli 07/20/2021 22:36:31
I'm having trouble with my SolidReferences. When I add it to my BallJoint, the only thing it does is act as an attachment to the static world. I have tried setting the StaticReference to any Solid in my design and it only ever acts as an attachment to the world. I have made sure that my Solids all have a physics Node. Do I have any options for more verbose output so I can debug further?

##### mihir 07/21/2021 05:55:41
I want to transform the pointcloud coordinates to robot frame for pick and place, does Webots has any way to get the transforms? how do I go about it?

##### Stefania Pedrazzi [Cyberbotics] 07/21/2021 06:37:55
Yes, you should try to add the Physics node to the upper `Solid` nodes in the `Joint.endPoint` fields.

Here you can find a similar example: [https://www.cyberbotics.com/doc/guide/samples-devices#gyro-wbt](https://www.cyberbotics.com/doc/guide/samples-devices#gyro-wbt)

##### Darko Lukić [Cyberbotics] 07/21/2021 06:56:39
You have to do it manually. But it should be one line of Python code, something like `tranformed_pc = transform_matrix @ pc`, assuming that `pc` is shaped as a 4xN matrix (`N` number of points). You can obtain a transformation matrix between two Webots nodes using the `wb_supervisor_node_get_pose` function:

[https://cyberbotics.com/doc/reference/supervisor#wb\_supervisor\_node\_get\_pose](https://cyberbotics.com/doc/reference/supervisor#wb_supervisor_node_get_pose)

##### SeanLuTW 07/21/2021 08:29:49
Hello, I upgraded to R2021b recently. I found that I can't normally launch webots using CMD, while double clicked `${WEBOTS_HOME}/msys64/mingw64/bin/webotsw.exe` can. (OS: Windows 10)


Can't get any output with argument `--version` or `--help` either
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/867322894765785138/unknown.png)
%end

##### ClBaze 07/21/2021 09:23:58
Thank you `@Stefania Pedrazzi`, that's exactly what I was looking for!

##### Johan2021 07/21/2021 12:54:51
Hi all, I am implementing a couple of distance (laser) sensors as shown in the picture. It does however seem that the distance returned does not seem to be very accurate. The robot is 10cm long only and the values shown are for all 5 sensors - is there a way to improve this? The relation between signal and actual distance in meters is y = 10/x. The values of the robot in the picture are shown as last in the console (preceded by nr. 2). Decreasing the 'aperture' or increasing 'lineScale' does not help.



```DistanceSensor {
   translation 0.0 0.0105 -0.002
   rotation 0 0 1 1.5708
   type "laser"
   name "dist_1"
   aperture 0.0005
   #map as y = 10/x
   lookupTable [ 0.001 10000 0,
                 0.01 1000 0,
                 0.10 100 0,
                 1.0 10 0,
                 10.0 1 0 ]
}
```
%figure
![Screenshot_from_2021-07-21_14-34-50.png](https://cdn.discordapp.com/attachments/565154703139405824/867389160535883786/Screenshot_from_2021-07-21_14-34-50.png)
%end

##### EvilOdil 07/21/2021 15:57:05
Guys we want to simulate a cave mapping system using Webots. So we are thinking of using a lidar sensor plus stereo imaging to create a 3D map. Are there any good tutorials, github repositaries about this? (The sample on lidar in the webots reference section only covers a 2d mapping part. )

##### Venkat 07/21/2021 19:19:27
I have robot with endeffector for a pick and place task. I want the gripper to orient itself perpendicular to the object being grasped. I used the inverse kinematic solver as in the sample ABB code: ikResults = armChain.inverse\_kinematics([x, y, z], max\_iter=IKPY\_MAX\_ITERATIONS, initial\_position=initial\_position),  From documentation, I see that the target orientation be set using : inverse\_kinematics(self, target\_position=None, target\_orientation=None, orientation\_mode=None, **kwargs). I tried giving target\_orientation as numpy.array consisting of angles in [x,y,z]. I tried with rad and degrees. But I dont see any change in gripper orientation. Do I miss something, that is necessary to make the orientation work?

##### Luftwaffel [Moderator] 07/21/2021 22:48:49
ikpy is not very good


you should use a ikfast solver


what operating system are you on?


`@Venkat`  extract this project. Go into "./controllers/inverse\_kinematics\_pyikfast/irb4600\_solver" and run `pip install .`

Then open the world. It should do 10s of a velocity control loop. After that you can move the TARGET sphere and the arm will move to the exact position and orientation of the sphere. Let me know if that works or you have some issues still
> **Attachment**: [ikfast\_tutorial\_copy.zip](https://cdn.discordapp.com/attachments/565154703139405824/867542297234767892/ikfast_tutorial_copy.zip)

##### Joro 07/22/2021 00:25:04
Hello, i need some data from a Imu sensor in a robot mobile aplication, but the IU doesn't has the orientation covariance, where can i get it?

##### Luftwaffel [Moderator] 07/22/2021 00:45:34
`@Joro` [https://cyberbotics.com/doc/reference/inertialunit?tab-language=python#inertialunit-functions](https://cyberbotics.com/doc/reference/inertialunit?tab-language=python#inertialunit-functions)


you can get the quaternion


oh you probably want to get the noise


hmmm googling a bit it seems I dont fully understand covariance. <@&568329906048598039> perhaps one of you can take a look. Perhaps that is a missing feature.

##### SeanLuTW 07/22/2021 01:56:06
After downgraded to R2021a, the problem solved

##### Stefania Pedrazzi [Cyberbotics] 07/22/2021 06:54:13
I applied your distance settings to a sample world and I don't see any issue with the measurements precision. Could you please share a simple world where this is reproducible?


A simple method to compute the covariance for the IMU sensor could be to use the noise: `(InertialUnit.noise)^2`

##### tiborbs1 07/22/2021 07:19:37
Hello, I am using the new standard ROS controller. But when I use the '--use-ros-control' flag I get the following error when the simulation starts:



INFO: ros: Starting controller: /usr/local/webots/projects/default/controllers/ros/ros --name=robot1 --clock --synchronize --use-sim-time --use-ros-control --robot-description

[ INFO] [1626937675.068806352]: Robot's unique name is robot1.

[ INFO] [1626937675.079245778]: The controller is now connected to the ROS master.

WARNING: ros: The process crashed some time after starting successfully.

terminate called after throwing an instance of 'std::runtime\_error'

  what():  Duration is out of dual 32-bit range

WARNING: 'ros' controller crashed.



Has anyone encountered a similar problem? I tracked it down to controller manager's update function. The ROS duration is probably negative, but I don't understand why.

##### Darko Lukić [Cyberbotics] 07/22/2021 07:22:16
It looks like a bug. Is it specific to a certain robot?

##### tiborbs1 07/22/2021 07:25:14
I am trying to make a diff\_drive\_controller for  pioneer-3dx robot. I've run the pioneer-3at simulation from webots\_ros and the bug doesn't happen. I'll debug it further, and let you know what I find out.

##### Venkat 07/22/2021 07:27:07
Hello `@Luftwaffel`  Thank you for your answer. I tried with this module in my environment. I upgraded webots package to 2021b, since I got the information that the provided project is generated on webots 2021b. I installed the missing modules and when I tried executing the program, I am getting the error that no solution is found for the point [x,y,z] (corresponding to the sphere). I have attached the screenshot here. I am running webots on Ubuntu 18.04.
%figure
![Screenshot_fastik.png](https://cdn.discordapp.com/attachments/565154703139405824/867669073927864330/Screenshot_fastik.png)
%end

##### Stefania Pedrazzi [Cyberbotics] 07/22/2021 07:50:53
I confirm I also cannot start Webots from CMD using the documented commands.

I just opened an issue on the Webots Github repo: [https://github.com/cyberbotics/webots/issues/3485](https://github.com/cyberbotics/webots/issues/3485)

A workaround to start Webots from CMD could be to launch `${WEBOTS_HOME}/Webots.lnk`, this seems to work for me.

##### Darko Lukić [Cyberbotics] 07/22/2021 08:04:26
Could you please open a bug report about the issue:

[https://github.com/cyberbotics/webots/issues/new?assignees=&labels=&template=bug\_report.md](https://github.com/cyberbotics/webots/issues/new?assignees=&labels=&template=bug_report.md)



Please specify OS version, Webots version, ROS version, and exact steps to reproduce the problem.

##### SeanLuTW 07/22/2021 10:43:27
Ok! Thanks a lot


Is it possible to send requests like `adding node to the scene tree` or `import 3D model...` from client when using web streaming?

##### Benjamin Délèze [Cyberbotics] 07/22/2021 11:30:19
No, it is currently not possible to add or modify nodes from the web

##### Luftwaffel [Moderator] 07/23/2021 22:07:13
`@Venkat` move the sphere around, it has to be a reachable position. Also the orientation matters. I believe i aligns the end effektor with the x-axis ofthe sphere


you can also pm me and we can have a detailed look together


I changed a line. The motors were not getting initialized correctly. Should work now
> **Attachment**: [inverse\_kinematics\_pyikfast.py](https://cdn.discordapp.com/attachments/565154703139405824/868261675558666260/inverse_kinematics_pyikfast.py)


let me know if it works

##### Sir 07/24/2021 03:11:20
Hi, is it possible to change set in some way the coordinate system for the supervisor get\_orientation?

I'm trying to use the Supervisor to get the position and orientation of a robot using ROS. I've set the world coordinates on ENU. Using an Inertial Unit I got it to work fine when setting it with the axis as the wiki says they should be for ENU. However, when using the supervisor get\_orientation service it seems to return the orientation as the Inertial Unit would if it was set up in the NUE way.

Is there something I should've set to change the world orientation coordinate system or something?
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/868329478881968198/unknown.png)
%end

##### Jfish 07/24/2021 12:52:24
How to import solid words design to webots???

##### Joro 07/24/2021 12:54:35
to use models from solidworks you need to export it in stl format, in webots you can use it like a mesh, but solidworks dont have that option, so you have to use another design program like one shape

##### Robot 07/25/2021 19:43:51
Hi Darko I am also working on a similar problem. I added the connector to both Epuck and the box i want to move around. The Epuck is also attaching itself to the box but it is not able to push it. The wheels of the robot are moving but it is not able to move the object along with it. I tried reducing the mass of the object to 0.05 (robots mass is 0.2)

##### Luftwaffel [Moderator] 07/25/2021 23:01:33
`@Robot` can you share a quick video clip of the issue? Also did you try with 0 mass? Just to trouble shoot

##### Darko Lukić [Cyberbotics] 07/26/2021 06:40:01
You use `get_orientation` with the robot or IMU node?

##### James Le Poidevin 07/26/2021 12:49:18
Hello, I'm trying to draw a trait of a robot/drone and i'm using the supervisor\_draw\_trail.wbt as exemple. Is it possible to make the trail (a shape) visible in the 3D view but not by a camera in the scene ? Thanks

##### Stefania Pedrazzi [Cyberbotics] 07/26/2021 13:08:27
Hi, yes there is the `wb_supervisor_node_set_visibility` function to specify if a node is visible or not from a given Camera:

[https://www.cyberbotics.com/doc/reference/supervisor#wb\_supervisor\_node\_set\_visibility](https://www.cyberbotics.com/doc/reference/supervisor#wb_supervisor_node_set_visibility)

##### Iskender 07/26/2021 13:11:36
Hi guys, I  am new in webots, and I have  a question, is that even possible, somehow to render and control robots in browser?


I mean can webots help with it?

##### Darko Lukić [Cyberbotics] 07/26/2021 14:10:53
Yes, but you still need Webots to run in backend as the physics engine and controller support are not ported to the web. See:

[https://cyberbotics.com/doc/guide/web-simulation](https://cyberbotics.com/doc/guide/web-simulation)



You checkout an example here:

[https://robotbenchmark.net/](https://robotbenchmark.net/)

##### Sir 07/26/2021 15:11:01
With the robot, i use get\_self to get the robot's id and then get\_orientation with that

##### Darko Lukić [Cyberbotics] 07/26/2021 15:38:07
In that case, maybe your robot is not FLU?

##### Sir 07/26/2021 15:52:28
This is how it's set up, the original project was set in NUE coordinates, maybe i should have changed something in the robot when changing to ENU?
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/869245798989312061/unknown.png)
%end

##### Darko Lukić [Cyberbotics] 07/26/2021 15:53:38
Pioneer 3DX is not FLU. This is not possible to change by changing the coordinateSystem. The only way is to change the PROTO.


Pioneer AT is converted to FLU in R2021b, maybe it can be substitute for Pioneer 3DX. We are working on converting all PROTOs to FLU and all worlds to ENU:

[https://github.com/cyberbotics/webots/pull/3073](https://github.com/cyberbotics/webots/pull/3073)


You can try using the following script:

[https://github.com/cyberbotics/webots/blob/master/scripts/converter/convert\_proto.py](https://github.com/cyberbotics/webots/blob/master/scripts/converter/convert_proto.py)

to convert the Pioneer 3DX robot to FLU.

##### Sir 07/26/2021 19:53:32
That seems to have worked, thanks so much!

##### Amer 07/27/2021 01:07:37
hello everyone


ive got a question regarding this issue


"WARNING: The current physics step could not be computed correctly. Your world may be too complex. If this problem persists, try simplifying your bounding object(s), reducing the number of joints, or reducing WorldInfo.basicTimeStep."


i tried everything i could


but nothing works


please let me know if you can help

##### Joro 07/27/2021 01:09:17
how complex is your world

##### Amer 07/27/2021 01:10:35
its just this vehicle
%figure
![webots-bin_IvuolD4sD2.png](https://cdn.discordapp.com/attachments/565154703139405824/869386254268112977/webots-bin_IvuolD4sD2.png)
%end

##### Joro 07/27/2021 01:10:41
i mean, i was using a world create on blender, and the geometry of triangulos was too heavy for webots

##### Amer 07/27/2021 01:11:07
ive used freeform from inventor CAD to generate this shape.

##### Joro 07/27/2021 01:11:43
and what kind of operation did you use

##### Amer 07/27/2021 01:11:55
like?

##### Joro 07/27/2021 01:11:58
cause i seems a bit complicated


it

##### Amer 07/27/2021 01:12:24
im not really that expert in webots


what do you mean?


ive only connected the wheels using hingeJoints and started the simulation


its supposed to land on the arena


and ofc i included physics

##### Joro 07/27/2021 01:13:07
i mean do you see the layers of geometry generations?

##### Amer 07/27/2021 01:13:23
regarding wht

##### Joro 07/27/2021 01:13:24
the geometry of the case

##### Amer 07/27/2021 01:13:28
yes


i did on the bounding object

##### Joro 07/27/2021 01:13:42
it seems like webots has problems creating the shape

##### Amer 07/27/2021 01:13:47
i defined the case as hull1 and used it there


so its the shape issue?

##### Joro 07/27/2021 01:14:14
i think that use a bounding box with that geometry could be too much for webots


do you try using a simplified shape for the bounding box?

##### Amer 07/27/2021 01:14:46
well, i did once using a simple box and it worked fine


2 weeks ago


but apparently this type of shapes is not supported in webots

##### Joro 07/27/2021 01:15:54
what do you mean


the problem persists with a simple box for the bounding box?

##### Amer 07/27/2021 01:17:07
wait ill show an example



%figure
![webots-bin_DNIUY5SbXc.png](https://cdn.discordapp.com/attachments/565154703139405824/869388098377764894/webots-bin_DNIUY5SbXc.png)
%end


this is a box shape for a vehicle


a simple project with some functions


so i tried to replace the shapes with the ones i prefer as you can see above and it stopped working at all


the physics issue i meant

##### Joro 07/27/2021 01:20:21
so the bounding box doesn`t changed?

##### Amer 07/27/2021 01:20:53
i did change everything

##### Joro 07/27/2021 01:23:11
i know you use the same shape of the appereance for the bounding box to generate a simulation more realistic but i think thats too much for webots, try using a simplified bounding box, like a box (parallelepiped)


in other case, create another mesh with the same surface of the case you show above, but without the inside details

##### Amer 07/27/2021 01:24:29
aight ill try


same issue
%figure
![webots-bin_hMXbu9eXIO.png](https://cdn.discordapp.com/attachments/565154703139405824/869390012662317056/webots-bin_hMXbu9eXIO.png)
%end

##### Joro 07/27/2021 01:26:49
the error msg is the same?

##### Amer 07/27/2021 01:27:27
nope its gone but it still drops below the arena

##### Joro 07/27/2021 01:29:46
and what happen if you put it on a higher height at the begin of the simulation

##### Amer 07/27/2021 01:31:41

> **Attachment**: [C\_\_Users\_amo0o\_Documents\_my\_project\_worlds\_mechaproj.wbt\_my\_project\_-\_Webots\_R2021a\_2021-07-27\_05-31.mp4](https://cdn.discordapp.com/attachments/565154703139405824/869391565112639549/C__Users_amo0o_Documents_my_project_worlds_mechaproj.wbt_my_project_-_Webots_R2021a_2021-07-27_05-31.mp4)


tbh ive seen way more complex projects in webots than this shape


idk whats the issue

##### Venkat 07/27/2021 01:34:26
Some settings needs to be adjusted for it to work. No provlem with the car model. Different floor type should be used here

##### Amer 07/27/2021 01:34:37
may u guide me?

##### Venkat 07/27/2021 01:39:16
What is the type of floor you use?

##### Amer 07/27/2021 01:39:56
idk but its the one when u generate a new project directory.



%figure
![webots-bin_6lDQus3Woz.png](https://cdn.discordapp.com/attachments/565154703139405824/869393697861673030/webots-bin_6lDQus3Woz.png)
%end

##### Venkat 07/27/2021 01:42:00
Ok... you  can check the default projects under webots/projects/samples/tutorials/world/4-wheeled-robot.wbt. There you find the floor that could be used to solve this problem.


I could give you exact info, but I need time to do that..

##### Amer 07/27/2021 01:44:07
i found it


ill test it right now


i would appreciate it.


i can give my world file if u wish to try too


didnt work unfortunately

##### alejoxbg 07/27/2021 02:02:16
I think it's because you're not using any solids module

##### Amer 07/27/2021 02:03:42
i dont think so.. i tried the 4wheeled sample and there are no solid modules in there


plus the one i sent

##### alejoxbg 07/27/2021 02:05:04
you have already tried to reload the world?

##### Amer 07/27/2021 02:05:15
yeah

##### alejoxbg 07/27/2021 02:06:23
If you create another object, does the same thing happen?

##### Amer 07/27/2021 02:06:34
i havent tried that yet


ill test it later tmw


i appreciate the help!

##### tabousoud 07/27/2021 02:43:21
Hi `@Luftwaffel`  and Cyberbotics team,

I just used the Docker image per the instructions on [https://github.com/cyberbotics/pyikfast](https://github.com/cyberbotics/pyikfast) to create python bindings for a Kinova Gen3 arm I modeled in Webots. The IK was successful, the `.so` file was created, Python package was built and installed, and it looked like all was going well until I tried to import the module into Python and got the following `ImportError`:

```
ImportError: /path/to/my_venv/directory/pyikfast_kinova_gen3_7d.cpython-38-x86_64-linux-gnu.so: undefined symbol: dgetri_
```

Any clues what could be causing this error and how to get around it? Thanks in advance!

##### DDaniel [Cyberbotics] 07/27/2021 06:15:40
Hi, you can look at the sample world `e-puck_line_demo.wbt` (`file > open sample world`)


`@Amer` How did you import the shape and what format? It could be that the number of triangles is excessive (in which case you can decimate it using a software like Blender for instance) or that the timestep is too high. If you click on the `geometry` field normally it should show you the number of triangles

##### Darko Lukić [Cyberbotics] 07/27/2021 06:32:33
Did you build the Python library in the host machine or Docker?

##### Azer Babaev [Starkit, TC] 07/27/2021 08:26:49
I move robot model and and controller software from Coppelia to Webots. In Coppelia there are 2 types of timesteps: physics engine timestep which is usually 5 ms and simulation timestep which was used to be 20ms for my model. Means controller software generates servo states for 20ms steps. In Webots world I find just basicTimeStep. When I set it to 20ms I see non-realistic behavior of model. During simulation there appear Warnings with recommendations to make model less complex or to reduce basicTimeStep of world. With reduced basicTimeStep behavior of model more realistic. Is there opportunity to separate physics engine timestep from simulator timestep? Real robot works with 20 ms frames of servo controller.

##### Amer 07/27/2021 08:29:32
I exported the shape from Inventor CAD using STL format.

##### Olivier Michel [Cyberbotics] 07/27/2021 08:29:38
Yes the `WorldInfo.basicTimeStep` corresponds to the physics time step, it should be set to a low value (e.g., 8 ms). The argument of the `webots_step()` API function is the control time step which should be a multiple of the physics time step, e.g., 16, 24, 32, etc.

##### Amer 07/27/2021 08:30:21
then imported into webots straightforward.

##### DDaniel [Cyberbotics] 07/27/2021 08:36:54
`@Amer` how many triangles is it comprised of? (triangle count)
%figure
![geom.png](https://cdn.discordapp.com/attachments/565154703139405824/869498575745331240/geom.png)
%end

##### Azer Babaev [Starkit, TC] 07/27/2021 08:40:57
Thank you!

##### Amer 07/27/2021 08:53:41
it says 0 when i tried to use it as a mesh.


but i didnt use mesh at all


when i imported it it was converted to a solid file with shape and indexedfaceset geometry


and then i defined it with a name and used it here



%figure
![image0.jpg](https://cdn.discordapp.com/attachments/565154703139405824/869503213072687124/image0.jpg)
%end



%figure
![image0.jpg](https://cdn.discordapp.com/attachments/565154703139405824/869503412931297280/image0.jpg)
%end


sorry for uploading many pics


i cant explain properly


should i be using mesh for my geometry from now on? is it like better?

##### DDaniel [Cyberbotics] 07/27/2021 09:05:04
Since you have an STL, it makes more sense to insert it into a Mesh node. Can you try again? `Shape > geometry > add Mesh node > double-click url > select the STL`

##### Amer 07/27/2021 09:05:22
yes! i tried just now


it seems better


let me show u



%figure
![webots-bin_Jx2NXZnVK9.png](https://cdn.discordapp.com/attachments/565154703139405824/869505803390951474/webots-bin_Jx2NXZnVK9.png)
%end


though i have to separate the wheels from the case


but it seems better


ill try to use this in the simulation and hopefully it works


thanks alot

##### DDaniel [Cyberbotics] 07/27/2021 09:08:45
either way, I wouldn't use the STL for the boundingObject, even less so if the triangle count is fairly high  (tens of thousands), you should instead approximate the shape using base nodes like cylinders, boxes etc. Using the STL might lead to instabilities

##### Amer 07/27/2021 09:09:30
it does indeed lead to some instabilities.


its kind of a complex shape its hard to approxiamte with base nodes


but ill have to make it work somehow


appreciate the help

##### Johan2021 07/27/2021 10:53:23
`@Stefania Pedrazzi` is this fix included in the new Webots release? Also, were there any more fixes/updates w.r.t. the ballJoints?

##### DDaniel [Cyberbotics] 07/27/2021 11:31:28
`@Johan2021` The bug you reported hasn't been fixed yet but there have been a few fixes however for the BallJoint, here's the changelog: [https://cyberbotics.com/doc/reference/changelog-r2021#webots-r2021b](https://cyberbotics.com/doc/reference/changelog-r2021#webots-r2021b)

##### tabousoud 07/27/2021 12:06:08
Hi `@Darko Lukić` , I built it on my (host) machine. Also, I meant to say I used the Docker container not "image".

##### Iskender 07/27/2021 13:26:17
Hi `@DDaniel`,   I have exported my robot in x3d format, and rendering it in the browser. How can I manipulate robot? I mean is there any possibility to change position of robot elements just in browser as 3d object?

##### Darko Lukić [Cyberbotics] 07/27/2021 14:01:51
I am not sure. It is tested on Ubuntu 20.04 with Python 3.8 without venv. Maybe try that configuration?

##### tabousoud 07/27/2021 14:14:29
My machine is running Linux Mint 20.1 (based on Ubuntu 20.04), and the conda environment uses Python 3.8. I did find this bit of info regarding the error: [https://stackoverflow.com/questions/52106978/how-to-compile-c-extension-for-python-where-c-function-uses-lapack-library](https://stackoverflow.com/questions/52106978/how-to-compile-c-extension-for-python-where-c-function-uses-lapack-library) but I'm not sure how to use it.

##### DDaniel [Cyberbotics] 07/27/2021 14:24:11
`@Iskender` Hi, if you just exported it as an animation then no, you can't edit the scene from the browser. If instead you're streaming the webots window, then the changes you do on the webots side will also occur in the browser stream

##### Troy 07/27/2021 19:29:49
Hi everyone! I'm working on a simulation of a robot working underwater, I'm using the fluid node to simulate the stream, I'm wondering whether there's a method to measure the force that the fluid acting on the robot?

##### Luftwaffel [Moderator] 07/27/2021 20:06:30
Hi, this error is caused due to the fact, that the kinova arms require LAPACK on the system for the solver to work


I can dig a bit to try and dig it up. BTW, I already converted the kinova arms [https://github.com/cyberbotics/community-projects/tree/master/robots/kinova/protos](https://github.com/cyberbotics/community-projects/tree/master/robots/kinova/protos)

##### tabousoud 07/27/2021 20:24:09
Hi `@Luftwaffel` , thanks for the info. I've been using your proto as well as one I created myself of the 7DoF model for my project. Please let me know if you find anything about linking LAPACK. I have it in the environment but don't know if it's an issue of the linker needing to find it when compiling the package or if there's something else I need to do to get it to work.

##### Luftwaffel [Moderator] 07/27/2021 20:24:28
perhaps try this [https://coral.ise.lehigh.edu/jild13/2016/07/27/install-lapack-and-blas-on-linux-based-systems/](https://coral.ise.lehigh.edu/jild13/2016/07/27/install-lapack-and-blas-on-linux-based-systems/)


lapack can be a pain in the ass and I never got it to work on windows


and 7DOF does not work with ikfast


only when deactivating one link

##### tabousoud 07/27/2021 20:25:49
Good to know, thanks again!

##### Luftwaffel [Moderator] 07/27/2021 20:26:56
I also have a very solid ikfast controller for webots


that makes it easy to interact with the solver


in python

##### tabousoud 07/27/2021 20:27:51
That would be very useful, can you point me to it? Is it in the Cyberbotics repo?

##### Luftwaffel [Moderator] 07/27/2021 20:27:58
no


holdo n


this is a sample project
> **Attachment**: [ikfast\_tutorial\_copy.zip](https://cdn.discordapp.com/attachments/565154703139405824/869679145062379590/ikfast_tutorial_copy.zip)


pm me when you have questions

##### tabousoud 07/27/2021 20:36:34
Thanks, I'll try this out a little later and let you know if I have questions (or if I figure out anything related to LAPACK).

##### Amer 07/27/2021 22:35:22
Hey guys! I've been working on a project to make this vehicle move but somehow the speed is way too low. The wheels barely rotates.



> **Attachment**: [C\_\_Users\_amo0o\_Documents\_my\_project\_worlds\_testingonly.wbt\_my\_project\_-\_Webots\_R2021a\_2021-07-27\_21-.mp4](https://cdn.discordapp.com/attachments/565154703139405824/869709692488806440/C__Users_amo0o_Documents_my_project_worlds_testingonly.wbt_my_project_-_Webots_R2021a_2021-07-27_21-.mp4)

##### Luftwaffel [Moderator] 07/27/2021 22:37:37
can you scroll further down in your code. And perhaps add a print statement showing what the motor velocity is set to

##### Amer 07/27/2021 22:38:02
oh sorry thats not the code i used


one sec



%figure
![webots-bin_sonEAYX3zF.png](https://cdn.discordapp.com/attachments/565154703139405824/869710537913696296/webots-bin_sonEAYX3zF.png)
%end

##### Luftwaffel [Moderator] 07/27/2021 22:40:34
I can take a look if you share your project. The maxVelocity might be set very low

##### Amer 07/27/2021 22:40:45
I did set it to 100 for all wheels


I will in a min

##### Luftwaffel [Moderator] 07/27/2021 22:41:00
that is the velocity, not the  max velocity

##### Amer 07/27/2021 22:42:52

%figure
![webots-bin_mPjuUVeza3.png](https://cdn.discordapp.com/attachments/565154703139405824/869711468893982721/webots-bin_mPjuUVeza3.png)
%end

##### Luftwaffel [Moderator] 07/27/2021 22:43:23
maybe just share the project. Simply zip the whole folder and drop it here or in a pm

##### alejoxbg 07/28/2021 03:45:30
Hi, I'm trying to publish a depth image in ros2 but I only get a black image, this is what I'm using to publish it



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/869787683583557692/unknown.png)
%end


camera\_data\_depth = np.array(self.camera\_depth.getRangeImage(), dtype="float32").tobytes()


this is what I use to obtain the image data

##### Darko Lukić [Cyberbotics] 07/28/2021 07:34:03
You can see an example here:

[https://github.com/cyberbotics/webots\_ros2/blob/dfe630b6913136bbfd01075594c6ac151adc8931/webots\_ros2\_core/webots\_ros2\_core/devices/range\_finder\_device.py#L71-L91](https://github.com/cyberbotics/webots_ros2/blob/dfe630b6913136bbfd01075594c6ac151adc8931/webots_ros2_core/webots_ros2_core/devices/range_finder_device.py#L71-L91)

##### tiborbs1 07/28/2021 08:28:39
Hi, I am woking on a multi-robot simulation using the new standard ROS controller. Is it possible to expose the robot\_description param in its own namespace, so that /robot\_description becomes /robot1/robot\_description? Secondly, is it possible to spawn the controller manager  (which spawns when using the --use-ros-control) in the robot's namespace, so that we have one controller manager for each robot (example: /robot1/controller\_manager, /robot2/controller\_manager, etc.)?

##### Iskender 07/28/2021 08:49:32
Hi `@Darko Lukić`, thanks for the previous answer, I have few more questions:

1) How can I stream telemetry from robot to browser? would be cool to get some links to doc or something similar to have guidance.

2) Just to confirm, as Daniel Dias responded, If we stream our robot to browser, all movements will be replicated in browser as well? is that correct?

##### Darko Lukić [Cyberbotics] 07/28/2021 09:03:53
At the moment it is not possible. The following parts have to be changed:

- [https://github.com/cyberbotics/webots/blob/ed42ce721f4db6cf9c219c4beb92af9bfddc6e98/projects/default/controllers/ros/Ros.cpp#L474](https://github.com/cyberbotics/webots/blob/ed42ce721f4db6cf9c219c4beb92af9bfddc6e98/projects/default/controllers/ros/Ros.cpp#L474)

- [https://github.com/cyberbotics/webots/blob/ed42ce721f4db6cf9c219c4beb92af9bfddc6e98/projects/default/controllers/ros/highlevel/RosControl.cpp#L23](https://github.com/cyberbotics/webots/blob/ed42ce721f4db6cf9c219c4beb92af9bfddc6e98/projects/default/controllers/ros/highlevel/RosControl.cpp#L23)

If you download the Webots tarball you can change everything without recompiling Webots. Just go to `projects/default/controllers/ros`, `export ROS_DISTRO=noetic`, and run `make`. P.S. Please contribute the solution 🙂



Alternatively, you can run the standard `ros` controller as an external controller. In that case you can use the standard ROS mechanism for namespaces and remapping.


1) You have to implement the telemetry mechanism by yourself. It can be a simple WebSocket server running as a robot controller.

2) Yes

##### Iskender 07/28/2021 09:15:10
`@Darko Lukić` Just to clarify, regarding the second question, I meant will it be replicated in browser as x3d object (all movements, etc.)? Because we need to stream to browser video itself using websocket, and have

 window with 3d ojects replicating all robot movements as well. Thanks in advance!

##### DDaniel [Cyberbotics] 07/28/2021 09:37:58
`@Iskender` I'm not sure I understand, but the easiest way would be for you to simply test it:

1. Launch webots as: `webots --stream` and open your world

2. navigate to `webots/resources/web/streaming_viewer` and open the `.html` and click `connect`

3. If you pause/play and or delete objects on the webots side, the stream also updates accordingly.

##### alejoxbg 07/28/2021 14:27:07
that's exactly what I used, but when I view it in rviz it comes out as a black image.

##### Darko Lukić [Cyberbotics] 07/28/2021 14:30:15
Can you debug it? Does Webots show the image properly?

##### alejoxbg 07/28/2021 14:38:32

%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/869951967827488768/unknown.png)
%end


this is what rviz publishes
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/869953130220105818/unknown.png)
%end

##### HeadCrab 07/28/2021 20:52:39
Hi everyone, is there any way to make it work with Wolfram Mathematica or do I have to make webots interact via sockets?

##### scott.nortman 07/28/2021 23:52:20
Hi, is it possible to overlay graphics on to the 2D display of camera image shown in the webots simulation window?

##### n33r4j 07/29/2021 05:00:34
`@scott.nortman` have you already checked [this link]([https://cyberbotics.com/doc/guide/programming#how-can-i-draw-in-the-3d-window](https://cyberbotics.com/doc/guide/programming#how-can-i-draw-in-the-3d-window)) ?


Unrelated to this, does anyone know if it's possible to control the Viewport node (position and rotation) using a controller/script in Webots 2021 ? I wanted to know if you can pan/rotate around an object and take pictures.

##### SeanLuTW 07/29/2021 06:18:22
Hi, I am trying to automatically generate a world file from user input and I want to highlight specific node in the scene tree after user open that file, how can I do so? I take a look at the `.wbproj` and I found the word `sceneTreePerspectives`, but its value is pretty human unreadable.

##### Darko Lukić [Cyberbotics] 07/29/2021 06:46:09
I have just tested the `webots_ros2` package and a robot with a range finder. It works just fine.



I am sorry, I afraid I cannot help much, your bug seems to be too ROS specific
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/870195477444964352/unknown.png)
%end


You have to use sockets


You can use the Display node:

[https://cyberbotics.com/doc/reference/display](https://cyberbotics.com/doc/reference/display)



There is a `wb_display_attach_camera` function that allows you attach the camera stream. Then, you can use the display to draw over it.


Yes, you can use the Supervisor API:

[https://cyberbotics.com/doc/reference/supervisor](https://cyberbotics.com/doc/reference/supervisor)



You will need the `wb_supervisor_node_get_from_def` to get the Viewpoint node, the `wb_supervisor_node_get_field` function to get the translation and rotation fields, and the `wb_supervisor_field_set_sf_vec3f/wb_supervisor_field_set_sf_rotation` to set the rotation and translation.

##### n33r4j 07/29/2021 06:53:22
`@Darko Lukić` Thanks, I'll give it a shot

##### tiborbs1 07/29/2021 08:46:03
Thank You. Will do.

##### n33r4j 07/29/2021 09:55:36
The string that would need to be passed to `wb_supervisor_node_get_from_def` to get the Viewpoint node is just "Viewpoint" right? Or is this supposed to be some other string?

##### DDaniel [Cyberbotics] 07/29/2021 09:59:01
`@n33r4j` no, you need to give it a DEF in the world file: for instance, `DEF MY_ALIAS Viewpoint { ...` and then get it by `node = wb_supervisor_node_get_from_def("MY_ALIAS")`

##### n33r4j 07/29/2021 10:12:33
Thank you

##### Venkat 07/29/2021 10:26:39
Thank you for your help. It works.. The robot end-effector is able to orient itself to the sphere. I tried doing the similar approach for the Kuka KR10-r1100-2 robot. I followed the steps from [https://github.com/cyberbotics/pyikfast](https://github.com/cyberbotics/pyikfast) and generated the controller code. When I tried using the controller in my project, I am getting the following error:

Traceback (most recent call last):

  File "kuka\_kr10\_r1100-2\_controller.py", line 36, in <module>

    import pyikfast\_kuka\_kr10\_r1100\_2 as pyikfast\_module

ModuleNotFoundError: No module named 'pyikfast\_kuka\_kr10\_r1100\_2'

WARNING: 'kuka\_kr10\_r1100-2\_controller' controller exited with status: 1.



I gave the docker command with the following input:

docker run -v ${PWD}:/output cyberbotics/pyikfast base\_link robotiq\_gripper \_kuka\_kr10\_r1100\_2

##### Stefania Pedrazzi [Cyberbotics] 07/29/2021 11:04:55
From the world WBT or WBPROJ files is not possible to set the selected node. It is only possible to select nodes from from the UI.

##### HeadCrab 07/29/2021 11:06:45
Thank you, since I primarly need it to work with images at agumented speed, (in your opinion) could I modify Webots' source code to support Mathematica natively?

##### Darko Lukić [Cyberbotics] 07/29/2021 11:30:48
I am not sure whether Cyberbotics has interest in developing and/or maintaining the Mathematica API. However, you can contribute the Mathematica API implementation. There is a nice contribution for Haskell (which you can use as an example):

[https://github.com/cyberbotics/HsWebots](https://github.com/cyberbotics/HsWebots)

##### HeadCrab 07/29/2021 13:02:02
Thank you

##### nozomi 07/29/2021 13:33:13
Hi, I am new to webots and I wonder if there is any lidar sensor which can publish sensor\_msgs::PointCloud2 instead of PointCloud?

##### Darko Lukić [Cyberbotics] 07/29/2021 13:34:05
In ROS 1 no. In ROS 2 all Lidar sensors publish PointCloud2.

##### nozomi 07/29/2021 13:35:59
Thank you!

##### alejoxbg 07/29/2021 15:04:31
Thank you i found the answer here: [https://github.com/stereolabs/zed-ros-wrapper/issues/397](https://github.com/stereolabs/zed-ros-wrapper/issues/397)

##### Darko Lukić [Cyberbotics] 07/29/2021 15:06:04
Thank you for sharing the solution!

##### Troy 07/29/2021 20:55:58
Hi! Does anyone know what the dragforcoefficient and dragtorquecoefficient should be if I want to simulate water or stream?

##### AngelAyala 07/30/2021 00:14:31
Hi, anybody knows if there is a way to segment an object by the camera, but a custom object or an specific project's proto mesh?


because current method is based in object and color, but I need only to segment a custom made object or robot

##### Darko Lukić [Cyberbotics] 07/30/2021 07:00:20
What method are you referring to? There is a built-in Webots camera segmentation:

[https://www.cyberbotics.com/doc/reference/recognition](https://www.cyberbotics.com/doc/reference/recognition)

##### llya 07/30/2021 12:34:40
Hi! Does anyone  know how to convert the pixel coordinates in the pictures taken by Kinect camera into the world coordinate system in webot?

##### scott.nortman 07/30/2021 13:24:50
Thanks, will review! RE your question:  I have a working example where I created a camera instance and I can directly control the pose programmatically and grab images; let me know if this will be useful to you, I can share


Thanks, I was able to control the pose via my program, appreciate the information


`@n33r4j` Here is a code snippet:         # Translation is a three element array, meters, can pull straight from message

        t = [

            pose\_stamped\_msg.pose.position.x,

            pose\_stamped\_msg.pose.position.y,

            pose\_stamped\_msg.pose.position.z

        ]

        # orientation as used by Webots is angle axis (Rodrigues)

        #[http://kieranwynn.github.io/pyquaternion/](http://kieranwynn.github.io/pyquaternion/)

        qq = Quaternion(

            w=pose\_stamped\_msg.pose.orientation.w,

            x=pose\_stamped\_msg.pose.orientation.x,

            y=pose\_stamped\_msg.pose.orientation.y,

            z=pose\_stamped\_msg .pose.orientation.z

        )

        axis = qq.get\_axis(undefined=[1, 0, 0])

        angle = qq.radians



        translation\_field = self.robot.getSelf().getField('translation')

        rotation\_field = self.robot.getSelf().getField('rotation')



        translation\_field.setSFVec3f(t)

        rotation\_field.setSFRotation([axis[0], axis[1], axis[2], angle])

##### AngelAyala 07/30/2021 13:53:47
Yes, I'm familiar with and also with segmentation task. What I'm looking for is a method to use the segmentation but for a unique and special Robot node


I don't need the segmentation parameters of color for example


just "sense" by the camera the Robot node, maybe in a binary mask

##### Amer 07/30/2021 18:04:27

> **Attachment**: [final\_version1.mp4](https://cdn.discordapp.com/attachments/565154703139405824/870728567846207558/final_version1.mp4)


any1 can help me with this issue?


my goal is to make the vehicle stable and not flip over to the other side


I tried increasing mass but i guess it doesnt work


here's the code:



from controller import Robot



TIME\_STEP = 64

robot = Robot()



ds = []

dsNames = ['sensor1', 'sensor2']

for i in range(2):

    ds.append(robot.getDevice(dsNames[i]))

    ds[i].enable(TIME\_STEP)



doors = []

doorsNames = ['door1','door2']

for i in range (2):

    doors.append(robot.getDevice(doorsNames[i]))

    doors[i].setPosition(float('inf'))

    doors[i].setVelocity(0.0)



wheels = []

wheelsNames = ['wheel1', 'wheel2', 'wheel3', 'wheel4']

for i in range(4):

    wheels.append(robot.getDevice(wheelsNames[i]))

    wheels[i].setPosition(float('inf'))

    wheels[i].setVelocity(0.0)



avoidObstacleCounter = 0

while robot.step(TIME\_STEP) != -1:

    leftSpeed = 5.0

    rightSpeed = 5.0

    rotateSpeed1 = 0.0

    rotateSpeed2 = 0.0

    if avoidObstacleCounter > 0:

        avoidObstacleCounter -= 1

        rotateSpeed1 = -0.1

        rotateSpeed2 = 0.1

    else:  # read sensors

        for i in range(2):

            if ds[i].getValue() < 950.0:

                avoidObstacleCounter = 100



    doors[0].setVelocity(rotateSpeed1)

    doors[1].setVelocity(rotateSpeed2)

    wheels[0].setVelocity(leftSpeed)

    wheels[1].setVelocity(rightSpeed)

    wheels[2].setVelocity(leftSpeed)

    wheels[3].setVelocity(rightSpeed)


Sorry for messing up the chat

##### n33r4j 07/30/2021 19:05:05
Thanks. I was able to figure out how to move the Viewpoint via the controller. Just a bit difficult to move the camera along the surface of a sphere always looking at the origin using Axis-Angle. Might use quaternions.

##### banghernow 07/31/2021 05:51:29
Hello everyone


I am trying to use naoqisim on webots R2021a


it *almost* works


The arms are not budging at all, although all the other motors are


I am using it on arch linux if that's any help


This is it doing the tai chi dance, alll motors operational excepts the arms for some reason
> **Attachment**: [8mb.video-yPI-ec5L9wVJ.mp4](https://cdn.discordapp.com/attachments/565154703139405824/870911429547532318/8mb.video-yPI-ec5L9wVJ.mp4)


okay guys i solved it, the robot was resting, just clicking on the little sun icon on the top right of choregraphe made it work, sorry for the spam!

##### scott.nortman 07/31/2021 19:29:25
Hi, I am trying to simulate a Realsense D435 stero camera (I only need the stereo images).  My tracking code works with the real camera, but I am getting strange values when simulating a scence with webots.  One of the possible issues may be related to the setting I use for the disparity calculation; for the realsense camera, I know the pixel pitch is 3um, so I can determine the length of a feature projection on the imager, but how will this work with webots, since there is no imager and corresponding pixel pitch.  Any feedback welcome...

## August

##### seenu 08/01/2021 13:58:06
Hi, I am doing an autonomous lidar mapping simulation.  I subscribed to the /<device\_name>/laser\_scan/layer<X>   (i.e. /TurtleBot3Burger\_8431\_lenovo\_Lenovo\_IdeaPad\_S340\_14IIL/LDS\_01/laser\_scan/layer0 ) topic. then I opened Rviz to visualize the map. But I am unable to see the topic in rviz, hence no map I am getting. Could you suggest how to bring the lidar map in Rviz, Should I subscribe to any other topics?, Thank you

##### SeanLuTW 08/02/2021 05:23:24
Hi, can I get current world file name using `Supervisor`?

##### Stefania Pedrazzi [Cyberbotics] 08/02/2021 06:02:36
Hi, you can get it using the `wb_robot_get_world_path` function:

[https://www.cyberbotics.com/doc/reference/robot#wb\_robot\_get\_world\_path](https://www.cyberbotics.com/doc/reference/robot#wb_robot_get_world_path)


Hi, I would suggest you to take a look at the  `floating_geometries.wbt` sample simulation. This could probably help you:

[https://www.cyberbotics.com/doc/guide/samples-geometries#floating\_geometries-wbt](https://www.cyberbotics.com/doc/guide/samples-geometries#floating_geometries-wbt)


To segment just an object, you could edit your world and empty the `recognitionColors` field of all the other solid you are not interested in.

This way the segmentation image will only contain your custom robot.

The,n, if you set the `recognitionColors` of your robot to white, you will get a binary mask.


You should calibrate your robot and adjust not only the mass but also the position of the center of mass.

If the robot is made by different solid parts, it may be needed to calibrate the mass and center of mass for all of them.

##### Thiago Costa 08/02/2021 12:37:41
hello everyone,

I need to implement the Teaching & Playback technique on a robot developed by a study group, programmed in C language. It has two encoders and 3 distance sensors. I need suggestions to implement the Playback part. I saw on the cyberbotics website about the "motion.h" library, but I couldn't understand its correct functioning. Could someone explain better how to implement it?

##### viorel\_gheorghe 08/02/2021 15:41:43
Hi there! There's needed some simulations of a mobile robot on surfaces with different friction coefficient. I set 'default' material on wheels and the white plane and on the gray plane 'low\_friction' material and 'default'. It'k ok like that or some more materials have to be added. Thanks in advance!


Little robot
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/871779898413416480/unknown.png)
%end

##### Olivier Michel [Cyberbotics] 08/02/2021 15:44:08
That should be sufficient.

##### viorel\_gheorghe 08/02/2021 15:47:12
`@Olivier Michel` thank you!


If I may use more of your knowledge: I use supervisor node to see the position/orientation of the robot, but the robot gets up & down +-0.5mm (visually sinks more). Can I correct this?

##### Olivier Michel [Cyberbotics] 08/02/2021 15:54:01
Maybe using the ERP/CFM parameters (or softERP, softCFM).

##### DDaniel [Cyberbotics] 08/02/2021 15:57:02
`@viorel_gheorghe` Also lowering the timestep can reduce the sinking issues, and double check that the masses are appropriate. Unless you changed it, by default physics node apply a density of 1000 kg/m³, which might not be appropriate depending on the size/scale of your design. Setting the masses instead of the density might be easier

##### viorel\_gheorghe 08/02/2021 16:04:27
timestep I had lower it to 5ms, it solves the issue somehow. I'll tune ERP/CFM


is there a chance to monitor when the wheels get in contact with the 'low frecition" matetrial?

##### sa33 08/03/2021 01:47:14
Hi, I want to implement a stepper motor function by using rotational motor. Can anyone help me here, please?

##### Darko Lukić [Cyberbotics] 08/03/2021 06:39:30
You can use the regular motors and control the position:

[https://cyberbotics.com/doc/reference/motor](https://cyberbotics.com/doc/reference/motor)



You may need to scale and/or decimate the position values to have more realistic behavior, but Webots-wise, the Motor node should be enough.

##### Olivier Michel [Cyberbotics] 08/03/2021 06:53:19
The low friction material could have a different color and the robot may have an infra-red distance sensor looking down, that would allow the robot to detect when it is above the low friction material.

##### LucasW 08/03/2021 12:42:16
Hi I'm doing a ROS2 project and I'm using multiple of the same robot. In my launch file I create  a loop that appends each controller to an array. Then in my LaunchDescription I call each instance controller[0], controller[1] etc. That all works well and each of these nodes have a different namespace. So, when I run the launch file each robot in my Webots world should get assigned the nodes in order but, they instead, get assigned one of these controllers randomly every time. This is not the intended behaviour.since I will run map merging and need the initial positions of a certain robot (e.g. robot1 has pos 1 1 0) to stay the same. How do I fix this? Thanks.


*behaviour, since

##### Darko Lukić [Cyberbotics] 08/03/2021 12:50:42
You can use the `--webots-robot-name` argument:

[https://github.com/cyberbotics/webots\_ros2/blob/091357ab3e0cdd0f5f967c75bbcc87be65496cee/webots\_ros2\_demos/launch/armed\_robots.launch.py#L42](https://github.com/cyberbotics/webots_ros2/blob/091357ab3e0cdd0f5f967c75bbcc87be65496cee/webots_ros2_demos/launch/armed_robots.launch.py#L42)

The robot name has to match the robot name in world file.

##### Troy 08/03/2021 14:21:38
Hi I used the urdf2webots tool to transfer my urdf(exported from SW) to proto, then I put the proto file in the proto folder, but I can't see it in the webots interface, does anyone know why?


`@Darko Lukić` There is nothing in the "PROTO nodes (current project)" do you know why?

##### Darko Lukić [Cyberbotics] 08/03/2021 14:28:16
The project structure should be:

```
|- worlds
|- protos
|- controllers (not needed if you use ROS)
```

Could you verify whether you misspelled something?

##### Troy 08/03/2021 14:28:59
No, I have the three folders


I exported the urdf from solidworks, then use urdf2webots tool, then put proto into protos folder

##### Darko Lukić [Cyberbotics] 08/03/2021 14:32:27
Could you add this PROTO to the protos directory:

[https://github.com/cyberbotics/webots\_ros2/blob/master/webots\_ros2\_turtlebot/protos/TurtleBot3Burger\_enu.proto](https://github.com/cyberbotics/webots_ros2/blob/master/webots_ros2_turtlebot/protos/TurtleBot3Burger_enu.proto)

simply to verify whether the PROTO generated from urdf2webots is broken.

##### Troy 08/03/2021 14:35:57
it's working... so it's my proto's problem

##### LucasW 08/03/2021 14:40:57
`@Darko Lukić`  Thank you very much

##### Darko Lukić [Cyberbotics] 08/03/2021 15:34:54
It's strange, `urdf2webots` should output valid PROTOs


Can you verify whether the PROTO is valid?

##### Troy 08/03/2021 16:26:14
i fixed it, because my output from SW is M\_Robot.SLDASM.urdf, and the output proto is M\_Robot.SLDASM.proto, I deleted the '.SLDASM' when export from SW, now it works


Does anyone know why my robot flys away when it touches the ground?
> **Attachment**: [video0.mov](https://cdn.discordapp.com/attachments/565154703139405824/872184753460240524/video0.mov)

##### viorel\_gheorghe 08/03/2021 21:06:37
`@Troy` you have to set 'boundingObject' property


some more info here: [https://cyberbotics.com/doc/guide/tutorial-5-compound-solid-and-physics-attributes](https://cyberbotics.com/doc/guide/tutorial-5-compound-solid-and-physics-attributes)


interesting approach! Thanks!

##### DDaniel [Cyberbotics] 08/04/2021 06:21:14
`@Troy` Hi, are you using meshes (stl etc) as boundingObject?

##### sa33 08/04/2021 11:09:30
`@Darko Lukić` Ok, Thank you very much

##### FunkyPants 08/04/2021 16:19:29
Hey, I'm trying to use the supervisor API to track the initial position and final position of a robot in a simulation, however it seems that the ``wb\_supervisor\_field\_get\_sf\_vec3f()`` function only returns the final values, whichever time step I use it on

##### DDaniel [Cyberbotics] 08/04/2021 16:37:06
`@FunkyPants` Hi, what it returns is a pointer to where the information is stored. So I imagine you created 2 variables, one for the call at the initial position and one at the final. By doing so however they  both point to the same value so both are updated at every timestep. What you need to do is instead copy the contents of the memory using for instance `memcpy` to save the initial state.

##### FunkyPants 08/04/2021 16:51:21
ah I see


thanks for the info

##### viorel\_gheorghe 08/04/2021 17:08:13
I have similar with `@FunkyPants` , but I've chosen to save getPosition in an CSV file


is something more suitable?

##### kevmayo 08/04/2021 22:52:18
is there a way to get the angle of the normal force at the contact point between two solids? i'm trying to determine wheel slip based on contact angle with the ground

##### Troy 08/04/2021 23:22:21
yes, and I think it was because the model is too complex


Does anyone know how to add contact property to uneven terrain node?

##### DDaniel [Cyberbotics] 08/05/2021 06:19:46
`@Troy` The `UnevenTerrain` is defined as a proto file, `webots/projects/objects/floors/protos`. It doesn't currently expose the `contactMaterial` field so you'll either need to hard-code it in the proto body (`contactMaterial "my_material"`) or define a field for it and connect it to the body property using `contactMaterial IS contactMaterial`

##### LucasW 08/05/2021 12:45:51
Hi everyone, in the [https://github.com/cyberbotics/webots\_ros2/blob/master/webots\_ros2\_core/webots\_ros2\_core/devices/imu\_device.py](https://github.com/cyberbotics/webots_ros2/blob/master/webots_ros2_core/webots_ros2_core/devices/imu_device.py) the ImuDevice should publish orientation data but it isn't. All the other parts are working (The accelerometer and gyro). Just the inertial unit isn't working. How do I fix this?

##### Darko Lukić [Cyberbotics] 08/05/2021 12:47:59
You are working with e-puck2? E-puck2 doesn't have inertial unit.

##### LucasW 08/05/2021 12:48:43
I'm basing it off of the Pi\_Puck which has a 9-DoF LSM9DS1 IMU which has one?


How may I add one?

##### Darko Lukić [Cyberbotics] 08/05/2021 12:50:08
According to this page it doesn't, so it wasn't included in the model:

[https://www.gctronic.com/doc/index.php/e-puck2](https://www.gctronic.com/doc/index.php/e-puck2)

> 3D accelerometer, 3D gyro, 3D magnetometer


Maybe they missed to include it in the documentation


You can add the IMU as a slot


There are `groundSensorSlot` and `turretSlot`

##### LucasW 08/05/2021 12:52:23
It's an extra introduced by the Pi\_puck expansion board. It's in this documentation I believe  :[https://www.gctronic.com/doc/index.php?title=Pi-puck](https://www.gctronic.com/doc/index.php?title=Pi-puck). I will add one to the slot thank you

##### Darko Lukić [Cyberbotics] 08/05/2021 12:52:51
Good to know! Thanks

##### Troy 08/05/2021 17:11:37
thank you! i'll have a try


could you please tell me how to  define a field for it? and connect it to the body property?

##### DDaniel [Cyberbotics] 08/05/2021 17:19:57
`@Troy` Here you go
> **Attachment**: [CustomUnevenTerrain.proto](https://cdn.discordapp.com/attachments/565154703139405824/872891696235569152/CustomUnevenTerrain.proto)

##### Troy 08/05/2021 17:21:11
thank you so so much!


it helps me a lot

##### Skyrim 08/05/2021 17:42:01
Hello everyone!

Can someone guide me as to what steps to take to run webots headless in a docker container? R2021a

##### DDaniel [Cyberbotics] 08/05/2021 18:09:27
`@Skyrim` Hi, here's the procedure: [https://www.cyberbotics.com/doc/guide/installation-procedure?version=develop#installing-the-docker-image](https://www.cyberbotics.com/doc/guide/installation-procedure?version=develop#installing-the-docker-image)

##### Skyrim 08/05/2021 18:10:07
Awesome! Thank you 🙂

##### nap 08/06/2021 01:27:57
I am about to download the MacOS version of the R2021b edition of Webots and I noticed the download is only 215MB.  Is this correct given that the R2021a release was over 1GB?

##### Luftwaffel [Moderator] 08/06/2021 01:48:49
A lot of the size used to be textures of models. I believe these are now linked to the web


`@nap`

##### nap 08/06/2021 01:50:58
Oh, but how do I get them locally?  It's not that simple on a Mac where thee App is treated as a bundle.


`@Luftwaffel` meaning, when I do the update, I will loose everything that was installed before.

##### Luftwaffel [Moderator] 08/06/2021 01:52:25
I don't think so


You can back up the projects folder to be safe


That's where all the models and sample worlds are

##### nap 08/06/2021 01:53:33
Well, thanks for the explanation.  I would like if there's an alternate download which contains everything, or if there's a way of re-using the old stuff I already have.

##### Luftwaffel [Moderator] 08/06/2021 01:54:32
Update should not change those files anyways.

##### nap 08/06/2021 01:54:33
Ok, so the structure/organisation of all the files remains the same.  What if I copy over the file in the previous installation rather than replace it?

##### Luftwaffel [Moderator] 08/06/2021 01:55:09
Replace it.


If it is that small, it won't include all the large texture files


And you can always back up that folder to be sure

##### nap 08/06/2021 01:56:02
Apps on MacOS are treated as containers.  To the best of my knowledge, installs are not done at a file level but rather a folder level.  So the old folders are removed and the new file structure replaces them.

##### Luftwaffel [Moderator] 08/06/2021 01:57:02
I'm a windows and Linux user, so I can't say for sure, but I think it should be fine to update


Can't you manually copy the projects folder in finder?

##### nap 08/06/2021 01:57:30
What I can do is backup what I have and then copy them back in.  My only concern is accidentally placing old files into the new version.

##### Luftwaffel [Moderator] 08/06/2021 01:58:02
Do that. Just update and try it first

##### nap 08/06/2021 01:58:27
I can manage it manually for sure.  The only problem is that I'm not 100% confident in doing this since I don't fully understand how Webots as a project is organised.


I'll give it a shot later today.

##### Luftwaffel [Moderator] 08/06/2021 02:01:01
The projects folder contains all models and sample worlds, but no functionality. The rest is basically the program. You dont need the projects folder to use the program.

##### nap 08/06/2021 02:04:29
What about the resources folder?

##### Luftwaffel [Moderator] 08/06/2021 02:04:43
that is needed for the functionality

##### nap 08/06/2021 02:07:14
Cheers, I'll try it later when I have some time to handle the 'just in case'.


Do you know if there is a version available that contains everything (in the way it was previously)?

##### Luftwaffel [Moderator] 08/06/2021 02:10:17
i'm not sure how exactly it workds now and what they have done. You'll have to wait for a developer.

##### nap 08/06/2021 02:13:14
np, thanks for your explanation.

##### Luftwaffel [Moderator] 08/06/2021 02:16:13
[https://cyberbotics.com/doc/reference/changelog-r2021](https://cyberbotics.com/doc/reference/changelog-r2021)


Reduced installation package size by using online resources for images, meshes, etc. (#2787). The local URLs to textures and meshes in previous worlds files should be updated to point to online resources, e.g., "textures/carpet.jpg" should be changed to "[https://raw.githubusercontent.com/cyberbotics/webots/R2021b/projects/default/worlds/textures/carpet.jpg](https://raw.githubusercontent.com/cyberbotics/webots/R2021b/projects/default/worlds/textures/carpet.jpg)".

##### nap 08/06/2021 02:19:50
I prefer to have that locally.  My internet isn't that fast, I have a limit on how much I can download, I don't always have internet available, and I prefer to have things locally to improve responsiveness.


1.5GB was not a problem for me since I'm not doing it often.


I can see how this works better for Cyberbotics.

##### Luftwaffel [Moderator] 08/06/2021 02:21:54
That is a good issue to bring up with the devs. <@&568329906048598039> is there a way to download all resources to use webots in "offline" mode?

##### Affonso 08/06/2021 03:30:44
Hey, does anyone have an example four-wheel robot simulation for me to apply to my project.

##### SeanLuTW 08/06/2021 05:35:19
Can I get the length of a `MFNode`?

##### DDaniel [Cyberbotics] 08/06/2021 06:20:33
`@Affonso` hi, here you can find the list of robots available in webots: [https://cyberbotics.com/doc/guide/robots](https://cyberbotics.com/doc/guide/robots), you can also find them in: `file > open sample world > search robot name`


`@nap` From 2021b, the first time you load a world, the necessary assets (textures, meshes, ...) are retrieved and stored in the cache. So as long as they're in the cache, they're not downloaded again if that world, or another that uses it, is loaded again later. So instead of downloading 1.5GB straight away, you download it over time as you need it. There shouldn't be a big difference in internet usage compared to before, unless you manually clear the cache of course. The change only affects the Webots library, normally you wouldn't have writing access to these locations so your projects should be separate (but as mentioned you might need to change the urls of the textures if they rely on Webot's assets). If you still find it preferable to have everything locally from the get go, a better option would be to install Webots Development Environment: [https://github.com/cyberbotics/webots/wiki/macOS-installation](https://github.com/cyberbotics/webots/wiki/macOS-installation)


`@SeanLuTW` Hi, you can use the `wb_supervisor_field_get_count` function [https://www.cyberbotics.com/doc/reference/supervisor#wb\_supervisor\_field\_get\_count](https://www.cyberbotics.com/doc/reference/supervisor#wb_supervisor_field_get_count)

##### Kumar 08/06/2021 14:01:25
I just started using webots yesterday. Are robots in webots modeled using urdf? When I start webots sample spot demo, I see the spot robot. If it is specified using urdf, where can I find the urdf and mesh files for the spot robot?

##### DrVoodoo [Moderator] 08/06/2021 14:26:17
`@Kumar` no they are not. Webots uses proto files, you can see the proto file by right clicking on the robot in the scene tree on the left hand side on the window


If you have an existing urdf that you want to convert, look at "GitHub - cyberbotics/urdf2webots: Utility to convert URDF files to Webots PROTO nodes" [https://github.com/cyberbotics/urdf2webots](https://github.com/cyberbotics/urdf2webots)

##### Kumar 08/06/2021 14:34:56
Thanks `@DrVoodoo` for quick response. I will check it out


Does webots support ROS? I am currently working in a ROS environment and wondering whether any of the information can be leveraged if I consider migrating to webot

##### Darko Lukić [Cyberbotics] 08/06/2021 14:37:16
Yes, there are ROS 1 and ROS 2 interfaces for Webots

##### Kumar 08/06/2021 14:45:52
Thanks `@Darko Lukić` for quick response. I want to start with the Jetbot simulation. I opened the demo world for it. I can see that it has a controller function inbuilt. How can I make the robot move? If I want to create topics (ROS1) to communicate with the robot, what are some resources to help me get started quickly?

##### Darko Lukić [Cyberbotics] 08/06/2021 14:48:21
If you set the controller to `ros` it will automatically expose services that the robot has. Also, you can use the `--auto-publish` argument to automatically expose all topics as well. See:

[https://cyberbotics.com/doc/guide/using-ros](https://cyberbotics.com/doc/guide/using-ros)

[https://cyberbotics.com/doc/guide/tutorial-8-using-ros](https://cyberbotics.com/doc/guide/tutorial-8-using-ros)

##### Max\_K 08/06/2021 14:48:58
Hello, is it possible to access a device of a robot(e.g. a distance sensor) inside a supervisor script? I want to change the color of a shape when its passes a distance sensor.

##### Darko Lukić [Cyberbotics] 08/06/2021 14:50:02
Yes (as far as the device belongs to the Supervisor robot)


Here is a short video instruction (Webots + ROS 1):

[https://youtu.be/z0I4XzManOM](https://youtu.be/z0I4XzManOM)

##### Kumar 08/06/2021 17:19:12
Thanks `@Darko Lukić`

How can I get the option for getting all the controllers including the ROS option listed here?
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/873253892731846736/unknown.png)
%end


I am running this on a Windows 10 machine

##### DrVoodoo [Moderator] 08/07/2021 08:51:56
`@Kumar`  what does it say when you click select?

##### Kumar 08/07/2021 10:22:02
`@DrVoodoo` - Post clicking select and few other clicks, I get as per the screenshot (no option to click on ROS). Could it be that ROS needs to be configured in webots or that ROS needs to be installed on my Windows system?
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/873511297038286878/unknown.png)
%end


Based on this link [https://cyberbotics.com/doc/guide/using-ros](https://cyberbotics.com/doc/guide/using-ros) that `@Darko Lukić` pointed me to, it is easier to work with ROS if you are on a Linux system, which I am not. I will be focusing with JetBots, but possibly in C or python, as I am working on a Windows system. Thanks `@Darko Lukić` `@DrVoodoo` for quick feedback and questions


Are there python controllers available for jetbot from nvidia?

##### Dave 08/07/2021 12:57:16
Hi,

I'm writing a Python API for controlling the e-puck2 for the University of Fribourg.



I've downloaded an hour ago the new Webots simulation program but I am having problems with the camera.getImageArray() method. I get a seg. fault



FYI : If I print camera.getWidth() or camera.getHeight() it works



Can someone please give me a small help pls ? Any idea ? Is the method camera.getImageArray() deprecated ?



Update : I've downloaded back the Webots R2021A, the problem is not appearing in this version. I guess its a segmentation fault due to the Webots R2021B

##### Kumar 08/07/2021 14:49:19
I tried to place a nvidia Jetbot robot in a complete apartment world. I was able to move it quite close to the floor by changing the translation points. However, it appears fallen on its side. How can I change its orientation?
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/873578560600830042/unknown.png)
%end


I got the nVidia Jetbot into this world. It is able to turn right or left. But when I ask it to move forward, it is not able to do so. In the JetBot standard environment, it is able to move forward as well.

What could be the reason.Might it have something with the friction of this floor? Any suggestions on how to debug?
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/873587258148651039/unknown.png)
%end

##### Veeeee 08/07/2021 23:39:44
Hey guys, I'm new to WeBots. Dumb question, is there a way to hide an object? Meaning let's say, I want to temporarily remove a box in the environment to do some testing and later on place back the box back to it's original place. Is there a way to do that without literally deleting the object and re-creating.

##### Luftwaffel [Moderator] 08/07/2021 23:53:17
`@Veeeee` only with workarounds. Perhaps the easiest thing would be to create an extra test-world save


or you could put all your objects as children of a transform node, which has 0 0 0 translation. To test, you could change the translation of the transform node to lik 0 10 0 (10m upwards)


you can disable single objects by  disabling their bounding object and change the transparency to 1, however, this would require converting all objects into base nodes and is quite the hassle

##### Veeeee 08/08/2021 00:12:14
Thanks for the reply. Those are actually some of the ways I have thought of also. But those methods are kind of impractical 😅 . Wonder why WeBots don't have a hide feature built-in to their program. 🤔

##### rizqi 08/08/2021 03:08:39
hello guys, i'm new to use Webots for simulation vehicle. how can i customize the white dashed line on road like change the length and width of dashed  line ? as i know the white dash line only show the parameter of width only. thanks 🙏
%figure
![20210808_100815.jpg](https://cdn.discordapp.com/attachments/565154703139405824/873764621104861254/20210808_100815.jpg)
%end

##### Kumar 08/08/2021 05:09:46
On the JetBot robot, I added a distance sensor to the extension slot sub part. Is there a way to specify the translation (x, y and z) relative to the JetBot robot and not in absolute coordinates?
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/873795099480424518/unknown.png)
%end

##### Luftwaffel [Moderator] 08/08/2021 05:11:04
a translation field is always relative to its parent.

##### Kumar 08/08/2021 05:21:39
Thanks `@Luftwaffel` The IR sensor at 0 0 0 is higher than the JetBot. What I was expecting was at the same place as the JetBot as I expect it to be looking at the floor to detect the distance
> **Attachment**: [ir\_sensor\_higher\_than\_JetBot.mp4](https://cdn.discordapp.com/attachments/565154703139405824/873798092774854656/ir_sensor_higher_than_JetBot.mp4)

##### Luftwaffel [Moderator] 08/08/2021 05:38:13
the extension slot probably has an offset to therobot base

##### llya 08/08/2021 12:54:41
Hey,does anyone know how to get the kinect’s internal parameters,such as the focal length?

##### DrVoodoo [Moderator] 08/08/2021 14:34:22
A simulated in webots kinect? Or a real kinect so that you can simulate it? If the latter, which version?

##### Kumar 08/09/2021 00:47:31
Can you point me to a sample .wbt with robot with LIDAR sensor in a world and a controller associated with it?

##### Stefania Pedrazzi [Cyberbotics] 08/09/2021 06:05:59
When you create a new world for the JetBot, you should also copy the WorldInfo > ContactProperties from the default `jetbot.wbt` world so that it works properly.

Additionally you can find Python sample controllers here: [https://github.com/cyberbotics/webots-projects/tree/master/projects/nvidia-jetbot-collision-avoidance](https://github.com/cyberbotics/webots-projects/tree/master/projects/nvidia-jetbot-collision-avoidance)


here is a sample including the the Lidar device: [https://www.cyberbotics.com/doc/guide/samples-devices?tab-os=linux&tab-language=python#lidar-wbt](https://www.cyberbotics.com/doc/guide/samples-devices?tab-os=linux&tab-language=python#lidar-wbt)


Hi Dave, which Python version are you using?

Could you please try the latest nightly build of R2021b? After the release we found and fix some issues with Python 3.9

[https://github.com/cyberbotics/webots/releases/tag/nightly\_6\_8\_2021](https://github.com/cyberbotics/webots/releases/tag/nightly_6_8_2021)

Otherwise you can also simply try to use a different Python version, for example 3.8.


If you need more parameters to customize, then I suggest you to copy and modify the PROTO file and create your own PROTO model version where you specify all the needed parameters.

##### llya 08/09/2021 06:44:29
`@DrVoodoo`A simulated in webots kinect ,do you know how to get their internal parameters?

##### DrVoodoo [Moderator] 08/09/2021 07:05:57
`@llya` view the proto file, specifically the Camera Node portion. [https://github.com/cyberbotics/webots/blob/master/projects/devices/microsoft/protos/Kinect.proto](https://github.com/cyberbotics/webots/blob/master/projects/devices/microsoft/protos/Kinect.proto)


In the case of a kinect the horizontal fov is 1 (radians)


If you need the vertical fov you can calculate it from the hfov and the image aspect ratio

##### Max\_K 08/09/2021 11:00:37
Hello, is it possible to change the texture(transparency, color etc. ..) of a solid inside a robot script? I know it is possible to change the texture by using the Supervisor API, but is it not possible to call a supervisor instance inside a robot controller?

I have a robot with a distance sensor and when the solid passes the distance sensor, I want to change the color of the solid.

I works when the distance sensor is part of the supervisor script(thanks to Mr. Lukic 👍 ), but i want the distance sensor to be part of the robot and the solid to be independent



> **Attachment**: [Ring.mp4](https://cdn.discordapp.com/attachments/565154703139405824/874253495035916308/Ring.mp4)

##### Darko Lukić [Cyberbotics] 08/09/2021 11:40:03
Supervisor can access to all solids in the world. Any robot can be a supervisor. Do you get some kind of error?

##### Max\_K 08/09/2021 11:42:35
When i call Robot() and Supervisor in the same script i get the Warning: `Only one instance of the Robot class should be created

WARNING: 'mps\_controller' controller exited with status: 255.`


Oh, do i just have to use the Supervisor? `    robot = Robot()

    supervisor = Supervisor()

    timestep = int(robot.getBasicTimeStep())

    index = 0

    while index < robot.getNumberOfDevices():

        print(robot.getDeviceByIndex(index))

        index += 1

    con\_belt = robot.getDevieByIndex(1)`

So i just have to replace the robot with my supervisor instance?

##### Stefania Pedrazzi [Cyberbotics] 08/09/2021 12:08:53
Yes you should simply replace `robot = Robot()` by `robot = Supervisor()`

##### Kumar 08/09/2021 14:15:39
Thanks `@Stefania Pedrazzi` - I will check to see whether copying WorldInfo > ContactProperties solves the issue. Also, thanks for pointing to github for the Python sample controllers for JetBot. I will check it out


Thanks `@Stefania Pedrazzi` for pointing to .wbt with Lidar. Really appreciate. Will check this out.

##### LucasW 08/09/2021 15:19:53
Hey quick question, though this might be more a ROS then Webots question. When I use some Twist (vel) commands and set the linear speed and angular velocity to a high value my robot in Webots kinda jitters and does very small turns but the odometery reading is really weird, it saids the robot went around in circles?


Is this something to do with the surface, if so how can I fix it


180 turn round a bend
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/874311198336753664/unknown.png)
%end


I forgot to take a picture of my rviz odometry ut


but



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/874311521906327552/unknown.png)
%end


It's a bit like this

##### Darko Lukić [Cyberbotics] 08/09/2021 15:21:58
Do you see errors in the terminal?

##### LucasW 08/09/2021 15:22:02
None


Let me double check

##### Darko Lukić [Cyberbotics] 08/09/2021 15:22:10
Webots console?

##### LucasW 08/09/2021 15:22:30
Yep checking now but I don't think so

##### Darko Lukić [Cyberbotics] 08/09/2021 15:24:21
This is how the odometry is calculated:

[https://github.com/cyberbotics/webots\_ros2/blob/9bd50fb01c3de3704664fc3b41d00e3600a00fb6/webots\_ros2\_core/webots\_ros2\_core/webots\_differential\_drive\_node.py#L129-L173](https://github.com/cyberbotics/webots_ros2/blob/9bd50fb01c3de3704664fc3b41d00e3600a00fb6/webots_ros2_core/webots_ros2_core/webots_differential_drive_node.py#L129-L173)

There might be an edge case that doesn't work, but I haven't seen any while working with e-puck

##### LucasW 08/09/2021 15:26:50
Got this error
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/874312778825994310/unknown.png)
%end


Didn't realise earlier


I'm guessing just set my angular velocity to something lower

##### Darko Lukić [Cyberbotics] 08/09/2021 15:27:33
You are too fast 🙂

##### LucasW 08/09/2021 15:27:58
haha, thanks for the help:)

##### Kumar 08/09/2021 15:36:38
In my Windows 10 system, I installed pytorch using anaconda and inside (base) within the anaconda prompt, I can see pytorch is available. However from webots,  I see an error that pytorch is not available. How can we specify to webots to use the virtual environment where torch is available



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/874315271979036733/unknown.png)
%end

##### Darko Lukić [Cyberbotics] 08/09/2021 15:37:43
See: [https://github.com/cyberbotics/webots/issues/3462](https://github.com/cyberbotics/webots/issues/3462)

##### Kumar 08/09/2021 15:54:14
I was able to install pytorch in a non virtual environment.

Getting another error like this

Any suggestions on how to address?
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/874319675268427826/unknown.png)
%end


Thanks `@Darko Lukić`


I figured it out. I had to run controller "jetbot\_collect\_data" to train the model before I could run "jetbot\_collision\_avoidance" to use the trained model. Thanks `@Darko Lukić` and `@Stefania Pedrazzi` for your pointers

##### Troy 08/09/2021 18:55:35
Hello, if I want to use the robot and supervisor in my python controller in the same time, how can I program it? I wrote in my code：

\# create the Robot instance.

robot = Robot()

supervisor = Supervisor()
%figure
![error.jpg](https://cdn.discordapp.com/attachments/565154703139405824/874365310898167859/error.jpg)
%end


but webots says Only one instance of the Robot class should be created


does anybody know how to use them the same time?

##### DDaniel [Cyberbotics] 08/09/2021 19:09:50
`@Troy` a supervisor is just a robot with extra stuff, one instance is sufficient: `robot = Supervisor()`

##### Troy 08/09/2021 19:14:51
great! it works! thank you!

##### emabrey 08/10/2021 21:03:36
We are trying to setup Webots online - like the [https://robotbenchmark.net/](https://robotbenchmark.net/)



From the instruction on [https://cyberbotics.com/doc/guide/web-simulation](https://cyberbotics.com/doc/guide/web-simulation) it says run './server.sh start'.  However that fails because it cannot create "log/session/output.log".

It will execute if we run 'sudo ./server.sh start',  but then it fails when it executes webots  ( when we bring up the web page -  ws://localhost:1999/session?url=webots://github.com/cyberbotics/webots/branch/develop/projects/languages/python/worlds/example.wbt )



the problem seems to be - Webots says it will not run as sudo  if '--no-sandbox' is missing as an option . Sesson manager runs like that.

##### Luftwaffel [Moderator] 08/10/2021 21:06:14
[https://cyberbotics.com/doc/guide/web-simulation#simulation-server](https://cyberbotics.com/doc/guide/web-simulation#simulation-server)


you could change the log-dir

##### emabrey 08/10/2021 21:08:32
Will give it try tonight! Thank you V.M.

##### Spur 08/11/2021 09:04:17
Hey does anyone know how I can make my robots not collide with each other? At the moment i have two epucks that collide with eachother but cant detect eachother with distance sensors

##### Kumar 08/11/2021 21:37:06
As `@Spur` asks, I have the same question. Suggestions on how to address?

##### chokings 08/12/2021 01:19:18
Hi~ How can I use the getVelocity in Node? v = robot\_node.getVeloticy() is not working.

##### DDaniel [Cyberbotics] 08/12/2021 06:21:44
`@chokings` Hi, it should work. Are you getting an error?

##### chokings 08/12/2021 06:24:32

%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/875263467425267712/unknown.png)
%end

##### DDaniel [Cyberbotics] 08/12/2021 06:25:24
you mistype it, it's `getVelocity`

##### chokings 08/12/2021 06:25:51
oh.. let me fix it



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/875264103243993148/unknown.png)
%end


now i know~

##### DDaniel [Cyberbotics] 08/12/2021 06:29:14
I think you posted the same error as before, it's still mistyped. it's `getVelocity`, not `getVeloticy`

##### chokings 08/12/2021 06:29:44
thanks, now I fix it!!!!!

##### Calibur 08/12/2021 08:47:30
Hi, I am trying to use lidar sensor - Velodyne HDL 64E for retrieving point cloud. When using `lidar.getPointCloud() `with `data_type='buffer'` , the numpy array constructed from `np.frombuffer()` has shape of `(720000,)`. Shouldn't it be `(864000,)` equivalent to `(4500*64*3,)`  i.e. ((Point Cloud per layer)*(Number of layers)*(Number of dimensions),)??

In short, how the buffer is organised in terms of layer and the dimension and how to use it (python) (`data_type='list'` works fine for me, but it is slow) ?

Thanks

##### chokings 08/12/2021 12:09:17
Hi, I'd like to get velocity, when robot is moving. But, there is some problem. when I use Supervisor for getVelocity, there is error "Only one instance of the Robot class should be created

WARNING: 'python\_test' controller exited with status: 255." like this. I think, the Robot() and Supervisor() can NOT use at the same time. Is there any other solution?😭  I attach whole code.

-----------------------------------------------------------------

from controller import Robot, Supervisor



global L, radius, v, w, time

L = 0.05

radius = 0.04

v = 0.1

w = 0

f = 0

time = 0



def lin\_ang\_vel\_to\_4wheel(v,w,wheels):

    global L, radius

    v\_r = v+L*w

    v\_l = v-L*w

    rad\_r = v\_r/radius

    rad\_l = v\_l/radius

    wheels[0].setVelocity(rad\_l) #f l

    wheels[2].setVelocity(rad\_l) #r l

    wheels[1].setVelocity(rad\_r) #f r

    wheels[3].setVelocity(rad\_r) #r r

    return

def fault(f):

    if f==1:

        wheels[0].setVelocity(0) #f l

        wheels[2].setVelocity(0) #r l

    elif f==2:

        wheels[1].setVelocity(0) #f r

        wheels[3].setVelocity(0) #r r

    else:

        pass

    return



TIME\_STEP = 50

robot = Robot()

supervisor = Supervisor()

robot\_node = supervisor.getFromDef("a1")



\#ds = []

\#dsNames = ['ds\_right', 'ds\_left']

\#for i in range(2):

\#    ds.append(robot.getDevice(dsNames[i]))

\#    ds[i].enable(TIME\_STEP)





wheels = []

wheelsNames = ['wheel1', 'wheel2', 'wheel3', 'wheel4']

for i in range(4):

    wheels.append(robot.getDevice(wheelsNames[i]))

    wheels[i].setPosition(float('inf'))

    wheels[i].setVelocity(0.0)

avoidObstacleCounter = 0

while robot.step(TIME\_STEP) != -1:

    lin\_ang\_vel\_to\_4wheel(v,w,wheels)

    fault(f)

##### DDaniel [Cyberbotics] 08/12/2021 12:20:06
`@chokings` Supervisor is just a Robot with extra stuff, you only need one of the two: `robot = Supervisor()`

##### chokings 08/12/2021 12:30:05
Thank you sir.

##### Gustavo Cruz 08/12/2021 13:09:26
Hi, I modeled a vehicle in Blender and now I'm trying to import it into Webots, but I'm having problems with wheel physics.



Wheels are not behaving as they should and an error is appearing as shown in the image.



I've already tried reducing WorldInfo.basicTimeStep, but the problem remains.



Does anyone know how to solve this problem?



My project: [https://github.com/GustavoSC1/robot](https://github.com/GustavoSC1/robot)



Thank you for your attention.
%figure
![VeiculoBug.png](https://cdn.discordapp.com/attachments/565154703139405824/875365366572937266/VeiculoBug.png)
%end

##### DDaniel [Cyberbotics] 08/12/2021 13:13:54
`@Gustavo Cruz` Using the meshes of the wheel as `boundingObject` is computationally expensive, and at times source of instabilities, especially if they're very complex like in this case. It's better to model the `boundingObject` using basic primitives instead (a cylinder for instance)

##### Gustavo Cruz 08/12/2021 13:17:36
I will try to do this. Thanks.

##### Korall 08/12/2021 14:05:00
Hello, is this the right place to ask for help when I have an issue with webots?

##### DDaniel [Cyberbotics] 08/12/2021 14:06:06
`@Korall` yes

##### Korall 08/12/2021 14:07:00

%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/875379850863591464/unknown.png)
%end


So this is my problem. I try to run webots with ros on an lxd container...


My gpu seems to work but somehow the scene is blacked out and the robot is falling down...


I have no idea why this happens..


EDIT: I solved it by using the .deb file to install it instead of the snap package... 🙂

##### Gustavo Cruz 08/12/2021 19:21:19
Hi, I'm trying to model a wheel's boundingObject using a Cylinder, but I'm not succeeding. No contour lines appearing and no collision detection is taking place. I've tried to place the cylinder inside a Transform, but it didn't work either.



Does anybody know how to solve this?



Thanks.
%figure
![VeiculoBug.png](https://cdn.discordapp.com/attachments/565154703139405824/875458953419575297/VeiculoBug.png)
%end

##### johnnycannoli 08/12/2021 22:03:48
you might need to populate the physics field of the solid, I notice from your screenshot that the physics is NULL

##### Gustavo Cruz 08/12/2021 22:38:43
I managed to solve the problem. Thanks.

##### Kumar 08/13/2021 01:59:34
Is there a model for the Pololu zumo robot available anywhere on Webots?

##### chokings 08/13/2021 03:55:17
Hi, now I'd like to know the wheels velocity. How can I do that? the following code is not working.

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_

TIME\_STEP = 50



robot = Supervisor()

node = robot.getFromDef("a1")

motor = Motor()



wheels = []

wheelsNames = ['wheel1', 'wheel2', 'wheel3', 'wheel4']

for i in range(4):

    wheels.append(robot.getDevice(wheelsNames[i]))

    wheels[i].setPosition(float('inf'))

    wheels[i].setVelocity(0.0)





while robot.step(TIME\_STEP) != -1:

    wheels[0].setVelocity(rad\_l) #f l

    wheels[2].setVelocity(rad\_l) #r l

    wheels[1].setVelocity(rad\_r) #f r

    wheels[3].setVelocity(rad\_r) #r r

    print(motor.getVelocity)

##### Darko Lukić [Cyberbotics] 08/13/2021 07:01:25
No, but you can convert it from the URDF model:

- URDF model: [https://github.com/Rastafouille/Zumo-Carto/tree/master/urdf](https://github.com/Rastafouille/Zumo-Carto/tree/master/urdf)

- URDF to Webots conversion script: [https://github.com/cyberbotics/urdf2webots](https://github.com/cyberbotics/urdf2webots)

##### Kumar 08/13/2021 10:25:55
Thanks `@Darko Lukić`

##### Luftwaffel [Moderator] 08/13/2021 23:03:53
`@chokings` from your code it looks like your wheels are the motors, so you have to do call the "getVelocity()" for all 4 wheels


dont forget the "()" of the command


also it is better do initialize the TIME\_STEP like this:

TIME\_STEP  = = int(robot.getBasicTimeStep())


this will take the timestep setting in your world info. For your main loop you can then do multiples of that like so:

`while robot.step(2 * TIME_STEP) != -1:`


It is bad if you have a basic time step of 32 and have a loop running at 50ms

##### Kumar 08/14/2021 15:15:21
`@webots` team -> Any suggestions?

##### llya 08/15/2021 07:45:10
Hey,gus,does anyone know how many meters are there in a pixel of a photograph taken by a camera node?

##### Luftwaffel [Moderator] 08/15/2021 18:40:36
`@llya` that is not how cameras work. Closer things appear bigger than far away things. What exactly is it that you want to do?

##### lucasbruzzone 08/15/2021 22:49:52
Hello, I was wondering if anyone could help me. We are trying to use Khepera IV with the FLU system.

Previously we had used this script to use Pioneer3dx with the FLU system and it had worked ([https://github.com/cyberbotics/webots/blob/master/scripts/converter/convert\_proto.py](https://github.com/cyberbotics/webots/blob/master/scripts/converter/convert_proto.py)).



But it's throwing an error with Khepera IV



Does anyone know how to use Khepera IV with the FLU system?



Error Traceback:

Traceback (most recent call last):

  File "convert\_proto.py", line 219, in <module>

    main()

  File "convert\_proto.py", line 215, in main

    proto.save(args.proto\_file)

  File "/home/proyecto/proyecto-grado/src/webots\_ros/protos/webots\_parser.py", line 64, in save

    self.\_write\_node\_declaration(node)

  File "/home/proyecto/proyecto-grado/src/webots\_ros/protos/webots\_parser.py", line 85, in \_write\_node\_declaration

    self.\_write\_node(node, 2)

  File "/home/proyecto/proyecto-grado/src/webots\_ros/protos/webots\_parser.py", line 104, in \_write\_node

    self.\_write\_field(field)

  File "/home/proyecto/proyecto-grado/src/webots\_ros/protos/webots\_parser.py", line 143, in \_write\_field

    self.\_write\_mf\_field(type, value)

  File "/home/proyecto/proyecto-grado/src/webots\_ros/protos/webots\_parser.py", line 166, in \_write\_mf\_field

    self.\_write\_node(value)

  File "/home/proyecto/proyecto-grado/src/webots\_ros/protos/webots\_parser.py", line 104, in \_write\_node

    self.\_write\_field(field)

  File "/home/proyecto/proyecto-grado/src/webots\_ros/protos/webots\_parser.py", line 143, in \_write\_field

    self.\_write\_mf\_field(type, value)

  File "/home/proyecto/proyecto-grado/src/webots\_ros/protos/webots\_parser.py", line 166, in \_write\_mf\_field

    self.\_write\_node(value)

  File "/home/proyecto/proyecto-grado/src/webots\_ros/protos/webots\_parser.py", line 104, in \_write\_node

    self.\_write\_field(field)

  File "/home/proyecto/proyecto-grado/src/webots\_ros/protos/webots\_parser.py", line 112, in \_write\_field

    type = field['type']

KeyError: 'type'

##### chokings 08/16/2021 00:15:09
Thank you for answer me. But when i use TIME\_STEP == int(robot.getBasicTimeStep()) I have error
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/876620062503632916/unknown.png)
%end


and also.. when I use getVelocity for all wheel.

wheels = []

wheelsNames = ['wheel1', 'wheel2', 'wheel3', 'wheel4']

while robot.step(TIME\_STEP) != -1:

    wheels[0].getVelocity(rad\_l) #f l

    wheels[2].getVelocity(rad\_l) #r l

    wheels[1].getVelocity(rad\_r) #f r

    wheels[3].getVelocity(rad\_r) #r r

I have error
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/876620811249782844/unknown.png)
%end

##### DrVoodoo [Moderator] 08/16/2021 10:45:21
`@chokings` what's this rad\_l value you are supplying to the method?

##### Jeff K 08/16/2021 21:24:11
I upgraded to 2021b and this python camera code that used to work now crashes:


for i in range(width):

        for j in range(height):

            red = camera.imageGetRed(image, width, i, j)/256.0

            blue = camera.imageGetBlue(image, width, i, j)/256.0

            green = camera.imageGetGreen(image, width, i, j)/256.0


Any ideas?

##### Luftwaffel [Moderator] 08/16/2021 21:32:03
I accidentally posted the command wrong. Use only = NOT ==


Two equal signs are used as a "if" check in python. It means 'is equal to?' instead of "=" which means "make equal / store in variable"


For your second error, you have to use empty brackets when using getVelocity(). You are not setting or defining anything.


`@Jeff K` Can you post the error message?

##### Jeff K 08/16/2021 22:03:17
INFO: action\_selection: Starting controller: /usr/local/bin/python3.9 -u action\_selection.py

WARNING: action\_selection: The process crashed some time after starting successfully.

WARNING: 'action\_selection' controller crashed.


For a time I was getting a crash message on imageGetRed. But now I am only getting this brief crash message.


Here is a more informative error message...



> **Attachment**: [message.txt](https://cdn.discordapp.com/attachments/565154703139405824/876951297515982888/message.txt)

##### Luftwaffel [Moderator] 08/16/2021 22:32:18
Try to simply reset the controller and start again (back arrow)


Sometimes it crashes the first time you run it

##### Jeff K 08/16/2021 22:36:39
Done that many times.  The code will run if I comment out the calls to camera.imageGetRed, camera.imageGetBlue, and camera.imageGetGreen.

##### Luftwaffel [Moderator] 08/16/2021 22:37:19
Maybe you are making a call outside of the range?


Check the api documentation online. Make sure it is correct


If you can't figure it out you can post your project here or pm me with it and I can take a look

##### Jeff K 08/16/2021 22:58:19
The project is on GitHub.  I appreciate the help!  [https://github.com/jkrichma/NeurorobotExamples/tree/main/ActionSelection](https://github.com/jkrichma/NeurorobotExamples/tree/main/ActionSelection)

##### Luftwaffel [Moderator] 08/16/2021 23:04:43
it runs for me without any issues.


Perhaps something with the mac version


I'm running Windows

##### Jeff K 08/16/2021 23:30:18
Thanks. That's good information.  I'll check my Mac Python settings.  If anyone has a Mac and tries to run this sim, let me know what you find out.

##### chokings 08/16/2021 23:43:26
Thank you sir!!

##### Darko Lukić [Cyberbotics] 08/17/2021 06:42:08
See this:

[https://github.com/cyberbotics/webots/pull/3502](https://github.com/cyberbotics/webots/pull/3502)



There is a known bug with R2021b and Python 3.9. Please downgrade to Python 3.8 or use a nightly build (R2021b rev1):

[https://github.com/cyberbotics/webots/releases](https://github.com/cyberbotics/webots/releases)

##### Park Jeong Woo 08/17/2021 07:10:34
Hi, i'm having a version issue. I don't think there is an actual problem by this but warning message appears.



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/877087113324138526/unknown.png)
%end


I could not find related change log so I would like to ask about how to correctly fix file locations of .proto and .wbt files



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/877087705593425940/unknown.png)
%end

##### Olivier Michel [Cyberbotics] 08/17/2021 07:17:27
The local URLs to textures and meshes in previous worlds files should be updated to point to online resources, e.g., "textures/carpet.jpg" should be changed to "[https://raw.githubusercontent.com/cyberbotics/webots/R2021b/projects/default/worlds/textures/carpet.jpg](https://raw.githubusercontent.com/cyberbotics/webots/R2021b/projects/default/worlds/textures/carpet.jpg)".


The change log is here: [https://cyberbotics.com/doc/reference/changelog-r2021](https://cyberbotics.com/doc/reference/changelog-r2021)


You may also simply edit the header of the wbt file and replace R2020a with R2021b.

##### Park Jeong Woo 08/17/2021 07:19:51
Thank you

##### ph504 08/18/2021 08:06:56
Hi,

I have made a custom robot with a custom maze and want to focus on localization problems,

so I was wondering if Webots provides an API for extracting the map into occupancy grid format or a binary matrix, or any other formats, without having to create the map manually and put it in the controller or having to implement a mapping algorithm controller to make the map... so does anyone have any knowledge/experience in this topic? I would highly appreciate the suggestions.

##### butterygold 08/18/2021 10:14:26
hi, I am trying to import a 3d model fbx file format, it is loading without texture. How can I fix this?
%figure
![laptop.png](https://cdn.discordapp.com/attachments/565154703139405824/877495651196338246/laptop.png)
%end

##### Stefania Pedrazzi [Cyberbotics] 08/18/2021 11:00:48
Hi, you have to specify the material and texture in the `Shape.appearance` node.


Hi, no built-in API for creating occupancy maps is available in Webots. However you could use any existing library and just write a controller that interface it with Webots.

##### ph504 08/18/2021 12:32:03
Thank you so much.

##### butterygold 08/18/2021 12:36:56
When I import a model it is a solid object, how to I edit its properties as with other node objects?

##### Stefania Pedrazzi [Cyberbotics] 08/18/2021 12:41:03
Inside your  `Solid` node you will have one or more `Shape` nodes: the mesh is specified in the `Shape.geometry` node and the appearance (material, texture, etc.) in the `Shape.appearance` node.

You should check all your `Shape.apperance` nodes and adjust the path to the texture that is not found.

##### butterygold 08/18/2021 12:42:46
I see, ok thanks!

##### Estox 08/19/2021 17:11:40
I thought that there are going to be x, y, z outputs in the Lidar data:

```
data = self.getLayerRangeImage(1)
del data[1536:] # removal of the time data
data = [i for i in data if i != float('inf')] # list comprehension if the point is not detected I thought?
print(data) # Should give the result len(data)%3 = 0, but it doesn't.

What's incorrect there?
```

##### adeui 08/19/2021 21:48:24
If you are using version R2021b, there is a bug and you must update to the revision version (someone confirm please)

##### YCSU 08/20/2021 02:29:14
Hi, A question about rolling simulation. When the ball is rolling in the simulation, it looks like a rolling without slipping because it keeps rolling if there is no collision. In order to simulate the stopping from accounting the effect of slipping, is it correct to adjust the parameter "forceDependentSlip" in ContactProperties?

##### Olivier Michel [Cyberbotics] 08/20/2021 06:28:19
Yes, it should work.

##### akashX 08/20/2021 10:33:37
could someone share a simple robot that can detect objects

##### Max\_K 08/20/2021 11:53:57
Hello, i have problems to create a platform moved by a linear motor in vertical directions. Horizontal is working fine, but when i enable the vertical axes, my solids fall to the ground.

Does anyone have an idea why this happens?
> **Attachment**: [vertical-axes.mp4](https://cdn.discordapp.com/attachments/565154703139405824/878245473339703336/vertical-axes.mp4)

##### Estox 08/20/2021 12:17:38
It is in R2021a

##### Septal 08/20/2021 14:12:57
hey, I have a question. I'm new to the Webots and going to make a world for testing e-puck for global localization (via MCL algorithm) with distance sensors.

about this work, i don't know how to give the occupancy grid map of the word to c language controller. should i write down the entire map in matrix txt file or is there other ways?


using 2021b

##### Darko Lukić [Cyberbotics] 08/20/2021 14:46:15
Use the `wb_lidar_get_point_cloud` function to get the point cloud:

[https://cyberbotics.com/doc/reference/lidar#wb\_lidar\_get\_point\_cloud](https://cyberbotics.com/doc/reference/lidar#wb_lidar_get_point_cloud)

##### Estox 08/21/2021 12:39:59
Then what exactly is returned by these rangeimage functions?

##### Luftwaffel [Moderator] 08/21/2021 20:40:58
`@Estox` The depth image expresses the range as a integer value between 0 (min range) and 255 (max range). Black means something is at min range or closer, white at max range or further. any grey values are linearly inbetween


hmm instead of int, it might be a float between 0 and 1. not 100% sure, but the process should be the same

##### Septal 08/21/2021 21:21:35
anyone can help me with measurements calculation in MCL using epuck + distance sensors?

##### Luftwaffel [Moderator] 08/21/2021 21:36:40
`@Septal` I have no experience with MCL algorithms, but I'm well versed in Webots. What exactly do you need or want to achieve? What data do you expect from the distance sensors?


you are trying to accomplish something like in this paper? [https://dergipark.org.tr/en/download/article-file/1310058](https://dergipark.org.tr/en/download/article-file/1310058)

##### Lawrence 08/22/2021 02:42:50
Hey, I just installed webots_ros so i could use ROS with webots, however I keep getting this error when trying to launch some of the tutorial simulations:
```/usr/local/webots/projects/default/controllers/ros/ros: error while loading shared libraries: libboost_system.so.1.65.1: cannot open shared object file: No such file or directory
WARNING: 'ros' controller exited with status: 127.
```. Anybody have any ideas to fix this?

##### Septal 08/22/2021 09:59:49
thanks in advanced. i want to model the sensors given the map and i don't know how to code that. one more question, does rotational motors have noise in webots simulation? cause every time I set the velocity, after a specified time, with randomseed field of worldinfo node set to -1, the translation of the robot is the same in multiple execution.

##### Nawaytes 08/22/2021 12:41:13
hello guys, im new member in here.



can i ask somethink when i got error on webots in here?

##### Stefania Pedrazzi [Cyberbotics] 08/23/2021 06:15:20
It seems that your motor doesn't have enough force to counteract the gravitational force that is also applied by default on the vertical axis.

You should try to increase the `Motor.maxForce` value.


Hi, welcome!

Yes, you can also ask questions about errors.

##### Darko Lukić [Cyberbotics] 08/23/2021 06:30:06
See this:

[https://github.com/cyberbotics/webots/issues/3488#issuecomment-894355243](https://github.com/cyberbotics/webots/issues/3488#issuecomment-894355243)

##### n33r4j 08/23/2021 13:39:39
Hi, can someone point me to a software that can be used to make motion files for Nao ? Or is this possible directly from Webots ? I searched some of the old answers on this channel and found some mentions of Choregraphe. Is this the way to go?

##### Olivier Michel [Cyberbotics] 08/23/2021 14:15:11
I am not sure, but Choregraphe might be the way to go. However, you will have to somehow extract the pitch/yaw/roll values of each joint of the robot to export them into the Webots motion file format (as well as the timing information).

##### n33r4j 08/23/2021 14:19:12
Ah, I see. Do you by any chance know how the existing motion files included with Webots for the Nao were made ?

##### Olivier Michel [Cyberbotics] 08/23/2021 14:23:00
I believe somebody extracted the pitch/yaw/roll/timing values from some Choregraphe generated motions, but I don't recall how this was done in detail (that was a few years ago).

##### n33r4j 08/23/2021 14:26:43
Thanks! Will look into it and post here if I find anything.

##### lanzcc 08/23/2021 17:24:43
Hello, In tutorial #2 the instructions say "to move the ball apply a force to it". When I try this, the force vector appears, but nothing I then try makes the ball move. How is the force application supposed to work?

##### Darko Lukić [Cyberbotics] 08/24/2021 06:41:34
Make sure the ball has a physics and that the simulation is running. Then, you can `ALT + click on the ball + drag` to apply the force.

##### ulrikmf [Premier Service] 08/24/2021 20:18:09
Hi quick question here. Is it not possible to have two supervisors in one python script? even as properties of different classes?

##### Luftwaffel [Moderator] 08/24/2021 20:18:57
you can only have one supervisor to my knowledge. Why would you need two?#

##### ulrikmf [Premier Service] 08/24/2021 20:23:11
two robots. Documentation says it is possible with two supervisors, but that it must be run from different controllers.

##### Luftwaffel [Moderator] 08/24/2021 20:25:32
a supervisor is the same as a robot controller (contains all the same functions). It just has "god powers" added to it


what exactly are you trying to accomplish?

##### ulrikmf [Premier Service] 08/24/2021 20:44:51
I have a dummy robot whose task is to import other robots on request.

##### Luftwaffel [Moderator] 08/24/2021 20:50:06
do the robot controllers need supervisor powers to function?

##### ulrikmf [Premier Service] 08/24/2021 20:50:31
yes

##### Luftwaffel [Moderator] 08/24/2021 20:52:04
What doesnt work?


oh and I think it works with multiple. I just remembered that I have a project that uses multiple supervisors

##### ulrikmf [Premier Service] 08/24/2021 20:55:36
I was just wondering if there was a quick answer on how to run multiple supervisors.


it seems impossible to do from a simple script.

##### Luftwaffel [Moderator] 08/24/2021 20:56:42
every robot controller runs its own process


webots starts the controller automatically

##### ulrikmf [Premier Service] 08/24/2021 20:56:59
but do i have to run multiple scripts at once then?

##### Luftwaffel [Moderator] 08/24/2021 20:57:40
only when using external controllers

##### ulrikmf [Premier Service] 08/24/2021 20:57:53
that is what i do

##### Luftwaffel [Moderator] 08/24/2021 20:58:10
perhaps with multiprocessing

##### ulrikmf [Premier Service] 08/24/2021 20:58:20
ait


thanks

##### giaco\_mz 08/25/2021 00:25:40
I'm trying to install cyberbotics/webots\_ros2 using windows installation..

[https://github.com/cyberbotics/webots\_ros2/wiki/Build-and-Install](https://github.com/cyberbotics/webots_ros2/wiki/Build-and-Install)



But i have this problem. What is happening?
%figure
![1.PNG](https://cdn.discordapp.com/attachments/565154703139405824/879884197618130995/1.PNG)
%end

##### Darko Lukić [Cyberbotics] 08/25/2021 07:00:57
I have just added a `Dependencies` section:

[https://github.com/cyberbotics/webots\_ros2/wiki/Build-and-Install#dependencies](https://github.com/cyberbotics/webots_ros2/wiki/Build-and-Install#dependencies)

##### giaco\_mz 08/25/2021 10:43:40
thx

##### oroulet [Premier Service] 08/25/2021 12:55:54
Hi,

Can we use an empty world, create a supervisor in an external python script, and then use the supervisor to import a robot?

currently we have several worlds, one per robot. It would make sense to have a world without any robot and just instantiate a new robot using  supervisor.getRoot().importMFNodeFromString(-1, node\_string)

##### Stefania Pedrazzi [Cyberbotics] 08/25/2021 13:02:19
Hi, yes this is possible.

But your "empty" world should contain at least a Supervisor node to be able to import other robots and objects.

I don't have all the details of your implementation, but it is probably simpler to already add the initial manager Supervisor node to the world rather than creating a python script that edits the world and adds it given that you will probably always need it to initialize the simulation.

##### oroulet [Premier Service] 08/25/2021 13:05:43
a supervisor node in world? how does it look like in the world? curently we have only WorldInfo and texttures and a Robot in the world file

##### ulrikmf [Premier Service] 08/25/2021 13:06:06
Or do you mean have a world file with a dummy robot to import the actual robot we want??

##### Stefania Pedrazzi [Cyberbotics] 08/25/2021 13:06:22
Yes, with Supervisor node, I mean a dummy robot with the supervisor field checked

##### akashX 08/25/2021 13:07:09
need someone to help me in making a simple bot, please dm me if you are willing spend 10 minutes helping a stranger in need

##### ulrikmf [Premier Service] 08/25/2021 13:07:36
The problem we then got, is to instantiate the actual robots supervisor. How is that solved with only one controller ?

##### Stefania Pedrazzi [Cyberbotics] 08/25/2021 13:09:35
I'm not sure to understand.

The controller of the dummy robot  will import the robot(s), then once imported the controller of the imported robot is automatically started by Webots (if not set to extern).

##### ulrikmf [Premier Service] 08/25/2021 13:11:15
We need a supervisor corresponding to the imported robot as well, dont we? To access devices etc in the robot?

##### oroulet [Premier Service] 08/25/2021 13:11:36
yes the imported robot uses an extern controller


the ideas was that the script importing the robot would also become the contorller for the robot

##### Stefania Pedrazzi [Cyberbotics] 08/25/2021 13:13:31
That's not possible.


The simple solution is that the "script" that imports the robot is the controller of the dummy supervisor robot initially available in the world.

Then this "script" (or controller) can start the extern controller of the robot just after importing it

##### oroulet [Premier Service] 08/25/2021 13:14:55
OK that  explains our issue. Not sure what is best for us. We need to think a bit


thanks

##### ulrikmf [Premier Service] 08/25/2021 13:15:05
Thank you

##### Stefania Pedrazzi [Cyberbotics] 08/25/2021 13:15:23
Here are the instructions to run multiple extern controller (if needed):

[https://www.cyberbotics.com/doc/guide/running-extern-robot-controllers#single-simulation-and-multiple-extern-robot-controllers](https://www.cyberbotics.com/doc/guide/running-extern-robot-controllers#single-simulation-and-multiple-extern-robot-controllers)

##### Robot 08/25/2021 20:02:16
Is there a good source for learning how to control two epucks communicating with each other in the same environment to accomplish a common task like finding a particular location/food and transporting it

##### Mad Ks 08/25/2021 20:51:12
Just installed and getting a bunch of errors on the console. Anyone else have this issue? An example of one is below:


ERROR: 'C:/Program Files/Webots/projects/robots/gctronic/e-puck/protos/E-puck.proto': error: Template engine error: failed to import JavaScript template: Expected token `}'.

##### DDaniel [Cyberbotics] 08/25/2021 21:19:03
`@Mad Ks` you modified the proto or is the default one? Which world are you using?

##### Mad Ks 08/25/2021 22:45:05
Haven't modified anything so I assume default


`@DDaniel`


if it matters, on Windows 10


Launched Webot and was trying to view Webots Guided Tour examples

##### DDaniel [Cyberbotics] 08/25/2021 22:48:34
Which webots version did you install? Can't reproduce with Ubuntu

##### Mad Ks 08/25/2021 22:49:35
R2021b

##### DDaniel [Cyberbotics] 08/25/2021 23:10:12
Very odd, just tried installing the 2021b and 2021b nightly build on windows and neither is giving me the warnings. Is a specific world in the guided tour giving it? If so, which?

##### Mad Ks 08/25/2021 23:13:11
Reinstalling again, give me a minute


Try the first one, spot.wbt and I get a bunch of errors like I posted above


Then I get these:


Error: wb\_motor\_set\_position() called with an invalid 'position' argument (NaN).


Screen is still all black

##### DDaniel [Cyberbotics] 08/25/2021 23:29:05
Very odd, not having any issue like that. Was it a fresh install or you used previous versions of webots before?

##### Mad Ks 08/25/2021 23:29:19
fresh install


everyone I ask about this, who have used Webots before, have not seen this issue.

##### DDaniel [Cyberbotics] 08/25/2021 23:31:26
Can you send me the E-puck.proto file mentioned in the warning above?

##### Mad Ks 08/25/2021 23:49:22
Not sure where I get that

##### DDaniel [Cyberbotics] 08/25/2021 23:50:16
The path is: `C:/Program Files/Webots/projects/robots/gctronic/e-puck/protos/E-puck.proto`

##### Mad Ks 08/26/2021 00:37:18
Were you able to download the file I sent `@DDaniel`?


I installed Webots on my old mac and it seems to work fine although its a bit slow

##### Kumar 08/26/2021 06:17:17
Is it possible to create a world, in webots, similar to the world in [https://youtu.be/VZdsxCrlJwY](https://youtu.be/VZdsxCrlJwY) ? The simulated world looks so much more realistic than what I have seen typical worlds in webots to be.

##### Darko Lukić [Cyberbotics] 08/26/2021 08:05:59
- an example of a similar robot is in the `sojourner.wbt` world

- an example of a similar world could be the `mavic.wbt` simulation

The worlds and models in Webots are typically optimized for simulation performance and physical realism. There is a support for visually realistic simulations (e.g. physical rendering), but you need to import high quality models.

##### Kumar 08/26/2021 09:07:22
Thanks `@Darko Lukić` for the pointers and input for how visually realistic simulations can be done.

##### oroulet [Premier Service] 08/26/2021 10:01:59
We are using a lot proto and use the new GetFromProtoDef() method to get a link to a node we call GetPOsition(). It works fine but we get a lot of warnings:

WARNING: DEF RobotGrab RobotGrab2 (PROTO): wb\_supervisor\_node\_get\_position() can exclusively be used with Transform (or derived).

WARNING: DEF RobotGrab RobotGrab2 (PROTO): wb\_supervisor\_node\_get\_position() can exclusively be used with Transform (or derived).

WARNING: DEF RobotGrab RobotGrab2 (PROTO): wb\_supervisor\_node\_get\_position() can exclusively be used with Transform (or derived).

WARNING: DEF RobotGrab RobotGrab2 (PROTO): wb\_supervisor\_node\_get\_position() can exclusively be used with Transform (or derived).

WARNING: DEF RobotGrab RobotGrab2 (PROTO): wb\_supervisor\_node\_get\_position() can exclusively be used with Transform (or derived).

WARNING: DEF RobotGrab RobotGrab2 (PROTO): wb\_supervisor\_node\_get\_position() can exclusively be used with Transform (or derived).

WARNING: DEF RobotGrab RobotGrab2 (PROTO): wb\_supervisor\_node\_get\_position() can exclusively be used with Transform (or derived).

WARNING: DEF RobotGrab RobotGrab2 (PROTO): wb\_supervisor\_node\_get\_position() can exclusively be used with Transform (or derived).

Is that normal?

##### Gustavo Cruz 08/26/2021 10:24:24
Hi!



I'm trying to implement a Web Simulation, but I'm having problems with the Webots streaming viewer.



I am using a streaming viewer that is available in the Webots User Guide, but some functions of it are not working in my simulation.



The Connect(Disconnect) and Run(Pause) options are working, but the Upload Controller and Reset options are not making any changes to the simulation.



The simulation is receiving the commands sent by the streaming viewer, but no changes are being made.



I even changed the controller name to "supervisor" but it didn't solve the problem.



Does anyone know how to solve this problem?



URL I'm using: ws://localhost:1999/session?url=webots://github.com/GustavoSC1/roboDois/blob/main/diff-drive-robot/worlds/empty.wbt



I'm using the R2021b version of Webots.



Thanks for listening.
%figure
![Captura_de_tela_de_2021-08-25_20-10-33.png](https://cdn.discordapp.com/attachments/565154703139405824/880397261526421564/Captura_de_tela_de_2021-08-25_20-10-33.png)
%end



%figure
![Captura_de_tela_de_2021-08-25_20-11-26.png](https://cdn.discordapp.com/attachments/565154703139405824/880397337309085716/Captura_de_tela_de_2021-08-25_20-11-26.png)
%end

##### Stefania Pedrazzi [Cyberbotics] 08/26/2021 10:56:40
What is the type of your RobotGrab2 PROTO?


Given that you are using a modified version of the Webots streaming viewer, it is not very clear how do you want to implement the reset and upload controller method.

Note that simulation reset is available in the default Webots streaming toolbar.

From your logs its seems that you are sending the "upload" message to the `supervisor` controller. This could be a good start to implement this functionality that is not provided by the Webots default streaming viewer. But then, in your `supervisor` controller you should listen to the robot window messages and implement the upload functionality yourself.

##### Gustavo Cruz 08/26/2021 11:26:26
I understood. Thanks.



Is there any place that teaches you how to be able to edit the controller in Web Simulation? On robotbenchmark.net it is possible to edit the controller in simulations, and I would like to do the same on my server.

##### ulrikmf [Premier Service] 08/26/2021 11:36:27
Robot {}

##### Stefania Pedrazzi [Cyberbotics] 08/26/2021 11:37:16
robotbenchmark.net is not using the Webots Streaming Viewer but it implements the Web simulation as explained in this section:

[https://www.cyberbotics.com/doc/guide/web-simulation](https://www.cyberbotics.com/doc/guide/web-simulation)

But it is working on a previous version of the streaming so it is not the best example to follow for new implementations.

One option is to implement a PHP script that modifies the current simulation world file and updates the controller (if the path to the controller changes) or overwrites the controller file content stored on the server. Then you simply need to restart the simulation to take the changes into account.


So then, the warning should not be printed.

But to inspect the issue we would need the whole PROTO definition.

##### Gustavo Cruz 08/26/2021 11:43:08
Thank you very much for your help with my questions and for the explanation. I will try to implement some way to edit the controller. 🙂

##### Max\_K 08/26/2021 14:14:46
Sry for late reply, but that helped thanks!

##### ulrikmf [Premier Service] 08/27/2021 08:44:31
Can a Touch sensor return negative values if it is ancestor of a Connector which is pulled in negative direction ?


My robot is picking up a box with connector. Connector is triggered by touch sensor. We also want to measure weight during the lift, using touchsensor. Is there any way?

##### lanzcc 08/27/2021 14:28:58
Can someone please describe what is supposed to happen when a force is applied to an object? I have tried to follow all the instructions in tutorial #2, but cannot move the ball. The force vector arrow appears, and its direction and magnitude can be adjusted, but thereafter nothing I do allows me to move the ball.

##### DDaniel [Cyberbotics] 08/27/2021 15:00:13
`@lanzcc` how heavy is the object? Perhaps the force you're applying isn't enough to cause a disturbance.

##### lanzcc 08/27/2021 15:44:45
The ball weighs 4.2 kg. How is one supposed to cause movement by applying force?

##### DDaniel [Cyberbotics] 08/27/2021 15:48:04
You're doing it right already if you see the orange arrow. Lower the mass just for the sake of testing it, and see if you manage to move it then. If it does, it means you need to apply a stronger force (longer arrow, might need to zoom out or increase the `WorldInfo.dragForceScale` parameter)


Using that method however you don't have much control, if you need  a more precise way of adding an external disturbance, you can use a supervisor: [https://cyberbotics.com/doc/reference/supervisor#wb\_supervisor\_node\_add\_force](https://cyberbotics.com/doc/reference/supervisor#wb_supervisor_node_add_force)

##### akashX 08/28/2021 03:48:59
I imported the 4 wheel robot World and want to run obstacle avoidance controller on it


But it keeps saying controller not found running void


How do I import the robot in my world and install the object recognition system controller

##### rizqi 08/28/2021 03:50:51
maybe you can insert controller on your robot object on scene tree bar

##### akashX 08/28/2021 03:51:16
Could you please link a documentation


I only found an yt series but it's too hard understand

##### rizqi 08/28/2021 03:58:22
when you click your object, in my picture is object vehicle bmwx5, then expand the menu on scene tree side bar, you can see controller
%figure
![20210828_105651.jpg](https://cdn.discordapp.com/attachments/565154703139405824/881024888201175110/20210828_105651.jpg)
%end


i don't know where documentation, because i not read all tutorials. maybe this little help

##### akashX 08/28/2021 04:13:40
Thank you rizqi I'll try it

##### mironix<inactive> 08/29/2021 12:11:26
Hello! i'm a newbie to webots - i was wondering is there any crane with wire simulation sample somewhere EDIT: got it! [https://cyberbotics.com/doc/guide/samples-howto#rope-wbt](https://cyberbotics.com/doc/guide/samples-howto#rope-wbt)

##### akashX 08/30/2021 04:27:50
how to add a new controller?

##### ph504 08/30/2021 04:36:07

%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/881759166442668042/unknown.png)
%end


wizards > add robot controller


if you want to link the new controller

open the robot node from your scene tree and you might be able to see controller "nameOfController" there if you scroll down a little like the following image



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/881759817805479946/unknown.png)
%end


and click on it and then you have to browse for your new controller



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/881760053663760424/unknown.png)
%end

##### akashX 08/30/2021 04:40:53

%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/881760365233459221/unknown.png)
%end



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/881760406643826740/unknown.png)
%end


oh I have found it, I have to select edit and build it


thank you so much

##### ph504 08/30/2021 04:42:33
ye was just about to say


anytime

glad it worked out

##### Tahir [Moderator] 08/30/2021 11:46:18
Hi all,

I was trying to publish lidar data from Wevots to ROS topic using an extern control. But always in the published ros topics I always get INF in ranges field.


Also I can't see anything in RVIZ.


Any idea what could be the problem

##### Darko Lukić [Cyberbotics] 08/30/2021 11:47:27
If a measurement is outside of the range then the sensor returns INF

##### Tahir [Moderator] 08/30/2021 12:33:15
But why can't I see something in RVIZ when I put some object on front of the robot


def getLaserObject(self):

        self.current\_time = rospy.Time.now()

        laser = LaserScan()

        laser.header.stamp = rospy.Time.now()

        laser.header.frame\_id = "front\_laser"

        laser.angle\_min = -2.356

        laser.angle\_max = 2.356

        laser.range\_min = 0.01

        laser.range\_max = 30

        laser.scan\_time = (self.current\_time - self.last\_time).to\_sec()

        laser.ranges = self.laser.getRangeImage()

        self.last\_time = self.current\_time

        return laser


This is how ros message is published



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/881881488566677534/unknown.png)
%end

##### Darko Lukić [Cyberbotics] 08/30/2021 12:47:28
Why not using the `ros` controller?

[https://cyberbotics.com/doc/guide/using-ros#using-the-standard-ros-controller](https://cyberbotics.com/doc/guide/using-ros#using-the-standard-ros-controller)



Also, see this:

[https://github.com/cyberbotics/webots\_ros2/blob/2e0a2b4a1af5c05a31e1840cb4493673ced21560/webots\_ros2\_core/webots\_ros2\_core/devices/lidar\_device.py#L123-L137](https://github.com/cyberbotics/webots_ros2/blob/2e0a2b4a1af5c05a31e1840cb4493673ced21560/webots_ros2_core/webots_ros2_core/devices/lidar_device.py#L123-L137)

##### Tahir [Moderator] 08/30/2021 13:08:38
Well ros controller expose everything as rosservice and I just want to export the things which I want so thats why I am using my own controller


The python example which You provided, I've used but still getting inf

##### Darko Lukić [Cyberbotics] 08/30/2021 13:12:58
Do you get INF when you print the values in the controller? If you turn on the point cloud what do you see?



Also, a few problems I noticed:

- The LiDAR is rotated in the wrong direction, it doesn't look in the direction of the barrels but in the direction of the forks.

- You use `getRangeImage` instead of `getLayerRangeImage`.

- You are missing the `angle_increment` parameter.


I recommend to use our interface because (otherwise) it is easy to create an invalid message or make a bottleneck. Why having many services is an issue?



P.S. If ROS 2 is applicable. In our ROS 2 interface, you can disable devices you don't need in a configuration file.

##### Tahir [Moderator] 08/30/2021 13:28:56
Well I am using ROS1


I just changed the lidar to one of the default lidars and solved the problem


and thank you so much to you for helping me out

##### chawei2000 08/31/2021 07:12:49
Hi!

I'm trying to load urdf file to calculate inverse kinematic, but there have a error.



This is the github I take for reference:

[https://github.com/cyberbotics/webots/blob/master/projects/robots/abb/irb/controllers/inverse\_kinematics/inverse\_kinematics.py](https://github.com/cyberbotics/webots/blob/master/projects/robots/abb/irb/controllers/inverse_kinematics/inverse_kinematics.py)



Here is my code:

with tempfile.NamedTemporaryFile(suffix='.urdf', delete=False) as file:

    filename = file.name

    file.write(robot.getUrdf().encode('utf-8'))



Here is report error:

Traceback (most recent call last):

    file.write(robot.getUrdf().encode('utf-8'))

AttributeError: 'Robot' object has no attribute 'getUrdf'



This is the source of loading urdf file:

[https://cyberbotics.com/doc/reference/robot?tab-language=python#wb\_robot\_get\_urd](https://cyberbotics.com/doc/reference/robot?tab-language=python#wb_robot_get_urd)



But I find my webots built-in controller don't have that kind of getUrdf function, so that make the error.

Does anyone know how to solve this problem?

Thank for listening.


Here is my code.
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/882161123439304704/unknown.png)
%end


Here is urdf file: [https://gist.github.com/drohr5D/5551267](https://gist.github.com/drohr5D/5551267)

##### Darko Lukić [Cyberbotics] 08/31/2021 07:45:14
Which Webots version do you use?

##### chawei2000 08/31/2021 07:47:02
I use R2020a revision1.

##### Darko Lukić [Cyberbotics] 08/31/2021 07:47:39
There is no `getUrdf` method available in R2020a


Please upgrade to R2021b

##### chawei2000 08/31/2021 08:04:33
Thanks for your helping.



But I already have Pr2 robot model in Webots, I don't need to load urdf file in Webots.

I use urdf file just for calculate inverse kinematic, since there have mechanism data of Pr2 robot in urdf file.

So I don't need to calculate matrix by myself.



I'm thinking whether there have some method in python that can read urdf file, such as open() and read().



If I don't need to load urdf file in Webots, does I still need to update Webots version?


This is my Webots environment
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/882174236125450290/unknown.png)
%end

##### Darko Lukić [Cyberbotics] 08/31/2021 12:20:30
No need to update Webots in that case. If you have URDF you can simply load it, something like `urdf_data = pathlib.Path('your_urdf').read_text()`. However, in general, I would recommend using the latest version of Webots because of bug fixes and new features.

##### lanzcc 08/31/2021 12:22:02
Hello, there are missing steps in the tutorial #2, and ambiguous references to objects that should appear. In each case I was able, after considerable searching around, to find the things referred to. I am hoping that I have an old, uncorrected version of the documentation, or that there is different documentation for MacOS. Please let me know if either of these can be true. If not I'll catalog the errors here and see if they indicate that I have out-of-date documentation.

##### Darko Lukić [Cyberbotics] 08/31/2021 12:24:47
All tutorials are up-to-date.



In the top of every page there is `Found an error? Contribute on GitHub!`. Please propose changes if you believe there is a mistake.

##### chawei2000 08/31/2021 16:09:34
I update to the latest version of Webots, but there have some problems.

I use the way same as I did before, but my pycharm can not connect to Webots.

My Webots install in DATA(D:)
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/882296066458923070/unknown.png)
%end


This is the path setting: PYTHONUNBUFFERED=1;Path=PYTHONUNBUFFERED=1\;PATH=D:\Webots\lib\controller\\;D:\Webots\msys64\mingw64\bin
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/882296409133572146/unknown.png)
%end


And this is the controller setting:

D:\Webots\lib\controller\python37
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/882296632492851250/unknown.png)
%end

##### Darko Lukić [Cyberbotics] 08/31/2021 16:16:53
Can you upgrade to Python 3.8? In Python 3.8 we leverage improved linking capabilities.

## September

##### Noor 09/01/2021 05:34:50
Hi, I want to integrate webots with pyCharm. Can you tell how should i follow it


I am not sure but is not webots work with python37 only? I had python39 earlier but I have to retreat back to python37 to run python code

##### Darko Lukić [Cyberbotics] 09/01/2021 06:34:38
This part looks wrong, can you check:

[https://cyberbotics.com/doc/guide/running-extern-robot-controllers?tab-language=python](https://cyberbotics.com/doc/guide/running-extern-robot-controllers?tab-language=python)


It works, you probably had a problem with Python 3.9 due to a bug (that is fixed now):

[https://github.com/cyberbotics/webots/pull/3502](https://github.com/cyberbotics/webots/pull/3502)

##### chawei2000 09/01/2021 09:21:45
Thank you. I successfully integrate Webots with Pycharm.

But I still can't use urdf file.

I have no idea of "Chain.from\_urdf\_file()" in line 258
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/882555822708772905/unknown.png)
%end

##### Darko Lukić [Cyberbotics] 09/01/2021 09:25:50
Great, the rest is a Python/ikpy issue, it is not in a scope of Webots.



A tip though, it should be `filename` instead of `'filename'`

##### chawei2000 09/01/2021 09:29:16
Do I need to pass argument to getUrdf()?

I find this picture, but I don't know what prefix='' " means.
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/882557717078749214/unknown.png)
%end

##### Darko Lukić [Cyberbotics] 09/01/2021 09:29:41
No

##### FunkyPants 09/02/2021 16:20:39
Hey, is it possible to retrieve the translation from a child node that refers to the global coordinate system and not the one referring to the parent node using a supervisor?

##### Stefania Pedrazzi [Cyberbotics] 09/02/2021 18:05:55
Hi, please check the `wb_supervisor_node_get_position` function:

[https://www.cyberbotics.com/doc/reference/supervisor#wb\_supervisor\_node\_get\_position](https://www.cyberbotics.com/doc/reference/supervisor#wb_supervisor_node_get_position)

##### FunkyPants 09/02/2021 18:49:44
Thanks, will check it out

##### akashX 09/03/2021 05:50:14

%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/883227370729930752/unknown.png)
%end


I have imported the controller why the robot is not moving??

##### DDaniel [Cyberbotics] 09/03/2021 06:00:50
`@akashX` what's the content of the `ifrX.py` controller?

##### akashX 09/03/2021 06:01:25
[https://pastebin.com/APGHdkdb](https://pastebin.com/APGHdkdb)

##### chawei2000 09/03/2021 14:51:52
Hi, I have some problems about using urdf file to calculate inverse kinematics.

I take IRB sample code for reference:

[https://github.com/cyberbotics/webots/blob/master/projects/robots/abb/irb/controllers/inverse\_kinematics/inverse\_kinematics.py](https://github.com/cyberbotics/webots/blob/master/projects/robots/abb/irb/controllers/inverse_kinematics/inverse_kinematics.py)

And I use line 41 to 45 in my code.



But it stuck in this line:

armChain = Chain.from\_urdf\_file(urdf\_file='pr2.urdf')



pr2.urdf is export from Webots

I don't know it is a python issue or a urdf issue.
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/883363676126605322/unknown.png)
%end


I also try this urdf:

[https://github.com/caelan/pybullet-planning/blob/master/models/pr2\_description/pr2.urdf](https://github.com/caelan/pybullet-planning/blob/master/models/pr2_description/pr2.urdf)



But it have UserWarning, and then exit.
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/883365236223135774/unknown.png)
%end

##### Tahir [Moderator] 09/03/2021 15:18:17
I was thinking of an application scenario in which simulating a robot in Webots. So just a suggestion on my thought is needed.

We can get the robot's world coordinates using supervisor node in Webots. Is it a good idea to get this value and publish as a pose of the robot by passing ekf localization and amcl?

##### Darko Lukić [Cyberbotics] 09/03/2021 15:47:16
Depends. AMCL and EKF will make some estimation error, so it is up to you whether the error is relevant for the simulation accuracy.


Where does it crash? It looks like ikpy causes the crash due to the invalid configuration?

##### Johan2021 09/03/2021 15:59:46
Hi, I was wondering whether it is possible to spawn a robot into a world using a supervisor, while not reloading the current world (so the robot is just added to the world)? I was wondering the same for removing a robot during runtime using a supervisor, and leave the rest of the world and robots running?

##### DDaniel [Cyberbotics] 09/03/2021 16:14:56
`@Johan2021` hi, yes you can spawn it using `wb_supervisor_field_import_sf_node_from_string` or `wb_supervisor_field_import_sf_node` ([https://www.cyberbotics.com/doc/reference/supervisor#wb\_supervisor\_field\_import\_sf\_node\_from\_string](https://www.cyberbotics.com/doc/reference/supervisor#wb_supervisor_field_import_sf_node_from_string)) and then remove them with  `wb_supervisor_node_remove` ([https://www.cyberbotics.com/doc/reference/supervisor#wb\_supervisor\_node\_remove](https://www.cyberbotics.com/doc/reference/supervisor#wb_supervisor_node_remove))

##### ykopoblete 09/03/2021 17:39:37
Hello. How can I do to set a goal with a turtlebot3 burguer?

##### cnbarcelo 09/04/2021 00:43:56
Hi

I would like to know if PROTO is being deprecated in the short/mid term in favor of URDF, or you are still recommending PROTO for brand new projects.

In case PROTO is recommended for brand new projects, is Lua still the language-to-go for PROTO scripting? Or is it Javascript?

##### scott.nortman 09/04/2021 01:31:58
`@Darko Lukić` Sorry I just saw some older comment re issues with udrf to proto; I found an issue with use of xacro:macro; see here [https://github.com/scottnortman/xarm7\_webots\_pkg/tree/main/description](https://github.com/scottnortman/xarm7_webots_pkg/tree/main/description)

##### Ethan ¤ 09/04/2021 07:22:55
Hi all, I am new to webot. I was wondering is it possible that I create a GUI in the visual studio which will be able to control the robot in webot and display the sensor reading from the webot?

##### DDaniel [Cyberbotics] 09/04/2021 08:00:41
`@cnbarcelo` PROTO will not disappear any time soon and will remain the standard for Webots. As for scripting language you should go with JavaScript if you start a new project, it's meant to replace Lua in the long term (Lua will be deprecated in a few years)

##### Azer Babaev [Starkit, TC] 09/04/2021 08:10:34
Website [https://cyberbotics.com](https://cyberbotics.com) doesn’t answer. Is it with my connection only?

##### DDaniel [Cyberbotics] 09/04/2021 08:11:38
`@Azer Babaev [Starkit, TC]` works for me

##### Azer Babaev [Starkit, TC] 09/04/2021 08:15:08
Thanks

##### Dmitriy Ogureckiy 09/04/2021 19:22:42
For me it also doesn't work, due to this reason I cannot to build webots manually from github: link

[https://cyberbotics.com/files/repository/dependencies/linux64/release/](https://cyberbotics.com/files/repository/dependencies/linux64/release/)

doesn't work. I want to know why?

##### DDaniel [Cyberbotics] 09/04/2021 19:34:57
To build from source you can follow this procedure: [https://github.com/cyberbotics/webots/wiki/Linux-installation](https://github.com/cyberbotics/webots/wiki/Linux-installation)


To install from binary the procedure is available here: [https://cyberbotics.com/doc/guide/installation-procedure](https://cyberbotics.com/doc/guide/installation-procedure)

##### Dmitriy Ogureckiy 09/04/2021 20:57:00
Thank you, but when I following procedure in the first link I have a such problem: all dependencies download from [https://cyberbotics.com/files/repository/dependencies/linux64/release/](https://cyberbotics.com/files/repository/dependencies/linux64/release/) page, but this page doesn't open.

##### KC 09/05/2021 12:48:20
Hi, where can I see and edit the keyboard shortcuts in Webots?

##### Stefania Pedrazzi [Cyberbotics] 09/05/2021 18:25:13
Hi, you can only see them on the menu items directly but their are not customizable and cannot be changed.

##### Justin Fisher [Moderator] 09/05/2021 20:30:18
Greetings Webots people.  I used to be a frequent participant here, but a busy life has kept me away from Webots for awhile.  But now I'm teaching another class using Webots, so I'll likely be around again!

##### SeanLuTW 09/06/2021 05:18:43
Hi, I'm running a world with up to 70 controllers, when I pressed `Run`, the console shown several lines like

```Cannot open pipe file: \\.\pipe\webots_17552_993173752 after trying for 5 seconds
Cannot connect to Webots on pipe: \\.\pipe\webots_17552_993173752
WARNING: 'xxx' controller exited with status: 1.
```

How can I fix this error?

##### Darko Lukić [Cyberbotics] 09/06/2021 06:34:36
Yes. Or, maybe even better, you can integrate the GUI into Webots:

[https://cyberbotics.com/doc/guide/controller-plugin#robot-window](https://cyberbotics.com/doc/guide/controller-plugin#robot-window)


Are you using ROS 2?


Could you please report an issue about this one? Also, please provide the final xacro file you used in the PROTO conversion

##### Tahir [Moderator] 09/06/2021 07:00:30
I think its OK at the moment to skip for POC

##### Darko Lukić [Cyberbotics] 09/06/2021 07:52:43
Are you running extern controllers?

##### SeanLuTW 09/06/2021 08:12:12
No, all controllers are python scripts defined in controllers directory

##### Tahir [Moderator] 09/06/2021 08:29:56
For one simulation can we create a Robot and Supervisor instance both


In my controller most of the things are done by Robot and now I want to get robot's pose via supervisor but getting an error


`Only one instance of the Robot class should be created`

##### Darko Lukić [Cyberbotics] 09/06/2021 08:34:15
The Supervisor class is inherits the Robot class, so just replace Robot by Supervisor. You don't need two instances

##### Tahir [Moderator] 09/06/2021 08:34:24
Solved at the moment by using only Supervisor usage


Thanks man just did

##### Darko Lukić [Cyberbotics] 09/06/2021 09:42:48
Does the same problem occurs with like 2 or 3 controllers?

##### scott.nortman 09/06/2021 12:49:05
`@Darko Lukić` How can I prevent automatic creation and generation of the robot\_state\_publisher when launching  webots node with a robot?  I see the possibility of passing a dict to turn this off, but an example call will be helpful, thank you

##### Ethan ¤ 09/06/2021 12:50:00
Thanks for the information

##### Darko Lukić [Cyberbotics] 09/06/2021 12:51:35
If your package is based on `webots_ros2_driver` instead of `webots_ros2_core` than it should not happen. Note that we plan to deprecate `webots_ros2_core` in favor of `webots_ros2_driver`.

##### scott.nortman 09/06/2021 12:52:59
Thank you for the fast response!  Is the new package automatically installed when I installed webots 2021b?

##### Tahir [Moderator] 09/06/2021 12:53:37
Any way to change webots from left hand system to right hand system


to have -ive z axis down instead of -y


[https://stackoverflow.com/questions/54557696/changing-global-coordinate-frame-in-webots](https://stackoverflow.com/questions/54557696/changing-global-coordinate-frame-in-webots)

##### Darko Lukić [Cyberbotics] 09/06/2021 12:54:28
No, but it is automatically installed with the `webots_ros2` package (Foxy, soon Rolling as well)

##### Tahir [Moderator] 09/06/2021 12:55:03
This answer seems not to be applicable now as gravity does not accept a vector anymore

##### Darko Lukić [Cyberbotics] 09/06/2021 12:55:57
Webots uses the right handed system

##### Tahir [Moderator] 09/06/2021 12:56:16
Sorry for interchanging I mean this

##### Darko Lukić [Cyberbotics] 09/06/2021 12:57:15
To make the z-axis up you need to set the value of `coordinateSystem` to `ENU` in `WorldInfo`:

[https://cyberbotics.com/doc/reference/worldinfo](https://cyberbotics.com/doc/reference/worldinfo)

##### Tahir [Moderator] 09/06/2021 13:02:15
Thanks man problem solved

##### Dmitriy Ogureckiy 09/06/2021 13:05:34
Hi,was webots site opened for you yet?

##### Darko Lukić [Cyberbotics] 09/06/2021 13:09:56
I have just added an updated answer:

[https://stackoverflow.com/a/69075101/1983050](https://stackoverflow.com/a/69075101/1983050)

##### scott.nortman 09/06/2021 13:18:22
If my package is already working with the older version, and I need to prevent the robot\_state\_publisher, how can I do this?  I will migrate to the newer package, but I need to get what I have working for now.  Thank you.

##### Darko Lukić [Cyberbotics] 09/06/2021 13:27:36
It is declared here:

[https://github.com/cyberbotics/webots\_ros2/blob/f5f33a9035bf3a1152a9f9df4e1001d5db3375dd/webots\_ros2\_core/launch/robot\_launch.py#L59](https://github.com/cyberbotics/webots_ros2/blob/f5f33a9035bf3a1152a9f9df4e1001d5db3375dd/webots_ros2_core/launch/robot_launch.py#L59)



Therefore:

```
ros2 launch webots_ros2_core robot_launch.py publish_tf:=False
```

##### scott.nortman 09/06/2021 13:43:19
Thanks, I did try that, but it did not work.  I was still getting conflicts with the robot\_state\_publisher.  This just worked though:              'robot' : {

                'publish\_robot\_description': False,

                'publish\_base\_footprint': False

            },


passed to the start\_device\_manager call

##### Darko Lukić [Cyberbotics] 09/06/2021 13:46:30
If the `publish_robot_description` parameter is true then the `robot_state_publisher` node will receive a robot description. Given the fact that `publish_tf:=False` doesn't work for you means you are somewhere running `robot_state_publisher`, you are just not setting a valid robot description

##### SeanLuTW 09/07/2021 01:58:16
When I reduced the number of controllers to 1/3 (about 20) then it can normally run


Btw, if I run the same world with another device with better CPU, it can also run normally.

##### whiteplatin 09/07/2021 04:32:07
When running the epuck from the tutorial, unfortunately the epuck collides with the wooden box. Ive followed the essential steps of saving, is there anything else I need to consider ?

[https://cyberbotics.com/doc/guide/tutorial-1-your-first-simulation-in-webots](https://cyberbotics.com/doc/guide/tutorial-1-your-first-simulation-in-webots)


And another thing: The boxes and e-pcuk are both set at 0.05 at y, but it can be clearly seen that there is huge diff
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/884668959100645447/unknown.png)
%end


3. Lets say I messed up with the essential saving steps part and I am weeks in the project, is the project ruined ?


4.  3rd coordinate missing to resize (I thought I might as well restart the tutorial, but yeah....now I have this 😅 )
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/884676119004053544/unknown.png)
%end


WeBot looks really great though 😉

Hoping I can fix these issues so that I can continue using it.


I think it could be my graphics driver, is that a  possibility for the isues Im having



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/884687659606351882/unknown.png)
%end

##### Darko Lukić [Cyberbotics] 09/07/2021 06:33:43
It sounds like a bug. Could you please create an issue about it:

[https://github.com/cyberbotics/webots/issues/new?assignees=&labels=&template=bug\_report.md](https://github.com/cyberbotics/webots/issues/new?assignees=&labels=&template=bug_report.md)

##### Justin Fisher [Moderator] 09/07/2021 06:36:18
In many cases the y-coordinate of objects in Webots is at the midpoint of the object.  (This is true of simple geometries anyway, not necessarily true for more complex objects.)  I can't tell from your screenshot, but it looks like these plausibly do have their midpoints at the same altitude.  EDIT:  Actually I can tell from where the red/green/blue axes are on your robot that it's y-coordinate will correspond to the bottom of the robot.  If you instead click on one of your boxes, you'll probably see that their axes center on the middle of the box.  At any rate, you should find that their axes-origin is at the same altitude, with the difference being that the robot has its origin at its base, whereas the boxes have their origin at their middle.


Yeah, the interface isn't showing up right for you.  A workaround may be that you can drag upwards the little barrier between that resize interface and the scene tree above it, which may reveal the control you need long enough for you to use it.  It'd sure be annoying if you need to keep dragging that barrier up and down, so hopefully they can help figure out the bug!

##### DDaniel [Cyberbotics] 09/07/2021 06:54:48
which Webots version are you using?

##### whiteplatin 09/07/2021 08:13:58
This issue wasnt there on my first try with tutorial 1.

My second attempt with Tut1 by creating a new world all together, thats when it came up
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/884713093656109096/unknown.png)
%end


Yeah i tried that almost full screened it as well by dragging, wasnt able to find it. Its weird because it was there on the first go. Ill try and tinker a bit more.

Just another thing, if mess up with the essential saving steps, could that ruin my entire project ?

Thanks


should I try increasing the size more 😛

Z is definetly there but im just not able to drag that far lool (wouldnt want to anyways) Its not a big deal , as long as there is another way  to change the values ?  👈
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/884714751664484392/unknown.png)
%end


Im able to tab to z 🤣 🤣

##### Michael999 09/07/2021 14:13:06
hey guys, i have downloaded a 3D model of a robot arm and I've imported it in Webots, but how do I control my arm with Python now? Also how do I define the joints?

##### DDaniel [Cyberbotics] 09/07/2021 14:21:36
`@Michael999` A good way of learning the basics is through the tutorial [https://cyberbotics.com/doc/guide/tutorial-1-your-first-simulation-in-webots](https://cyberbotics.com/doc/guide/tutorial-1-your-first-simulation-in-webots)

##### Michael999 09/07/2021 14:22:11
thanks, I'll take a look.


Is there a way to mass-convert multiple "Shape" into "Solids" ?

##### Justin Fisher [Moderator] 09/07/2021 14:53:41
If you right-click objects in the scene tree, there will sometimes be conversion options.  E.g., I think you can automatically convert transforms and solids back and forth.  I'm not sure you can auto-convert shapes with those though, since shapes are a bit simpler, e.g., in that they can't have further children in the scene tree.  So the shape->solid conversion you'll likely end up making is to create a solid node and then put the shape inside it as a child.



Occasionally, if I have a thorny mass-conversion issue, I'll open the world file in a text editor and change things there.  The syntax is pretty straight-forward, so if you do the thing you want once in the scene tree, you'll probably be able to do some copy-pasting, or even find-replacing, to make more copies of it in the text file.  (Probably a good idea to make a backup copy of that file first!)

##### Michael999 09/07/2021 14:56:32
Perfect, exactly what I was looking for, thanks so much.

##### Justin Fisher [Moderator] 09/07/2021 15:00:54
I'm not sure what you mean by "essential saving steps".  The main saving things I remember about Webots are (1) to save my controller before re-running the simulation if I want the revisions in the controller to show up in the simulation.  And (2) to be mindful about saving the simulated world itself.  If a lot changes in your world during the simulation, then you likely don't want to save the world after the simulation has been running, because that would save the new state of the world.  So instead, when I want to change the world, I usually first reset the simulation, then make the changes, then be sure to hit save world *before* running the simulation.  (I can't count the number of times I've pulled my hair out because I made changes to the world either after running the simulation and/or before hitting run to test the changes, and then wasn't able to save those changes because I didn't want to also save the changes that resulted from having run the simulation -- one of the most frustrating aspects of Webots, IMHO!)

##### Michael999 09/07/2021 15:06:26
Little question, is it possible to model this type of movements in webots? this is more complex, just want to make sure if it's possible before I dive deeper into webots:



> **Attachment**: [x.mov](https://cdn.discordapp.com/attachments/565154703139405824/884816967826038794/x.mov)

##### Justin Fisher [Moderator] 09/07/2021 15:08:39
Yes, you should be able to.  You may want to use "coupled motors" to ensure that both sides of your gripper move in unison.  [https://cyberbotics.com/doc/reference/motor#coupled-motors](https://cyberbotics.com/doc/reference/motor#coupled-motors)

##### DDaniel [Cyberbotics] 09/07/2021 15:09:47
or in the world samples: `khepera3_gripper`
> **Attachment**: [khepera3\_gripper.mp4](https://cdn.discordapp.com/attachments/565154703139405824/884817735022968872/khepera3_gripper.mp4)

##### Michael999 09/07/2021 15:11:32
oh wow, that's very cool.

##### whiteplatin 09/08/2021 04:41:04
Thanks for that, ill keep that in mind.

I thought I read "eesential" somewhere, I guess the term was "fundamental",  but I was referring to this:

`When a Webots world is modified with the intention of being saved, it is fundamental that the simulation is first paused and reloaded to its initial state, i.e. the virtual time counter on the main toolbar should show 0:00:00:000. Otherwise at each save, the position of each 3D object can accumulate errors. Therefore, any modification of the world should be performed in that order: pause, reset, modify and save the simulation.`

##### Justin Fisher [Moderator] 09/08/2021 18:02:52
Yes, that quote is saying basically the same thing as the point (2) I was making above.


(I suppose this worry arises not just in the case where a lot changes over the course of running the simulation.  Even if not much noticeable has changed, still as the simulation runs a lot of numbers change by a tiny bit, e.g. as gravity constantly makes solids collide with the ground and the ground pushes them back up.  So if you save the world after it has been running, those numbers will be a tiny bit different from how they'd been, and if you do that repeatedly the numbers may end up having wandered quite a bit.  I've noticed this happening with joints eventually getting knocked noticably off their intended axis.  This is what they mean by "accumulate errors".  But the basic idea is still as I said above -- if you don't want to save the things that changed while you were running the simulation, be sure to reset the simulation before saving the world.  If you do mess that up, it's usually not a huge deal -- you just might have to manually go back and reset some things to be how you want them to be at the beginning of the simulation -- e.g. moving robots and objects back to their intended starting positions -- and save again.)

##### whiteplatin 09/09/2021 11:15:36
alright thanks for that. i guess its reassuring to know that the accumulated errors can be reverted even if its a painstaking process hehe


ANy chance for an official Rust implementation ?

##### kid07 09/09/2021 12:57:50
Hi everyone! I’m trying to get my robot to move but it doesn’t want to. I’ve coded it in C. Please can someone have a look. There seems to be no errors in the code however the robot isn’t moving. Ive also attached a distance sensor to it.



%figure
![image0.jpg](https://cdn.discordapp.com/attachments/565154703139405824/885509844482801694/image0.jpg)
%end



%figure
![image0.jpg](https://cdn.discordapp.com/attachments/565154703139405824/885509915785969664/image0.jpg)
%end



%figure
![image0.jpg](https://cdn.discordapp.com/attachments/565154703139405824/885510001664348190/image0.jpg)
%end



%figure
![image0.jpg](https://cdn.discordapp.com/attachments/565154703139405824/885510036036653096/image0.jpg)
%end

##### DDaniel [Cyberbotics] 09/09/2021 13:03:33
`@kid07` You need to set the controller you defined in the `controller` field of the Robot node. To avoid spam and make it easier for people to help, next time please post the file instead, photos of monitors are hard to debug.

##### whiteplatin 09/09/2021 13:04:11
This is really annoying.

After doing `Hands-on #5: Select the last node WoodenBox of the scene tree view. Click on the Add button  at the top of the scene tree view. In the dialog box, choose PROTO nodes (Webots Projects) / robots / gctronic / e-puck / E-puck (Robot). An e-puck robot should appear in the middle of the arena. Move and rotate this robot, the same way you did it with the boxes. Save the simulation and press the Run real-time button .` And nothing else ! The robot always collides with the obstacles (boxes). ANy idea what could be the reason for that ?

##### kid07 09/09/2021 13:06:32
Sorry about that. Thanks for replying. How would i do this ? Would i go to the controller void field > wizard> new robot controller ?

##### DDaniel [Cyberbotics] 09/09/2021 13:10:29
First ensure your project hierarchy is correct:

- have a folder named worlds: put your world inside it

- have a folder named controllers (at the same level of worlds folder, not inside it):

   - create a folder named: NAME\_OF\_MY\_CONTROLLER

  - put NAME\_OF\_MY\_CONTROLLER.c inside it

- load the world in webots, and select your robot from the scene tree and expand it

- click in the field called `controller` and select button

- the name of the controller you created should be among the candidates

##### whiteplatin 09/09/2021 13:11:12
`@DDaniel`  Help a dude out

##### kid07 09/09/2021 13:12:53
Perfect , thank you so much. Let me try this out.

##### DDaniel [Cyberbotics] 09/09/2021 13:13:56
`@whiteplatin` what is the name of the controller of the e-puck?

##### whiteplatin 09/09/2021 13:14:29
e-puck\_avoid\_obstacles


Im striclty following the tutorial


Ive got three wooden boxes, and  the e-puck keeps colliding on to boxes indicated by the red outer frame of the epuck

##### DDaniel [Cyberbotics] 09/09/2021 13:17:17
if you open the world `file > open sample world > my_first_simulation` and replace its controller with `e-puck_avoid_obstacles`, does it avoid obstacles?

##### whiteplatin 09/09/2021 13:18:19
I dont follow its already e-puck\_avoid\_obstacles


oh ok one sec

##### DDaniel [Cyberbotics] 09/09/2021 13:20:10
this provided example should have `epuck_go_forward` as default controller

##### whiteplatin 09/09/2021 13:20:19
yeah yeah i got u


it still collides


I have opened the sample world and replaced the controller as e-puck\_avoid\_obstacles


ok it collided a few times but seems to be avoiding obstacles now after some time


when the wireframe turns red, that indicates a collision right ?



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/885517046421540914/unknown.png)
%end


no idea why its doing that

##### DDaniel [Cyberbotics] 09/09/2021 13:28:48
yes, it isn't perfect, it will touch a box here and there, you can play with the weights in the controller to ameliorate it, but at least it should attempt to avoid them

##### whiteplatin 09/09/2021 13:29:05
it plays with the box here and here


it looks like its trying to go through the box like thats the only way


is this an issue with webots or the way that the controller is scripted ?


Actually it looks like its trying to push the box 🤣


Is this an issue due to not having a dedicated gpu ?

##### Darko Lukić [Cyberbotics] 09/09/2021 13:33:21
It is the controller issue. Controllers in Webots are written to be educational and simple, but not robust and advanced.

##### whiteplatin 09/09/2021 13:34:22
If that REALLY is the case then I will continue with webots , are u sure its the script itself ?

YOu would think that the script would be really well programmed ,seeing as this is the first thing we use in the tutorial


And it already ahem excuse my french, ***** up like this


Now its not moving at all but the wheel keeps on rotating
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/885519901392003154/unknown.png)
%end


I would appreciate some clarity , on why this tutorial no ONE ! is so messed up ?


This should be mentioned in the tutorial also


How can tutorial one be so messed up ? Im astounded by the lack of not giving a crap to absolute first time users in tutorial ONE might I emphasise


BUt the software still seems to be great, but some departments are definetly lacking

##### Darko Lukić [Cyberbotics] 09/09/2021 13:47:54
Webots is an open-source software, we will be happy to review your improvements. For example, here you can propose changes for the first tutorial:

[https://github.com/cyberbotics/webots/edit/released/docs/guide/tutorial-1-your-first-simulation-in-webots.md](https://github.com/cyberbotics/webots/edit/released/docs/guide/tutorial-1-your-first-simulation-in-webots.md)

##### whiteplatin 09/09/2021 13:48:04
I just expected a little bit more seeing as this was founded at least since 1998


I have announced it here, take it or leave it


This just proves my point of not caring


Bear in mind I am only talking about tutorial no **ONE**, and nothing else

##### kid07 09/09/2021 13:51:53
`@DDaniel` it’s still not moving 😭


Would you mind having a look at my zip file please

##### DDaniel [Cyberbotics] 09/09/2021 13:52:55
sure, post it

##### kid07 09/09/2021 14:07:42
here it is
> **Attachment**: [Tut4.zip](https://cdn.discordapp.com/attachments/565154703139405824/885526886338416660/Tut4.zip)

##### DDaniel [Cyberbotics] 09/09/2021 14:17:44
In the scene tree on the left, you need to replace the "void" controller of the Robot with your own (Distance\_Calibration). Also, in the controller file `Distance_Calibration.c` you provided in the zip you don't give any commands to the motors so it won't move until you do. (In the photos above you give commands to them, so maybe you're using the wrong file)
%figure
![a.png](https://cdn.discordapp.com/attachments/565154703139405824/885529412274098216/a.png)
%end

##### kid07 09/09/2021 14:22:34
i did exactly that, it seems like it didnt save that part. ill attempt again. thank you !!

##### Justin Fisher [Moderator] 09/09/2021 14:42:24
I'm having a problem where my controller crashes, without error message, whenever I try to read a camera that I dynamically added to the simulation using a supervisor controller.  Any idea why that might be?  (My current guess is that the fix added last year that allows controllers to detect dynamically added devices without restarting the controller doesn't quite work right with cameras?  Or it could be that I'm overlooking some other cause...)

##### kid07 09/09/2021 14:43:05
`@DDaniel` do you think that maybe I need to add a motor to the wheels as part of the code , to get the robot to move ?

##### DDaniel [Cyberbotics] 09/09/2021 14:49:12
`@kid07` what you did in the photos is correct. The only mistake is that the motors in your robot are called `Motor1` and `Motor2` and in the controller you search the devices `motor_1` and `motor_2`.


Add this after initializing the distance sensor and it will move:

```
  WbDeviceTag left_motor = wb_robot_get_device("Motor1");
  WbDeviceTag right_motor = wb_robot_get_device("Motor2");

  wb_motor_set_position(left_motor, INFINITY);
  wb_motor_set_position(right_motor, INFINITY);

  wb_motor_set_velocity(left_motor, 6.28);
  wb_motor_set_velocity(right_motor, 6.28);
```

##### kid07 09/09/2021 14:51:07
😂 oh my word. Stupid mistake.  I’ll do that rn

##### DDaniel [Cyberbotics] 09/09/2021 14:53:38
Are you reading the camera in the same time step that you spawn it? Can you provide a minimal reproducible example (minimal world/controller)  that causes the crash?

##### Justin Fisher [Moderator] 09/09/2021 14:59:27
I've tried waiting 10 timesteps between enabling and reading and that didn't seem to make a difference.  I haven't tried adding a gap (other than `robot.step(0)`) between adding the device to the scene tree and enabling -- do you think that would make a difference?  It seems odd to me that it is crashing without error message.  Shouldn't it give some sort of error message?  (It does seem to hang for a moment before crashing, so I guess it may be that my Python controller is calling C Webots code that never returns, and then Webots ends up giving up waiting for the controller to come back, so just says that it has "crashed some time after starting"?)



The example I've been working with is far from minimal, but I can try to make a minimal one if I can't find some other solution soon.

##### DDaniel [Cyberbotics] 09/09/2021 15:12:16
The value provided to robot.step is the duration, so needs to be different than 0. But yes it could be worth a try to wait one time step before enabling it. Also, since it's a complex simulation, just to be sure check if the controller works fine without this spawning of the camera (to ensure it isn't something else in the controller causing the crash.

##### Justin Fisher [Moderator] 09/09/2021 15:18:15
I often use `robot.step(0)` with supervisor controllers, as (I think) that lets whatever supervisor commands you've issued to the scene tree take effect.  E.g., if you want to add one node, and then add a child to it, I think you need to stick `robot.step(0)` in between to get the first node to be there ready to accept the child.  You're right of course that a step size of 0 doesn't cause the simulation to advance at all, and when I waited 10 timesteps, that was by calling `robot.step(timestep)` 10 times.



I did confirm that I can change whether it crashes or not just by commenting out a line that says `value = scope.getImageArray()` (where `scope` refers to the camera).


Also, I can tell that `robot.getDevice` is successfully detecting the camera within `robot.step(0)` of adding it to the scene tree -- e.g., that does return a Webots camera object, which does have the `.getImageArray` method that cameras are supposed to have.  The only problem is that the controller crashes when I call that method.

##### DDaniel [Cyberbotics] 09/09/2021 15:40:28
That's correct, and if the camera object is defined it should work. If you can provide an example  (here or better yet on github) we can look into it (you're using 2021b right?). Does the `.getImage` method also crash?

##### Justin Fisher [Moderator] 09/09/2021 15:50:50
That's interesting.  Switching between `value=scope.getImageArray()` and `value=scope.getImage()` does make the difference between crashing or not.  So something's not working about `.getImageArray`


That may be a good enough solution for my immediate problem, if I can figure out how to extract the info I need from the getImage.  But it's still puzzling that .getImageArray should crash


Part of the reason I hadn't used `.getImage` in the first place is that the Webots docs about it don't seem clear on it.   The docs seem to say that this should return 3 bytes per pixel ("The image is coded as a sequence of three bytes representing the red, green and blue levels of a pixel.") , so you would expect the total number of bytes to be a multiple of 3, but it also says to expect the total memory chunk to be 4x the number of pixels, which fits with my observations.  So should I ignore every 4th byte?  Or is that byte some sort of alpha/transparency value?  The docs could be made much more clear about this.

##### ykopoblete 09/09/2021 16:27:12
Hello, how can I know the positions of other robots in the environment? Is it possible to enable a kind of communication between them?

##### Justin Fisher [Moderator] 09/09/2021 16:31:27
The easiest way to know position is by using a supervisor controller.  [https://cyberbotics.com/doc/reference/supervisor](https://cyberbotics.com/doc/reference/supervisor)



If you don't want to use a supervisor controller, you may be able to get postitions well enough from a radar device.  [https://cyberbotics.com/doc/reference/radar](https://cyberbotics.com/doc/reference/radar)



For communications, you may find it useful to use Emitters and Receivers:

[https://cyberbotics.com/doc/reference/receiver](https://cyberbotics.com/doc/reference/receiver)

##### ykopoblete 09/09/2021 16:37:30
Right, I made a mistake... I want to know the velocity of other robots. Is it possible?

##### Justin Fisher [Moderator] 09/09/2021 16:38:20
A supervisor controller has quite a lot of omniscience, so can tell you that.  Otherwise, you'll probably be stuck trying to compute it yourself, using radar readings or object recognition camera readings

##### DDaniel [Cyberbotics] 09/09/2021 16:39:54
`@Justin Fisher` the format returned is BGRA.

##### Justin Fisher [Moderator] 09/09/2021 16:40:35
There are also gps devices, so if you can figure out a way to get one robot's gps device stuck like a tracker on another robot, that'd let you read its location.


That's really BGRA, not RGBA?  Edit:  I can confirm that it is indeed BGRA.  Thanks!

##### ykopoblete 09/09/2021 16:43:10
I have to use a Turtlebot Burguer3 robot, It only has a Lidar sensor so I will see the way to use a supervisor


thank you

##### Justin Fisher [Moderator] 09/09/2021 16:49:13
You can sort of do this with lidar too, though I don't think it'll easily distinguish other robots from other objects in your environment.  *If* you can assume that the things your lidar sees are robots, then it should be fairly straightforward to get their position, and then to compute their velocity, relative to yours (though if you're spinning, that'll change their apparent velocity, in much the way that, when you're spinning on a bar stool the world appears to be zooming around you)

##### DDaniel [Cyberbotics] 09/09/2021 16:52:06
`@ykopoblete` Supervisor is the easier approach, if you don't mind "cheating" in your application

```
WbNodeRef robot_node = wb_supervisor_node_get_from_def("DEF_NAME_OF_ROBOT");
const double *velocity = wb_supervisor_node_get_velocity(robot_node);
```


yes BGRA (and ARGB for Java)

##### ykopoblete 09/09/2021 16:54:00
I see, but even with that I'm not sure how the point cloud will note the change of position of other robot


How is for python? you need to import something first?

##### Justin Fisher [Moderator] 09/09/2021 16:55:02
Thanks for your help `@DDaniel`   I've now got my robots working with `getImage` which works well enough for me.  I still don't know why `getImageArray` was crashing, so there's probably a bug in there somewhere that y'all may want to fix someday


As a real simple first approach, I'd just take the closest point and assume that it is the other robot.


As long as the same part of the other robot stays closest (a big, sometimes false, assumption) you can compute its velocity (relative to yours) by its change in position (relative to yours)

##### ykopoblete 09/09/2021 16:57:16
yes, but what happen when you have a crowd? You will not know if a point corresponds to the same robot after a timestep

##### Justin Fisher [Moderator] 09/09/2021 16:57:42
Yep, will make it tricky

##### ykopoblete 09/09/2021 16:58:44
Supervisor looks like a reasonable solution to those problems

##### Justin Fisher [Moderator] 09/09/2021 16:58:51
More sophisticated approaches would probably try to cluster together similar points, and then try to make object-permanence conclusions about which clusters at time2 are the same as the clusters at time1.


It all depends on what the goal of your project is


if you're trying to learn about lidar processing, you'll probably get into the sophisticated approaches like I was suggesting

##### ykopoblete 09/09/2021 16:59:34
My goal is just collision avoidance while a robot is going to his goal point

##### Justin Fisher [Moderator] 09/09/2021 16:59:46
if you don't care about lidar and just want to set up some robot interactions, probably better to go with supervisor controllers

##### ykopoblete 09/09/2021 17:01:18
right. Thanks!

##### Fero 09/09/2021 21:09:02
Hey! I want to do that my robot turn when detects a collision but I cant make him stop, and then turn and then continue. Is like he is moving all the time. How can I implement that?

##### DDaniel [Cyberbotics] 09/09/2021 21:11:55
`@Fero` If you're controlling the motors in velocity control, set the velocities to 0 to stop it.

##### Justin Fisher [Moderator] 09/10/2021 00:34:25
Is there a good way to get a supervisor controller to tell a field (like a solid's boundingObject field) to USE another DEF object?  I know how to do this manually in the scene tree, or in a .wbo text file, but I don't know how to do it via a supervisor.  I guess I'll experiment with `importSFNodeFromString` and see if something like `"USE BODYSHAPE"` will work as an acceptable nodeString.  Edit:  and this actually works fine.  I made the mistake of thinking it'd have to be more complicated, but it didn't.  Yay!


On the flipside though, it doesn't seem like `field.removeSF()` works to remove `USE FOO` contents from a `boundingObject` field, and while there is any sort of old content there `importSFNodeFromString` throws an error.  Is there another way to get an old `USE FOO` value out of the way?

##### Olivier Michel [Cyberbotics] 09/10/2021 07:15:45
I believe `field.removeSF()` should work. If not, can you file a bug report about it?

##### kid07 09/10/2021 07:20:03
Hi there. I am trying to get my manipulator to stack the boxes on the green pad. The manipulator has 5 motors and i have to proogram each one of them to move the box to the required position. Im not sure what additional code to add to my script to do this. Please help.
> **Attachment**: [practice6.zip](https://cdn.discordapp.com/attachments/565154703139405824/885786685760221184/practice6.zip)

##### Work 09/10/2021 13:26:50
Is there a way to real time log simulation data like a lidar and imu with we bots?

##### Justin Fisher [Moderator] 09/10/2021 16:00:22
The simplest sort of logging is just to use print commands in your controller to print things in the console that by default appears beneath your simulation window (and then copy-paste it elsewhere if you really want).  If you'd rather have it create a logfile, you can have your controller do that too, just as you would normally create a file in whatever language you're writing your controller in.  Of course, when the data that you're hoping to log are complex and voluminous, the log may not be all that readable, so you may want to consider using some sort of data visualization library to display the data in your log in a more digestible way.  E.g., if you use python, SciPy is quite good for this.


I'm not sure about other people, but my mama taught me not to open .zip files sent by strangers on the internet, so I suspect you might not get all that much help asking that way.  You may get more responses if you paste a couple screenshots of what you're trying to do and/or paste in relevant snippets of your code (probably surrounding them with triple back-ticks  so that they'll format nicely.


So I'm having trouble understanding what has changed about contact points since the 2020 version of Webots.  I can see how the ability to include descendant nodes will be very useful -- thanks!  But it looks like you're deprecating  `node.getNumberOfContactPoints`, which is something I'd found very useful.  When all I want to know is whether or not any contact is occurring, it seemed more efficient to just get the number of contact points, rather than requiring that all the contact points themselves be passed through the API, which seems to be the only option the current documentation allows?  It looks like the back end for `getNumberofContactPoints` must still exist as part of the new implementation, since it must be used to produce the second half of `getContactPointsPrivate` which is used in the current implementation.  Is there a reason to deprecate it?


Also, `def getContactPoints` in `controller.py` would be cleaner and faster if you rewrote it using a Python list comprehension, rather than slowly appending items to the list, e.g. using the following one-liner:

```python
      return [self.getContactPointFromList(points, i) for i in range(size)]
```

rather than what you currently have:

```python
      ret = []
      for i in range(size):
        ret.append(self.getContactPointFromList(points, i))
      return ret
```

##### Dmitriy Ogureckiy 09/11/2021 20:56:06
Hi, I live in Russia, do you know why I can't open cyberbotics.com?  It opens only with VPN.

##### Luftwaffel [Moderator] 09/11/2021 21:04:39
Either your isp blocks the website, or your ip address is blocked by the server because it has been used in ddos attacks or botnets.


Since lots of those attacks are from Russia, it is possible, that whole ip ranges are preemptively blocked. But I can't say that for sure, just a speculation.

##### Dmitriy Ogureckiy 09/11/2021 21:24:44
Thanks, but I am not sure, that it is due to my country, because recently I was could open site.

##### DrakerDG 09/12/2021 13:15:31
Hello! I have a query regarding the dimensions resulting from the linear velocity of the API function wb\_supervisor\_node\_get\_velocity. Will it be in meters / sec, centimeters / second, meters / minute, etc.?

##### ykopoblete 09/12/2021 13:16:18
compare it with the max velocity of your robot


max velocity is in m/s

##### DrakerDG 09/12/2021 13:19:02
In my case I built my own robot in webots. How do I determine the maximum speed?


To calculate the modulus of the velocity of my robot, I add the vectors of the linear velocities at x, y, and z. For example the result goes from 0.11 to 1.5, but I don't understand the dimensions

##### ykopoblete 09/12/2021 13:22:24
in general is in m/s

##### DrakerDG 09/12/2021 13:23:14
I used this, to add the vectors
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/886602860131909642/unknown.png)
%end


1.5 m/s is very fast I think

##### ykopoblete 09/12/2021 13:25:39
I have a problem with this. When I call to the supervisor as "supervisor = Supervisor()", then I get an error calling "Only one instance of the Robot class should be created". It's obvious is because I'm using also the node "robot = Robot()" within the controller. But, wheter I can only user supervisor instead of robot, how do I set my robot's parameters?. For example, how do I get a device?


yes, at least I have a robot with 2.5 m/s of max speed

##### DDaniel [Cyberbotics] 09/12/2021 13:26:39
`@ykopoblete` A Supervisor is just a Robot with extra stuff, you only need one of the two: `robot = Supervisor()`


`@DrakerDG` yes, everything in Webots is metric. The velocity returned is m/s

##### ykopoblete 09/12/2021 13:28:10
Thanks. So, to use it with multiple robots do I have to create a controller for each one?

##### DrakerDG 09/12/2021 13:28:54
Ok, thanks

##### DDaniel [Cyberbotics] 09/12/2021 13:32:34
`@ykopoblete` I suppose it depends what you're trying to achieve. Any robot for which you need Supervisor powers needs to have the `supervisor` field set to true.  If you want multiple robots to use the same controller but want it to behave differently/uniquely for some robots, you can use the `controllerArgs` field to achieve this: [https://cyberbotics.com/doc/guide/controller-programming#using-controller-arguments](https://cyberbotics.com/doc/guide/controller-programming#using-controller-arguments)

##### ykopoblete 09/12/2021 13:33:05
Thanks 😭

##### DrakerDG 09/12/2021 13:36:30
These are my robots at 1.28 m/s 🙂
> **Attachment**: [Loop\_Track\_V6\_16.mp4](https://cdn.discordapp.com/attachments/565154703139405824/886606201608093706/Loop_Track_V6_16.mp4)



%figure
![Loop_Track_V6_1.png](https://cdn.discordapp.com/attachments/565154703139405824/886606278485479514/Loop_Track_V6_1.png)
%end

##### ykopoblete 09/12/2021 13:52:23
This doesn't work. It calls this "AttributeError: No constructor defined". What can I do?

##### DDaniel [Cyberbotics] 09/12/2021 13:56:27
Can you share the controller?

##### ykopoblete 09/12/2021 13:58:28
There it is. I'm trying to get the velocity of the other robot
> **Attachment**: [odometer\_calculation.py](https://cdn.discordapp.com/attachments/565154703139405824/886611727117090856/odometer_calculation.py)


I have 2 errors, when I use robot.getVelocity it says: "AttributeError: 'Supervisor' object has no attribute 'getVelocity'".

Then I changed to node but it says about the constructor

##### DrakerDG 09/12/2021 14:00:36
In my case, the DEF name of the one robot is SLFR\_V4A and use the next code to get the velocity ,  calculate the velocity module and show in a label in the render



`      WbNodeRef robot\_node = wb\_supervisor\_node\_get\_from\_def("SLFR\_V4A");

      const double *vel0 = wb\_supervisor\_node\_get\_velocity(robot\_node);

      double spdx = sqrt(pow(vel0[0],2)+pow(vel0[1],2)+pow(vel0[2],2));

      sprintf(strP, "PID: %5d  Speed: %.2f", (int)PID, spdx);

      wb\_supervisor\_set\_label(0,strP,0,0.91,0.05,0x165282,0,"Lucida Console");`



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/886612983462113280/unknown.png)
%end

##### DDaniel [Cyberbotics] 09/12/2021 14:09:29
The syntax is:
```
robot = Supervisor()
robot_node = robot.getFromDef('ROBOT_DEF_NAME')
velocity = robot_node.getVelocity()
```

##### ykopoblete 09/12/2021 14:21:41
Thanks! now it works

##### DrakerDG 09/12/2021 14:33:05
I will try with this code too, thanks

##### Justin Fisher [Moderator] 09/12/2021 19:33:02
Using `Node.resetPhysics()` on a free-falling robot with spring joints seems to be very wonky, apparently allowing immense forces to build up in the springs.  Is there a good way to actually reset the physics on these joints -- i.e., to remove all of the accumulated velocity?  (I've been trying to achieve a sort of parachute-like effect by periodically (every other timestep) resetting the physics on a free-falling robot, which works great, except if the robot has spring settings on its joints, in which case the robot writhes around like it's in extreme pain, and then bounces away explosively when it finally touches ground and I stop resetting its physics.)


Okay, it seems like a workable solution is to use `joint.setJointPosition(0,axis)` for each axis of each joint to keep the joints from getting far enough away from their default position that forces accumulate without bounds.  I think we can probably chalk this up to a more general bug where passive joints fail to keep themselves within the min and max constraints specified in joint properties.  If the joints would treat these as hard constraints, as it seems like they should, then it shouldn't be possible for them to build up forces without limit...


Another puzzling problem.  It looks like Webots is ignoring the `emissiveIntensity` field of a PBRAppearance and instead just uses the same full-strength `emissiveColor`  regardless of `emissiveIntensity`, including even if that is set to 0.  I don't think I've changed anything that would affect this on my end since it was working as expected under the 2020b version of Webots.  Is there some change in Webots since then that would make `emissiveIntensity` no longer be taken into account?

##### DDaniel [Cyberbotics] 09/13/2021 09:00:01
`@Justin Fisher` In case of bugs, discord is not really the ideal place to report them. It is better to open an issue in the github page with ideally a minimal example that shows the issue. This way if indeed they are bugs they get addressed. We might not be able to look into it right away, so by opening an issue we can keep track of it. Thank you for the feedback though

##### kid07 09/13/2021 17:51:31
Hi everyone. I’m trying to create a void function in C that will set the wheel speeds of my cart to drive it forward. The function must accept as input :

1. The device tag for each wheel motor

2. An integer value representing the percentage of maximum speed



Based on the above, the wheel speed must be set.

Here is my cart and code. The code doesn’t work and I’m not sure how else to change it. Would appreciate some help.



%figure
![image0.jpg](https://cdn.discordapp.com/attachments/565154703139405824/887032800174297098/image0.jpg)
%end



%figure
![image0.jpg](https://cdn.discordapp.com/attachments/565154703139405824/887032818717302814/image0.jpg)
%end

##### Justin Fisher [Moderator] 09/13/2021 18:22:55
Some pretty good fraction of the time, what I think is a bug is working as designed, and I just need a different explanation of how things are working.  E.g., with the emissiveColor thing, I half-expected that the answer would be something like "that's now just used for LED's, and if you want to make non-LED's glow more dimly, the emissive color map now does that".



Another good fraction of the time, what I think is a bug is already a well-known bug, sometimes with a known workaround.  E.g., with the joints going out of bounds thing, I half expected to hear something like "that's a well-known bug that is forced by limitations of the physics engine.  If you want joints to stay within hard constraints, you'll need to use a supervisor controller to manually enforce the constraints".



Since I'm working on a deadline (getting a Webots assignment ready for my students to do), I post here in hopes of getting one of those answers that can solve my immediate problem right away, but of course you're right that if I uncover a previously unknown bug, it'll be good for me to make a github issue for it (as I did a number of times last time I taught this class -- and I'm happy to see a fair number of bugs I reported last year fixed in this year's version of Webots -- thank you!).


It'll make readers' lives easier if you copy-paste code into discord, within a block-code chunk, set off by triple back-ticks .

Anyway, (A) it looks like you're trying to tell your motors to run indefinitely at a particular speed.  To do that, you'll also also need to enable the motors and set their position to infinite.  Maybe you do that elsewhere?  (B) It looks like you accept `throttle` as an argument to your function, but then you seem to overwrite it (if my rusty memory of C serves me).   Similarly for the `wheels` argument.  (C) On your screenshot I don't see any call to the robot's step function.  You need to call that to get the simulation to advance forwards in time so you can see the consequences of the motor commands you sent.  Hopefully you're calling this function from within some loop that does call the step function?  (D) It takes a bit of time to get device, so often Webots programs would get the devices just once at the beginning of the controller and store the list of them somewhere where your function would have access to it, so it wouldn't need to generate that list each time step.  (E) You said you wanted your function to accept the device tags of the motor as input, but you currently seem to overwrite whatever is passed as `wheels`.  I think it'd probably be more useful to pass a list of already-gotten webots devices to the function instead.  (F)  You try to store the results of webots get device in a list of type `char`, but that's not the right type.  (F) I don't remember quite how C strings work, but it looks to me like you're telling it that the device names should be length-4 strings, but then are using strings that are longer than that.



I'd encourage you to start with one of the Webots tutorials and make smaller incremental changes to it, testing that it works at each step of the way.

##### Luftwaffel [Moderator] 09/14/2021 01:54:33
`@DrakerDG` I created a python controller for your line follower. I get about 1.65 m/s. Going faster would require more grip (higher friction)
> **Attachment**: [SLFR\_V6X\_python.py](https://cdn.discordapp.com/attachments/565154703139405824/887154323514081280/SLFR_V6X_python.py)


I dont know why it runs so slowly. I would have to profile the simulation, but I only have the tools setup on a different OS.

##### DrakerDG 09/14/2021 02:11:53
OK thank you.  Yesterday I doubled the friction and improved the performance, the tires stopped sliding in the curves.  The only thing is that as I increased the speed eventually the robots started to lift up in the front, similar to a dragster.  This happens at startup or when colliding with another vehicle.  I've recorded spectacular colosions
%figure
![Screenshot_20210913_200513_com.huawei.himovie.overseas_edit_77269461698104.jpg](https://cdn.discordapp.com/attachments/565154703139405824/887158686680768602/Screenshot_20210913_200513_com.huawei.himovie.overseas_edit_77269461698104.jpg)
%end

##### Luftwaffel [Moderator] 09/14/2021 02:12:56
you could increase the front weight (by perhaps making the front plate thicker, so it has more mass).

##### DrakerDG 09/14/2021 02:14:21
In my case with less light effects and without cameras it runs around 0.4x, but when recording between 0.1 and 0.2x


I thought about increasing the weight in the front part, but my idea is to keep the closest thing to the real robot and take advantage of the simulations to test the real design
%figure
![IMG_20210828_094036_edit_1695423048504839.jpg](https://cdn.discordapp.com/attachments/565154703139405824/887160465841590312/IMG_20210828_094036_edit_1695423048504839.jpg)
%end

##### Luftwaffel [Moderator] 09/14/2021 02:19:36
Are the motors realistic? Does the real robot do a wheely?

##### DrakerDG 09/14/2021 02:25:52
It is a real robot, but the RPMs and the strength of the motors do not lift it yet.  In Webots I estimate that I have exceeded the maximum speed and that possibly that would happen.  That is why in faster designs a vertical turbine is added to make the robot not stand up.


This in a real robot in action: [https://youtu.be/UhucBLW\_qIQ](https://youtu.be/UhucBLW_qIQ)

##### duct 09/14/2021 02:40:53
Would scaling down a robot be a reason for "This physics step could not be calculated correctly" error? I had to scale down a robot to fit an arena we made for it, and the simulation occasionally makes this error. Sometimes, it makes the robot do crazy things like doing a flip, or flying across the map. Just wondering if doing the opposite, scaling up the map instead of scaling down the bot, would fix these physics errors

##### DrakerDG 09/14/2021 02:45:09
Maybe it is necessary to lower the value of basicTimeStep in the WorldInfo node

##### duct 09/14/2021 02:45:39
hm thanks i'll try that

##### DrakerDG 09/14/2021 02:46:37
By default it is 32, you can start by going down to the middle

##### duct 09/14/2021 02:47:42
and does changing that change the timestep for everything? like the robot's robot->getBasicTimeStep() function, does that pull from the worldinfo's timestep?

##### DrakerDG 09/14/2021 02:49:43
Not, only in basicTimeStep of WorldInfo

##### duct 09/14/2021 02:50:25
sorry, i can't open the webots rn so i can't check, does the robot also have a similar timestep option in the scene tree?

##### DrakerDG 09/14/2021 02:52:38
I do not think so

##### duct 09/14/2021 02:53:07
alright but the robot's basic time step doesn't have to match the world's timestep?

##### DrakerDG 09/14/2021 03:01:28
there's no need

##### duct 09/14/2021 03:03:09
ok, thanks!

##### DrakerDG 09/14/2021 03:27:36
👍

##### ykopoblete 09/14/2021 03:56:36
how can I do a robot follows a direction? I'm trying to use a direction vector with the module but how can I pass the new position to the robot?

##### DrakerDG 09/14/2021 06:33:40
In this video you can see how the front of the robot lifts even at 1.5m/ s
> **Attachment**: [km\_Speed\_Line\_Follower\_Robot\_Start\_360p.mp4](https://cdn.discordapp.com/attachments/565154703139405824/887224566299123722/km_Speed_Line_Follower_Robot_Start_360p.mp4)


In this case you need the vector in 3 components (x, y, z). In this way your robot can be estimate the distance in every component.



You can use a supervisor node to set the vector using a API function that wb\_supervisor\_field\_set\_sf\_vec3f, thru an array of 3 values

##### kid07 09/14/2021 09:18:30
thank you `@Justin Fisher` , I've tried to adjust the code according to what you have said. I'm still not getting it right. I've also tried searching on the web for examples on how to create functions in Webot but couldnt find much. Below is the updated code in a textfile. Not sure how to add a block code.



> **Attachment**: [WebotCode.txt](https://cdn.discordapp.com/attachments/565154703139405824/887266161425805322/WebotCode.txt)

##### Thobi 09/14/2021 10:52:30
Hello everyone! I am trying to use webots from a cmd command on a Windows machine, however when I try to start up the program with 'webots' or 'webots.exe' it fails to do so.

I installed webots for all users on my machine and added the ...\bin to my system variables, but it doesn't work. I have tried to solve this issue, but I am stuck. Does anyone have an idea what I could do?

##### Darko Lukić [Cyberbotics] 09/14/2021 11:30:51
This is a known bug:

[https://github.com/cyberbotics/webots/pull/3512](https://github.com/cyberbotics/webots/pull/3512)



You can upgrade to R2021b rev1:

[https://github.com/cyberbotics/webots/releases](https://github.com/cyberbotics/webots/releases)

##### Thobi 09/14/2021 11:58:21
Hello Darko! Thanks a lot, now it works!

##### ykopoblete 09/14/2021 14:10:13
Mmm can you help me a little more with that?  I don't understand very well it's functions

##### DrakerDG 09/14/2021 14:52:45
Ok, can you share your work that you have? I review it and can help you better

##### yaroslaw 09/14/2021 14:54:10
Hello everyone. I want to simulate what the Nao robot sees, that is, at a given coordinate and head rotation angles, get an image of what the robot sees. I tried to just put the robot on the field and look at the image from the top camera, but it turned out to be of low quality, although the scene itself in the background is rendered quite well. I read that there is just a camera object, without a robot, but there is no camera in my list of possible objects. So, how can I get a picture at the given coordinates and angles of rotation? I am using Ubuntu 20.04 and Webots version: R2021b. Thanks.
%figure
![empty.png](https://cdn.discordapp.com/attachments/565154703139405824/887350522691076176/empty.png)
%end

##### DDaniel [Cyberbotics] 09/14/2021 15:01:43
`@yaroslaw` The `Camera` node has to be a child of a `Robot` node. You can create an empty robot node, add to it the camera and then move this Robot node around to the positions you're interested in (using a supervisor)

##### kid07 09/14/2021 15:12:16
`@DDaniel` can you please have a look at my code if you get a chance 🙂


I’m trying to create a void  function that will allow me to adjust the speed of my wheels on my robot. My code isn’t working, I’ve tried to correct it using Justin Fishers comments. Ive also tried to find examples of similar functions online but no luck there.

##### DDaniel [Cyberbotics] 09/14/2021 15:26:29
`@kid07` your code has a lot of issues: variable names are not consistent (typos, different capitalisation, random brackets, ... ) the function return type is inconsistent (declare it as void, but when you define the function you define it as float), and the controller lacks the main loop (`while (wb_robot_step(TIME_STEP) != -1)`). It's probably worth going through the tutorials or trying to learn from existing examples. One similar to yours is `File > Open sample world > samples > tutorials > 4_wheels_robot`


You can try modifying this one that already works by splitting the part about the movement into a separate function

##### ykopoblete 09/14/2021 17:29:48
Sure, do you need the controller or all the work?



> **Attachment**: [odometer\_calculation.py](https://cdn.discordapp.com/attachments/565154703139405824/887390224018190426/odometer_calculation.py)


this is the world
> **Attachment**: [turtlebot.wbt](https://cdn.discordapp.com/attachments/565154703139405824/887390358231711784/turtlebot.wbt)

##### Vin 09/14/2021 17:32:55
Hi I want to ask how to get the robot move path? I want to watch what path the car move.


Hello, can anyone help me


`@DDaniel` Hi I want to know the move path of a robot car in a map, so how can I do that.  Do you have some advice?

##### DrakerDG 09/14/2021 19:16:32
Ok, I will review a soon as possible

##### ykopoblete 09/14/2021 21:06:27
Thank you

##### AmixxM 09/14/2021 23:06:40
Hey I have trouble reaching cyberbotics.com website. Is there any offline version of webots documentation somewhere?

##### Luftwaffel [Moderator] 09/14/2021 23:10:40
`@AmixxM` Try using a VPN. Another user recently reported that issue. Where are you from?

##### AmixxM 09/14/2021 23:11:21
UCI


at irvine

##### Luftwaffel [Moderator] 09/14/2021 23:12:18
Hmm strange. Try with a VPN and let us know if it works

##### AmixxM 09/14/2021 23:19:32
Yes I could connect using a VPN but it's not an ideal solution for me since I am using free VPN. Anyway thanks for your help.

##### thonk enthusiast 09/15/2021 04:58:22
bruh

##### kid07 09/15/2021 08:30:17
Hi, How do I create a Boolean value to represent the direction I’d like my robot to turn ? I’m not using a sensor but rather a motor.

##### Jan Weber 09/15/2021 10:27:25
Hello,

I can't reach www.cyberbotics.com (Germany).

My operating system (Ubuntu) also cannot contact your server to download updates.

Is there a solution for this?



Jan

##### TurnDownForWhat 09/15/2021 11:49:37
Hello

(Sorry for the horrible formatting in this message and with the screenshots)

In short, I am having some issues with loading the textures when streaming to a browser.

First off, this is a (small) project that I have taken over for further development, so I have not written the "base code" myself.



The issue is that the textures are not properly loading in the streaming window. The project was created using Webots R2019b, so I am aware about the change in 2021b where instead of the local url  e.g. "textures/carpeg.jpg" you are rather pointing to the online github link/source.



I might have implemented this part incorrectly, but what I did was just changing the world .wbt file from

```
appearance PBRAppearance {
    baseColorMap ImageTexture {
      url [
        "textures/metal.jpg"
      ]
    }
    roughness 0.5
    metalness 0
  }
```

to:

```
appearance PBRAppearance {
    baseColorMap ImageTexture {
      url [
        "https://raw.githubusercontent.com/cyberbotics/webots/R2021b/projects/default/worlds/textures/wood.jpg"
      ]
    }
    roughness 0.5
    metalness 0
  }
```

The error I get in the console is this:





I can't seem to find any solution anywhere, and I don't know if this is sufficient information to understand the problem either. Any input is greatly appreciated, and I can off course provide more information/error messages.



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/887666856125669406/unknown.png)
%end



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/887666911456948226/unknown.png)
%end

##### kid07 09/15/2021 12:05:30
Hi there, how do i enable my inertial unit (IMU) using the TIME\_STEP variable as the sampling period in C ?

##### Olivier Michel [Cyberbotics] 09/15/2021 12:16:21
It works from here (Switzerland). Can you try a VPN maybe?

##### Stefania Pedrazzi [Cyberbotics] 09/15/2021 12:18:54
[https://www.cyberbotics.com/doc/reference/inertialunit#wb\_inertial\_unit\_enable](https://www.cyberbotics.com/doc/reference/inertialunit#wb_inertial_unit_enable)

##### kid07 09/15/2021 12:35:08
Thank you , just one more question, when using the wb\_inertial\_unit\_get\_roll\_pitch\_yaw(), how do i assign it to a variable ? In the doc above, it says that this function returns 3 angles, how do i store them ?

##### Stefania Pedrazzi [Cyberbotics] 09/15/2021 12:37:36
Simply using for example ``const double *angles = wb\_inertial\_unit\_get\_roll\_pitch\_yaw(tag)``.

If you need to use these value in a later step, then you should additionally copy them in a different structure.

Note that this is pure C coding the it is not specific to Webots.

##### kid07 09/15/2021 12:40:39
Wonderful, thanks for your help !

##### Stefania Pedrazzi [Cyberbotics] 09/15/2021 12:58:53
Pay attention that the screenshot you posted seems to show that you are using an old version of the streaming viewer.

A first thing you should check is that you are using the same Webots version for the worlds, Webots and the streaming server.

##### TurnDownForWhat 09/15/2021 12:59:47
I haven't even thought of that! Thank you, will look into that : D

##### Justin Fisher [Moderator] 09/15/2021 21:19:29
Robot mysteriously somersaulting
> **Attachment**: [robot\_somersaulting\_in\_water.mp4](https://cdn.discordapp.com/attachments/565154703139405824/887809875122458624/robot_somersaulting_in_water.mp4)


I don't understand why my robot is somersaulting in the water in the above video when the wheels start spinning forward.  On dry land it would keep its footing perfectly fine, and its center of gravity is far enough forward that it doesn't seem realistic how it flips backwards.  The front and rear wheels are moving at the same speed, so even if the spinning wheels in water somehow produce lift, that should be similar between front and rear.  The forwards thrust is at the seafloor, and any drag on the body from the water should be similarly balanced both above and below the center of gravity, so I'd think that it would just slow the robot, not make it flip so violently.  Can anyone explain what's happening, and suggest what I might change to keep it from happening.



I'd like the water just to slow the robot.  I had that working fine last year, in ways that never produced mysterious somersaults like this.  I'm not sure what changed this year, whether it's something I changed about the robots, or something that changed in Webots 2021?


Another somersault illustrating that this can happen even without much/any water dragging on the robot's body.
> **Attachment**: [robot\_somersaulting2.mp4](https://cdn.discordapp.com/attachments/565154703139405824/887815245110845470/robot_somersaulting2.mp4)


(Note that I'm remote-controlling the motors.  When I run them fast it "pops a wheelie".  When I back off, it settles back down a bit.  When I rev the motors again it somersaults.  If I did the same thing on dry land, it wouldn't even pop a wheelie, much less somersault.)

##### DrakerDG 09/15/2021 21:46:17
Hello, in some occasions it has happened to me that my robot does strange things in relation to physics. I recently solved a case by reducing the basicTimeStep.
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/887816619739455528/unknown.png)
%end

##### Luftwaffel [Moderator] 09/15/2021 23:04:39
Perhaps the robot is too light and the water creates too much buoyancy

##### Justin Fisher [Moderator] 09/16/2021 01:42:56
All the parts are somewhat denser than water (except the head, which is very light, but also can't submerge in that shallow water).  I'm not sure how much denser than water would be ideal.  Intuitively, it seems like a buoyant robot's wheels wouldn't get very good contact with the seafloor, so shouldn't provide very much thrust.  So I'd actually worried that the problem might be that it was too heavy, rather than too light.  But none of this feels intuitive to me.



It seems like part of what is happening is that, as the robot starts doing the wheelie, that shifts more weight onto the rear tires, and the motors trying to spin those tires end up, via Newton's equal-and-opposite-reaction, spinning the robot's body up even more; and as those tires roll forward along the seafloor, and as the undercarriage feels drag from the water, that makes the problem even worse.  But, on the flip side (literally), it seems like the front wheels should have the same sort of Newtonian reaction helping to shift more of the vehicle's weight onto them, so I still haven't wrapped my head around where the asymmetry would come from that makes it flip backwards rather than forwards.  I guess the drag from the water provides a source of asymmetry, though this happens in such shallow water that it doesn't seem like it could be much (e.g. the second video above).


So this test confirms that what causes the wheelies isn't the direction of the seafloor slope, nor partial submersion of the robot body.  (I'm alternating between turning the wheels forward and backwards, and whichever way I go, it does a wheelie).
> **Attachment**: [robot\_somersaulting\_almost.mp4](https://cdn.discordapp.com/attachments/565154703139405824/887881367973675058/robot_somersaulting_almost.mp4)


(Though I'd forgotten that I set the density on that big "puck" body quite low (half of water), so buoyancy may have been more of an issue there.  When I make it twice the density of water, it still wheelies some, but a lot less, especially in the backwards direction, regardless of seafloor slope, which suggests that bumper and/or head are playing some role.)

##### Jan Weber 09/16/2021 07:34:41
Today I can reach the website again. Thank you!

##### Rodrigo\_03 09/16/2021 13:50:26
Hello, I am new to webots and am currently having some difficulties with a robot I'm creating with a friend. He was supposed to locate the pipe, get close to it and grab it with the claw. When we first tried, he was passing through the pipe, so we added a physics node, but then he started behaving weirdly and I don't know why or how to solve it. Could someone give me a hand with it?


here a video showing the problem
> **Attachment**: [claw.mp4](https://cdn.discordapp.com/attachments/565154703139405824/888059317457141780/claw.mp4)

##### DDaniel [Cyberbotics] 09/16/2021 16:17:10
`@Rodrigo_03` hard to say, can you share the file of your world/proto?


The gripper is on a sliderjoint?

##### Rodrigo\_03 09/16/2021 21:00:32
is it this file?
> **Attachment**: [empty.wbt](https://cdn.discordapp.com/attachments/565154703139405824/888167497038176336/empty.wbt)


its on a hingejoint

##### Roel 09/17/2021 08:43:14
I am having some issues importing the numpy module
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/888344333986701322/unknown.png)
%end

##### Darko Lukić [Cyberbotics] 09/17/2021 08:48:38
Do you have numpy installed?

```
python3.9 -m pip install numpy
```

##### Roel 09/17/2021 08:52:33
Thanks, that helped me!

##### kid07 09/17/2021 11:51:09
Hi, im trying to get my robot to turn in the shape of a square, but it just drives straight into the wall. Ive written a bunch of functions that seems to work (no errors are displaying when i compile the code inC). Pleasehelp. file attached below


the controller is named PID\_control1
> **Attachment**: [PT2.zip](https://cdn.discordapp.com/attachments/565154703139405824/888391778359721994/PT2.zip)

##### DDaniel [Cyberbotics] 09/17/2021 11:57:02
`@kid07` you haven't provided any `PID_control1` controller. The world file says the controller is `Heading11` (which also doesn't exist), by using instead the controller `Heading` (which exists), the robot does the job

##### kid07 09/17/2021 12:02:58
for the heading code, I didnt use any distance sensors but i have used it in the PID\_control1. can i send this code file separately ? im not sure  why its named something different on your side.

##### DDaniel [Cyberbotics] 09/17/2021 12:03:25
`@Rodrigo_03` Some of the intermediary solids between the base and the gripper appear to be missing a `Physics` node. Also,  when you add a physics node, make sure the masses are realistic. By default Webots uses a density of `1000 kg/m^3`, perhaps it is better for you to set the masses yourself to something realistic (if you wish to set the mass, you must set `density` to `-1`)


Webots will look for the controllers in the `controllers` folder (in a subfolder that must have the same name of the controller itself) and like I said the controller being loaded in the world file is `Heading11`, are you use your robot is actually using the PID controller and not something else?

##### kid07 09/17/2021 12:07:42
it definitely is using PID\_control1
%figure
![webotPic.JPG](https://cdn.discordapp.com/attachments/565154703139405824/888395792161849364/webotPic.JPG)
%end

##### DDaniel [Cyberbotics] 09/17/2021 12:10:03
indeed, can you post the file of this controller?

##### kid07 09/17/2021 12:11:06
here it is
> **Attachment**: [PID\_control1.c](https://cdn.discordapp.com/attachments/565154703139405824/888396646554152980/PID_control1.c)

##### DDaniel [Cyberbotics] 09/17/2021 12:17:51
it doesn't compile (should be `#include <webots/motor.h>` instead of `#include <webots/Motor.h>`), but even after fixing this I get an error because your robot doesn't appear to have any distance sensor (or at least none is specified in the world you sent). Again I have the suspicion your file hierarchy is messed up, did you send the right project?

##### kid07 09/17/2021 12:32:26
`@DDaniel` i have included the sharp distance sensor over here
%figure
![webotPic.JPG](https://cdn.discordapp.com/attachments/565154703139405824/888402016072794112/webotPic.JPG)
%end

##### DDaniel [Cyberbotics] 09/17/2021 12:36:38
Yes, but it's pointless to try to debug something if we have 2 different things 😄 can you save your world and provide the correct zip?

##### kid07 09/17/2021 12:37:46
and on line 92 ive assigned it to the variable DS. let me resend the zip with just the PID\_control1 controller



> **Attachment**: [PT2\_2.zip](https://cdn.discordapp.com/attachments/565154703139405824/888403738048491550/PT2_2.zip)

##### Nexos 09/17/2021 12:40:14
Is anyone experiencing a DLL library error in Windows after updating to 2021b?

##### DDaniel [Cyberbotics] 09/17/2021 12:49:19
Your `Turning` function appears to give the same command to the motors irrespective of the case since `speed_modifier` is by necessity positive due to the `abs()`. As such, the robot can only go forward.

##### Nexos 09/17/2021 12:59:17

%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/888408772333166652/unknown.png)
%end


But I have that file 🤨
%figure
![Immagine.jpg](https://cdn.discordapp.com/attachments/565154703139405824/888409240698495006/Immagine.jpg)
%end

##### kid07 09/17/2021 13:01:42
Ok I see , but when I remove the absolute , the robot doesn’t move at all

##### DDaniel [Cyberbotics] 09/17/2021 13:06:48
because you're giving the same command to the left and right wheels, they need to be different for the robot to turn (as is done in the `Heading` controller for instance)

##### Nexos 09/17/2021 13:15:55
I reverted back to 2021a and I'm having no more problems, but of course this is not a good long-term solution


I'm open to suggestions

##### kid07 09/17/2021 13:30:16
Thank you sm! It works 😁

##### h3ndrk 09/17/2021 15:02:16
Hello World, we're currently trying to send a flag type information from a supervisor to other robot controllers in the simulated world. What is the canonical way to do that in Webots? We have some sensors (currently a keyboard, we could add a touchsensor to emulate a button press), is there a way to send values from a supervisor? We also thought about using the custom data of the robots but that seems like a hack... Any ideas? Thanks!

##### DDaniel [Cyberbotics] 09/17/2021 15:08:28
`@h3ndrk` the classic method for communicating between robots is to rely on emitters/receivers [https://www.cyberbotics.com/doc/reference/emitter](https://www.cyberbotics.com/doc/reference/emitter)

##### h3ndrk 09/17/2021 15:10:08
Thanks for the quick answer, we will look into that. 👍

##### DrakerDG 09/17/2021 18:18:26
Hi <@239507682111913984>, I checked your code in Python and I really liked it.  Thank you again for the time you have dedicated.  I'm still learning Python and your work has convinced me even more to start using it.  I am from the old school (generation X), so from the beginning I have worked with languages ​​even older than c, but I have not lost the thirst to learn and I stay in that direction.  Thanks😁 👍

##### ykopoblete 09/17/2021 19:51:51
somebody can help me with an error installing ros2?

##### Darko Lukić [Cyberbotics] 09/17/2021 20:25:21
ROS 2 or webots\_ros2?

##### ykopoblete 09/17/2021 20:27:38
ROS 2 first. It seems to be a problem with the pyqt5 installation because I already have it but in other folder under anaconda3


so I don't know how to change the path or install it in the folder it needs to be installed

##### Darko Lukić [Cyberbotics] 09/17/2021 20:33:47
You have to delete everything conda related from bashrc

##### ykopoblete 09/17/2021 20:38:00
done. But now how do I reinstall pyqt5 in another path? It's still in anaconda3 folder


I have this error now:


[connext\_cmake\_module] Warning: The location at which Connext was found when the workspace was built [[/Applications/rti\_connext\_dds-5.3.1]] does not point to a valid directory, and the NDDSHOME environment variable has not been set. Support for Connext will not be available.

(eval):46: command not found: complete

##### Dmitriy Ogureckiy 09/18/2021 16:28:13
Do enybody know, does joint torque sensor exist in Webots? I know that there is Touch sensor, but it can only measure force.

##### Luftwaffel [Moderator] 09/18/2021 20:35:12
`@Dmitriy Ogureckiy` motors can give you torque feedback

##### Dmitriy Ogureckiy 09/18/2021 20:38:46
thanks, are there flexible joints linkage of the robot?

##### Luftwaffel [Moderator] 09/18/2021 20:39:49
what do you mean by flexible joints linkage? Like a ball joint? that would be hinge2joint, basically a joint with 2 axis, allowing for free rotation

##### Dmitriy Ogureckiy 09/18/2021 20:41:33
Is it possible to make the joints linkage of the robot bend under the load?

##### Luftwaffel [Moderator] 09/18/2021 20:41:48
no, only rigid bodies


wait, do you mean the joint rotates under force, or do you mean the link bends?

##### Dmitriy Ogureckiy 09/18/2021 20:43:00
The second


maybe there is some way to do it?

##### Luftwaffel [Moderator] 09/18/2021 20:43:12
the second is not possible


in pretty much no robotic simulator. That is FEM analysis


usually does not really work in real time

##### Dmitriy Ogureckiy 09/18/2021 20:44:52
is it very difficult to add by code ?

##### Luftwaffel [Moderator] 09/18/2021 20:45:21
What exactly do you want to achieve / simulate in your project?

##### Dmitriy Ogureckiy 09/18/2021 20:45:57
I want simulate robot with flexible link

##### Luftwaffel [Moderator] 09/18/2021 20:46:20
Screenshot / example?

##### Dmitriy Ogureckiy 09/18/2021 20:46:29
Thats will be bend under big acelerate


[https://lh4.googleusercontent.com/proxy/Te7ZYlFnNF7r86zzTxXlvZgx3rSmK4W1NDulM--3qY3-MoRO3W3chE\_BvBPXPNavWt2MPfZOoIvUrXsvI85KWN\_rm\_v\_ctVkHpfxwQeKRWF\_bYLO\_9Lk](https://lh4.googleusercontent.com/proxy/Te7ZYlFnNF7r86zzTxXlvZgx3rSmK4W1NDulM--3qY3-MoRO3W3chE_BvBPXPNavWt2MPfZOoIvUrXsvI85KWN_rm_v_ctVkHpfxwQeKRWF_bYLO_9Lk)

##### Luftwaffel [Moderator] 09/18/2021 20:48:10
you could approximate it, by constructing the links out of a chain of hinge2joints (bending in 2 axis) or hingejoints (only bending in one axis)


[https://cyberbotics.com/doc/reference/hingejointparameters?tab-language=python](https://cyberbotics.com/doc/reference/hingejointparameters?tab-language=python)


you can play with the spring constants and dampeners


When you do that, I would recommend giving the first JointParameters a "DEF" and "USE" it for the rest, so you can iterate by changing the value of one node

##### Dmitriy Ogureckiy 09/18/2021 20:51:48
It seems very difficalt and it is not clear how to verify such a model with a real object

##### Luftwaffel [Moderator] 09/18/2021 20:52:42
This is not really something you can easily simulate in a rigid body simulation. You have to do slow FEM analysis for that. Whole different type of simulation and program

##### Dmitriy Ogureckiy 09/18/2021 20:53:17
Maybe in Gazebo I can do this

##### Luftwaffel [Moderator] 09/18/2021 20:53:22
nope


Maybe PyBullet with SoftBodies


but it will never be easy to verify. FEM is really the only way if you want good data

##### Dmitriy Ogureckiy 09/18/2021 20:54:38
but this is very important when driving in the case of a longer throw, for example


Or Atlas robot has flexible legs and it important for walking algorithm

##### Luftwaffel [Moderator] 09/18/2021 20:56:01
chain of springy joints is your best bet


Or you try PyBullet, but it is not as user friendly, especially for beginners

##### Dmitriy Ogureckiy 09/18/2021 21:03:55
Pybullet can be combined with webots?

##### Luftwaffel [Moderator] 09/18/2021 21:04:04
no

##### Dmitriy Ogureckiy 09/21/2021 19:52:18
Hi, can I change some equation in open dynamics engine or at least view it's ordinary differential equations under the hood ?

I found such directory, but there only header files.
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/889962261744078868/unknown.png)
%end

##### lanzcc 09/21/2021 22:23:28
hello, I'm deciding whether or not to use webots in a beginner's programming course. The course will use Python, and of course the webots docs say the the relevant objects "can be programmed in Python", but that doesn't tell me enough to decide. Can anyone point me to some actual Python code that would be of the sort - or that would at least be an expansion upon the sort that beginners would write? Or perhaps there is an extant world that expects simple programming I could see to do the controlling? Thanks!

##### Rodrigo\_03 09/21/2021 23:10:08
It worked, thanks a lot!

##### DDaniel [Cyberbotics] 09/22/2021 05:51:47
The vast majority of existing sample programs (`File > open sample worlds`) use C as the language of the controllers however interfaces of all functions of the API are also available in Python, C++, Java, MATLAB so everything can be done in any of these languages equally (under `file > open sample world > languages` there's a simple example in each language). The corresponding API is documented in all languages as well (example [https://www.cyberbotics.com/doc/reference/robot#wb\_robot\_step](https://www.cyberbotics.com/doc/reference/robot#wb_robot_step))



If however you aim for challenge oriented tasks then perhaps [https://robotbenchmark.net/](https://robotbenchmark.net/) might be more suited (the same tasks are also available in the desktop version of webots in the `samples` I mentioned before)

##### Olivier Michel [Cyberbotics] 09/22/2021 06:37:39
The source code is here: [https://github.com/cyberbotics/webots/tree/master/src/ode](https://github.com/cyberbotics/webots/tree/master/src/ode)

##### Justin Fisher [Moderator] 09/22/2021 07:55:41
I teach a cognitive science course for (roughly) 3rd-year university students with a variety of programming backgrounds, which for many is basically no background, using Webots and having them write their code in Python.  However, I did a *lot* of work to make things very user-friendly for them, including hiding most of the Webots API behind functionality of my own that gives them just the options I want them to have, and no more, and giving them a ton of well-documented sample code.  For me this was taking a course that had been taught with physical Lego Mindstorms robots, and figuring out how to do something that was pretty much equivalent using Webots during the pandemic.  The course works pretty well, though I certainly do end up spending a lot of time helping the novices figure out how to do the coding (a bit more than I did with Lego mindstorms, but not that much more).  So my answer would be that you *can* do this -- I did! -- but getting it to go well may require more work than other options you have available.



Another issue you may run into is that, if you're expecting students to run this on their own computers, many student laptops aren't quite powerful enough to run Webots as well as would be ideal (though this may depend somewhat on the complexity of the simulations you want them to run).  I managed that, barely, last year, having the students work in groups, with each group having at least one (usually exactly one) student with a powerful-enough computer.  This year, I talked the guys who run my university's high-performance-computing cluster into letting my students run webots on virtual machines there, which still isn't perfect (since the virtual machines simulate a graphics card rather poorly) but it does ensure that everyone with a fast internet connection will be able to run Webots quickly enough.


:

**And a question of my own:  can someone help me wrap my head around how joint positions work?**
> **Attachment**: [antbot\_with\_joints\_invisibly\_changing.mp4](https://cdn.discordapp.com/attachments/565154703139405824/890145553508343858/antbot_with_joints_invisibly_changing.mp4)


In the very exciting video above, this ant-shaped robot is spinning its wheels driving into the side of that crate, with something very close to net-zero motion.  The three segments of the ant's body are connected by passive ball joints with springs that should be pulling them back to position 0, which would put the ant's body in a straight line.  However, as it sits there not visibly changing at all, the positions on the three axes of each ball joints *are* continually changing, gradually building up until one of them actually far exceeds the maxStop limit that was set for it.  (When it gets 10% beyond that threshold, I have a supervisor controller manually set it back to just within threshold, which is when the robot jerks a tiny bit.)  **How can it be that the positions for the joints are changing when there is no physical bending visible at the joints in the model?  And why is it that the joints can go beyond the hard limits set by minStop and maxStop?**


(If it matters, the balljoint axes are perpendicular.  Changing positions on the first axis bends the ant left/right.  Changing positions on the second axis arches it up/down.  Changing the positions on the third axis twists the segment around its "spine", or rather where you'd expect its spine to be if ants weren't invertebrates!)

##### Olivier Michel [Cyberbotics] 09/22/2021 08:28:09
Could you simplify this simulation and create something with a single ball joint on which you can manually apply torques/forces from the graphical user interface to actually debug it and understand how/why it goes beyond the max/minStop limits. If on such a simple example, you notice a problem, it would easier to understand what's wrong and eventually report a bug if needed.

##### Justin Fisher [Moderator] 09/22/2021 08:42:47
It seems like I must be misunderstanding something about joint position.  I'm getting different joint position readings in cases (like this video) where there is no visible change in the joint.  So, either joint position (as indicated by the position field in the scene tree or reading a PositionSensor device on the joint) isn't just a measure of an actual angle between the source and endpoint of the joint in the simulation, or there must be some way that I haven't wrapped my head around yet that multiple different combinations of position numbers for the three axes result in the very same physical position+rotation for the endpoint.  I know that 4D euler rotations do allow that sort of multiple-representations-of-each-rotation sort of thing, but hadn't thought that was possible for 3D ball joints.  If it *is* possible for balljoints, then it could be that everything's working as designed here, with it not having actually exceeded the hard limits of the joint, and just having displayed a set of position numbers that look out-of-bounds but are physically equivalent to a set of numbers that actually is in bounds.  (I do know from other cases that these joints can truly go far outside their specified hard limits, but in those cases the joint is visibly bent far out of position and the springs usually make them writhe around like they're being tortured, none of which is happening in this case, which is what made me think this case might actually be working fine and might just be poorly understood by me.)


Another piece of evidence is that if you use the mouse-drag interface to move a robot with such joints that has been running awhile in the simulation, as soon as it starts dragging, the joints instantly jump to positions that seem more like what I'd expect from the positionSensor readings.  Similarly, if you go into the scene tree and make a miniscule modification to a joint position that has been running awhile, the joint immediately jumps much further than that miniscule change should have caused, to a position that looks much more like I would have expected that position to look like.  So that makes me think that the "positions" that the positionSensors and scene tree are showing aren't really the current angle between the anchoring solid and the endpoint of the joint, and instead must be some other number.  And if you get it to interpret that other number as a joint angle, e.g. by mouse-dragging the robot or making a change in the scene tree, that makes the joint jump to a new angle because the number it had been displaying as the "position" wasn't the actual current angle.  So I was trying to understand what that other number was, and what its relation was to the actual angles?


I'm also curious whether there's a good way for me to get the actual angles, since joints' PositionSensors aren't doing that?  I guess I can use a supervisor to getPosition and getOrientation and compute them manually.

##### Olivier Michel [Cyberbotics] 09/22/2021 09:19:27
Yes, the supervisior option seems to be the best.

##### Justin Fisher [Moderator] 09/22/2021 09:21:45
Too much math for me to do at this hour 🙂  Will come back to it later


So it looks like another potential answer is to use the translation and rotation fields of the joint's endPoint.  As far as I can tell so far, those seem accurate even when the joint's position sensor and the scene tree's display of joint position is not.



So it seems like most of this is just a bug in the position sensor/scenetree readings, displaying a number that isn't an accurate current depiction of the joint's angle, and which if you enter as the angle for the joint would move it to a different angle from its current one.  As far as I can tell, this bug usually doesn't seem to make much difference to how the simulation itself plays out -- everything visibly appears pretty much the way it should, aside from the position readings.  Probably it's the endPoint's translation+rotation fields that are actually responsible for where the endpoint appears in the simulation, and not this mistaken joint position field.  So it looks like the right numbers are probably employed in calculating the simulation, and its just exporting some wrong number for position readings.



There is also another bug -- not sure whether it ultimately stems from the same cause as this one -- where spring-joints sometimes actually do escape their hard limits (both visibly and in their positionSensor readings) after which the spring behaves very violently.  I've seen that happen many times, but don't have a consistent simple way to reproduce it yet.  If I get one, I'll post a bug report for it.  Given that we know there's a nearby bug involving generating mistaken position readings, Ockham's Razor might suggest that a mistaken position reading is also being used in comparisons for the joints' hard limits, which might be what lets joints escape their limits.


(I had hoped to work around the escaping-their-limits bug by having a supervisor watch to see when joint positions escaped the limits and manually force them back within bounds, but that's when I discovered that the joint position readings weren't accurate, and hence don't seem to be a good indicator of when the joint actually has escaped its limits.)

##### Ayk 09/22/2021 11:31:45
Hey I have a different problem:

I want to change the initial position of my robot (NAO). So i looked into the PROTO file and found RShoulderPitch, where I want to change the initial Rotation. I tried using the position and position2 property of Hinge2Joint, but it doesn't change anything. Any idea what I did wrong ?

##### Stefania Pedrazzi [Cyberbotics] 09/22/2021 14:12:33
It is not enough to change the `position` and `position2` values in the PROTO file, but you should also update the `endPoint` `Solid` translation and rotation accordingly.

The computation of the new `endPoint` node `translation` and `rotation` is performed automatically when changing the joint position from the Webots scene tree. So you could easily take the correct `translation` and `rotation` value from there.

##### Ayk 09/22/2021 15:22:39
Ok thank you

##### Justin Fisher [Moderator] 09/22/2021 19:48:33
It looks like you get slightly faulty joint position readings even from simple 1D hingeJoints without any springs.  At any rate, I can (1) take a robot with 4+ wheels whose rotation is visibly apparent due to being wrapped with a rubber tire image, (2)  drive that robot around using varying motor setvelocity commands with motor position set to infinite, so the wheels will have experienced unequal friction forces from terrain, (3) pause the simulation, (4) go into the scene tree and change the position field of a wheel's hingeJoint by adding a trailing zero after the decimal point, which shouldn't make any mathematical difference, but (5) once that "new" number, identical to the old number, is entered into the scene tree, that will sometimes make the wheel visibly jump to a new rotation.  This suggests that the joint position displayed in the scene tree is not quite equivalent to the actual current rotation of the wheel.  Some of these differences seem large enough that I don't think they can be just due to floating point rounding errors.  And the differences get much more pronounced with ball/hinge2 joints with springs attached.

##### Gustavo Cruz 09/22/2021 21:26:19
Hi!



I am building a world for my line following robot. I decided to place some objects to make the world look like a city. The problem is that when I start the simulation an error appears saying that "The current physics step could not be computed correctly. Your world may be too complex".



I have already excluded the collision (boundingObject) of the city objects to try to make the simulation less complex, but the problem remains.



Does anyone know if there is a way to solve this problem without me needing to delete the objects?



Thanks for listening.
%figure
![Problema_World.PNG](https://cdn.discordapp.com/attachments/565154703139405824/890348311469510676/Problema_World.PNG)
%end

##### DDaniel [Cyberbotics] 09/22/2021 21:27:15
Have you tried lowering the time step? (`worldinfo node > basicTimeStep`)

##### Gustavo Cruz 09/22/2021 21:37:13
I lowered basicTimeStep to 16, 8 and 4 but the problem remains.

##### Justin Fisher [Moderator] 09/22/2021 22:15:16
Usually when I get that error, I have objects that are colliding rather severely.  You might try making sure that your robot is above the ground not overlapping significantly with it, and you might try checking whether the robot's mass is so heavy that it keeps sinking far into the ground.  Also, you should probably make sure that other objects in the simulation don't have physics nodes, unless you want them to move around as the simulation runs.  E.g. if one of your buildings is heavy and has a physics node, then it might be generating that error message as it collides severely with the ground.  (You said you removed boundingObjects but I'm not sure that works to remove them from the list of things that will be moved in the simulation, so I'd say be sure to remove the Physics nodes too.)

##### Gustavo Cruz 09/22/2021 22:25:08
I excluded all objects from the city and the vehicle simulation did not show any errors.



The problem is with the objects in the city, but I don't know why. None of the objects have physics.



When I delete the boundingObject from the objects, can there still be some kind of collision error?


I managed to solve the problem! The problem was with the objects of type Floor, I hadn't converted them to Base Node to exclude the boundingObject. Thank you so much Justin Fisher and Daniel Dias for their help.

##### Justin Fisher [Moderator] 09/23/2021 01:17:45
I'm puzzled by ballJoint axis declaration.  As far as I can tell, the axis that you specify under JointParameters3 is the axis around which the endpoint will rotate when you alter the position of that same joint parameter, which is pretty intuitive.   However, the axis that you specify under JointParameters2 is in fact the axis around which the endpoint will rotate when you alter the position in the *first* joint parameters field (simply called JointParameters).  And adjusting the position field under JointParameters2 makes the endpoint rotate around an axis that is perpendicular to the other two axes.  This mapping of parameter fields to axes seems quite unintuitive and doesn't seem to be what the documentation says would happen ("the third axis is computed automatically to be perpendicular to the two first one [sic]").  Is that just how it is, or am I misunderstanding something?


(Perhaps the documentation should say that the two explicitly given axes will be the ones around which the first and third degrees of freedom of the joint will rotate, respectively, and the joint's second degree of freedom will rotate around an axis that is perpendicular to the two explicitly given axes?  That would fit how it currently seems to work.)


Also, does anyone know how Webots computes the perpendicular axis?  Just with a cross product?  (Since joints' .position fields currently give false readings, I'm trying to figure out how to get a supervisor to compute what their correct readings would be.)

##### DrakerDG 09/23/2021 05:22:38
Hello everybody, I have a question about how I can use de setLabel Supervisor function in Python.  In c code I don't have problems but recently I try in Python but I can't make It worked. I understand that I need declare something before but I don't know that.

I would greatly appreciate your help.
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/890468177329389578/unknown.png)
%end

##### Justin Fisher [Moderator] 09/23/2021 05:35:31
I PM'ed you a copy of the little python utility I made to make it a lot easier to handle labels in Webots.  It should give you an example to learn from, or feel free to make use of it if you want

##### DrakerDG 09/23/2021 05:36:43
Excellent! Thanks! 😁 👍

##### kid07 09/23/2021 06:18:34
Hi, please can someone help. I’ve created a robot and I’d like it to move in the form of a square around the arena. Currently my code works but my robot doesn’t move in a square it moves in circles. Ive coded in C
> **Attachment**: [PID\_control1.c](https://cdn.discordapp.com/attachments/565154703139405824/890482255334625320/PID_control1.c)


This is my arena
%figure
![image0.jpg](https://cdn.discordapp.com/attachments/565154703139405824/890482797326790696/image0.jpg)
%end

##### DrakerDG 09/23/2021 07:02:55
If only use directly the function, without of class, is possible? I can't find an example to understand, sorry and thanks in advance!

##### Justin Fisher [Moderator] 09/23/2021 07:03:30
I'll PM you

##### Noor 09/23/2021 08:35:08
can somebody help me resolve this
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/890516623612579851/unknown.png)
%end

##### Justin Fisher [Moderator] 09/23/2021 09:07:33
I struggled a lot to get Python imports working in Webots too.  The key is probably to add a `runtime.ini` file to the folder that contains your controller.  Here's an example:

```; typical runtime.ini

[environment variables with paths]
PYTHONPATH = $(PYTHONPATH):../../libraries:../../libraries/robot\_parts
```



This lets my controller import anything that I put in the `libraries` folder that is sibling to the controllers folder, or in its `robot_parts` subfolder.  Of course if the destination you're trying to import from is different, you may need something different in your `runtime.ini`, or you could probably modify you system path to make it available all the time.



It's possible that you may also need a perhaps-empty text file called `__init__.py` in any folder that you want to import from, to convince python that this is a place where importable modules might live.

##### BobS 09/23/2021 15:04:50
Hi, I'm getting this error constantly. On the internet, and as far as I've seen here, almost all DLL load fails are about not finding a module, rather than the file not being accessed. The ways to fix those did not work for me (stuff with PATH), do you know how this can be fixed?
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/890614694161834064/unknown.png)
%end

##### Justin Fisher [Moderator] 09/24/2021 02:07:45
It seems a bit odd that it's looking for python37, when I think the most recent version of Webots stuff for python is python39.  Is there a chance that something you're using is out of date?

##### BobS 09/24/2021 07:53:29
I used python37 and webots R2020b because the example to set the project up used those


After switching to R2021b and python 3.9 I get this error
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/890868753468915712/unknown.png)
%end

##### Noor 09/24/2021 14:27:48
Can i get a detailed documentation on gait manager and vision manger? preferably explain with python

##### mAxYoLo01 09/24/2021 17:45:34
Hi, I created a PROTO with a custom shape that is imported from a .stl into a mesh. The solid is well created with the good geometry, but I would like to map a .png texture to it, and I have had problems finding out how to do it.


Here is an image of the .stl
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/891017610903322624/unknown.png)
%end


And the texture I would like to map:
%figure
![echantillon.PNG](https://cdn.discordapp.com/attachments/565154703139405824/891017763135553597/echantillon.PNG)
%end


Here is the current PROTO file:
> **Attachment**: [Echantillon.proto](https://cdn.discordapp.com/attachments/565154703139405824/891017904890466314/Echantillon.proto)


If there is a better way to be able to add texture onto an external object, please tell me how it could be done, thanks!

##### Justin Fisher [Moderator] 09/24/2021 19:14:10
The deprecation warnings there aren't serious.  (Webots changed from using a variety of different commands like getMotor and getDistanceSensor to have the controller gain access to different devices to using a single one-size-fits-all getDevice command instead, but the old commands still do work, for now.  And it warns you that old protos may need to update the addresses for the textures, since many of those are now kept in the cloud to keep the download size of Webots small).



The only thing that looks really worrisome is the failure to load error.  It looks like this may have to do with a robot window, which is the window you can open up by double-clicking on the robot, and by default would appear left of your simulation if open (NOT the scene tree viewer).  For most purposes, you don't need this (though a few robots do have custom windows defined for them.)  So one thing you might check is whether your robot window is open, and if so close it, and see if that helps.



Otherwise, my debug process would probably be to start simple and see if I can get some minimal working example, and then incrementally add bits to it until I discover which one causes the error, which then would at least help pinpoint the cause of the problem, which then might hopefully help find a solution.  Can be tedious...  Sorry not to know more!  (BTW: I'm just a community member, so it's possible that other people like the Webots devs would have a better idea.)


If you want to specify how your colored texture maps onto the your geometry (e.g. to say which vertices will draw their color from which parts of your texture map, and then it will automatically interpolate for all the in-between points) you'll probably need to use a TextureCoordinate node to specify that.  [https://cyberbotics.com/doc/reference/texturecoordinate](https://cyberbotics.com/doc/reference/texturecoordinate)

##### mAxYoLo01 09/24/2021 19:26:41
I believe that TextureCoordinate cannot be used for a Mesh geometry, I wasn't able to find the link between them :/

##### Justin Fisher [Moderator] 09/24/2021 19:33:12
Short answer is I don't know because I haven't done much with imported geometries.  I'm not sure if it is supposed to import the texturemap alongside the imported geometry (in which case you'd probably need to ensure that whatever you used to export the geometry, e.g. blender, is exporting the texturemap too), or if you need to specify the texturemap separately, in which case something like a TextureCoordinate node is what you'd want.  I'd suggest finding a proto that does what you're trying to do, and use it as a model.  (E.g. there's a rubber ducky proto and a blender monkey proto that both do something in this ballpark, IIRC, but perhaps not quite what you want.)


Another small suggestion might be that there's probably little advantage to developing this as a proto, rather than just trying to build something in the scene tree that looks right, which can later easily be turned into a proto if you want.  I think the main advantages of protos are just that it makes it a bit easier to re-use them, that you can hide a lot of internal settings to expose just the parameters of variation that you want people to use, and you can write scripts to flexibly alter the contents of the proto.  But if you aren't using any of that stuff, may be easier to just work on building a single working example in the scene tree, and make it a proto later.


(You can right click on a proto in the scene tree to convert it to base nodes, and vice versa...)

##### mAxYoLo01 09/24/2021 22:24:19
Ok I managed to do what I wanted using Blender. In fact, the .obj exportation has all the data needed for UV mapping! Thanks for your help anyways!

##### smasud98 09/24/2021 23:38:55
Hi everyone, I'm a noob to Webots and have a question. Does anyone here know how the Supervisor robot can communicate/send info to another robot controller. I am using my supervisor to track everything in the environment and at times, I need my supervisor to tell the robot controller to do certain things.

##### Luftwaffel [Moderator] 09/24/2021 23:40:14
`@smasud98` does the supervisor HAVE to be a seperate controller? You could just make the robot the supervisor. All robot controller functionality will work the same

##### Justin Fisher [Moderator] 09/25/2021 00:54:25
Aside from Simon's good suggestion of (0) making the supervisor be the same robot as the other robot, you can also have robots communicate (1) via webots emitter/receiver devices, or (2) by having a supervisor change a field that the other robot has access to, like the customdata field of a robot.

##### smasud98 09/25/2021 04:30:36
Thanks <@239507682111913984> and `@Justin Fisher`.

##### 한정훈 09/25/2021 06:53:46
This is the first time I've encountered a simulation called webot, and I'm using it really well. I'm very satisfied and there's one problem with using it.

I made a stadium like the picture below, but when the robot goes up, it often turns upside down. Also, this problem appears in the console window.



[WARNING: The current physics step could not be computed correctly. Your world may be too complex. If this problem persists, try simplifying your bounding object(s), reducing the number of joints, or reducing WorldInfo.basicTimeStep.]



I really need this stadium and this is an obj file made using TinkerCad. A solution is very urgent. Please help me. Please...



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/891215943890522132/unknown.png)
%end

##### DrakerDG 09/25/2021 06:56:35
Hello! Try reducing WorldInfo.basicTimeStep from 32 to 16 for example



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/891217432369319936/unknown.png)
%end

##### 한정훈 09/25/2021 07:00:37
Oh, I saw you a lot on YouTube videos related to webot. I changed it as you said, but the robot seems to have been turned over again. Is there an option to set up a separate stadium?



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/891217680244293693/unknown.png)
%end

##### DrakerDG 09/25/2021 07:05:56
Is the same robot behavior in all surfaces?

##### 한정훈 09/25/2021 07:07:06
No, it's only in the part where it protrudes 2cm. Line racing is working well. There is an error only in the picture below.



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/891219326185664552/unknown.png)
%end

##### DrakerDG 09/25/2021 07:09:44
Maybe you need simplifying the bounding object platform


Apparently it is a problem of collision between the contact of the robot and the surface of the platform

##### 한정훈 09/25/2021 07:11:53
This is the boundary of the stadium. It looks complicated, but I don't know how to simplify it. Can you tell me how to do it?



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/891220507582677002/unknown.png)
%end

##### DrakerDG 09/25/2021 07:15:11
When you import 3D object dont select use as bounding object, you need made the bounding object in Webots using basic shapes like cylinders and boxes

##### 한정훈 09/25/2021 07:17:55
Are you talking about this? When creating an object, I set the boundary part of the 3D model by pressing the check box. But the robot is going up and flipping over.
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/891221964738416640/unknown.png)
%end

##### DrakerDG 09/25/2021 07:19:15
Don't use the last option, uncheck please


You put every shape thru a transform in one group

##### 한정훈 09/25/2021 07:27:12
We are making boundaries by referring to your words. But how do you rotate that boundary?
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/891224299283816448/unknown.png)
%end

##### DrakerDG 09/25/2021 07:29:17
First you need  add a group node


In  group.children you add a transformer node. In the transformer.children you put a shape


You can define the form of the shape like you need and in transform node you can change position and angle of the shape



%figure
![Screenshot_2021-09-25-01-27-29-049.jpg](https://cdn.discordapp.com/attachments/565154703139405824/891225789419376671/Screenshot_2021-09-25-01-27-29-049.jpg)
%end

##### 한정훈 09/25/2021 07:33:19
Like this?
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/891225842636718100/unknown.png)
%end

##### DrakerDG 09/25/2021 07:35:02
Yes, but in solid.boundingObject


Before you transform you need a group node


This is a complex robot with a simple bounding objects like a boxes and cylinders

##### 한정훈 09/25/2021 07:37:48
Like this????
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/891226966819241984/unknown.png)
%end

##### DrakerDG 09/25/2021 07:38:59
The group is ok, but you need put before the shape a transformer node.  Just in group.children


boundingObject.children

        group.children

                 transform.children

                          shape


You need little boxes to make your ramps too

##### 한정훈 09/25/2021 07:45:07
Thank you so much for your kind explanation, but I'm so sad that I don't understand this.


I can't find children in BoundingObject.
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/891229105088004096/unknown.png)
%end

##### DrakerDG 09/25/2021 07:46:22
Is ok, don't worries


You add a group first

##### 한정훈 09/25/2021 07:49:24

%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/891229888432967680/unknown.png)
%end

##### DrakerDG 09/25/2021 07:50:16
Before that put the shape, you need put the transform node

##### 한정훈 09/25/2021 07:50:20
I can't find the transform.


ohhhhhhh


i find

##### DrakerDG 09/25/2021 07:51:05
You need select the group.children and add the transform

##### 한정훈 09/25/2021 07:52:09
like this?!
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/891230579293560863/unknown.png)
%end

##### DrakerDG 09/25/2021 07:52:49
Yes!

##### 한정훈 09/25/2021 07:53:32
I want to rotate the cylindrical boundary object 90 degrees. Is there any way?

##### DrakerDG 09/25/2021 07:54:20
You can rotate the shape thru transform.rotation

##### 한정훈 09/25/2021 07:56:42
Thank you! I designated the floor of the stadium. How can you specify a slope and a high cylinder?
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/891231725307453450/unknown.png)
%end

##### DrakerDG 09/25/2021 07:58:45
only you need put the dimensions that you need in every shape


Every shape in one different transform

##### 한정훈 09/25/2021 07:59:47
Oh, okay. I'll try it!


Is this the right way?
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/891233039781347328/unknown.png)
%end

##### DrakerDG 09/25/2021 08:02:01
Thru every transform.translation you can move every shape the position you need


you can use very thin and inclined boxes for the ramps


Excellent


Maybe you need make a similar work in your robot.  Always you need use a simple shapes in every bounding object
%figure
![IMG_20210925_021925.jpg](https://cdn.discordapp.com/attachments/565154703139405824/891237487618424852/IMG_20210925_021925.jpg)
%end

##### 한정훈 09/25/2021 08:21:41
It really helped me a lot. Thank you so much! I'm gon na go to your YouTube!
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/891238013689032714/unknown.png)
%end

##### DrakerDG 09/25/2021 08:22:20
Ok, you welcome

##### 한정훈 09/25/2021 08:31:07
Oh my... I can flip over even if I simply changed the boundaries.
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/891240386171912262/unknown.png)
%end

##### DrakerDG 09/25/2021 08:33:32
Always check the shapes bounding objects in your robot

##### 한정훈 09/25/2021 08:37:30
It was solved by adding a little bit of height to the actual stadium. Thank you!

##### DrakerDG 09/25/2021 08:38:01
Perfect!

##### 한정훈 09/25/2021 08:38:38
Is there a way to erase the overlapping parts between the boundary drawings?

##### DrakerDG 09/25/2021 12:15:27
You can adjust the size or type of geometry to avoid or minimize overlap.  The important thing is that the contact surface is as continuous as possible and in the case of your ramp avoiding the stands or pronounced changes in height

##### 한정훈 09/25/2021 13:11:01
Do you happen to have keywords such as motor angle control or delay in arduino when using webot as python?

##### DrakerDG 09/25/2021 13:25:11
In the code command, I don't remember

##### 한정훈 09/25/2021 13:25:57
Or can you measure the distance of the ultrasonic sensor for a long time?

##### DrakerDG 09/25/2021 13:26:49
Yes, of course

##### Shivkumar 09/25/2021 13:33:33
Hey guys, is it possible to make the drone move automatically on a set route instead of having to use the keyboard, like the drone performing actions for a given instant of time. If so kindly please give me an idea on how to do it, even any resource would be really helpful. I have been trying this is for a very long time and I also used the code for PD controller (Python) as a reference but I am not able to do it.

##### 한정훈 09/25/2021 14:15:14
Can you tell me how to do it?

##### DrakerDG 09/25/2021 17:18:31
You can add to robot.children a distance sensor and you  need select the type of sensor, like an ultrasonic or infra red


You can read about it here: [https://cyberbotics.com/doc/reference/distancesensor](https://cyberbotics.com/doc/reference/distancesensor)

##### 한정훈 09/25/2021 17:43:32
I've been to that link, but I haven't found a way to extend the observation length.

##### DrakerDG 09/25/2021 18:07:08
Thru for the lookup table, you configurate the behavior sensor.



[https://cyberbotics.com/doc/reference/distancesensor#lookup-table](https://cyberbotics.com/doc/reference/distancesensor#lookup-table)
%figure
![infrared.png](https://cdn.discordapp.com/attachments/565154703139405824/891385348788215868/infrared.png)
%end


Or you can use the PROTO Sharp Distance Sensor:



[https://cyberbotics.com/doc/guide/distancesensor-sensors](https://cyberbotics.com/doc/guide/distancesensor-sensors)



%figure
![sharp_GP2D120.png](https://cdn.discordapp.com/attachments/565154703139405824/891386465211269170/sharp_GP2D120.png)
%end


Every sensor have an equation to calculate the distance like this
%figure
![IMG_20210925_121427.jpg](https://cdn.discordapp.com/attachments/565154703139405824/891387468321009675/IMG_20210925_121427.jpg)
%end

##### Luftwaffel [Moderator] 09/25/2021 19:53:15
`@한정훈` [https://cyberbotics.com/doc/reference/distancesensor#lookup-table](https://cyberbotics.com/doc/reference/distancesensor#lookup-table) You have to change the lookup table

##### Justin Fisher [Moderator] 09/25/2021 22:44:35
I've struggled a bit to figure out the pattern behind how keystrokes are sent to different robots' keyboard devices when there are multiple robots are in the simulation.  What I've ended up deciding is that, if a particular robot (or part thereof) is selected in the simulation window, then just that robot receives the keystrokes; otherwise every robot will receive the keystrokes?  Does that seem right?


If that's right, then my main puzzle is why parts of one of my robots keep getting selected, apparently randomly, as the simulation proceeds?  (In this video, I keep clicking on the sky to deselect the current selection, and then it automatically re-selects some random part of the simple neural-net visualization hovering over the robot's head, for no reason.)
> **Attachment**: [random\_selection\_changes.mp4](https://cdn.discordapp.com/attachments/565154703139405824/891456898866507776/random_selection_changes.mp4)


I wonder if it has something to do with the fact that the nodes in the neural net are procedural protos that update themselves to change their color as a supervisor controller changes their activation property?  Does a procedural proto updating itself somehow cause itself to become selected?  Tis annoying, especially when that also means the supervisor stops hearing the keystrokes!

##### DrakerDG 09/26/2021 00:31:32
Wow, interesting behavior 🤔



I don't know the reason but I like your world design

##### Shivkumar 09/26/2021 03:29:49
I am facing an issue, is it possible to make the drone move automatically on a set route instead of having to use the keyboard, like the drone performing actions for a given instant of time. If so kindly please give me an idea on how to do it, even any resource would be really helpful. I have been trying this is for a very long time and I also used the code for PD controller (Python) as a reference but I am not able to do it.

##### Justin Fisher [Moderator] 09/26/2021 04:32:00
Thanks for the compliment.  These are a virtual replacement for lego mindstorms robots that I used to use in my class pre-pandemic, so I was trying to make a world that seemed sort of fun and approachable, but also would be a good setting to do Braitenburg-style light-following tasks, which is what that lamp helicopter hovering around in the background is for.



I think the procedural protos probably are indeed responsible for the mysterious auto-selection I was experiencing.  Whenever you change an input field in a procedural proto, Webots destroys the old copy of the proto and creates a new one in its place.  If you did that directly from the scene tree, the end result would be that whenever you change a property of such a proto, it would become unselected, which would be annoying.  So they probably set it up so that whenever such a proto constructs a new copy of itself, that new copy automatically gets re-selected (so long as nothing else is selected).  That probably works great for when you initiate the changes directly from the scene tree, but is annoying when you instead initiate the changes from a supervisor controller.  Ideally, Webots would distinguish between these two causes and only auto-select the newly constructed proto when the scene tree interface caused its construction.


I'd suggest finding the main loop of the controller of the drone you're looking at, look to see what the keyboard shortcuts do, and then replace that main loop with one that effectively chooses which keys to press at which times, e.g., on the basis of comparing the drone's current position to the next waypoint you want to reach (though rather than actually pressing a key, your loop would instead do whatever the original main loop did when the key was pressed).



However...  At least on many computers, that drone simulation runs pretty slow, and my general experience with drones on Webots is that they can be a bit finicky and frustrating, or maybe it was just my lack of skill since I did most of that early on in my time with Webots.  (So e.g., the lamp-helicopter I made in the video above looks a lot like a drone, but it actually "cheats" and uses supervisor commands rather than full-fledged aerodynamics to move, since, even after a lot of wrestling with it, I could get it to stay stably upright as a drone only for about 95% of the time, which wasn't stable enough for my purposes.)  So I think I'd probably encourage a beginner to start with something less finicky, like the vehicles tutorials.

##### 한정훈 09/26/2021 05:41:13
Thank you so much. It helped me a lot.


I want to make a program that controls the motor at an angle or operates for a second.

Is there no function like Arduino's "delay()"?

##### Zuzanna 09/26/2021 10:11:36
Hi everyone, I hope it is ok to ask this here, since this is my last resort.

I need to use webots version 2020b for an assignement at the university, however webots crashes for me at the start of the default world as well as the world used for the assignement. I get the OpenGL error: GL\_INVALID\_ENUM and I also received a message that my GPU is not supported a few times. The program does manage run some demo worlds like moon.



I set all the OpenGL settings in preferences to the lowest possible settings already.

I also tried updating my drivers.



I need to use the 2020 version, because the code provided for the assignment was built in that version and does not run on the 2021 edition.





My only computer is a Toshiba Satellite L50D-B-1C8 with the following specs:

Processor    AMD A8-6410 APU with AMD Radeon R5 Graphics       2.00 GHz

Installed RAM-memory    16,0 GB (15,0 GB available)

Type systeem    64-bits operating system (Windows 10), x64-processor



Now my question is, is it a lost cause to try to run webots 2020b on my machine, or are there still some things left to try?



Sorry if this is not the place to ask. In that case, ignore this message.

##### 한정훈 09/26/2021 10:18:35
How can you use the "wb\_robot\_step()" function in Python? Please tell me.

##### DrakerDG 09/26/2021 11:00:40
Example:



timeStep = 32

##### 한정훈 09/26/2021 11:01:28
I found a way after watching YouTube. Thank you for helping me every time.


I made a custom robot. The appearance boundary was optimized by giving only the bottom and comb surfaces. However, we set up wheels and motors, and the wheels are moving, but the robot is not moving. Can you help me?
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/891668876536979456/unknown.png)
%end

##### DrakerDG 09/26/2021 13:04:09
Hello! You need check if some part of the bounding objects touch the floor and the friction does not permitted move the robot.  Similar to sumo robot
%figure
![Mini_Sumo_Robot_V1_3_1.png](https://cdn.discordapp.com/attachments/565154703139405824/891671485792518254/Mini_Sumo_Robot_V1_3_1.png)
%end

##### 한정훈 09/26/2021 13:05:00
That's right. I'm preparing for my university assignment. After a week, I'm going to make it using Arduino.



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/891671903637504020/unknown.png)
%end


What's wrong? Should the boundary of the wheel be cylinder instead of transform?

##### DrakerDG 09/26/2021 13:14:13
The boundary object of the wheel  must be a solid, in the solid.children you need add a transform and in the transform.children you need add a shape with a geometry a cylinder


See the wheel
%figure
![Screenshot_2021-09-25-01-27-29-049.jpg](https://cdn.discordapp.com/attachments/565154703139405824/891674203445690408/Screenshot_2021-09-25-01-27-29-049.jpg)
%end

##### 한정훈 09/26/2021 13:16:52
We fixed not treating wheels as boundaries, but this time the sensor does not recognize black. What's the case?
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/891674686843392000/unknown.png)
%end

##### DrakerDG 09/26/2021 13:23:49
Before if did it?

##### 한정훈 09/26/2021 13:24:18
Um... I don't think it worked before.

##### DrakerDG 09/26/2021 13:27:07
How have you configured your sensor?  Can you show it?

##### 한정훈 09/26/2021 13:28:14
It has three line racing sensors and an infrared sensor.
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/891677545735520266/unknown.png)
%end



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/891677988192681994/unknown.png)
%end


I told the robot to move forward, but it's not moving.


Warning: Robot: This robot node has been resized. It is not recommended because it can damage proper physical behavior.



Is this not working because of this?

##### DrakerDG 09/26/2021 13:44:50
You need a solid in your end point, bounding object and physics


Add a solid
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/891681903076323379/unknown.png)
%end

##### 한정훈 09/26/2021 13:45:52
Is it necessary for all sensors?

##### DrakerDG 09/26/2021 13:46:13
No


Only for the HingeJoin motors



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/891682319285518346/unknown.png)
%end

##### 한정훈 09/26/2021 13:48:26
I've already put it in.
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/891682628917403658/unknown.png)
%end


In addition, sensors and motors do not work.
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/891683104203358208/unknown.png)
%end

##### daz.quintal 09/27/2021 21:18:08
Hello, I hope someone can help me with this

I created a new controller for a Darwin OP in C++, but when I try to compile the code in the text editor the console shows me this error:

D:/Simulador WeBots/Webots/msys64/mingw64/bin/../lib/gcc/x86\_64-w64-mingw32/10.3.0/../../../../x86\_64-w64-mingw32/bin/ld.exe: D:/Simulador WeBots/Webots/msys64/mingw64/bin/../lib/gcc/x86\_64-w64-mingw32/10.3.0/../../../../x86\_64-w64-mingw32/lib/../lib/libmingw32.a(lib64\_libmingw32\_a-crt0\_c.o): in function `main':

C:/\_/M/mingw-w64-crt-git/src/mingw-w64/mingw-w64-crt/crt/crt0\_c.c:18: undefined reference to `WinMain'

collect2.exe: error: ld returned 1 exit status

make: *** [D:/Simulador WeBots/Webots/resources/Makefile.include:493: build/release/Darwin\_Controller2.exe] Error 1



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/892158243474915338/unknown.png)
%end

##### Luftwaffel [Moderator] 09/27/2021 21:19:01
the ":18" means that the error is in line 18

##### daz.quintal 09/27/2021 21:22:22
But my code has only one line (a comment)

##### Luftwaffel [Moderator] 09/27/2021 21:24:28
oh it is not your file


google the exact error code


undefined reference to "WinMain"

##### daz.quintal 09/27/2021 21:27:21
Oh ok, I'll do that

Thanks

##### Olivier Michel [Cyberbotics] 09/28/2021 06:12:36
Your code should at least implement a `main` function.

##### mclzc 09/28/2021 15:33:45
Hi, I have some doubts around ros2control and Webots.

I've set up a simulation with an E-puck (I'm using the latest `.proto`, `webots_robot_description.urdf` and `ro2control.yml` from Github). Among others, its launch file has a `diffdrive_controller_spawner` and a `joint_state_broadcaster_spawner`.

- Why are are only the left and `right wheel motor`  referenced in the `ros2control.yml` file and not the left and `right wheel sensor`?

##### Darko Lukić [Cyberbotics] 09/28/2021 15:41:58
The webots\_ros2\_control plugin can find associated motor encoders, so it is not needed to specify them in the URDF configuration.

##### mclzc 09/28/2021 17:27:00
Thanks.

##### mattjarvis 09/29/2021 00:08:47
Quick question: the documentation says that if you click on an object with the left mouse button and drag the mouse it will rotate the 3D view *around* the point which was clicked, otherwise it will rotate the viewport around itself.  I've tried version R2021b both on Windows and Linux and cannot get the viewport to rotate around an object that was clicked on, it only rotates around itself.  Is there something simple I'm missing?

##### DDaniel [Cyberbotics] 09/29/2021 06:19:11
`@mattjarvis` yes I think that might be misleading. You don't actually need to select the object, but when you begin the dragging motion the position of the mouse cursor matters. If it's above an object, it will rotate around it, otherwise it's the viewport that rotates

##### viorel\_gheorghe 09/29/2021 09:32:57
I'm playing with a simulation of a wheel differential robot. I want to see how the robot slips, but even at setting coulombFriction to "0" the robot still moves


If I make the robot to go to up to a hill even at 2 degrees then the slippage occurs

##### Kamil Domański 09/29/2021 10:54:36
Hi, I've prepared a simple simulation of a skid robot. I want to check how much torque the robot need to run forward and turn in place. The torque of each motor is displayed in the terminal, but it seems strange. When the robot run forward the torque on all wheels should be pretty much the same, but as you can see below the torques constantly changes and I don't know why. Do wheels lose traction? if yes, then how can I solve that?



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/892726110410907698/unknown.png)
%end

##### DDaniel [Cyberbotics] 09/29/2021 12:11:23
`@Kamil Domański` what is the timestep you're using? Have you tried lowering it?

##### Kamil Domański 09/29/2021 12:12:27
i think it was 32



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/892746540920238110/unknown.png)
%end


the time step doesn't change anything


the torques look really weird


or maybe I interpret them wrong

##### DDaniel [Cyberbotics] 09/29/2021 12:38:57
I can't reproduce what you have, mine appear to be quite similar across the 4 wheels

```
-0.000174 0.000174 -0.000174 0.000174
-0.000271 0.000271 -0.000271 0.000271
-0.000262 0.000262 -0.000262 0.000262
-0.000149 0.000149 -0.000149 0.000149
0.000023 -0.000023 0.000023 -0.000023
0.000185 -0.000185 0.000185 -0.000185
0.000275 -0.000275 0.000275 -0.000275
0.000256 -0.000256 0.000256 -0.000256
0.000136 -0.000136 0.000136 -0.000136
```

however the magnitude is significantly lower than yours. Did you modify the properties of the motors? For reference I've used the `4_wheel_robot` world/controller and modified it to have something analogous to your situation (or at least, what I understood from the image)

##### Kamil Domański 09/29/2021 12:41:59
i've started from the same example. I've changed size of body and wheels, position of wheels and the mass of body



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/892758587611439174/unknown.png)
%end


ok, so i started over. I opened 4\_wheels\_robot example and changed only the controller. The torques looks better but why they have sinusoidal shape. Shouldn't they be straight lines?


"""my\_controller controller."""



\# You may need to import some classes of the controller module. Ex:

\#  from controller import Robot, Motor, DistanceSensor

from controller import Robot

from controller import Motor

\# create the Robot instance.

TIME\_STEP = 32

robot = Robot()

wheels = []

wheelsNames = ['wheel1', 'wheel2', 'wheel3', 'wheel4']

for name in wheelsNames:

    wheels.append(robot.getDevice(name))

\# get the time step of the current world.

timestep = int(robot.getBasicTimeStep())

speed = -1  # [rad/s]

for i in range(4):

    print(i)

    wheels[i].setPosition(float('inf'))

    wheels[i].setVelocity(0)

    wheels[i].enableTorqueFeedback(TIME\_STEP)









\# You should insert a getDevice-like function in order to get the

\# instance of a device of the robot. Something like:

\#  motor = robot.getDevice('motorname')

\#  ds = robot.getDevice('dsname')

\#  ds.enable(timestep)



\# Main loop:

\# - perform simulation steps until Webots is stopping the controller

while robot.step(TIME\_STEP) != -1:

    wheels[0].setVelocity(speed)

    wheels[1].setVelocity(speed)

    wheels[2].setVelocity(speed)

    wheels[3].setVelocity(speed)

    # wheels[4].setVelocity(speed)

    # wheels[5].setVelocity(speed)

    print(f'{wheels[0].getTorqueFeedback()*100},{wheels[1].getTorqueFeedback()*100},{wheels[2].getTorqueFeedback()*100},{wheels[3].getTorqueFeedback()*100}')#,{wheels[4].getTorqueFeedback()},{wheels[5].getTorqueFeedback()}')

    # Read the sensors:

    # Enter here functions to read sensor data, like:

    #  val = ds.getValue()



    # Process sensor data here.



    # Enter here functions to send actuator commands, like:

    #  motor.setPosition(10.0)

    pass



\# Enter here exit cleanup code.

##### DrakerDG 09/29/2021 14:28:40
Hi there.  Have you tried changing the basicTimestep parameter in the WorldInfo node?
%figure
![unknown-1.png](https://cdn.discordapp.com/attachments/565154703139405824/892779919036272661/unknown-1.png)
%end

##### mattjarvis 09/29/2021 15:49:18
Thanks for the response...I don't seem to be able to make this behavior work.  It doesn't matter where or what I click on, selected or not, the rotation is never centered around where I click.  The camera just looks up/down/left/right when I drag the mouse akin to looking around in a first person shooter in a video game.  Is this different from the behavior other people are seeing?

##### mclzc 09/29/2021 17:17:12
Hi, is there a way to display a Ros OccupancyGrid in the Webots display? Just like cameras' images are shown there.

##### FlamingToaster 09/29/2021 18:25:31
Hello!

I'm currently testing a GPS system for my robot, and I was wondering - is there any way to set object position (in simulation) using GPS coordinates? For now I'd like to create simple markers in specific positions to check whether my GPS guidance works correctly or not.

Thanks in advance

##### Luftwaffel [Moderator] 09/29/2021 18:27:08
`@FlamingToaster` you can use the supervisor api [https://cyberbotics.com/doc/reference/supervisor](https://cyberbotics.com/doc/reference/supervisor) to change the translation field of an object


you can also use the supervisor api to get the position of the object

##### FlamingToaster 09/29/2021 18:28:18
Okay, so using the supervisor api I should be able to set such markers, yes?

##### Luftwaffel [Moderator] 09/29/2021 18:29:25
what do you mean by markers? Like spawning a green glowing sphere on a specific position?

##### FlamingToaster 09/29/2021 18:30:00
yeah, something like that


but I'd like to use GPS coordinates rather than meters

##### Luftwaffel [Moderator] 09/29/2021 18:30:23
yeah you can use the api for that

##### FlamingToaster 09/29/2021 18:30:31
okay, many thanks!

##### Luftwaffel [Moderator] 09/29/2021 18:30:31
you would have to convert it


what language are you using?

##### FlamingToaster 09/29/2021 18:33:23
c++

##### Luftwaffel [Moderator] 09/29/2021 18:35:10
this is an example in python on how to spawn a sphere. You should be able to translate it in cpp and make your adjustments
> **Attachment**: [spawn\_target.py](https://cdn.discordapp.com/attachments/565154703139405824/892841954927341638/spawn_target.py)

##### FlamingToaster 09/29/2021 18:36:51
Thank you, this looks like exactly what i need!

##### Mlungost 09/29/2021 19:02:57
I have a question regarding position sensors. I was watching a "Position Sensor in Webots Tutorial", but it didn't answer my questions on obtaining the robot's translation using code.

say your robot is a vehicle.



what if your robot could move up an incline? how would you get the distance covered then, particularly in the vertical direction?, and it is possible to break it down across vertical and horizontal? It seems like it should be a simple thing, getting the translation of the robot, but turns out no. so how do you get the translation of the robot using code?

Let's say I want to know the (x,y,z) position of the robot relative to the WorldInfo, how do I do that?
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/892848944328089660/unknown.png)
%end

##### Luftwaffel [Moderator] 09/29/2021 19:04:33
You have 3 general options:

1. calculate odometry using the wheel position sensors (error prone and issue with inclines)

2. You us a GPS sensor


3. you "cheat" and use the supervisor api to get the positon


If you want to do it without GPS sensors and in a real-world way, I would recommend reading up on SLAM

##### Mlungost 09/29/2021 19:46:23
thank you Simon. teaching moment and with options 👍

##### Benjamin Hug [Cyberbotics] 09/30/2021 07:03:50
You can use a ROS controller to send an image to a Display device in Webots or use RViz to show the OccupancyGrid.

##### Kamil Domański 09/30/2021 07:55:44
`@DrakerDG` `@DDaniel` i've changed the timestep and troques looks the same



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/893045120914587698/unknown.png)
%end



> **Attachment**: [10-03-15.mp4](https://cdn.discordapp.com/attachments/565154703139405824/893045462439952384/10-03-15.mp4)


* sorry for bad quality and short video but discord accept only 8 mb


For me, the only situation which makes sense is when the robot trying to move the wall. Two wheels touching the ground and have pretty stable torque and two are in the air and they have torque around 0.



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/893051701228093490/unknown.png)
%end



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/893051775760871444/unknown.png)
%end

##### kid07 09/30/2021 12:27:16
Hi everyone, I have a designed a rover that is intended to place cylinders at various points on the arena. The arena is meant to be a rough surface and the cylinders on the robot keeps falling off. How do I prevent that from happening ?
%figure
![image0.png](https://cdn.discordapp.com/attachments/565154703139405824/893111755021103144/image0.png)
%end

##### DrakerDG 09/30/2021 12:30:08
Every cylinder most be a solid and you need add a bounding object and physics nodes

##### kid07 09/30/2021 12:32:57
Thank you `@DrakerDG` , let me try it and get back to you

##### DrakerDG 09/30/2021 12:36:02
If omit add physic node, your solid will be like a infinite mass. You will don't can move with other object

##### mclzc 09/30/2021 17:18:51
Thanks, sending an image sounds like what I want. I can already see the grid in RViz. How could I send an image to the Display device? Would I have to access the supervisor api from a custom plugin?

[https://github.com/cyberbotics/webots\_ros2/wiki/Tutorial-Creating-a-Custom-Python-Plugin](https://github.com/cyberbotics/webots_ros2/wiki/Tutorial-Creating-a-Custom-Python-Plugin)


A related question. I'm currently using the ros2control differential\_drive\_controller plugin, which uses joint\_state\_broadcaster to publish the joints' information to /joint\_states and /dynamic\_joint\_states.

How could I get the joints' data (i.e. encoders data) myself? Should I have to write a plugin with the new pluginlib way?

## October

##### Benjamin Hug [Cyberbotics] 10/01/2021 09:18:00
1) Get the device with `myDisplay = self.__robot.getDevice('name_of_display')`.

2) Use `myDisplay.imagePaste()` (take a look at [https://cyberbotics.com/doc/reference/display#wb\_display\_image\_paste](https://cyberbotics.com/doc/reference/display#wb_display_image_paste), the parameters are the same).



Put the code in a custom plugin should do the trick.


If you just want the angular position of your wheel you can use a `PositionSensor` and create your publisher in a custom plugin, but can't you use directly the `/joint_states` topic ?

##### vivip2231 10/01/2021 20:49:07
Hi, everyone! I'm new here, and I want to ask for some help or advice regarding my problem with the Connector Node. I would like to solve a gripping situation with a robotic gripper. The problem that I'm facing is, that there is no physical link between the gripper and the plastic container, after locking the Connector. I tried everything, to solve this, but it seems like I'm stuck. Sooo I would very appreciate your advice.

##### mclzc 10/02/2021 01:06:39
Thank you, will try that.


I'm doing that, but I wanted to do it from scratch as well. Thanks.

##### lanzcc 10/02/2021 14:21:17
Hello, I am still searching for information that would allow me to evaluate webots for an intro CS course using Python. I have been directed to a site that uses Python to program a Thymio II simulation, but all the Thymio documentation mentions several languages not including Python. Does anyone know if webots has eductaional consultants? As with many large companies, it appears to be impossible to contact webots directly.

##### Luftwaffel [Moderator] 10/02/2021 19:53:46
`@lanzcc` [https://cyberbotics.com/#contact](https://cyberbotics.com/#contact) here you go


but this discord is a good general resource, as well as the documentation on cyberbotics website


[https://cyberbotics.com/doc/guide/tutorials](https://cyberbotics.com/doc/guide/tutorials) this is also very helpful


what type of gripper are you using? Unless it is a magnetic or vacuum gripper, you can just use the physics simulation to actually grip an object. Closing the gripper, squeezing you box should create enough friction to lift it up.  [https://cyberbotics.com/doc/reference/connector](https://cyberbotics.com/doc/reference/connector) this link could help as well

##### Rodrigo\_03 10/02/2021 21:16:40
is there a way to get the information from each ray of a distance sensor?

##### Luftwaffel [Moderator] 10/02/2021 21:18:28
you would have to use a lidar for that


multiple rays in distance sensors are just a way to approximate a real distance sensor more accurately. If you want several ray sensors, you have to add multiple sensors or use a lidar

##### Rodrigo\_03 10/02/2021 21:20:10
thanks a lot, I'll read about it

##### Luftwaffel [Moderator] 10/02/2021 21:22:35
use the api reference, it is very well documented

##### Rodrigo\_03 10/02/2021 21:23:20
ok, thanks!

##### Justin Fisher [Moderator] 10/03/2021 02:43:51
Edit:  I had pasted in a reply that I made to what I thought was another person with a similar question, in which I described my experience using Webots in a class for university students with little programming background (you can find it by searching this discord for "cognitive science").  But I think that other person was actually just you.  So I'll just point you up to that earlier reply, in case you missed it, and encourage you to ask particular questions you might have about teaching with Webots and Python.

##### vivip2231 10/04/2021 13:51:01
Thank you for your reply! I know this page of the documentation, it's not helping me at this point, unfortunately. I use the Pioneer2 mobile robot and i made a custom gripper for it in Fusion360.  The simple physics simulation is not working, I already tried that. But I assume the problem lies in the robot type, because when I attach the gripper to the extensionSlot , I cannot give physics to the Solids, and if I do it gives the following warning: Pionner2  (PROTO): This node is controlled in kinematics mode but some Solid descendant nodes have physics and won't move along with this node.


Any advice how can I solve this? Or should i change the robot type?

##### medrimonia 10/04/2021 15:36:27
Hi,



I am intending to use Webots for teaching activities, but I'm experiencing issues when trying to use it on the computers at my university (Debian buster), the webots package was installed by the system administrator directly from the debian package.



I receive the following error message:



```
Info: Could not load the Qt platform plugin "xcb" in "/usr/local/webots/lib/webots/qt/plugins" even though it was found.
Fatal: This application failed to start because no Qt platform plugin could be initialized. Reinstalling the application may fix this problem.

Available platform plugins are: xcb.
```



By investigating a little bit further, I found that the problems comes from `libxcb-util`



```
>>> ldd /usr/local/webots/lib/webots/qt/plugins/platforms/libqxcb.so | grep -C 2 "not found"
/usr/local/webots/lib/webots/qt/plugins/platforms/libqxcb.so: /lib/x86_64-linux-gnu/libQt5Core.so.5: version `Qt_5.15' not found (required by /usr/local/webots/lib/webots/qt/plugins/platforms/libqxcb.so)
    linux-vdso.so.1 (0x00007ffff109a000)
    libQt5XcbQpa.so.5 => /lib/x86_64-linux-gnu/libQt5XcbQpa.so.5 (0x00007fb96c00f000)
--
    libxcb-image.so.0 => /lib/x86_64-linux-gnu/libxcb-image.so.0 (0x00007fb96af08000)
    libxcb-shm.so.0 => /lib/x86_64-linux-gnu/libxcb-shm.so.0 (0x00007fb96af03000)
    libxcb-util.so.1 => not found
    libxcb-keysyms.so.1 => /lib/x86_64-linux-gnu/libxcb-keysyms.so.1 (0x00007fb96ad00000)
    libxcb-randr.so.0 => /lib/x86_64-linux-gnu/libxcb-randr.so.0 (0x00007fb96acee000)
```



I checked and the only `libxcb-util` available on Debian buster is version `0.0`, it seems that `libxcb-util1` is only available from Debian bullseye: [https://packages.debian.org/bullseye/libxcb-util1](https://packages.debian.org/bullseye/libxcb-util1)



Does this mean that it's not possible to use Webots with Debian buster or is there a workaround?



My understanding is that this is a consequence of a change in Qt: [https://bugreports.qt.io/browse/QTCREATORBUG-24967](https://bugreports.qt.io/browse/QTCREATORBUG-24967)



In case there is no solution, I hope that my message helps other users

##### Olivier Michel [Cyberbotics] 10/04/2021 15:42:25
Webots is officially supported and tested on the two latest versions of Ubuntu. I believe that some users reported successful use on Debian. However, I am not surprised that it doesn't work out-of-the-box with the prebuild packages (.deb) file, because these packages are made on Ubuntu for Ubuntu and depend on other Ubuntu packages. Therefore, I would recommend to build Webots from the source on Debian instead of using the Ubundu .deb packages.


You should follow these instructions: [https://github.com/cyberbotics/webots/wiki/Linux-installation](https://github.com/cyberbotics/webots/wiki/Linux-installation)

##### medrimonia 10/04/2021 15:46:57
Thanks for the answer, I tried to build it from source before posting, the build is successful, but when I attempt to launch Webots, I stumble upon exactly the same error which I believe is due to a dependency of Qt5.15 to a package that is not available on Debian buster.

##### vivip2231 10/04/2021 17:24:53
I found a sample world, it is the pioneer3dx\_gripper.wbt. It is basically the same solution like mine. I looked up the proto files of this projects and i can see that there is some phisics nodes given to the gripper Solid tree, but they are custom physics. Do anyone know some more information about this sample project, that can help me?

##### Luftwaffel [Moderator] 10/04/2021 21:10:12
`@vivip2231` perhaps you can share you project. Or you could just use the gipper from the sample world. In general you have to add a physics node and bounding object to any solid, that you want to have collision, mass and interact with the world. Nothing special, just double click the physics node and add the default one. For gripping the only thing you should really watch out for, is to use simple geometry like a box or cylinder. Using Meshes (IndexedFacesets) can really screw up the simulation.

##### vivip2231 10/05/2021 08:01:15
The gripper from the sample world is not appropriate for my project, that's why i wanted to check up how it is using the gripper with that robot in the sample codes. The problem is if I add a physics node to the Solids, then they dont move along with the robot, because the robot is in kinematics mode. Maybe somehow I can turn off this mode for the robot?


And even if i could use the sample worlds gripper, i want to understand how does it work, how is it using the custom physics nodes.

##### Luftwaffel [Moderator] 10/05/2021 17:50:23
Well you can't have your robot in kinematics mode if you want to have physics simulation

##### vivip2231 10/05/2021 18:45:21
Yes, i know. I thought that somehow i can turn that mode off. But anyway I changed the robot for pioneer3dx and with that it works properly.

##### R\_ 10/06/2021 05:37:42
Is there an example proto file for a simple mechanical loop within webots examples?

##### DDaniel [Cyberbotics] 10/06/2021 06:19:54
`@R_` the gripper in `coupled_motors.wbt` relies on mechanical loops for the parallel link mechanism and should be fairly minimal. It isn't a PROTO, but the logic is the same whether it's defined in the world file or in a PROTO

##### usermake 10/06/2021 07:23:42

> **Attachment**: [world-conveyor.mp4](https://cdn.discordapp.com/attachments/565154703139405824/895209688206016562/world-conveyor.mp4)


Hello, can anyone explain why this is happening? Why the animated geometry is going the oposite direction, that is.

##### R\_ 10/06/2021 09:49:41
thanks for the reply. I found how the solidreference node is used.


Is there a example to create a robot from `.stl` files as nodes, by authoring a proto (similar to how a urdf is generated)? I was intending to use the mechanical loop within a custom proto

##### medrimonia 10/06/2021 11:12:51
To follow up on this topic, doing a backport of libxcb-util1 for Debian9 was sufficient to run webots. The only remaining problem I have is that some of the textures are not loading properly with `Unsupported image format`. From what I've seen in the logs of this channel, it's likely to come from the use of another `libjpeg` version.

I will keep you updated if I solve it.

##### Olivier Michel [Cyberbotics] 10/06/2021 12:42:34
Yes, this is a known problem, Webots need to load a specific version of libjpeg (alias turbojpeg), it is a matter of installing this library and setting the path accordingly.

##### SeanLuTW 10/07/2021 06:00:11
Hello, can I get PID of current Webots by supervisor?

##### DDaniel [Cyberbotics] 10/07/2021 07:38:48
`@SeanLuTW` I assume you mean the PID of a motor (?). If you wish to change the values programmatically you can use the function `wb_motor_set_control_pid` ([https://cyberbotics.com/doc/reference/motor#wb\_motor\_set\_control\_pid](https://cyberbotics.com/doc/reference/motor#wb_motor_set_control_pid)), if instead you want to do it through a supervisor you can get the node corresponding to the motor device using `wb_supervisor_node_get_from_device` then use `wb_supervisor_node_get_field` to get a reference to its `controlPID` field which you can read/set using `wb_supervisor_field_get_sf_vec3f`

##### SeanLuTW 10/07/2021 08:09:51
Sorry for not being clear, I mean the process ID of Webots.

##### ShuffleWire 10/07/2021 10:09:05
Hello everyone ! I'm currently trying to get the force between mechanical parts (ie the force in internal robot link between part (hinge, slider...)). I don't have found any sort of function to achieve it. Is there anything I've missed ?

Thus I'm exploring physic plugins to get this info. It seems that dJointFeedback [http://opende.sourceforge.net/docs/structd\_joint\_feedback.html](http://opende.sourceforge.net/docs/structd_joint_feedback.html) will hold the relevant info. Do you think it will work ?

##### TurnDownForWhat 10/07/2021 10:21:29
Hello everyone!



I am having some issues with the Webots simulation stopping after 0.5-2 seconds after being run.

My question is basically this: Is there some change that I need to do, that I have missed?



Some quick background: I have taken over a project after someone else, where he created a high-level mission planner system for heterogenous robots.

Long story short, he used Webots R2019 (where it worked), and I am trying to update it to the latest version.



I have read carefully through all of the changelog, and I've done the needed updates from the changelog that I found necessary:

- Changed local URLS to point to online resources

- Changed from .getMotor to .getDevice.

- Set the WorldInfo:coordinateSystem to "NUE", because all of the elements in the environment was suddenly turned 90 degrees (and all fell to "the side" when I started it)

- Updated the streaming version, changed the code in the setup\_viewer.js and index.html to match the examples under resources on the Webots GitHub.



I can supply with more information if needed, as I am not sure what is needed.

##### Olivier Michel [Cyberbotics] 10/07/2021 10:23:29
Yes, I believe it's the way to go.

##### ShuffleWire 10/07/2021 10:26:45
Nice ! I'll give it a try ! 🙂

##### Luftwaffel [Moderator] 10/07/2021 21:55:45
In general in Webots, the controllers call the next simulation step. So the first thing I would check is, whether the controllers are the culprit. You can check this by setting all controllers to "void", this should just run the simulation. Also any potential error messages from the terminal can be helpful to troubleshoot

##### Justin Fisher [Moderator] 10/07/2021 22:07:17
There are several factors you may want to try tweaking to try to get your track's animation to match the physics of how it moves things.  (1) I think the one that's most likely to work is changing the track's `textureAnimation` field.  (2) You might also change some settings in the textureTransform for the associated texture.  (3) Another would be to confirm that you have your axes aligned in the way that the documentation says is required (esp having your y/green-axis point gravitationally upward, though I suspect that would be more likely to produce oddities in its physical interaction with items, rather than in it's animations).  (4) If you're using geometry-animation, rather than texture-animation for your track, you'll want to be sure to follow the documentation's requirement that "By convention the wheels are all aligned on a plane perpendicular to the Track node's z-axis and have to be defined in clockwise order starting from the one with the smallest x-axis position component."  [https://cyberbotics.com/doc/reference/track](https://cyberbotics.com/doc/reference/track)

##### TurnDownForWhat 10/08/2021 09:55:42
Thank you very much for that tip! Tried to run it with void controllers, and the simulation time progresses as normal. Which probablt means the problem lies in the controlles, and at least it narrows it down : ) What I find most confusing is that the control worked on the R2019 version, but suddenly stops functioning properly in the R2021 version. I can't seem to find anything relevant to the case in the changelogs which indicates any changes to why the old controllers haults the simulation.

There is some threading involved, maybe that might cause the issue somehow.

Furthermore, I get no error messages in the terminal, so there is not much to go after there, at least not without adding some homemade tracings

##### BeachJuic3 10/08/2021 12:29:40
does webots run with windows 10 + ros2?


`@Olivier Michel`


I understand this is a super easy question for u, and it might be included in the website


but i tried unity for ros2 and it wasnt a great experience.

##### Benjamin Hug [Cyberbotics] 10/08/2021 12:36:19
`@BeachJuic3` Yes you can use Webots with Windows 10 and ROS2 🙂

##### BeachJuic3 10/08/2021 12:36:33
oh thank god


just downloaded it


and when the assets loaded in it was like playing AAA games on gazebo

##### Luftwaffel [Moderator] 10/08/2021 19:30:44
<@190551990630088707> you can send me your project and I can take a look


Also when threading is involved, sometimes errors in other threads are not raised

##### mironix<inactive> 10/09/2021 12:34:33
Hey guys i would like to have a robot that spawns cubes in it's local 0,0,0 - something like a particle emitter - is that possible in webots?

##### DDaniel [Cyberbotics] 10/09/2021 12:45:37
`@mironix<inactive>` yes you can make the robot a supervisor and use the `wb_supervisor_field_import_sf_node_from_string` function [https://cyberbotics.com/doc/reference/supervisor#wb\_supervisor\_field\_import\_sf\_node\_from\_string](https://cyberbotics.com/doc/reference/supervisor#wb_supervisor_field_import_sf_node_from_string) and passing as string something like: `Shape { geometry Box { size 0.1 0.1 0.1 }}`

##### mironix<inactive> 10/09/2021 12:46:09
Thank you very much!

##### Beetlepig 10/09/2021 15:06:34
Hi, I'm new to webots and I'm trying to make an arm which move to a certain position. I'm trying to use the position sensor get value function in python, but it keeps returning nan, anyone know how to fix this?

##### DDaniel [Cyberbotics] 10/09/2021 15:11:07
`@Beetlepig` did you enable it first?

##### Beetlepig 10/09/2021 15:11:50
Yes, I think so



%figure
![20211009_161211.jpg](https://cdn.discordapp.com/attachments/565154703139405824/896414855186239488/20211009_161211.jpg)
%end

##### DDaniel [Cyberbotics] 10/09/2021 15:19:15
do you call at any point the `robot.step(timestep)` function? This function synchronises the controller with the simulation. If you didn't, put your while loop inside this loop:

```
while robot.step(timestep) != -1:
  YOUR_STUFF
```


the while loop in your picture seems rather odd, start with this instead:

```
motor.setPosition(1)
while robot.step(timestep) != -1:
  print(sensor.getValue())
```

##### mironix<inactive> 10/09/2021 16:20:52
Hello! you probably get asked this a lot and sorry for bothering my googling leads me nowhere -  is there a designed place to do things when the world loads to create some dynamic for example cubes? i know how to do it on start of simulation, but i would like to prepare things dynamically before i press play - should that be done outside webots in protos?

##### Beetlepig 10/09/2021 16:27:40
Thanks, that helped a lot. It now won't pick up the motors that I named inside of the 'claw module'. Do you know why that might be?

##### Luftwaffel [Moderator] 10/09/2021 21:54:35
If you want to dynamically change a world, a supervisor controller is your best bet. You can add, remove and change  nodes in the scene tree.


You could also edit the world file directly and then start it up

##### mironix<inactive> 10/09/2021 21:55:20
you can do that in code?

##### Luftwaffel [Moderator] 10/09/2021 21:56:03
World files are basically text files, so yeah you can do that in code.


But I would probably go the supervisor controller route

##### mironix<inactive> 10/09/2021 21:56:40
oh ok i understand now - make my own launcher for my world


and create it from template like with pystache - interesting idea - but i'll do the controller - i can synchronize the start untill the world is readyu - thank you for the help `@Luftwaffel`

##### Luftwaffel [Moderator] 10/09/2021 21:58:12
Proto files also support Lua scripting, but that is more for changing an existing node, not adding new ones

##### mironix<inactive> 10/09/2021 21:58:52
yes - i need new ones - and good to know lua is somewhere there - that will help

##### Luftwaffel [Moderator] 10/09/2021 21:59:50
When im home I can send you a little python script that adds a node


45min of so

##### mironix<inactive> 10/09/2021 22:00:27
no need - the previous help from daniel is enough - supervisors are well documented 🙂

##### D3cpt 10/10/2021 11:07:16
hi, anyone experienced in converting .urdf to proto?

##### Brubby 10/10/2021 13:08:48
Hi I just upgraded my version of Webots from 2021a to 2021b and now my project does not seem to work anymore. My robot controller crashes and I have found that it crashes when it attempts to run camera.getImageArray(). Im not sure how to go about fixing this.

##### BIN 10/10/2021 14:03:11
Hello, I am a student studying this epuck robot. When I am following a path, if the path has ended, how do I set it to return to the original position?



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/896761900031942666/unknown.png)
%end

##### Brubby 10/10/2021 14:12:35
I believe this can be achieved using a supervisor

##### BIN 10/10/2021 14:13:26
So what's the judgment? Position? Or what?

##### Brubby 10/10/2021 14:16:09
The supervisor could be continually checking the position of the robot and once its at a position which is the end of the path it can set the position of the robot back to the start

##### BIN 10/10/2021 14:18:22
So how do I know where a certain point on the map is? I am not sure of its specific coordinates, do you have any good methods?



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/896763939801661480/unknown.png)
%end


With this information?

##### Brubby 10/10/2021 14:22:25
well if your robot can get to the end of the path let it get there and then check the position field above to know where the end of your path is

##### BIN 10/10/2021 14:23:13
Thank you


By the way,do you know how to turn around at the end of the line?Also use position information?Can I complete that with a line sensor?

##### Brubby 10/10/2021 14:30:27
well i can think of two options based on what you actually want to achieve. Do you want the robot to actually use its wheels to turn around or do you want the robot just to be made to face the other way as soon as it reaches the end?

##### BIN 10/10/2021 14:31:22
use its wheels to turn around


I just want to accomplish this goal

##### Brubby 10/10/2021 14:40:16
Theres probabaly a few ways you can do this I can outline some but I dont know what method acctually works best is practice or is the simplest. You can make use of IMUs and integrate gyro data and keep rotating till you have rotated 180. Or you can think about the radius of the wheel and how many rotations of the wheel are necessary for the robot to have turned in place by 180 degrees.

##### BIN 10/10/2021 14:42:51
I was actually trying to figure out how to let the robot know it's time to turn. I don't know what message to take as the beginning of this command. Are they coordinates at the end of the line?

##### Brubby 10/10/2021 14:43:54
you could put a GPS on the bot and read the GPS data

##### DrakerDG 10/10/2021 14:44:05
Always is in the end of the line path?

##### BIN 10/10/2021 14:45:35
yep, arrive at the end of  line and then turn and continue to follow


Ok, I'll give it a try. Thank you

##### D3cpt 10/10/2021 14:52:23
hi, has anyone tried converting .urdf to proto?

##### Brubby 10/10/2021 14:54:42
[https://github.com/cyberbotics/urdf2webots](https://github.com/cyberbotics/urdf2webots) no i have not but may this be of some use?

##### D3cpt 10/10/2021 14:55:14
yep using that but got some errors while converting

##### Beetlepig 10/10/2021 20:10:22
Anyone know why my sensors may not be found? I have two which will and three which won't

##### NobodyImportant 10/10/2021 20:16:44
Which Sensors?

##### Beetlepig 10/10/2021 20:17:25
Well two of my motors (which I know aren't sensors but still an issue) and a distance sensor

##### NobodyImportant 10/10/2021 20:19:10
Code should convert every roatational and linear Motor without problems.

##### Beetlepig 10/10/2021 20:20:09
It just keeps saying device not found?

##### NobodyImportant 10/10/2021 20:21:16
For which device

##### Beetlepig 10/10/2021 20:21:30
All of them

##### Justin Fisher [Moderator] 10/11/2021 03:46:42
I'd suggest double-checking that you're spelling the device names in exactly the same way (need to perfectly match the `name` field of the device), and that you double-check that the devices are contained within the robot node that is running that controller (since a controller can't control devices outside its own robot).  There also used to be a bug where devices that had been dynamically added into a simulation via supervisor commands would be undetectable until the controller restarted, but I believe that was fixed in a recent version of Webots.  Beyond those sorts of mismatches, I've never had any trouble detecting devices.



If that doesn't solve your problem, it might make sense to copy-paste the code you're using to try to detect the devices here in case someone can spot a problem and perhaps also to copy-paste a screenshot of the relevant portion of the scene tree to confirm that the devices do have the names you're using and are located within the relevant robot.

##### Beetlepig 10/11/2021 11:16:16

%figure
![Screenshot_20211011-121529_Gmail.jpg](https://cdn.discordapp.com/attachments/565154703139405824/897080156932431952/Screenshot_20211011-121529_Gmail.jpg)
%end


Can someone please have a look, because I can't spot any errors, and I've got a deadline coming up?

##### Justin Fisher [Moderator] 10/11/2021 13:30:08
Nothing jumped out to me as being wrong in what you posted.  You double checked that these are indeed part of the robot that's running your controller?  Do you have nested robots (one descended from the other within the scene tree)?  I'm not sure how those would divide their devices.  What's the error message it gives you?

##### DDaniel [Cyberbotics] 10/11/2021 13:38:55
Only the devices belonging to the Robot that uses this controller will be accessible, so are you trying to access the devices from another robot? Also, do you call the step function at least once before using the devices? (so after enabling them and before getting their data)

##### Beetlepig 10/11/2021 15:01:50
I'm using the step function in the other part of my code, but it's not even reaching that far, because the sensors aren't even detecting. There is one robot inside of another, but I don't think that I'm accessing sensors that are outside

##### mironix<inactive> 10/11/2021 22:31:35
Hello - i just wanted to give user feedback: type hints in python are as important as in C++ - PyCharm gets lost wyhen everything returns Any from dll 🙂 how do you generate sub tier sdk's? maybe there's a simple trick to enable that? Would do that as a PR


```robot_supervisor: Supervisor = robot.getSupervisor()
root_node: Node = robot_supervisor.getRoot()
robot\_node: Node = robot\_supervisor.getSelf()
```

i fix it like that for now

##### 갈대같은새키ㅇ 10/12/2021 01:08:34
I downloaded and ran the webots program, but there was an error. It's my first time seeing this error. What should I do?
%figure
![unnamed.png](https://cdn.discordapp.com/attachments/565154703139405824/897289607203393626/unnamed.png)
%end

##### Justin Fisher [Moderator] 10/12/2021 04:03:02
I like using Pycharm for linting too, and agree that it would be handy if the Webots python controller.py did include Python type hinting, at least for API stuff that ordinary users would use.  However, I'm not sure how much of this is hand-written, and how much of it is auto-generated again each time the C++ version of Webots that this stuff interfaces with gets updated.  If it is just handwritten, it likely would make sense to have someone make a PR adding the type-hints to controller.py.  If you'd like me to work with you on that, I'd be happy to.  If it is auto-generated, then the challenge would be getting the algorithm that does the auto-generation to produce python type-hints in the python code it generates.  Should be possible, since the source C++ code is itself strongly typed, but I have no idea how easy it would be.



Anyway, in the meantime, like you, I've resorted to explicitly type-declaring the things that I really want to have linted, but have opted to live without linting for most of it.



(Incidentally, it looks like you're trying to use supervisor functionality in Python.  I've written some code that makes that stuff a whole lot easier to do in Python.  Let me know if you'd like me to share that with you.)


My guess is that you probably need to update graphics drivers if you're getting shader compilation errors.

##### 갈대같은새키ㅇ 10/12/2021 05:31:27
Thk you!!  i 'll try it

##### mironix<inactive> 10/12/2021 19:28:03
Who do you think we can ask about the CI pipeline? - I'm very new here 🙂 I don't think i want to use your toolset for now but i'll remember for future that you created something like that - might be worth trying to push out to the public.

##### Justin Fisher [Moderator] 10/12/2021 21:12:33
Webots devs seem to be around here mostly during European working hours, so a question on here during that time is likeliest to get an answer from them.  It may help to ask it as a simple short question.  You could also open a github issue for it which may generate some discussion of possibilities there.


I think that controller.py doesn't seem to change all that much from Webots release to release, so even if it is (at least partially) auto-generated, the upkeep task of manually remerging type-hints with a later version of it might not be all that terrible.  It also seems to include some parts that look like they were probably handwritten.  Both of those make me lean in favor of thinking that it would be worthwhile for someone to go through and add type-hints to controller.py   But it'd be good to get confirmation from a webots dev?

##### mironix<inactive> 10/12/2021 21:20:34
`@Justin Fisher` it's made with swig - i have the makefile on the development channel


and it is only a problem of configuration - still reading up

##### Justin Fisher [Moderator] 10/12/2021 21:23:38
Ah cool.  I'm quite good with Python, but have no experience with swig.  If you run into questions about the Python end of things I may be able to be helpful, but it would take me more time than I currently have available to figure out swig.

##### mironix<inactive> 10/12/2021 21:24:36
I'm a multi lang guy - c++ is my main so i'll handle the in comment hint config there - just need to know how to make that correctly according to standard

##### 갈대같은새키ㅇ 10/13/2021 10:01:53
[https://cyberbotics.com/doc/guide/web-simulation#port-rewrite](https://cyberbotics.com/doc/guide/web-simulation#port-rewrite)


Is there an example of nginx other than "apache" in the web simulation port-rewrite part?

##### rozgo 10/13/2021 17:19:57
This would be helpful... if this is not available in the next few days, we will contribute this portion of the doc, since we will be using NGinx to do this.

##### D3cpt 10/14/2021 12:04:14
Hi, i am trying to update the FOV of my camera in a proto file. In their documentation, it is actually the horizontal FOV and can be calculated from the vertical FOV.

So if the camera has a resolution of 1280 x 720 with a field of view of 90 deg (H) x 50 deg (V), do i still need to use the formula? if yes, is the vertical FOV 50? if no, does that mean i just change 90degree into radian?

##### Justin Fisher [Moderator] 10/14/2021 15:13:43
In Webots, you specify just the horizontal FOV and the resolution, and it automatically computes a vertical FOV that will give you that resolution with square pixels.  Since you want your horizontal FOV to be 90 degrees, you'll need to specify that, which is Pi/2 radians.  You could use the formula to confirm whether this will give you exactly the vertical FOV you were hoping for.  Alternatively, if you have your heart set on having an exactly 50 degree vertical FOV, you could plug values into the formula and do some algebra to figure out what horizontal FOV you'd need to specify in order to get that vertical FOV.  Or if you don't care about resolution, you could tweak the resolution proportions to get exactly the horizontal and vertical FOV that you want

##### DanMag 10/14/2021 15:27:27
Hi,

Between Webots 2021a and 2021b it seems that there was a change in the DirectionPanel: now it is not possible to add a text.

Was this an accident or planned breaking change?

happended in  [https://github.com/cyberbotics/webots/pull/3156](https://github.com/cyberbotics/webots/pull/3156)

see

Webots 2021a: [https://cyberbotics.com/doc/guide/object-traffic?version=R2021a#directionpanel](https://cyberbotics.com/doc/guide/object-traffic?version=R2021a#directionpanel)

Webots 2021b:  [https://cyberbotics.com/doc/guide/object-traffic?version=R2021b#directionpanel](https://cyberbotics.com/doc/guide/object-traffic?version=R2021b#directionpanel)

##### DDaniel [Cyberbotics] 10/14/2021 15:33:16
`@DanMag` in 2021b all procedural PROTO have been ported from LUA to JavaScript and currently the JavaScript version doesn't have an equivalent binding for the gd library, so in that version you currently can't edit the text (but can provide it as images). If you need that flexibility, you can still use the LUA version of the PROTO.

##### DanMag 10/14/2021 15:35:00
thx, well - I found that out when loaded a world generated in 2021a with the newer 2021b version. Is there a way to tell webots to use the LUA version meanwhile?

##### DDaniel [Cyberbotics] 10/14/2021 15:41:29
Not really, the LUA versions are no longer packaged, so if you want to keep using it seamlessly, you can overwrite the current PROTO with this
> **Attachment**: [DirectionPanel.proto](https://cdn.discordapp.com/attachments/565154703139405824/898234066392997918/DirectionPanel.proto)


should be under `webots/projects/objects/traffic/protos`

##### D3cpt 10/14/2021 15:46:17
i see. i will just use pi/2 then. Thank you!

##### DanMag 10/14/2021 15:49:13
`@DDaniel`  Thanks, I'll think about that, but maybe just using 2021a in parallel to b will be the better option

may I ask one more question:

it seems that the textures are defined with absolute pathes - is there an option to set relative pathes (e.g. relative to the wbt file)?

##### DDaniel [Cyberbotics] 10/14/2021 15:57:05
I assume you mean locally available textures, if so yes it should work with relative ones too. I just tested by adding a random texture in the `worlds` folder and then using it by simply referring to its name in the url field and it works. You're trying to define the texture of what?

##### DanMag 10/14/2021 16:27:45
yes, I try to replace the existing absolute pathes with the username of another developer by relative pathes for a AdvertisingBoard. I tried to remove different parts of the path (also put the file into the worlds folder) but did not work. I guess I need to check what the working directory of webots was when it was started by our script

##### Luftwaffel [Moderator] 10/14/2021 19:10:59
`@DanMag` I have a python controller that changes textures of objects in the world.


here you go. I hope that helps
> **Attachment**: [randomize\_texture.py](https://cdn.discordapp.com/attachments/565154703139405824/898294586219302912/randomize_texture.py)

##### shipeng 10/16/2021 01:42:24
Hi, could anyone tell me how can I measure the position of some specified point?



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/898748231658393641/unknown.png)
%end

##### oroulet [Premier Service] 10/16/2021 19:05:43
Is there a way to implement a laser line in webots? I could not find anything . (I do not want a range finder emulation, I want something projecting light or color like a laser does)

##### DrakerDG 10/16/2021 19:27:20
Hello! Maybe you can use a SpotLight with set CutOffAngle and beamWidth around 0.001.  Set castShadow TRUE, intensity in 5 an red color



> **Attachment**: [Laser.mp4](https://cdn.discordapp.com/attachments/565154703139405824/899017762372976700/Laser.mp4)

##### Luftwaffel [Moderator] 10/16/2021 20:12:34
you can add a Transform node and move it to where you want and read out its position.

##### shipeng 10/16/2021 21:40:28
hhh thank you. I did it like you tell me  yesterday

##### Majeedullah 10/17/2021 15:42:21
hi, can someone please help to map the path for Nao robot using ultrasonic sensor in webots

##### Luftwaffel [Moderator] 10/17/2021 19:11:41
Can you be a bit more specific? What do you mean by map?

##### Majeedullah 10/17/2021 19:32:50
sir, I want to Map the ultrasonic sensor value in a graph to show if there is an obstacle in the path or not, the map should just show if the ultrasonic sensor rays.


I have done almost everything but I don't know how to get the graph window in webot where the sensor values will be mapped

##### Luftwaffel [Moderator] 10/17/2021 19:35:32
just double click on the robot and use the robot window

##### Majeedullah 10/17/2021 19:38:49
no, that just show the ranges in a line form, I want to use the diplay command type window

##### Luftwaffel [Moderator] 10/17/2021 19:39:38
Can you try to find some example on google (image or video). Im not 100% sure I know what you want to achieve

##### Majeedullah 10/17/2021 19:40:03
I want this typeof mapping
%figure
![12647_2018_289_Fig1_HTML.png](https://cdn.discordapp.com/attachments/565154703139405824/899381263901802557/12647_2018_289_Fig1_HTML.png)
%end

##### Luftwaffel [Moderator] 10/17/2021 19:43:52
well the sonar sensors in webots are approximated with rays, so it wont be as smooth.


read into this [https://cyberbotics.com/doc/reference/distancesensor](https://cyberbotics.com/doc/reference/distancesensor)

to properly understand how the sensors work in webots

##### Meghana|Contributor 10/18/2021 02:31:14
Hi


Can we build a project using webote?


webots*?

##### Majeedullah 10/18/2021 08:55:51
A good one and informative, can we discuss in inbox??

##### Brubby 10/18/2021 10:06:14
Hi so ive recently bought a monitor to act as a second display to my laptop but when I run webots on the monitor the simulation screen just comes up as a black box, anyone know what I can do about this??

##### Majeedullah 10/18/2021 11:51:50
Can we import matplot library into webot coding environment???

##### DDaniel [Cyberbotics] 10/18/2021 15:58:37
`@Majeedullah` yes, you can just import it as long as it's installed in your system


`@Meghana|Contributor` what do you mean?

##### Timple 10/18/2021 17:01:55
Good day, I would like to keep the world file and proto file seperated. This in order to spawn multiple (number unknown upfront) robots into a world.

How can such a thing be done?

##### DDaniel [Cyberbotics] 10/18/2021 17:03:38
`@Timple` This is the standard hierarchy of a project: [https://cyberbotics.com/doc/guide/the-standard-file-hierarchy-of-a-project](https://cyberbotics.com/doc/guide/the-standard-file-hierarchy-of-a-project). Then you can use a supervisor to import as many instances of your robot as you wish

##### Olivier Michel [Cyberbotics] 10/18/2021 17:04:03
Maybe you can store your protos into the extra project path that you can define in the Webots preferences: [https://cyberbotics.com/doc/guide/preferences](https://cyberbotics.com/doc/guide/preferences)

##### Timple 10/18/2021 17:04:45
Ah, I didn't find the API to spawn robots using the supervisor. Do you have a pointer?

##### DDaniel [Cyberbotics] 10/18/2021 17:05:24
You can use: [https://cyberbotics.com/doc/reference/supervisor#wb\_supervisor\_field\_import\_sf\_node](https://cyberbotics.com/doc/reference/supervisor#wb_supervisor_field_import_sf_node) or [https://cyberbotics.com/doc/reference/supervisor#wb\_supervisor\_field\_import\_sf\_node](https://cyberbotics.com/doc/reference/supervisor#wb_supervisor_field_import_sf_node)\_from\_string

##### Timple 10/18/2021 17:05:54
This is really useful as well! We are using ROS2. And all robots have their own package. I guess I have to figure out how to dynamically compose the projects path in webots.


Still a bit new to webots I guess. I didn't get that `import_sf_node` could also import robots.

The 'from\_string' part looks good. That means I can probably load the proto from a different ROS2 package using a script. And then pass it along as string. This means I would not have to meddle with PATHS.

##### Olivier Michel [Cyberbotics] 10/18/2021 17:08:49
Yes, that's the way.

##### DDaniel [Cyberbotics] 10/18/2021 17:11:40
yes, in your case the `from_string` method is more appropriate. You just need to make sure that it can actually find it, hence why if it's a custom robot, make sure to follow the hierarchy I posted before. If it's a robot already present in the library it should find it straight away, no need to have a protos folder

##### Timple 10/18/2021 17:24:33
What do you mean by actually find it? Can't I just put the complete proto as string?


Idea is some sort of game. Multiple robots can 'join'.


So current idea is to export a ROS2 service to spawn the robot. This could contain the string to be spawned.

This only requires a small utility that forwards this string to the supervisor

##### DDaniel [Cyberbotics] 10/18/2021 18:27:47
Well I guess it depends on the complexity of the robot. If the robot is defined in a PROTO called `myRobot` it's convenient as you only need to spawn it by doing `...from_string("myRobot {}")` instead of passing the full thing every time.

##### Timple 10/18/2021 19:07:50
The documentation kind of only states this:

```python
from controller import Field

class Field:
    def importMFNode(self, position, filename):
    def importMFNodeFromString(self, position, nodeString):
    def importSFNode(self, filename):
    def importSFNodeFromString(self, nodeString):
```


Is there any example? Because this does not really show how to use the importSFNodeFromString function. Except that it can be declared?

##### Majeedullah 10/18/2021 19:08:53
Can you people guide me how ti use display command to get the graph veiw???


I am not getting it from the code written iin the manual

##### DDaniel [Cyberbotics] 10/18/2021 19:52:05
You simply pass it the description of what you want to create, basically the text as it would look like in the world file.  If you want to spawn the Nao robot (available in the library) at a specific position, you'd call: `importSFNodeFromString('Nao { translation 0 1 0 }')`. Likewise, you can spawn a Robot by providing its entire description: `importSFNodeFromString('Robot { children [ Shape { geometry Sphere { radius 1 } } ] }')`. As you can see it quickly gets unwieldy, so instead you can describe the Robot in a PROTO



```
PROTO MyCustomRobot [
]{
  Robot {
    children [
      Shape {
        geometry Sphere {
          radius 1
        }
      }
    ]
  }
}
```

and just spawn `importSFNodeFromString('MyCustomRobot {}')`

##### Timple 10/19/2021 07:12:57
Thankyou! But how do I get to the `importSFNodeFromString` function? How do I get this function available after `from controller import supervisor`?


Hmm, that sounds way to easy! Sorry about that.

I was mislead by the autocomplete in my editor not recognising this function...

##### DDaniel [Cyberbotics] 10/19/2021 07:18:54
no worries 👍

##### Timple 10/19/2021 07:19:15
Although your code snippet is much more usefull than the one in the readme right?


Ah, too bad: `AttributeError: 'Supervisor' object has no attribute 'importSFNodeFromString'`



My code:

```python
#!/usr/bin/env python3
"""spawner controller."""

from controller import Supervisor

# create the Supervisor instance.
supervisor = Supervisor()
supervisor.importSFNodeFromString('Robot { children [ Shape { geometry Sphere { radius 100 } } ] }')
```

##### DDaniel [Cyberbotics] 10/19/2021 07:37:40
oh my bad, you need the field where you want the object to be spawned into


To spawn it at the top level in the scene tree it would look something like this:

```
rootNode = supervisor.getRoot();
childrenField = rootNode.getField('children')
childrenField.importMFNodeFromString(-1, 'Robot { children [ Shape { geometry Sphere { radius 1 } } ] }')
```

##### Timple 10/19/2021 07:45:08
Ah yes, this works! Thanks a lot


Why the `-1` in `importMFNodeFromString` if I may ask?

##### DDaniel [Cyberbotics] 10/19/2021 07:47:21
it specifies the position, -1 is to spawn it in the last position, 0 at the beginning etc

##### Olivier Michel [Cyberbotics] 10/19/2021 07:47:28
This is all documented here: [https://cyberbotics.com/doc/reference/supervisor?tab-language=python#wb\_supervisor\_field\_import\_sf\_node\_from\_string](https://cyberbotics.com/doc/reference/supervisor?tab-language=python#wb_supervisor_field_import_sf_node_from_string)

##### Timple 10/19/2021 07:47:40
Ah, sorry, that is about the position, got it!


Getting from supervisor to node to field was not obvious for me yet. Thank you both for the assistence in getting there!

##### Brubby 10/19/2021 10:49:59
I am attempting to record any collisions that take place between any objects throughout the course of the simulation. I would like to be able to check if any two things are touching per time step and what objects they are, anyone know the best way to go about this beyond the ways listed in the documentation since some of my objects are not robots. I am trying to write some collision detection logic using contact points but unfortunately my controller keeps crashing when i try and acces the point attribute of a ContactPoint object

##### DDaniel [Cyberbotics] 10/19/2021 12:54:06
`@Brubby` it doesn't have to be a Robot, all you need is to be able to get a node reference of it. But I believe you have to go through the entire list of objects you're interested in and check their contact points (if any). Have you taken a look at the `cylinder_stack.wbt` example? It could be of help to know how to access the information you seek

##### Brubby 10/19/2021 13:38:38
Thanks Ive had a look and the way I was going to go about this is to look at the contact points for the object but i need to know what it collided into so i was then going to look at the contact points for all the other objects and use the 'point' attribute which gives the global position of the contact point to find the two objects which have the 'same' contact point location. This is necessary since there are 2 robots and i need to know what they each collided into. Now the trouble im having is with the ContactPoint object im able to access the node\_id attribute but when im try to access the 'point' attribute the controller crashes. I either need to fix the crashing issue or find another way to detect all collisions. Any suggestions for either?

##### mAxYoLo01 10/20/2021 07:04:56
Hello,

I am trying to import a .obj with a .mtl linked to it. When importing it using the 'Import 3D Model' option, everything works perfectly, the material is well kept (image below)



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/900278412294369290/unknown.png)
%end


But when I try to import it using a PROTO file, the material is not added, and the model is basically all one color



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/900278688023715880/unknown.png)
%end



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/900278759226224640/unknown.png)
%end


Any idea on how to fix that?

##### DDaniel [Cyberbotics] 10/20/2021 08:24:06
`@mAxYoLo01` In the PROTO you're only specifying the mesh which only describes the geometry, not the appearance. Since it's working when importing it from the menu, you can either export the result (first image) into `.wbo` and use that instead of PROTO. If you actually need a PROTO, you can look at how the appearance of the shape was defined as (in the scene tree or world file) and do the same in your PROTO

##### mAxYoLo01 10/20/2021 08:26:06
Does it mean there is no way to simply define a PROTO with a mesh and its material? Like I always need to add the huge texture and faceset coordinates? The goal of this was to avoid it so I had clean PROTO files

##### Brubby 10/20/2021 08:42:24
Anyone able to help me out with this?

##### SdKing 10/20/2021 08:51:10
Hi. how do you guys download the whole git repo, its too big that git command go error, i tried with: git clone --depth 1 --branch R2021b [https://github.com/cyberbotics/webots.git](https://github.com/cyberbotics/webots.git)

##### DDaniel [Cyberbotics] 10/20/2021 09:00:21
Afraid not, but if it's meant to be a static object in the environment (that doesn't need to change itself), then using `wbo` might be better than PROTO


you can find here the instructions to setup the development environment: [https://github.com/cyberbotics/webots/wiki](https://github.com/cyberbotics/webots/wiki). Specifically you just need to: `git clone --recurse-submodules -j8 [https://github.com/cyberbotics/webots.git](https://github.com/cyberbotics/webots.git)`

##### SdKing 10/20/2021 09:05:31
thanks, i will have a try

##### DDaniel [Cyberbotics] 10/20/2021 09:10:24
can you share a snippet of your controller? How are you accessing the point?

##### SdKing 10/20/2021 10:02:54
i still got git error
%figure
![Screenshot_from_2021-10-20_17-18-09.png](https://cdn.discordapp.com/attachments/565154703139405824/900323182043607040/Screenshot_from_2021-10-20_17-18-09.png)
%end

##### Brubby 10/20/2021 10:53:52
It manages to do the first print statment but when i try either of the other two it crashes
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/900336009869426709/unknown.png)
%end


So here it managed to print the node\_id's for the contact but then crashes when it gets to printing out the points
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/900336505720021012/unknown.png)
%end

##### Olivier Michel [Cyberbotics] 10/20/2021 12:15:02
Are you behind some special firewall? Can you try from a VPN or a different network location?

##### DDaniel [Cyberbotics] 10/20/2021 12:38:14
`@Brubby` I don't see anything wrong with the statements, I've also tried locally and none of them is crashing the controller for me. Which version of webots are you using ? Can you provide a minimal example (removing anything unrelated) that crashes for you?

##### Brubby 10/20/2021 13:13:38
2021b i recently upgraded from 2021a


i also tried unistalling webots and reinstalling it also


Here is the basic code which causes a crash, i suspect this must be a local problem to me (in fact I had crassing issues with the 'getImageArray' for the camera also after ugrading from 2021a to 2021b also) but im not sure what to do about this as i already tried unistalling and reinstalling Webots.
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/900373884031873034/unknown.png)
%end

##### DDaniel [Cyberbotics] 10/20/2021 13:28:31
That's basically what I tried also 😕 is "bot\_red" a complex object? Do you still get a crash with a very simple thing like a Sphere? You could also try to install the latest nightly build of 2021b  as it contains a few bug fixes: [https://github.com/cyberbotics/webots/releases](https://github.com/cyberbotics/webots/releases)

##### Brubby 10/20/2021 13:31:06
bot\_red is robot with mild complexity yes, but i get the same issue with just a solid cube also


i will try the latest nightly build hopefully that fixes it


which one of the files in assets is it?

##### DDaniel [Cyberbotics] 10/20/2021 13:33:13
which OS are you using?

##### Brubby 10/20/2021 13:33:16
windows

##### DDaniel [Cyberbotics] 10/20/2021 13:33:40
webots-R2021b-rev1\_setup.exe


that could be the difference, I tested on ubuntu 20

##### Brubby 10/20/2021 13:34:44
ah Interesting though i havent seen any one else report this issue yet


also do i need to uninstall my current installation before installing the new version?

##### DDaniel [Cyberbotics] 10/20/2021 13:35:30
it's better yes

##### Brubby 10/20/2021 14:07:20
Ive installed the nightly build and it seems to work now 🥳  thanks!

##### SdKing 10/21/2021 02:14:28
i solved it! its git problem. i reinstall it by creating local deb package which uses different ssl dependency. reference here: [https://www.pianshen.com/article/1111158650/](https://www.pianshen.com/article/1111158650/)

##### Solenoid 10/21/2021 05:38:43
Hi everyone. I've been asking in the GitHub discussions, but perhaps there is a larger pool of people here who would know: how to set the initial joint positions of a UR-like robot in Webots? The base model is horizontal, but I would like to set a custom starting position without having to move it there at the beginning of the simulation. I have not found a satisfying solution via PROTO file editing or a supervisor...

##### Luftwaffel [Moderator] 10/21/2021 05:57:28
`@Solenoid` The starting positions are encoded in the .wbproj file, which gets created when you open and save a world


specifically in the "hidden position" attribute


just open the world with your robot, run the simulation and put the robot in the position you want. Save the world under a new name. A .wbproj file should be created. Open it and inspect it. you can clean it up and just extract the hidden positions and put them into the .wbproj file of the original world

##### Solenoid 10/21/2021 07:31:17
`@Luftwaffel` Thank you for the advice, I'll try that. It sounds like a very convoluted way to do something I would expect to be quite common... then again not having found anybody having the same issue perhaps I'm wrong. Anyway, it would be super cool if we could set the initial joint positions via some arguments in the robot tree.

##### DDaniel [Cyberbotics] 10/21/2021 07:33:02
Normally you can, but since this Robot is a PROTO, they have not been made visible hence why you'd need to change the PROTO itself. I've answered you on the github discussion by the way.

##### Solenoid 10/21/2021 08:59:51
`@DDaniel` Thank you very much. I'm starting to understand the issue at hand. I wanted to avoid modifying the PROTO, thinking that this is a flawless instance of the robot that may be updated officially (similar to ROS URDF files that should be included and not really modified...), but turns out this is the ways to go. However, I have still not figured out how to set the robot joint positions in the PROTO file, nothing that I read from the documentation works... I mean, I seem to have defined the initial positions correctly (no error messages in the console), but the robot stays flat.

##### DDaniel [Cyberbotics] 10/21/2021 09:06:10
You can't simply modify the initial positions, you also need to update the rotations/translations of the following Solids in the chain accordingly. When altering a joint position from the scene tree, this is done automatically, but when modifying things manually like in the PROTO it isn't as straightforward unfortunately. You're absolutely right, if the PROTO gets updated (and it will with next update, as a heads up, we are converting everything to FLU/ENU), you'll need to re-do it, which isn't great. That's why I think the `wb_supervisor_node_set_joint_position` approach might be the less painful one as you'll simply need to add the `DEF NAME` to it, but I agree it's less than ideal

##### HD 10/21/2021 12:12:49

%figure
![Screenshot.png](https://cdn.discordapp.com/attachments/565154703139405824/900718265435848704/Screenshot.png)
%end


Hi, does anyone know how to solve this problem?

##### Thiago Costa 10/21/2021 19:22:57
Hi everyone, i'm trying to implement a playback function in a custom robot. I saw the "motion.h" library on Webots References and there say "The wbu\_motion\_new function allows to read a motion file specified by the filename parameter." So, my question is: I need to create this file previously or this function create it for me? And if the answer is "yes, you have to create", how could I do it? Apparently, this doesn't work as a usual C implementation. If the answer is "Not, the Webots create it", what is the file directory?


Thank's in advance and excuse me for my English

##### Solenoid 10/22/2021 00:34:59
`@DDaniel` Thank you for the insights. That really seems like a basic feature needing some work... I could get the robot in the required configuration for my task.

##### BeachJuic3 10/22/2021 05:03:34
Hello, am trying to add a touch sensor to each of the four legs in the robot spot
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/900972630746738688/unknown.png)
%end


How do i add the "sensor" in the extension slots where they are added directly on the legs itself?
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/900972864080056320/unknown.png)
%end


^ Solve it.


I added touch sensors to "spots" foot which will be a great addition to anyone doing RL projects for quadruped robots. How could i contrib?
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/901053028965187654/unknown.png)
%end

##### Olivier Michel [Cyberbotics] 10/22/2021 10:25:27
Simply create a new PR to submit your contribution: [https://github.com/cyberbotics/webots/edit/develop/projects/robots/boston\_dynamics/spot/protos/SpotLeftLeg.proto](https://github.com/cyberbotics/webots/edit/develop/projects/robots/boston_dynamics/spot/protos/SpotLeftLeg.proto)

##### BeachJuic3 10/22/2021 10:27:02
Thank you!

##### D3cpt 10/22/2021 14:11:47
Hi, anyone knows how to properly convert an image from `camera.getImage()` into a PIL object/ numpy array?

##### Luftwaffel [Moderator] 10/22/2021 19:19:58
Look at the api documentation. You could either get the image as a list (can slow down simulation quite a bit) or you could use opencv-python. I'm pretty certain the latter option would be faster, but you should probably test it


You might want to be careful and only simulate sensors that actually exist on the real robot. I don't know the sensor configuration on spot, but it is feasible that they use torque feedback on the motors to determine the Load on the leg and whether it has ground contact or not


But simplifying functionality through simple sensors can be a good approach

##### ydupuisCESI 10/22/2021 19:24:32
Hi, I am experiencing a strange problem using a ROS controller relying on keyboard input with Webots R2021/Melodic/Ubuntu18.04. The keyboard input is not detected (nothing published in the ROS topic and the robot is not moving) when I am in real time mode but works when I am in fast mode.

The problem arises even with the simplest example : roslaunch webots\_ros keyboard\_teleop.launch

 I have posted an issue on the Github. Not sure it was the right place. Let me know what's best.

Thanks

##### DDaniel [Cyberbotics] 10/22/2021 19:45:44
Recently there was a fix to the keyboard, you should try installing the nightly build instead, that might fix your issue

##### ydupuisCESI 10/22/2021 19:48:50
Would you recommend R2021b-rev1 or R2021c ?

##### DDaniel [Cyberbotics] 10/22/2021 19:49:49
2021c is based on the develop branch, 2021b-rev1 is likely more suitable

##### Luftwaffel [Moderator] 10/22/2021 19:49:56
`@DDaniel` What do versions a b and c stand for now?

##### DDaniel [Cyberbotics] 10/22/2021 19:55:58
The 2021c was supposed to be an additional release (to the semestral one) with the entire library of PROTO and worlds converted to FLU/ENU, but given the amount of work involved and to ensure it's stable it will be released as usual in December, so we are just keeping the distinction in case a major bug is found which requires pushing out a revision of 2021b before then

##### Luftwaffel [Moderator] 10/22/2021 19:57:05
so you forked c from b to add all the new PROTO stuff?


thanks for the clarification 🙂

##### DDaniel [Cyberbotics] 10/22/2021 19:59:36
Well, currently c only contains the develop, the FLU stuff is still on a separate branch (feature-enu-plan) which should be merged into develop sometime soon

##### Luftwaffel [Moderator] 10/22/2021 20:00:09
what is FLU? (front - left - up)?

##### DDaniel [Cyberbotics] 10/22/2021 20:00:17
Yes

##### Luftwaffel [Moderator] 10/22/2021 20:00:53
probably useful for vehicles and drones

##### DDaniel [Cyberbotics] 10/22/2021 20:08:21
Was kinda of a mess before, now it will be far more consistent. But also to make the transition with ROS less painful, with respect to the sensors


[https://github.com/cyberbotics/webots/pull/3073](https://github.com/cyberbotics/webots/pull/3073)

##### Luftwaffel [Moderator] 10/22/2021 20:09:30
yeah it was a pain at times. Especially for beginners. I would help out, but I'm preparing for a Data Science / machine learning job 😃

##### Peide Huang 10/22/2021 23:43:08
Hi all, I came across this error message in Webots when importing numpy on my M1 Macbook. I wonder if anyone has encounter similar issues before. Importing numpy in python console works fine. The Webots version is R2020b. I also tried on the 2021b and got the same error.
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/901254376029560832/unknown.png)
%end

##### BeachJuic3 10/24/2021 11:33:34
Yeah that might be a possibility. I'll let u know after running a few tests

##### D3cpt 10/25/2021 09:15:44
would saving as png then opening with PIL be fast?

When you mention using open-cv, do you mean having it sample from the camera live feed appearing in the render?

##### medrimonia 10/25/2021 12:25:08
Hi all, I'm facing an unexpected behavior with respect to maximal velocity. On a simple robot with 3 DOF.

Although I did not specify any damping, the maximal speed that one of the joint can reach seems to be equal to maxTorque*timestep.



I tried changing both maxTorque and timestep and the equality still holds, if the limit is caused by some hidden damping parameters I haven't noticed, I don't understand how changing the timestep would have a linear relationship with the maximal speed of an articulation.



Two points that might be related to this situation:



1. The robot is not present in the world at the beginning but is spawn from the supervisor using importMFNodeFromString

2. I have tried using the 'getVelocity' method on one Solid at the end of the robot and it always return a 0 vector while the robot is clearly moving.

##### Olivier Michel [Cyberbotics] 10/25/2021 12:57:52
Did you try to change the `Motor.maxVelocity` value?


Also, Are you controlling the motor in torque, velocity or position?

##### medrimonia 10/25/2021 13:00:38
Yes I tried to set it to 100 or 1000, it made no difference


Control of the motor is done in position

##### Olivier Michel [Cyberbotics] 10/25/2021 13:01:59
Thank you. I will investigate the issue and revert back to you.

##### medrimonia 10/25/2021 13:02:33
Thank you 🙂


(If that can help, I also tried setting the P of `controlPID` to 1000, it did not change the behavior)

##### Olivier Michel [Cyberbotics] 10/25/2021 15:29:22
I modified the project/samples/devices/worlds/motor.wbt example and observed a normal behavior: when setting the `controlPID` `P` value to 100 and `maxVelicity` to 100 and `maxTorque` to 200, the measured maximum velocity gets very close to 100, that is 98.7 which looks OK to me. Moreover, this is not dependent on the value of the `WorldInfo.basicTimeStep`. I am sending you the corresponding code.



> **Attachment**: [motor.wbt](https://cdn.discordapp.com/attachments/565154703139405824/902217498454290442/motor.wbt)



> **Attachment**: [motor.c](https://cdn.discordapp.com/attachments/565154703139405824/902217563155624016/motor.c)

##### medrimonia 10/25/2021 15:31:34
Thank you, I will have a look later and maybe try to craft a simpler example than what I have currently to see if I can reproduce the problem using a simple code.

##### Majeedullah 10/25/2021 15:38:26
Sir can you help me to move my Nao robot to any coordinate ??


I have already created a robot simulation which moves freely , autonomously and avoid obstacles, but now i want to move it to a user defined coordinates, how can i do that,  you can text me in private

##### Ranga Kulathunga 10/25/2021 15:45:50
How can set up an NVIDIA Jetson Nano single-board computer PROTO into a vehicle?

##### Haladin 10/25/2021 16:07:12
Hi. I am new to webots.  I am trying to simulate multiple robots and would be grateful for any advice on the best approach.  I noticed that in the [https://github.com/cyberbotics/webots/blob/released/projects/samples/demos/worlds/soccer.wbt](https://github.com/cyberbotics/webots/blob/released/projects/samples/demos/worlds/soccer.wbt) file, each of the soccer robots has it's own definition (e.g .  DEF B1 Robot { ... }, DEF B2 Robot { ... }, etc) .  If I have 20 robots in a simulation, is there a way to create 20 robots in the controller code, rather than copying and pasting the robot definition 20 times in the .wbt file?  Does anyone know of a project that does something similar?

##### DDaniel [Cyberbotics] 10/25/2021 16:09:28
Yes, you can spawn them using a supervisor. You can use this API function and the corresponding mini-example below it: [https://cyberbotics.com/doc/reference/supervisor#wb\_supervisor\_field\_import\_mf\_node\_from\_string](https://cyberbotics.com/doc/reference/supervisor#wb_supervisor_field_import_mf_node_from_string)


By moving you mean transporting? In which case you can use a supervisor and set the translation field of the robot from the controller

##### Haladin 10/25/2021 16:12:26
Thanks `@DDaniel` for your help.  I will study that section.

##### Majeedullah 10/25/2021 16:14:22
Oooh thats great, but i am confused that how can i do it on coding

##### DDaniel [Cyberbotics] 10/25/2021 16:14:52
Some of the cars (not sure if all of them, but the BMW does I think) have configurable slots, you should be able to insert it in those


under `file > open sample world > supervisor.wbt` there is an example of this, where the ball's position is moved around by a supervisor


it's in C though, but the principle is the same no matter the language

##### Majeedullah 10/25/2021 16:19:11
Ok thanks, i will check, if still there was an issue, i will text you in private,

##### Ranga Kulathunga 10/25/2021 17:16:47
Do the configurable slots mean sensor slots (top,  center, ...)? After inserting it into the vehicle, how can add controllers? How it can control the vehicle speeds and so on?

##### DDaniel [Cyberbotics] 10/25/2021 17:22:22
I don't think I understand what you're trying to do. To control the car you don't need the jetson, you can simply code the controller of the vehicle itself (you can checkout examples such as `file > open sample world > city.wbt`

##### Ranga Kulathunga 10/25/2021 17:30:37
Yes, I tried them.  Actually, I wanted to see how the Jetson behaves in a simulation. Thank you `@DDaniel`

##### DrVoodoo [Moderator] 10/25/2021 20:18:48
You can make a physical model of the Jetson board and see how that would behave in the simulation but I can't imagine that's what you mean.


If you mean that you want to emulate the Jetson. Webots doesn't do that

##### D3cpt 10/26/2021 09:51:49
Hi, anyone knows how to move the wheels for a set amount of time? I am currently using .setVelocity to move the wheels' motor and would like them to move for some time step and then stop

##### Benjamin Hug [Cyberbotics] 10/26/2021 10:38:50
You can simply use a counter that you increment by time step and when your counter reach your time limit stop the wheels.

##### D3cpt 10/26/2021 11:54:20
thanks!

##### Rody El Hamod 10/26/2021 14:12:26
hello guys, i have a problem

simulation pauses itself i can't figure out why


i can resume it no problem but it's not practical cause i have to leave it for long hours


it would be really helpful if anyone has any idea or it has already happened to them , thanks

##### Justin Fisher [Moderator] 10/26/2021 16:16:50
Supervisor controllers can issue a pause command.  Is there some risk that you have a supervisor controller doing that?  There's also a keyboard shortcut to pause (Ctrl-0 on Windows).  Is there any risk you might have been hitting that?

##### D3cpt 10/26/2021 20:08:16
anyone knows why when i shift the robot by setting the translation, change rotation motor velocity to 0, position to -inf and resetPhysics, sometimes the robot will shatter?


I think maybe due to something like this? Did anyone experience this after setting the robot's translation?
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/902668863014072410/unknown.png)
%end

##### DDaniel [Cyberbotics] 10/27/2021 06:13:01
are you setting it through the ground on purpose? Also, are you using meshes as bounding objects for the parts in contact with the ground?

##### Rody El Hamod 10/27/2021 06:27:37
my controller is a supervisor but i'm pretty sure there's no pause in it

##### DDaniel [Cyberbotics] 10/27/2021 06:31:05
If you set all controllers to `void` and run the simulation at max speed, does it ever pause on its own? If not, it means it's some of your controllers doing it

##### Rody El Hamod 10/27/2021 06:31:39
i'll run some tests thanks


guys apparently it's happening when i minimize the windows


window*


webots window


on windows 10


pretty weird


i've run a lot of simulations before with my pc locked


never happened


did i mess up some settings?


and when this happens and i try to run it again i have to press the button multiple times


play button


it's not the problem it just paused by itself even though i didn't minimze the windows

##### Majeedullah 10/27/2021 06:55:37
I want to move my Nao robot from origin to a certain point (a user defined), how can I do that? Plz guide in details


Also the robot get slow too kuch whenever it start plotting , why is that?

##### D3cpt 10/27/2021 07:11:41
is it okay that i pm u the problem?

##### Max99 10/27/2021 11:56:52
Good time of the day everyone.



Could anyone here enlighten me on how to solve this issue.



When i run on the terminal "sudo python3 session\_server.py config/session/local.json" and on the other one "sudo python3 simulation\_server.py config/simulation/local.json", it initiates properly but on the server\_session one it returns this ->



"localhost/2000 simulation server is not responding (assuming 100% load)"



I have tried to google, and searched quite a lot but was unfortunate there. Please help me.



Any help would be appreciated.

##### Ranga Kulathunga 10/27/2021 12:29:59
Is there any method to extract trajectory details of the simulation to the outside? I mean writing velocities and other related information to a file or something?

##### DDaniel [Cyberbotics] 10/27/2021 12:43:04
no, you can use the classic file writing methods of the language you're using

##### Skraldefar 10/27/2021 12:48:49
Does anyone know how i can make a closed loop robot? I have designed a 2D parallel robot, but i cannot seem to make the loop closed,  one joint moves off its connection.



I am utilising hingejoints where i am trying to close the loop with a SolidReference, but it does not stay in place when i tell the joint with a motor to move.
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/902901652904886282/unknown.png)
%end

##### Ranga Kulathunga 10/27/2021 12:53:54
I usually use c language. File reading is working but file writing is not working with Webots. Any idea about this issue?

##### DDaniel [Cyberbotics] 10/27/2021 12:54:47
make sure all intermediary solids have `physics`

##### Skraldefar 10/27/2021 12:56:15
Is something especially important, or can i use the standard physics that webots has?

##### DDaniel [Cyberbotics] 10/27/2021 12:58:05
I mean it has to be non-NULL, default value should work

##### Skraldefar 10/27/2021 13:52:45
It seems to have worked, thank you

##### crumpy 10/27/2021 19:36:41
Hi, I'm currently trying to make a solid node with a shape have some level of opacity like glass almost. Is there a texture that would support this in webots?

##### DrakerDG 10/28/2021 04:38:40
You only need change the Transparency value from 0 to 1 in material options.  In this example the right cylinder have 0.2 of transparency.
%figure
![2021-10-27.png](https://cdn.discordapp.com/attachments/565154703139405824/903140689888571442/2021-10-27.png)
%end


If you set transparency in different value of 0, your object don't will have shadow

##### Justin Fisher [Moderator] 10/28/2021 05:29:44
I'm running into a weird issue where my robots are inexplicably losing almost all of their traction, and just spinning their wheels to very little effect.  I've had similar issues in the past if I didn't have the robot node itself have a bounding object, but in this case it does have a bounding object.  I've had similar robots work fine, and have no idea what I might have changed that would have altered this.  (I didn't change contact properties or anything that should have affected this.)



I've also been having another mysterious bug that might be related to this: the body of one robot keeps turning itself green, which is apparently occurring due to the basecolor of its PBR appearance changing, which works as a multiplier on the texture imagemap.  However, this change usually does not appear in the scene tree (but occasionally does), and but if you change the basecolor that does appear in the scene tree slightly away from its apparent setting of 1,1,1 then the color pops back to ordinary.  That made me suspect that maybe that body, which is USED as the bounding object for the robot, was somehow forgetting its bounding geometry at the same time as it was glitching its color, which might have explained the loss of traction.  But unfortunately I can't get the same sort of resetting-values-in-the-scene-tree fix to work for the traction.  So I'm mystified (and very frustrated!).  Help?

##### DrakerDG 10/28/2021 06:12:06
I have it if I understand your context. You indicate that the color in the appearance of the PBR can affect the physical behavior related to friction, in your case your robot loses traction, right?

##### Justin Fisher [Moderator] 10/28/2021 11:39:21
I'm not sure if the color is what's reducing the traction, or if they stem from the same cause, or if these are just two different bugs that coincidentally are happening together.  My guess is common cause or coincidence.



I guess another way of asking my question is: can anyone think of anything that would make a robot lose almost all of its traction so its wheels would start spinning uselessly?  I can rule out many of the obvious suspects like changes in contact properties or other world physics properties, lack of sufficient mass to hold the robot down, center of gravity of the robot not putting enough weight on driven wheels, or the robot node itself not having physics or bounding object enabled.  What else could cause this?


Ok, I think I diagnosed the problem.  It was a case of common cause.  I'd ended up accidentally duplicating robot parts which meant many of my commands were going to only half the parts the robot actually had, so e.g., when you have two superposed wheels, only one of which gets the command to turn, the one that doesn't turn effectively reduces the traction of the one that does.  And when you have two co-located bodies with different colors (a hidden whitish one masked by a green-tinted one), making trivial changes to scene tree properties of the one that hadn't been appearing (the whitish one) apparently makes it become the more visible one again.



If only I had paid more attention to the little spokes in my wheels, I would have seen a set of stationary spokes in amongst the turning spokes and realized what was happening.  Or if only I'd paid more attention to the scene tree, I would have seen that it actually contained a lot more parts than the robot actually should have.  Bleh...


And I guess my list of "obvious suspects" above actually did include the culprit: not putting enough weight on driven wheels.  I usually encounter that culprit when I put the robot's center of gravity too far back on an undriven roller, whereas in this case the "undriven wheels" that were bearing a lot of the robot's weight were hiding right inside the driven wheels where I couldn't easily see them (aside from their stationary spokes being in amongst the spinning spokes).


For some reason the question "Do you have another wheel located inside your spinning wheel that's keeping your spinning wheel from touching the ground?" never arose back when I was teaching this class with actual physical robots!

##### Ranga Kulathunga 10/28/2021 13:01:22
Hi,
%figure
![robot_window.PNG](https://cdn.discordapp.com/attachments/565154703139405824/903267196694839366/robot_window.PNG)
%end


How to zoom/ zoomout these plots?

##### Rody El Hamod 10/28/2021 14:57:30
hello guys, anybody knows how to compile a plugin in webots text editor? documentation doesn't go into details at all


physics plugin

##### DDaniel [Cyberbotics] 10/28/2021 15:03:19
Like you compile a controller, same button

##### Rody El Hamod 10/28/2021 15:03:38
i don't compile my controller, it's programmed in python


but i will check if it's documented


thanks


okay found it


i only need to compile the .c file right .


?

##### DDaniel [Cyberbotics] 10/28/2021 15:06:42
yes, and set it in under `physics` inside `worldInfo`

##### Rody El Hamod 10/28/2021 15:06:45
because there's also the makefile


yeah got that thanks

##### Cloud Salazar 10/29/2021 08:09:49
Can anyone help with importing this Solidworks Assembly to webots so I can simulate it walking in an environment? Any tutorials / resources that could get me started? Thanks!
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/903556214053564426/unknown.png)
%end

##### Anushree Sabnis 10/29/2021 09:19:55
Hello, I'm Anushree. It's awesome to see this helpful and active community.



I'm a student researcher working in swarm robotics, and webots seemed like a great simulator to get my project set up. I wanted to know if the webots Supervisor could be configured for swarm applications? Any tutorials/resources for the same would be really helpful, thank you.

##### DDaniel [Cyberbotics] 10/29/2021 09:59:56
A supervisor can do just about anything, including cheating. I don't know what exactly you need the supervisor to do but I'd say you probably can. You can find several examples in the samples `file > open sample worlds > samples`. The `curriculum` subcategory has some more advanced examples

##### Majeedullah 10/29/2021 13:59:46
Hello bro, how did you added Speed graph to that portion?? Can you please help me?

##### Luftwaffel [Moderator] 10/29/2021 18:54:35
You could try the following:

1. export assembly as urdf

[http://wiki.ros.org/sw\_urdf\_exporter/Tutorials/Export%20an%20Assembly](http://wiki.ros.org/sw_urdf_exporter/Tutorials/Export%20an%20Assembly)

2. convert urdf to proto

[https://github.com/cyberbotics/urdf2webots](https://github.com/cyberbotics/urdf2webots)

##### Mumuxe 10/30/2021 19:46:44
Hi, I'm trying to find out a good setup for working on a M1 Max Macbook pro. Webots seems to be working fine on rosetta with the x86 build. I'm running ROS2 in a virtual machine (Ubuntu 20 arm, in parallels). I was wondering if the `webots_ros2` package could possibly connect to the webots instance running on the macOS host ?

##### Luftwaffel [Moderator] 10/30/2021 19:48:51
I dont see why not. ROS is basically a network protocol. Nodes can run on different machines. Even over the internet if you use a custom vpn


This should not be webots specific. So look on how to connect ROS2 running on different VMs


might have to do some network configuration etc.

##### Mumuxe 10/30/2021 19:50:13
`@Luftwaffel` If i'm not mistaken, on the ros2 approach (unlike webots/ros1), webots is not running any ROS node. The webots\_ros2 package directly starts the webots binary, and seems to be communicating with it through a file socket ? I'm not exactly sure about this

##### Luftwaffel [Moderator] 10/30/2021 19:51:20
And it creates Nodes when doing so, which you can communicate with

##### Mumuxe 10/30/2021 19:52:35
On the setup i'm mentioning, there's not ROS on the macOS side, only the webots instance


I guess waiting for an arm build to run on Ubuntu arm seems easier 😄

##### Luftwaffel [Moderator] 10/30/2021 19:56:32
im not an expert on ROS2

##### BIN 10/31/2021 03:19:10
Hi, if I can't use the math library, how do I figure out cos and sin in C when I already know radians?

##### DDaniel [Cyberbotics] 10/31/2021 08:34:06
You can use the math library

##### DrakerDG 10/31/2021 11:53:47
Maybe thru trigonometry you can do it

##### BIN 10/31/2021 11:55:47
So how do you use it without referring to the math library


However, external libraries are not required

##### DrakerDG 10/31/2021 12:03:22
What is the position that you need? You can use a table or array with the sin and cos values

##### BIN 10/31/2021 12:04:26

%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/904340032616300604/unknown.png)
%end


His coordinate output is not right, it seems not multiplied by the following trigonometric function, what should I do

##### DrakerDG 10/31/2021 13:14:53
I understand that you try calculates the position relative of the robot, right?

##### Intries 10/31/2021 17:10:16
Hey everyone,

I tried to set up image-based lighting via an HDRi for my Webots World but encountered some issues.

Until now the lighting was done by the TexturedBackgroundLight, which is in fact only a predefined directional light wrapped in a proto for a given default skybox.

Then I tried to use a normal HDRi and the "Background" node, where I entered all the urls including the `IrradianceUrl` fields. The resulting scene was clearly changing brightness, when the luminosity value was changed, but the lighting seemed very soft and was not casting any shadows in the way the light was defined by the HDRi. After some searching I found this post: [https://cyberbotics.com/doc/blog/Webots-2020-a-release#simplify-the-hdr-backgrounds](https://cyberbotics.com/doc/blog/Webots-2020-a-release#simplify-the-hdr-backgrounds) It indicates that image based lighting has been removed due to performance issues and suggests that the "Background" node has the same qualities, but in the screenshot that demonstrates this it can be seen that the lighting is supplemented with a custom directional light which is responsible for the shadows in the screenshot. While I understand that image based lighting can be expensive and overdone for simple simulations on low-end hardware, but it seems weird that this support was completly removed even if you are running high end hardware with a low real time (due to other physics related stuff). Can anyone give some insights why this option, which is quite essential for a pbr rendering pipline, has been removed and if it possible to enable it again in the future as an option?

##### Ranga Kulathunga 10/31/2021 17:27:51
Yeah sure `@Majeedullah` First right click on the robot or the vehicle. Select the show robot window. Then we can the window above. we can see all the variations of the actuators and the sensors on that.

## November

##### Rizalfauz 11/01/2021 08:51:30
Hallo everyone

Can webots control multiple robot using ROS controller? Any tutorial about that?



I'm sorry about my English

##### Majeedullah 11/01/2021 08:54:35
I have installed python and also have added it to system environment variable, still get this error
%figure
![20211101_135342.jpg](https://cdn.discordapp.com/attachments/565154703139405824/904654645337657344/20211101_135342.jpg)
%end


I am using webot on this pc for first


Here is the system environment variable window
%figure
![20211101_135542.jpg](https://cdn.discordapp.com/attachments/565154703139405824/904655050285133894/20211101_135542.jpg)
%end

##### DDaniel [Cyberbotics] 11/01/2021 10:07:10
Did you follow this? [https://cyberbotics.com/doc/guide/using-python#windows-installation](https://cyberbotics.com/doc/guide/using-python#windows-installation)

Also python 3.10 hasn't been tested yet, would be better to use one of the versions mentioned in the error message if possible.

##### Brubby 11/01/2021 11:02:10
Hi, I am writing controllers in Python and would like to use some python packages, I do not want to install these on my machine as this may corrupt the OS so ive installed them in a virtual environment. Now im able to get webots to use the python installation in the virtual environement by adding it to my environment variables and im then adding the packages to the sys path so the script is able to use them. This seems to work but isn't very nice. Is there a better way to make Webots run using virtual environement automatically and automatically have access to the packages in the environment?

##### Benjamin Hug [Cyberbotics] 11/01/2021 11:07:14
Hello `@Rizalfauz` , you should be able to control multiple robots by using multiple nodes.

Unfortunately we have not a tutorial with multiple robot on ROS (but on ROS2 we do).

##### Rizalfauz 11/01/2021 18:15:05
Thank you, can you show me the link about your tutorial?

##### Benjamin Hug [Cyberbotics] 11/01/2021 20:32:54
Sure, here it is:

[https://github.com/cyberbotics/webots\_ros2/wiki/Example-Universal-Robots#multirobot-example](https://github.com/cyberbotics/webots_ros2/wiki/Example-Universal-Robots#multirobot-example)

##### its-me 11/01/2021 23:06:29
how do you create custom robot models? i acquired an old MicroBot MiniMover 5 that i want to use for a personal learning project, i basically want to refresh it with a new controller and an android programming interface. But i think it would be helpful to sort out some of the controller work in simulation first so i want to get this added, i have measurements and data from the manual but cant figure out how to import a 3d model and define the joints


here is the manual that i have: [http://www.theoldrobots.com/book21-9/MiniMover5.pdf](http://www.theoldrobots.com/book21-9/MiniMover5.pdf)

page 37-39 shows some of the physical attributes

page 43 there is a switch connected to the gripper when it closes

page  75/76 is the start of the kinematic model



my hope would be to use Webots to design and build the driver firmware (even conceptually), then i can use the API to design and build the android control app using the simulated robot


like i said this is a personal education project, i think im going to make it as an online connected chess playing robot initially

##### DrakerDG 11/02/2021 00:37:26
I like your arm robot, very nice project!


It is possible that your to import 3D model in webots, for example on OBJ format

##### its-me 11/02/2021 00:45:50
Do I have to bring it in as seperate  obj files or are do they need to be seperate bodies?


I can draw up a representation in fusion, I don't need the model to been photo accurate

##### Rizalfauz 11/02/2021 00:47:15
Thank you

##### DrakerDG 11/02/2021 00:55:45
You will need make every moveable part of your robot per separate

##### ykopoblete 11/02/2021 14:11:59
Hi everyone, is there any tutorial about multiagents navigation? For example, N turtlebots with a controller for each?

##### Expert\_Amateur 11/02/2021 15:31:31
Hi, is it possible to simulate a 4 bar crank-rocker linkage in this software? Since the links form a closed loop, I'm not sure how the hierarchy of hinge joints should be

All help is appreciated, thank you

##### DDaniel [Cyberbotics] 11/02/2021 15:36:14
`@Expert_Amateur` you can do closed mechanical loops by using SolidReferences: [https://cyberbotics.com/doc/reference/solidreference#mechanical-loop-example](https://cyberbotics.com/doc/reference/solidreference#mechanical-loop-example)

The sample `file > open sample world > coupled motor` for instance relies on it. Make sure to add a physics node in all intermediary solids or it won't work

##### Expert\_Amateur 11/02/2021 15:39:45
Got it, thank you so much!

##### Luftwaffel [Moderator] 11/02/2021 18:57:01
When you add multiple robots, each will launch and run their own instance of a controller, even if it is the same controller. If you want them to communicate with each other, there is 2 general approaches.

1. You have them directly communicate with one another

2. Each robot communicates with a "Master" controller, which coordinates everything



In Webots you can use emitters and receivers for communication [https://cyberbotics.com/doc/reference/emitter](https://cyberbotics.com/doc/reference/emitter)

[https://cyberbotics.com/doc/reference/receiver](https://cyberbotics.com/doc/reference/receiver)

They basically simulate radio communication

##### vivip2231 11/02/2021 22:14:02
Hi everyone, can someone help me regarding using pyikfast? I was able to get it working in my project, my robotarm controller is working fine, but the inverse kinematics results are a little bit strange. I will tell more detail about it, if someone can help me out with this.

##### Luftwaffel [Moderator] 11/02/2021 22:24:32
`@vivip2231` strange in what way? can you share more info?


You can try my sample world to see a working implementation


[https://github.com/Simon-Steinmann/webots\_pyikfast\_tutorial](https://github.com/Simon-Steinmann/webots_pyikfast_tutorial)

##### Guru 11/03/2021 05:15:49
Hi everyone, I am trying to perform inverse kinematics on spot mini. But there is No information regarding the joint to joint dimensions of the robot(nor the cad).can someone help me regarding this issue

##### Rody El Hamod 11/03/2021 08:22:56
hello guys,

anyone knows how the physics plugin is called to check for collisions ? i mean it's called periodically for example every 1 ms or when the robot move ...


thanks in advance


do you have the urdf file of the robot ?

##### DDaniel [Cyberbotics] 11/03/2021 08:33:09
the function `webots_physics_collide` is called whenever a collusion between two geometries occurs (anywhere in the world), so during a timestep it can be called many times or zero depending on the situation

##### Rody El Hamod 11/03/2021 08:33:33
okay thanks

##### Guru 11/03/2021 08:38:25
No I don't, I am trying to use the proto

##### Rody El Hamod 11/03/2021 08:39:42
there's a urdf2proto function maybe there's proto2urdf

if you can get your hand on the urdf or maybe do it yourself since you have the proto and you can see the children and everything on webots, you can do inverse kinematics with ikpy library



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/905375721160081438/unknown.png)
%end

##### vivip2231 11/03/2021 09:35:15
The tutorial helped me a lot, that's why my controller is working fine (no problem with that). I think the problem is maybe in the urdf file (I generated a new one), because I am not using one of the proto robot arms. Mine is the ABB IRB140  industrial robot, which I downloaded of their official website (CAD model), and I did the necessary things to the imported Robot node. Like i gave the corresponding max,min positions to the motors, specified the velocity, torque fields etc.

The results are strange, because they are slightly over the max, min bounds, OR even if there is a suitable result for the robot, then it is moving towards the target in a strange positions. For example it flips its wrists. I attached a picture, where I think the problem is clearly visible.


You can see by the ABB label on the robot (it has turned upside down), that the robot flipped its wrists for reaching the target.
%figure
![num2.PNG](https://cdn.discordapp.com/attachments/565154703139405824/905390428432506900/num2.PNG)
%end


And there are also some cases where i think the target approaching for the robot should not be a problem, but there are no results for that target position.

##### Luftwaffel [Moderator] 11/03/2021 15:06:12
My controller (specifically the ikmodule) contains algorithms to pick the best solution, so that there is no flipping of wrists etc (ikfast returns all possible solutions). It also checks for the bounds of the motors. You can easily adapt my code for other solvers. The comments should tell you how to do it. If you struggle, let me know.

##### vivip2231 11/03/2021 15:21:36
I adepted it without a problem, it's just after checking the bounds of the motors and masking all the possible solutions with that, it leaves me one solution but that is with flipping the wrists. If i go throught to pick out the solutions that includes flipping wrists ,then i am left with no result :/

##### Luftwaffel [Moderator] 11/03/2021 15:23:36
Just for a sanity check, you could disa le the joint limits and see if it works as intended.

##### vivip2231 11/03/2021 16:01:30
You mean go throught all  of the possible solutions? And see if one of them is a good one?

##### Luftwaffel [Moderator] 11/03/2021 16:02:34
If you use my code, simply don't parse the bounds and change your proto so it does not have limits


Or do it via supervisor controller

##### vivip2231 11/03/2021 16:05:48
Okay i'll try that, and will inform about the   results

##### L4RG 11/04/2021 09:19:16
Good day, I have a simple question: I'm currently following tutorial 3 and have arrived at the step where I should add a texture to the ball ("red\_brick\_wall.jpg"). However, I cannot locate a worlds/textures directory on my PC. What's going on here? The worlds only contains a /sounds directory.

##### DDaniel [Cyberbotics] 11/04/2021 09:31:38
`@L4RG` Hi, you're right, looks like we forgot to update that part based on recent changes as the texture are no longer shipped but are instead downloaded when you need them. For the purpose of that tutorial you can:

- download it from here: [https://raw.githubusercontent.com/cyberbotics/webots/R2021b/projects/default/worlds/textures/red\_brick\_wall.jpg](https://raw.githubusercontent.com/cyberbotics/webots/R2021b/projects/default/worlds/textures/red_brick_wall.jpg) and add it from your local disk.

- use predefined PBRAppearances. To do this, remove the `ImageTexture` node you added to the `appearance` field, click the `appearance` field and press the "+" button. Under `PROTO nodes > appearances` you'll find plenty of options, among which `RedBrick`



Thanks for the report, I'll update the tutorial

##### L4RG 11/04/2021 09:58:07
Great, thanks!

##### Rizalfauz 11/04/2021 15:01:54
Hallo everyone, any tutorial for convert webots proto to urdf or proto to xacro?

##### azevedo 11/04/2021 15:25:38
I think you can use the getUrdf functions...

##### Luftwaffel [Moderator] 11/04/2021 16:49:59
I'm webots youcan export to urdf through the menu or right click I think

##### vivip2231 11/04/2021 16:58:00
Update: I checked the min max positions, and changed them a little bit (some of them was not quite right), and now everything works fine! So I didnt had to delete the limits in the proto file. I have some solutions that are right. Now i have to pick the best one.

##### Luftwaffel [Moderator] 11/04/2021 16:59:57
Awesome, glad to hear it. For picking the best solution I recommend my ikmodule. It also deals with singularities

##### bocchio 11/04/2021 17:14:22
Hi! I'm new to Webots.

I was wondering if we are supposed to register `wb_supervisor_simulator_quit` to avoid crashing in an unexpected manner.

I'm working in C++ and I'm currently running a simulation that crashes once in a while.

But when it does, I end up with a bunch of QtWebEngineProcess zombie processes. But when I send SIGSTOP or quit the sim using the menu this doesn't happen.

Should there be code, handling whatever exception makes the sim crash, that calls `wb_supervisor_simulator_quit`?

I wanted to make sure we are supposed to call it manually

##### DDaniel [Cyberbotics] 11/04/2021 17:21:44
`@bocchio` a memory leak in the handling of the textures occasionally lead to crashes as Webots ran out of memory (especially if you spawn and delete nodes very often). This is fixed in the nightly build of 2021b, you can try that version and see if it works better. If that isn't the case, do you have an idea about what might be triggering the crash? It would be better to find the cause and solve it instead, if it can be reproduced

##### bocchio 11/04/2021 17:59:37
`@DDaniel` Thanks for answering! 🙂

Good to know! Sadly we are using 2021b already.

I couldn't find what's triggering the crash yet. I'll take a deeper look into it and report back in the coming days.

##### Luftwaffel [Moderator] 11/04/2021 18:00:22
Are you using the nightly build though?

##### bocchio 11/04/2021 18:08:33
Oh, my bad! It appears I'm not! Sorry!

##### DDaniel [Cyberbotics] 11/04/2021 18:09:05
you can find it here: [https://github.com/cyberbotics/webots/releases](https://github.com/cyberbotics/webots/releases)

##### bocchio 11/04/2021 18:09:27
`@DDaniel` Thanks! 🙂

##### Majeedullah 11/04/2021 19:06:30

%figure
![IMG_20211105_000609.jpg](https://cdn.discordapp.com/attachments/565154703139405824/905895801279111208/IMG_20211105_000609.jpg)
%end


What is the value of this badic time step by default


Anyone plz

##### DDaniel [Cyberbotics] 11/04/2021 19:09:26
Please refrain from spamming every channel with the same question


As explained in the documentation it returns the timestep defined in the `WorldInfo`: [https://cyberbotics.com/doc/reference/robot#wb\_robot\_get\_basic\_time\_step](https://cyberbotics.com/doc/reference/robot#wb_robot_get_basic_time_step)

##### DrakerDG 11/04/2021 19:11:50
Hi. Is the basicTimestep parameter in the WorldInfo node.   The dafault value is 32, but you can set to value needed
%figure
![unknown-1-1.png](https://cdn.discordapp.com/attachments/565154703139405824/905897143947132958/unknown-1-1.png)
%end

##### xpfcwintergreen 11/04/2021 20:17:35
Hi all! I am a relatively new user and am trying to debug a controller I just wrote.  When I try to manually make, I am met with a series of errors such as the following.

`# updating ur5e.d

\# compiling ur5e.cpp

\# linking build/debug/ur5e.o ur5e

ld: warning: ignoring file /Applications/Webots.app/lib/controller/libController.dylib, building for macOS-arm64 but attempting to link with file built for macOS-x86\_64

ld: warning: ignoring file /Applications/Webots.app/lib/controller/libCppController.dylib, building for macOS-arm64 but attempting to link with file built for macOS-x86\_64

Undefined symbols for architecture arm64:

  "webots::Robot::getDistanceSensor(std::\_\_1::basic\_string<char, std::\_\_1::char\_traits<char>, std::\_\_1::allocator<char> > const&)", referenced from:

      UR5E::UR5E() in ur5e.o

  "webots::Robot::getPositionSensor(std::\_\_1::basic\_string<char, std::\_\_1::char\_traits<char>, std::\_\_1::allocator<char> > const&)", referenced from:

      UR5E::UR5E() in ur5e.o

  "webots::Robot::batterySensorEnable(int)", referenced from:

      vtable for UR5E in ur5e.o

  "webots::Robot::batterySensorDisable()", referenced from:

      vtable for UR5E in ur5e.o

  "webots::Robot::step(int)", referenced from:

      vtable for UR5E in ur5e.o`


Anyone have an idea of what is going on here?  I am having no issues when I compile from the Webots IDE

##### Majeedullah 11/04/2021 20:26:50
No one replied to my previous quiries that's why I posted in other channels as well. And here everyone just send a link to the cyberbotics documents, which are of no use. I am not getting what they've explained. Either they are not related to the question, so plz don't tell that spamming each group. And thanks for sending that golden cyberbotics links. Which are of no use


Thank you, this is really helpful, I will check the impact of changing this timestep. If what I want is not achived, can in send you my queries in private?

##### Luftwaffel [Moderator] 11/04/2021 21:45:02
`@Majeedullah` The documentation is excellent and all the info is there. Here is some tips on how to get the info based on your example:

1.

[https://cyberbotics.com/doc/reference/robot#wb\_robot\_get\_basic\_time\_step](https://cyberbotics.com/doc/reference/robot#wb_robot_get_basic_time_step)

The link brings you to this section:



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/905936135975473152/unknown.png)
%end


Clicking on Worldinfo brings you here
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/905936531489955850/unknown.png)
%end


The first part shows you all the fields available for the worldinfo node. The entries are 'Field Type' 'Field name' 'default value' and 'value range / type'



As you can see, `basicTimeStep` is a float with the default value of 32 in the range of 1 to infinity


So if you want to find any default value for any node, look at the top of the documentation. Hope that helps 🙂

##### Justin Fisher [Moderator] 11/05/2021 00:28:40
I have an odd bug where a Webots track object occasionally disappears from the simulation (roughly once every 5 minutes of simulation runtime), and then causes Webots to crash-to-desktop if a robot aims an infrared sensor at the now-invisible track.  When it disappears, its `rotation` field becomes `[nan nan nan 0]`.  I have no idea what causes this problem, though I can tell that the track's `rotation` field drifts through a lot of different representations of an effectively null rotation as the simulation runs, so perhaps it eventually wanders itself into some sort of gimbal lock or something?



I can get the track to reappear by clicking in the `rotation` field in the scene tree, and then clicking out of it again, which apparently triggers the scene tree interface to legalize whatever numbers (or not-a-numbers, in this case) were present there.



I can also use a supervisor controller's super-omniscience to automatically detect when the track has disappeared by watching for when its `rotation` field starts to contain `nan`.  Unfortunately, I haven't been able to figure out any way to use supervisor powers to make the track reappear.  E.g., setting its `rotation` field back to `[0 1 0 0]` does not work, and instead leaves it with `nan`s.



Is there any way a supervisor controller can trigger whatever the legalization-process is that clicking in and out of this field in the scene tree does?  Or some other other way that a supervisor could fix the fubared `rotation` field of a disappeared track?  Or better yet, some way to keep it from even disappearing in the first place?


I may have found a sort of solution.  If I have the supervisor periodically (once every 3 seconds) force the track back to its original `translation` and `rotation` that seems to keep the track from wandering far enough from this initial state to make itself disappear.  Or at any rate the problem hasn't repeated since I made this change (and it did repeat when I commented out this change), but the bug was rare and unpredictable enough that it's hard to tell whether it's really fixed or I just got lucky.



It's really annoying that track objects need to have physics enabled, so they become movable parts of the simulation itself.  It seems like there should have been an option to create fixed-location conveyer belts that move other things without themselves moving around, which probably would have solved the problem of this one wriggling itself around until it eventually finds an illegal rotation.  Of the many things I've done in Webots, this one conveyer belt has caused way more than its fair share of headaches!  (It also would keep settling into a location where it was hard for objects to exit the top of the belt, and robots get way worse traction on this conveyer than on normal surfaces, so it required a bunch of fiddling with contact properties.)

##### Olivier Michel [Cyberbotics] 11/05/2021 07:47:18
If you can provide a simplified simulation that demonstrates this crash (or divergence to nan coordinates) systematically, it would be nice to open an issue and upload your sample simulation so that we can investigate the problem.

##### D3cpt 11/05/2021 09:11:59
Hi, is it possible to print the simulation speed? Referring to "\_.\_x" beside the simulation time.

##### DDaniel [Cyberbotics] 11/05/2021 09:14:51
print where? You can run a simulation from command line using: `./webots --log-performance=filename.txt,1000 --mode=fast` and after running 1000 timesteps it will generate a report of the performance, including the average simulation speed

##### D3cpt 11/05/2021 09:16:10
while running because I am planning to run my script headless

##### DDaniel [Cyberbotics] 11/05/2021 09:18:47
well, you can estimate it by taking the ratio between the simulated time (`wb_robot_get_time`) and the real elapsed time (using a classic time library)

##### D3cpt 11/05/2021 09:19:46
Thanks. i guess i can try `--log-performance` first

##### Ranga Kulathunga 11/05/2021 11:32:10
Hi, this is about the receiver object. The documentation says that if x is positive then the emitter should be on left and if x is negative then the emitter should be in right. But I got negative values for the x where the emitter is placed on the left. Z is also getting the opposite value.  Anyone can say why the reason for this sign change?
%figure
![reciever.PNG](https://cdn.discordapp.com/attachments/565154703139405824/906143855420796928/reciever.PNG)
%end


This is my simulation. The white one is the receiver while red one is emitter. Receiver prints the emitter direction. However, x and y get opposite sign values.
%figure
![reciever2.PNG](https://cdn.discordapp.com/attachments/565154703139405824/906144426311712768/reciever2.PNG)
%end

##### vivip2231 11/05/2021 12:04:29
Helo, quick question: Can I somehow get the value of the distance sensor with supervisor? (For example: i have a Robot node with an distance sensor and a controller file, but I want to reach thr value within another controller which is for another Robot)


I know how to reach the fields (liek position) but didn't found anything about something like this.


I have a solution in my mind, but i dont know if i should do that or there is an easier way to do it. That's why I'm asking.

##### Rizalfauz 11/05/2021 12:19:58
I just try using emitter and receiver then other robot know the value of other robot sensor



Sorry, I'm not good at English

##### L4RG 11/05/2021 12:22:22
has anyone ever solved this issue?


I am getting the same error with Matlab 2021a, Webots 2021b running on Windows 10. Hope someone can help me out!
%figure
![webots_matlab_issue.PNG](https://cdn.discordapp.com/attachments/565154703139405824/906157238270451712/webots_matlab_issue.PNG)
%end

##### Rizalfauz 11/05/2021 12:47:14
have you run it on webots 2021a?

##### L4RG 11/05/2021 12:54:31
no, I guess I could try to reinstall an older version of Webots to see if that works. Any confirmation that someone has tried this and it worked?

##### Ranga Kulathunga 11/05/2021 13:00:24
Hi, is no one have any idea about this? 🤔

##### ruminus 11/05/2021 13:04:13
Hello, gents



Is there a way to sync up a RangeFinder and a Camera? The obvious way to make a 3D cam would be to create a Camera and a RangeFinder and to place them at the same origin. The issue is that those clearly use different buffers that are out of sync. That's not a problem if the camera is static, but if there is movement, you can't map between the image and the depth map.



Additional problem is that if the buffer is taken from some indeterminate point in the past, you can't reliably map the image to camera position without a timestamp.

##### DDaniel [Cyberbotics] 11/05/2021 13:32:20
`@Ranga Kulathunga` I just checked and it appears to be working as intended, is it perhaps that your emitter/receiver is turned? Something like this
%figure
![a.png](https://cdn.discordapp.com/attachments/565154703139405824/906174093097857124/a.png)
%end

##### Ranga Kulathunga 11/05/2021 14:48:04
Thank you very much. That's the case.

##### D3cpt 11/05/2021 17:19:54
Hi, I was looking for ways to speed up my simulation and found that it runs on CPU. Is there a way to have it run on GPU to increase simulation speed?

##### DrakerDG 11/05/2021 17:36:14
Simulation speed depends on several factors:

- The capacity of your computer

- OpenGL settings and if you have shadows and anti-aliasing enabled

- How complex is your robot, the 3D model, the number of HingeJoins, the configuration of its

 -boundingObject and physical part

- The configuration of the WorldInfo, that basicTimeStep and coulumbusFriction

- How complex is background and aggregate solids

- Controller code can also affect simulation speed.

I do not know if any other factor escapes me, but simplifying each of the previous ones I have achieved a higher simulation speed

##### DDaniel [Cyberbotics] 11/05/2021 17:47:09
printing messages to console is a huge factor as well. Especially if you print sensor data every time step, which is somewhat common.

##### Luftwaffel [Moderator] 11/05/2021 17:48:56
The physics is computed on the CPU and usually the limiting factor. Only visual based sensors such as cameras, lidars etc are accelerated with the gpu. So to increase your performance, the biggest impact can be achieved by increasing your step size and simplifying collision objects (use boxes and spheres instead of meshes for collision). Lastly try profiling your controller and see what portion of time the robot.step function takes up. That is the time the simulation takes. Having this in the 70-95% range means your controller is fast, if it is only 20% or so, your controller does slow things.

##### zevmp 11/05/2021 18:40:58
I'm having an issue installing webots on Linux


I'm using the "Installing the Debian Package with the Advanced Packaging Tool (APT)" method


Everything up until the last step works fine


But when I run "sudo apt-get install webots" I get the following failure:


Err:1 [https://cyberbotics.com/debian](https://cyberbotics.com/debian) binary-amd64/ webots 2021b

  401  Unauthorized [IP: 185.199.108.133 443]

E: Failed to fetch [https://objects.githubusercontent.com/github-production-release-asset-2e65be/156228018/305c8797-4ff4-4854-8d6d-35223e165b21?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAIWNJYAX4CSVEH53A/20211105/us-east-1/s3/aws4\_request&X-Amz-Date=20211105T183816Z&X-Amz-Expires=300&X-Amz-Signature=6f01b1da92dcc51f13f5983a999f6549bb1d57ebdc0c06069d44e285ea8142e3&X-Amz-SignedHeaders=host&actor\_id=0&key\_id=0&repo\_id=156228018&response-content-disposition=attachment](https://objects.githubusercontent.com/github-production-release-asset-2e65be/156228018/305c8797-4ff4-4854-8d6d-35223e165b21?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAIWNJYAX4CSVEH53A/20211105/us-east-1/s3/aws4_request&X-Amz-Date=20211105T183816Z&X-Amz-Expires=300&X-Amz-Signature=6f01b1da92dcc51f13f5983a999f6549bb1d57ebdc0c06069d44e285ea8142e3&X-Amz-SignedHeaders=host&actor_id=0&key_id=0&repo_id=156228018&response-content-disposition=attachment); filename=webots\_2021b\_amd64.deb&response-content-type=application/octet-stream  401  Unauthorized [IP: 185.199.108.133 443]


Any ideas?

##### ruminus 11/05/2021 18:45:05
Probably trying to pull this file:

[https://github.com/cyberbotics/webots/releases/download/R2021b/webots\_2021b\_amd64.deb](https://github.com/cyberbotics/webots/releases/download/R2021b/webots_2021b_amd64.deb)

You can download it and install with dpkg. That's how we do it.

##### zevmp 11/05/2021 18:45:38
Thanks, I'll give it a go

##### Chuck 11/06/2021 01:46:06
hey, I'm having issue with a two wheeled robot I've built. I think the wheels are a slipping a bit when I'm turning, which totally mess my odometry data. Is there a way to ensure that there is no slipping?

##### DrakerDG 11/06/2021 02:10:22
You can add contactProperties to the WorldInfo node and set coulombFriction greater than 1
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/906364860814729266/unknown.png)
%end

##### Chuck 11/06/2021 02:11:11
Yeah that's what I did, but I think the problem lie elsewhere


I'm doing some integrals and I think my dt is messed up because I have some time dilatation on my simulation (0.60x)


is there a way to get the time elapsed that take into consideration the time dilatation?

##### DrakerDG 11/06/2021 02:13:18
Maybe you need increase from mass of robot and / or change the mass center of it.


Have you record your simulation with showing acceleration value?

##### Luftwaffel [Moderator] 11/06/2021 02:17:14
you have to use the simulation time, not real time. Calculate odometry every step and use the timestep (32ms or 16ms usually) as your dt

##### Chuck 11/06/2021 02:21:14
I've just tried using the getTime() method but I'm still having 10-15% error. I'll try to use the exact timestep as you suggest, it may be the issue

##### Luftwaffel [Moderator] 11/06/2021 02:22:44
some error can come from softCFM (soft collisions), where objects are allowed to penetrate each other a tiny bit. but that should not be on such a high magnitude


You also have to take the width of the tires into account. Approximating the distance between tires by their center line might not be 100% accurate. You can try and play with that value until it fits better

##### Chuck 11/06/2021 02:37:24
I'll give it a try, tyty

##### DrakerDG 11/06/2021 03:04:19
I have a question. This penetrations are like calculations errors or like the deformation of collisions?

##### Chuck 11/06/2021 03:23:03
I'm having an issue that's driving me crazy, maybe folks more intelligent than me will see it imediately.

I have a robot which position is defined by (x,y,theta) and the speed by (vx, vy, vth)

If I'm moving forward, and let's say vx is equal to 0.1,  delta\_x = 0.1 * 1 * dt, so x will start incrementing (perfectly normal)

Now let's say that I'm turning 180° so th = 3.14 , and still moving at the same speed, vx is now equal to -0.1.

so delta\_x = -0.1 * (-1) * dt, which means that delta\_x will also start incrementing but it should decrement.


```cpp
  double x = 0.0;
  double y = 0.0;
  double th = 0.0;

  double vx = 0.1;
  double vy = 0;
  double vth = 0;

  double dt = (current_time - last_time).toSec();
  double delta_x = (vx * cos(th) - vy * sin(th)) * dt;
  double delta_y = (vx * sin(th) + vy * cos(th)) * dt;
  double delta_th = vth * dt;

  x += delta_x;
  y += delta_y;
  th += delta\_th;
```


(it is taken from [http://wiki.ros.org/navigation/Tutorials/RobotSetup/Odom](http://wiki.ros.org/navigation/Tutorials/RobotSetup/Odom))

##### Luftwaffel [Moderator] 11/06/2021 03:45:34
If you turn 180 and drive BACKWARDS  (-0.1) instead of forward, x will still increment


You have to keep driving forward after turning

##### Ed\_Jay 11/07/2021 09:51:18
Is there a settings page on which the theme can be changed from "Webots Classic" to "Webots Dusk"?

##### DDaniel [Cyberbotics] 11/07/2021 09:53:42
you can change it in `tools > preferences > theme`


`@Uanuan` please ask the questions in the appropriate channels, not in news. Concerning your question, you can't use the BODY group because it contains things other than geometries alone (contains sensors and joints...). You can however have a group of different shapes for the `boundingObject`, for instance a shape for the body and 4 additional ones for the wheels. So your `boundingObject` can look something like:

```
boundingObject Group {
  children [
    Transform {
      translation ...
      children USE BODY1
    }
    Transform {
      translation ...
      children USE WHEEL1
    }
    ...
  ]
}
```

##### Uanuan 11/08/2021 07:50:48
`@DDaniel` sorry about that, I just realized that I posted the question on news, my fault 😛


Thanks Daniel, I did something similar in the end: robot's children -> group -> group BODY then set robot's boundingField: BODY, and it works well in the simulation.

##### Ranga Kulathunga 11/08/2021 09:19:30
Hi all. Is there any possible way to connect the OMNet++ network simulator with Webots? Does anyone have any idea about this integration?

##### Olivier Michel [Cyberbotics] 11/08/2021 13:28:19
This was done a while ago and is mentioned in this paper: [https://os.zhdk.cloud.switch.ch/tind-tmp-epfl/d45379a3-2eac-4f05-ae38-468a2373ec8a?response-content-disposition=attachment%3B%20filename%2A%3DUTF-8%27%27Cianci\_SIS2008.pdf&response-content-type=application%2Fpdf&AWSAccessKeyId=ded3589a13b4450889b2f728d54861a6&Expires=1636464444&Signature=euj7u77GD746JKFQ98UtN9%2FPBCk%3D](https://os.zhdk.cloud.switch.ch/tind-tmp-epfl/d45379a3-2eac-4f05-ae38-468a2373ec8a?response-content-disposition=attachment%3B%20filename%2A%3DUTF-8%27%27Cianci_SIS2008.pdf&response-content-type=application%2Fpdf&AWSAccessKeyId=ded3589a13b4450889b2f728d54861a6&Expires=1636464444&Signature=euj7u77GD746JKFQ98UtN9%2FPBCk%3D)

##### Ranga Kulathunga 11/08/2021 13:34:10
Thank you so much `@Olivier Michel`

##### Max\_K 11/08/2021 14:49:02
Hello,

I had accidentally set the coordinate system to NUE and now back to ENU, because I use the robot in ROS. I suppose the gravity vector now still points in y direction. How can I adjust the gravity vector so that it points in the z- direction and the robot no longer falls in y-direction?
> **Attachment**: [robot\_falling.mp4](https://cdn.discordapp.com/attachments/565154703139405824/907280561792483328/robot_falling.mp4)


The main problem is that the head of my tf\_tree "world" is rotated incorrectly.
%figure
![rviz_tf.png](https://cdn.discordapp.com/attachments/565154703139405824/907291179761152052/rviz_tf.png)
%end

##### Luftwaffel [Moderator] 11/08/2021 16:35:44
`@Max_K` The gravity always points in the U direction ENU stands for east, notrh, up which correspond to the xyz. you probably have to rotate your ground layer


if you want the y axis to be up, you have to use NUE (north up east)

##### Max\_K 11/09/2021 13:27:44
Yes rotating the ground layer and some other thing worked for me. Thanks for the support!

##### Chu 11/09/2021 14:45:37
hey, I just installed webots on another computer and I'm having issue retrieving LIDAR data with python3


```py
    pointCloud = top_lidar.getPointCloud('list')
    mylist = []
    for i in range (top_lidar.getNumberOfPoints()):
        xyz = [pointCloud[i].x, pointCloud[i].y ,pointCloud[i].z]
        mylist.append(xyz)
```


This works on one of my computer, but on the other I get the following error
```Traceback (most recent call last):
  File "main_controller.py", line 258, in <module>
    xyz = [pointCloud[i].x, pointCloud[i].y ,pointCloud[i].z]
AttributeError: 'SwigPyObject' object has no attribute 'x'
```

##### DDaniel [Cyberbotics] 11/09/2021 14:47:29
The issue should be fixed in the nightly build of webots: [https://github.com/cyberbotics/webots/releases](https://github.com/cyberbotics/webots/releases)

##### Chu 11/09/2021 14:47:49
oh well


I'll give it a try, ty

##### P1kachu 11/09/2021 17:31:37
Hi there!!

While importing any elements one of my students is facing this error 😦 Any solution?
%figure
![Capture.png](https://cdn.discordapp.com/attachments/565154703139405824/907683865328509029/Capture.png)
%end

##### DDaniel [Cyberbotics] 11/09/2021 17:58:47
It means the PROTO isn't currently valid: unbalanced parenthesis, invalid syntax, that sort of stuff. Can you share the PROTO?


I just noticed they are files from the Webots library itself which shouldn't show any errors. You should try to reinstall Webots, removing first the pre-existing ones. What OS are you on?

##### P1kachu 11/09/2021 18:12:40
Windows

##### Ed\_Jay 11/09/2021 19:13:45
Is it possible to mix some files written in ".c" and other's written in c++ (".cpp") together in the same Webots app?  Anything special that needs to be done to accommodate this?

##### Shivanshu 11/09/2021 21:08:22
Hello there

I am very new to webots, I am trying to move a rotational motor at a joint but it doesnt seem to work. Can anyone guide me how to proceed.

This is my setting
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/907738410008064070/unknown.png)
%end


I am currently using this code:

`from controller import Robot, Motor, DistanceSensor, PositionSensor





\# create the Robot instance.

robot = Robot()



timestep = 64

motor = robot.getDevice('door motor')

while robot.step(timestep) != -1:

    motor.setPosition(0.005)

    motor.setVelocity(10.0)

    pass`

##### [Red Dragons] Mat198 11/09/2021 21:11:47
It's possible to import files written in C in a C++ code. I don't know exactly how but i saw that in openCV if I remember correctly

##### DDaniel [Cyberbotics] 11/09/2021 21:13:31
the joint is already at position 0.005, so it won't move

##### Shivanshu 11/09/2021 21:14:36
Can you give me some insight on how to rotate a hinge?

##### [Red Dragons] Mat198 11/09/2021 21:16:30
You want to rotate it like a whell?

##### Shivanshu 11/09/2021 21:16:47
I want to open it like a door

##### [Red Dragons] Mat198 11/09/2021 21:18:38
Just set the Position to an open state (90° = pi/2 rad) then wait some time or set a condition to a close state (0°)

##### Shivanshu 11/09/2021 21:19:03
I need not set a velocity?

##### [Red Dragons] Mat198 11/09/2021 21:19:32
motor.setPosition(1.5)

Wait

motor.setPosition(0)


Nope. The joint is in position control mode

##### Shivanshu 11/09/2021 21:20:04
Ok got it


Thank you for all your help

##### Ranga Kulathunga 11/09/2021 21:25:00
Hi, how can change the value of accelaration and deceleration of a vehicle in Webots?

##### DDaniel [Cyberbotics] 11/09/2021 21:30:51
the dynamics of your car are determined by the parameters you set for your vehicle (time0To100, engineMaxTorque, type, etc). Keep in mind the output torque might depend on only some of the parameters depending on the type of engine you are using, more info is available here: [https://www.cyberbotics.com/doc/automobile/driver-library#engine-models](https://www.cyberbotics.com/doc/automobile/driver-library#engine-models)

##### Ranga Kulathunga 11/10/2021 08:05:07
Got it. Thank you `@DDaniel`

##### wesllo 11/10/2021 10:10:38
Hello, I'm here to ask you for help on webots best practices.

I need to generate a lot of objects (type transform with shape children) from a ros message callback in my controller.

But for some reason, between each call to setMFString() there is a lot of waiting time.

Is there a good practice to create a lot of objects live in the simulation ?

##### DDaniel [Cyberbotics] 11/10/2021 10:15:40
if the objects are somewhat constant, you could load them once when starting but position them somewhere out of view, then just use the supervisor to move them in and out of the actual environment as you need them

##### wesllo 11/10/2021 10:20:00
thanks <@787796043987025941> the problem is that I don't know how many objects I need before the ros callback it can be 90 or 3000 or more y don't know.

##### Heartmage 11/10/2021 14:52:46
Hi I have few really really basic level questions since I am a complete beginner in Webots so can someone help me out?

##### Chuck 11/10/2021 19:44:44
any idea what may cause a huge noise on a simulated LIDAR? (my noise parameter is set to 0)

##### Luftwaffel [Moderator] 11/10/2021 20:33:30
Can you give us more details? How does the noise manifest? Can you post Screenshots or video showing the issue?

##### Chuck 11/10/2021 21:33:07

%figure
![Screenshot_from_2021-11-10_20-44-52.png](https://cdn.discordapp.com/attachments/565154703139405824/908107026851319838/Screenshot_from_2021-11-10_20-44-52.png)
%end


left view is from webots, right from RVIZ

##### Luftwaffel [Moderator] 11/10/2021 21:33:55
Can you enable optional rendering lidar?


In webots


It shows you the lidar beams

##### Chuck 11/10/2021 21:34:38
sure, where do I enable it?

##### Luftwaffel [Moderator] 11/10/2021 21:35:13
Menu on top

##### Chuck 11/10/2021 21:40:24

%figure
![b784b89df5bc4613864f52bc0f9842fc.png](https://cdn.discordapp.com/attachments/565154703139405824/908108860986888262/b784b89df5bc4613864f52bc0f9842fc.png)
%end


Ignore the front one


The noise is always coming from the right

##### Luftwaffel [Moderator] 11/10/2021 21:41:09
Can you show the corresponding rviz again


Both Screenshot of the same time step pls


And I think you can enable to lidar points as well


In optional rendering

##### Chuck 11/10/2021 21:46:16
well they are, something strange is happening



%figure
![b77da9f83cba6abfe60e73f1bea37540.png](https://cdn.discordapp.com/attachments/565154703139405824/908110548086960128/b77da9f83cba6abfe60e73f1bea37540.png)
%end


do you see something odd in the settings?


[https://velodynelidar.com/products/hdl-32e/](https://velodynelidar.com/products/hdl-32e/)


I've reduced the resolution a bit to not slow webots too much


There we see them well, not sure where these artefacts are coming from
%figure
![Screenshot_from_2021-11-10_22-50-42.png](https://cdn.discordapp.com/attachments/565154703139405824/908112176139620382/Screenshot_from_2021-11-10_22-50-42.png)
%end


well I've removed the velodyne model and it seems to have fixed the problem fyi

##### Luftwaffel [Moderator] 11/10/2021 22:16:31
Try increasing the near value a bit


But I'm really not sure

##### Heartmage 11/11/2021 02:54:16
I wanna control the door using a rotational motor...I have done all the steps of adding motor but for some reason when I provide the position it won't move (I am a total beginner in Webots so bear with me )


Someone pls do help

##### DrakerDG 11/11/2021 02:56:39
You need to set a speed of your engine apart from the position.  All in radians

##### Heartmage 11/11/2021 03:06:56
I did try setting the velocity alongside the position but still it didn't do anything

##### Luftwaffel [Moderator] 11/11/2021 03:17:34
You don't have to set the speed. Just the position. Uncomment all speed settings. Make sure your angles are in radians and that you are actually setting the correct positions


You can also attach a void controller, double click on the robot and control the motors manually there

##### Heartmage 11/11/2021 03:24:29
I did write a controller file and well followed a youtube tutorial the code went something like this



```py
from controller import Robot

robot = Robot()

timestep = 64


motor = robot.getDevice('rotational motor')
motor.setPosition(float('inf'))

While robot.step(timestep) != -1:
    motor.setPosition(1.5708)
```


Am I writing the code wrong or something? I did change the controller from void to my script

##### Luftwaffel [Moderator] 11/11/2021 03:25:56
Uncomment the inf line, you also might want to get the joint position in the loop and print it

##### Heartmage 11/11/2021 03:27:19
Ohh alright I removed the inf line but how do I get the joint position? Is there a predefined function for it?

##### Luftwaffel [Moderator] 11/11/2021 03:27:57
Yes, look it up in the motor documentation

##### Heartmage 11/11/2021 03:28:03
Alright

##### Luftwaffel [Moderator] 11/11/2021 03:28:12
Or position sensor more like it

##### Heartmage 11/11/2021 03:29:00
I did add position sensor as well to see the current position of the hinge to see whether the door is fully open or not


But my sensor doesn't work as well it just gives a constant value 🥲

##### Luftwaffel [Moderator] 11/11/2021 03:31:44
Add a void Contoller, run the simulation and double click the robot

##### Heartmage 11/11/2021 03:36:23
It's giving me something like this
%figure
![20211111_090418.jpg](https://cdn.discordapp.com/attachments/565154703139405824/908198445779656774/20211111_090418.jpg)
%end

##### Luftwaffel [Moderator] 11/11/2021 03:36:59
Toggle overwrite controller, select the motor and change the position there

##### Heartmage 11/11/2021 03:40:38
It still won't open the door just blinks nothing else happens

##### Luftwaffel [Moderator] 11/11/2021 03:41:05
Then it is not the controller but your robot model


Something is set up wrong

##### Heartmage 11/11/2021 03:44:56
The steps that I followed are



1) Add door from the apartment structure



2) Transform it to base node



3) Again transform it to Robot



4) Get into children of door and add two distance sensor for sensing if a person is inside the room or not (again the sensor doesn't give any value except a constant 1000)



5) go to hingejoint and under devices add position sensor and rotational motor


This is how I setup the door

##### Luftwaffel [Moderator] 11/11/2021 03:45:50
You have to make sure anchor position and the rotation axis are correct

##### Heartmage 11/11/2021 03:47:44
Where can I check that? I can see something called rotation in door but not the anchor position

##### Luftwaffel [Moderator] 11/11/2021 03:48:11
I'm on my phone, so I can't say

##### Heartmage 11/11/2021 03:48:41
Ohh nvm it opened now when I deleted and added the door


Guess I must have done something to mess up the system of the door mechanics


The door works now even with the controller script but my distance sensor still aren't giving me any value except a constant 1000


Did I mess up the setting up the sensor as well?😅

##### Luftwaffel [Moderator] 11/11/2021 03:58:16
Read the sensor documentation. All explained in there


Make sure you understand sensor type and lookup table

##### Heartmage 11/11/2021 03:59:33
I did the documentation and understood most of it except the lookup table


Couldn't make a head or tail of it 😅

##### Luftwaffel [Moderator] 11/11/2021 04:00:11
Try and read it again carefully

##### Heartmage 11/11/2021 04:04:49
Alright


I understood now that 1000 means it's within 0.1m of my sensor hence the constant value but is there anyway that I can get a continuous change in value so that I can detect when the person is actually close to the door so that I can close/open the door as the bot moves out/in

##### Luftwaffel [Moderator] 11/11/2021 04:23:56
That you define in the lookup table, in the easiest setup you have a min and max range and a corresponding value for each, anything in between returns a interpolated value

##### Heartmage 11/11/2021 04:35:57
Ohh alright I thought lookup table was set in stone thanks again it has helped me a lot I will try out


So umm now everything works but for some reason my PS values are coming way different than what is expected


😅


It is expected to start from somewhere 0.007 to 0.009 and end at -1.57 to -1.40 but mine comes out to be -0.13 😅



PS means position sensor

##### Stevennc [Premier Service] 11/11/2021 17:18:42
How do I call front left/right steer using the Altino car? I'm trying to use the controller class instead  of the driver class and I can't figure out the front wheel turning.

##### AP\_LISC 11/11/2021 17:20:15
Hey guys,

I have been trying to load an old environment file which was created in V8.4.0 onto the latest version and am greeted with a very long list of errors (largely I assume due to the change in architecture) and a lot of missing textures. Is there a good way to convert these old files and controller to make them compatible with the newer versions?

##### Şükrü 11/11/2021 18:12:01
Hey guys, I have a robot vehicle BMW X5 and I'm trying to make an autonomous car. My console keeps spamming this warning:

WARNING: Robot > Speaker: Sound file 'sounds/engine.wav' not found. The sound file should be defined relatively to the controller, the PROTO or absolutely.

I couldn't solve it. It doesn't crash my controller and my code works fine but it makes my computer work slower. Can you help me out here?

##### DDaniel [Cyberbotics] 11/11/2021 18:46:00
if you don't care about sound, you can just set the `engineSound` field of the BMW to `""`


unfortunately not

##### Şükrü 11/11/2021 18:50:37
Thanks for the answer

##### DDaniel [Cyberbotics] 11/11/2021 18:50:58
the motors that control the steering are named `left_steer` and `right_steer`, so you need to get the device tag (using `robot.getDevice("...")`), then just set the desired position as you do with any motor

##### AP\_LISC 11/11/2021 19:23:10
Ouch, that hurts. Thank you for letting me know! Is this still the right forum to ask any questions that I might have about using V8.4.0?

##### Stevennc [Premier Service] 11/11/2021 19:54:35
Thanks I finally figured it out!

##### nozomi 11/12/2021 11:09:54
Hey guys, I was trying the `Tesla Model 3` example from `cyberbotics/webots_ros2` repository but the car crashes to railing. In the instruction page it says i just need to simply run a ros2launch file. Should I also modify some parameters to solve this issue? My webots version is R2021b, ros2 version is foxy.
%figure
![tesla_crash.JPG](https://cdn.discordapp.com/attachments/565154703139405824/908674967309254676/tesla_crash.JPG)
%end

##### Benjamin Hug [Cyberbotics] 11/12/2021 11:20:05
Hi, I assume you install the package and did not build it from source, isn't it ?



This example depends on `ros2_control` which has been recently modified.



Thus for `Foxy` the released package `webots_ros2` is not yet ready to handle those modifications on  `ros2_control`. It will come in the next Sync.



One way to handle this would be to use `Foxy testing` but you can also wait for the sync.

##### nozomi 11/12/2021 11:27:42
Yep, i install by package and the answer is quite clear to me. Thanks a lot for your help!

##### Stevennc [Premier Service] 11/12/2021 17:59:43
Error I keep getting when setting up Emitter and Receiver.  `Error: wb_receiver_get_data(): the receiver queue is empty.` Anybody see what I'm doing wrong? Thanks!
%figure
![Capture.PNG](https://cdn.discordapp.com/attachments/565154703139405824/908778101696258048/Capture.PNG)
%end

##### DDaniel [Cyberbotics] 11/12/2021 18:13:36
You enabled the receiver with a sampling period of 10 seconds, is that intended? Also, did you try to put the reception on a loop?

Inside the loop you should check the queue length, when it becomes non zero you read  the data

##### killer\_2 11/12/2021 18:31:57
Hello,

I'm using Webots2021a and I want to detect a red line while white line following. I CANNOT use the camera.



I used IR sensors but, when the robot enters the red line, it still reads the same values as it read during white line following.


What could be the reason for this? Any help is much appreciated.

##### Stevennc [Premier Service] 11/12/2021 19:25:10
Thanks for the info, it helped me understand a lot more. This is what I've written and the receiver doesn't seem to work.
%figure
![111.PNG](https://cdn.discordapp.com/attachments/565154703139405824/908799602608722000/111.PNG)
%end

##### killer\_2 11/12/2021 21:09:02
From where can I find 2021a reference manual? The website contains 2021b

##### Luftwaffel [Moderator] 11/12/2021 21:12:52
the manual should pretty much be the same


`@killer_2` can you post a screenshot and perhaps sensor values of your issue?


and were you using a distance sensor in infrared mode?


`@Stevennc` your issue is more a fundamental python programming issue. You call functions without storing their return values in variables. I made a quick working controller. It assumes that you have 2 robots, named `'robot_1'` and` 'robot_2'`, both with a receiver and emitter. The same controller can be run on both.
> **Attachment**: [emitter.py](https://cdn.discordapp.com/attachments/565154703139405824/908843567068356648/emitter.py)

##### Stevennc [Premier Service] 11/13/2021 01:13:45
Thank you very much, I now understand. I appreciate you taking the effort to write that code. It's much clearer now.

##### Zev 11/13/2021 02:36:18
I'm getting a linker error when trying to make one of my controllers


I'm for the most part using the standard makefile, and I just split up my controller into two files


Where the first one is including the header file of the second


But it seems like the gcc command isn't attempting to link the cpp file of the second, and so the linker isn't finding any of the functions in the second file


Any ideas?

##### Luftwaffel [Moderator] 11/13/2021 03:13:34
This sounds like a general c compiler problem, not a webots problem. Google the console error output

##### Zev 11/13/2021 03:14:58
It's a problem with the makefile


right, the gcc command doesn't link the files, and I don't know how to edit the gcc command


I guess knowing how to change the gcc command is

##### killer\_2 11/13/2021 04:16:22
Yes, I used distance sensors in infared mode


I used 8 distance sensors. 4th and 5th sensors fall on top of the line.

Readings on red line --> 718.592, 718.735, 718.837, 223.087, 223.087, 718.837, 718.735, 718.592


Readings on white line -->  716.346, 716.689, 716.964, 222.542, 222.574, 717.271, 717.201, 717.063,

##### Luftwaffel [Moderator] 11/13/2021 04:19:28
can you show a picture? And how is the line defined`?


ohhh nvm, white is all colors at 100%, including red


you have to do a black line

##### killer\_2 11/13/2021 04:23:04
A line has a thickness of 3cm.
%figure
![IMG-20211113-WA0006.jpg](https://cdn.discordapp.com/attachments/565154703139405824/908934972029665290/IMG-20211113-WA0006.jpg)
%end


Yes, they are on a black background.

##### Luftwaffel [Moderator] 11/13/2021 04:23:29
do white background and a black line


or a grey line


white will give you the same as red

##### killer\_2 11/13/2021 04:24:37
I cannot change the color of lines. Robot MUST follow white line on a black background and change direction when it detect a red line.

##### Luftwaffel [Moderator] 11/13/2021 04:24:53
well then infrared is not the way to go


you cant change the world or line color?

##### killer\_2 11/13/2021 04:26:53
Neither.

I can change colors for testing purposes.



But the final task has to be completed in the given world, which has white, red lines on black background.

##### Luftwaffel [Moderator] 11/13/2021 04:27:49
then seperate the tasks, have the line following behavior, and then use a different sensor to detect the color

##### killer\_2 11/13/2021 04:28:27
Yes, I'll try an alternative method. Thank you :)

##### Luftwaffel [Moderator] 11/13/2021 04:30:54
you are welcome 🙂

##### raymundbacho123 11/13/2021 07:14:58
Anyone can send a pdf a manual toturial of webots this is for my education purpose

##### AP\_LISC 11/13/2021 20:15:34
I am trying to initialize the sensors and wheels of a surveyor bot and I am writing this controller in matlab. I see that webots seems to be fine initializing camera and an emitter but anything else, it says that it "cannot find the device" - even though I see the correct device with the same name. Attaching a snip of the scene tree and the error I am getting to see if it helps..
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/909174674997522432/unknown.png)
%end

##### Luftwaffel [Moderator] 11/13/2021 21:46:13
The name you enter in DEF is not the same as the name


make sure the name of the device is correct

##### AP\_LISC 11/13/2021 22:26:28
I've been getting the name from within the "node". For instance, the front distance sensor is named as "ds0" as shown here  -
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/909207616150974524/unknown.png)
%end

##### Luftwaffel [Moderator] 11/13/2021 23:27:06
`@AP_LISC` Can you show your code? And error message?


If you are using python, you can use this general device-getter code I wrote and adjust it to your liking
> **Attachment**: [get\_all\_devices.py](https://cdn.discordapp.com/attachments/565154703139405824/909234858973356032/get_all_devices.py)

##### BIN 11/14/2021 02:18:28
Hi all, can webots import inkscape maps?

##### AP\_LISC 11/14/2021 05:02:44
I am using matlab for my "controller". Here's what I have on the code
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/909307340094836746/unknown.png)
%end


and here's the error -
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/909307923623202846/unknown.png)
%end

##### Luftwaffel [Moderator] 11/14/2021 05:10:34
Arknights t familiar with Matlab, why are camera and emitter color coded and distance sensor not? Did you initialize everything correctly? Can you perhaps post the controller file?

##### AP\_LISC 11/14/2021 05:17:53
So, this piece of code is a work in progress and will not run. But the reason camera and emitters are colored in green is that they are global variables and the distance\_sensor is not color coded is because I have not yet started using it.
> **Attachment**: [matlab\_reduced.m](https://cdn.discordapp.com/attachments/565154703139405824/909311155950985246/matlab_reduced.m)

##### Luftwaffel [Moderator] 11/14/2021 05:24:52
I can't really help you further, wait for the devs in a couple of hours

##### AP\_LISC 11/14/2021 06:10:48
for sure. Thanks a lot for your help 🙂

##### killer\_2 11/14/2021 06:10:57
How can I transmit a float value from one robot to another?

Emitter send() expect a const void* type.

I'm using C++

##### Luftwaffel [Moderator] 11/14/2021 06:12:31
Read the documentation for emitter and receiver, it explains everything in detail

##### killer\_2 11/14/2021 06:35:06
It let me send a whole array. But when I try to transmit only a single element, it raise an error 😕

Cannot convert double to const void *

##### Luftwaffel [Moderator] 11/14/2021 06:56:06
Send an array with a single value.

##### killer\_2 11/14/2021 07:58:13
Thank you :)


I have a robot arm connected to a slider joint  (like a Scara arm) When I simulate, the arm starts vibrating (jumping up and down) while the robot moves.



I tried changing the linear damping constant. But it didn't have any effect.



What could be the reason for this?

##### Luftwaffel [Moderator] 11/14/2021 18:33:16
Can you show a video? (webots lets you record).

##### killer\_2 11/14/2021 22:45:06
We solved that. Thank you!


Can the rotational motor turn 360 degrees or only 180 degrees?



When I try to rotate it for 270 degrees, I got a warning saying the requested position is too big.

##### Luftwaffel [Moderator] 11/14/2021 22:53:39
`@killer_2` You can define the limits, I think by default they are either infinite or 2 pi. Remember that the angles are in radian, not degrees.

##### killer\_2 11/14/2021 22:59:04
Yes I gave 4.712 which is the rad value for 270 degrees.

I got a warning saying "Robot -> HingeJoint -> Rotationa

Motor : too big requested position 4.712 > 3.14159"

##### Luftwaffel [Moderator] 11/14/2021 22:59:43
Then you have to go into your robot and change the min and max pos

##### Stevennc [Premier Service] 11/14/2021 23:41:57
When I try running the code nothing happens and I finish with an exit code 3 on pycharm. I do have my "robot\_1" and "robot\_2" set up both with a emitter and receiver.  It seems to never go into the second while statement because the getQueueLength is always 0.  Do I need to declare variables e\_channel and r\_channel  at the top as integers?
%figure
![cool.PNG](https://cdn.discordapp.com/attachments/565154703139405824/909589001533521970/cool.PNG)
%end

##### Luftwaffel [Moderator] 11/14/2021 23:55:08
I used this world with the controllers
> **Attachment**: [emitter\_receiver\_test.wbt](https://cdn.discordapp.com/attachments/565154703139405824/909592320515649577/emitter_receiver_test.wbt)

##### Stevennc [Premier Service] 11/15/2021 01:48:22
When I launch it on the world I get < Starting controller: python.exe >   Is that what you get or does it also print the msg?

##### Luftwaffel [Moderator] 11/15/2021 01:58:10
It should print


it should look like this:



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/909623757189050368/unknown.png)
%end


you do need the controller in the correct folder


try opening this, it is the project in the correct structure
> **Attachment**: [emitter\_receiver\_test.rar](https://cdn.discordapp.com/attachments/565154703139405824/909624206470283274/emitter_receiver_test.rar)

##### unclenastyfingers 11/15/2021 02:49:04
I installed Webots8.0.2 from the github, it's asking for an email and password. How can I create an account or receive license?

##### Luftwaffel [Moderator] 11/15/2021 02:49:59
[https://www.cyberbotics.com/#download](https://www.cyberbotics.com/#download)


just get it from here


or do you need an old version?

##### unclenastyfingers 11/15/2021 02:52:04
Im trying to use webots with choregraphe to simulate


im using/testing on 2 versions of choregraphe: V6(2.8.6) and V4-5(2.1.4)


will the newest version of Webots work with those versions above?

##### Luftwaffel [Moderator] 11/15/2021 02:55:16
you will have to wait for the devs to answer that, they are in switzerland

##### unclenastyfingers 11/15/2021 02:56:11
ok, thanks

##### killer\_2 11/15/2021 04:15:24
Do you have a similar controller for C++?



I'm having trouble unpacking the received packet when I transmit an array of floats. When I read the received signal, it gives me memory addresses. I tried playing around with pointers, but still I'm stuck.


I can read received data when I transmit strings and characters. But I'm having trouble with reading a received array.

##### Ed\_Jay 11/15/2021 07:32:17
Is there a way to slow down keyboard input.  The slighted touch of a key sends numerous repeated values to keyboard.getKey.  I've tried introducing hysteresis to throttle how often I check by issuing the getKey call, but I still get an abundant stream of repeated chars.   Thanks!

##### Olivier Michel [Cyberbotics] 11/15/2021 07:33:00
Choregraphe is not supported any more. You can find more information here: [https://github.com/cyberbotics/naoqisim](https://github.com/cyberbotics/naoqisim)

##### Stevennc [Premier Service] 11/15/2021 19:59:18
only python

##### MarkIV 11/16/2021 08:42:53
I'm trying to use Visual Studio Code on Linux and attach the process to my controller in Webots. Every time I do this, the breakpoints aren't paused. I just want to debug the standard robot project, darwin-op and the controller, walk.

I use the makefile given and can build the walk file, but once I attach it the webots walk controller, the breakpoints never pause the program. Does anyone have any ideas of why this could happen?

##### Vinay 11/16/2021 15:43:32
Hello

Need example code of position sensor

##### DrakerDG 11/16/2021 16:00:02
\# Initialize sensor

position\_sensor = robot.getDevice('position\_sensor')

position\_sensor.enable(timestep)



\# Get value sensor

print(position\_sensor.getValue())

##### Vinay 11/16/2021 16:57:25
Thank you so much

could you also share the example code of rotational motor

##### DrakerDG 11/16/2021 17:06:37
\# Initialize Motors

left\_motor = robot.getDevice('left wheel motor')

right\_motor = robot.getDevice('right wheel motor')

left\_motor.setPosition(float('inf'))

right\_motor.setPosition(float('inf'))



left\_speed = 0

right\_speed = 0


Every name must be the same as your every device

##### jmarsik 11/17/2021 01:51:47
Hello guys, is it still true that it's not possible to use appearance with ImageTexture for Shape with Mesh geometry? I have found some mentions in this Discord in the past, I see nothing about it in the documentation and I have found one particular file `pen_mesh.wbt` in tests in GitHub repo which contains such a situation but unfortunately the world file does not work at all (the mesh and the controller are missing).


Ok, now I see that it somehow works with OBJ file, but not with STL file. Is that right? When I convert this STL file to IndexFaceSet, then the texture can be applied, or at least I think that it can.


After further research I understand that I can't use textures with STL mesh. I knew this probably all the time but I had an object in Webots from the past that was textured (and IndexedFacieSet) and I was convinced that this object was created by File - Import 3D mesh from STL file. Obviously, it wasn't!


But then there is a new problem. I have an OBJ file exported from Blender that contains UV mapping and I have a PNG file with the texture. For example, in MeshLab this shows ok and the texture is applied correctly. But in Webots when I use Mesh node with ImageTexture, the texture is applied in a wrong way, it's shifted. When I use File - Import 3D mesh on this OBJ file and create IndexedFaceSet from it and apply ImageTexture to this ImageFaceSet, it shows correctly. Am I doing something wrong or is there a bug?

