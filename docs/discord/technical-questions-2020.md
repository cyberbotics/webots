# Technical-Questions 2020

This is an archive of the `technical-questions` channel of the [Webots Discord server](https://discordapp.com/invite/nTWbN9m) for year 2020.

## January

##### Shanaka 01/02/2020 08:10:14
currently working as a research engineer in the department of electrical and electronic engineering, University of Peradeniya, Sri Lanka. These days, I engaged to design simulation using PUMA 560 robot manipulator in WEBOT and note that I'm very new to webot. 



I modified the end-tool of the manipulator by replacing the Pioneer gripper



I  control this entire manipulator (with new gripper) by modifying puma560.motion file and puma560.c file. 



But I need to add dynamics and individual joint controllers to this simulation with the idea of implementation in real world. So i check puma560.c file and there I found  functions called 



wbu\_motion\_new("puma560\_1.motion");

wbu\_motion\_play(motion);

but I was not able to find the definition of these functions anywhere. ( I checked motion.h Motion.hpp Motion.cpp files.) Although I can find the function definitions inside the above-mentioned files, still I was not able to find function definitions and how the given angles fed to motors in the manipulator by wbu\_motion\_play() function. 



The final target is to implement the controller in the real world using Raspberry pi or FPGA microcontrollers. So by using wbu\_motion\_play() functions how can I do it? Where can I find the function description? If this method is impossible, it will be great if you can give guidance to make it a success. 



your response will be highly appreciated !!


this is my modified PUMA560
%figure
![image.png](https://cdn.discordapp.com/attachments/565154703139405824/662206323357646869/image.png)
%end

##### David Mansolino [Cyberbotics] 01/03/2020 07:32:57
`@Shanaka` instead of using motion file you should control directly the motor individually  (in speed, position or torque/force) using the motor API: [https://cyberbotics.com/doc/reference/motor#motor-functions](https://cyberbotics.com/doc/reference/motor#motor-functions)

You can easily get the name of the individual motors by double-clicking on the robot to open the robot-window.

IF you didn't already did, I strongly recommend to follow our tutorial (which explains how to control the motors individually): [https://cyberbotics.com/doc/guide/tutorials](https://cyberbotics.com/doc/guide/tutorials)


`@BoBo73` Unfortunately the motion editor is not available in the latest version of Webots anymore, instead you should use directly motor control: [https://cyberbotics.com/doc/reference/motor#motor-functions](https://cyberbotics.com/doc/reference/motor#motor-functions)


`@Redsign DEMI` and `@sugus105`, you can export your robot in VRML from SolidWorks and then import this VRML file in Webots directly (not that this will import only the shapes, you will then have to add solids, bounding objects, physics, sensors, etc.). Or import from SolidWorks to Blender and then Blender to Webots, here is an example with Catia (Solidworks works similarly): [https://youtu.be/L0FVsFD2rS4](https://youtu.be/L0FVsFD2rS4)


`@Tahir`, there are many ways to increase the lightning of your scene, have you tried increasing the value of the Background.luminosity field for example?


`@swebdev`, if it is the root node you can simply add a bounding object without any Physics node. Otherwise you can use a SolidReference and set it's 'solidName' field to '<static environment>' ([https://cyberbotics.com/doc/reference/solidreference](https://cyberbotics.com/doc/reference/solidreference))


`@SomeOne`, yes you can use Blender to create your robot model and then export it to PROTO using our Blender-to-Webots converter: [https://github.com/cyberbotics/blender-webots-exporter](https://github.com/cyberbotics/blender-webots-exporter)


`@Shanks`, yes, it is highly recommended to start with the tutorials: [https://cyberbotics.com/doc/guide/tutorials](https://cyberbotics.com/doc/guide/tutorials)


`@nap`, are you trying to launch your controller yourself as an 'extern' controller?

##### yash 01/03/2020 09:34:20
I am facing an issue to import the robot from solidworks to Webots . Can anyone please help regarding this problem.?

##### David Mansolino [Cyberbotics] 01/03/2020 09:34:51
`@yash` yes, what is your issue ?

##### yash 01/03/2020 09:37:58
I have converted the solidworks file in VRML format ... but at the time of import in webots error occurs.


I wanted to know the exact steps to import the file in Webots since its not mentioned in the documentation/reference manual.

##### David Mansolino [Cyberbotics] 01/03/2020 09:41:08
What are exactly the error you get?

It might be normal that you get some errors since Webots doesn't implements all the fields of VRML (such as colorPerVertex for example), but this shouldn't prevent the shape to be functionnal.

##### yash 01/03/2020 09:48:33
this the error
%figure
![Screenshot_143.png](https://cdn.discordapp.com/attachments/565154703139405824/662593133833486356/Screenshot_143.png)
%end

##### David Mansolino [Cyberbotics] 01/03/2020 09:51:47
The `Separator` node is indeed not supported in Webots.


Please make sure when you export from SolidWorks that you select VRML97 and not another version of VRML.

##### yash 01/03/2020 10:12:06
error: Skipped unknown 'color' field in IndexedFaceSet node.

error: Skipped unknown 'colorIndex' field in IndexedFaceSet node.


this the error shown after importing VRML97

##### David Mansolino [Cyberbotics] 01/03/2020 10:13:06
These ones you can simply ignore them, the geometry should still be correct

##### yash 01/03/2020 10:33:23
alright thank you .!

##### David Mansolino [Cyberbotics] 01/03/2020 10:42:19
You're welcome

##### musabcoskun 01/03/2020 18:19:38
My browser can not load the kuka's joints values. Before there was no such problem, how can I fix it?
%figure
![xxx.png](https://cdn.discordapp.com/attachments/565154703139405824/662721751054286890/xxx.png)
%end

##### nap 01/03/2020 18:41:11
`@David Mansolino` : yes I was launching from the command line.


`@David Mansolino` : Hope you had a good Christmas and New Year!

##### David Mansolino [Cyberbotics] 01/03/2020 21:42:09
`@nap` ok, this can indeed explain the issue you are having, make sure to follow this guide before launching any controller yourself: [https://www.cyberbotics.com/doc/guide/running-extern-robot-controllers#environment-variables](https://www.cyberbotics.com/doc/guide/running-extern-robot-controllers#environment-variables)

I had a very nice Christmas and New Year thank you, I hope you too.


`@musabcoskun` I have indeed the same problem, which browser and OS are you using?

##### yunus [Moderator] 01/04/2020 20:34:12
Hello. We want to use Webots to implement a simple physical model: one solid mass joined by a spring to a stationary mass (to a wall for example). We want the spring to oscillate continuously as it would be in real life. We came across this description: [https://www.cyberbotics.com/doc/reference/jointparametersfound](https://www.cyberbotics.com/doc/reference/jointparametersfound), we want to implement that figure "Mechanical Diagram of a Slider Joint" at the end of that webpage.



We found SliderJoint.wrl in the ..resources/nodes folder of Webots, but we couldn't import it in Webots, and there is no node in Webots that accomplish that spring motion.



Can you please give us a lead on how to proceed? Thank you so much

##### musabcoskun 01/05/2020 08:42:26
`@David Mansolino`I'm using Firefox n Chrome on Ubuntu 16.04 n Windows 10

##### yash 01/05/2020 13:09:05
I have imported my solidworks model into webots. How do we define the motors and sensors on the CAD model .?


So that I can make the controller accordingly.

##### David Mansolino [Cyberbotics] 01/06/2020 07:41:00
`@yunus`, you are in the right direction, using a sliderjoint ([https://www.cyberbotics.com/doc/reference/sliderjoint](https://www.cyberbotics.com/doc/reference/sliderjoint)) and setting appropriate jointparameters ([https://www.cyberbotics.com/doc/reference/jointparameters](https://www.cyberbotics.com/doc/reference/jointparameters)) is indeed the way to go.

Here are the steps:

  - Add a Solid node (which a bounding object but no physics) this is your wall (it is static since there is no physics).

  - In the children field of the Solid add a SliderJoint.

  - In the `jointParamerters` field of the SliderJoint add a JointParameters node.

  - In the `endPoint` field of the SliderJoint add a Solid node (which is your moving mass with physics).


`@musabcoskun`, ok thank yo ufor the confirmation, I have logged this in our bug tracker and we will fix this soon: [https://github.com/cyberbotics/webots/issues/1235](https://github.com/cyberbotics/webots/issues/1235)


`@yash`, you have to add the motors and sensors in Webots directly after importing your CAD model, you should probably have a look at this tutorial explaining how to create your own robot model: [https://www.cyberbotics.com/doc/guide/tutorial-6-4-wheels-robot](https://www.cyberbotics.com/doc/guide/tutorial-6-4-wheels-robot)


`@musabcoskun`, the problem should now be fixed (if it is not the case, please clear the cache of your browser).

##### sunnyjerai 01/06/2020 10:02:53
I am currently following tutorial 7 and trying to make my own proto node. However, after following the steps and copying the text from 4\_wheel\_robot.wbt to 4WheelsRobot.proto I encountered this error. Can someone please help me with this.
%figure
![Annotation_2020-01-06_152803.jpg](https://cdn.discordapp.com/attachments/565154703139405824/663683904808550420/Annotation_2020-01-06_152803.jpg)
%end

##### David Mansolino [Cyberbotics] 01/06/2020 10:03:41
Hi `@sunnyjerai`, can you show us the content of your PROTO file?

##### sunnyjerai 01/06/2020 10:04:17

> **Attachment**: [message.txt](https://cdn.discordapp.com/attachments/565154703139405824/663684258325331998/message.txt)

##### David Mansolino [Cyberbotics] 01/06/2020 10:05:36
`protoFields` should be replaced by the fields you want to keep open, for now you can simply remove it (you will learn later on in the tutorial how to add fields).

##### sunnyjerai 01/06/2020 10:07:03
Problem solved. thanks a lot `@David Mansolino`

##### David Mansolino [Cyberbotics] 01/06/2020 10:07:09
You're welcome

##### yunus [Moderator] 01/06/2020 11:22:27
Thank you so much `@David Mansolino`  for your clear and valuable reply. I have followed your instructions and it works perfectly.

##### David Mansolino [Cyberbotics] 01/06/2020 11:22:53
You're welcome 🙂

##### musabcoskun 01/06/2020 12:16:26
`@David Mansolino` thanks, it's working now

##### David Mansolino [Cyberbotics] 01/06/2020 12:38:27
`@musabcoskun` you're welcome

##### Tahir [Moderator] 01/06/2020 13:36:44
Hello,

I am using Webots with ros to simualte warehouse environments and forklifts. I am using Webots in asynchronous mode and using Webots simulation time as reference. 

Currently I am validating the simulation with our real experimental data from the warehouse. I am running the simulation in Fast mode.  initially the simulation starts with 18 to 20x speed and the robot runs blvery fast but its OK because it is taking round trip on average in 8.5 minutes which is true in real as well. 

But after 18 or 20 hours the robots gets too slow, ros is running fine no error at ros side I can see the commands published, no error in Webots. Data is also being exchanged as expected. None of the computational resources exhausted.


Due to this slow motion of tue robot now round trip time goes to 20 30 minutes.


I really am not getting what could be the problem



%figure
![20200106_144032.jpg](https://cdn.discordapp.com/attachments/565154703139405824/663738783732334594/20200106_144032.jpg)
%end


This cloud warning is fine, but here in the screenshot the velocity amd angles are continously sent but robots position updates too slowly

##### Stefania Pedrazzi [Cyberbotics] 01/06/2020 16:43:11
`@Tahir` it could be that there are some internal data that is not managed efficiently and will slow down the simulation. But it is difficult to tell without looking in details at your simulation. 

Are you using the Supervisor API for updating the robot position?

Are you creating/deleting many nodes?

Did you notice if the memory usage continuously increase while running the simulation?

##### Tahir [Moderator] 01/06/2020 16:44:51
Hello,

I am using motor control to steer the robot not suoervisor api, not deleting any node from the scene tree,  memory consumption is same as at the start.


Non of the resources are exhasuted, also I am using to PCs directly connected via lan so I think no lag in the communication as well.


One is running hustvWebots and another just robot softwar

##### User21 01/06/2020 16:51:32
Hi,

I am new to Webots and i want to use MoveIT with the UR5e.

I have several questions:

1.If i try to launch MOVEIT! like in the documentation written i always get this error message:



Resource not found: ur\_e\_description

ROS path [0]=/opt/ros/melodic/share/ros

ROS path [1]=/home/arches/catkin\_ws/src

ROS path [2]=/opt/ros/melodic/share

The traceback for the exception was written to the log file

(I just copied the file ur\_e\_webots in my catkin workspace)

Is it possible to use MoveIT with other Manipulators like the KUKA YouBot?

Is it possible to use the ros Package navigation?

##### Stefania Pedrazzi [Cyberbotics] 01/06/2020 16:52:59
The fact that the resources where not exhausted let me think that it could be an internal problem. But if you are not deleting/creating nodes and you are not using the Supervisor API (that could be affected by the changes in the scene tree) the problem is not where I though it could be.

If could try to simplify your simulation as much as possible so that it still reproduces the issue but in a simple example (maybe running a simple controller on one machine) we will take a look at it to try to understand what is the problem.

##### Tahir [Moderator] 01/06/2020 16:54:44
Well just to clarify I am using Supervisor API but not for robot motion control.


This is the simplest I can run now


It is just one robot in Webots and nothing else at all


I am intended to ise it for multiple robots may be 10 or 20 in that case I can say the world would be complex but not in the case now I think so

##### Stefania Pedrazzi [Cyberbotics] 01/06/2020 16:59:22
ok, so then if your controller is also simple and you are available to send it to us (for example using Gist) we will look at it. But it should work out of the box on a single machine, otherwise it would be difficult to reproduce the issue.


Hi `@User21`,

you can use any ros package to connect with the Webots ROS interface.

About using MoveIT with other robots you should probably refer to the MoveIT documentation, but a priori I think that yes you can do it after configuring it.

 Do you have the `universal_robots` package installed?

##### User21 01/06/2020 17:17:35
`@Stefania Pedrazzi` 

First of all thank you for your fast response.

I didnt install it, so i think this is the porblem i thought it is automatically installed wth Webots


`@Stefania Pedrazzi` 

it woked but if i want to start the simulation i get the error message: WARNING: cannot create log directory [ros\_python\_log]. Please set ROS\_LOG\_DIR to a writable location.

##### lunarpulse 01/06/2020 23:32:26
Hi everyone,

Have you done use Webot as the basis of Reinforcement Learning? I saw some ROS developers using Gazebo to train robotic arms. I want to hear experienced people's opinion.

##### Nocturnal Warfare 01/07/2020 02:29:53
are there any tutorials involving python with keyboard control of a robot, like WASD control of a wheeled robot. I specifically would need it through an external controller but that is a problem for another day.

##### Stefania Pedrazzi [Cyberbotics] 01/07/2020 07:10:25
`@Nocturnal Warfare` you could check the `altino.wbt` simulation (in `projects/robots/saeon/worlds` folder): in this Python controller after pressing M to enable the manual control, the wheeled robot is controlled using the arrows keys.


About external controller I would suggest you to check the documentation [https://www.cyberbotics.com/doc/guide/running-extern-robot-controllers](https://www.cyberbotics.com/doc/guide/running-extern-robot-controllers)

After setting the required environmental variables it should work the same as in Webots


`@User21` you should probably check where does your ROS\_LOG\_DIR variable point to and make sure that it exists and that is writable

##### David Mansolino [Cyberbotics] 01/07/2020 07:36:09
> I didnt install it, so i think this is the porblem i thought it is automatically installed wth Webots

`@User21`, no it is not installed automatically with our ROS1 interface (it is with our ROS2 package).


`@lunarpulse`, we have a documentation about using numerical optimization with Webots that might be of interest for you: [https://cyberbotics.com/doc/guide/using-numerical-optimization-methods](https://cyberbotics.com/doc/guide/using-numerical-optimization-methods)

##### Dr. Sudip Chakraborty 01/07/2020 10:41:25
is there any cpp ik pki for 6df arm?

##### David Mansolino [Cyberbotics] 01/07/2020 10:44:01
Hi `@Dr. Sudip Chakraborty`, we do not provide such example (we do provide a Python example) but you can fore sure find some libraries on internet that does this, e.g. [http://openrave.org/docs/0.8.2/openravepy/ikfast/](http://openrave.org/docs/0.8.2/openravepy/ikfast/)

##### Dr. Sudip Chakraborty 01/07/2020 10:46:00
can i use ikpy for industrial use?

##### David Mansolino [Cyberbotics] 01/07/2020 10:47:36
I am not sure, you should probably directly ask the developers of the libraries.

But since it is the library behind moveit used by ROS it is probably quite safe.

##### Dr. Sudip Chakraborty 01/07/2020 10:51:27
I have trouble pls help me.  I am moving my arm using ikpy from my c# application over socket. in webots end  tcp server is running for receiving the command. after creating the server object webots not responding . server running in separate thread. what is the issue?


I want to exchange data between webots and other pc application. what is the correct procedure?

##### David Mansolino [Cyberbotics] 01/07/2020 11:16:30
You can simply use any communication protocol (such as TCP IP for example) from within your controller to communicate with another computer.

##### Dr. Sudip Chakraborty 01/07/2020 11:22:09
which is more reliable ? phython socket  or  c/cpp socket

##### David Mansolino [Cyberbotics] 01/07/2020 11:22:30
Both are equivalent if correctly implemented.

##### Dr. Sudip Chakraborty 01/07/2020 11:24:31
can  run separate thread  for TCP server in python?

##### David Mansolino [Cyberbotics] 01/07/2020 11:25:58
Yes of course.

##### Dr. Sudip Chakraborty 01/07/2020 11:31:08
srv=threading.Thread(target=self.process)

     srv.start()


in my case system not responding


webots time counting but not come back in main loop


why not come back in main loop after starting thread?

##### David Mansolino [Cyberbotics] 01/07/2020 11:49:26
I am sorry but this discord channel is for question about Webots, this is a general programming question, you should probably ask it on stackoverflow or so.

##### Dr. Sudip Chakraborty 01/07/2020 11:54:43
ok, thanks lot  for your valuable response.

##### David Mansolino [Cyberbotics] 01/07/2020 11:54:51
You're welcome

##### Dr. Sudip Chakraborty 01/07/2020 11:56:19
is there any shared variable feature to exchange data between webots and others app?

##### David Mansolino [Cyberbotics] 01/07/2020 11:57:35
No, there is the emitter-receiver mechanism to communicate between controllers, but to communicate with other apps since many standard ways are already existing there is no specific mechanism to Webots.

##### Dr. Sudip Chakraborty 01/07/2020 12:00:31
ok

##### shivajitheboss 01/07/2020 19:43:03
Hi! I'm currently in my final year engineering and am doing a project in robotics, wanted to know if webots will be of any help or i should look at other softwares?


PS- I'm making a special type of exoskeleton

##### Tahir [Moderator] 01/07/2020 19:45:18
Hello,

For comparison There is great article on Wikipedia you can have a look at it. 

For exeskeleton I think it is possible but I haven't did anything on it. But to the extent I know Webots it should be possible

##### shivajitheboss 01/07/2020 19:45:47
thanks

##### Tahir [Moderator] 01/07/2020 19:46:12
You are welcomed

##### yash 01/08/2020 06:11:10
Importing the CAD file from Solidworks has resulted into so many tranforms i.e one tranform corresponds to one shape .


therefore how to reduce them .?

##### David Mansolino [Cyberbotics] 01/08/2020 06:51:44
`@yash` once imported you may want to remove usless small shapes (such as screws, etc.) then you can group your shapes together using the Group node.

You might also merge your shapes directly in Solidworks before exporting your model.

##### jyuan 01/08/2020 09:26:02
Hi, guys, if I want to import some solid model like some plants in greenhouse like tomatos, how can I do?

##### Tahir [Moderator] 01/08/2020 09:27:21
Hello,

I am using Webots with ros to simualte warehouse environments and forklifts. I am using Webots in asynchronous mode and using Webots simulation time as reference. 

Currently I am validating the simulation with our real experimental data from the warehouse. I am running the simulation in Fast mode.  initially the simulation starts with 18 to 20x speed and the robot runs blvery fast but its OK because it is taking round trip on average in 8.5 minutes which is true in real as well. 

But after 18 or 20 hours the robots gets too slow, ros is running fine no error at ros side I can see the commands published, no error in Webots. Data is also being exchanged as expected. None of the computational resources exhausted.


Guys any thoughts I'm still having the problem

##### David Mansolino [Cyberbotics] 01/08/2020 09:29:04
Not really, is one of your robots kind of stuck or having many collision? You might want to check the contact points to make sure there is not an 'explosion' of th enumber of contact points. This is just an idea but might not be the cause.

##### Tahir [Moderator] 01/08/2020 09:29:29
Nothing is in the environment


Just a single robot


I am runing simulation in fast mode


And all the visualization is in rviz


This is after 24 hours of sinulation in fast mode

##### David Mansolino [Cyberbotics] 01/08/2020 09:31:01
You mean your robot is alone floating in the air (this would be an ideal scnario to make sure the simulation part is not the bottlneck) ?

##### Tahir [Moderator] 01/08/2020 09:31:25
No no not in the air


I mean there is just one robot and a floor

##### yash 01/08/2020 09:31:49
thank you `@David Mansolino`  problem solved.!

##### Tahir [Moderator] 01/08/2020 09:31:52
This is for validation I will use multiple


The robot is on ground but moving really really too slow

##### David Mansolino [Cyberbotics] 01/08/2020 09:34:52
can you try to make it float in the air? simply remove everything else than the robot.

##### Tahir [Moderator] 01/08/2020 09:36:59
And than runing the simulation?


It will fall down

##### David Mansolino [Cyberbotics] 01/08/2020 09:39:18
Yes exactly, it's probably not a problem if it falls down, and worse case you can set the 'WorldInfo.gravity' to '0 0 0'-

##### Stefania Pedrazzi [Cyberbotics] 01/08/2020 09:40:46
`@jyuan` you can import your model in Webots saving it in VRML format (from the File menu select "Import VRML97").

Another option is to import your model in Blender and then user this Blender plugin to import in in Webots:

[https://github.com/cyberbotics/blender-webots-exporter](https://github.com/cyberbotics/blender-webots-exporter)

##### Tahir [Moderator] 01/08/2020 09:50:08
OK I'll try that


Just a question for the ros service


If I don't call the /robot/time\_step service the robot should not move right?


What I want to is until I get some data the robot should stop

##### David Mansolino [Cyberbotics] 01/08/2020 10:48:14
The simulation will not run as long as you don't call the step service and you use the `--synchronize` argument.

##### Tahir [Moderator] 01/08/2020 10:53:02
Will this be the same for multiple robots running in different threads


Or should I wait for all robots to get the data and than call this service once

##### David Mansolino [Cyberbotics] 01/08/2020 10:53:55
Yes, if each robot is using it's own ros controller and has the `--synchronize` argument it will wait for each robot to call the service.

##### Tahir [Moderator] 01/08/2020 10:58:09
I just commented this service call part in my code and the robots are still moving

##### David Mansolino [Cyberbotics] 01/08/2020 11:35:12
Did you add the `--synchronize` in controllerArgs field?

##### sunnyjerai 01/08/2020 12:36:40
Hello, I wanted to know if I can change the texture of the arena from checked boxed to anything else like plain White. Or should I design an entirely new arena?
%figure
![arena.jpg](https://cdn.discordapp.com/attachments/565154703139405824/664447379570819087/arena.jpg)
%end

##### Fabien Rohrer [Moderator] 01/08/2020 12:37:33
You selected the correct field 🙂


You just need to remove the node in the RectangleArena.floorAppearance, and add another appearance instead.


Webots comes with an appearance set: [https://www.cyberbotics.com/doc/guide/appearances](https://www.cyberbotics.com/doc/guide/appearances)


You could choose one of them, or add directly a PBRAppearance node, and play with its parameters.

##### sunnyjerai 01/08/2020 12:40:30
Understood, Thanks a lot for the help 😄

##### Tahir [Moderator] 01/08/2020 12:55:29
In a multi robot scenario in syncronized setup.

We can do two things.

1. Wait for all robots cmd vel, when everything is available, than call one robot/time\_step service to update the simulation. 

1.1.Is it ok to call just one service robot/time\_step for update of all of the robots or we have to call service for every single robot.

2. Not waiting for all robots data contrary to above approach, for every robot whenever the data is available call its own service to uodate the simulation. 

2.1. In this case multiple robots will update time is this OK


So my question is are these two cases equivalent in Webots and what about the time gaurantees


Will the time updated in bith cases be the same or not if not which one is the correct simulation time

##### David Mansolino [Cyberbotics] 01/08/2020 13:09:14
with the syncronized setup, you should need to call the step for each robot, otherwise the simulation will block.

##### Tahir [Moderator] 01/08/2020 13:17:22
OK also will these above steps be similar

##### User21 01/08/2020 16:12:20
Hey :)

is it possible to change the kuka youbot gripper?

##### Fabien Rohrer [Moderator] 01/08/2020 16:12:48
Hi


yes, it's possible.


you can convert the youBot PROTO node to base node, by rightclicking on it in the scene tree, and select "Convert to Base node."


Once this is done, you could modify all the nodes defining the robot, including the gripper.

##### User21 01/08/2020 16:15:05
okay perfect 

Thank you very much

##### Dr. Sudip Chakraborty 01/08/2020 16:43:05
in ikpy, is there scope to send  rpy with xyz in EF matrix?

##### azpi 01/08/2020 18:01:34
hey guys i've got a really silly question


where can i find the libraries motor.h and lidar.h?

##### User21 01/08/2020 18:38:20
Hi its me again 😅 

sorry for these questions but,

is it possible to load the webots world file in "MoveIT" so that it can  consider the obstacles and plan around it?

To my knowledge MoveIT only accepts URDF or Collada files.

##### David Mansolino [Cyberbotics] 01/09/2020 06:53:22
`@Dr. Sudip Chakraborty`, no idea, you should probably check in the doc: [https://ikpy.readthedocs.io/en/latest/genindex.html](https://ikpy.readthedocs.io/en/latest/genindex.html)


`@azpi` if you use the default Webots Makefile you don't need to care about this.

But in any case these files are located in WEBOTS\_HOME/include/controller/c (see: [https://github.com/cyberbotics/webots/tree/master/include/controller/c/webots](https://github.com/cyberbotics/webots/tree/master/include/controller/c/webots) )


`@User21` unfortunately not directly, however, you can export the world in VRML format from Webots: File => Export VRML97...

Then you can use a software (e.g. Blender) to convert VRML to any other format (such as Collada).

##### sunnyjerai 01/09/2020 08:21:16
Hello, I was working with a self made robot, the controller code in almost the same as in Tutorial 6. However, I keep getting this error on line 9 of the controller. Can anyone tell me why this error occurs and what might be the possible solution to it.
%figure
![controller_error.jpg](https://cdn.discordapp.com/attachments/565154703139405824/664745495566221312/controller_error.jpg)
%end

##### David Mansolino [Cyberbotics] 01/09/2020 08:42:41
Hi `@sunnyjerai`, your code seems correct, can you add a print(ds) right after the ds.append ?

##### ClBaze 01/09/2020 09:34:07
Hi guys, I'd like to simulate an attitude and orbit control system.

The simulated spacecraft would have 4 gyros, 3 star trackers, 6 reaction wheels and 16 thrusters.

I want to implement custom noise models for each sensor and actuator.

My first idea was to do this in the webots controller of the robot node containing all these components (the spacecraft).

But as these devices work at different frequencies, I think it's not the best idea.

What do you think if I put each device in a robot node with its own controller, and all these robot nodes in another robot node (the spacecraft).

I mean it makes a lot of executables (webots controllers), do you think Webots could handle it ?

##### Fabien Rohrer [Moderator] 01/09/2020 09:35:23
Hi,


Webots can indeed handle this.


A Robot can contain other Robot instances with their own controllers.


You have to implement a way to dialog between them (for example using an Emitter/Receiver)


However, I think this is a complex solution: from my experiment, having a single, well structured and single-threaded controller is always simpler to implement and more robust.

##### sunnyjerai 01/09/2020 10:15:04
Hi `@David Mansolino` , I added print(ds) as you suggested and this is the result.
%figure
![controller_error_ds.jpg](https://cdn.discordapp.com/attachments/565154703139405824/664774134730981376/controller_error_ds.jpg)
%end

##### Stefania Pedrazzi [Cyberbotics] 01/09/2020 10:23:32
`@sunnyjerai` did you double checked if the device names defined in the DistanceSensor.name field of your robot are  "ds\_left" and "ds\_right"?

##### sunnyjerai 01/09/2020 10:25:50
Yes , that's first thing I checked


They are correct

##### Stefania Pedrazzi [Cyberbotics] 01/09/2020 10:27:58
I suspect there is some issue with the names, because the devices are not found.


Note that from a robot controller you can get only a device defined inside the Robot model running the controller and you cannot access devices of other robots. Not sure if this is the case in your simulation.

##### sunnyjerai 01/09/2020 10:30:50
This is the name given to the left line sensor
%figure
![ds_left.jpg](https://cdn.discordapp.com/attachments/565154703139405824/664778102135848970/ds_left.jpg)
%end


and this one is of the right
%figure
![ds_right.jpg](https://cdn.discordapp.com/attachments/565154703139405824/664778167231315968/ds_right.jpg)
%end


so I think that there might be something else at play

##### Stefania Pedrazzi [Cyberbotics] 01/09/2020 10:31:28
Ok. Your sensor is a LightSensor and not a DistanceSensor.

##### sunnyjerai 01/09/2020 10:31:44
okay, understood

##### Stefania Pedrazzi [Cyberbotics] 01/09/2020 10:32:04
you should use `robot.getLightSensor('ds_left')`

##### sunnyjerai 01/09/2020 10:32:53
thank you `@Stefania Pedrazzi` , problem solved

##### ClBaze 01/09/2020 10:43:55
`@Fabien Rohrer` Thanks for your feedback

##### Fandykun 01/10/2020 10:06:51
Hi everyone, i'd like to simulate robot with omni-vision camera,

How to simulated it using webots?

##### David Mansolino [Cyberbotics] 01/10/2020 10:08:00
Hi `@Fandykun` you can use a spherical camera to simulate an omni-vision camera, see an example distributed within Webots here: [https://cyberbotics.com/doc/guide/samples-devices#spherical\_camera-wbt](https://cyberbotics.com/doc/guide/samples-devices#spherical_camera-wbt)

##### Fandykun 01/10/2020 10:10:22
thanks, i'll try that

##### David Mansolino [Cyberbotics] 01/10/2020 10:10:42
You're welcome

##### PickL 01/10/2020 17:10:54
Hi. For city.wbt, I want to find the coordinates of the lane. The idea is to find the deviation of the current position of the car from the centre of the lane. The current position could be obtained from the GPS coordinate. However, I was wondering if there is a way to obtain the coordinates of the centre of the lane.

##### sunnyjerai 01/11/2020 10:44:20
Hello everyone, I imported a VRML file of my robot chassis which appeared as multiple transforms. I then proceeded to make a robot node in the scene tree and used the DEF strings from all those transforms to define the body of the robot. I wanted to make this robot as a proto node for the project so I followed the steps in tutorial 7.  After that, the Robot did appear in proto nodes, however the body is missing and I got the error as shown in the picture. The 2 wheels and distance sensors appeared since they were defined separately.
%figure
![agent_error.jpg](https://cdn.discordapp.com/attachments/565154703139405824/665506273390755851/agent_error.jpg)
%end

##### Tahir [Moderator] 01/11/2020 10:46:51
It says you haven't defined bounding object in each solid you can define that


Also robot is used twice names should be unique


For hounding objects I think you can chwck the tutorials as well

##### sunnyjerai 01/11/2020 11:32:23
The definition of bounding objects were taken from transforms


I think i might be getting the error since the body borrows its definition from a different node

##### Dr. Sudip Chakraborty 01/12/2020 10:45:21
I want to create 6df robotic arm from scratch.  Is there example or doc?

##### Tahir [Moderator] 01/12/2020 11:08:32
[https://cyberbotics.com/doc/guide/robots](https://cyberbotics.com/doc/guide/robots)

##### Fandykun 01/13/2020 07:02:43
i want to simulate 10 robots together like soccer robot. is webots can handle that process?

##### David Mansolino [Cyberbotics] 01/13/2020 07:05:42
`@Fandykun` yes of course, Webots can easily simulate many robots (this will of course have an impact on the simulation speed, but if your computer is powerful enough this shouldn't be a problem).


`@Dr. Sudip Chakraborty` not for robotic arm, but there is a step by step tutorial for a wheeled robot: [https://cyberbotics.com/doc/guide/tutorial-6-4-wheels-robot](https://cyberbotics.com/doc/guide/tutorial-6-4-wheels-robot)

Creatign a robotic arm is very similar (excepte that your joint should be serial).


`@sunnyjerai` the DEF should be defined inside the PROTO file, is it the case ?


`@PickL`, this is not a trivial task but you can use a Supervisor to parse the world and get the trajectory of the road. You might be interessted by this script that parses a webots world file to extract the position of the roads: [https://github.com/cyberbotics/webots/tree/master/resources/sumo\_exporter](https://github.com/cyberbotics/webots/tree/master/resources/sumo_exporter)

##### sunnyjerai 01/13/2020 14:57:53
Thank you `@David Mansolino`


Instead of using DEF string , I just copied the shape geometry from all those transforms. It worked. I later exported it as a proto node.

##### AlbusSong 01/13/2020 23:02:51
I have cloned the webots codes from Github, but I don't find any direct commands on how to compile the project: [https://github.com/cyberbotics/webots/wiki](https://github.com/cyberbotics/webots/wiki)


`mkdir build && cd build && make ../ `?



%figure
![Screenshot_2020-01-14_at_01.06.17.png](https://cdn.discordapp.com/attachments/565154703139405824/666418127462072331/Screenshot_2020-01-14_at_01.06.17.png)
%end

##### Tahir [Moderator] 01/14/2020 00:13:03
Have you tried installation from sources? 

I beleive there is a step by step guide

##### AlbusSong 01/14/2020 00:28:16
I want to try it from sources. But I dont find the guide.

##### siti\_raehan 01/14/2020 01:36:30
`@David Mansolino` Hi 

Can you share about how to calculate the heading of e-puck at Webots simulator.

##### Olivier Michel [Cyberbotics] 01/14/2020 06:59:14
The guide is here: [https://github.com/cyberbotics/webots/wiki](https://github.com/cyberbotics/webots/wiki)


It explains how to compile Webots from the source and how to contribute.

##### David Mansolino [Cyberbotics] 01/14/2020 07:08:16
And here are the mac specific instructions: [https://github.com/cyberbotics/webots/wiki/macOS-installation](https://github.com/cyberbotics/webots/wiki/macOS-installation)


`@siti_raehan` you can either use an inertial unit device to retrieve direction the orientation of the robot or if you use the initial orientation you can use odometry to update the orientation at each step.

##### AlbusSong 01/14/2020 10:07:19
Thanks a lot!

##### David Mansolino [Cyberbotics] 01/14/2020 10:07:43
You're welcome

##### PickL 01/14/2020 13:16:51
`@David Mansolino` Thanks David. I will try to reuse the code. However, this is not what we are looking for though. It would be great if we could find the displacement of the car from the centre of lane at any given point. For that, we were looking into using a supervisor as you also suggested. We are encountering few modelling challenges here. 

Is it possible to add a supervisor to the wheel of the car?

How to run the supervisor along with the car driver?

It would be great if you could help us with these challenges.



Thanks again for your suggestions in the right direction.

Best,Sajid

##### W.El-Badry 01/14/2020 14:19:39
Is there any step by step for doing a "step simulation" using Python? i.e. :

1. Send a command like speed and step.

2. Webots do a step (10 ms).

3. Sends back acknowledgment for step completion and wait for next step command.

##### Fabien Rohrer [Moderator] 01/14/2020 14:23:43
`@W.El-Badry`  This is certainly possible using the Supervisor API:


Especially the: wb\_supervisor\_simulation\_set\_mode() [https://cyberbotics.com/doc/reference/supervisor#wb\_supervisor\_simulation\_set\_mode](https://cyberbotics.com/doc/reference/supervisor#wb_supervisor_simulation_set_mode)

##### nap 01/14/2020 14:35:28
According to the documentation, there is a world for the KUKA robot called `tower_of_hanoi.wbt`.  However, when I looked in the folder where it's supposed to be at, only the other two example worlds were there.  Can this, including the controller, be downloaded from somewhere?

##### Fabien Rohrer [Moderator] 01/14/2020 14:36:52
`@nap` Yes, everything resources are available (open-source). Let me check...

##### nap 01/14/2020 14:37:15
Thanks `@Fabien Rohrer`

##### Fabien Rohrer [Moderator] 01/14/2020 14:37:25
The world: [https://github.com/cyberbotics/webots/tree/master/projects/samples/contests/tower\_of\_hanoi/worlds](https://github.com/cyberbotics/webots/tree/master/projects/samples/contests/tower_of_hanoi/worlds)


The controller: [https://github.com/cyberbotics/webots/blob/master/projects/samples/contests/tower\_of\_hanoi/controllers/hanoi/hanoi.c](https://github.com/cyberbotics/webots/blob/master/projects/samples/contests/tower_of_hanoi/controllers/hanoi/hanoi.c)

##### nap 01/14/2020 14:38:04
Yes, thank you very much.   I will check on github next time.

##### Fabien Rohrer [Moderator] 01/14/2020 14:38:33
.. and the youbot library: [https://github.com/cyberbotics/webots/tree/master/projects/robots/kuka/youbot/libraries/youbot\_control](https://github.com/cyberbotics/webots/tree/master/projects/robots/kuka/youbot/libraries/youbot_control)


In Webots, the youbot controllers are using this library which offers helper functions to control the arm and the base. (basic IK, etc.)

##### nap 01/14/2020 14:40:45
Cool.  Does that library include facilities for a Kinect?

##### Fabien Rohrer [Moderator] 01/14/2020 14:41:16
No, but an interface with the Kinect can be directly done in the controller.


To be honest, the Kinect is not used in the tower of hanoi demo 🙂


It is only enabled.

##### nap 01/14/2020 14:42:02
Ok, that's fine.  I suppose it's just a sequence of poses


Can the Youbot proto accept a Kinect?

##### Fabien Rohrer [Moderator] 01/14/2020 14:43:30
Yes, the arm is controlled by a sequence of predefined poses, except for the final approach where IK is used to move the arm down perfectly vertically. A local GPS (and Compass if I remember well) is used to move the robot at the correct location.


Yes, you can add the Kinect into the youBot slots.


> YouBot.bodySlot [ Kinect {}]


It is done in the tower\_of\_hanoi.wbt sample:

##### nap 01/14/2020 14:45:01
Ok, that's nice.  Thanks `@Fabien Rohrer`

##### Fabien Rohrer [Moderator] 01/14/2020 14:45:05
[https://github.com/cyberbotics/webots/blob/master/projects/samples/contests/tower\_of\_hanoi/worlds/tower\_of\_hanoi.wbt#L231](https://github.com/cyberbotics/webots/blob/master/projects/samples/contests/tower_of_hanoi/worlds/tower_of_hanoi.wbt#L231)


(I confirm there is a compass too 🙂 )

##### nap 01/14/2020 14:50:27
What is/are the paths that Webots searches to populate the `controller` selection list?

##### Fabien Rohrer [Moderator] 01/14/2020 14:53:48
first, it checks the "controllers" directory of the current project, then, if the robot is a PROTO, the "controllers" directory of the proto source location.

##### nap 01/14/2020 14:54:28
But what if `worlds` and `controllers` are at the same level?

##### Fabien Rohrer [Moderator] 01/14/2020 14:55:31
Yes, Webots is strict about the sub-directories of the project directory.


a project directory could contain the "worlds", "controllers" and "protos" (and more) at the same level.


Here is some doc: [https://www.cyberbotics.com/doc/guide/the-standard-file-hierarchy-of-a-project](https://www.cyberbotics.com/doc/guide/the-standard-file-hierarchy-of-a-project)

##### nap 01/14/2020 14:58:06
Sorry, I just realised I actually (lol) had to compile the controller first, after copying it into my folder from the git repo.

##### Fabien Rohrer [Moderator] 01/14/2020 14:58:24
for sure, that will help 😄

##### nap 01/14/2020 15:08:08
lol, the Kuka didn't place the last block properly...
%figure
![Screen_Shot_2020-01-15_at_1.05.30_am.png](https://cdn.discordapp.com/attachments/565154703139405824/666659824360226826/Screen_Shot_2020-01-15_at_1.05.30_am.png)
%end


But a nice demo nonetheless!


Thanks for that.

##### Fabien Rohrer [Moderator] 01/14/2020 15:09:22
oops, we certainly don't test it often until the last block 😄

##### Lifebinder (tsampazk) 01/14/2020 15:50:10
Hello there! Quick question: In the UI i can see 3 kinds of velocities for a Solid (absolute, and 2 relative), is there a way to get the relative one's in code? Which one does the getVelocity() method return? ( i'm working in python 3.7)

##### User21 01/14/2020 17:08:58
Hi :)

I want to use MoveIt with Webots and I want to set a Goal for my Endeffector as a Function in Webots. I tried it with the MoveGroup Commander but my controller crashes everytime when i want to use the command.

##### David Mansolino [Cyberbotics] 01/15/2020 06:57:54
`@User21` hi, with which robot are you using MoveIt and with ROS1 or ROS2 ? And which controller are you using (the default ros controller?)? I don't know the MoveGroup Commander but we have successfully used MoveIt in RViz to control the UR5e robot in Webots.


`@ANGELGG` , I am sorry but this chat is in english only.


`@Lifebinder (tsampazk)` the getVelocity function returns the absolute velocity (thank you for pointing this out, we will make this clearer in the doc), if you want to get relative velocities you simply have to get the velocity of the other solid too and compute the difference.

##### PickL 01/15/2020 09:20:16
Hi all,

Quick question. Is there a matlab support for 'driver' library (mainly for cars, e.g. using in city.wbt)? 

Is there any more dependencies we should consider when calling C functions from Matlab for the driver library?

##### David Mansolino [Cyberbotics] 01/15/2020 09:23:17
`@PickL` we currently don't have any matlab interface for the driver API, however, the dependencies are exactly the same as for libcontroller.

##### User21 01/15/2020 09:23:30
`@David Mansolino`  i am using the universal robot ur5e with ros melodic. im using the universal ros controller and added code to define the endeffector goal.

##### David Mansolino [Cyberbotics] 01/15/2020 11:49:14
`@User21`, ok then you are in a very similar setup to the known working one, that's good. When the controller crashes, do you have any stack displayed?


`@PickL` why would you need to add the supervisor specifically to the wheel ? Can't you just pu tthe supervisor at the root of the tree and get the wheel from the supervisor?

You can either transform the car itself in a supervisor (by setting the `supervisor` to true) either add an independant supervisor that will communicate with your vehicle using emitter-receiver.

If you are interested Cyberbotics provide professionnal consulting and can send you an offer for developing this for you.

##### LaCava 01/15/2020 14:31:26
Hi -- apologies for this incredibly simple question (\_very\_ new to Webots), but when a Robot has its Supervisor attribute set to TRUE, how are those functions actually invoked (say, within a controller)?



After reading the docs, I was under the impression that I could call them as if they were Robot functions inside my controller, but this doesn't appear to be the case, unless I've gone off the rails in my understanding/setup.



The controller itself is simple, I've got a robot class containing a few basic initialization functions, and a run function that accepts keyboard input to change LED colors (advanced robotics, I know). My goal was to map some supervisor functions to keypresses as well, just to see it 'working' - but this is met with AttributeErrors, since the class doesn't actually \_have\_ those functions.



Outwith the class, the robot is instantiated and its run() function invoked. Like I said, it's quite barebones.

##### Olivier Michel [Cyberbotics] 01/15/2020 14:32:30
Which programming language do you use?

##### LaCava 01/15/2020 14:32:33
Python

##### Olivier Michel [Cyberbotics] 01/15/2020 14:32:58
Then you should derivate your controller class from Supervisor instead of deriving it from Robot.


(see the driver.py example in Webots/projects/languages/python/controller/driver/driver.py)

##### LaCava 01/15/2020 14:34:27
Ah, thanks! I'll take a look, much appreciated.


Knew it had to be something simple

##### Olivier Michel [Cyberbotics] 01/15/2020 14:34:41
Supervisor is a super-class of Robot and hence expose all the Robot API + the Supervisor API.

##### LaCava 01/15/2020 14:37:25
All good now, thanks again.

##### DrVoodoo [Moderator] 01/15/2020 15:30:37
Is anyone able to help with a question regarding proto files? I've got a proto defines a Car and then additional aspects of the design as declared within the extensionSlot (body shell geometry etc)


*are declared


We got various possible configurations of sensors that can be stuck on this base chassis (let's call it BaseChassis.proto)


So I've another proto that defines a BaseChassis and then I want to be able to add to the extensionSlot of the Car

##### David Mansolino [Cyberbotics] 01/15/2020 15:34:31
Hi `@DrVoodoo`

##### DrVoodoo [Moderator] 01/15/2020 15:34:38
Let's call this new proto ACar


Hi `@David Mansolino`


I can add an extensionSlot field to ACar (field MFNode     extensionSlot   [])


but I can't append the contents of that to extensionSlot of the Car, all I can do is override it

##### David Mansolino [Cyberbotics] 01/15/2020 15:38:54
Ok, the solution is quite simple, if you want to extend and not override you have to create something like this in BaseChassis.proto:

```
...
    extensionSlot [
      Group {
        children IS extensionSlot
      }
      other nodes...
    ]
```

Does this answer your question (I am not 100% sure to understand the problem)?

##### DrVoodoo [Moderator] 01/15/2020 15:39:51
`@David Mansolino` you've definitely understood that I'm trying to achieve


but if I try that approach is get an error


specifically "error: Derived and base PROTO can use the same parameter name only if it is linked directly, like 'extensionSlot IS extensionSlot'."

##### David Mansolino [Cyberbotics] 01/15/2020 15:42:14
Ok yes I forgot this rule, in that case you simply have to use another name for your field in BaseChassis.proto, such as:

```
...
    extensionSlot [
      Group {
        children IS baseChassisExtension
      }
      other nodes...
    ]
...
```

##### DrVoodoo [Moderator] 01/15/2020 15:43:47
Ok, so I have got to rename it? I have also been trying to use the lua template syntax to insert the contents of the field into the existing extensionSlot definition but my lua is non-existant

##### David Mansolino [Cyberbotics] 01/15/2020 15:44:41
Yes, simply renaming it in your BaseChassis.proto should fix the problem. You can do this with lua too indeed, but that's more complicated

##### DrVoodoo [Moderator] 01/15/2020 15:45:10
In effect something like 
```extensionSlot [ 
  %{= fields.extensionSlot.value }%
```


Ok, thanks

##### David Mansolino [Cyberbotics] 01/15/2020 15:48:11
Unfortunately that's not so simple, Node arguments are not simply translated into strings but into a dictionnary (that you have to parse if you want to use it: [https://www.cyberbotics.com/doc/reference/procedural-proto-nodes#programming-facts](https://www.cyberbotics.com/doc/reference/procedural-proto-nodes#programming-facts))


You're welcome

##### DrVoodoo [Moderator] 01/15/2020 15:51:58
So technically possible but definitely not worth the hassle. Thanks for the help, I'll stick with the rename

##### vinay 01/16/2020 16:38:41
hello everyone


we are actually making bot for robocon events so,we want a good compass sensor do anyone help which is better to use

##### Fabien Rohrer [Moderator] 01/16/2020 16:41:45
Webots contains a Compass sensor out of the box.


Please refer to:


- the Compass node doc: [https://www.cyberbotics.com/doc/reference/compass](https://www.cyberbotics.com/doc/reference/compass)


- this example: [https://cyberbotics.com/doc/guide/samples-devices#compass-wbt](https://cyberbotics.com/doc/guide/samples-devices#compass-wbt)

##### vinay 01/16/2020 16:44:34
but there are no details about sensor model?

##### Fabien Rohrer [Moderator] 01/16/2020 16:46:21
mmm... the reference manual link mentioned above gives a lot of information about this model, doesn't it? Do you refer about something in particular?

##### vinay 01/16/2020 16:47:39
but i am actually asking about the particular model for good performance

##### Fabien Rohrer [Moderator] 01/16/2020 16:50:39
Could you give an example of "particular model"?


The Compass is very basic, it only indicates the direction of the WorldInfo.northDirection vector. A white noise can be added using the lookupTable. Compass doesn't deal with anything else, such as electromagnetic field, etc.

##### User21 01/16/2020 17:30:40
`@David Mansolino`  sorry for not responding i had an knew approach and now it works more or less. my controller crashed when i Instantiate a MoveGroupCommander object.  

Im starting now a new node and use the MoveGroup Commander functions to set the endeffector goals+

##### bsr.nur.bahadir 01/16/2020 23:12:54
Hi I'm trying to learn Webots with the tutorials but sometimes it shuts down itself without any reason when I try to add objects or start the simulation. How can I solve this problem?

##### sujit 01/17/2020 04:10:58
O just discovered webots aftre years stuck with physics mods in sketchup its AN


AMAZING!!


does any


one hsve a spot mini model?

##### David Mansolino [Cyberbotics] 01/17/2020 06:58:37
`@User21` of good news, thank you for the feedback !


`@bsr.nur.bahadir`, do you experience this with one specific simulation? Or when adding one specific object? On which OS are you and are you using the latest version of Webots?

In any case, make sure that your GPU drivers are up to date.


`@sujit`, welcome to Webots!

Unfortunately we don't have a spot mini model yet, but you can create one yourself, here is a tutorial for creating a simple robot model: [https://cyberbotics.com/doc/guide/tutorial-6-4-wheels-robot](https://cyberbotics.com/doc/guide/tutorial-6-4-wheels-robot)

And then to create a PROTO from it: [https://cyberbotics.com/doc/guide/tutorial-7-your-first-proto](https://cyberbotics.com/doc/guide/tutorial-7-your-first-proto)


`@sujit` if you want Cyberbotics provide professional consulting and can create the model for you.

##### Angerbot 01/17/2020 13:19:33
Hi `@michou214` Im not yet able to download the software to use. Does Webots allow import of third-party platforms such as Fusion 360? Is it also possible to input code that will, for instance simulate readings from an optical encoder then potentially execute new joint-movement from input corrections?What is the compatibility with arduino and possibility to form movement and automatically generate code for arduino IDE?


Appreciate!

##### David Mansolino [Cyberbotics] 01/17/2020 13:31:39
Hi `@Angerbot` You can download Webots from here: [https://github.com/cyberbotics/webots/releases/tag/R2020a-rev1](https://github.com/cyberbotics/webots/releases/tag/R2020a-rev1)


From fusion 360 you should export your model into VRML format, this format can then be imported into Webots.


Yes of course you can use the position-sensor device to read a joint angle and then use the motor API to control the joint


There is no interface for arduino but as arduino support C language and Webots too it should be quite simple to go from one to the other.


We strongly recommend to use the Webots tutorial to get familiar with Webots: [https://cyberbotics.com/doc/guide/tutorials](https://cyberbotics.com/doc/guide/tutorials)

##### Angerbot 01/17/2020 13:51:57
`@David Mansolino` Hi David, thanks very much for your detailed response. Looking forward to creating!

##### David Mansolino [Cyberbotics] 01/17/2020 13:57:26
You're welcome

##### sunnyjerai 01/17/2020 14:05:25
Hello, I was wondering if someone could help me understand how I can use the IMU in webots


I am using python as the language for my controllers

##### David Mansolino [Cyberbotics] 01/17/2020 14:12:29
Hello `@sunnyjerai` , as any other sensors you have to activate it, then you can use the `getRollPitchYaw` fucntion which will return you an array with three components representing (in this order) the roll, the pitch and the yaw.

##### e-puck 01/17/2020 15:52:57
Hello, I'm currently working with e-pucks in Webots. I'm struggling with synchronizing the e-pucks (they should wait for all pucks to finish moving before beginning a new cycle (cycle is look-compute-move)). I'm currently doing this by allocating e-pucks a max number of timesteps, when e-pucks finish before the max number of timesteps, they wait. This methods works but causes very very long simulations. Would anyone know of a better solution?

##### David Mansolino [Cyberbotics] 01/17/2020 15:56:33
Hi e-puck, you can use amitter-receiver devices for example to broadcast a message when the epuck finish its task, when all the e-pucks are broadcasting it means they have all finished.


But of course other solutions exist (but this is probably the simplest one).

##### e-puck 01/17/2020 15:59:14
Thank you very much for the quick response, I will try to implement that now

##### David Mansolino [Cyberbotics] 01/17/2020 16:00:22
You're welcome

##### sunnyjerai 01/17/2020 17:25:34
Thank you `@David Mansolino` , Helpful as always 😁

##### Troy 01/17/2020 19:59:58
Hi guys! I'm a new user. I'm wondering if there is a sand ground environment in webots 2020?


I want to so some simulation about robot running on sand

##### Olivier Michel [Cyberbotics] 01/18/2020 11:07:38
No, there is no such a thing in Webots. You can however adjust the friction parameters to make the contact properties as close as possible as if it was sand, but I am not sure how realistic that could be.

##### bsr.nur.bahadir 01/18/2020 13:32:00
Hi thank you so much `@David Mansolino` , I solved that problem with changing GPU settings but now when I try to add texture it works with png but says Unsupported image format to jpg .

##### Lifebinder (tsampazk) 01/18/2020 19:59:35
Hello! Is there a way to get the terrain from the bb-8 example in [https://robotbenchmark.net/](https://robotbenchmark.net/) to run locally? The example in the webots installation has a perlin noise terrain.

##### DrVoodoo [Moderator] 01/18/2020 20:07:24
`@Lifebinder (tsampazk)` is it purely that the noise is an issue? You can turn the amplitude down to 0

##### Troy 01/18/2020 20:36:53
`@Olivier Michel` thank you so much

##### Lifebinder (tsampazk) 01/19/2020 14:50:02
`@DrVoodoo` I just need the specific terrain that is used on robotbenchmarking with just a single "hole" in the middle. Tried fiddling with the noise but couldn't get a good enough similar hole.

##### David Mansolino [Cyberbotics] 01/20/2020 06:54:48
`@bsr.nur.bahadir`, you're welcome. About the jpg issue, which version of Webots are you using, and on which OS?


`@sunnyjerai` you're welcome!


`@Lifebinder (tsampazk)` you can find the exact same worlds in Webots in 'projects/samples/robotbenchmark': [https://github.com/cyberbotics/webots/tree/master/projects/samples/robotbenchmark](https://github.com/cyberbotics/webots/tree/master/projects/samples/robotbenchmark)

##### bsr.nur.bahadir 01/20/2020 09:50:25
`@David Mansolino` I'm using lastest version of Webots on Windows. I actually don't know too much these things but when I run Webots with Nvidia's gpu it's having jpg issue but if I use Intel's this time program generally shuts down itself.

##### David Mansolino [Cyberbotics] 01/20/2020 09:53:02
`@bsr.nur.bahadir` using the Nvidia GPU is indeed a better idea to run Webots ;-)

Please make sure:

  1. to update your GPU drivers.

  2. that your `PATH` environment variable is clean (it is for example possible that a conflicting version of the jpeg library is in your path).

##### Dorteel 01/20/2020 10:39:17
Hi! I'm having an issue getting the TurtleBot model to work, the controller crashes, never seen this kind of error before, could you have a look at it when you get a chance?
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/668766493546250250/unknown.png)
%end

##### David Mansolino [Cyberbotics] 01/20/2020 10:40:26
Hi `@Dorteel`, Which version of Webots are you using? Is it while you are runnign the default controller or a custom one?

##### Dorteel 01/20/2020 10:42:26
Hi `@David Mansolino` , thanks for the quick reply. Using 2020a, and custom controller that was working on my model of TurtleBot3, but not on this one. I made sure to rename everything I use accordingly (LiDAR, wheels, robot)

##### David Mansolino [Cyberbotics] 01/20/2020 10:44:46
You mean you had a cusom TurtleBot3 model before and now you are trying to use the one coming with Webots and it's not working anymore, am I right ?

##### bsr.nur.bahadir 01/20/2020 10:53:13
`@David Mansolino`  thank you 🙂 drivers are up to date and I couldn't find anything about jpeg library in the PATH environment variables

##### David Mansolino [Cyberbotics] 01/20/2020 10:55:50
What is the content of your PATH environment variable?

Do you have any jpeg.dll somewhere installed on your computer?

##### bsr.nur.bahadir 01/20/2020 11:04:40
I found jpeg.dll in << C:\Program Files (x86)\Java\jre1.8.0\_241\bin  >> should I add it to PATH?
%figure
![Untitled.png](https://cdn.discordapp.com/attachments/565154703139405824/668772884138819614/Untitled.png)
%end

##### David Mansolino [Cyberbotics] 01/20/2020 11:05:47
No it should not be necessary.


What is exactly the error message you get when using jpeg?

##### bsr.nur.bahadir 01/20/2020 11:12:46

%figure
![Untitled1.png](https://cdn.discordapp.com/attachments/565154703139405824/668774919739408384/Untitled1.png)
%end

##### Dorteel 01/20/2020 11:16:23
Yes `@David Mansolino` , exactly. But managed to find the problem, I changing the order I add the wheels solved the issue first the right then the left wheel instead of other way around.

##### David Mansolino [Cyberbotics] 01/20/2020 11:21:05
`@Dorteel` good news !


`@bsr.nur.bahadir` ok, this definitely means that you have one library installed on your computer that is causing conflicts with the jpeg library used by Webots, unfortunately it is very difficult for me to say where this library can be located.

##### bsr.nur.bahadir 01/20/2020 11:24:30
okay thank you so much

##### David Mansolino [Cyberbotics] 01/20/2020 11:26:37
You're welcome

##### John-ns 01/20/2020 16:47:15
Hi guys, I am installing Webots. I first downloaded webots-R2020a-rev1-x86-64.tar.bz2, and followed the instruction as:



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/668859162956005402/unknown.png)
%end


Is it installed alreadly?


How could I start Webots application?


Thanks a lot!

##### Stefania Pedrazzi [Cyberbotics] 01/20/2020 16:48:41
Hi `@John-ns` , you should type `./webots` to start the application


Using the tarball package the application is not really "installed" on the system, i.e. the `webots` command is not available from any terminal path


but you can start it from the terminal from the webots folder

##### John-ns 01/20/2020 16:51:35
Thank you `@Stefania Pedrazzi` for your help. It works.

##### Mr J 01/20/2020 19:03:16
Hi everyone, im currently trying to implement a genetic program to teach a robot to walk. To test this i need to be able to automatically reset the simulation after testing a possible solution, how would i go about automatically resetting the simulation like this?

##### DrVoodoo [Moderator] 01/20/2020 19:04:10
Supervisor node [https://cyberbotics.com/doc/reference/supervisor](https://cyberbotics.com/doc/reference/supervisor)


Well, it's not a node.


But you set supervisor to True on your robot and you get access to the god mode functions, including rest sim

##### Mr J 01/20/2020 19:05:55
ah i see , so it would allow me to reset the simulation after a set number of time steps?


or something like that

##### DrVoodoo [Moderator] 01/20/2020 19:06:42
As long as you keep the timestep count yourself, yes

##### Mr J 01/20/2020 19:07:05
awesome , ill read through the documentation. Thanks for the help

##### DrVoodoo [Moderator] 01/20/2020 21:46:44
@jc or you can get the current simulation time off the robot node

##### aysegulucar 01/20/2020 21:50:43
Hello, I think that simualtion reset does not work for op2 because just head is reseted but arms dont reset. Is it correct?

##### David Mansolino [Cyberbotics] 01/21/2020 06:56:21
`@aysegulucar` it should work for all the joints/motors, I jsut tested and it seems to works fine for me with the op2. Do you have one specific procedure to reproduce the issue?

##### moustachemartin 01/21/2020 12:09:57
Hi all. I’m currently working on a university assignment. Building a robotic arm in webots. I have everything working. But my end effector won’t grip the box. The motors grab it. But it won’t pick it up. It just slides out. Can anyone help.

##### DrVoodoo [Moderator] 01/21/2020 12:11:19
`@moustachemartin` does the box have physics? Or is it immovable?

##### aysegulucar 01/21/2020 12:26:08
Hi DAvid , Thanks.  I did not undestand the sentence  Do you have one specific procedure to reproduce the issue?  I am using def myreset(self):

        supervisor = self.simulationReset() in my supervisor. I just used simulationReset instead of working one,  worldload reset. I  think, it has problem at multiple itarations, for example 25. I have added sleep but it has still problem

##### moustachemartin 01/21/2020 12:32:19
`@DrVoodoo`   Yes the boxes have physics nodes. I have added contact properties to each part. I have increased the torque of the motors. And still it won’t lift.

##### David Mansolino [Cyberbotics] 01/21/2020 13:07:45
`@aysegulucar` can you reproduce the same problem with the 'Reset Simulation' button ([https://cyberbotics.com/doc/guide/the-user-interface#file-menu](https://cyberbotics.com/doc/guide/the-user-interface#file-menu)) ?

Are you using the latest version of Webots (we fixed some issues with the reset in R2020a).

##### Gautier 01/21/2020 13:14:16
Hello !


I have a problem : I try to get the value of a field (the "rotation" field)  from a proto. It doesn't works when the node is a proto (but it does works when that proto is converted to base node).


What I mean by "It doesn't works" is that I have to save the simulation and reset it for the value to be actualized

##### David Mansolino [Cyberbotics] 01/21/2020 13:18:32
Hi `@Gautier`, do you have a simple example / procedure to share?

##### Gautier 01/21/2020 13:24:13
Sure, here is the corresponding code I use :


Node * reaction = supervisor->getSelf();

  double rotation[4] = {0,0,0,0};

  double * tempo;    

  Field * rotationField = reaction->getField("rotation");



    tempo = (double *) rotationField->getSFRotation();

    rotation[0] = tempo[0];

    rotation[1] = tempo[1];

    rotation[2] = tempo[2];

    rotation[3] = tempo[3];

    

    std::cout<<"Current rotation ! "<<rotation[0]<<" "<<rotation[1]<<" "<<rotation[2]<<" "<<rotation[3]<<" "<<std::endl<<std::endl;


for the supervisor


The proto is a generic proto, with  just "rotation IS rotation" and "    field SFRotation rotation               0 1 0 0                   # Is `Transform.rotation`."

##### David Mansolino [Cyberbotics] 01/21/2020 13:26:24
Ok, I will try it soon


thank you


`@Gautier` I juste tried with this controller and world and I can't reproduce the issue:

[https://gist.github.com/DavidMansolino/a2006549cb834f312b9ebdb830006764](https://gist.github.com/DavidMansolino/a2006549cb834f312b9ebdb830006764)

It has a one step delay between the value displayed in the scene-tree and the one in the console but this is normal. Can you reproduce the same bahavior too?

##### Gautier 01/21/2020 14:22:06
`@David Mansolino`  Thank you for your response


I tried your file and your world, it does work


I've tried to replicate the bug with "default/box" protos, but I wasn't able to replicate it. It seems to not works when it's a proto which has another proto has a children


I've made a video that shows the behavior : [https://www.youtube.com/watch?v=-Ex\_tqCoKFI&feature=youtu.be](https://www.youtube.com/watch?v=-Ex_tqCoKFI&feature=youtu.be) One world works, one world doesn't. Both world have the same proto with the same controller, but in one, it's the children of a proto, and in the other the children of a robot

##### David Mansolino [Cyberbotics] 01/21/2020 14:29:55
Ok thank you for the precision, I will try to reproduce this.

##### DrVoodoo [Moderator] 01/21/2020 14:31:02
`@moustachemartin`  it sounds like the arm is interacting with the box. Is the box moving at all?


Have you set the contactmaterial parameter?

##### David Mansolino [Cyberbotics] 01/21/2020 14:34:27
`@Gautier` ok I can reproduce with this slightly modified version of the sample: [https://gist.github.com/DavidMansolino/a2006549cb834f312b9ebdb830006764](https://gist.github.com/DavidMansolino/a2006549cb834f312b9ebdb830006764)

##### Gautier 01/21/2020 14:41:19
`@David Mansolino` yes, that's the bug !


Do you have any idea where it can come from ?

##### David Mansolino [Cyberbotics] 01/21/2020 14:42:10
Unfortunately no, But I will open a bug report and we will try to fix this as soon as possible.

##### Angerbot 01/21/2020 14:57:31
Hi `@David Mansolino`, thanks for the platform - really great. Im running lower requirement GPU (2012 Mac Pro/12GB RAM). Application seems to lag quite abit. Any advice? Thanks

##### David Mansolino [Cyberbotics] 01/21/2020 14:59:43
`@Gautier` this is now done here (any progress will be posted on the issue): [https://github.com/cyberbotics/webots/issues/1290](https://github.com/cyberbotics/webots/issues/1290)


`@Angerbot` you're welcome, happy to see you like it.

What is your GPU? Make sure that the drivers are up to date.

In the worse case you can disable some of the OpenGL feature: [https://cyberbotics.com/doc/guide/preferences#opengl](https://cyberbotics.com/doc/guide/preferences#opengl)

For example disabling the 'Ambient Occlusion' might help quite a lot on low-end GPU.

You might find other tips too here: [https://www.cyberbotics.com/doc/guide/speed-performance](https://www.cyberbotics.com/doc/guide/speed-performance)

##### Angerbot 01/21/2020 15:03:24
It is a ATI Radeon HD 5870 im sure - sounds right. I will give the above a go! thanks !

##### Luiz Felipe 01/22/2020 05:32:55
Hello. I am running webots on windows with a 1080Ti gpu and with a 1060Ti gpu. In both of them for my environment the speed is around 0.5x. When i run the same environment in linux with the 1080Ti I get around 0.9-1x speed. This problem is related with the nvidia drivers for windows?

##### David Mansolino [Cyberbotics] 01/22/2020 07:03:56
Yes that may be an explanation, we have noticed such kind of performance difference across OS (in one way or the other) too. Make sure that your GPU drivers are up to date on Windows.

##### Dorteel 01/22/2020 08:23:55
Hi guys! I'm trying to set the built-in TurtleBot 3 Burger's linear velocity to match the real TurtleBot 3 Burger's maximum linear velocity of 0.22 m/s (as specified here: [http://emanual.robotis.com/docs/en/platform/turtlebot3/specifications/](http://emanual.robotis.com/docs/en/platform/turtlebot3/specifications/)), but I run into a warning, saying that the maxVelocity is set to 2.84 rad/sec (which in this case with 0.033m wheel radius would be around 0.09 m/s) and I can't exceed that. Is there a way to change that maximum velocity?
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/669457204595785758/unknown.png)
%end

##### David Mansolino [Cyberbotics] 01/22/2020 08:32:55
Hi `@Dorteel` let me check this


It seems indeed that there is an issue, the 'Maximum rotational velocity' was used to compute the maximum wheel speed instead of the 'Maximum translational velocity'.


May I ask you to test with this patched version or the PROTO ?
> **Attachment**: [TurtleBot3Burger.proto](https://cdn.discordapp.com/attachments/565154703139405824/669461393984061470/TurtleBot3Burger.proto)

##### Dorteel 01/22/2020 08:40:35
ah, yeah, that makes perfect sense. I knew the 2.84 was familiar 😄

##### David Mansolino [Cyberbotics] 01/22/2020 08:45:46
I am fixing this for the next version of Webots: [https://github.com/cyberbotics/webots/pull/1294](https://github.com/cyberbotics/webots/pull/1294)

##### Dorteel 01/22/2020 08:47:23
Thank you very much `@David Mansolino` ! Solved the issue perfectly!

##### David Mansolino [Cyberbotics] 01/22/2020 08:47:47
Perfect, thank you for the feedback !

##### yunus [Moderator] 01/23/2020 05:32:59
Hello. I am using **rospy **in Webots to communicate with Simulink. I added a GPS device to my Khepera robot by adding it as node in the TurretSlot field in the scene tree. In the controller, I have enabled GPS like this:

`mygps = robot.getGPS('gps')`

`mygps.enable(timeStep)`

`......`

`GPSpub = rospy.Publisher('mygps',Vector3, queue_size=10)`

and inside the control loop, I added a line"

`GPSpub.publish(mygps.getValues())`



The error I get is in the control loop, and the useful info in it says:

`.............

Invalid number of arguments, args should be ['x', 'y', 'z'] args are([-0.01999999987308264, -0.00011893769370018015, -0.125],)

............`

PS: Those three numerical value above are the exact GPS location, so I know at least that it reads them, but I think it's not correctly formatted. Thank you for pointing to me the mistake.

##### David Mansolino [Cyberbotics] 01/23/2020 06:57:10
Hi `@yunus`, this is indeed a format issue. Your are almost correct, the only issue is that mygps.getValues() returns an array and not a Vector3, here is a more correct version:

```
mygps = robot.getGPS('gps')
mygps.enable(timeStep)
...
GPSpub = rospy.Publisher('mygps',Vector3, queue_size=10)
...
# in the control loop
gpsValues = mygps.getValues()
GPSpub.publish(Vector3(x=gpsValues[0], y=gpsValues[1], z=gpsValues[2]))
```

##### Dorteel 01/23/2020 09:04:06
Hi guys! Referring to my earlier problem with the angular and linear velocity of the TurtleBot 3 Burger, I've noticed that the maxVelocity is set to 6.66 rad/sec corresponding to the maximum linear velocity of 0.22 m/s of the real robot.


However if I set the motors to both the maximum linear and angular velocity, then the maxVelocity should be around 12.65 if I'm not mistaken

##### David Mansolino [Cyberbotics] 01/23/2020 09:05:47
You mean if the robot is going at the maximum forward speed and rotating in the same time?

##### Dorteel 01/23/2020 09:08:13
if I'm setting linear and angular velocities  to the max in ROS, then I should get the maximum velocity of a wheel corresponding to 12.64 rad/sec. Using the model in the screenshot
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/669830742016131072/unknown.png)
%end

##### David Mansolino [Cyberbotics] 01/23/2020 09:09:17
I am sorry but from the datasheets of the motor ([http://emanual.robotis.com/docs/en/dxl/x/xl430-w250/](http://emanual.robotis.com/docs/en/dxl/x/xl430-w250/)) it say maximum speed is 61 [rev/min] which is way lower than  12.64 rad/sec.

##### Dorteel 01/23/2020 09:10:20
ah I see. So it's actually physically not possible to have both of them set to the max a the same time, right?

##### David Mansolino [Cyberbotics] 01/23/2020 09:10:45
Yes it seems indeed.

##### Dorteel 01/23/2020 09:12:11
Great, that clears things up! Thanks once again!

##### David Mansolino [Cyberbotics] 01/23/2020 09:12:30
You're welcome

##### Mr J 01/23/2020 16:53:50
Hi, cant quite seem to initialise the supervisor in python, i really feel like im missing something simple.


i use supervisor = Supervisor(robot)


and get the error


TypeError: \_\_init\_\_() takes 1 positional argument but 2 were given

##### Fabien Rohrer [Moderator] 01/23/2020 16:54:50
Try:


> supervisor = Supervisor()


😉

##### Mr J 01/23/2020 16:56:07
i tried that and got:


Only one instance of the Robot class should be created


as an error

##### Fabien Rohrer [Moderator] 01/23/2020 16:56:25
Ok, please do not create a Robot() instance then.


All the robot API is accessible from a Supervisor instance.


Typically:


> supervisor = Supervisor()

> ds = supervisor.getDistanceSensor('ds')  # Robot API example

> node = supervisor.getSelf()  # Supervisor API example

##### Mr J 01/23/2020 16:59:13
oh i see, i thought of it like an add on to an existing robot but its more like a robot instance with more functionality

##### Fabien Rohrer [Moderator] 01/23/2020 16:59:41
yes, exactly.


Supervisor is a subclass of Robot.

##### Mr J 01/23/2020 16:59:58
fantastic, thanks for your help

##### Kormit 01/23/2020 18:53:26
I was wondering if you can use css animations in a robot window? I can't seem to be able to get it to work

##### David Mansolino [Cyberbotics] 01/24/2020 06:57:47
`@Kormit` on which OS are you (Webots does not use the same web engine on linux and mac or Windows) ?

##### Kormit 01/24/2020 08:18:16
`@David Mansolino` currently using windows

##### David Mansolino [Cyberbotics] 01/24/2020 11:30:23
Ok thank you for the information, on Windows Webots uses QtWebkit, it seems QtWebkit supports CSS animation ([https://doc.qt.io/archives/qt-4.8/qtwebkit-guide-css.html](https://doc.qt.io/archives/qt-4.8/qtwebkit-guide-css.html)).

What is exactly the issue you have?

##### zibz 01/24/2020 11:48:35
hi


having trouble obtaining camera data on python

##### David Mansolino [Cyberbotics] 01/24/2020 11:50:08
Hi `@zibz`

##### zibz 01/24/2020 11:50:22
am I in the correct channel?

##### David Mansolino [Cyberbotics] 01/24/2020 11:50:30
Yes of course


What is exactly the problem you have?

##### zibz 01/24/2020 11:50:47
ok, so I could attach a device cam to a display

##### David Mansolino [Cyberbotics] 01/24/2020 11:51:04
Yes of course

##### zibz 01/24/2020 11:51:39
but I dont seem to be able to get any data with cam.getImage() or cam.getImageArray()


its enabled


any debug tips?

##### David Mansolino [Cyberbotics] 01/24/2020 11:53:23
You don't need to get the actual data, you can simply use the 'Display.attachCamera' function ([https://cyberbotics.com/doc/reference/display#wb\_display\_attach\_camera](https://cyberbotics.com/doc/reference/display#wb_display_attach_camera))

##### zibz 01/24/2020 11:53:56
It doesn't seem to have recognition capability

##### David Mansolino [Cyberbotics] 01/24/2020 11:54:10
Do you mean `cam.getImage()` is returning None?

##### zibz 01/24/2020 11:54:12
need to proccess image data?

##### David Mansolino [Cyberbotics] 01/24/2020 11:54:22
> It doesn't seem to have recognition capability

You don't need

##### zibz 01/24/2020 11:54:30
*process

##### David Mansolino [Cyberbotics] 01/24/2020 11:54:36
Can you post a snap of your problematic part of code?

##### zibz 01/24/2020 11:56:05
used the code on reference manual


regarding getImageArray


python notes

##### David Mansolino [Cyberbotics] 01/24/2020 11:57:16
Can you post the exact code?

##### zibz 01/24/2020 11:58:47
?

##### David Mansolino [Cyberbotics] 01/24/2020 11:59:02
Can you post the code that you are using and which is not working?

##### zibz 01/24/2020 11:59:51
image = self.camera.getImageArray()



        #display the components of each pixel

        for x in range(self.camera.getWidth()):

            for y in range(self.camera.getHeight()):

                red = image[x][y][0]

                green = image[x][y][1]

                blue = image[x][y][2]

                gray = (red + green + blue) / 3

                print('r='+str(red)+' g='+str(green)+' b='+str(blue))


subscripting NoneType Object


that's the correct object reference

##### David Mansolino [Cyberbotics] 01/24/2020 12:00:48
How did you enable the camera? Did you call the robot.step function before ?

##### zibz 01/24/2020 12:01:34
it's enabled and attached to display, can see rendered images

##### David Mansolino [Cyberbotics] 01/24/2020 12:02:19
Did you call the robot.step function BEFORE the first for?

##### zibz 01/24/2020 12:02:46
no

##### David Mansolino [Cyberbotics] 01/24/2020 12:03:19
This is required because the image is updated only at the step (before it is None).

##### zibz 01/24/2020 12:03:35
kay, spot on probably


thx

##### David Mansolino [Cyberbotics] 01/24/2020 12:03:44
You're welcome

##### zibz 01/24/2020 12:03:48
and regarding image recognition?

##### David Mansolino [Cyberbotics] 01/24/2020 12:04:00
I will leave for lunch (i wil come back in ~1h30)

##### zibz 01/24/2020 12:04:13
if I cant enable that, how can I process image?


ok, thanks

##### DrVoodoo [Moderator] 01/24/2020 13:00:24
How you process an image world depends on what it is that you're trying to do. When you say image recognition do you mean using the webots  recognition feature or something else?

##### zibz 01/24/2020 13:19:04
am trying to use features of a Recognition node


with the camera


so to distinguish objects in world


don't seem to have such node


hence was trying to understand what would the best approach be to have such feature on a controller


that's the context

##### DrVoodoo [Moderator] 01/24/2020 13:23:52
`@zibz` you need to have your camera node in your PROTO file and then you need to set up the recognition field e.g.

##### zibz 01/24/2020 13:24:49
kay, done that, gonna fiddle with it

##### DrVoodoo [Moderator] 01/24/2020 13:25:08
```Camera 
{         
  translation 0 0 -0.01
  recognition Recognition
  {
     maxObjects -1
  }
}
```

##### zibz 01/24/2020 13:25:16
just had to add it


thank you for replies

##### DrVoodoo [Moderator] 01/24/2020 13:25:54
in your control code you've got to enable the recogniser seperately

##### zibz 01/24/2020 13:26:09
yes, I see that

##### Ross 01/24/2020 13:27:13
<#565154703139405824> I am trying to make a Lidar simulation..Can anyone help in that respect..

##### DrVoodoo [Moderator] 01/24/2020 13:27:18
```camera = robot.getCamera( "cameraname" )
   camera.enable( refresh )
   camera.recognitionEnable( refresh )

   #stepping stuff

   positions = ( ( *object.get_position_on_image(), *object.get_size_on_image() )
                  for object in camera.getRecognitionObjects() )
```

##### David Mansolino [Cyberbotics] 01/24/2020 13:27:41
`@Ross` yes of course, what is your issue?

##### Ross 01/24/2020 13:29:09
I am a beginner and I don't know how to start off.. Like I know how to code in python and C++..but I know jackshit about how to go ahead and make the Lidar simulation.. :/

##### David Mansolino [Cyberbotics] 01/24/2020 13:30:51
`@Ross` in that cas I strongly recommend to start with the official tutorial (at least 1 to 6): [https://cyberbotics.com/doc/guide/tutorials](https://cyberbotics.com/doc/guide/tutorials)

They are not strictly related to Lidar, but will give you a good overview of how Webots works and how to use the various sensors of Webots.


Then if you have any specific question about Lidar do not hesitate to ask.

##### Ross 01/24/2020 13:32:00
Okay thank you so much!

##### David Mansolino [Cyberbotics] 01/24/2020 13:32:05
You're welcome

##### Willem3141 01/24/2020 13:33:47
Is there a way to keep e-pucks connected via Wi-Fi when reloading the world or resetting the simulation? Or alternatively, to automatically reconnect them? (Background: We had some student teams working on shape formation algorithms with many e-pucks, and while debugging the controller they had to reconnect to all the e-pucks every time they wanted to change something in the controller and reload, which really takes a lot of time...)

##### David Mansolino [Cyberbotics] 01/24/2020 13:36:36
Hi `@Willem3141` not as I now, but you can automatically start the remote control mode when you start the controller with this function: `wb_robot_set_mode` ([https://cyberbotics.com/doc/reference/robot#wb\_robot\_get\_mode](https://cyberbotics.com/doc/reference/robot#wb_robot_get_mode))

##### Willem3141 01/24/2020 13:38:13
I'll look into that, thanks for the pointer!

##### David Mansolino [Cyberbotics] 01/24/2020 13:38:30
You're welcome

##### 🍎小苹果🍎 01/25/2020 00:23:34
Now I chose car's controller as <extend> like in the tutorial but it says there is no extend controller 😭 



<< When I try to use pycharm it gives error as " ImportError: DLL load failed: The specified module could not be found "  How can I solve it? 🥺  ( I'm using Windows with Python 3.7)



Okay I solved it I don't know if I did correct thing but I'm sharing because I saw that some people couldn't solve it like me. I added path variable to

 C:\Users\***\AppData\Local\Programs\Webots\scripts;C:\Users\***\AppData\Local\Programs\Webots\lib\controller;C:\Users\***\AppData\Local\Programs\Webots\lib\controller\python37;C:\Users\***\AppData\Local\Programs\Webots\msys64\mingw64\bin



And lastly I added my project file's location to the Path.  >>

##### enescan 01/25/2020 02:09:32
Hello, I'm Enes from istanbul technical university. I have quick question. Is there any chances to get our 3d desinged robot (on solidworks) to webots simulation. If exist any tutorials will be best for me. thanks for answering

##### FB 01/25/2020 06:34:32
hi  I want to install software Webots but the link dosn't exist


this link:Windows: [https://www.cyberbotics.com/archive/windows/webots-7.4.0\_setup.exe](https://www.cyberbotics.com/archive/windows/webots-7.4.0_setup.exe)


how can I download it?

##### David Mansolino [Cyberbotics] 01/25/2020 07:21:45
Hi `@FB`, you can download the latest version of Webots from here: [https://github.com/cyberbotics/webots/releases/tag/R2020a-rev1](https://github.com/cyberbotics/webots/releases/tag/R2020a-rev1)

And older release from here: [https://github.com/cyberbotics/webots/releases/tag/R2019a](https://github.com/cyberbotics/webots/releases/tag/R2019a)


`@🍎小苹果🍎`, it is not 'extend' but 'extern'


Hi `@enescan`  you can export your robot in VRML from SolidWorks and then import this VRML file in Webots directly (not that this will import only the shapes, you will then have to add solids, bounding objects, physics, sensors, etc.). Or import from SolidWorks to Blender and then Blender to Webots, here is an example with Autodesk Inventor  (Solidworks works similarly): [https://youtu.be/L0FVsFD2rS4](https://youtu.be/L0FVsFD2rS4)

##### AT 01/25/2020 19:05:41
hello i have a problem in webots, i used to work with C++ i didn't have any problems, now that i want to work with python also i changed my laptop so i reinstalled webots (so we're sure the old configurations on c++ aren't there it's virgin xD) long story short, when i launch the simulation i get error message



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/670706238799216651/unknown.png)
%end


this is the error i get, although i installed python and am sure the path points to the right version


i made sure the oath is good
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/670706520060854322/unknown.png)
%end


path*


plz heeelp

##### shivajitheboss 01/26/2020 21:02:33
Yeah I had the same problem, but it got fixed on its own when i restarted my PC somehow

##### David Mansolino [Cyberbotics] 01/27/2020 07:12:30
`@AT` areyou sure it is the 64bit version of Python that is installed ?

##### Mic.lop 01/27/2020 10:40:01
Hey everyone! Im a developer trying to use the software to make a simulation of a 3d printing factory. I began using the UR5e model to start. But quickly realize it would be tricky since I do not have the linear sliders available, so I am trying to go with the kuka youbot. However, I will need to stack printers on top of each other (they are big 1m³). So I wanted to get the opinion of someone regarding what could be a quicker fix to have a mobile robot managing a matrix of 3 x 3 x3 printers ?

##### Fabien Rohrer [Moderator] 01/27/2020 11:01:24
You can easily mount your UR5e arm on a linear slider. To do so, just add a Robot node with a SliderJoint, and mount your arm as a children of this node.

##### Mic.lop 01/27/2020 12:06:16
Thanks `@Fabien Rohrer` , will try that. I may also try importing a Liftkit to the environment

##### AT 01/28/2020 10:21:45
`@David Mansolino` yes am sure;but thanks it got fixed on its own when i reinstalled webots again


Plz i have a project where i need a forklift in the factory but i can't find it in webots, how can i add it do i have to build it from scratch? did anyone build it before?

##### Tahir [Moderator] 01/28/2020 10:25:51
Yes I did worked in webots and forklifts, I inported it from URDF


You can built your own, import from URDF or using some other available tools


That are available on Webots github

##### else { on(); } 01/29/2020 09:04:00
hi. i have webots v7.4.0 but i can't register. is there a way to register?

##### Fabien Rohrer [Moderator] 01/29/2020 09:05:30
Hi, there is no more regisration for Webots 7, you can simply login Webots 7 using the "webots" password as explained here: [https://cyberbotics.com/doc/guide/general-faq#can-i-still-use-a-webots-version-before-the-r2019a-release](https://cyberbotics.com/doc/guide/general-faq#can-i-still-use-a-webots-version-before-the-r2019a-release)

##### else { on(); } 01/29/2020 09:06:35
thank you very much

##### Daniil 01/29/2020 13:54:55
Hi, how I can register in webots 8.2.1&


?

##### David Mansolino [Cyberbotics] 01/29/2020 13:55:41
Hi `@Daniil` , you don't need to register anymore. Webots is free now, you simply have to set any email you want and use 'webots' as password

##### Daniil 01/29/2020 13:57:34
thanks, but the programm requires license


what should I do?

##### Dorteel 01/29/2020 13:57:52
Hi guys! I have a question regarding the TurtleBot 3  motor acceleration. Is it set to Infinite? Can't see it in the proto file.

##### David Mansolino [Cyberbotics] 01/29/2020 13:58:25
`@Daniil` it does not anymore, as license you just have to but webots@cyberbotics.com and use 'webots' as password

##### Dorteel 01/29/2020 13:58:54
I'm wondering if the robot has any momentum we should account for. If we're moving backwards  with max speed and the next velocity command is moving forward with max speed, do we just move forward with max speed in the next timestep? Or is there some momentum involved?

##### David Mansolino [Cyberbotics] 01/29/2020 13:59:09
`@Dorteel` yes indeed the acceleration was not calibrated and is therefore set to infinity for now.


The robot itself has some inertia, but on the motor side the wheel instantaneously rotate at the desired speed. It would be nice to valibrate this, but I don't have access to the real robot to test this yet.

##### Dorteel 01/29/2020 14:01:30
`@David Mansolino` Great to know! Thank you very much for the answer!

##### David Mansolino [Cyberbotics] 01/29/2020 14:01:42
You're welcome 🙂

##### Daniil 01/29/2020 14:24:24
`@David Mansolino`, how can I choose Aldebaran robotics in webots R2020a version?

##### nelsondmmg 01/29/2020 14:25:05
Hi, I have a question concerning some of the available parameters for the vehicle. What does wheel damping constant stands for? This means that the tire is modeled in the longitudinal sense as a damper? Is there a defined value for the cornering stiffness for the Tesla model 3? Thanks


*longitudinal direction, sorry

##### David Mansolino [Cyberbotics] 01/29/2020 14:30:47
Hi `@nelsondmmg` the wheelsDampingConstant field of the car proto defines the friction parameter of the wheels joint, it is used to simulate the friction that slow down the vehicle.


`@Daniil` simply open one of the worlds in the WEBOTS\_HOME/projects/robots/softbank/nao folder: [https://cyberbotics.com/doc/guide/nao](https://cyberbotics.com/doc/guide/nao)

##### nelsondmmg 01/29/2020 14:33:12
So there is not any slippage considered in the dynamic model?

##### David Mansolino [Cyberbotics] 01/29/2020 14:34:29
Yes, but the properties of the contact between the wheel and the ground are defined in the WorldInfo.contactProperties field: [https://www.cyberbotics.com/doc/reference/contactproperties](https://www.cyberbotics.com/doc/reference/contactproperties)

##### nelsondmmg 01/29/2020 14:35:19
Ahh ok, thanks 👍🏻

##### David Mansolino [Cyberbotics] 01/29/2020 14:35:30
You're welcome

##### nelsondmmg 01/29/2020 15:51:34
I'm looking for the function wb\_motor\_set\_torque in the file motor.c but there it isn't there (it is inside the header). Where this function is implemented?

##### David Mansolino [Cyberbotics] 01/29/2020 15:52:42
Here it is: [https://github.com/cyberbotics/webots/blob/master/src/lib/Controller/api/motor.c#L545](https://github.com/cyberbotics/webots/blob/master/src/lib/Controller/api/motor.c#L545)


And in case you are interested, here is the relation on the Webots side: [https://github.com/cyberbotics/webots/blob/master/src/webots/nodes/WbMotor.cpp#L445](https://github.com/cyberbotics/webots/blob/master/src/webots/nodes/WbMotor.cpp#L445)

##### nelsondmmg 01/29/2020 15:59:38
Thanks, but I'm looking for the file that really applies the torque using the dynamic vehicle equations


How each physical parameter for each type of vehicle are taken into account?

##### Olivier Michel [Cyberbotics] 01/29/2020 16:48:15
The answer to this question is complicated and lies basically in Webots side file indicated by `@David Mansolino`.

##### Panos 01/30/2020 10:08:01
Hi, I have attached a pair of glasses on the pedestrian model, which I want to work as a camera. I am trying to enable the camera in the pedestrian controller (python) but the camera overlay remains black. Can you help me with this?

##### Olivier Michel [Cyberbotics] 01/30/2020 10:23:40
Hi Panos, did you enable the camera from a controller program?

##### Panos 01/30/2020 10:31:41
Hi Olivier, thanks for you reply. Yes, I added  "class Mycamera (Camera):" and then "def enable(self, samplingPeriod):" and "self.SamplingPeriod = 1"

##### Olivier Michel [Cyberbotics] 01/30/2020 10:35:44
Ok, then are you sure there is no object in front of the camera occluding its field of view?


I would suggest you to start from a working camera example (for example in projects/samples/devices/worlds/camera.wbt) and modify it by importing your pedestrian model and you will likely find why the camera doesn't work as expected.

##### Panos 01/30/2020 10:45:42
Ok, I will try this. Thanks for your help!

##### Olivier Michel [Cyberbotics] 01/30/2020 10:58:39
You are welcome.

##### LISC 01/31/2020 01:31:26
Hello, right now i'm using Webots 8.4.0, the login system says my password was incorrect. But I'm pretty sure that it was correct. What are the potential reasons to that?

##### David Mansolino [Cyberbotics] 01/31/2020 06:21:03
Hi `@LISC`, Webots is now free and open-source, we had therefore to change the login system of the older version to make it free for everyone. You simply need to use 'webots' as password.

## February

##### Nocturnal Warfare 02/01/2020 00:31:05
does anyone know where the terrain generator went? It is just returning Error 404 Not Found. [https://cyberbotics.com/terrain\_generator](https://cyberbotics.com/terrain_generator)

##### Fabien Rohrer [Moderator] 02/01/2020 07:42:12
This service is currently down, please use the Open street map importer instead [https://cyberbotics.com/doc/automobile/openstreetmap-importer](https://cyberbotics.com/doc/automobile/openstreetmap-importer)

##### SimonDK 02/01/2020 14:17:34
Running WeBots on Mac and using Python 3.7 I get the following error:

`import \_controller  ImportError: dlopen(/Applications/Webots.app/lib/controller/python37/\_controller.so, 2): 

Library not loaded: /Library/Frameworks/Python.framework/Versions/3.7/Python  

Referenced from: /Applications/Webots.app/lib/controller/python37/\_controller.so  

Reason: image not found`



Python 3.7 is available on the system but is not located at the path above i.e. /Library/Frameworks/Python.framework ... That path does not exist.



Should I install Python from the Python website or what is expected to use the Webots python libraries?


Not entirely sure what is going on, but looking at the Webots source it is built against the python version living in /Library/Frameworks/Python.framework, which seems to not be recommended in newer MacOS versions. Most people recommend to remove that python directory if it is there, and on MacOS Catalina the folder does not exist.

##### shivajitheboss 02/01/2020 19:21:44
I wanted to know if i can transfer my code to arduino. Do i have to make any changes? Please help at the earliest.

##### w3. eydi 02/01/2020 19:35:19
hi guys


im new in webots


ohh sry this is tecnical questions 🙂

##### vinay 02/02/2020 06:23:48
we are making a micromouse for that we have two motors with rated voltage 6v each but our battary is 12v lipo i want any solution for this issue

##### SimonDK 02/02/2020 08:58:41
`@vinay` make a voltage divider or buy a DC-DC converter.

##### vinay 02/02/2020 10:29:39
we dont have much time to buy any new instuments how to do voltage dividing?


as we are using motor driver also can this motor driver alter our supply voltage accordingly the required voltage for motors?


`@Olivier Michel` can u reply fastly

##### MohammadSorush 02/02/2020 14:37:23
Hi, I'am trying to prepare simulation of a humanoid robot but unfortunatly i couldnt find some parameters about MX-64 and MX-106 (Dynamixel actuators) can anyone help me?


I found this for MX-28 from this link [https://cyberbotics.com/doc/guide/robotis-op2](https://cyberbotics.com/doc/guide/robotis-op2)
%figure
![Screenshot_from_2020-02-02_17-59-59.png](https://cdn.discordapp.com/attachments/565154703139405824/673537683091488768/Screenshot_from_2020-02-02_17-59-59.png)
%end


I need dampingConstant* staticFriction* maxVelocity* acceleration* springConstant*

##### David Mansolino [Cyberbotics] 02/03/2020 06:44:04
`@MohammadSorush` you can find some information in the dataseets of the device (e.g. [http://emanual.robotis.com/docs/en/dxl/mx/mx-64/](http://emanual.robotis.com/docs/en/dxl/mx/mx-64/)).

However, some of these parameters depends on the configuration of your robot (i.e. to what is connected the device) and not only the motor itself.


Hi `@w3. eydi` Welcome 😉


`@shivajitheboss`, unfortunately we don't have any way of transferrign to arduino out of the box. But since both Webots and arduino support C like language it should be quite easy to adapt your code from one to the other.


`@SimonDK` how did you installed Python? Make sure to not use Python from brew or other, Webots will work only with the one downloaded on python.org. See this related post: [https://stackoverflow.com/questions/59840278/running-an-external-python-controller-from-console](https://stackoverflow.com/questions/59840278/running-an-external-python-controller-from-console)

##### Olivier Michel [Cyberbotics] 02/03/2020 07:31:01
`@vinay`: your question doesn't seem to be related with Webots, it looks like a hardware question. I am sorry we can't help you on that.

##### nelsondmmg 02/03/2020 07:31:51
Hi. I just updated webots from 2019b to 2020a and my vehicle controller crashes at initialization. I'm using a camera to show the driver's point of view. The following message is displayed: api/abstract\_camera.c:54: assertion failed: -1 != c-> schmid

##### Fabien Rohrer [Moderator] 02/03/2020 07:32:50
`@nelsondmmg` Did you clean and rebuild your controller? (controllers may be not binary compatible between 2 major versions)

##### nelsondmmg 02/03/2020 07:41:36
`@Fabien Rohrer`  just updated the dependencies to the new 2020a libs and the error still happens. I'm using the same wbt file and the error still happens

##### MohammadSorush 02/03/2020 07:43:42
`@David Mansolino` none of the parameters that i mentioned, exist in this link could you help me how did you find out these parameters for MX-28?  Pleaaaase 😞

##### David Mansolino [Cyberbotics] 02/03/2020 07:44:41
`@MohammadSorush` not as is but they can be computed, for example it is easy to compute `maxVelocity` from speed: 63 [rev/min]

##### Fabien Rohrer [Moderator] 02/03/2020 07:45:12
`@nelsondmmg` Updated the dependencies? do you have a local copy of libController? It seems that you are not using the correct version, because line 54 is on line 52 here [https://github.com/cyberbotics/webots/blob/R2020a/src/lib/Controller/api/abstract\_camera.c#L54](https://github.com/cyberbotics/webots/blob/R2020a/src/lib/Controller/api/abstract_camera.c#L54) 😉 Please check how libController is linked and update the shared library.

##### nelsondmmg 02/03/2020 07:47:14
`@Fabien Rohrer` ah, you are absolutely right, I did not updated the LD\_LIBRARY\_PATH. Thanks 👍🏻

##### Gautier 02/03/2020 10:49:57
Hello, I would like to know if that's possible to change the value of a custom field of a proto using lua in procedural protos nodes ?

##### David Mansolino [Cyberbotics] 02/03/2020 10:51:10
Hi `@Gautier` you mean you want a procedural PROTO to change the value of its own field visible in the scene tree or change the value of one of its internal fields?

##### Gautier 02/03/2020 10:52:18
Hi David, I would like it to change the value of its own field, visible in the scene tree (the value we access through "fields.variableName.value")

##### David Mansolino [Cyberbotics] 02/03/2020 10:53:11
You can change the `fields.variableName.value` value, but unfortunately this will not be visible in the scene-tree (this possibility is not yet implemented).

##### Gautier 02/03/2020 10:53:47
But the change will be taken "into account" when the proto is being generated ?

##### David Mansolino [Cyberbotics] 02/03/2020 10:54:16
For this iteration yes, but not for the next regeneration.

##### Gautier 02/03/2020 10:54:36
Basically, I want to use a lua library to load a config file when the proto is being loaded, but I want the user to be able to modify its value later


Oh, I see


Thank you

##### David Mansolino [Cyberbotics] 02/03/2020 10:57:08
Just for information, here is an example of PROTO reding a 'configuration file': [https://github.com/cyberbotics/webots/blob/master/projects/objects/trees/protos/Forest.proto#L99](https://github.com/cyberbotics/webots/blob/master/projects/objects/trees/protos/Forest.proto#L99)

##### Gautier 02/03/2020 11:06:36
Ok, I'm gonna take a look ! Thank you !

##### David Mansolino [Cyberbotics] 02/03/2020 11:06:51
You're welcome

##### Gautier 02/03/2020 13:25:33
Hi again, I have memories leak in my controller, and I'm not sure if that come from my controller (in itself) or webots ?


Here is my controller : [https://pastebin.com/BSLtLKfK](https://pastebin.com/BSLtLKfK) , my makefile: [https://pastebin.com/TCRnuxpw](https://pastebin.com/TCRnuxpw)


and the resulting message in webots (compiled with the option -fsanitize=address )
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/673882135290970122/unknown.png)
%end

##### David Mansolino [Cyberbotics] 02/03/2020 13:32:58
Thank it may indeed come from the libcontroller (even if we are regularly checking for memory leaks). Would it be possible for you to use the development environment of Webots to recompile webots in debug mode in order to try to get more information on where exactly is the leak? (I can send you the procedure).

##### Gautier 02/03/2020 13:34:49
I can try !


I'm currently running webots R2020a on a docker image of ubuntu 16.04

##### David Mansolino [Cyberbotics] 02/03/2020 13:35:53
Oh if you are on ubuntu 16.04, then I can send you directly the debug version, give me 5 minutes

##### Gautier 02/03/2020 13:36:37
The dockers run on ubuntu 16.04, but my current "linux distro" is ubuntu 18.04 😅

##### David Mansolino [Cyberbotics] 02/03/2020 13:37:24
It will work for both 😉

##### Gautier 02/03/2020 13:41:36
Ahah, ok ! 😄

##### David Mansolino [Cyberbotics] 02/03/2020 14:23:50
Sorry it tooks a bit longer than expected.
> **Attachment**: [controller.zip](https://cdn.discordapp.com/attachments/565154703139405824/673896433262264320/controller.zip)


You just have to replace your folder (do not forget to make a backup first) WEBOTS\_HOME/lib/controller by this one.

##### Gautier 02/03/2020 15:11:57
No worries


I just tried it, there is still some leaks, but there is a noticable improvement



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/673908625047027725/unknown.png)
%end

##### rachel 02/03/2020 15:53:49
Hello everyone, I am working on simulation UR5e + robotiq 2 finger 85 gripper  with ROS controller. I can connect ur5 with ros in webots. But I have no idea how to control gripper with ROS. The gripper is supposed to be controlled through FollowJointTrajectoryAction. Is anyone have ideas how to do it?

##### Tahir [Moderator] 02/03/2020 15:55:00
There is one Robotiq package in ROS have a look at that


This is an action server you have to write an action client which will talk to the server and get the job done


If you just go to Universal Robots ROS driver github pacakage you can find a couple of exaoles there


This can also be controllex with rqt trajectory planner


And there might be other options as well

##### rachel 02/03/2020 16:00:55
Is any example of gripper controlled by ROS?

##### Tahir [Moderator] 02/03/2020 16:02:16
[http://wiki.ros.org/robotiq](http://wiki.ros.org/robotiq)


[http://wiki.ros.org/robotiq/Tutorials/Control%20of%20a%202-Finger%20Gripper%20using%20the%20Modbus%20RTU%20protocol%20%28ros%20kinetic%20and%20newer%20releases%29](http://wiki.ros.org/robotiq/Tutorials/Control%20of%20a%202-Finger%20Gripper%20using%20the%20Modbus%20RTU%20protocol%20%28ros%20kinetic%20and%20newer%20releases%29)

##### rachel 02/03/2020 16:06:53
Shall I also add controller in gripper?
%figure
![Screenshot_from_2020-02-03_17-06-21.png](https://cdn.discordapp.com/attachments/565154703139405824/673922367969427513/Screenshot_from_2020-02-03_17-06-21.png)
%end

##### Tahir [Moderator] 02/03/2020 16:08:35
No idea of that


I haven't use it in simulations but the real robot

##### rachel 02/03/2020 16:10:38
Thank you

##### David Mansolino [Cyberbotics] 02/03/2020 16:12:01
> I just tried it, there is still some leaks, but there is a noticable improvement

`@Gautier` 

Thank you, the line number will help you checking this.


I just checked them, there are indeed never freed but they are unique and used during the whole life of the controller, so you can safely ignore these warnings

##### rachel 02/03/2020 16:24:53
`@David Mansolino` Hello David, do you have idea how to simulate gripper in webots with ros control? How to create FollowJointTrajectoryAction for gripper?

##### David Mansolino [Cyberbotics] 02/03/2020 16:28:00
Hi `@rachel`, yes I have an idea, but I am currently online from my phone. I will answer you tomorrow morning from my computer.


Juste à question, are you using ROS 1 or 2?

##### rachel 02/03/2020 16:30:15
ROS 1 with moveit


I try to run arm and gripper in two group like running gazebo. Thank you very much! `@David Mansolino`

##### David Mansolino [Cyberbotics] 02/04/2020 06:35:19
Hi again `@rachel`, for ROS1 our interface with the FollowJointTrajectory action is limited to the univrsal robot robots. It is implemented in this controller: [https://github.com/cyberbotics/webots/tree/master/projects/robots/universal\_robots/resources/ros\_package/ur\_e\_webots/scripts](https://github.com/cyberbotics/webots/tree/master/projects/robots/universal_robots/resources/ros_package/ur_e_webots/scripts)

It should be quite easy to extend it to the gripper too. It is just a metter of adding the names of the gripper motors:

[https://github.com/cyberbotics/webots/tree/master/projects/robots/universal\_robots/resources/ros\_package/ur\_e\_webots/scripts/joint\_state\_publisher.py#L24](https://github.com/cyberbotics/webots/tree/master/projects/robots/universal_robots/resources/ros_package/ur_e_webots/scripts/joint_state_publisher.py#L24)

[https://github.com/cyberbotics/webots/tree/master/projects/robots/universal\_robots/resources/ros\_package/ur\_e\_webots/scripts/trajectory\_follower.py#L106](https://github.com/cyberbotics/webots/tree/master/projects/robots/universal_robots/resources/ros_package/ur_e_webots/scripts/trajectory_follower.py#L106)

##### rachel 02/04/2020 08:07:25
Hello `@David Mansolino`. Thank yo for your response. I will explain what I already did. According to robotiq 85 simulation in Gazebo [https://github.com/StanleyInnovation/robotiq\_85\_gripper/blob/master/robotiq\_85\_simulation/robotiq\_85\_gazebo/controller/gripper\_controller\_robotiq.yaml](https://github.com/StanleyInnovation/robotiq_85_gripper/blob/master/robotiq_85_simulation/robotiq_85_gazebo/controller/gripper_controller_robotiq.yaml) The gripper is only controlled by one joint "gripper\_finger1\_joint". So I added this joint in the file  [https://github.com/ipa-rwu/ur5\_2f\_webots/blob/master/controllers/universal\_robots\_ros/joint\_state\_publisher.py](https://github.com/ipa-rwu/ur5_2f_webots/blob/master/controllers/universal_robots_ros/joint_state_publisher.py) which is this file [https://github.com/cyberbotics/webots/blob/master/projects/robots/universal\_robots/controllers/universal\_robots\_ros/joint\_state\_publisher.py](https://github.com/cyberbotics/webots/blob/master/projects/robots/universal_robots/controllers/universal_robots_ros/joint_state_publisher.py). And I modify the file [https://github.com/cyberbotics/webots/blob/master/projects/robots/universal\_robots/controllers/universal\_robots\_ros/trajectory\_follower.py](https://github.com/cyberbotics/webots/blob/master/projects/robots/universal_robots/controllers/universal_robots_ros/trajectory_follower.py). You can find here [https://github.com/ipa-rwu/ur5\_2f\_webots/blob/master/controllers/universal\_robots\_ros/trajectory\_follower.py](https://github.com/ipa-rwu/ur5_2f_webots/blob/master/controllers/universal_robots_ros/trajectory_follower.py). Could you have look the file I modify? I am not so sure how to write FollowJointTrajectoryAction for gripper in Webots.

##### David Mansolino [Cyberbotics] 02/04/2020 08:47:18
We don't have the 85 model, only the 3F one: [https://cyberbotics.com/doc/guide/gripper-actuators#robotiq-3f-gripper](https://cyberbotics.com/doc/guide/gripper-actuators#robotiq-3f-gripper)


You therefore have to create yourself the model. For this you can use our urdf importer: [https://github.com/cyberbotics/urdf2webots](https://github.com/cyberbotics/urdf2webots)


About the trajectory\_follower.py it is probabyl simpler to just add the name to the `jointNames` array

##### rachel 02/04/2020 08:55:59
`@David Mansolino` But if I just add joint in trajectory\_folloer.py so arm joints and gripper joint will all publish to topic /follow\_joint\_trajectory. I want use /arm\_control/follow\_joint\_trajectory for arm and /gripper\_contraol/follow\_joint\_trajectory


This the gripper I am using after convert from urdf [https://github.com/ipa-rwu/ur5\_2f\_webots/blob/master/protos/Robotiq85Gripper.proto](https://github.com/ipa-rwu/ur5_2f_webots/blob/master/protos/Robotiq85Gripper.proto)

##### David Mansolino [Cyberbotics] 02/04/2020 09:15:41
Nice to see that you have already the gripper model.


> `@David Mansolino` But if I just add joint in trajectory\_folloer.py so arm joints and gripper joint will all publish to topic /follow\_joint\_trajectory. I want use /arm\_control/follow\_joint\_trajectory for arm and /gripper\_contraol/follow\_joint\_trajectory

`@rachel` 



That makes sense indeed. What you deed seems correct (not tested, but I had an overview of the code). Do you have issues with it?

##### rachel 02/04/2020 09:24:48
When I start "roslaunch ur5\_e\_moveit\_config ur5\_e\_moveit\_planning\_execution.launch sim:=true" it is freezing. If I remove code for gripper it can work
%figure
![Screenshot_from_2020-02-04_10-23-30.png](https://cdn.discordapp.com/attachments/565154703139405824/674183566753792000/Screenshot_from_2020-02-04_10-23-30.png)
%end

##### David Mansolino [Cyberbotics] 02/04/2020 13:27:28
`@rachel` probably trying to launch the node directly (not from the launch file) will give you more information.

##### nelsondmmg 02/04/2020 14:33:45
I have a question related to the graphical representation of objects on webots. I'm using the tesla model 3 robot, and when it drives onto the sidewalk the tire surpasses the vehicle's body (the suspension is pretty low). Is there a parameter that I can change to stop this from happening? Thanks

##### DrVoodoo [Moderator] 02/04/2020 15:53:08
`@nelsondmmg` the tesla model is using the Car proto so you could adjust the suspension damping values

##### David Mansolino [Cyberbotics] 02/04/2020 16:09:45
`@nelsondmmg`, `@DrVoodoo` is correct, the four main parameters that influences the suspensions are `suspensionFrontSpringConstant`, `suspensionFrontDampingConstant`, `suspensionRearSpringConstant` and `suspensionRearDampingConstant` the spring effect defines the magnitude of the spring force effect and the damping effect produce viscous friction, see the pages for more information:

[https://cyberbotics.com/doc/automobile/ackermannvehicle](https://cyberbotics.com/doc/automobile/ackermannvehicle)

and

[https://www.cyberbotics.com/doc/reference/jointparameters#springs-and-dampers](https://www.cyberbotics.com/doc/reference/jointparameters#springs-and-dampers)

##### John-ns 02/04/2020 16:52:49
Hello guys, I would like to ask a question in the Driver Library for Automobiles. The library allows me to maually set the gear of the vehicle. My question is, could I set the gear to automatic control mode? Thanks a lot.

##### David Mansolino [Cyberbotics] 02/04/2020 16:58:37
`@John-ns`  you can control the vehicle in speed mode using the set cruising speed function.

##### nelsondmmg 02/04/2020 16:59:19
`@David Mansolino` so these terms are not real? It is the same for the break coefficient (if it is correspondent with the real case)?

##### David Mansolino [Cyberbotics] 02/04/2020 16:59:29
[https://cyberbotics.com/doc/automobile/driver-library#wbu\_driver\_set\_cruising\_speed](https://cyberbotics.com/doc/automobile/driver-library#wbu_driver_set_cruising_speed)

##### nelsondmmg 02/04/2020 16:59:41
`@DrVoodoo` thanks 👍🏻

##### John-ns 02/04/2020 17:01:37
Thank you `@David Mansolino` for your answer. Appreicate it.

##### SimonDK 02/04/2020 19:20:23
> `@SimonDK` how did you installed Python? Make sure to not use Python from brew or other, Webots will work only with the one downloaded on python.org. See this related post: [https://stackoverflow.com/questions/59840278/running-an-external-python-controller-from-console](https://stackoverflow.com/questions/59840278/running-an-external-python-controller-from-console)

`@David Mansolino` I ended up doing just that and it works. It is a pity because I had to skip using my python virtual environment, which I am not too happy about 😅 Any experience in using the python.org dist towards virtualenv?

##### kadeng 02/05/2020 06:46:15
Hi, I just accidentally stumbled upon Webots. Just to get a rough idea, how mature is Webots in comparison to Gazebo?

##### Fabien Rohrer [Moderator] 02/05/2020 06:52:09
`@kadeng` Difficult to have an impartial answer here, but Webots is much more mature IMO. Certainly because of its close source history (before being released open source).


We could try to provide you more precise answer on specific topics.


It has obvious advantages over Gazebo: it runs smoothly on Windows/macOS, it is deterministic, it provides a realistic rendering, its physics engine and collisions are better, it provides web streaming features, etc.

##### kadeng 02/05/2020 06:56:19
Well, I am currently trying to design a custom robot which also has an UR5 robotic arm attached for simulation in Gazebo. Installed the Phobos plugin in Blender and tried to get things working. But noticed that basically not much is working as documented, docs are bad and out of date, exceptions keep popping up. Then this morning I found webots..


Physical simulation accuracy is also important, since the robot is for a plugging task.

##### Fabien Rohrer [Moderator] 02/05/2020 06:57:53
We have an UR5 arm running out of the box: [https://cyberbotics.com/doc/guide/ure](https://cyberbotics.com/doc/guide/ure)


It could be plugged in any other robot, or your own one.

##### kadeng 02/05/2020 06:59:16
Thanks, I think I will definitely give it a try.

##### Fabien Rohrer [Moderator] 02/05/2020 07:00:26
... and an active community here 😋

##### kadeng 02/05/2020 07:01:06
Yes, that's also a great thing.

##### David Mansolino [Cyberbotics] 02/05/2020 07:12:05
`@nelsondmmg` they do represent the spring and damping effect that you can see in a real joint.


`@SimonDK` thank for the feedback. If you want to use another distribution of Python you can recompile the python wrapper for your specific distribution, here is the mekfaile that need to be adjusted: [https://github.com/cyberbotics/webots/blob/master/resources/languages/python/Makefile](https://github.com/cyberbotics/webots/blob/master/resources/languages/python/Makefile)

##### Gautier 02/05/2020 12:59:42
Hello ! Might I ask a question ?

##### David Mansolino [Cyberbotics] 02/05/2020 13:14:11
Hi `@Gautier` yes of course!

##### Gautier 02/05/2020 13:24:15
Hi `@David Mansolino`  !


So, my problem is that I want to access the children field of a proto. I have some other proto in the "children" field and I would like to retrieve their orientation/translation


I tried to put the children field as a "" visible field "" of the proto with some default argument, instantiating the other different proto, but that doesn't works because we use some lua to put their orientation/position

##### David Mansolino [Cyberbotics] 02/05/2020 13:29:58
You want to get the field using the supervisor API right?

##### Gautier 02/05/2020 13:30:17
Yes, that's right !

##### David Mansolino [Cyberbotics] 02/05/2020 13:30:55
Unfortunately this is a known limitation, but the good news is that we have plans for improving this in a near future: [https://github.com/cyberbotics/webots/issues/1310](https://github.com/cyberbotics/webots/issues/1310)


In the meantime, I would recomment to convert your PROTO temporarly to base node, you can easily do this by right-clicking on your PROTO node and selecting `Convert to Base Node(s)`


And you can follow the progress of [https://github.com/cyberbotics/webots/issues/1310](https://github.com/cyberbotics/webots/issues/1310)

##### Gautier 02/05/2020 13:33:21
Ok, that's good new, thank you a lot !


Is there any way to convert automatically the proto in base node (through supervisor or other) ? We use a supervisor to instantiate the different proto at the beginning of the simulation, so we try to "minimize user input".

##### David Mansolino [Cyberbotics] 02/05/2020 13:35:59
Unfortunately this is not available through the Supervisor API.

##### Gautier 02/05/2020 13:37:38
Understood, thank you for the help !

##### David Mansolino [Cyberbotics] 02/05/2020 13:38:18
You're welcome. We will try fix [https://github.com/cyberbotics/webots/issues/1310](https://github.com/cyberbotics/webots/issues/1310) soon so that you are not blocked by this.

##### w3. eydi 02/05/2020 13:55:32
`@David Mansolino` David, do you have a different language option for language? I mean, I can translate to community in Turkish.


For documentation, sorry. 😀

##### nelsondmmg 02/05/2020 13:58:44
Hi, which type of joint is used to model the contact between tire and the road `@David Mansolino`? I'm trying to find out if it is necessary to consider lateral or longitudinal slip for the vehicle

##### David Mansolino [Cyberbotics] 02/05/2020 13:59:13
`@w3. eydi` we indeed don't have any Turkish translation, if you would liek to translate it to Trukish this would be highly appreciated: here is the procedure how to create a translation for a new language:

[https://github.com/cyberbotics/webots/tree/master/resources/translations](https://github.com/cyberbotics/webots/tree/master/resources/translations)

Once you have done the `wb_tr.ts` file, you can send it to me and I will integrate it into Webots.


`@nelsondmmg` a 'Contact Joint' is used to model the contact between the tire and the road: [http://ode.org/wiki/index.php?title=Manual#Contact](http://ode.org/wiki/index.php?title=Manual#Contact)

##### w3. eydi 02/05/2020 14:04:38
`@David Mansolino` I actually said it for the documentation page. Like tutorials. I understand that you will integrate this translation into the Webots program. I will work on this topic at the first opportunity.

##### David Mansolino [Cyberbotics] 02/05/2020 14:07:18
Oh, for the documentation, it is indeed english only for now.

##### nelsondmmg 02/05/2020 14:23:58
Thanks `@David Mansolino`!

##### David Mansolino [Cyberbotics] 02/05/2020 14:24:16
You're welcome

##### Viniciusaguiar 02/05/2020 14:51:45
Is there headless version of Webots like Gazebo's Gzweb?

##### Olivier Michel [Cyberbotics] 02/05/2020 14:55:40
Hi, yes, you can run Webots headless as it is the case on [https://robotbenchmark.net](https://robotbenchmark.net)


See documentation here: [https://cyberbotics.com/doc/guide/web-interface](https://cyberbotics.com/doc/guide/web-interface)

##### David Mansolino [Cyberbotics] 02/05/2020 14:58:22
`@Viniciusaguiar` see also this question on stackoverflow on the subject: [https://stackoverflow.com/questions/58208419/does-webots-have-headless-mode](https://stackoverflow.com/questions/58208419/does-webots-have-headless-mode)

##### zibz 02/05/2020 19:13:12
hi


having a rough time working with collision avoidance


if anyone could point out some direction..that'd be great


using a khepera III


worked through braitenberg controller example


actually khepera

##### David Mansolino [Cyberbotics] 02/06/2020 06:58:51
Hi `@zibz`, you can find more information about obstacle avoidance here: [https://en.wikibooks.org/wiki/Cyberbotics%27\_Robot\_Curriculum/Intermediate\_programming\_Exercises#Obstacle\_avoidance\_Module\_](https://en.wikibooks.org/wiki/Cyberbotics%27_Robot_Curriculum/Intermediate_programming_Exercises#Obstacle_avoidance_Module_)(OAM)

##### kwy 02/06/2020 11:23:10
Hallo, i want to use Webots and ROS on Mac. Has anyone actually got ROS working on Mac ?

##### Fabien Rohrer [Moderator] 02/06/2020 11:24:53
Hi,


If I'm not wrong, ROS itself cannot run on macOS. You should think about running it on linux. However, the ROS client which interfaces Webots and ROS can run on macOS. Therefore your simulation may run on macOS.

##### kwy 02/06/2020 11:28:21
Oh! that is perfect. so i need to download the ROS client?

##### Fabien Rohrer [Moderator] 02/06/2020 11:29:03
This should run out-of-the-box in Webots.


The client ROS controller is called "ros"


it can be run in every simulation (as it's a default controller):


[https://github.com/cyberbotics/webots/tree/master/projects/default/controllers/ros](https://github.com/cyberbotics/webots/tree/master/projects/default/controllers/ros)


You just need to set your Robot.controller field to "ros"

##### kwy 02/06/2020 11:33:10
ok.  when I create a simulation, i need to run ROS and Webots on Linux. after i finish the simulation,  then i can run the simulation directly on mac. Right?

##### Fabien Rohrer [Moderator] 02/06/2020 11:35:24
Yes, it seems to be possible. But in any case, the ROS node should run in Linux. But Webots can run on macOS.


You should use this parameter: ROS\_MASTER\_URI:


[https://cyberbotics.com/doc/guide/using-ros#using-the-standard-ros-controller](https://cyberbotics.com/doc/guide/using-ros#using-the-standard-ros-controller)


You could even think about running ROS in a linux virtual machine on mac 😉

##### kwy 02/06/2020 11:45:12
thanks !

##### yunus [Moderator] 02/06/2020 13:16:02
Hello. On the same subject of using ROS. I am trying to use ROS to communicate commands from MATLAB Simulink to a Khepera III in Webots. All is running on Windows 10. I used 'rospy' Python controller in Webots and it works, but there is at least 20 seconds latency between when I send the Simulink command and when the robot starts moving. So I am thinking of using 'ros' controller to get around this problem of asynchronous response (*as I think C codes are faster to compile than Python's*). However, when I open any sample world that uses 'ros', I get this error:

`WARNING: Robot: The controller directory has not been found, searched the following locations:

C:/Program Files/Webots/projects/languages/ros/controllers/ros/

C:/Program Files/Webots/projects/default/controllers/ros/

C:/Program Files/Webots/resources/projects/controllers/ros/`

Can you please give me some advice?

And what possibly you think is the reason why my Webots simulation doesn't run immediately as I press run on my Simulink simulation?

##### David Mansolino [Cyberbotics] 02/06/2020 13:22:24
Hi `@yunus` the ros controller is suppose to be in `C:/Program Files/Webots/projects/default/controllers/ros/` can't you see any ros.exe there? If not re-installing Webots might fix the problem.


About the reason of the delay, it is diffcult to say, because you have many conversion from one framework to the other. Webots->ROS->Simulink->Ros->Webots

##### kadeng 02/06/2020 13:30:21
I would recommend to use printf debugging (write a log files with timestamps) to isolate the delay.


Does anyone know if the source code of the standard ros controller for webots is open source? Seems like it is a precompiled library that is being downloaded via the Makefile


I was wondering whether it would be possible to get it to run on Windows (acting as a client to a Linux VM running ROS)

##### David Mansolino [Cyberbotics] 02/06/2020 13:43:38
HI `@kadeng` yes it is open source, the code is here: [https://github.com/cyberbotics/webots/tree/master/projects/default/controllers/ros](https://github.com/cyberbotics/webots/tree/master/projects/default/controllers/ros)

Abotu the Makefiles, you are probably refeering to: [https://github.com/cyberbotics/webots/blob/master/projects/default/libraries/Makefile](https://github.com/cyberbotics/webots/blob/master/projects/default/libraries/Makefile)

This makefiles only download the dependencies of the controller (libros.dll etc.),


> I was wondering whether it would be possible to get it to run on Windows (acting as a client to a Linux VM running ROS)

If you manage to recompile it for Windows (I did it a long time ago, but it is not working with the newer version of Webots), it should be possible indeed.

##### kadeng 02/06/2020 13:46:47
So the libros is part of ROS? If so, I can find it.

##### David Mansolino [Cyberbotics] 02/06/2020 13:48:08
(yes, I said libros, but it's probably not named like this, this was just an example)

##### kadeng 02/06/2020 13:48:09
I guess the normal Windows build of ROS will not work, due to different compilers etc. Or what do you think? Because I built ROS for Windows already, but ended up not using it..

##### David Mansolino [Cyberbotics] 02/06/2020 13:48:40
If it is build with GCC too it should work

##### kadeng 02/06/2020 13:48:55
I'll take a look and try...

##### David Mansolino [Cyberbotics] 02/06/2020 13:49:37
Ok, let us know if you have some issues

##### kadeng 02/06/2020 13:49:53
Will do that

##### David Mansolino [Cyberbotics] 02/06/2020 13:51:05
Here is the exact list of required libraries: roscpp rosconsole roscpp\_serialization rostime

##### kadeng 02/06/2020 13:51:38
Thanks

##### David Mansolino [Cyberbotics] 02/06/2020 13:51:49
You're welcome

##### W.El-Badry 02/06/2020 15:35:04

%figure
![3.png](https://cdn.discordapp.com/attachments/565154703139405824/675001523931185152/3.png)
%end



%figure
![2020-02-06_17-30-10.png](https://cdn.discordapp.com/attachments/565154703139405824/675001575571193916/2020-02-06_17-30-10.png)
%end


Hello,

Does MATLAB R2019b has issues with webots?

Although MATLAB is installed correctly and path is set as described with MATLAB can be instantiated from cmd, Webots doesn't recognize it. Also,  MATLAB MinGW-w64 C/C++ Compiler is successfully installed
%figure
![1.png](https://cdn.discordapp.com/attachments/565154703139405824/675001579522359296/1.png)
%end


Did a restart , new Webots installation after MATLAB. Same issue that Webots doesn't detect MATLAB location

##### David Mansolino [Cyberbotics] 02/06/2020 15:47:28
Hi `@W.El-Badry` unfortunaely Mathworks doesn't want to share a license anymore with us so that I can't test this 😕

##### yunus [Moderator] 02/06/2020 16:43:47
`@David Mansolino` indeed there is no ros.exe in the entire C:\Program Files\Webots. Thank you very much for your advice, I will reinstall Webots and see. Also for the delay I hope using 'ros' instead of 'rospy' can fix that. I will also try your method `@kadeng` of using printf debugging to find where it lags, I appreciate your tip.

##### W.El-Badry 02/06/2020 17:36:09
> 

> Hi `@W.El-Badry` unfortunaely Mathworks doesn't want to share a license anymore with us so that I can't test this 😕

> `@David Mansolino` This is so unfortunate. I thought they push licenses to third party developers like you who creates distinguish software.

##### kadeng 02/06/2020 17:54:01
@yunus Seems like there is no ros.exe for Windows at the moment. I hope to be able to build one by first building the required libs using Mingw64 (ros/rocpp\_core, roscpp and rosconsole seem to be required)

##### zibz 02/06/2020 19:44:04
hi, what would I use to interpret qr codes with camera?

##### David Mansolino [Cyberbotics] 02/07/2020 06:25:16
`@kadeng`, I just cheked and you are right, the Windows version of the ros controller is not available anymore because we have issues recompiling the  ros/rocpp\_core, roscpp and rosconsole with mingw64 (but this is for sure doable, we just hadn't time to do this).

However, on Windows you might use the python API to communicate with Webots from ROS: [https://cyberbotics.com/doc/guide/using-ros#custom-ros-controller](https://cyberbotics.com/doc/guide/using-ros#custom-ros-controller)


Hi `@zibz` you can use any image processing library you want, here is how to integrate it in C/C++ for example: [https://cyberbotics.com/doc/guide/using-webots-makefiles#adding-an-external-library-ccp](https://cyberbotics.com/doc/guide/using-webots-makefiles#adding-an-external-library-ccp)


A quick look search on Google lead me for example on this tutorial explaining how to use OpenCV to do this: [https://www.learnopencv.com/opencv-qr-code-scanner-c-and-python/](https://www.learnopencv.com/opencv-qr-code-scanner-c-and-python/)

##### yunus [Moderator] 02/07/2020 12:43:21
`@kadeng` yes, there is no ros.exe for Windows, I noticed that too. And as `@David Mansolino` pointed out. I am using that costum ros controller with rospy, and it works. Hopefully the roscpp will be complied for Windows and supported in future Webots releases.

##### kadeng 02/07/2020 13:12:58
@yunus: I tried the custom ros controller, but could not find a way to get rospy library for Windows. Where did you get it from?


@yunus: ping, given that I forgot to correctly @mention you before..

##### David Mansolino [Cyberbotics] 02/07/2020 13:45:20
`@kadeng`: it is distributed within Webots in: `projects/languages/ros/controllers/ros_python`


`@kadeng`: it is distributed within Webots in: `projects/languages/ros/controllers/ros_python`

##### yunus [Moderator] 02/07/2020 13:54:48
`@kadeng` The rospy library comes directly installed in Webots on this path `C:\Program Files\Webots\projects\languages\ros\controllers\ros_python`

If you go to Webots, Files > Open Sample World, then browse to: languages > ros > ros\_python.wbt you will see a sample world with a Thymio robot having a controller "ros\_python" that creates some ROS topics "motor" and "sensor". After you open that sample world, you should be able to see the sensor values being published on the Webots console. That's how you know ROS is working.


`@David Mansolino` thank you, I just realized you've answered the question before me 🙂


Just as an additional remark: before rospy on Webots can work, I had first to install ROS for Windows using the steps on this link: [http://wiki.ros.org/Installation/Windows](http://wiki.ros.org/Installation/Windows), (the last step is to create that shortcut file that you will call "ROS", and when you type "roscore" in it, it should show you no error. This indicates that ROS has been correctly installed)

##### kadeng 02/07/2020 14:11:32
`@David Mansolino` BTW just to let you know. I gave up on building roscpp and related libraries in msys. This is probably a ton of work. You would have to either get catkin to run properly in msys (which requires *reverting* a lot of the special treatment for Windows. Or, most likely much easier, put all of the  sources into one big library and build a dll from it. The thing is, roscpp pulls in a lot of other ROS components.

##### kwy 02/07/2020 14:12:15
I just tried to run the project "ros python" on mac. But i get a WARNING: ros\_python: Forced termination (because process didn't terminate itself after 1 second).  That means i need to install ROS ?

##### yunus [Moderator] 02/07/2020 15:24:15
`@kwy` I have not yet used Webots on mac, but I am sure you must install ROS first before you can use "ros python". This is true for Windows, Linux and mac also. The latest ROS distribution called Melodic can be installed on mac according to this official ROS page: [http://wiki.ros.org/melodic/Installation/macOS/Homebrew/Source](http://wiki.ros.org/melodic/Installation/macOS/Homebrew/Source)

##### kwy 02/07/2020 15:26:15
`@yunus` thanks for your help! I will try it now

##### SimonDK 02/07/2020 15:44:14
Are there any recommend files to include in gitignore e.g. hidden WeBots files like .*.wbproj and .*.cache?

##### David Mansolino [Cyberbotics] 02/07/2020 15:44:55
`@SimonDK` the generic Webots gitignore file is a good starting point: [https://github.com/cyberbotics/webots/blob/master/.gitignore](https://github.com/cyberbotics/webots/blob/master/.gitignore)

##### SimonDK 02/07/2020 15:46:35
`@David Mansolino` Cool thank you. I do not see the wbproj file. It seems to be world related and may update on changing e.g. the view of in WeBots but not the files. Is it good or bad practice to add it to gitignore?

##### David Mansolino [Cyberbotics] 02/07/2020 15:48:29
We do not add it, because we want to be able to commit il, to make sure everyone uses the same layout, but it is not a bad practice to ignore it.

Alternatively, if you define the `WEBOTS_ALLOW_MODIFY_INSTALLATION` environment variable, Webots will not change the wbproj file: [https://github.com/cyberbotics/webots/blob/07d7ca6722139cec1415a7d3e308c298512b3124/src/install\_scripts/bashrc.linux#L12](https://github.com/cyberbotics/webots/blob/07d7ca6722139cec1415a7d3e308c298512b3124/src/install_scripts/bashrc.linux#L12)

##### SimonDK 02/07/2020 15:55:03
`@David Mansolino`  Super, I will play around with. Much appreciated!

##### David Mansolino [Cyberbotics] 02/07/2020 15:55:20
You're welcome.

##### sujit 02/08/2020 01:56:56
im using an external python motor controller launched from python IDLE utilising tkinter gui. Im having trouble making the simulation restart supervisor function simulationReset() which causes both programs to freeze ....is it possible to do this from an external motor controller? <extern>. i dont to keep having to manually load the motor contrtoller...

##### ian\_lau 02/08/2020 09:27:49
Hello, everyone. Do you know how to get the camera intrinsics of custom camera?


Cause I want to converse range\_finder image to point cloud, I want to get the inner params(fx, fy, cx, cy) of this range\_finder to build a conversion code. If you did it, please tell me, thank you very much!

##### sujit 02/08/2020 11:49:53
in python is it possible to make "import Tkinter " work from a native (not <extern>) motor controller? would I need to change a path or possibly copy the tcl folder somewhere within webots?


ok....i solved my own problem....was easier than anticipated...you make a new directory webots/lib/tcl/Python27 and copy c:/python27/tcl  into that directory...then tkinter will run from a native webots controller...


Is there a better way that would save duplicating the library?

##### Gman 02/08/2020 21:00:19
I have, in the same simulation, two robots and a different controller for each.  How to I communicate between them?  For instance Im trying to share compass data between the robots how do I do this?

##### 🍎小苹果🍎 02/08/2020 22:03:08
I'm not sure but I remember as I read something about receiver device it may help you

##### Gman 02/08/2020 22:24:50
ok thanks

##### kadeng 02/08/2020 22:32:28
Just a quick question: Is it possible to have arbitrary collision shapes, or do these have to be basic geometric primitives?


The docs just mention primitives..


As far as I can tell, at least.


Never mind, I found the answer.

##### sunnyjerai 02/09/2020 14:20:10
Hello there, I wanted to know if I could use the LED in RGB mode and yet control the intensity of it apart from its colour?

##### User21 02/09/2020 15:42:35
Hi there,

are there any other grippers than the 3 Finger gripper?

##### Tahir [Moderator] 02/09/2020 15:45:52
`@User21` there us ine from Robotis but I don't know if it is available in Webots, however you should be able to import it using Webots tools

##### David Mansolino [Cyberbotics] 02/10/2020 06:38:46
`@sujit`, you should be able to use your library (Tkinter) without copying it, just make sure its path is included in the `PYTHONPATH` environment variable.


You can also use a `runtime.ini` file in your controller folder to define this variable: [https://cyberbotics.com/doc/guide/controller-programming#environment-variables](https://cyberbotics.com/doc/guide/controller-programming#environment-variables)


`@ian_lau` you can get the field of view with this this function: [https://www.cyberbotics.com/doc/reference/rangefinder#wb\_range\_finder\_get\_fov](https://www.cyberbotics.com/doc/reference/rangefinder#wb_range_finder_get_fov) 

Then you can get the resolution with these functions: 

[https://www.cyberbotics.com/doc/reference/rangefinder#wb\_range\_finder\_get\_width](https://www.cyberbotics.com/doc/reference/rangefinder#wb_range_finder_get_width)

Finally, you can compute the vertical field of view from the horizontal one and the resolution by using the fact that pixel are exactly squarre.

You might also be interested of gettign the maximum range of the range-finder:

[https://www.cyberbotics.com/doc/reference/rangefinder#wb\_range\_finder\_get\_max\_range](https://www.cyberbotics.com/doc/reference/rangefinder#wb_range_finder_get_max_range)****


`@Gman`, `@🍎小苹果🍎` is completely right, you can use the emitter-receiver mechanism, find an example in this sample simulation: [https://www.cyberbotics.com/doc/guide/samples-devices#emitter\_receiver-wbt](https://www.cyberbotics.com/doc/guide/samples-devices#emitter_receiver-wbt)


`@kadeng` note that arbitrary collision shapes using indexedFaceSet are working but way less efficient and stable than using a set of basic geometries.


`@sunnyjerai` unfortunately not, you can change the intensity of the red, green and blue component independently but this will of course change the color too.


`@User21`, not out of the box, but you can of course build your own gripper.

##### Gman 02/10/2020 07:19:21
ya ty


❤️

##### sunnyjerai 02/10/2020 08:52:17
Thanks for the info `@David Mansolino` . However, is there a chance this feature might be added in future updates. Where we can control the RGB variables along with the LED's intensity?

##### Olivier Michel [Cyberbotics] 02/10/2020 09:15:14
`@TheWgang`: I was wrong, it is indeed possible to configure a LightSensor node so that it filters some color, using the colorFilter field of the LightSensor node, see documentation here: [https://cyberbotics.com/doc/reference/lightsensor](https://cyberbotics.com/doc/reference/lightsensor)

##### David Mansolino [Cyberbotics] 02/10/2020 09:48:48
`@sunnyjerai` this is unfortunately not on our short term roadmap. But feel free to implement it yourself and submit a PR, we will be more than happy to review it.

##### sunnyjerai 02/10/2020 09:54:29
Sure thing `@David Mansolino` , Thanks a lot.

##### David Mansolino [Cyberbotics] 02/10/2020 09:54:40
You're welcome

##### zibz 02/10/2020 10:48:36
hi


having trouble reading from keyboard


already got the device from robot


enabled it


getKey() yielding -1 constantly


something missing=


?


ok, it's working, forget about the above


entry

##### David Mansolino [Cyberbotics] 02/10/2020 10:51:41
Make sure to select the 3D view with the mouse 😉

##### zibz 02/10/2020 10:52:05
true, thks

##### kadeng 02/10/2020 12:36:43
I'm trying to attach a pre existing Robot model to the side of a fixed box. Just copying and pasting it as a child to the box (whether as proto node or as base node) do not seem to work. How do I achieve what I want? And how do I fix the box to the floor? (Should I just make it incredibly heavy)

##### David Mansolino [Cyberbotics] 02/10/2020 13:23:22
Hi `@kadeng`, to fix the box to the floor the simplest (and better) way to do is simply to remvoe the Physics node of the box (but not the boundingObject).


Abotu your other problem, you are not allowed to insert a Robot node in a Solid node. The workaround is to create your box node from a Robot node and simply setting the `controller` field to `none`.

##### kadeng 02/10/2020 13:26:11
After that, I would be able to put a robot node into it? Thanks, will try that.

##### David Mansolino [Cyberbotics] 02/10/2020 13:26:39
Yes you can add a Robot 'inside' another Robot node

##### Gautier 02/10/2020 16:19:20
Hello !


I have a handler on an node, through a supervisor. This node is a position sensor.


Is it possible to call function specific to its type (in my case, a position sensor) through the variable (that is an "handler on a node") ?


Basically, I have a proto with a robot inside. I have position sensors on that robot. I made them visible in the scene tree by declaring a field in the proto heading. Now, I have a handler to the node, but I can't seem to be able to activate these position Sensor and retrieve their value ?


(and I can't use "getPositionSensor()" because it's not a position sensor in the robot, but in another robot that is the children of that first robot)

##### elkelkmuh 02/11/2020 03:07:50
Hello

##### David Mansolino [Cyberbotics] 02/11/2020 06:20:17
Hi `@elkelkmuh`


Hi `@Gautier`, unfortunately this is not possible, a robot can't get the value of devices of another robot.

##### Gautier 02/11/2020 08:24:50
Hi `@David Mansolino`, understood. Thank you for your response !

##### David Mansolino [Cyberbotics] 02/11/2020 08:25:08
You're welcome

##### elkelkmuh 02/11/2020 09:00:56
Hi `@David Mansolino`

##### David Mansolino [Cyberbotics] 02/11/2020 09:01:12
Hi


Can I help you?

##### elkelkmuh 02/11/2020 09:03:06
While trying to connect to the robot, the webost program gives an error.  I can't connect to the robot.

##### David Mansolino [Cyberbotics] 02/11/2020 09:03:19
To which robot?


(please don't say darwin-op)

##### elkelkmuh 02/11/2020 09:05:36
Unfortunately, op2

##### David Mansolino [Cyberbotics] 02/11/2020 09:08:35
Ok, let's try to check what is happenning. Here are a few questions to better understand what is happenning:

  - Which version of Webots do you have?

  - On which OS are you?

  - Are you connected to the robot by wire or wifi?

  - What is exactly the error message you have?

##### elkelkmuh 02/11/2020 09:09:14
I am a phd student.  I can't do my thesis because I can't solve the problem.


OP: windows

Webots version: 2020 rev 1

I can connect with wifi.  

Error message:"Unable to establish connection with the robot. Connection error: server identity not verified".  

SSh-RSA key has changed , for security reasons the connection will be stopped ,please remove the old SSH-RSA  the known\_hosts file

##### David Mansolino [Cyberbotics] 02/11/2020 09:25:29
Have you tried removing the old RSA key?


The first thing to try is to remove the `~/.ssh/known_hosts` file (both on your computer and on the robot)

##### avs 02/11/2020 11:11:14
what are system requirements to run a free software

##### David Mansolino [Cyberbotics] 02/11/2020 11:11:54
Hi `@avs`, you can find the Webots requirement here: [https://cyberbotics.com/doc/guide/system-requirements](https://cyberbotics.com/doc/guide/system-requirements)

##### avs 02/11/2020 11:12:28
Thank You

##### elkelkmuh 02/11/2020 12:55:27
`@David Mansolino`  I cant remove the rsa key on the robot. I removed on computer


`@David Mansolino`  Error:       

streamer/jpeg\_utils.cpp:188:39: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]

streamer/jpeg\_utils.cpp:166:9: warning: variable ‘z’ set but not used [-Wunused-but-set-variable]

streamer/mjpg\_streamer.cpp: In constructor ‘mjpg\_streamer::mjpg\_streamer(int, int)’:

streamer/mjpg\_streamer.cpp:39:30: warning: deprecated conversion from string constant to ‘char*’ [-Wwrite-strings]

g++ -O2 -D

LinuxCM730.cpp: In function ‘void sem\_wait\_nointr(sem\_t*)’:

LinuxCM730.cpp:163:21: warning: unused variable ‘sem\_count’ [-Wunused-variable]

StatusCheck.cpp: In static member function ‘static void Robot::StatusCheck::Check(Robot::CM730&)’:

StatusCheck.cpp:123:26: warning: statement has no effect [-Wunused-value]

main.cpp: In function ‘int main()’:

main.cpp:236:35: error: ‘class Robot::BallTracker’ has no member named ‘SearchAndTracking’

make: * [main.o] Error 1

In file included from /robotis/Linux/include/../build/streamer/jpeg\_utils.h:11:0,

                 from main.cpp:15:

libjpeg-turbo/include/jpeglib.h:776:3: error: ‘size\_t’ does not name a typ

[sudo] password for robotis: [sudo] password for robotis: sudo: /robotis/Linux/project/webots/remote\_control/remote\_control: command not found


`@David Mansolino` I used this code for remove: 

cp ~/.ssh/known\_hosts ~/.ssh/known\_hosts.old

rm ~/.ssh/known\_hosts

##### David Mansolino [Cyberbotics] 02/11/2020 14:04:58
This code seems right, and it looks like it did fix the initial issue. Can you confirm ?

##### elkelkmuh 02/11/2020 14:06:20
I cant remove the rsa key on the robot. I removed on computer. 

cp ~/.ssh/known\_hosts ~/.ssh/known\_hosts.old

rm ~/.ssh/known\_hosts

this code did not work on the robot.

##### David Mansolino [Cyberbotics] 02/11/2020 14:07:14
OK, but do you still have now the Error message:"Unable to establish connection with the robot. Connection error: server identity not verified".

SSh-RSA key has changed , for security reasons the connection will be stopped ,please remove the old SSH-RSA  the known\_hosts file

??

##### elkelkmuh 02/11/2020 14:11:18
connection error solved. but  I have a new error 

Error:

streamer/jpeg\_utils.cpp:188:39: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]

streamer/jpeg\_utils.cpp:166:9: warning: variable ‘z’ set but not used [-Wunused-but-set-variable]

streamer/mjpg\_streamer.cpp: In constructor ‘mjpg\_streamer::mjpg\_streamer(int, int)’:

streamer/mjpg\_streamer.cpp:39:30: warning: deprecated conversion from string constant to ‘char’ [-Wwrite-strings]

g++ -O2 -D

LinuxCM730.cpp: In function ‘void sem\_wait\_nointr(sem\_t)’:

LinuxCM730.cpp:163:21: warning: unused variable ‘sem\_count’ [-Wunused-variable]

StatusCheck.cpp: In static member function ‘static void Robot::StatusCheck::Check(Robot::CM730&)’:

StatusCheck.cpp:123:26: warning: statement has no effect [-Wunused-value]

main.cpp: In function ‘int main()’:

main.cpp:236:35: error: ‘class Robot::BallTracker’ has no member named ‘SearchAndTracking’

make: * [main.o] Error 1

In file included from /robotis/Linux/include/../build/streamer/jpeg\_utils.h:11:0,

                 from main.cpp:15:

libjpeg-turbo/include/jpeglib.h:776:3: error: ‘size\_t’ does not name a typ

[sudo] password for robotis: [sudo] password for robotis: sudo: /robotis/Linux/project/webots/remote\_control/remote\_control: command not found

##### David Mansolino [Cyberbotics] 02/11/2020 14:12:10
Yes it seems you can now connect to the robot succesfully but you have compilation issues..


which version of the robotis framework are you using?

##### elkelkmuh 02/11/2020 14:16:48

%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/676793768933851196/unknown.png)
%end


`@David Mansolino`  Robotis-op2 v1.7.0

##### David Mansolino [Cyberbotics] 02/11/2020 14:20:28
You should probably try to uninstall Webots from the robot and re-install it.

##### elkelkmuh 02/11/2020 14:25:14
can i do it from this window?
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/676795890534711305/unknown.png)
%end

##### David Mansolino [Cyberbotics] 02/11/2020 14:25:27
Yes

##### TIm 02/11/2020 14:40:29
hi,

is it possible to include the panda robot in webots?

##### David Mansolino [Cyberbotics] 02/11/2020 14:42:31
Hi `@TIm` , Yes of course you can create your own robot model: [https://cyberbotics.com/doc/guide/tutorial-6-4-wheels-robot](https://cyberbotics.com/doc/guide/tutorial-6-4-wheels-robot)

Or import one from an URDF model: [https://github.com/cyberbotics/urdf2webots](https://github.com/cyberbotics/urdf2webots)

##### elkelkmuh 02/11/2020 14:43:31
`@David Mansolino` i did it.  gives the same error again.

Is there anything else I can do?

##### David Mansolino [Cyberbotics] 02/11/2020 14:48:02
In that case you should try to understand why the `SearchAndTracking` function is not found.


Can you find it somewhere in the framework?

##### elkelkmuh 02/11/2020 14:52:19
> Can you find it somewhere in the framework?

`@David Mansolino`  OK. I try. What can I do if I can't find it?

##### David Mansolino [Cyberbotics] 02/11/2020 14:53:18
First look for it, maybe it was simply renamed or so.

##### elkelkmuh 02/11/2020 14:55:55
I cant find it


`@David Mansolino`  Can I copy or download this from anywhere?

##### TIm 02/11/2020 15:23:29
`@David Mansolino` Thank you very much ☺️

##### David Mansolino [Cyberbotics] 02/11/2020 15:50:53
`@TIm` you're welcome


`@elkelkmuh` you should probably have a look into previous versions of the framework (available on sourceforge)

##### elkelkmuh 02/11/2020 16:20:06
`@David Mansolino`  thank you

##### David Mansolino [Cyberbotics] 02/11/2020 16:20:33
You're welcome

##### Hakkinein 02/11/2020 18:18:56
hi there, in webots documentation, it said that webots use pid controller to control the motor position ([https://cyberbotics.com/doc/reference/motor#field-summary](https://cyberbotics.com/doc/reference/motor#field-summary).)

but how is the exact pid system in that motor controller? like in the robotis's motor it said this specification fo the controller system ([http://emanual.robotis.com/docs/en/dxl/mx/mx-64/#p-gain](http://emanual.robotis.com/docs/en/dxl/mx/mx-64/#p-gain)), but when i see the default pid controller in robotis darwin op demo it use (8 0 0), is it the right value in webots?

##### David Mansolino [Cyberbotics] 02/12/2020 06:23:10
HI `@Hakkinein`, by default Webots uses (10, 0, 0). Note also that there is a difference between Webots and the robotis motors, Webots does a control in speed regulation whereas robotis motors do a control on torque regulation.

##### elkelkmuh 02/12/2020 06:28:32
Hi `@David Mansolino`  , I tried the framework at this address (  [https://sourceforge.net/p/darwinop/code/HEAD/tree/trunk/darwin/](https://sourceforge.net/p/darwinop/code/HEAD/tree/trunk/darwin/) )

 I get errors when I  installed this.


Errors
> **Attachment**: [message.txt](https://cdn.discordapp.com/attachments/565154703139405824/677038707663962112/message.txt)

##### Hakkinein 02/12/2020 07:12:01
I see, but how pid gain in webots affects  the calculation of the target motor position?  `@David Mansolino`

##### Nocturnal Warfare 02/12/2020 07:47:25
So I am making a robot and have been doing simulation in Webots using python, but I wanted to implement it using a Pixhawk 4 mini through Dronekit. I was wondering if anyone has any experience porting over the Webots simulation to the Pixhawk running ArduPilot over Dronekit and if they had any advice on the matter.

##### David Mansolino [Cyberbotics] 02/12/2020 07:52:42
`@Hakkinein`, here is the exact worflow to update the motor position: 

[https://cyberbotics.com/doc/reference/motor#position-control](https://cyberbotics.com/doc/reference/motor#position-control)

You can also find an example of PID tunning here: 

[https://cyberbotics.com/doc/guide/samples-howto#ziegler\_nichols-wbt](https://cyberbotics.com/doc/guide/samples-howto#ziegler_nichols-wbt)

##### Fabien Rohrer [Moderator] 02/12/2020 07:56:33
`@Nocturnal Warfare` Hi. In my knowledge, there is unfortunately no interface between Dronekit and Webots. It is clearly possible to implement a wrapper between them.

##### Nocturnal Warfare 02/12/2020 08:00:47
Are there any resources on how I would start making such a wrapper?

##### elkelkmuh 02/12/2020 08:04:37
`@David Mansolino`  I can not find how to solve the problem, can you help me?

##### Fabien Rohrer [Moderator] 02/12/2020 08:06:40
`@Nocturnal Warfare` Looking at that quickly, I would create a Webots controller in Python which would simply open an UDP server, and wrap the simulated drone API with the DroneKit protocol. Then a regular dronekit script ([https://github.com/dronekit/dronekit-python#getting-started](https://github.com/dronekit/dronekit-python#getting-started)) could connect to this "fake" server to dialog with it as it is a real drone. Therefore, the main difficulty of such wrapper would be to mimic perfectly the DroneKit protocol. Does this make sense?

##### Nocturnal Warfare 02/12/2020 08:08:12
yeah i think that makes sense, thank you

##### Fabien Rohrer [Moderator] 02/12/2020 08:10:00
`@Nocturnal Warfare` Unfortunately, I don't have a better starting point to provide you (the examples we have doing this are certainly too complex to be good starting points). Maybe this doc: [https://cyberbotics.com/doc/guide/interfacing-webots-to-third-party-software-with-tcp-ip](https://cyberbotics.com/doc/guide/interfacing-webots-to-third-party-software-with-tcp-ip)

##### elkelkmuh 02/12/2020 08:15:15
> Unfortunately, I don't have a better starting point to provide you (the examples we have doing this are certainly too complex to be good starting points). Maybe this doc: [https://cyberbotics.com/doc/guide/interfacing-webots-to-third-party-software-with-tcp-ip](https://cyberbotics.com/doc/guide/interfacing-webots-to-third-party-software-with-tcp-ip)

`@Fabien Rohrer` is this for me?

##### Fabien Rohrer [Moderator] 02/12/2020 08:16:15
`@elkelkmuh` no, this is for `@Nocturnal Warfare` 😉

##### elkelkmuh 02/12/2020 08:24:28
Does anyone have any advice on this matter? I have not been able to solve this problem for a long time.

##### Fabien Rohrer [Moderator] 02/12/2020 08:29:37
`@elkelkmuh` I think you should summarize in a concise way the current issue you are trying to solve,  and do hypothesis by yourself, and come here in a second step, where you identified well the issue.

##### elkelkmuh 02/12/2020 08:49:40
> `@elkelkmuh` I think you should summarize in a concise way the current issue you are trying to solve,  and do hypothesis by yourself, and come here in a second step, where you identified well the issue.

`@Fabien Rohrer` Actually, I do not have any problems in programming. Problem: I cannot run webots and op2 together. I think I will try to solve the problem myself.

##### David Mansolino [Cyberbotics] 02/12/2020 08:55:56
Hi again `@elkelkmuh`, you should probably try to understand and fix the compilation problem on the robot directly (without usign Webots in a first step). Once this is working you should retry with the Webots interface.

##### elkelkmuh 02/12/2020 09:14:45
`@David Mansolino`  Do you have any advice?

For example, I recovered the robot and turned it back to its original settings.

Can you write the steps I can follow for the post?

##### David Mansolino [Cyberbotics] 02/12/2020 09:17:38
You should probabyl get insipration from the installation steps from the README file fo this erpo: [https://github.com/darwinop/webots-cross-compilation](https://github.com/darwinop/webots-cross-compilation)

##### elkelkmuh 02/12/2020 09:25:42
`@David Mansolino`  Thank you. I started to review the file.  I will do it all step by step. hope it works.

##### Gautier 02/12/2020 09:39:31
Hello


Is it possible to import the library "os" when using lua inside a generated proto ?


(I need this library to import an environnement variable)

##### David Mansolino [Cyberbotics] 02/12/2020 09:43:09
Hi `@Gautier`, yes of course, this is done for example here: [https://github.com/cyberbotics/webots/blob/69202baee3c0974f69f0e72d3412d19ed69feaad/projects/objects/floors/protos/UnevenTerrain.proto#L29](https://github.com/cyberbotics/webots/blob/69202baee3c0974f69f0e72d3412d19ed69feaad/projects/objects/floors/protos/UnevenTerrain.proto#L29)

##### Gautier 02/12/2020 10:08:27
It works !


Thank you a lot !

##### David Mansolino [Cyberbotics] 02/12/2020 10:08:40
You're welcome 😉

##### kwy 02/12/2020 11:01:18
Hello, I'm using Pycharm with Webots, but the Process finished with exit code 139 (interrupted by signal 11: SIGSEGV), and sometime crashing Python.  how can I fix it? thanks advance


..have fixed, just change the Python interpreter in the Configuration ✅

##### Olivier Michel [Cyberbotics] 02/12/2020 11:25:51
So, did you set it to the one of the official Python distribution (which you installed from python.org as explained in the Webots user guide)?

##### kwy 02/12/2020 11:50:31
I have installed so many python …
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/677119341048627220/unknown.png)
%end


Only the selected one is available, which was installed for the “youBot robot” of Webots.



If I choose other one for “project interpreters” on “preference”, then these is a Warning on webots



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/677119417271844874/unknown.png)
%end


If I choose other one for “Python interpreters” on “Configuration”, then the Process finished with exit code 139 (interrupted by signal 11: SIGSEGV), and sometime even crashing Python.

##### Olivier Michel [Cyberbotics] 02/12/2020 11:52:20
Thank you for the detailed explanation.

##### zibz 02/13/2020 03:09:13
hi, has anyone used opencv or zbar with camera data?

##### David Mansolino [Cyberbotics] 02/13/2020 05:58:08
Hi `@zibz`, yes, you can find examples with opencv in C++ here: [https://github.com/cyberbotics/webots/tree/master/projects/samples/howto/controllers/vision](https://github.com/cyberbotics/webots/tree/master/projects/samples/howto/controllers/vision)

And Python here: [https://github.com/cyberbotics/webots/blob/master/projects/samples/robotbenchmark/visual\_tracking/controllers/visual\_tracking/visual\_tracking.py](https://github.com/cyberbotics/webots/blob/master/projects/samples/robotbenchmark/visual_tracking/controllers/visual_tracking/visual_tracking.py)

For zbar, the integration should work the exact same way.

##### hkdeman 02/13/2020 10:36:41
Hi, I was working with ROS and Webots together. Although, when I have a supervisor mode turned on for BB-8 robot and I try getting the translation of the robot, the ROS connection crashes in Webots. Is there any alternative to getting the translation without using the supervisor? Or on how I could fix this issue?

##### Fabien Rohrer [Moderator] 02/13/2020 10:38:59
An alternative could be to use a GPS device.


This should not crash Webots. If you have a crash stack or something, please fill a bug report:


[https://github.com/cyberbotics/webots/issues/new?template=bug\_report.md](https://github.com/cyberbotics/webots/issues/new?template=bug_report.md)

##### hkdeman 02/13/2020 10:42:48
Thank you! I shall add the bug!

##### paulthemagno 02/14/2020 00:34:30
have you got a python snippet of the controller for NAO in which it steps forward?

##### David Mansolino [Cyberbotics] 02/14/2020 06:38:03
`@paulthemagno`, here is an example of python controller for the NAO robot: [https://github.com/cyberbotics/webots/blob/master/projects/robots/softbank/nao/controllers/nao\_demo\_python/nao\_demo\_python.py](https://github.com/cyberbotics/webots/blob/master/projects/robots/softbank/nao/controllers/nao_demo_python/nao_demo_python.py)

##### Ptosidis\_opendr 02/14/2020 07:34:42
Hello again, 

i am trying to access the field 'rotation' within the camera of the Mavic2pro (Mavic2Pro -> cameraslot-> Camera -> Rotation) so i can manually set it from a supervisor, but I can't seem to hit it right. Could you please guide me in the right direction? (python)

##### David Mansolino [Cyberbotics] 02/14/2020 07:43:06
Hi `@Ptosidis_opendr` are you using the Supervisor API to do this ([https://cyberbotics.com/doc/reference/supervisor?tab-language=python](https://cyberbotics.com/doc/reference/supervisor?tab-language=python)) ? If this is the case, you should probably check at each step if the field/node you get is correct.

##### Ptosidis\_opendr 02/14/2020 07:45:33
yeah, and even though i can get the Camera's width etc, i cant get the Rotation vector

##### David Mansolino [Cyberbotics] 02/14/2020 08:07:39
ok, that's very strange, and you get the correct value for the width ?

##### Ptosidis\_opendr 02/14/2020 08:12:43
that was probably misleading, since I got the width through the getCamera function and through that object i got the width. But since rotation is included under camera, shouldn't i be able to access it aswell? (and to anwer your question, yeah the value is the correct one)

##### David Mansolino [Cyberbotics] 02/14/2020 08:15:07
Yes you should be able to get it but not throught the camera API, you should use the Supervisor API.

##### Ptosidis\_opendr 02/14/2020 08:26:59
done, i used cam and camera for camera Api and Sup api and messed up the names along the way 🙂

##### David Mansolino [Cyberbotics] 02/14/2020 08:29:45
ok, good news 🙂

##### elkelkmuh 02/14/2020 12:38:42
Hi `@David Mansolino`


I reached just only one error

[sudo] password for robotis: In file included from /robotis/Linux/include/../build/streamer/jpeg\_utils.h:11:0,

                 from main.cpp:15:

libjpeg-turbo/include/jpeglib.h:776:3: error: ‘size\_t’ does not name a type

libjpeg-turbo/include/jpeglib.h:787:3: error: ‘size\_t’ does not name a type

libjpeg-turbo/include/jpeglib.h:816:3: error: ‘size\_t’ has not been declared

libjpeg-turbo/include/jpeglib.h:818:3: error: ‘size\_t’ has not been declared

libjpeg-turbo/include/jpeglib.h:967:34: error: ‘size\_t��� has not been declared

libjpeg-turbo/include/jpeglib.h:969:36: error: ‘size\_t’ has not been declared

libjpeg-turbo/include/jpeglib.h:977:30: error: ���FILE’ has not been declared

libjpeg-turbo/include/jpeglib.h:978:29: error: ‘FILE’ has not been declared

make: *** [main.o] Error 1


It is about jpeglib


`@David Mansolino`  What can I do for this error?


`@David Mansolino`  the steps in [https://github.com/darwinop/webots-cross-compilation](https://github.com/darwinop/webots-cross-compilation)  dont work.

 for example :/usr/local/webots/resources/projects/robots/darwin-op/libraries# make

make: *** No targets specified and no makefile found.  Stop


Please can you help?

##### DrVoodoo [Moderator] 02/14/2020 14:33:03
`@elkelkmuh` Which instruction are you trying to follow?


2? In which case you appear to be in the wrong directory, you should be in the darwin directory within libraries, not the libraries dir itself

##### elkelkmuh 02/14/2020 14:37:44
I followed webots page for transfer to real robot.



But I received  some erros later I tried the page David said


> 2? In which case you appear to be in the wrong directory, you should be in the darwin directory within libraries, not the libraries dir itself

`@DrVoodoo` I'm in that location

##### DrVoodoo [Moderator] 02/14/2020 14:51:21
but there is no Makefile in that directory?

##### elkelkmuh 02/14/2020 14:52:05
There is makefile in that directory

##### DrVoodoo [Moderator] 02/14/2020 14:57:22
and if you explicitly specify the Makefile with your make command. i.e. "make -f Makefile"

##### ClBaze 02/14/2020 15:03:15
Hello, I've noticed that when a solid enters in collision with another, its bounding box becomes red and then turn back to white when there is no more contact.


Sometimes if it hit a bit hard, the bounding box stay red


What does it mean ? Maybe the bounding box of the solid is pushed into its parent ?

##### elkelkmuh 02/14/2020 15:08:58
> and if you explicitly specify the Makefile with your make command. i.e. "make -f Makefile"

`@DrVoodoo`  I did it. Again same error" no rule no make target makefile stop



%figure
![IMG_20200214_180950.jpg](https://cdn.discordapp.com/attachments/565154703139405824/677894471819591690/IMG_20200214_180950.jpg)
%end

##### Olivier Michel [Cyberbotics] 02/14/2020 15:14:29
`@ClBaze`: yes, that means that there is still some collision (and hence repulsion forces are generated).

##### DrVoodoo [Moderator] 02/14/2020 15:17:01
Very odd, it would be one thing if the Makefile had an error but not to be able to see the Makefile at all......even if the file permissions were wrong you would get that error message. It is literally that make cannot see that file for some reason


*wouldn't get that

##### elkelkmuh 02/14/2020 15:21:12
I used sudo make...

##### ClBaze 02/14/2020 15:37:38
`@Olivier Michel` Here is a video of the collision. In fact its probably a display issue, I've just noticed that if I click away and then back on the solid it resume to white


[https://youtu.be/W2Se0ipM7nQ](https://youtu.be/W2Se0ipM7nQ)

##### Olivier Michel [Cyberbotics] 02/14/2020 15:41:38
OK, thank you for the video. It looks like a bug indeed. The wireframe color doesn't seem to be reset to white as it should. Can you open a bug report about it with a link to you movie? [https://github.com/cyberbotics/webots/issues/new?template=bug\_report.md](https://github.com/cyberbotics/webots/issues/new?template=bug_report.md)

##### Nocturnal Warfare 02/15/2020 06:45:27
I had a question about importing my CAD .wrl into my simulation. When importing VRML file into webots, is there anyway to import it directly into the child of my robot? When I import it seems to import almost every part individually, and it throws all of the transforms into the main directory that has my WorldInfo, Floor, etc. Alternatively is there any easier way to copy those imported transforms into my robot over copying and pasting each one individually?

##### User21 02/15/2020 14:23:33
Hi there,

how does the trajectory follower form the webots-ros universal robot example work? Can someone explain it to me?

Just by looking at the Code i cant really tell whats going on

##### paulthemagno 02/15/2020 15:16:49
> `@paulthemagno`, here is an example of python controller for the NAO robot: [https://github.com/cyberbotics/webots/blob/master/projects/robots/softbank/nao/controllers/nao\_demo\_python/nao\_demo\_python.py](https://github.com/cyberbotics/webots/blob/master/projects/robots/softbank/nao/controllers/nao_demo_python/nao_demo_python.py)

`@David Mansolino` thank you very much!! I should custom the lenght of the step forward of NAO. How can I do that?

##### elkelkmuh 02/16/2020 13:00:50
> I reached just only one error

> [sudo] password for robotis: In file included from /robotis/Linux/include/../build/streamer/jpeg\_utils.h:11:0,

>                  from main.cpp:15:

> libjpeg-turbo/include/jpeglib.h:776:3: error: ‘size\_t’ does not name a type

> libjpeg-turbo/include/jpeglib.h:787:3: error: ‘size\_t’ does not name a type

> libjpeg-turbo/include/jpeglib.h:816:3: error: ‘size\_t’ has not been declared

> libjpeg-turbo/include/jpeglib.h:818:3: error: ‘size\_t’ has not been declared

> libjpeg-turbo/include/jpeglib.h:967:34: error: ‘size\_t��� has not been declared

> libjpeg-turbo/include/jpeglib.h:969:36: error: ‘size\_t’ has not been declared

> libjpeg-turbo/include/jpeglib.h:977:30: error: ���FILE’ has not been declared

> libjpeg-turbo/include/jpeglib.h:978:29: error: ‘FILE’ has not been declared

> make: *** [main.o] Error 1

`@elkelkmuh`  

Can I use jpeglib.h in the link to solve this problem?

[https://github.com/darwinop/webots-cross-compilation/blob/master/resources/projects/robots/darwin-op/remote\_control/libjpeg-turbo/include/jpeglib.h](https://github.com/darwinop/webots-cross-compilation/blob/master/resources/projects/robots/darwin-op/remote_control/libjpeg-turbo/include/jpeglib.h)

Where should I add this h file?

`@David Mansolino`

##### Stefania Pedrazzi [Cyberbotics] 02/17/2020 07:10:17
`@Nocturnal Warfare` unfortunately VRML files  (.wrl) can only be imported at the root node. But if your CAD model has a top node and in the VRML file this top node disappears and all the parts are defined as sibling nodes, then there is probably an problem with the VRML exporter. Not sure if this would work in your applications, but an alternative to copy and paste the nodes individually could be to add an additional parent node before exporting the VRML or if it doesn't work to add a parent node directly in the generated VRML file.

##### David Mansolino [Cyberbotics] 02/17/2020 07:44:09
Hi `@User21`, this examples lets you control the robot using 'FollowJointTrajectoryAction' action (named `follow_joint_trajectory`). The state of the joints is published in the `/joint_states` topic.


`@paulthemagno`, you should probably include the motion files: [https://github.com/cyberbotics/webots/tree/master/projects/robots/softbank/nao/motions](https://github.com/cyberbotics/webots/tree/master/projects/robots/softbank/nao/motions)

##### elkelkmuh 02/17/2020 07:45:52
Hi, I'm trying on another windows10 installed computer.  It never connects.  Can I do anything for this?
%figure
![IMG_20200217_104310.jpg](https://cdn.discordapp.com/attachments/565154703139405824/678869711043166209/IMG_20200217_104310.jpg)
%end

##### David Mansolino [Cyberbotics] 02/17/2020 07:56:46
`@elkelkmuh` can you ping the robot from this new computer ?

##### elkelkmuh 02/17/2020 07:57:20
I can connect to vnc

##### David Mansolino [Cyberbotics] 02/17/2020 07:57:41
and to SSH ? Webots is using SSH internally to connect to the robot.

##### elkelkmuh 02/17/2020 08:00:44
With putty?

##### David Mansolino [Cyberbotics] 02/17/2020 08:01:40
With whatever you want that uses the SSH protocol

##### elkelkmuh 02/17/2020 08:05:04

%figure
![JPEG_20200217_110458.jpg](https://cdn.discordapp.com/attachments/565154703139405824/678874544148316193/JPEG_20200217_110458.jpg)
%end


`@David Mansolino` I did. What should I do now


`@David Mansolino`  The only error when trying with Ubuntu is libjpeg.  Can you help with this?
%figure
![IMG_20200217_122937.jpg](https://cdn.discordapp.com/attachments/565154703139405824/678896643197763605/IMG_20200217_122937.jpg)
%end


I have been unable to work because of this problem for a long time.  I can't find where the problem might be.  Anybody have an idea?


`@David Mansolino`  can you help me?

##### David Mansolino [Cyberbotics] 02/17/2020 10:59:11
[http://letmegooglethat.com/?q=size\_t+does+not+name+a+type](http://letmegooglethat.com/?q=size_t+does+not+name+a+type)

##### elkelkmuh 02/17/2020 11:02:07
`@David Mansolino`  Thanks david, previously I tried it but  I will change which file, main.cpp in which folder

##### David Mansolino [Cyberbotics] 02/17/2020 11:02:52
jpeglib.h ?

##### elkelkmuh 02/17/2020 11:31:55
Thank you. Its works

##### David Mansolino [Cyberbotics] 02/17/2020 12:43:30
Very good news !

##### paulthemagno 02/17/2020 12:48:20
> `@paulthemagno`, you should probably include the motion files: [https://github.com/cyberbotics/webots/tree/master/projects/robots/softbank/nao/motions](https://github.com/cyberbotics/webots/tree/master/projects/robots/softbank/nao/motions)

`@David Mansolino` Yes I saw these files and I'm using them. But how can I costumize them on a fixed lenght of step forward? I see there are a lot of rows and numbers and I'm not able to change the lenght of the step

##### David Mansolino [Cyberbotics] 02/17/2020 12:49:08
`@paulthemagno` here are some informations about motion files: [https://cyberbotics.com/doc/reference/motion-functions](https://cyberbotics.com/doc/reference/motion-functions)

##### paulthemagno 02/17/2020 13:56:51
> `@paulthemagno` here are some informations about motion files: [https://cyberbotics.com/doc/reference/motion-functions](https://cyberbotics.com/doc/reference/motion-functions)

`@David Mansolino` sorry for the questions about Nao in the server. I have already seen both the [https://github.com/cyberbotics/webots/tree/master/projects/robots/softbank/nao/motions](https://github.com/cyberbotics/webots/tree/master/projects/robots/softbank/nao/motions) files and the link you have posted ([https://cyberbotics.com/doc/reference/motion?tab-language=python](https://cyberbotics.com/doc/reference/motion?tab-language=python)). Anyway I don't find a way for my purpose: I have a virtual map and I should synchronize it with the map of Webots. For my project the Nao has to make little steps. To make the map in Webots be the same of my virtual map, I should know how long is its step or how to change it. In this way I can change the size of the squares of the chessboard, to make the nao be at the center of a square at the end of any step. How can I do that?

##### David Mansolino [Cyberbotics] 02/17/2020 14:02:34
One simple solution would be to let the nao do several step and then check the distance made, then you can simply compute the distance per step.

##### paulthemagno 02/17/2020 14:04:28
> One simple solution would be to let the nao do several step and then check the distance made, then you can simply compute the distance per step.

`@David Mansolino` This could be a way, and to turn the nao 90°? Because I see only 60, 40 and 180 in the documentation..

##### David Mansolino [Cyberbotics] 02/17/2020 14:07:29
I am sorry but Webots is doesn not provide such high level control for the robot, if you want to define your own motion you have to control the motor of the robot individually, please follow this tutorial for more information: [https://cyberbotics.com/doc/guide/tutorial-4-more-about-controllers](https://cyberbotics.com/doc/guide/tutorial-4-more-about-controllers)

##### paulthemagno 02/17/2020 18:58:43
> I am sorry but Webots is doesn not provide such high level control for the robot, if you want to define your own motion you have to control the motor of the robot individually, please follow this tutorial for more information: [https://cyberbotics.com/doc/guide/tutorial-4-more-about-controllers](https://cyberbotics.com/doc/guide/tutorial-4-more-about-controllers)

`@David Mansolino` Thank you David. I'm trying to do as you said but I'm founding difficoulties on more than 1 consecutive steps: I put in a for the api motion.play() to do it more times. Unfortunately the nao only does the first step, but not the other ones. I think it's beacuse motion.play() only make the movement start, but doesn't wait the end of the command. Not sure if it's so. It seems that every movement is launched almost together and it takes only the first. I try to put a time.sleep(5) between every method but it didn't changhed
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/679039039436881920/unknown.png)
%end

##### David Mansolino [Cyberbotics] 02/17/2020 19:24:48
> I think it's beacuse motion.play() only make the movement start, but doesn't wait the end of the command. 

You are completely correct.

HOwever, time.sleep(5) will not help as it will make the controller wait, but not the simulation runs. As a first step try to call instead `robot.step(5000)`.

##### paulthemagno 02/18/2020 01:22:48
> You are completely correct.

> HOwever, time.sleep(5) will not help as it will make the controller wait, but not the simulation runs. As a first step try to call instead `robot.step(5000)`.

`@David Mansolino` Thank you very much David, it works! Can I ask if there is a way to automatically shift the robot to a certain position whithout steps? Because I have to run several epochs and the robot has to begin from the same position at the beginning of each epoch

##### Luiz Felipe 02/18/2020 02:32:40
`@paulthemagno` I think this function can help: [https://cyberbotics.com/doc/reference/supervisor#wb\_supervisor\_node\_reset\_physics](https://cyberbotics.com/doc/reference/supervisor#wb_supervisor_node_reset_physics) ... before you reset physics you probably should set the translation and rotation of your robot node with setSFVec3f(translation) and setSFRotation(rotation)


My problem is similar I guess... I want to restart a simulation from a timestep, but keeping the inertia, velocities, and relocating the robots to the positions they were at that timestep (kind of a 'replay' or 'rewind function')... And start to explore again with my robots or repeat the same behavior from that 'point'/'checkpoint'... Is it possible to reset the simulation in this way? I see that when i save an html 5 animation I generate a json with rotation and translation parameters...

##### David Mansolino [Cyberbotics] 02/18/2020 06:32:57
`@paulthemagno` In that case you should probably use this instead:

```
for x in range(0, 3):
  robot.fowards.play()
  robot.step(32)
  while not robot.fowards.isOver():
    robot.step(32)
```


`@Luiz Felipe`, in that  case, restarting the controllers ([https://cyberbotics.com/doc/reference/supervisor#wb\_supervisor\_node\_restart\_controller](https://cyberbotics.com/doc/reference/supervisor#wb_supervisor_node_restart_controller)) wouldn't be enough?

##### Luiz Felipe 02/18/2020 07:45:49
I will test it. Thanks 🙂

##### David Mansolino [Cyberbotics] 02/18/2020 07:47:00
You're welcome

##### Lifebinder (tsampazk) 02/18/2020 11:54:16
Hello, i'm using a supervisor node to reset a robot controller. The supervisor node and the robot node communicate with receivers/emitters both ways. They work ok up until i reset the robot controller



After resetting the robot controller and it is restarted and properly broadcasting, it seems that the supervisor receiver stops receiving the messages (the queue length stays at 0). After several steps the supervisor receiver starting picking up the messages the old messages (after reset) in order, thus they get badly desynchronized. The send method in the robot emitter properly returns 1.

##### yash 02/18/2020 11:55:34
Hi..I wanted know how to combine multiple solids(multiple transforms) into a single solid .... so that when in motion it moves together

##### David Mansolino [Cyberbotics] 02/18/2020 11:56:27
`@Lifebinder (tsampazk)`, this looks indeed like a bug, may I ask you to open an issue on the Github project: [https://github.com/cyberbotics/webots/issues/new?template=bug\_report.md](https://github.com/cyberbotics/webots/issues/new?template=bug_report.md)



Thank you.

##### Lifebinder (tsampazk) 02/18/2020 11:56:53
`@David Mansolino` ok, thank you!

##### David Mansolino [Cyberbotics] 02/18/2020 11:56:58
You're welcome

##### Olivier Michel [Cyberbotics] 02/18/2020 11:57:47
`@yash`: you can simply put all the Shapes nodes as the children of the same Solid.


E.g., 
```
DEF SOLID1 Solid {
  children [
    DEF SHAPE1 Shape {
      ...
    }
  ]
}
DEF SOLID2 Solid {
  children [
    DEF SHAPE2 Shape {
      ...
    }
  ]
}
```



Is merged this way:



```
DEF SOLID1+2 Solid {
  children [
    DEF SHAPE1 Shape {
      ...
    }
    DEF SHAPE2 Shape {
      ...
    }
  ]
}
```

##### yash 02/18/2020 14:11:37
`@Olivier Michel`  I tried doing it .... but one solid has hinge joint and one is just a solid


So should I still proceed as you instructed .?

##### David Mansolino [Cyberbotics] 02/18/2020 14:13:59
`@yash`, you want all the part to be linked together right?

##### yash 02/18/2020 14:15:43
Yes I want all the part to be linked together and then rotate that linked part

##### David Mansolino [Cyberbotics] 02/18/2020 14:16:51
In that case, yes, you can do as `@Olivier Michel` said, it will result in something like:

```
DEF SOLID1+2 Solid {
  children [
    DEF SHAPE1 Shape {
      ...
    }
    DEF SHAPE2 Shape {
      ...
    }
    DEF JOINT HingeJoint {
      ...
    }
  ]
}
```

##### yash 02/18/2020 15:04:03
But then def shape will not have option for bounding object !

##### David Mansolino [Cyberbotics] 02/18/2020 15:04:34
The boudning object should be defined in the 'SOLID1+2' Solid


(you can add a group to create a composed boundign object)

##### sunnyjerai 02/18/2020 15:06:59
This is the error that we are facing, The grey gripper is supposed to move with the turn-table.
> **Attachment**: [error.mp4](https://cdn.discordapp.com/attachments/565154703139405824/679343110022758410/error.mp4)

##### David Mansolino [Cyberbotics] 02/18/2020 15:07:52
Does the gripper have physics? All the Solid nodes ?

##### sunnyjerai 02/18/2020 15:09:30
Yes all of them have their Physics node enabled

##### David Mansolino [Cyberbotics] 02/18/2020 15:10:03
Do you have any warnings in the Webots terminal when you load the model?

##### sunnyjerai 02/18/2020 15:12:13
No, we don't get any warning. on the console

##### David Mansolino [Cyberbotics] 02/18/2020 15:13:29
Ok, in that case it is difficult to help you more without seeing exactly what is hapenning, would you agree sharing the robot model? (If you want to keep it confidential you can send it to me directly).

##### sunnyjerai 02/18/2020 15:13:58
Sure Thing. That would be great


How should I send you the file?

##### David Mansolino [Cyberbotics] 02/18/2020 15:22:41
You can send it to me directly at support@cyberbotics.com.

##### sunnyjerai 02/18/2020 15:22:59
Okay, Thank you.

##### David Mansolino [Cyberbotics] 02/18/2020 15:24:33
You're welcome

##### sunnyjerai 02/18/2020 15:26:56
I've mailed the world file on the above mentioned mail address. Thank you.

##### David Mansolino [Cyberbotics] 02/18/2020 15:27:08
Thank you, I will look at it.

##### yash 02/18/2020 15:27:33
Thanks `@David Mansolino`

##### David Mansolino [Cyberbotics] 02/18/2020 15:27:45
`@yash` you're welcome


`@sunnyjerai`, I checked your model, and the problem is that the sliders of the gipper are not childrens of the 'Table' solid. I will send you a fixed version by mail. Note also that you should probably improve your bounding objects to use sets of basic geometries instead of indexedFaceSet, this will make the simulation run faster and more stable.

##### User21 02/18/2020 16:04:42
hi there im tring to work with moveit and webots universa robot Ur5e.

I want to give the Ur5e more the one Positions for my endeffector. At the end i want to move my endeffector to a coordinate and then i want him to wait a few seconds. After that it should move to another position.

It works for the first coordinate but after that it move uncontrollable through the world. After some time it moves to the second position. 

Did someone make some experience with controlling the ur5e with moveit over a c++ or python script?

##### David Mansolino [Cyberbotics] 02/18/2020 16:06:14
`@User21` are you using ROS1 or ROS2 ?

##### User21 02/18/2020 16:07:17
ros2

##### David Mansolino [Cyberbotics] 02/18/2020 16:08:07
Ok perfect, in that case you will find some examples here: [http://wiki.ros.org/webots\_ros2/Tutorials/webots\_ros2\_universal\_robot](http://wiki.ros.org/webots_ros2/Tutorials/webots_ros2_universal_robot)


I would also recomend to build the package from source from the master branch ([https://github.com/cyberbotics/webots\_ros2](https://github.com/cyberbotics/webots_ros2)) to get the latest improvments of the webots-ros2 interface.

##### sunnyjerai 02/18/2020 16:28:31
Thank you so much `@David Mansolino` . The problem is solved. we can now works ahead.

##### David Mansolino [Cyberbotics] 02/18/2020 16:28:45
`@sunnyjerai` you're welcome

##### paulthemagno 02/18/2020 16:36:09
> `@paulthemagno` I think this function can help: [https://cyberbotics.com/doc/reference/supervisor#wb\_supervisor\_node\_reset\_physics](https://cyberbotics.com/doc/reference/supervisor#wb_supervisor_node_reset_physics) ... before you reset physics you probably should set the translation and rotation of your robot node with setSFVec3f(translation) and setSFRotation(rotation)

`@Luiz Felipe` Can you give me a snippet of the code? And how to extract the node of the robot, given the robot itself?

##### User21 02/18/2020 17:01:52
`@David Mansolino` ah sorry im using ros melodic

##### Lifebinder (tsampazk) 02/19/2020 08:26:16
Hello, after the latest update (R2020a rev1) the sphero robot is not loaded, throwing an error, both in the robot benchmarking example and the sphero/worlds/pit\_escape.wbt



The error in the console reads :

ERROR: 'C:/Program Files/Webots/projects/robots/sphero/worlds/pit\_escape.wbt':103:16: error: Skipped unknown 'BB-8' node or PROTO.

##### David Mansolino [Cyberbotics] 02/19/2020 08:36:03
Hi `@Lifebinder (tsampazk)` , let me check if I can reproduce this


I just tried on Windows with R2020a rev1 and it is working fine for me.

Can you check if you have the BB-8 PROTO file in `WEBOTS_HOME/projects/robots/sphero/bb8/protos/BB-8.proto`?

If this is not the case, can you please try uninstalling and re-installing Webots?

##### Lifebinder (tsampazk) 02/19/2020 09:01:24
this file is present in that path, maybe something went wrong on the installation of the new version over the old one? I'll try reinstalling and will get back to you

##### David Mansolino [Cyberbotics] 02/19/2020 09:06:20
`@User21` ok in that case you are using ROS1, in that case you should be able to use the RVIZ and Moveit from the 'MoveIt! with a simulated robot' part documented here: [https://github.com/ros-industrial/universal\_robot/blob/kinetic-devel/README.md](https://github.com/ros-industrial/universal_robot/blob/kinetic-devel/README.md)

(after starting the simulation with `roslaunch ur_e_webots ur5.launch` ).

##### Lifebinder (tsampazk) 02/19/2020 09:09:08
Ok now bb-8 is loaded properly. The problem seemed to be on my end, where I might have changed something that i don't remember and then updating to the new version broke it. I completely removed any related webots files and reinstalled and now it works. Thank you!

##### David Mansolino [Cyberbotics] 02/19/2020 09:09:35
Very good news, thank you for the feedback.

##### Stefania Pedrazzi [Cyberbotics] 02/19/2020 09:12:27
`@Lifebinder (tsampazk)` yes, if you modified a Webots installation file, then the Webots installer cannot delete them. but the installer should report if any file cannot be deleted properly. Did you remember if it was the case for you the first time you installed Webots R2020a rev1?

##### Lifebinder (tsampazk) 02/19/2020 09:14:11
I think i would remember if it threw an error when i updated, i don't think it did. It threw an error after the uninstall process now though.
%figure
![SPOILER_Annotation_2020-02-19_110312.png](https://cdn.discordapp.com/attachments/565154703139405824/679616715163828224/SPOILER_Annotation_2020-02-19_110312.png)
%end

##### Stefania Pedrazzi [Cyberbotics] 02/19/2020 09:15:37
OK. the error I mentioned it is not prompt in a new window, but in the logs area of the the installer report. Of course prompting it in a new window would be much more visible.

##### Lifebinder (tsampazk) 02/19/2020 09:17:22
Also i didn't mess with the bb-8 file but added some textures in the worlds directory

##### Stefania Pedrazzi [Cyberbotics] 02/19/2020 09:18:41
ok, thank you for info. We will try to improve it. We already know that there are some issues uninstalling Webots on windows if the installation directory has been modified manually by the user. In fact this is not recommended.

##### Lifebinder (tsampazk) 02/19/2020 09:26:25
I don't know if its any extra help but, upon further investigation, i see that i changed the world file in the sphero/worlds and also added an extra texture in the same directory. Apparently that and updating to the new version broke the loading of the robot completely (even from other separate custom projects). Both the world and the texture files were not removed during uninstall. Thanks again.

##### sunnyjerai 02/19/2020 12:39:25
Can someone help me figure out why object keeps slipping. I've set the friction between the gripper and the object to infinity so that they won't slip. The object mass is 0.1 Kg and the robot can easily push the object.
> **Attachment**: [error\_01.mp4](https://cdn.discordapp.com/attachments/565154703139405824/679668362099425299/error_01.mp4)

##### Fabien Rohrer [Moderator] 02/19/2020 12:43:20
`@sunnyjerai` difficult to answer without looking at the simulation file, but it seems that the friction object-gripper and object-ground is extremely low, rather than infinity as you claim.


You should check that you defined well the friction.


To do so, you need to specify the Solid.contactMaterial fields, and then to define the WorldInfo.contactProperty for each couple of materials.


The default friction is ContactProperty.coulombFriction = 1.


2 is twice bigger.

##### sunnyjerai 02/19/2020 12:45:12
As of now, the coulombFriction between the gripper contact material and object contact material is -1(for infinity)

##### Fabien Rohrer [Moderator] 02/19/2020 12:47:49
yes, -1 is supposed to give an infinite friction.


but the result in your movie seems to contradict this.


it seems there is an issue somewhere.


could you send your world here?

##### sunnyjerai 02/19/2020 12:50:07
Yes , sure



> **Attachment**: [review\_agent.wbt](https://cdn.discordapp.com/attachments/565154703139405824/679671470137671703/review_agent.wbt)

##### Fabien Rohrer [Moderator] 02/19/2020 12:58:46
just looked a bit, and it seems that the contact properties are well defined.


I can't investiguate much more without the controller.


Could you send it too?

##### sunnyjerai 02/19/2020 12:59:13
yeah



> **Attachment**: [bisro\_pull.py](https://cdn.discordapp.com/attachments/565154703139405824/679673427405176853/bisro_pull.py)

##### Fabien Rohrer [Moderator] 02/19/2020 13:03:27
> WARNING: Robot > Solid: Mass is invalid because 'boundingObject' is not defined. Using default mass properties: mass = 1, inertia matrix = identity


There is a Solid without boundingObject. That can cause issues

##### sunnyjerai 02/19/2020 13:06:01
That is the turn Table mechanism, However, it has 3 children which have their own bounding object.

##### Fabien Rohrer [Moderator] 02/19/2020 13:13:43
You should probably add a dummy boundingObject there, typically a sphere of radius 0.01


I also advise you to:


1. do not use threads, especially to trigger the robot.step()


2. to control the gripper in force/torque mode rather in position mode.


(Maybe that the gripper has too much force)


=> I'm giving a quick try to grip the object this way right now..

##### sunnyjerai 02/19/2020 13:18:48
Okay, I'll try that as well

##### Fabien Rohrer [Moderator] 02/19/2020 13:35:55
`@sunnyjerai` 3. The biggest issue is certainly that the boundingObject of the gripper plate is a mesh. This primitive is not very stable. Replacing it by a box gives much better results.



> **Attachment**: [review\_agent.wbt](https://cdn.discordapp.com/attachments/565154703139405824/679682626185068552/review_agent.wbt)



> **Attachment**: [bisro\_pull.py](https://cdn.discordapp.com/attachments/565154703139405824/679682644149141519/bisro_pull.py)


I fixed several of these small issues, and I have now a working result, but perfectible. At least it's a new good starting sample for you.



> **Attachment**: [review\_agent.mp4](https://cdn.discordapp.com/attachments/565154703139405824/679683132865118218/review_agent.mp4)

##### sunnyjerai 02/19/2020 13:40:48
So, when I import a VRML file, I should use it only for defining geometry, however, I should use a primitive for defining the bounding object for better stability. I am getting this right?

##### Fabien Rohrer [Moderator] 02/19/2020 13:44:01
VRML does not contain data about physics, and meshes are not very stable in Webots. So I would say that critical geometries should be translated to simple primitives. In your case, I think that it's necessary to convert the wheels to cylinders, the caster wheels to spheres, and the gripper to (a set of) boxes. But the collisions over the body may be kept as a mesh.

##### sunnyjerai 02/19/2020 13:52:07
Okay, understood. You've been of  great help. Thank you `@Fabien Rohrer`

##### Ultra\_LcD 02/19/2020 14:39:53
Hello first time here ! I'm newbee in ros2 and webots, I have a proble with my install. The error said : Webots not found, you should either define "ROS2\_WEBOTS\_HOME", "WEBOTS\_HOME" or install the "webots\_ros2\_desktop" package.

Anybody have an idea ?

##### David Mansolino [Cyberbotics] 02/19/2020 15:08:37
Hi `@Ultra_LcD` wehlcome! How did you install the webots\_ros2 package? from sources or from APT ?

##### Ultra\_LcD 02/19/2020 15:09:37
From the package manager

##### David Mansolino [Cyberbotics] 02/19/2020 15:10:35
Ok, the webots\_ros package doesn't include the Webots simulator (to be installed seperately), the simplest solution is to install the `webots_ros2_desktop` package from the package manager.

##### Ultra\_LcD 02/19/2020 15:14:23
It's already done, I found the solution.  I've manually set the environment variable: export ROS2\_WEBOTS\_HOME=/usr/local/webots

##### David Mansolino [Cyberbotics] 02/19/2020 15:20:41
This is indeed one possible solution!


Just for information, we are currently improving a lot the Webots-ROS2 interface, to have the latest improvement you can build the packages from sources from here: [https://github.com/cyberbotics/webots\_ros2.git](https://github.com/cyberbotics/webots_ros2.git)

##### Ultra\_LcD 02/19/2020 15:22:46
Ok, thank you for the help 😀

##### David Mansolino [Cyberbotics] 02/19/2020 15:22:53
You're welcome

##### User21 02/20/2020 08:27:47
Hi there its me again 😃 

Is it possible to make a box without pysical properties? my mobile robot has to move right through the object.

Thank you

##### Stefania Pedrazzi [Cyberbotics] 02/20/2020 08:30:16
Hi `@User21`, yes if you set the Solid.physics field to NULL, then the object will be a static object. If you need a pure graphical object, you should also set the Solid.boundingObject field to NULL.

##### User21 02/20/2020 08:30:36
Okay perfect thank you ver much

##### Stefania Pedrazzi [Cyberbotics] 02/20/2020 08:30:58
You are welcome

##### TIm 02/20/2020 12:18:46
Hi,

can you edit a world file by using code? Like insertRobot(Coordinates)

##### David Mansolino [Cyberbotics] 02/20/2020 13:07:06
Hi `@TIm`, yes of course, what you are looking ofr is the Supervisor API: [https://cyberbotics.com/doc/reference/supervisor](https://cyberbotics.com/doc/reference/supervisor)

##### junjihashimoto 02/20/2020 13:19:51
hi,

deb package of webots  needs libxkbcommon-x11. But it is not installed. I want to update the dependency of the package.

Where is the description of the dependency?

##### David Mansolino [Cyberbotics] 02/20/2020 13:21:31
Hi,


This is done here: [https://github.com/cyberbotics/webots/blob/master/src/packaging/webots\_distro.c#L1104](https://github.com/cyberbotics/webots/blob/master/src/packaging/webots_distro.c#L1104)

Thank you

##### junjihashimoto 02/20/2020 13:22:40
Thx!

##### kimkim 02/20/2020 13:26:52
hi there, I am working with UR5 robot and add gripper.

##### David Mansolino [Cyberbotics] 02/20/2020 13:27:09
Hi  `@kimkim`

##### kimkim 02/20/2020 13:27:24
Is there any information or example with griper I could reter to?

##### David Mansolino [Cyberbotics] 02/20/2020 13:28:53
Yes of course, this sample of the UR5 robot using gripper: [https://www.youtube.com/watch?v=WIY9ebqSXUc&feature=emb\_logo](https://www.youtube.com/watch?v=WIY9ebqSXUc&feature=emb_logo)

Is distributed within Webots:

[https://cyberbotics.com/doc/guide/ure#samples](https://cyberbotics.com/doc/guide/ure#samples)

##### Axel M 02/20/2020 13:33:58
Hi everyone,

I'm in charge of trying webots as a potential solution for the new version of my company's robot simulator.

Do you have any resources recommendations regarding wheeled robots with suspensions ? A main concern for us is realistic physics on uneven terrain

##### kimkim 02/20/2020 13:33:59
wow thank you very much. 🙂

##### Fabien Rohrer [Moderator] 02/20/2020 13:34:25
`@Axel M` Hi

##### David Mansolino [Cyberbotics] 02/20/2020 13:35:21
`@kimkim` you're welcome :-)

##### Fabien Rohrer [Moderator] 02/20/2020 13:35:53
`@Axel M` Webots is indeed a good solution to model such robot.


Uneven terrains can be created easily, for example using this node:


[https://www.cyberbotics.com/doc/guide/object-floors#uneventerrain](https://www.cyberbotics.com/doc/guide/object-floors#uneventerrain)


And Webots contains several robot models containing suspensions


.. including all our car models


[https://cyberbotics.com/doc/automobile/ackermannvehicle](https://cyberbotics.com/doc/automobile/ackermannvehicle)

##### Axel M 02/20/2020 13:38:48
That's great, i'll give it a shot. Thanks 🙂


urdf2webots working (almost) like a charm 😄



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/680081911099686920/unknown.png)
%end

##### David Mansolino [Cyberbotics] 02/20/2020 16:13:39
Very nice model ! 😄

##### Troy 02/20/2020 20:43:09
Hi everyone


I'm very confused about how to use the urdf2webots tool


what should I change if I want to use this line


python demo.py --input=someRobot.urdf [--output=outputFile] [--box-collision] [--normal] [--disable-mesh-optimization]


I tried to replace the "someRobot.urdf" with my robot urdf file, but it didn't work

##### David Mansolino [Cyberbotics] 02/21/2020 06:33:41
Hi `@Troy`, you should indeed replace `someRobot.urdf` with the path to your urdf file. The arguments inside bracket are optional arguments that you can use to enable/disable some features.

Can you give us the exact command you are using to call the script?

##### elkelkmuh 02/21/2020 10:10:47
Hi `@David Mansolino`  camera image was corrupted in both real transfer and simulation. How can I correct i
%figure
![image2020-02-21-13-24-28-58685.jpg](https://cdn.discordapp.com/attachments/565154703139405824/680355731978977280/image2020-02-21-13-24-28-58685.jpg)
%end

##### David Mansolino [Cyberbotics] 02/21/2020 10:18:35
Hi `@elkelkmuh`, where are you seeing this image? In the robot window, in the camera overla or when saving it from the controller?

##### elkelkmuh 02/21/2020 10:21:54
I am saving image . That was corrputed

##### David Mansolino [Cyberbotics] 02/21/2020 10:22:07
Ho do you save the image ?

##### elkelkmuh 02/21/2020 10:25:40
self.camera.saveImage("image%s.jpg"  %noun,100)

##### David Mansolino [Cyberbotics] 02/21/2020 10:34:58
Which version of Webots are you using ?

##### elkelkmuh 02/21/2020 10:49:04
2020a ver1

##### David Mansolino [Cyberbotics] 02/21/2020 10:51:32
Ok, that can explain the problem, we just fixed an issue with the camera.saveImage function a feww weeks ago as explained in the changelog of de development version: [https://github.com/cyberbotics/webots/blob/master/docs/reference/changelog-r2020.md#webots-r2020a-revision-2](https://github.com/cyberbotics/webots/blob/master/docs/reference/changelog-r2020.md#webots-r2020a-revision-2)

Maybe you should try with a beta version of 'R2020a ver2), you can find them in the nightly build, for example: [https://github.com/cyberbotics/webots/releases/tag/nightly\_19\_2\_2020](https://github.com/cyberbotics/webots/releases/tag/nightly_19_2_2020)

##### elkelkmuh 02/21/2020 10:55:11
Are there r2020 ver2 in ubuntu(beta)

##### David Mansolino [Cyberbotics] 02/21/2020 10:55:33
Of course, you will find in the list: webots-R2020b-x86-64.tar.bz2

##### mero 02/21/2020 12:00:32
Hi, its my first time using webots and i was wondering if there is a simulation for a prosthetic hand that I can use?

##### David Mansolino [Cyberbotics] 02/21/2020 12:02:42
Hi `@mero`, welcome!

Webots does provide one hand gripper as example: [https://cyberbotics.com/doc/guide/gripper-actuators](https://cyberbotics.com/doc/guide/gripper-actuators)

But I am sure many users created their own one

##### mero 02/21/2020 12:05:18
Thank you

##### David Mansolino [Cyberbotics] 02/21/2020 12:11:02
You're welcome

##### MohammadSorush 02/21/2020 12:12:16
Hi i want to import inertia matrix into webots so i found 3 type of data from solidworks  and i dont know which one is the answer. would you help me?


inertia by solidworks
%figure
![Screenshot_from_2020-02-21_15-31-56.png](https://cdn.discordapp.com/attachments/565154703139405824/680386450642305063/Screenshot_from_2020-02-21_15-31-56.png)
%end

##### elkelkmuh 02/21/2020 12:24:07
`@David Mansolino` rev2 works.  thank you

##### David Mansolino [Cyberbotics] 02/21/2020 13:11:22
`@elkelkmuh` you're welcome, thank you for the feedback!


`@MohammadSorush` in Webots inertial matrix must be defined at the center of mass in the object coordinate system


Note also that it should be defined in kilogram per square meter (and not as SoliWorks in grams per square millimeters)

##### MohammadSorush 02/21/2020 13:34:10
`@David Mansolino`  thank you

##### David Mansolino [Cyberbotics] 02/21/2020 13:34:34
You're welcome

##### Axel M 02/21/2020 13:44:16
I have some remarks / questions regarding Tutorial 6 (4-Wheels Robot):

- (Even if kind of obvious), the rotation of the cylinder modelling the wheels is not mentioned ( (0,0,1) 1.5707 ) 

- Why are the translations of the spheres in the dumbell (Tutorial 5) achieved via Transform Node, whereas in the Tutorial 6 they're done using the translation attribute of the wheel Solid Node ?

##### David Mansolino [Cyberbotics] 02/21/2020 13:48:09
Let me check


You're right about the cylinder rotation, I will add a not about this.


About the dumbell, a Transform is required because there is only one Solid node (the whole dumbell is considered as one single object), therefore the various part of this object (e.g. Shapes) needs to be encaspulated in a Transform otherwise they would all be centered at the origin of the Solid.

##### Axel M 02/21/2020 13:57:47
Understood, thanks 🙂

##### David Mansolino [Cyberbotics] 02/21/2020 13:57:56
You're welcome


`@Axel M` I am improving the tutorial as you suggested here: [https://github.com/cyberbotics/webots/pull/1400/files](https://github.com/cyberbotics/webots/pull/1400/files)

##### Axel M 02/21/2020 14:00:27
Uh sorry, could have done the PR myself 😅

##### David Mansolino [Cyberbotics] 02/21/2020 14:01:20
No problem, you're welcome to do it yourself next time 😉

##### Troy 02/21/2020 16:30:17
`@David Mansolino` Hi David, on my Mac I replaced someRobot.urdf with the path to my urdf, and then it told me  zsh error, no match for outputFlie

##### Axel M 02/21/2020 16:32:42
How worth is it to simulate real weights of a somewhat massive robot ? Mine is about ~3 Tons and it's sinking into the ground even if I reduce basicTimeStep. I've tried the Model 3 Tesla Model, and it stop sinking into the ground at basicTimeStep ~= 2ms. I was wondering if, dividing all weights by 100 or 1000 in order to have a higher basicTimeStep was a valid approach (I imagine it to be a tradeoff between realistic forces / torques and simulation speed ?)

##### Olivier Michel [Cyberbotics] 02/21/2020 16:33:36
There are other parameters which you can tune to allow for heavy weight models. Let me check it and I will revert back to you about it here...


The boomer tractor is an example of an heavy weight vehicle: `webots/projects/vehicles/worlds/boomer.wbt` for which a number of `WorldInfo` parameters were adjusted to avoid getting the robot sinking into the ground. They are mainly `WorldInfo.ERP` and `WorldInfo.contactProperties.softCFM`. Playing with these values and going away from default value will make your simulation compliant with heavy weight vehicles.


No need to reduce the `WorldInfo.basicTimeStep` too much.


Of course, you can scale down all the masses if you don't want to modify the `WorldInfo` parameters, that should be equivalent, but maybe misleading if you look at the masses of the model...

##### User21 02/21/2020 19:28:24
Hi,

I want to use two ur5e with move\_it.  I followed the Gazeb Tutorial and tried to implement implement it in webots. I have to edit the launch file and i had to use the group command to seperate the published joint states. My Problem is  that Webots stops publishing so MoveIt cant plan.


My launchfile looks like that


<?xml version="1.0"?>

<launch>

<group ns="robot1">

  <arg name="limited" default="true"  doc="If true, limits joint range [-PI, PI] on all joints." />

  <arg name="prefix" default="" doc="Prefix to robot's joints' and links' names" />

  <arg name="debug" default="false" />

  <arg name="pipeline" default="ompl" />

  <arg name="sim" default="True" />

  <arg name="config" default="true" />

  <param name = "use\_sim\_time" value= "True" type ="bool" />

  <param name="tf\_prefix" value="robot1\_tf" />









 

 <!-- Remap follow\_joint\_trajectory -->

  <remap if="$(arg sim)" from="/follow\_joint\_trajectory" to="/robot1/arm\_controller/follow\_joint\_trajectory"/>





  <!-- send robot urdf to param server -->

  <include file="$(find ur\_e\_description)/launch/ur5e\_upload.launch">

    <arg name="limited" value="$(arg limited)"/>

  </include>



 <!-- Launch moveit -->

  <include file="$(find ur5\_e\_moveit\_config)/launch/move\_group.launch">

    <arg name="allow\_trajectory\_execution" value="true"/>

    <arg name="fake\_execution" value="False"/>

    <arg name="info" value="true"/>

    <arg name="debug" value="$(arg debug)"/>

    

  </include> 





 <!-- Run Rviz -->

  <include file="$(find ur5\_e\_moveit\_config)/launch/moveit\_rviz.launch">

    <arg name="config" value="$(arg config)"/>

    <arg name="debug" value="$(arg debug)"/>



  </include>



  <!-- Robot state publisher -->

  <node pkg="robot\_state\_publisher" type="robot\_state\_publisher" name="robot\_state\_publisher">

    <param name="publish\_frequency" type="double" value="50.0" />

  </node>





  <!-- Fake Calibration -->

  <node pkg="rostopic" type="rostopic" name="fake\_joint\_calibration" args="pub /calibrated std\_msgs/Bool true" />



  <!--Start ManipulatorController (Path: webots\_posegoal -> posegoal -->

  <node name="ProvideManipulatorControll" pkg="webots\_posegoal" type="pose\_goal1"/>

 </group>

</launch>


Its just for one robot but i wanted to add more if it works for one

##### kimkim 02/23/2020 14:33:30
Hi I am install webot - Ros2 package with mac, but problem is here..

##### David Mansolino [Cyberbotics] 02/24/2020 06:34:34
`@kimkim`, I have never tried the ROS2 package for mac, but I would be more than happy to help you using it for mac.


What is exactly your problem?


`@User21` you can use one of these launch file to launch the simulation with the universal robot and ros interface: [https://github.com/cyberbotics/webots/tree/master/projects/robots/universal\_robots/resources/ros\_package/ur\_e\_webots/launch](https://github.com/cyberbotics/webots/tree/master/projects/robots/universal_robots/resources/ros_package/ur_e_webots/launch)

Then you can use directly the launch files from the 'MoveIt! with a simulated robot' part here: [https://github.com/ros-industrial/universal\_robot/blob/kinetic-devel/README.md](https://github.com/ros-industrial/universal_robot/blob/kinetic-devel/README.md)

##### User21 02/24/2020 08:59:57
`@David Mansolino` i made my launchfile with these files you sent, but i want to use more then one robot with moveit so i have to use the group command, but when i use it (it seems like) it blocks outgoing messages from webots

##### David Mansolino [Cyberbotics] 02/24/2020 09:06:20
`@User21` ah ok, good so for 1 robot it is working?

I have never tried it with more than one robot. But this should theoretically work


What is the current problem you are facing?

##### User21 02/24/2020 09:09:30
yea its working for one robot 

the problem i am not able to launch multiple moveit Nodes to plan for each robot im using. At the begining i just want to try it for to ur5e robots


*two

##### David Mansolino [Cyberbotics] 02/24/2020 09:12:31
Ok, I will try when I have a bit of time and let you know.

##### User21 02/24/2020 09:14:43
okay thank you very much!

##### David Mansolino [Cyberbotics] 02/24/2020 09:15:11
You're welcome


`@User21` I have checked and on the Webots side the only thing you have to do is to make sure you use different prefixes in this launch file:  [https://github.com/cyberbotics/webots/blob/master/projects/robots/universal\_robots/resources/ros\_package/ur\_e\_webots/launch/ur5e\_joint\_limited.launch](https://github.com/cyberbotics/webots/blob/master/projects/robots/universal_robots/resources/ros_package/ur_e_webots/launch/ur5e_joint_limited.launch)



For the rest, it is not really related to Webots, You should probably ask directly to [https://github.com/ros-industrial/universal\_robot](https://github.com/ros-industrial/universal_robot) how you should do to control more than one arm.

##### kimkim 02/24/2020 15:22:05
Thank you, David, I'll use launch file. 🙂


And furthermore, I would like to try openai gym with webot,


Is there any tutorial I could refer to, it sould be big help. thano you. I'll use UR5.

##### David Mansolino [Cyberbotics] 02/24/2020 15:25:15
I have never used openai gym with Webots, but I know somw people did, here is a few example (not sure about the quality of such examples):

[https://github.com/talregev/gym-webots](https://github.com/talregev/gym-webots)

[https://stackoverflow.com/questions/59786161/integration-with-open-ai-gym-stable-baselines](https://stackoverflow.com/questions/59786161/integration-with-open-ai-gym-stable-baselines)

##### coderrr 02/25/2020 04:23:49
Hello all,


I am a new user of webots. I want to set aperture for distance sensor. Does anyone know how to do that?

##### elkelkmuh 02/25/2020 06:06:07
Hi `@David Mansolino` First I want op2 to walk and then I want to stop and move its arms. 

How can I do it.(Normally I can do  seperately them)

I can't control the motors of the arms when I use gaitManager = RobotisOp2GaitManager(controller, "") and its initialization.

##### David Mansolino [Cyberbotics] 02/25/2020 06:33:00
Hi `@coderrr`, yes you can specify the aperture using the `aperture` of the `DistanceSensor` node. See the documentation for more information: [https://cyberbotics.com/doc/reference/distancesensor](https://cyberbotics.com/doc/reference/distancesensor)


`@elkelkmuh` in that case you have to develop your own gait algorithm (or improve the existing one) as the current gait algorithms impose the position of all the motors.

##### elkelkmuh 02/25/2020 07:41:25
`@David Mansolino` first I will use gaitmanager in webots for walking. Then I will stop gait manager. Finally I will control the motors of only arm. How can stop gait manager.I will not generate new gait manager.

##### David Mansolino [Cyberbotics] 02/25/2020 07:43:28
Ok, in that case it should indeed work, for stopping it, as you can see in the doc ([https://cyberbotics.com/doc/guide/robotis-op2#gait-manager](https://cyberbotics.com/doc/guide/robotis-op2#gait-manager)) there is a `stop()` function.

##### Axel M 02/25/2020 08:36:40
Is it possible to "attach a script" to a Node which is not a robot ? I would love to have a process running on a camera (to emulate an HTTP server as we have on our real sensors). Is the right way to do this to encapsulate this server inside the robot or supervisor controller ?

##### Stefania Pedrazzi [Cyberbotics] 02/25/2020 08:40:32
Hi `@Axel M`, only Robot nodes can run scripts or programs. But it is possible to have nested Robot nodes, i.e. you can add a Robot node as parent of your Camera node. Each Robot node, even if nested, runs independent programs, so you will be able to run a script just for the Camera.

##### Axel M 02/25/2020 08:41:34
Thanks for your answer `@Stefania Pedrazzi`, do you recommend this approach though ? maybe some caveats appears when you run 12+ robot nodes ?

##### Stefania Pedrazzi [Cyberbotics] 02/25/2020 08:46:54
Yes, this is a good approach. It depends on the complexity of the programs, but splitting them could also help making a better use of the PC's CPUs.

##### kwy 02/25/2020 11:59:07
hello, can Webots connect with CLion like with Pycharm?

##### David Mansolino [Cyberbotics] 02/25/2020 12:00:03
Hi `@kwy` yes of course, for pycharm we do provide a guide to set it up: [https://cyberbotics.com/doc/guide/using-your-ide#pycharm](https://cyberbotics.com/doc/guide/using-your-ide#pycharm)

##### kwy 02/25/2020 12:02:27
thanks, I will try to connect Webots and CLion

##### coderrr 02/25/2020 19:51:15
Hello, How to use Supervisor API for python? I have read the documentation but some sample code in python would be useful

##### David Mansolino [Cyberbotics] 02/25/2020 19:52:56
`@coderrr` instead of instatiating a Robot class you should simply instantiate a Supervisor class (it inherits from the Robot class and provide all the Supervisor methods)

##### coderrr 02/25/2020 19:53:02
what is equivalent to "wb\_supervisor\_node\_get\_from\_def" in Python?

##### David Mansolino [Cyberbotics] 02/25/2020 19:53:33
supervisor = Supervisor()

node = supervisor.getFromDef('...')


not exactly, once you did get the node, you can use it to get fields:

```
supervisor = Supervisor()
node = supervisor.getFromDef('...')
field = node.getField('translation')
translationValue = field.getSFVec3f()
```

##### coderrr 02/25/2020 19:58:34
Okay


`@David Mansolino` Thank you so much 😁

##### David Mansolino [Cyberbotics] 02/25/2020 19:59:33
You're welcome 😉

##### coderrr 02/25/2020 20:01:41
supervisor = Supervisor()

node = supervisor.getFromDef('ROBOT')

node.getField('translation')


I am using khepera and e-puck. The parameter value will be 'e-puck' and 'khepera' or 'ROBOT'

##### David Mansolino [Cyberbotics] 02/25/2020 20:03:39
The value is not robot-dependant, but it is the DEF name that you defined (in your case probably 'ROBOT'). You can define the def name by selecting the node in the scene tree and then usinf the node editor: [https://cyberbotics.com/doc/guide/the-scene-tree#field-editor](https://cyberbotics.com/doc/guide/the-scene-tree#field-editor)

##### coderrr 02/25/2020 20:08:07

%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/681955611990425711/unknown.png)
%end

##### David Mansolino [Cyberbotics] 02/25/2020 20:08:28
Exactly, it is ``ROBOT`` then

##### coderrr 02/25/2020 20:12:32
Thanks for the solution! It worked!

##### David Mansolino [Cyberbotics] 02/25/2020 20:15:47
You're welcome

##### coderrr 02/25/2020 20:27:58
ds0 = robot.getDistanceSensor('ds0')

ds0.enable(TIME\_STEP)

ds0.aperture = 0.75

print(ds[0].getApperture())

Can I set aperture of distance sensor like this?

##### XZbot 02/25/2020 20:29:48
Hi David, I am working on a simulated maze experiment using Webots and I have a question regarding the extraction of ground-truth position of the robot during simulation. I put an e-puck in my maze and set it to start at a certain position by setting up the initial translation and rotation values under the E-puck node in the scene tree before starting simulation. In my controller code, at each simulation time step, I first extract the robot's distance sensor values, and use that to regulate its left motor and right motor speed when it moves inside the triple T maze. So the robot can now autonomously move inside the triple T-maze and turn properly at a corner or a T-intersection. My controller code is now able to extract useful sensor information and write to a csv file at each time step for each simulation trial. However, I cannot extract the translation and rotation values at each time step, although I can monitor them changing under the E-puck node in the scene tree during the simulation. The related code I have is shown below. Could you please give any suggestion of how to solve this problem? Thanks!


How I changed the motor speed is using a Robot class:

    from controller import Robot

    ...



    robot = Robot() 

    leftMotor = robot.getMotor('left wheel motor')

    rightMotor = robot.getMotor('right wheel motor')

    leftMotor.setPosition(float('inf'))

    rightMotor.setPosition(float('inf'))

    leftMotor.setVelocity(0.0)

    rightMotor.setVelocity(0.0)

    ...



    ## Inside the while loop for each time step

       ...

       #modify speed

       leftSpeed = ...

       rightSpeed = ...



       # write actuators inputs

       leftMotor.setVelocity(leftSpeed)

       rightMotor.setVelocity(rightSpeed)

       ...





How I want to extract translation and rotation value while it's autonomously moving is to use a Supervisor class, which seems to be not compatible with a Robot class: 

    

    supervisor = Supervisor()

    robotNode = supervisor.getFromDef('E-puck')

    robotTranslationField = robotNode.getField('translation')

    robotRotationField = robotNode.getField('rotation')



    ## Inside the while loop for each time step

       ...

       #read translation and rotation values

       trans = robotTranslationField.getSFVec3f()

       rotat = robotRotationField.getSFRotation()

##### Noob Saibot 02/25/2020 22:55:23
I have a general question. What is the most accurate value for columb friction to simulate?

##### David Mansolino [Cyberbotics] 02/26/2020 06:44:00
`@Noob Saibot`, it depends on the surface, there is no 'correct' global value for the columb friction.


`@coderrr`, no. You should set the aperture from the scene-tree you can't change it from the API.


`@XZbot`, you are almost there, the problem comes from the fact that the Supervisor class inherits from the Robot class, it is therefore sufficient to instantiate only the Supervisor class and use this instance instead of the robot instance, e.g.:

```Python
supervisor = Supervisor()
leftMotor = supervisor.getMotor('left wheel motor')
```

##### XZbot 02/26/2020 06:51:02
Thanks a lot `@David Mansolino`  I will try your method tomorrow

##### David Mansolino [Cyberbotics] 02/26/2020 06:51:20
You're welcome

##### jinu061353 02/26/2020 08:06:29
can i sensing torque in webots????

##### David Mansolino [Cyberbotics] 02/26/2020 08:06:50
Hi `@jinu061353`, of course


You can enable torque feedback of any motor joint: [https://cyberbotics.com/doc/reference/motor#wb\_motor\_enable\_force\_feedback](https://cyberbotics.com/doc/reference/motor#wb_motor_enable_force_feedback)

##### jinu061353 02/26/2020 08:09:48
I'm sorry, but I'll ask you again. can i use f/t sensor in webots????

##### David Mansolino [Cyberbotics] 02/26/2020 08:10:23
Maybe you are looking for touchSensors: [https://cyberbotics.com/doc/reference/touchsensor](https://cyberbotics.com/doc/reference/touchsensor)

##### jinu061353 02/26/2020 08:22:21
As far as I know, the touch sensor measures force. No?

##### David Mansolino [Cyberbotics] 02/26/2020 08:22:38
Yes, it can measures 3D forces


To measure joint a joint between the two solid must be present, and the Motor API should be used.


(It can be a passive motor)

##### jinu061353 02/26/2020 08:27:31
I know the force measurement with a touch sensor, but all I want is a torque measurement method.😂

##### User21 02/26/2020 15:12:14
`@David Mansolino` Related to my previous question 

if i change the prefix i get the Error: Received a goal with incorrect joint names

##### elkelkmuh 02/26/2020 15:13:30
Hi @David Mansolino  These values are those of real robotis-op2 or op2 in simulation. They dont change. why?I did cross complciaton. They dont change.The values  ​​change in simulation.  It doesn't actually change when you connect and transfer cables
%figure
![IMG-20200226-WA0004.jpg](https://cdn.discordapp.com/attachments/565154703139405824/682243855655108643/IMG-20200226-WA0004.jpg)
%end


`@David Mansolino`  how can I solve this problem

##### David Mansolino [Cyberbotics] 02/26/2020 16:21:00
`@elkelkmuh` I am sorry but your question is not clear, where does this picture comes from? Webots does not provide support for the FSR sensors in remote-control out of the box. Are thos plots simulation or real robot?

##### elkelkmuh 02/26/2020 16:23:37
`@David Mansolino`  Plots are from robot windows in real robot transfer.


`@David Mansolino`  what is it mean out of the box?

##### David Mansolino [Cyberbotics] 02/27/2020 06:18:46
`@elkelkmuh` it means that the model of the darwin-op distributed within Webots does not contain any FSR

##### elkelkmuh 02/27/2020 06:22:17
`@David Mansolino` Thank you for the information So will fsr be added to webots?

##### David Mansolino [Cyberbotics] 02/27/2020 07:17:11
This is unfortunately not on our short term plans, but feel free to add it yourself to Webots: [https://github.com/cyberbotics/webots/blob/master/CONTRIBUTING.md](https://github.com/cyberbotics/webots/blob/master/CONTRIBUTING.md)

##### Francony 02/27/2020 10:57:10
Hi, I have a robot model in Webots and need to extract all of the node's positions/masses/inertias to write a URDF description of the robot. For this, I tried writing a supervisor controller that goes through all the nodes in the my tree but it's harder to navigate the nodes than I expected. Do you know of a more efficient way to do this? thanks in advance

##### David Mansolino [Cyberbotics] 02/27/2020 11:03:59
Hi `@David Mansolino`, from Webots the Supervisor is indeed the way to go. Alternatively, you can write a script (in python for example) that reads direct the world or PROTO file to extract the information.

Just by curiosity, why do you need to write this URDF description?

##### Francony 02/27/2020 11:09:13
I see, thanks. 

I need to visualize and interact with the Robot in rviz from ROS.

##### Oxygenius 02/27/2020 13:27:49
Hi everyone,

I needed to import a 3D CAD to Webots, so i have exported a solid from Creo (Pro engineer) as VRML. However when i tried to import it in Webots nothing happens. 

Thanks in advance for your help
> **Attachment**: [roller\_wheel\_60mm\_prt.wrl](https://cdn.discordapp.com/attachments/565154703139405824/682579644587048985/roller_wheel_60mm_prt.wrl)

##### David Mansolino [Cyberbotics] 02/27/2020 13:38:25
Creo use the `Anchor` WRML node (amongst other) when exporting to WRML, unfortunately this node is not supported by Webots.

I suggest to use another tool to export as VRML, you can use for example this free online platform that export in a VRMl format compatible with Webots: [https://cloud.cadexchanger.com/app](https://cloud.cadexchanger.com/app)

##### Axel M 02/27/2020 13:48:14
Hi, I've written a webots controller in Cpp which use roscpp lib internally. If I run the controller externally, everything is working perfectly. However, running the controller inside webots gives weird random (and constant) timestamps as output of ros::Time::now()

##### Oxygenius 02/27/2020 13:49:27
`@David Mansolino` It works, thank you!

##### David Mansolino [Cyberbotics] 02/27/2020 13:53:42
`@Oxygenius` you're welcome


`@Axel M` that's strange, the behavior should be the same between intern and extern controllers. What kind og timestamps do you get? Is the time running in Webots? Are you publishing the clock topic? Are use setting 'use\_sim\_time'?

##### Axel M 02/27/2020 14:01:49
`@David Mansolino` No simulated time : so use\_sim\_time false, no /clock, and the timestamps are just plain random that goes from 1987 to 2090+


The time is running in webots, yup


In the end, my minimal code reproduction that demonstrate the problem is just :


\#include <ros/ros.h>

\#include <iostream>

\#include <memory>

\#include <webots/Robot.hpp>



using namespace webots;

int main(int argc, char** argv) {

    std::shared\_ptr<Robot> robot(new Robot());



    ros::init(argc, argv, "test\_node");

    ros::console::set\_logger\_level(ROSCONSOLE\_DEFAULT\_NAME, ros::console::levels::Debug);

    ros::NodeHandle nh;



    std::cout << "running test controller"

              << "\n";

    while (ros::ok() && robot->step(1000) != -1) {

        std::cout << ros::Time::now() << "\n";

        ros::spinOnce();

    }



    return 0;

}


Timestamp output example : 3863553536.000032767


The real part is random while the decimal part always end identically


Running externally time is running as expected 🤔

##### David Mansolino [Cyberbotics] 02/27/2020 14:05:32
Ok, thank you for this code snipet, I will try it as soon as I have a bit of time

##### Axel M 02/27/2020 14:17:44
thanks `@David Mansolino` 🙂 I updated the snipped to a fully standalone controller code. However, it needs to be linked to ros librairies


I don't know the "right" way to do it but in my case, it is compiled by a catkin CMakeLists where I added manually linking to libCppController


The only thing that comes to my mind would be a skewed LD\_LIBRARY\_PATH (As I have to set it in order to run the controller externally, maybe Webots override it and something happens with the shared libraries of ROS ?)

##### User21 02/27/2020 14:31:07
Hi there,

im using moveit with webots, and i wanted to know if the trajectoryFollower gives me feedback if i reached my goal. I need to know because i want to use it as reason to exit a while loop.

Thanks for helping!

##### David Mansolino [Cyberbotics] 02/27/2020 14:59:18
`@Axel M` Webots does indeed change the `LD_LIBRARY_PATH`, it adds some paths


Maybe that can be an explanation, because it adds `webots/projects/default/libraries/ros` to the path, maybe this cause library conflicts with your ros libraries. Can you try temporarily removing those libraries from `webots/projects/default/libraries/ros` ?


`@User21`, I assume you are using the universal robot model and ROS1, right ?

##### Axel M 02/27/2020 15:13:07
`@David Mansolino` Yup that worked


I guess the libraries you got in there are from kinetic release or something like this ?


(i'm using melodic)

##### David Mansolino [Cyberbotics] 02/27/2020 15:13:56
Perfect. In that case it means that the ros libraries shiped within webots are not compatible with the one you are using.


It is indeed from kinetic

##### Axel M 02/27/2020 15:14:18
I'm assuming having the ros libraries inside webots is to provide the ability to run a ros\_controller without having to source a workspace ?


I can open an issue on github if you wish

##### David Mansolino [Cyberbotics] 02/27/2020 15:15:12
Exactly, this is the idea, to be able to compile ROS node from Webots without needing to have the complete ROS toolchain installed.


> I can open an issue on github if you wish

`@Axel M` 

It would be nice, thank you.

##### User21 02/27/2020 17:37:03
`@David Mansolino`  Yes 😄 Sorry for these questions but im not quite familiar with ros im just learning it. I appreciate your help very much.

##### David Mansolino [Cyberbotics] 02/28/2020 06:27:52
`@User21`, no problem, yes you can simply check if your action client state is succeded, see this example: [http://wiki.ros.org/actionlib#C.2B-.2B-\_SimpleActionClient](http://wiki.ros.org/actionlib#C.2B-.2B-_SimpleActionClient)

##### User21 02/28/2020 11:06:46
Hey i have a Problem with the rotation of the ur5e. Can i predefine a rotation for that robot and then rotate it from there? I want to rotate the robot around the robots z Axis over a supervisor filed but its not that easy possible because i get multiple changes in the x,y,z rotations

##### schadocalex 02/28/2020 11:11:26
Hi, Webots is awesome! But I have a problem. I have a big world definition input, that say for example "one tree is at this position". I can have thousands of trees. I have two solutions, for both I can't find how to do it in Webots:

1) Generate a big world file and then load it. But there is no LOD or something so there will be too much objects in the scene, I think. Maybe I can make chunks of the maps and load them depending of my main robot pos? Is it possible?

2) Have a standalone script that instantiate models dynamically in the world, depending on robot pos.

Thanks!

##### Olivier Michel [Cyberbotics] 02/28/2020 11:17:41
Hi `@schadocalex`, I believe the second option you propose is probably the best way to go. This script could actually be implemented as a Webots Supervisor. Also, instead of instantiating new models, it could simply move existing models (e.g., trees) that are already loaded in the world file.

##### David Mansolino [Cyberbotics] 02/28/2020 11:20:08
`@User21` the workaround is to put your robot in the children field of another Robot node (whose controller is set to 'none') this way you have two independant rotation fields to manipulate. But it would be cleaner to handle rotation combination directly in your Supervisor.


`@schadocalex`, alternatively the `Forest` PROTO node allows you to define the position of a large number of three in a file in an efficient way: [https://cyberbotics.com/doc/guide/object-trees#forest](https://cyberbotics.com/doc/guide/object-trees#forest)

##### schadocalex 02/28/2020 11:35:42
Thanks for the fast answers.

Ok so Webots Supervisors are the way to do it.

About Forest PROTO, can I add my own tree types? Because it’s not really trees I want, I have my own custom models.

##### David Mansolino [Cyberbotics] 02/28/2020 11:38:25
No the PROTO works indeed only for trees (but you might get inspiration from it if needed), but if your original model contains many triangles then the Supervisor is indeed the way to go.

##### schadocalex 02/28/2020 11:41:48
Yes my models are not very low poly ones. Thanks!

##### User21 02/28/2020 12:15:54
`@David Mansolino` Thank you!


If i do it with  two robot nodes i cant enabel my arm sensors. Is it because it cant find the sensors from a robot in arobot node?

##### David Mansolino [Cyberbotics] 02/28/2020 13:23:47
You can't indeed acess devices of a child robot, robot can only access it's own devices (not including devices from sub-robot)

##### User21 02/28/2020 13:24:21
okay thanks

##### David Mansolino [Cyberbotics] 02/28/2020 13:24:34
You're welcome

##### kwy 02/28/2020 15:27:52
Hello, is there any sample use "setPosition" to control robot

##### David Mansolino [Cyberbotics] 02/28/2020 15:29:10
Hi `@kwy` you mean the motor.setPosition function, right?

##### kwy 02/28/2020 15:30:56
yes. i want to set the relative position in a map

##### David Mansolino [Cyberbotics] 02/28/2020 15:32:08
This function is not for setting the map position directly, but for acting on a joint position.

If you want to set the absolute position of a robot on a map you should use the Supervisor API: [https://cyberbotics.com/doc/reference/supervisor](https://cyberbotics.com/doc/reference/supervisor)

##### kwy 02/28/2020 15:36:22
thanks, is there any sample to show this function?

##### David Mansolino [Cyberbotics] 02/28/2020 15:36:58
Yes, this sample show how to move a light to a defined location for example: [https://cyberbotics.com/doc/guide/samples-devices#supervisor-wbt](https://cyberbotics.com/doc/guide/samples-devices#supervisor-wbt)


(it is in C, but other languages works the same way)

##### kwy 02/28/2020 15:45:43
wow,the location of the PointLight is moved.. so i can change the location of a robot (x,y,𝜑) on a map with Supervisor

##### David Mansolino [Cyberbotics] 02/28/2020 15:46:07
Exactly 😉

##### kwy 02/28/2020 15:46:14
thanks!!!

##### David Mansolino [Cyberbotics] 02/28/2020 15:46:19
You're welcome

##### sun 02/29/2020 01:28:07
hello,how to add a all direction wheel in the webots????this question has fused me for two days::i used two joint\_hinge one for z axis rotation and the other for x axis rotaton, when i simulate this wheel didn't work as i think.

##### User21 02/29/2020 15:42:48
`@David Mansolino` 

I dont understand the last function of the TrajectoryFollower code from the universal\_robots\_ros controller. These function gets called in the while loop of the universal\_robots\_ros python script and its executing planned path.

Here the Code:
> **Attachment**: [message.txt](https://cdn.discordapp.com/attachments/565154703139405824/683338393370886267/message.txt)


When i test the code the last else function never gets called and throught that the goal\_handle.set suceeded never gets called. And to my knowledge is that the way i get the feedback if my robot reached the goal. Im quite confused about the variable goal\_handle because of his type. its either None or some sort of adress. maybe im just missing something. I hope you understand my problem.

## March

##### jinu061353 03/01/2020 05:15:54
What is the weight of a op3 on the webots?


darwin-op3

##### Deep 03/01/2020 12:11:07
Can anyone help with webots for nao? There's no option to open an account which is requested.


Password "webots" results in "Bla bla no license" and a dead link.


Doesn't work with "webots@cyberbotics.com"

either... `@David Mansolino` Sorry to bother but you seem to know your way around here. May I have some assistance please?

##### asphyxia 03/01/2020 17:29:54
Hello, I think I have found a race condition between `Supervisor::simulationReset()` and `Robot::tick()`. If `simulationReset()` is called before `tick()` (with a nonzero step), sometimes `tick()` will wait until the simulation time is `step` ms after the time *before* `simulationReset` was called, instead of `step` ms after time 0, causing the simulation to run for much more than `step` ms (e.g. if `simulationReset` is called at 5.000 seconds simulation time, and then `tick(32)` is called, `tick` will return after another 5 seconds - when the simulation time has gone from 0s up to 5.032s). I can't seem to reproduce this too reliably (I just ran a test 10 times, and the race happened twice); I'm using python 3.8 on a synchronized controller.

##### LaCava 03/01/2020 17:55:44
Hi all -- I'm trying to keep track of the position in space (X, Y, Z) of a few choice parts of a robot (Softbank NAO). I'm aware of the different spatial sensors, but I'm looking for a more direct way to track those values with a supervisor.


Wait

Just as I've sent that I remembered there are available 'slots', so I assume I can add non-colliding nodes there and just track those.

##### jinu061353 03/02/2020 03:42:19
Does anyone know the mass of a darwin-op3 in Webots?

##### David Mansolino [Cyberbotics] 03/02/2020 06:30:01
Hi `@jinu061353`, the total mass of the darwin-op3 is ~3.1 kg. You can easily see this in Webots by selecting the robot node and then the 'mass' node in the field/node editor: [https://cyberbotics.com/doc/guide/the-scene-tree#field-editor](https://cyberbotics.com/doc/guide/the-scene-tree#field-editor)


`@LaCava` This is indeed the simplest solution 🙂


`@asphyxia` what do you mean by `tick()` are you refeering to `wb_robot_step()` ? If this is the case, may I ask you to open a bug report (including a sample controller) here: [https://github.com/cyberbotics/webots](https://github.com/cyberbotics/webots)

Thank you.


`@Deep` have you tried with 'webots@cyberbotics.com' as email and 'webots' as password?

##### asphyxia 03/02/2020 06:32:29
sorry, yes I meant `step()`, idk what I was thinking lol. I'll file an issue soon

##### David Mansolino [Cyberbotics] 03/02/2020 06:33:52
`@sun` here is an example of omnidirectionnal wheel robot: [https://cyberbotics.com/doc/guide/robotino3](https://cyberbotics.com/doc/guide/robotino3)

The key point is to define an assymatric friction in the Worldinfo.contactproperties field: [https://cyberbotics.com/doc/guide/robotino3#sample](https://cyberbotics.com/doc/guide/robotino3#sample)


`@asphyxia` thank you.


`@User21` goal\_handle is a handle to the current target trajectory received. The last if should indeed be raised when the robot reaches the target position. Maybe the tolerance is to small, you may reduce the tolerance sent to the `within_tolerance` function. You may also print the difference between curent and target position to check what is hapenning exactly.

##### Olivier Michel [Cyberbotics] 03/02/2020 07:56:51
`@Deep`: Be sure to use a version of Webots that works with this "webots" password, e.g., Webots 8.4.0 for example.

##### User21 03/02/2020 08:22:34
`@David Mansolino` i will try thanks!

##### David Mansolino [Cyberbotics] 03/02/2020 08:37:35
You're welcome

##### User21 03/02/2020 09:59:14
`@David Mansolino` its not the tolerance


i notice that the last else function never gets called after the trajectory is executed

##### David Mansolino [Cyberbotics] 03/02/2020 10:05:15
can you identify in which if it remains stuck then?

##### User21 03/02/2020 10:06:24
yea in elif not self.last\_point\_sent

##### David Mansolino [Cyberbotics] 03/02/2020 10:07:26
Ok, it makes sense, can you try with this version: [https://gist.github.com/DavidMansolino/b082c7d9670a84f99e2a0af284e1e2c8](https://gist.github.com/DavidMansolino/b082c7d9670a84f99e2a0af284e1e2c8)

##### User21 03/02/2020 10:14:01
Okay, i tried it. The simulation stopps itself now after it executet the trajectory. The elif not self.last\_point\_sent is the last thing getting called

##### David Mansolino [Cyberbotics] 03/02/2020 10:15:50
It nevers go in the last else with the tolerance?

##### User21 03/02/2020 10:16:58
yea exactly

##### David Mansolino [Cyberbotics] 03/02/2020 10:18:34
That's very strange. May I ask you to fill a bug report here: [https://github.com/cyberbotics/webots/issues/new?template=bug\_report.md](https://github.com/cyberbotics/webots/issues/new?template=bug_report.md)

I check if I can reproduce the problem and try to fix it whenever I will have some free time.

##### User21 03/02/2020 10:19:34
okay

##### David Mansolino [Cyberbotics] 03/02/2020 10:19:44
Thank you.

##### User21 03/02/2020 10:19:52
No Problem

##### Axel M 03/02/2020 10:32:29
What's the difference between a SFNode and a MFNode ?

##### David Mansolino [Cyberbotics] 03/02/2020 10:33:40
SFNode stands for Single Field Node and MFNode stands for Multiple Field Node.

Therefore, SFNode allows to insert one single node, whereas MFNode allows to import as many nodes as you want.

##### Axel M 03/02/2020 10:33:53
Thanks 🙂

##### David Mansolino [Cyberbotics] 03/02/2020 10:34:04
You're welcome

##### Luiz Felipe 03/02/2020 10:39:10
Anyone tried to created an executable from a supervisor coded in python using pyinstaller to run in webots? When I run the generated executable I get the "ImportError: no module named controller"... I think it cannot bundle the webots controller that contains the Supervisor class when it is generating the executable...

##### David Mansolino [Cyberbotics] 03/02/2020 10:42:53
I am not familliar with pyinstaller, btu you should probably make sure that the correct environment variables are set, e.g.: [https://cyberbotics.com/doc/guide/running-extern-robot-controllers?tab-os=linux&tab-language=python#environment-variables](https://cyberbotics.com/doc/guide/running-extern-robot-controllers?tab-os=linux&tab-language=python#environment-variables)

##### Luiz Felipe 03/02/2020 11:13:32
I tried to set the environment variables but the error persists... I think the solution is related to this issue though, tomorrow I will try again. Thanks `@David Mansolino`

##### Deep 03/02/2020 11:36:25
> `@Deep` have you tried with 'webots@cyberbotics.com' as email and 'webots' as password?

`@David Mansolino` Yes, using "webots" as passwords progresses the program to a dialog where it state that "whatever email" has no license.

I'v tried webots@cyberbotics.com, makes no change.

And I'm trying to launch webots for nao.

##### David Mansolino [Cyberbotics] 03/02/2020 11:37:50
> `@Deep`: Be sure to use a version of Webots that works with this "webots" password, e.g., Webots 8.4.0 for example.

`@Olivier Michel`

##### l\_eslam\_l 03/02/2020 12:28:41
Hello guys

I've started learning webots a few weeks ago and I've gone through its tutorials and user guide quite extensively. I'm trying working with ROS

but when I run the following command in a terminal window:

roslaunch webots\_ros pioneer3at.launch 

from this tutorial page: [http://wiki.ros.org/webots\_ros/Tutorials/Sample%20Simulations](http://wiki.ros.org/webots_ros/Tutorials/Sample%20Simulations)


it actually launches Webots but it gives me this error



%figure
![Screenshot_from_2020-03-02_14-12-24.png](https://cdn.discordapp.com/attachments/565154703139405824/684014526093459511/Screenshot_from_2020-03-02_14-12-24.png)
%end



%figure
![Screenshot_from_2020-03-02_14-12-48.png](https://cdn.discordapp.com/attachments/565154703139405824/684014540454756362/Screenshot_from_2020-03-02_14-12-48.png)
%end


I don't know what other node is running, I didn't run any other nodes, just this roslaunch command!


Please help 🙂

##### David Mansolino [Cyberbotics] 03/02/2020 13:06:46
Hi `@l_eslam_l`, Welcome!

About your issue, how did you instal the ros nodes? From the package (apt) or from sources?

##### l\_eslam\_l 03/02/2020 13:07:39
`@David Mansolino` 

I actually tried both methods, and both methods gave me the exact same error

##### David Mansolino [Cyberbotics] 03/02/2020 13:07:54
ok, let me try

##### l\_eslam\_l 03/02/2020 13:08:01
ok

##### David Mansolino [Cyberbotics] 03/02/2020 13:14:35
I just tried and it is working fine for me. Can you maybe try with another example (such as `roslaunch webots_ros e_puck_line.launch`)?


Which version of ROS are you using?

##### l\_eslam\_l 03/02/2020 13:26:27
Yeah I tried all the other examples and they're all working fine

I'm using melodic


I tried the pioneer example because it is so related to my project

##### David Mansolino [Cyberbotics] 03/02/2020 13:28:54
Ok, it's a good news that the other nodes are working.

##### l\_eslam\_l 03/02/2020 13:29:47
The complete test has similar errors too!

##### David Mansolino [Cyberbotics] 03/02/2020 13:30:17
In that case you should probably try runnign this example without the launch file. you can launch manually with this porocedure:

  - start roscore.

  - open Webots and open the 'projects/languages/ros/worlds/pioneer3at.wb' world.

  - launch the `pioneer3at` node from the `webots_ros` package.

##### l\_eslam\_l 03/02/2020 13:30:57
For these errors, there are no corresponding errors on the terminal screen, just webots console
%figure
![Screenshot_from_2020-03-02_15-30-25.png](https://cdn.discordapp.com/attachments/565154703139405824/684029985560068116/Screenshot_from_2020-03-02_15-30-25.png)
%end


> In that case you should probably try runnign this example without the launch file. you can launch manually with this porocedure:

>   - start roscore.

>   - open Webots and open the 'projects/languages/ros/worlds/pioneer3at.wb' world.

>   - launch the `pioneer3at` node from the `webots_ros` package.

Ok I'll try that

`@David Mansolino`

##### David Mansolino [Cyberbotics] 03/02/2020 13:33:01
> For these errors, there are no corresponding errors on the terminal screen, just webots console

`@l_eslam_l` 

those one looks normal, this is just a test that test all the Webots fucntionalities and make sure they works fine.

##### l\_eslam\_l 03/02/2020 13:38:24
Wow, it's working now, I followed the your steps
%figure
![Screenshot_from_2020-03-02_15-37-47.png](https://cdn.discordapp.com/attachments/565154703139405824/684031859272843268/Screenshot_from_2020-03-02_15-37-47.png)
%end


`@David Mansolino` Thanks a lot 🙂

##### David Mansolino [Cyberbotics] 03/02/2020 13:38:54
Perfect! it's strange because these are the steps followed by the launch file too.


You're welcome 🙂

##### l\_eslam\_l 03/02/2020 13:40:03
> Perfect! it's strange because these are the steps followed by the launch file too.

`@David Mansolino` Yeah it's so strange to me too haha

##### Deep 03/02/2020 14:25:56
`@David Mansolino` I'm usin *webots for Nao*, version 8.2.1 and it was downloaded from softbank's website. Appears to be the only version ever made for nao.
%figure
![New_Bitmap_Image.bmp](https://cdn.discordapp.com/attachments/565154703139405824/684043823063760928/New_Bitmap_Image.bmp)
%end



%figure
![New_Bitmap_Image.png](https://cdn.discordapp.com/attachments/565154703139405824/684044038604587011/New_Bitmap_Image.png)
%end

##### David Mansolino [Cyberbotics] 03/02/2020 14:29:10
`@Deep` you can get more recent version here: [https://github.com/cyberbotics/webots/releases/tag/R2019a](https://github.com/cyberbotics/webots/releases/tag/R2019a)

Nao is supported out of the box in Webots up to version 8.4.0

##### Deep 03/02/2020 14:38:42
`@David Mansolino` I will have a look. If I'm not back that means it worked.

Thank you for your help dear 🥳


`@David Mansolino` The program now works! But I still need a tiny winy bit of help if possible.

The 8.40 is not supportive of naoqi to work with softbank's softwere (8.2.1 was supportive but is not launching! due to a license requirement)



I found this on cyberbotic's git:

[https://github.com/cyberbotics/naoqisim](https://github.com/cyberbotics/naoqisim)



I followed instructions but msys2's console is not recognizing the command "make" and the .sln file won't complie on my visual studio since it is missing h files "alnaosim.h"

"alrobotmodel.h"



Any idea?

Thanks for the patience.

##### David Mansolino [Cyberbotics] 03/03/2020 06:56:55
`@Deep` here are some instructions about how to setup the msys2 console: [https://github.com/cyberbotics/webots/wiki/Windows-installation](https://github.com/cyberbotics/webots/wiki/Windows-installation)

##### Luiz Felipe 03/03/2020 06:59:09
> I tried to set the environment variables but the error persists... I think the solution is related to this issue though, tomorrow I will try again. Thanks `@David Mansolino`

`@Luiz Felipe` The error was related, but the PYTHONPATH should be set directly in pyinstaller. So the command should be


pyinstaller --paths PYTHONPATH(/usr/local/webots/lib/python3X) supervisor.py


just sending to let you know `@David Mansolino`

##### David Mansolino [Cyberbotics] 03/03/2020 07:01:36
Good to know, thank you for the feeback!

##### Cohen 03/03/2020 14:41:28
hi, i'm trying to create a new HTML window for a robot, but i only have generic or generic\_window


in the sample file custom/html\_robot\_window there a a few other choice but i can't find then anywhere i looked


do someone have any hints


thanks in advance

##### David Mansolino [Cyberbotics] 03/03/2020 14:45:12
Hi `@Cohen` the choice is computed automatically depending on the robot-window found in the `plugins/robot_windows` folder of your project. You may also find some interesting information here: 

[https://www.cyberbotics.com/doc/guide/controller-plugin#robot-window](https://www.cyberbotics.com/doc/guide/controller-plugin#robot-window)

##### Cohen 03/03/2020 14:46:02
ok, no menu to add it, just prepare the file and it's up and running then ?

##### David Mansolino [Cyberbotics] 03/03/2020 14:46:49
Yes, once you have created and compiled the robot window, you should be able to select it from the `window` field o your robot.

##### Cohen 03/03/2020 14:47:11
ok let's try it thx

##### David Mansolino [Cyberbotics] 03/03/2020 14:47:21
You're wlecome

##### User21 03/03/2020 14:48:17
`@David Mansolino` Thank you for fixing the issues with ROS!

##### David Mansolino [Cyberbotics] 03/03/2020 14:51:02
You're welcome, I hope it will help.

##### User21 03/03/2020 16:14:57
`@David Mansolino` Thanks to your changes launching multiple nodes to publish my Jointstates is working perfect. I only have one Problem: the action server wont get info from the move\_it node if im adding the nodeName to my initialisation from ther actionserver. Am i just missing something?

##### David Mansolino [Cyberbotics] 03/03/2020 16:17:12
`@User21` probably that this launch file should be updated:

```
roslaunch ur5_moveit_config ur5_moveit_planning_execution.launch
```

But this launch file is unfotunately not owned by us, you should probably create a local copy of it and modify it


For example this line does not take the node name into account: 

[https://github.com/ros-industrial/universal\_robot/blob/06d8b9e2f5f86aa54f9f2845f11edbc84e2f951e/ur5\_moveit\_config/launch/ur5\_moveit\_planning\_execution.launch#L7](https://github.com/ros-industrial/universal_robot/blob/06d8b9e2f5f86aa54f9f2845f11edbc84e2f951e/ur5_moveit_config/launch/ur5_moveit_planning_execution.launch#L7)

##### User21 03/03/2020 16:19:15
yea i see thanks so much!

##### David Mansolino [Cyberbotics] 03/03/2020 16:19:22
You're welcome

##### Axel M 03/03/2020 17:22:15
Is there a way to import a node from a PROTO ? wb\_supervisor\_field\_import\_mf\_node only references import of `.wbo` defined nodes

##### User21 03/03/2020 18:13:01
`@David Mansolino` It works! The only Problem is, moving them at the same time. sometime it works sometimes not 😄 i think the problem is now more a MoveIt Problem then a Webots so thanks!

##### Massimo Sirigu 03/03/2020 18:23:23
hello, I had a problem with protos.


the problem is that this error message occurs:                                                             

 ERROR: Skipped unknown 'myprotoname' node or PROTO.                                                  

this message appears when I load the project or cut and paste the object. but I'm able to instantiate it and see it. what can it be the problem?

##### David Mansolino [Cyberbotics] 03/04/2020 06:46:44
Hi `@Axel M` yes of course, you cn use the `wb_supervisor_field_import_sf_node_from_string` to import any node:

```
wb_supervisor_field_import_sf_node_from_string("MyProto { translation 0 1 1 }");
```


`@User21` perfect, thanks again fo r the feedback!

You are right, the next steps are more on the MoveIt side than Webots, but I am sure you can get help for this in the ROS community.


`@Massimo Sirigu` Hi, where is located the file ``myprotoname.proto`` ? Would you agree sharing it with us?

##### Axel M 03/04/2020 09:13:29
Thanks `@David Mansolino` 🙂

##### SimonDK 03/04/2020 10:05:18
We are looking at modeling the RG2 gripper ([https://onrobot.com/en/products/rg2-gripper](https://onrobot.com/en/products/rg2-gripper)). Are we so lucky that anyone already did this? 🙂 Any recommendations for modeling this kind of tool?


Small video to show how the RG2 moves: [https://youtu.be/v2vY7YfXHYE](https://youtu.be/v2vY7YfXHYE)

Is it possible to model this, I guess it is quite similar to the Schunk three-finger gripper?

##### David Mansolino [Cyberbotics] 03/04/2020 10:24:55
I don't know any model of this gripper in Webots yet. But it is for sure feasible to model such kind of gripper in Webots, it is indeed similar to [https://cyberbotics.com/doc/guide/gripper-actuators#robotiq-3f-gripper](https://cyberbotics.com/doc/guide/gripper-actuators#robotiq-3f-gripper)

Maybe you can find an URDF model and use the importer: [https://github.com/cyberbotics/urdf2webots](https://github.com/cyberbotics/urdf2webots)

##### Mr J 03/04/2020 10:58:39
Hi, i have a controller that runs a simulation then resets using supervisor.simulationReset() , then changes some variables before running again . This repeats a fair few times but each time the simulation takes longer and longer to reset. Is there any way to remedy this?

##### David Mansolino [Cyberbotics] 03/04/2020 12:43:20
Hi, `@Mr J` this should in theory not be the case, are you adding some node while the simulation it running from your supervisor or something similar?

##### SimonDK 03/04/2020 12:45:20
Great, thank you very much `@David Mansolino` , forgot about the URDF importer, will see if I can find a URDF model of the gripper. If I do not want to simulate the physics behind grasping, can I cheat and attache the object to the gripper with a fixed joint or something?

##### David Mansolino [Cyberbotics] 03/04/2020 12:46:37
Yes of course, you can either put the object directly as a child node of the gripper for creatign a fix joint or use connector nodes: [https://cyberbotics.com/doc/reference/connector](https://cyberbotics.com/doc/reference/connector)

##### SimonDK 03/04/2020 12:47:52
Great, you are a lifesaver 😀

##### David Mansolino [Cyberbotics] 03/04/2020 12:48:29
You're welcome 😉

##### Mr J 03/04/2020 12:57:07
i made another controller just to be sure, this other controller is  just this:from controller import Supervisor



\# create the Robot instance.

supervisor = Supervisor()



timestep = 640





while supervisor.step(timestep) != -1:

    

    supervisor.simulationRes()


discord messed the formating of it but its got no errors and the simulation takes longer and longer to reset even though the only thing im doing is resetting, any ideas?

##### David Mansolino [Cyberbotics] 03/04/2020 12:58:14
Thank you, I will try it

##### Mr J 03/04/2020 12:58:48
accidently deleted some from the end of supervisor.SimulationReset() when copying over


but other than that its exactly what ive got


also im using the sony Aibo robot if that helps

##### User21 03/04/2020 13:25:47
`@David Mansolino` i have another question to the updated trajectory follower 

how can i get the information that my goal succeded. I tried thorught the action client but i cant get the result with just the get\_result commande

##### David Mansolino [Cyberbotics] 03/04/2020 13:27:17
`@Mr J` I can indeed reproduce the issue you are mentioning thank to your controller, it seems the problem is on the Webots side, I did open an issue about this and we will try to fix this for the next release of Webots: [https://github.com/cyberbotics/webots/issues/1432](https://github.com/cyberbotics/webots/issues/1432)


`@User21` I am sorry but I have no idea, but I am sure this is feasible because RVIZ is able to detect it (when used with this example: [https://github.com/cyberbotics/webots/blob/master/projects/robots/universal\_robots/resources/ros\_package/ur\_e\_webots/README.md#usage](https://github.com/cyberbotics/webots/blob/master/projects/robots/universal_robots/resources/ros_package/ur_e_webots/README.md#usage) )

##### User21 03/04/2020 13:30:23
`@David Mansolino` okay

##### Mr J 03/04/2020 13:39:57
`@David Mansolino` ill look forward to it, thanks for your help

##### David Mansolino [Cyberbotics] 03/04/2020 13:45:31
You're welcome, thank you for the precise bug report

##### Mr J 03/04/2020 14:18:47
is there an estimation on when the next release will be?

##### David Mansolino [Cyberbotics] 03/04/2020 15:09:30
Unfortunately, the next release is not planned yet, but as soon as it will be fixed you will be able to use the beta nightly releases including the patch.

##### Mr J 03/04/2020 15:46:39
ok, whats the best way to know when its been fixed?

##### David Mansolino [Cyberbotics] 03/04/2020 15:47:41
The best way is to fix it yourself 😂 

Otherwise, we will try to make our best but to fix it as soon as possible, but we have other urgent things to do in parallel

##### Olivier Michel [Cyberbotics] 03/04/2020 15:53:54
You can subscribe to the notifications on the issue [https://github.com/cyberbotics/webots/issues/1432](https://github.com/cyberbotics/webots/issues/1432) to get notified when it is closed or when some news are available about it.

##### Axel M 03/05/2020 09:05:36
Hi, do you recommend to version `.wbproj` files ?

##### Olivier Michel [Cyberbotics] 03/05/2020 09:05:52
Hi, yes, we do.


Because they include (among other things) the window layout in Webots and this is subject to change with versions.

##### lench 03/05/2020 13:53:27
Hi! I want to control Pedestrian with Joystick in Webots. Can somebody help me with the controller code? It should be done in python and ros. Thank you in advance!

##### coderrr 03/05/2020 14:12:34
Hello, Whenever I check the box and make supervisor = True for e-puck, webot starts to not responding

Is there any other way to getPosition for e-puck? as it does not have touch sensor and the supervisor approach is not working for E-puck.

##### ptrepag 03/05/2020 15:10:59
I am attempting to use Webots to simulate a robot for our First Tech Challenge student team.  Our robot has Mecanum wheels, and I am having a tough time trying to figure out how to rip the wheels out of the Kuka Youbot and get them into another robot.  Has anyone successfully used Mecanum wheels in a separate robot?

##### kevinW 03/06/2020 04:07:48
Hello everyone, I am doing Machine Learning on Webots, and have already made my custom robot, and my neural network. I just need to figure out how to reset the Robot..... I am using python, and the function: simulationReset() just crashes the whole program.   Next, I tried resetting all the positions, but the function setMFRotation(...) takes an index, and if I tried working with it, but failed. (i have 30 rotational motors).... Why is resetting the robot so complex?

##### Olivier Michel [Cyberbotics] 03/06/2020 07:44:00
`@lench`: I would recommend to have a look at our pedestrian simulation in Webots/projects/humans/pedestrian/worlds/pedestrian.wbt. It's a Python controller, but doesn't use ROS. It shouldn't be difficult however to control it from ROS.


`@coderrr`: Making the e-puck a supervisor should work. Did you try to save and restart Webots? Otherwise, you can add a GPS device to the e-puck to retrieve its position.


`@ptrepag`: when importing the Mecanum wheels from the Kuka youBot, you should copy the WorldInfo node as it includes important parameters allowing the Mecanum wheels to work properly, in particular the ContactProperties.


`@kevinW`: simulationReset should not crash Webots. If it does, please fill in a bug report on [https://github.com/cyberbotics/webots/issues/new?template=bug\_report.md](https://github.com/cyberbotics/webots/issues/new?template=bug_report.md) with all the details allowing us to reproduce the crash.


`@elkelkmuh`: the gait manager controls the movements of the legs and the arms as well, so, you cannot move the arms while the robot is walking with the gait manager.  You should stop the gait manager to move the arms.


`@elkelkmuh`: you should call gaitManager.step() in a conditional test: when you want to move the arms, don't call it and when you want the robot to walk, call it.


```c++
bool move_arms;
[...]
if (move_arms) {
  // control the arm movement
} else 
  gaitManager.step(basicTimeStep);
```

##### kimkim 03/06/2020 09:38:32
On mac, I want to find webot library for import this path with pycharm. Would you help me how to?

##### Olivier Michel [Cyberbotics] 03/06/2020 09:42:09
Please follow instructions here: [https://cyberbotics.com/doc/guide/using-your-ide#pycharm](https://cyberbotics.com/doc/guide/using-your-ide#pycharm)

##### ptrepag 03/06/2020 13:40:19
`@Olivier Michel` thank you for the pointer on the WorldInfo node.  I was wondering where the special friction came from.  I am still very new to Webots, so I have some dumb questions.  If I want to resize the wheels, do I just change the size of the Cylinder bounding object?  Or do I also need to apply a sizing transformation elsewhere?

##### Olivier Michel [Cyberbotics] 03/06/2020 13:49:40
This special friction is needed to simulate the asymmetric friction of the Mecanum wheels. See the documentation here: [https://www.cyberbotics.com/doc/reference/contactproperties](https://www.cyberbotics.com/doc/reference/contactproperties)


You should probably resize sub-wheels as well.

##### Axel M 03/06/2020 15:03:20
Hi,

Can a supervisor controller change WorldInfo.gpsReference during the runtime, and if so, will the change be effective ?

##### Olivier Michel [Cyberbotics] 03/06/2020 15:08:14
It can certainly change it. Not sure if the change will be effective. You should try and let us know 😉

##### Axel M 03/06/2020 15:08:38
I'm gonna try, thanks 🙂


It's working as expected

##### Olivier Michel [Cyberbotics] 03/06/2020 15:55:31
Cool. Thank for the feedback!

##### mero 03/06/2020 16:05:27
Hello, I am trying to get the current position of the joints in the hand of the tiago titanium after moving it. I tried using the wb\_position\_sensor\_enable() for all the joints in a loop but it gives me an error of invalid device tag.

##### Olivier Michel [Cyberbotics] 03/06/2020 16:07:07
This is because your device tag is not properly initialized. You probably used a wrong name?

##### mero 03/06/2020 16:09:25
I used the names given in the webots sample for the tiago and initialized the device tags first.  This is the code:   for (int i = 0; i < N\_PARTS; i++) {

    robot\_parts[i] = wb\_robot\_get\_device(names[i]);

    wb\_motor\_set\_velocity(robot\_parts[i], wb\_motor\_get\_max\_velocity(robot\_parts[i])/2.0);

    wb\_position\_sensor\_enable(robot\_parts[i], 64);

  }

##### Olivier Michel [Cyberbotics] 03/06/2020 16:10:12
The position sensors are different devices from the motors. They have a different name as well.

##### mero 03/06/2020 16:10:39
from where can i get their names?

##### Olivier Michel [Cyberbotics] 03/06/2020 16:10:49
From the proto files.


Look for example into webots/projects/robots/pal\_robotics/tiago\_extensions/protos/TiagoFrontArm.proto


And you will see that a motor is named "arm\_1\_joint" and the corresponding position sensor is named "arm\_1\_joint\_sensor".


You should be able to see this from the robot window if you double-click on the Tiago robot in Webots and then display the position sensors.

##### mero 03/06/2020 16:13:25
ahhh okay great thank you very much.

##### Olivier Michel [Cyberbotics] 03/06/2020 16:14:50
You are welcome.

##### Lussfer 03/06/2020 16:38:07
Hello, getting following error when trying to use webots with ROS, i have added python to the path variable as well as updated the ini file. any input is appreciated :)
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/685526638058012690/unknown.png)
%end

##### Olivier Michel [Cyberbotics] 03/06/2020 16:39:00
On which operating system are you?


Linux?

##### Lussfer 03/06/2020 16:39:21
linux 18.4


working with ros melodic

##### Olivier Michel [Cyberbotics] 03/06/2020 16:40:10
From the same Terminal in which you started Webots, can you type "python -V -V" to check it?

##### Lussfer 03/06/2020 16:42:19
got "Python 2.7.17" as a result

##### Olivier Michel [Cyberbotics] 03/06/2020 16:43:12
I believe you should use the latest nightly build of Webots as we recently fixed a bug affecting some ROS versions. See [https://github.com/cyberbotics/webots/pull/1426](https://github.com/cyberbotics/webots/pull/1426) for details.


You can download it from here: [https://github.com/cyberbotics/webots/releases](https://github.com/cyberbotics/webots/releases)

##### Lussfer 03/06/2020 16:45:07
i will check it out, thank you

##### Olivier Michel [Cyberbotics] 03/06/2020 16:45:30
You are welcome.

##### ptrepag 03/06/2020 23:43:52
`@Olivier Michel` thank you very much for your help.

##### Deep 03/08/2020 13:45:12
Hey guys. I compiled a control for nao with naoqi enabled thanks to the help of one of the people here, and it connects to the required software as it should.



I am now facing a small need. I am trying to a send a tiny object recognition database to the virtual robot(Through naoqi). It seems that when I try to do so I'm getting an error that perhaps there is no memory left on the robot. And the connection with the robot is closed. I was wondering if anyone may have a tip as to how I could solve this issue.

##### Soheil 03/08/2020 15:09:40
I have a humanoid robot which is something like a modified version of robotis op3. When I change its rotation, the robot surprisingly happens to face ridiculous problems. For example, its joints start to take apart or merge into each other. Does anyone has any idea about this?

##### Kormit 03/08/2020 20:38:25
When ever I open the velocity tab in the hierarchy window of a solid node with no physics node (NULL), webots crashes.

##### Stefania Pedrazzi [Cyberbotics] 03/09/2020 07:06:55
`@Kormit` could you please write a bug report in GitHub and provide a sample world where you can reproduce this crash? [https://github.com/cyberbotics/webots/issues/new/choose](https://github.com/cyberbotics/webots/issues/new/choose) I checked a couple of worlds on Linux with the latest Webots version but everything works fine for me


`@Soheil` how do you change the rotation of the robot? Usually when changing the position or rotation of a robot from the controller program it is recommended to reset the physics to avoid this kind of issues (see [https://www.cyberbotics.com/doc/reference/supervisor#wb\_supervisor\_node\_reset\_physics](https://www.cyberbotics.com/doc/reference/supervisor#wb_supervisor_node_reset_physics))

##### soheil 03/09/2020 07:21:11
`@Stefania Pedrazzi` Firstly Thanks for your answer. I found out that was because the vector (x, y, z) was not unit length. That should not be forgotten. And I do reset the node physics. But this problem will happen in a long run(for example 1000 times of changing the rotation)  despite it is really less than the last case. How do you think I can handle it?

##### Olivier Michel [Cyberbotics] 03/09/2020 07:48:45
`@Deep`: your question seems to be specific to naoqi and not to Webots. I am sorry I won't be able to help you. You should maybe ask to naoqi experts instead, maybe SoftBank robotics support?

##### Stefania Pedrazzi [Cyberbotics] 03/09/2020 08:57:48
`@soheil` good to know! I will check the unit vector issue and improve the documentation if needed.

Maybe you could try to reset the whole simulation after many robot moves ([https://www.cyberbotics.com/doc/reference/supervisor#wb\_supervisor\_simulation\_reset\_physics](https://www.cyberbotics.com/doc/reference/supervisor#wb_supervisor_simulation_reset_physics)).

##### yash 03/09/2020 09:54:54
My robot consists of different solid nodes.......therefore after enabling the physics mode should have to provide the parameters such as mass,density etc of all the solid nodes or


just provide the parameters to the main robot node


as you can see the physics mode enabled under the main robot node ....so should I just specify the parameters in that or also to the physics node under solid nodes present in its children
%figure
![Capture.PNG](https://cdn.discordapp.com/attachments/565154703139405824/686513841403854917/Capture.PNG)
%end

##### Stefania Pedrazzi [Cyberbotics] 03/09/2020 10:07:13
`@yash` yes, each Solid node in your model represents a real part of your robot, so it has a mass or density and specific physics properties that you should specify to build a realisitc model. Here is the documentation of the Physics nodes: [https://cyberbotics.com/doc/reference/physics#how-to-use-physics-nodes](https://cyberbotics.com/doc/reference/physics#how-to-use-physics-nodes). 

If you don't need to specify the physics properties of a Solid node, then it could be that you don't need to use a Solid node, but maybe it could be replaced by a Group or Transform node.

##### yash 03/09/2020 10:12:47
`@Stefania Pedrazzi`  thanks for the information

##### jinu061353 03/09/2020 10:39:53
Is there an example of motor control using torque?


I want to measure the torque applied to the motor in this situation.
> **Attachment**: [bandicam\_2020-03-08\_13-11-55-245.mp4](https://cdn.discordapp.com/attachments/565154703139405824/686524026729791504/bandicam_2020-03-08_13-11-55-245.mp4)

##### Gautier 03/09/2020 10:46:12
Hey ! I'm currently working on the bounding box of a robot. How do you make sure that the robot doesn't collide with itself when the bounding box of the different joints are a little bit overlaped ?

##### jinu061353 03/09/2020 10:48:01

%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/686525696616431646/unknown.png)
%end

##### Gautier 03/09/2020 10:48:40
For example, here's the bounding box of the Universal Robot URE5e, 2 joints collides at the beginning



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/686525900304547860/unknown.png)
%end


but the self collision is enabled
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/686525978520059904/unknown.png)
%end

##### Olivier Michel [Cyberbotics] 03/09/2020 10:49:15
`@Gautier`: there no collision detection for consecutive joints.


Also, collision detection can be disabled from within the same robot by setting Robot.selfCollision to FALSE.


(default value)

##### Gautier 03/09/2020 10:50:37
`@Olivier Michel` Understood, thank you a lot !

##### Olivier Michel [Cyberbotics] 03/09/2020 10:54:51
`@jinu061353`: check webots/projects/samples/devices/controllers/motor/motor.c for example.

##### User21 03/09/2020 10:58:42
Hi there,

im having 2 Robots. One Ur5e and a Pioneer 3Dx. The Pioneer should move to the Ur5e and wait till the Ur5e grabs an object and place it on the Pioneer. Can i access my Ur5e Controller from my Pioneer Controller to get Feedback if my Ur5e reached his goal?

##### Stefania Pedrazzi [Cyberbotics] 03/09/2020 11:00:49
Hi`@User21`, the controller programs are independent. You can use the Emitter/Receiver nodes to communicate between the Ur5e controller and the Pioneer controller.

##### Deep 03/09/2020 11:02:15
`@Olivier Michel` I understand that, I just wondered if there are similar things such as that with other robots.



Anyway. I'd like to ask something else.

It seems like the simulation is not 100% the same every run.

There are different mechanical error each run. Is that intended?

Is running under "real time" mode would make it more consistent?

Any other tip?

Thanks

##### User21 03/09/2020 11:02:39
`@Stefania Pedrazzi` okay thank you

##### Olivier Michel [Cyberbotics] 03/09/2020 11:08:13
`@Deep`: Webots simulation are 100% reproducible if the controller programs are synchronous and deterministic. In case of use with naoqi, the non-reproducibility comes likely from naoqi and also from the fact that the naoqisim controller may be asynchronous (if Nao.synchonization = FALSE). See explanation here: [https://cyberbotics.com/doc/reference/robot#field-summary](https://cyberbotics.com/doc/reference/robot#field-summary)


See [https://github.com/cyberbotics/naoqisim/blob/master/worlds/naoqisim.wbt#L44](https://github.com/cyberbotics/naoqisim/blob/master/worlds/naoqisim.wbt#L44)

##### Deep 03/09/2020 11:12:15
Thanks olivers

##### kimkim 03/10/2020 08:02:12
Hi, I have problem with using pycharm for webot controller these days, if some can give me help, it would be appreciated.



%figure
![Screenshot_2020-03-10_at_09.00.57.png](https://cdn.discordapp.com/attachments/565154703139405824/686846393888800788/Screenshot_2020-03-10_at_09.00.57.png)
%end


[https://cyberbotics.com/doc/guide/using-your-ide?tab-language=python](https://cyberbotics.com/doc/guide/using-your-ide?tab-language=python)


I have followed this guide, but error occured.

##### Stefania Pedrazzi [Cyberbotics] 03/10/2020 08:07:05
Hi `@kimkim` , just looking at the screenshot you posted there is a mismatch between the python versions (you run python 3.8  but you link to python 3.7).

Did you try to link to the `WEBOTS_HOME/lib/controller/python38` folder instead of `WEBOTS_HOME/lib/controller/python37` (and make sure that the folder exists)?

##### kimkim 03/10/2020 08:08:00

%figure
![Screenshot_2020-03-10_at_09.07.47.png](https://cdn.discordapp.com/attachments/565154703139405824/686847817070673930/Screenshot_2020-03-10_at_09.07.47.png)
%end


Thank you. I tried with python37 version, but same problem..



%figure
![Screenshot_2020-03-10_at_09.08.28.png](https://cdn.discordapp.com/attachments/565154703139405824/686847982389428234/Screenshot_2020-03-10_at_09.08.28.png)
%end


the code is from tutorial 1 at Webot website.


And My computer is mac.



%figure
![Screenshot_2020-03-10_at_09.09.16.png](https://cdn.discordapp.com/attachments/565154703139405824/686848176569057330/Screenshot_2020-03-10_at_09.09.16.png)
%end

##### Stefania Pedrazzi [Cyberbotics] 03/10/2020 08:11:15
i would suggest you first to check that all the reported resources exist and the paths are correct (for example the `Library/Frameworks/Python.framework/Versions/3.7/Python` and the Webots `_controller.so` path)

##### kimkim 03/10/2020 08:13:55
you are right.. I already checked the pre - reported resources, but I could not find exact fit to me.

##### Stefania Pedrazzi [Cyberbotics] 03/10/2020 08:15:05
what do you mean? that the path doesn't exist?

##### kimkim 03/10/2020 08:17:46
I ready add the path below with error message, but still same error occured.


PYTHONUNBUFFERED=1;DYLD\_LIBRARY\_PATH=/Applications/Webots.app/lib; DYLD\_LIBRARY\_PATH=/Applications/Webots.app/lib/controller/python37/\_controller.so

##### Stefania Pedrazzi [Cyberbotics] 03/10/2020 08:20:38
This should not be needed. The error message says that `Library/Frameworks/Python.framework/Versions/3.7/Python` image is not found, not `_controller.so`.

##### kimkim 03/10/2020 08:21:21
DYLD\_LIBRARY\_PATH=/Library/Frameworks/Python.framework/Versions/3.7/Python


I added this path. but same problem

##### Stefania Pedrazzi [Cyberbotics] 03/10/2020 08:24:14
does this path exist?


it seems like you have some issues with the Python 3.7 installation. Maybe you should try to reinstall it

##### kimkim 03/10/2020 08:56:16
thank you. I will reinstall and will update if it works! 😀

##### alsk 03/11/2020 08:41:42
Hello , I have a question about the Refence manual 🙂 Why should  the motor force(torque) switch off?



%figure
![torque_control.PNG](https://cdn.discordapp.com/attachments/565154703139405824/687218716370272286/torque_control.PNG)
%end

##### Olivier Michel [Cyberbotics] 03/11/2020 08:44:17
Hi, that's an error in the documentation. We should remove the end of this sentence.

##### alsk 03/11/2020 08:44:53
Oh, Thank you!:)

##### Olivier Michel [Cyberbotics] 03/11/2020 08:46:49
Done here: [https://github.com/cyberbotics/webots/pull/1447](https://github.com/cyberbotics/webots/pull/1447)

##### alsk 03/11/2020 08:47:43
Okay!

##### Olivier Michel [Cyberbotics] 03/11/2020 08:52:13
It should fixed online now.

##### taeyoung 03/11/2020 10:07:04
I'm trying to upgrade my webots in ubuntu 16.04. But removing using ubuntu software does not work. just deleting the webots folder in \usr\local is enough for a complete uninstall?

##### David Mansolino [Cyberbotics] 03/11/2020 10:07:50
That's indeed probably enough, but what is the issue you get when uninstalling normally ?

##### taeyoung 03/11/2020 10:10:58
When I click Remove or Launch using the Ubuntu Software nothing happens. Even to open the simulator, I just use the terminal with the command 'webots'

##### Stefania Pedrazzi [Cyberbotics] 03/11/2020 10:13:30
`@taeyoung` did you installed Webots from the snap store or the debian package?

##### taeyoung 03/11/2020 10:14:48
Ubuntu 16.04, and  using debian

##### Stefania Pedrazzi [Cyberbotics] 03/11/2020 10:14:51
did you try to run `sudo apt-get remove webots` in a terminal to uninstall Webots?

##### taeyoung 03/11/2020 10:16:32
When i did that, it shows 'Unmet dependencies. Try "apt-get -f install' with no packages (or specify a solution)."

##### Stefania Pedrazzi [Cyberbotics] 03/11/2020 10:17:04
is it the same with  `dpkg --remove webots`?


but usually you first have to fix the broken package before being able to uninstall it


for example running

```apt-get clean && apt-get autoremove
sudo apt-get -f install
dpkg --configure -a
```


[https://linuxhint.com/uninstall-debian-packages/](https://linuxhint.com/uninstall-debian-packages/)

##### taeyoung 03/11/2020 10:22:01
'dpkg --remove webots', this one  worked


Thank you.

##### yash 03/11/2020 11:41:38
I want to detect a RGB colour solid object , which sensor should be used for this purpose.??      In case of light sensor ,its mentioned that it does not account for object colours.

##### David Mansolino [Cyberbotics] 03/11/2020 11:42:10
Hi `@yash` you should use a camera node (which resolution can be set to 1x1 pixel)

##### yash 03/11/2020 11:48:12
oh okay thanks `@David Mansolino`  will check that out

##### David Mansolino [Cyberbotics] 03/11/2020 11:48:24
You're welcome

##### taeyoung 03/11/2020 12:26:20
When I use Pointlight with a vector of 'attenuation' which does not meet the condition(Only the third component of the 'attenuation' field should be greater than 0), it shows warning. Is there any way to do this without warning? or Can I disable the warning?

##### Olivier Michel [Cyberbotics] 03/11/2020 13:04:29
Why do you need to set a value that causes the warning to fire up?

##### taeyoung 03/12/2020 03:27:59
Actually, I'm using this in a different way... pointlight is in the ball


attenuation 0 0 1
%figure
![2.png](https://cdn.discordapp.com/attachments/565154703139405824/687502416429449216/2.png)
%end


attenuation 0.1 0.3 0.1
%figure
![1.png](https://cdn.discordapp.com/attachments/565154703139405824/687502472855420968/1.png)
%end


with 0 0 1, It is too bright to see the ball well

##### coderrr 03/12/2020 06:48:37
Hello, I was writing the supervisor code for detecting collisions. In the code I need to specify the ROBOT\_RADIUS. How to find the radius of my robot? I am using E-puck, Khepera and Khepera-II.

##### David Mansolino [Cyberbotics] 03/12/2020 07:00:23
`@coderrr`, one simple solution is to check the bounding object of the robot in its PROTO, for example for the e-puck robot the radius of the cylinder is 0.037 meters: [https://github.com/cyberbotics/webots/blob/master/projects/robots/gctronic/e-puck/protos/E-puck.proto#L1138](https://github.com/cyberbotics/webots/blob/master/projects/robots/gctronic/e-puck/protos/E-puck.proto#L1138)


`@taeyoung`, in that case you should probably ignore the warning.

##### Laojiang 03/12/2020 08:16:19
Hello, I' m trying to use pycharm to control my webots. Hewever, after I what the document suggest, the webots has a warning. How can I solve it?😭
%figure
![QQ.png](https://cdn.discordapp.com/attachments/565154703139405824/687574683863875594/QQ.png)
%end

##### David Mansolino [Cyberbotics] 03/12/2020 08:17:15
This Warning message seems to indicate that none of your robot controllers are using the 'extern' controller.


If you start the simulation, is the time increasing?

##### Laojiang 03/12/2020 08:19:53
No, the time doesn't change.

##### David Mansolino [Cyberbotics] 03/12/2020 08:20:22
ok, do you have more than one instance of Webots open at the same time?

##### Laojiang 03/12/2020 08:22:05
no, just one instance



%figure
![QQ20200312162020.png](https://cdn.discordapp.com/attachments/565154703139405824/687576505068290068/QQ20200312162020.png)
%end


Is there no place for me to configure it?

##### David Mansolino [Cyberbotics] 03/12/2020 08:24:19
Ok, but from the screenshot it seems it worked for the first time but not for the next ones, can you confirm?

##### Laojiang 03/12/2020 08:26:27
It can work normally just when I use webots itself.

##### David Mansolino [Cyberbotics] 03/12/2020 08:27:22
Can you try to revert the simulation and then start the controller again from PyCharm ?

##### Laojiang 03/12/2020 08:38:47
I just restart webots and pycharm and when the time increasing first time. However, after the first start, the time doesn't change again. finally, after some trying , the warning here again.
%figure
![QQ202001.png](https://cdn.discordapp.com/attachments/565154703139405824/687580339366920205/QQ202001.png)
%end


Excuse me for my english grammar mistakes

##### David Mansolino [Cyberbotics] 03/12/2020 08:41:37
It seems that somehow you controller exists sometime before the first step in a unusual way and therefore Webots is not aware that the controller exited. This is why it is not able to 'release' the controller and therefore displays this warning.

Woudl this make sense in your case ?

##### Laojiang 03/12/2020 08:43:13
yes yes , I agree with you!


So what can I do to solve it?

##### David Mansolino [Cyberbotics] 03/12/2020 08:49:40
Unfortunately sicne webots is not yet able to detect crash/unexpected exit of the controller yet, the workaround is to manually revert the simulation before you start the controller from PyCharm.

##### Laojiang 03/12/2020 08:54:39
yes, you are right. After I revert the simulation, the warning is gone. However, the time still doesn't increase. And robots doesn't move, too.

##### David Mansolino [Cyberbotics] 03/12/2020 08:55:28
The time will increase only when you start the controller and the controller calls the 'step' function.

##### Laojiang 03/12/2020 08:57:37
Oh my god! Thank you very very much!!! I can do it now!

##### David Mansolino [Cyberbotics] 03/12/2020 08:57:51
You're welcome 🙂

##### yash 03/12/2020 09:39:12
I want to detect a red solid object using camera ....Can anyone please help regarding it? Do we have to use the recognition functions for this purpose ?

##### nelsondmmg 03/12/2020 10:21:47
How can I reach a GPS node and use getSpeed from another controller? I'm trying to read the velocity of a pedestrian, which uses the controller implemented in the pedestrian.wbt (it is translated, it does not move). Thanks!

##### Stefania Pedrazzi [Cyberbotics] 03/12/2020 10:25:50
`@yash` for a simple example you can look at the Camera device sample simulation: [https://www.cyberbotics.com/doc/guide/samples-devices#camera-wbt](https://www.cyberbotics.com/doc/guide/samples-devices#camera-wbt)

The method you use depends on what you want to achieve. You can use common image processing based on the Camera image.


`@nelsondmmg` you cannot control directly a device from another robot controller.

But instead you can let the two robot controllers communicate (for example using the Emitter/Receiver nodes). You should modify the pedestrian controller so that it processes your request to get the velocity and sends it back to your controller.

##### Axel M 03/12/2020 14:22:18
Hi, in which frame does `wb_supervisor_node_get_velocity` express it's velocities ? In world frame or local node frame ?


The doc specifies that `wb_supervisor_node_get_position` is relative to the global (world) frame

##### David Mansolino [Cyberbotics] 03/12/2020 14:24:37
Hi `@Axel M`, let me check.

##### Axel M 03/12/2020 14:24:58
(My experiments shows me that get\_velocity seems to be also in the global frame)

##### David Mansolino [Cyberbotics] 03/12/2020 14:25:46
Yes that's it, it is global velocity.

##### Axel M 03/12/2020 14:26:57
I want to get velocity of a Solid given it's own frame, is the only solution to use  `wb_supervisor_node_get_orientation`, transpose it, and multiply the global velocity vector with it (ugh, not easy) ?

##### David Mansolino [Cyberbotics] 03/12/2020 14:28:15
That's indeed the only solution.

##### Axel M 03/12/2020 14:30:37
Would you recommend usingwebots.maths for this kind of operations (even if the API isn't public) ?

##### David Mansolino [Cyberbotics] 03/12/2020 14:31:24
You can, but you can also probably find some libraries that can handle such transformations out of the box.

##### coderrr 03/12/2020 14:45:30
Thank you so much `@David Mansolino` 👍

##### David Mansolino [Cyberbotics] 03/12/2020 14:55:39
You're welcome

##### Deep 03/12/2020 15:09:42
Dear person who is reading this:

Hey, I want to add a flying human face with approximately realistic properties and texture. Is there a model such as this for me to download?

I noticed the human being in the software doesn't have face.



I just need a static flying face.

Thanks a bunch.

##### David Mansolino [Cyberbotics] 03/12/2020 15:15:18
Hi `@Deep`, no such human face are available out of the box in Webots. However you can create your own model by importing any human face model you can find on internet in VRML format using in IndexedFaceSet (see for example: [https://cyberbotics.com/doc/guide/samples-geometries#high\_resolution\_indexedfaceset-wbt](https://cyberbotics.com/doc/guide/samples-geometries#high_resolution_indexedfaceset-wbt))

##### Deep 03/12/2020 15:23:12
`@David Mansolino` Thanks david! And how can I make it ignore gravity but still respond to other forces?


(If I may ask)

##### David Mansolino [Cyberbotics] 03/12/2020 16:33:07
You're welcome


It is not possible out of the box to ignore gravity for one specific object, but you might add a force opposed to the gravity to cancel it using the `wb_supervisor_node_add_force` function: [https://cyberbotics.com/doc/reference/supervisor#wb\_supervisor\_node\_add\_force](https://cyberbotics.com/doc/reference/supervisor#wb_supervisor_node_add_force)

##### LaCava 03/13/2020 10:48:33
Is there any way to add a recognition node to a robot that doesn’t have it by default? I tried adding to to the PROTO in the world file, but the camera itself isn’t actually specified in the PROTO so it won’t recognize it.

##### David Mansolino [Cyberbotics] 03/13/2020 10:49:23
Hi `@LaCava`, so where is the camera defined? In the open fields of the PROTO?

##### LaCava 03/13/2020 10:51:30
Not sure: the PROTO itself has fields like the camera width and height. I have to access it in the controller through the getCamera functions, but there are no fields corresponding to it anywhere else.

##### David Mansolino [Cyberbotics] 03/13/2020 10:54:25
Ok, in that case the camera is probably defined in the PROTO, are you using a PROTO distributed within Webots?

##### LaCava 03/13/2020 10:56:18
Yup - it’s the NAO. May just be misunderstand how to do this, sorry about that. I appreciate the help.


Ahh yup, found it in the full-fat NAO PROTO — can I just manually add the recognition node of the field isn’t listed?


^ that worked, it seems!

##### David Mansolino [Cyberbotics] 03/13/2020 11:03:39
Yes you should be able to add it directly here: [https://github.com/cyberbotics/webots/blob/master/projects/robots/softbank/nao/protos/Nao.proto#L797](https://github.com/cyberbotics/webots/blob/master/projects/robots/softbank/nao/protos/Nao.proto#L797)


Alternatively you can "un-prototize" you node by re-clicking on the node in the scene-tree and selecting 'Convert to Base Node(s)'.

##### Deep 03/13/2020 12:42:06
`@David Mansolino` If I get this straight, when importing a 3D object I have to set its collision detection parameters which are required for any physical force to be applicable on it?

##### David Mansolino [Cyberbotics] 03/13/2020 12:43:29
Yes, you have to set the boundign objects and physics fields

##### User21 03/13/2020 15:25:13
Hi, is it possible to define the DEF from Code?

##### David Mansolino [Cyberbotics] 03/13/2020 15:26:49
Hi `@User21`, not, unfortunately it is not possible to modify it using the supervisor API

##### User21 03/13/2020 15:29:53
Okay, if i have two robots and i want to get the translation from the second one at the first one i can call the node by using getFromDef.

Is ther another posibility to get the node?


My goal is to set the name from the robot in code and call the set name without naming them manual


*manually

##### David Mansolino [Cyberbotics] 03/13/2020 15:32:23
Yes of course, you can get the root node of the world using the wb\_supervisor\_node\_get\_root ([https://cyberbotics.com/doc/reference/supervisor#wb\_supervisor\_node\_get\_root](https://cyberbotics.com/doc/reference/supervisor#wb_supervisor_node_get_root)) function. This root node is a hidden 'Group' node, you can therefore get its 'children' field and parse all the nodes inside.

##### User21 03/13/2020 15:33:07
okay i will try thanks!

##### David Mansolino [Cyberbotics] 03/13/2020 15:43:21
You're welcome

##### User21 03/13/2020 15:43:49
Can a controller have more then one executeable Scripts? I want to use multiple Pioneers which all have the same controll functions like Drive form Point A to Point B. But the should go to diffren positions so i dont want to make a folder for each robot  which contains the same besides the one execute script.

##### David Mansolino [Cyberbotics] 03/13/2020 15:57:22
You can use the 'controllerArgs' field to define the position, this controllerArgs fields defines the arguments with which the controller is started

##### User21 03/13/2020 15:59:09
Ah okay, thanks so much!

##### Simon Steinmann [Moderator] 03/15/2020 19:08:25
Hi, I have a general question about Webots, compared to Gazebo or other simulators. I'm looking for the best Simulator to use for training Reinforcement learning algorithms. One major deciding factor is the simulation speed. With gazebo, it is hard for me to get over 1-2x real time factor. It simply doesnt scale with more cores, or uses any GPU acceleration for physics calculations. Can anyone give me some info, how Webots performs and scales?

##### David Mansolino [Cyberbotics] 03/16/2020 06:48:04
Hi `@Simon Steinmann`, generally speaking Webots is faster than Gazebo, this is mainly due to its native intensive usage of the GPU. Many simulations run at a speed way higher than 1-2x real time. But the best is to make yourself your own idea by trying it, when you install Webots you get plenty of sample simulations that will allow you to quickly check the simulation speed of Webots on your computer.

##### Simon Steinmann [Moderator] 03/16/2020 08:37:21
`@David Mansolino` Hi, thx for the reply. Does Webots use GPU for physics calculation, or just for rendering? I tried Webots a little 6 month ago and it definitely looks better visually, but my main concern is the physics simulation speed.

##### David Mansolino [Cyberbotics] 03/16/2020 09:24:49
It is indeed only for rendering, for physics, you might use the multi-CPU feature of Webots (disable by default): see 'optimalThreadCount' field documentation: [https://www.cyberbotics.com/doc/reference/worldinfo#worldinfo](https://www.cyberbotics.com/doc/reference/worldinfo#worldinfo)

##### Simon Steinmann [Moderator] 03/16/2020 10:35:04
So the main difference in performance between Webots and Gazebo (since both use ODE) stems from the model refinement you guys do? Like replacing meshes with simple geometry like cylinders and spheres where applicable? Also, is there a list of already implemented and future implemented robots. For example KUKA or Kinova robotic arms would be very interesting.

##### David Mansolino [Cyberbotics] 03/16/2020 10:39:30
They indeed both use ODE, howver, Webots uses a customized version of ODE with multi-thread support.

About the models, it is true that Webots use more optmized model (both on the rendering and physical side).

About the robot models, here is a list of available model by default in Webots (but you might find some other maintained by the community on internet): [https://cyberbotics.com/doc/guide/robots](https://cyberbotics.com/doc/guide/robots)


You might also use the URDF to Webots to import new model: [https://github.com/cyberbotics/urdf2webots](https://github.com/cyberbotics/urdf2webots)

##### Simon Steinmann [Moderator] 03/16/2020 10:43:14
thank you for the infos 🙂


Do you have current plans of adding Kinova robotic arms? It is very popular in research and teaching. Adding the JACO2 and JACO3 arms would make webots a good alternative to Gazbeo and ROS

##### David Mansolino [Cyberbotics] 03/16/2020 10:45:55
It is indeed a good candidate, unforunately we only have limited time and much to do, so its not on our short term plan.


But we have the universal robot arms: [https://cyberbotics.com/doc/guide/ure](https://cyberbotics.com/doc/guide/ure)

##### Simon Steinmann [Moderator] 03/16/2020 11:38:56
Have you considered an unofficial supported robot list, where users can submit their files? So not multiple people have to do the same work over and over again. For example, If I were to make the kinova JACO2 robotic arm run in Webots, it would be helpful for others, to easily be able to find it and use it as a starting point for their work.

##### David Mansolino [Cyberbotics] 03/16/2020 11:43:42
Yes, this is on our roadmap, we plan to create a platform for the community to share their models. However, in the meantime, we highly encourage users to create a pull-request to include their model directly in the main repository: [https://github.com/cyberbotics/webots](https://github.com/cyberbotics/webots)

If you create a model of the kinova JACO2 robotic arm we will be more than happy to assist you for integrating it in Webots.

##### Mr J 03/16/2020 15:04:42
Is there any way to get the translation of a robot through the controller?

##### David Mansolino [Cyberbotics] 03/16/2020 15:05:10
Yes, you can either use a GPS either use the Supervisor API.

##### Mr J 03/16/2020 15:07:04
im in python and i cant seem to get supervisor.getPosition() to work, im not sure what im missing but i feel like its something

##### David Mansolino [Cyberbotics] 03/16/2020 15:12:27
You first have to get the node itself, e.g.:

```Python
node = supervisor.getSelf()
position = node.getPosition()
```

##### Mr J 03/16/2020 15:12:59
oh i see, thank you for the help!

##### David Mansolino [Cyberbotics] 03/16/2020 15:13:04
You're welcome

##### Simon Steinmann [Moderator] 03/16/2020 16:23:40
Hi, is there a implementation of OpenAI gym with webots?


and on a different note: why does this throw the error: ' Only one instance of the Robot class should be created' ... How can I use the supervisor (to pause and reset the simulation).  The code snippet is from my controller
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/689147478431367237/unknown.png)
%end

##### Stefania Pedrazzi [Cyberbotics] 03/16/2020 16:27:52
`@Simon Steinmann` Supervisor class inherits from Robot class, so you can simply write

`robot = Supervisor()`


About OpenAI gym there is currently no official implementation for Webots. But it is possible to write a custom interface for it.

We know that some users are implementing an interface for OpenAI but it is not public yet

##### Simon Steinmann [Moderator] 03/16/2020 16:45:29
Thank you, the supervisor thing worked :). Can you recommend a good starting point for the OpenAI implementation? Doesnt have to be perfect or 100% working. Some python controller examples would already help a lot.

##### Stefania Pedrazzi [Cyberbotics] 03/16/2020 16:53:41
unfortunately there is no sample simulation using AI or similar in Python. The `advanced_genetic_algorithm` simulation (you can search for it in `File > Open Sample World...`)  uses a C supervisor controller but it could help you structuring your Python controller.

##### Simon Steinmann [Moderator] 03/16/2020 16:55:14
thank you, I'll have a look 🙂

##### taeyoung 03/17/2020 02:34:28
I want to display an image at the corner of 3D view, same position regardless of viewpoint, like a text displayed by 'set\_label'.

Is it possible?

##### David Mansolino [Cyberbotics] 03/17/2020 06:55:35
`@taeyoung`, yes,  you can use the overlay of Display node, like in this example: 

[https://cyberbotics.com/doc/guide/samples-devices#display-wbt](https://cyberbotics.com/doc/guide/samples-devices#display-wbt)

##### taeyoung 03/17/2020 07:16:23
Thank you, I will check it.

##### David Mansolino [Cyberbotics] 03/17/2020 07:22:14
You're welcome

##### nelsondmmg 03/17/2020 09:56:40
Hi, I'm reading the Emitter API documentation and I did not found how to specify the address of the message. I would like to send it to receiver in another node (in this case emulation a vehicle 2 vehicle communication). There is this phrase: **The wb\_emitter\_send function adds to the emitter's queue a packet of size bytes located at the address indicated by dataThe wb\_emitter\_send function adds to the emitter's queue a packet of size bytes located at the address indicated by data**, but I don't know how to create the packet adding the message + address. 



As a following question: is there a way to send a broadcast message? Thanks

##### Stefania Pedrazzi [Cyberbotics] 03/17/2020 09:58:18
`@nelsondmmg` the Emitter message is sent to a specific channel and all the Receiver devices listening on the same channel will receive it. So you don't have to specify any address.


If you want that the message is sent to any Receiver device you can set the Emitter channel to `-1` (see the channel field description in Emitter documentation [https://www.cyberbotics.com/doc/reference/emitter](https://www.cyberbotics.com/doc/reference/emitter))

##### nelsondmmg 03/17/2020 10:00:25
Ah, thanks. Sorry for the confusion 😄

##### Gautier 03/17/2020 10:20:46
Hello, is it possible to retrieve the number of entry in a Field ?


I'm thinking about retrieving the number of children of a certain node

##### David Mansolino [Cyberbotics] 03/17/2020 10:23:10
Yes this is possible thanks to the `wb_supervisor_field_get_count`([https://cyberbotics.com/doc/reference/supervisor#wb\_supervisor\_field\_get\_count](https://cyberbotics.com/doc/reference/supervisor#wb_supervisor_field_get_count)) function

##### Gautier 03/17/2020 10:23:46
Ok, thanks, I'm gonna take a look ! 😁

##### Simon Steinmann [Moderator] 03/17/2020 12:59:07
<@&568329906048598039> my webots has crashed several times today (started via terminal).
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/689457792842858597/unknown.png)
%end

##### Hue 03/17/2020 13:03:22
Unfortunately there is not enough details to tell what could be the problem, can you reproduce the bug ?

##### Simon Steinmann [Moderator] 03/17/2020 13:05:53
happens frequently now. I do have a subprocess in the controller, started via threading module


and I import a class from a different file, which does inverse kinematic calculations with ikpy. I'll try running it as a extern controller

##### David Mansolino [Cyberbotics] 03/17/2020 13:18:24
What kind of robot are you using ?


Would you agree to try with a debug version so that we can get a stack ?

##### Simon Steinmann [Moderator] 03/17/2020 13:25:34
ur10e


what would running a debug version entail? Is it just a setting or do I have to install another version of webots?

##### David Mansolino [Cyberbotics] 03/17/2020 13:28:49
> what would running a debug version entail? Is it just a setting or do I have to install another version of webots?

`@Simon Steinmann` I can send you a new Webots package compiled in debug mode if you want.

##### Simon Steinmann [Moderator] 03/17/2020 13:35:04
okay

##### tilly 03/17/2020 13:48:33
is it possible to surpress these warnings
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/689470233345261570/unknown.png)
%end


??


and the next question is it possible to do like multiple independent runs without graphic interface with mac


500 to 1000 runs


(for a scale)

##### Olivier Michel [Cyberbotics] 03/17/2020 13:54:21
These warnings are caused by the complexity of your simulation model. You may fix them by decreasing the WorldInfo.basicTimeStep or by simplifying your model.

##### tilly 03/17/2020 13:55:50
i have the basic arena + some thymios + 4 floors i need for different ground conditions


where can i do a simplification (changing timesteps didnt fix it)

##### Olivier Michel [Cyberbotics] 03/17/2020 13:56:27
See hints here to improve your physics simulation to get rid of these warnings: [https://cyberbotics.com/doc/guide/modeling](https://cyberbotics.com/doc/guide/modeling)


Why do you need 4 floors? Are they superposed?

##### tilly 03/17/2020 13:58:00
for different floor colors


for the ground sensors


yes they are superposed (lay like 0.0001 over the first floor)

##### Olivier Michel [Cyberbotics] 03/17/2020 13:58:51
Then, you should create a single floor with a texture that matches your need. Such a superposition of floor will likely give you strange results...


For launching series of runs, I would recommend you to start Webots with the `--batch` option, see [https://cyberbotics.com/doc/guide/starting-webots](https://cyberbotics.com/doc/guide/starting-webots)


And possibly `--minimize` and `--stdout` and `--stderr`.

##### tilly 03/17/2020 14:00:42
Much Thanks. Is there a way to let one run be a fixed time

##### Olivier Michel [Cyberbotics] 03/17/2020 14:01:22
Yes, simply have a supervisor that will call `wb_supervisor_simulation_quit()` after the fixed time you want.

##### tilly 03/17/2020 14:01:50
Thanks again

##### Olivier Michel [Cyberbotics] 03/17/2020 14:02:14
You are welcome.

##### tilly 03/17/2020 14:17:44
when i call Supervisor.simulationQuit(status) in python what should status be EXIT\_SUCCESS, "EXIT\_SUCCESS", 0, 1 doesnt work

##### Olivier Michel [Cyberbotics] 03/17/2020 14:20:10
What do you mean with "doesnt work"? It doesn't quit Webots?


Or do you get a runtime error?

##### tilly 03/17/2020 14:20:26
runtime error

##### Olivier Michel [Cyberbotics] 03/17/2020 14:20:40
Can you copy this error here?

##### tilly 03/17/2020 14:21:01

%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/689478404621467720/unknown.png)
%end

##### Olivier Michel [Cyberbotics] 03/17/2020 14:23:21
Yes, this is because it's a non-static member method, therefore, you shouldn't call it with the `Supervisor.` prefix, but with your robot instance as a prefix, e.g., `robot.simulationQuit(0)`

##### tilly 03/17/2020 14:23:39
ok thanks



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/689479329150795791/unknown.png)
%end

##### Olivier Michel [Cyberbotics] 03/17/2020 14:25:33
Because your `robot` variable should be an instance of a `Supervisor`, not a `Robot`


And your `Robot` node (in the Webots world file) should have the `supervisor` field set to `TRUE`.

##### tilly 03/17/2020 14:28:56
thanks, do i need the clean up method in python?

##### Olivier Michel [Cyberbotics] 03/17/2020 14:31:27
No, it's not needed. It's done automatically when the object is destroyed.


But you can add custom cleanup in the  `__del__` method of the object in Python.


But it is almost never needed.

##### David Mansolino [Cyberbotics] 03/17/2020 14:46:46
`@Simon Steinmann` I just finished to upload debug version of Webots in this nightly build: [https://github.com/cyberbotics/webots/releases/tag/nightly\_16\_3\_2020](https://github.com/cyberbotics/webots/releases/tag/nightly_16_3_2020)


you can use one of these:

  - webots\_2020a-rev2\_amd64\_debug.deb

  - webots-R2020a-rev2-x86-64\_debug.tar.bz2

##### User21 03/17/2020 14:52:55
Hi, is there an example for using ros service with webots?

##### David Mansolino [Cyberbotics] 03/17/2020 14:53:55
ROS1 or ROS2 ?

##### User21 03/17/2020 14:54:03
ROS1 melodic

##### David Mansolino [Cyberbotics] 03/17/2020 14:54:51
Yes you can find some sample simulations here: [http://wiki.ros.org/webots\_ros/Tutorials/Sample%20Simulations](http://wiki.ros.org/webots_ros/Tutorials/Sample%20Simulations)

The code is available here:

[https://github.com/cyberbotics/webots\_ros](https://github.com/cyberbotics/webots_ros)

##### User21 03/17/2020 14:55:08
thanks

##### David Mansolino [Cyberbotics] 03/17/2020 14:55:15
You're welcome

##### JoanGerard 03/17/2020 15:43:23
I was experimenting this issue again with the latest version of Webots (R2020a revision 1). [https://github.com/cyberbotics/webots/issues/1118](https://github.com/cyberbotics/webots/issues/1118)


I am using the custom robot which has two wheels. I translate it and rotate it every 100 steps.

##### David Mansolino [Cyberbotics] 03/17/2020 15:45:55
Oups, do you have a simple procedure to reproduce the issue with a robot distributed within Webots?

Was it working fin R2020a ?

##### JoanGerard 03/17/2020 15:46:47
I did not try it with R2020a actually ...

##### David Mansolino [Cyberbotics] 03/17/2020 15:46:58
With R2019b ?

##### JoanGerard 03/17/2020 15:47:50
the error was there for R2019b


I think they corrected it for the R2020a release


Unfortunately I do not have a robot distributed within Webots where you can reproduce the error

##### David Mansolino [Cyberbotics] 03/17/2020 15:49:17
Ok, maybe can you try with R2020a to make sure it is fixed there ?

##### JoanGerard 03/17/2020 15:49:43
Ok, I will

##### David Mansolino [Cyberbotics] 03/17/2020 15:49:49
Thank you

##### JoanGerard 03/17/2020 15:59:28
Could you please provide me the link to download the R2020a version? I cannot find it...

##### David Mansolino [Cyberbotics] 03/17/2020 16:00:02
Of course, you can find it here: [https://github.com/cyberbotics/webots/releases/tag/R2020a](https://github.com/cyberbotics/webots/releases/tag/R2020a)

##### Simon Steinmann [Moderator] 03/17/2020 16:12:18
I will try the debug version tomorrow. In the meantime a noob question: How can I get the position and orientation of my robot's joints? I have tried for an hour, reading the documentation etc. but I can't seem to figure it out. I added a GPS node to the tool slot of my robotic arm, but that just has the position in relation to its own coordinate system, which is useless.

##### David Mansolino [Cyberbotics] 03/17/2020 16:13:30
GPS should return you the global X-Y-Z position, is this what you want ?

##### Simon Steinmann [Moderator] 03/17/2020 16:15:16
that or in relation to the base joint. But in general I would like to have access to my joints. Adding GPS sensors in order to read position seems weird. And it doesnt provide orientation

##### David Mansolino [Cyberbotics] 03/17/2020 16:16:18
The usual way is to use position sensors: [https://www.cyberbotics.com/doc/reference/positionsensor](https://www.cyberbotics.com/doc/reference/positionsensor)

Using these sensors you can get the angle/position of the joint

##### Simon Steinmann [Moderator] 03/17/2020 16:16:18
Another thing: creating a new project with the wizard and adding a rectangle arena, the 'up' coordinate is 'y' instead of 'z'. Is there a reason for this?

##### David Mansolino [Cyberbotics] 03/17/2020 16:16:56
> Another thing: creating a new project with the wizard and adding a rectangle arena, the 'up' coordinate is 'y' instead of 'z'. Is there a reason for this?

`@Simon Steinmann` Yes, this is the Webots standard, which comes from the VRML standard

##### Simon Steinmann [Moderator] 03/17/2020 16:17:32
ah okay, thank you. I will give it a go 🙂

##### David Mansolino [Cyberbotics] 03/17/2020 16:17:41
About the position and orientation, you may also be interested by the supervisor API to get position and orientation of any node: [https://cyberbotics.com/doc/reference/supervisor#wb\_supervisor\_node\_get\_position](https://cyberbotics.com/doc/reference/supervisor#wb_supervisor_node_get_position)

##### Simon Steinmann [Moderator] 03/17/2020 16:17:59
thx!


how can I see all the nodes of a robot? Like all the actuators, joints, sensors etc?

##### David Mansolino [Cyberbotics] 03/17/2020 16:31:17
either oin the doc: [https://cyberbotics.com/doc/guide/ure](https://cyberbotics.com/doc/guide/ure)

either in the robot window: [https://www.cyberbotics.com/doc/guide/controller-plugin#robot-window](https://www.cyberbotics.com/doc/guide/controller-plugin#robot-window)

##### seenu 03/18/2020 07:52:35
What is the name of the header file for epuck robot odometry

##### David Mansolino [Cyberbotics] 03/18/2020 07:54:42
You might find an odometry library for the e-puck here: [https://github.com/cyberbotics/webots/tree/master/projects/samples/curriculum/lib](https://github.com/cyberbotics/webots/tree/master/projects/samples/curriculum/lib)

##### seenu 03/18/2020 07:54:58
does the epuck2 robot supports only Bluetooth v2.0 only? Not the upgraded versions?


Thank you Mr.David Mansolino

##### David Mansolino [Cyberbotics] 03/18/2020 07:56:17
`@seenu` for now in Webots the remote-control of the e-puck2 is done trhought bluetooth only yes

##### seenu 03/18/2020 07:56:40
yes

##### David Mansolino [Cyberbotics] 03/18/2020 07:57:09
Oh non sorry, I am wrong, there is also a wifi version: [https://github.com/cyberbotics/webots/tree/master/projects/robots/gctronic/e-puck/plugins/remote\_controls/e-puck\_wifi](https://github.com/cyberbotics/webots/tree/master/projects/robots/gctronic/e-puck/plugins/remote_controls/e-puck_wifi)

##### seenu 03/18/2020 07:58:44
But I need to control via bluetooth😇

##### David Mansolino [Cyberbotics] 03/18/2020 07:59:00
I just checked and this seems to be the default for the e-puck2

##### seenu 03/18/2020 07:59:27
okay

##### David Mansolino [Cyberbotics] 03/18/2020 07:59:45
> But I need to control via bluetooth😇

`@seenu` In that case you may change this line in your Webots installation folder:

[https://github.com/cyberbotics/webots/blob/master/projects/robots/gctronic/e-puck/protos/E-puck.proto#L1181](https://github.com/cyberbotics/webots/blob/master/projects/robots/gctronic/e-puck/protos/E-puck.proto#L1181)

##### seenu 03/18/2020 08:09:22
Should we save the modified proto file in separate location?

##### David Mansolino [Cyberbotics] 03/18/2020 08:12:42
Yes, it is recommended to save it in the `protos` folder of your current webots project.

##### seenu 03/18/2020 08:12:59
👍


may i know, Why the cross compile option is disabled in my project page?

##### David Mansolino [Cyberbotics] 03/18/2020 08:22:39
This is probably because you are missing a `Makefile.e-puck` file in your controller folder. See for example:

[https://github.com/cyberbotics/webots/tree/master/projects/robots/gctronic/e-puck/controllers/e-puck\_cross-compilation](https://github.com/cyberbotics/webots/tree/master/projects/robots/gctronic/e-puck/controllers/e-puck_cross-compilation)

##### seenu 03/18/2020 08:32:53
I just build my project, It is showing make -j 6

make: Nothing to be done for 'all'.


and now in build menu all the options are disabled

##### David Mansolino [Cyberbotics] 03/18/2020 08:36:07
can you try a clean ? and if it is not avalable, restart Webots ?

##### seenu 03/18/2020 08:38:16
Bluetooth connection failed with this error

[void] Serial error on port "\\\\\\\\.\\\\COM10" : Cannot open serial port

##### David Mansolino [Cyberbotics] 03/18/2020 08:39:51
Did you already had a look at this doc?

[https://cyberbotics.com/doc/guide/epuck#bluetooth-setup](https://cyberbotics.com/doc/guide/epuck#bluetooth-setup)

##### seenu 03/18/2020 08:42:38
yes I did


my robot is paired with my desktop bluetooth

##### David Mansolino [Cyberbotics] 03/18/2020 08:51:33
Then it looks like Webots doesn't have right to use the COM port

##### seenu 03/18/2020 08:54:33
no


how to check that

##### David Mansolino [Cyberbotics] 03/18/2020 08:57:51
The first things to check is wheter you can connect to the robot using the e-puck default tool to the robot, such as this one: [https://www.gctronic.com/doc/index.php/E-Puck#PC\_interface](https://www.gctronic.com/doc/index.php/E-Puck#PC_interface)

##### JoanGerard 03/18/2020 09:30:50
T

> Ok, maybe can you try with R2020a to make sure it is fixed there ?

`@David Mansolino` I tested with that version and the error is still there...


is there any online platform where I can try to reproduce the bug?


this is my robot after 9 minutes of simulation 😟
%figure
![Screen_Shot_2020-03-18_at_10.32.03_AM.png](https://cdn.discordapp.com/attachments/565154703139405824/689768333670744090/Screen_Shot_2020-03-18_at_10.32.03_AM.png)
%end

##### David Mansolino [Cyberbotics] 03/18/2020 09:35:05
Ok, thank you for the test, it would be nice if you could share with us a simple simulation using the e-puck robot (simple differential-wheel robot available in Webots) and a controller reproducing the problem so that we can try to better identify and fix it.

##### JoanGerard 03/18/2020 09:39:30
ok

##### David Mansolino [Cyberbotics] 03/18/2020 09:39:41
thank you.

##### JoanGerard 03/18/2020 10:10:47
I realized that I need to call "resetPhysics" method and the error does not happen

##### David Mansolino [Cyberbotics] 03/18/2020 10:23:07
This is indeed necessary, thank you for the feedback!

##### Weiyi 03/18/2020 13:48:08
Hello, I wonder how to add a touch sensor to Darwin-op robot😀

##### David Mansolino [Cyberbotics] 03/18/2020 13:48:53
Hi `@Weiyi`, Where do you want to add it in the darwin-op ?

##### Weiyi 03/18/2020 13:49:09
under his foot


Because I want to use ZMP algorithm, I wish to get the force of from the ground

##### David Mansolino [Cyberbotics] 03/18/2020 13:50:17
OK, in that case you can add nodes directly in the `leftFootSlot` and `rightFootSlot` lots of the darwin-op robot.

##### Weiyi 03/18/2020 13:51:10
By the way, can I add only one or several sensors to one foot?

##### David Mansolino [Cyberbotics] 03/18/2020 13:51:21
As many as you want 😉

##### Weiyi 03/18/2020 13:51:29
OK

##### David Mansolino [Cyberbotics] 03/18/2020 13:51:32
juste make sure they have different names

##### Weiyi 03/18/2020 13:51:55
I will try it, thank you very much!!!😆

##### David Mansolino [Cyberbotics] 03/18/2020 13:55:40
You're welcome

##### Laojiang 03/18/2020 15:18:29
Where can I find the introduction of Robot library functions

##### Olivier Michel [Cyberbotics] 03/18/2020 15:21:23
In the Webots reference manual.


[https://cyberbotics.com/doc/reference/nodes-and-api-functions](https://cyberbotics.com/doc/reference/nodes-and-api-functions)

##### Laojiang 03/18/2020 15:22:10
Ok,thanks

##### programmingclub 03/18/2020 16:53:54
account creation page not working: [http://www.cyberbotics.com/my\_account/register](http://www.cyberbotics.com/my_account/register)


pls help

##### David Mansolino [Cyberbotics] 03/18/2020 16:54:52
`@programmingclub` you don't need any account anymore.


Just use any email and use 'webots' as password if asked by Webots

##### programmingclub 03/18/2020 16:57:35
thanks `@David Mansolino`  but after this its saying no license right

##### Olivier Michel [Cyberbotics] 03/18/2020 16:58:52
You should use a version of Webots that works with this, e.g., Webots 8.4.0 for example.


See [https://www.cyberbotics.com/doc/guide/general-faq#can-i-still-use-a-webots-version-before-the-r2019a-release](https://www.cyberbotics.com/doc/guide/general-faq#can-i-still-use-a-webots-version-before-the-r2019a-release) for details.

##### programmingclub 03/18/2020 17:01:16
i am trying to use this : [http://doc.aldebaran.com/1-14/software/webots/webots\_index.html](http://doc.aldebaran.com/1-14/software/webots/webots_index.html)


but after installing webots for nao, its asking email and password

##### Olivier Michel [Cyberbotics] 03/18/2020 17:02:07
It doesn't work, please use version 8.4.0 instead.

##### programmingclub 03/18/2020 17:02:59
ohh , thanks but there is no webots 8.4.0 for nao

##### Olivier Michel [Cyberbotics] 03/18/2020 17:06:07
See the link I sent you to download it (it include NAO as well).

##### programmingclub 03/18/2020 17:07:05
can u pls again


its showing this: [https://cyberbotics.com/doc/guide/nao](https://cyberbotics.com/doc/guide/nao)


but where to download

##### Olivier Michel [Cyberbotics] 03/18/2020 17:09:49
[https://github.com/cyberbotics/webots/releases/tag/R2019a](https://github.com/cyberbotics/webots/releases/tag/R2019a)

##### programmingclub 03/18/2020 17:10:35
thanks alot, let me check, regards

##### seenu 03/19/2020 06:49:49
could you help in finding webots 2019a version to download

##### David Mansolino [Cyberbotics] 03/19/2020 06:51:04
Yes of course, all the previous versions of Webots are available here: [https://github.com/cyberbotics/webots/releases](https://github.com/cyberbotics/webots/releases)

In particular R2019a is available here: [https://github.com/cyberbotics/webots/releases/tag/R2019a](https://github.com/cyberbotics/webots/releases/tag/R2019a)

##### seenu 03/19/2020 07:18:49
thank you

##### David Mansolino [Cyberbotics] 03/19/2020 07:19:00
You're welcome

##### tilly 03/19/2020 13:36:01
> What do you mean with "doesnt work"? It doesn't quit Webots?

`@Olivier Michel`  if i use the simulationQuit function webots freezes and doesnt close itself.

##### David Mansolino [Cyberbotics] 03/19/2020 13:37:21
Hi `@tilly` please open a bug report here and include your world and controller file: [https://github.com/cyberbotics/webots/issues/new?template=bug\_report.md](https://github.com/cyberbotics/webots/issues/new?template=bug_report.md)

Thank you

##### tilly 03/19/2020 13:47:33
nvm now it works for some reason but thanks for the quick reply! 🙂

##### David Mansolino [Cyberbotics] 03/19/2020 13:47:51
You're welcome 😉

##### tilly 03/19/2020 13:51:03
is it possible to distribute the a certain amount of robots random at the beginning of a simulation run?

##### David Mansolino [Cyberbotics] 03/19/2020 13:51:48
You of course, using the supervisor API you can import as many robot as you want and set the loation you want

##### tilly 03/19/2020 13:55:20
is there any example code for adding new robots?

##### David Mansolino [Cyberbotics] 03/19/2020 13:56:39
UNfortunately not, but you can import any node using these functions in particular: [https://cyberbotics.com/doc/reference/supervisor#wb\_supervisor\_field\_import\_mf\_node\_from\_string](https://cyberbotics.com/doc/reference/supervisor#wb_supervisor_field_import_mf_node_from_string)


You will find a very simple example in C for importing a Robot in the root children field.

##### tilly 03/19/2020 14:29:01
Field.importMFNode(FIELD? ,position = -1, filename = "path/to/my/wbofile/Thymio2.wbo") what should i insert by FIELD?

##### Stefania Pedrazzi [Cyberbotics] 03/19/2020 14:30:22
you should put the 'children' field of the root object

##### tilly 03/19/2020 14:31:06
got it thanks


after initializing the robots where do i can set the position?

##### Stefania Pedrazzi [Cyberbotics] 03/19/2020 14:38:36
you have to retrieve the newly inserted robot using the Supervisor API, then its translation field and using the `setSFVec3f` function you can move it to a new position  [https://www.cyberbotics.com/doc/reference/supervisor#wb\_supervisor\_field\_set\_sf\_vec3f](https://www.cyberbotics.com/doc/reference/supervisor#wb_supervisor_field_set_sf_vec3f)

##### tilly 03/19/2020 14:41:04
How can i access certain nodes


eg i have 3 thymio2 nodes

##### Stefania Pedrazzi [Cyberbotics] 03/19/2020 14:42:18
the simplest way is to retrieve it using the DEF name: [https://www.cyberbotics.com/doc/reference/supervisor#wb\_supervisor\_node\_get\_from\_def](https://www.cyberbotics.com/doc/reference/supervisor#wb_supervisor_node_get_from_def)


but if all your robots have the same DEF name you can also retrieve them by the position in the parent "children" field: [https://www.cyberbotics.com/doc/reference/supervisor#wb\_supervisor\_field\_get\_mf\_node](https://www.cyberbotics.com/doc/reference/supervisor#wb_supervisor_field_get_mf_node)

##### tilly 03/19/2020 14:51:32
value = 0.5

        root\_children\_field.getMFNode(11).getField("translation").setMFVec3f(0, value)

        root\_children\_field.getMFNode(11).getField("translation").setMFVec3f(1, value)

        root\_children\_field.getMFNode(11).getField("translation").setMFVec3f(2, value)


something like this


assuming root\_children\_field is where i added the robots and 11 is the number of the node of the robot in the tree

##### Stefania Pedrazzi [Cyberbotics] 03/19/2020 14:54:32
yes, but usually a robot translation field is a SFVec3f field and not a MFVec3f.

##### tilly 03/19/2020 14:55:22
much thanks again

##### Weiyi 03/19/2020 15:00:31
Hi, I'm trying to use pycharm to control webots, but I get a mistake

##### David Mansolino [Cyberbotics] 03/19/2020 15:00:54
Hi `@Weiyi` what is the problem you have?

##### Weiyi 03/19/2020 15:01:13
when I execute  "from controller import Robot"


i get "ImportError: DLL load failed"


But I have set my environment variables like this : "PYTHONUNBUFFERED=1;PATH=G:\Webots\lib\controller\;G:\Webots\msys64\mingw64\bin\;G:\Webots\projects\robots\robotis\darwin-op\libraries\managers\;G:\Webots\projects\robots\robotis\darwin-op\libraries\robotis-op2"

##### David Mansolino [Cyberbotics] 03/19/2020 15:04:42
Maybe you should try setting `PYTHONPATH` too as explained here: [https://cyberbotics.com/doc/guide/running-extern-robot-controllers?tab-language=python#environment-variables](https://cyberbotics.com/doc/guide/running-extern-robot-controllers?tab-language=python#environment-variables)

##### Weiyi 03/19/2020 15:13:17
Should I add it to my windows or pycharm environment variables?

##### David Mansolino [Cyberbotics] 03/19/2020 15:13:48
As you prefeer.


But just to make sure, did you follow this documentation?

[https://cyberbotics.com/doc/guide/using-your-ide#pycharm](https://cyberbotics.com/doc/guide/using-your-ide#pycharm)

##### Weiyi 03/19/2020 15:16:13
I succeeded a month ago, but today I'm doing it on another computer, maybe there's something wrong, I'll check it for one more time now😀

##### User21 03/19/2020 16:19:47
how can i lower the complexity of my kuka youbot because i want to simulate more of them and i dont want to get performance issues

##### David Mansolino [Cyberbotics] 03/19/2020 16:21:00
Are you using any camera? Are you using the arm of the robot?

##### User21 03/19/2020 16:22:05
iam using the arm and lidar sensors

##### David Mansolino [Cyberbotics] 03/19/2020 16:22:44
The first things is to identify where is the bottlneck, physics complexity of the robot or the GPU measure of the lidar.

##### User21 03/19/2020 16:31:02
okay i lowered the frequency of the lida sensory and now its working better. But generally the wheels of the kuka are very complex arent they?

##### David Mansolino [Cyberbotics] 03/19/2020 16:32:21
OK, good. About the wheel of the kuka, they actually are not so complex, in Webots we use asymetrical friction as an optimization to simulate omnidirectional wheel, this way the physical complexity of the model is very low.

##### User21 03/19/2020 16:33:31
okay thanks!

##### David Mansolino [Cyberbotics] 03/19/2020 16:33:41
You're welcome

##### Weiyi 03/19/2020 16:51:02
> I succeeded a month ago, but today I'm doing it on another computer, maybe there's something wrong, I'll check it for one more time now😀

`@Weiyi` I found that I did not use the same python.exe as the internal IDE of webots, when I change it to system python, the problem is solved, thank you very much!😆

##### David Mansolino [Cyberbotics] 03/19/2020 19:01:44
`@Weiyi` you're welcome, thank you for the feedback!

##### tilly 03/21/2020 13:31:00
hi, if i opened a terminal on mac and type: webots --help it says that it doesnt know the command


do i have to go to a certain folder or something?



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/690921628464578610/unknown.png)
%end

##### Hue 03/21/2020 14:58:32
You have to set the environment variable WEBOTS\_HOME where your installation folder is at.


you can :

`export WEBOTS_HOME=/path/to/webots`

Also you can append this command to the end of of your ~/.bashrc or ~/.zshrc so the shell will remember it.

##### tilly 03/21/2020 15:04:40
Ok but this does not change the outcome


I get the same error

##### PTosidis 03/21/2020 15:06:42
Hello,

just a quick question. Is it possible to install the blender exporter on Windows'


?

##### dpimbi 03/21/2020 20:22:43
Hello, I am working on a 4 wheels robot that can follow a yellow line using light sensors. I am stuck on how to use the light sensors. If there is another better way to make 4 wheels robot follow a yellow line that i will save my life.  I am really a new Webots user. I would really appreciate your helps

##### Tahir [Moderator] 03/21/2020 21:44:19
`@dpimbi` check Adept robots Pioneer,  that is a 4 wheel drive robot but you have to add the sensor. There can also be some other 4 wheel robots already in Webots.

##### David Mansolino [Cyberbotics] 03/22/2020 07:59:24
`@dpimbi`, about the sensors, you might use DistanceSensors (whith infra-red type): [https://cyberbotics.com/doc/reference/distancesensor#infra-red-sensors](https://cyberbotics.com/doc/reference/distancesensor#infra-red-sensors)

Or a camera: [https://cyberbotics.com/doc/reference/camera](https://cyberbotics.com/doc/reference/camera)

For both option you can find example in Webots.

For DistanceSensors: [https://cyberbotics.com/doc/guide/epuck#e-puck\_line\_demo-wbt](https://cyberbotics.com/doc/guide/epuck#e-puck_line_demo-wbt)

For camera: [https://github.com/cyberbotics/webots/blob/master/projects/vehicles/worlds/city.wbt](https://github.com/cyberbotics/webots/blob/master/projects/vehicles/worlds/city.wbt)


`@PTosidis`, yes probably, there is nothing platform specific in this plugins.


`@tilly`, how did you install Webots?

Please make sure that the Webots application is in your `PATH` environment variable. Can you please show us the ouput of the `env` command?

##### Jeremy Jiang 03/22/2020 10:37:13
Hello, I am working with a darwin-op robot. Sometimes I find the value of positionSensors will be strange. For example, the range of footR is [-0.68, 1.04], but the value of the positionSensor is -3.45. This makes me confused. Even when I use simulationReset() function and find the robot looks natural，the positionSensor is still -3.45 rather than 0. I'm a  new hand and hope for your help.

##### Tosidis 03/22/2020 11:15:28
`@David Mansolino`  Will try the recommended version of blender, cause i got a newer one atm and it doesn't seem to work correctly. I will let you know if i face any problems

##### Weiyi 03/22/2020 12:13:56
Hello, I wonder if there is any difference in webots-R2020a-rev2\_setup.exe   and   webots-R2020b\_setup.exe     of github nightly build😆

##### Olivier Michel [Cyberbotics] 03/22/2020 14:45:06
Webots-R2020a-rev2 is a nightly build of the upcoming revision 2 (from the github master branch) while Webots-2020b is the upcoming major version (from the develop branch) and contains more features, but may be more unstable.

##### Weiyi 03/22/2020 14:46:09
OK, thank you very much!

##### zhanghua7099 03/22/2020 19:47:55
How to use Webot 8 now? I can't login and use it.

##### David Mansolino [Cyberbotics] 03/22/2020 20:02:52
Hi `@zhanghua7099`, please see [https://www.cyberbotics.com/doc/guide/general-faq#can-i-still-use-a-webots-version-before-the-r2019a-release](https://www.cyberbotics.com/doc/guide/general-faq#can-i-still-use-a-webots-version-before-the-r2019a-release)


Hi `@Jeremy Jiang` this looks like a bug, do you have a simple procedure to reproduce it?

##### zhanghua7099 03/23/2020 12:20:04
Thank you very much! `@David Mansolino`

##### David Mansolino [Cyberbotics] 03/23/2020 12:29:21
You're welcome

##### Francony 03/23/2020 17:26:40
Hi! I have a Webots Supervisor running a controller that gets the position of every node. When I hit play though my model moves because it is subject to gravity, but I wanted to get the positions without it moving. Is there a way to lock it in place?

##### Olivier Michel [Cyberbotics] 03/23/2020 17:30:32
Hi! Either you set the WorldInfo.gravity to 0 0 0, or you actively reset the position of every object to its initial value at every step (from the supervisor). Or you remove the Physics node from your objects so that they won't be subject to gravity and other dynamics behaviors.

##### Francony 03/23/2020 18:59:11
That fixed it, thanks

##### elkelkmuh 03/23/2020 22:48:16
Hi! I see the location of center of mass of op2. It is seen as red X. How can I obtain the values of position of red X, i.e. x and y coordinates of red X.

##### David Mansolino [Cyberbotics] 03/24/2020 06:17:30
HI `@elkelkmuh`, using the supervisor you can get the position of the center of mass of any node:


[https://www.cyberbotics.com/doc/reference/supervisor#wb\_supervisor\_node\_get\_center\_of\_mass](https://www.cyberbotics.com/doc/reference/supervisor#wb_supervisor_node_get_center_of_mass)


You can also read it in the field/node editor when you select the node and then the 'mass' tab: [https://www.cyberbotics.com/doc/guide/the-scene-tree#field-editor](https://www.cyberbotics.com/doc/guide/the-scene-tree#field-editor)

##### elkelkmuh 03/24/2020 07:50:06
Hi `@David Mansolino` how can I find support polygon  coordinate?

##### David Mansolino [Cyberbotics] 03/24/2020 07:52:40
The supervisor is again the way to go: [https://www.cyberbotics.com/doc/reference/supervisor#wb\_supervisor\_node\_get\_contact\_point](https://www.cyberbotics.com/doc/reference/supervisor#wb_supervisor_node_get_contact_point)

##### Tosidis 03/24/2020 08:44:49
Hi! I am having some issues with my webots installation. I was running some simulations when webots crashed. When i opened it again many textures wouldn't load correctly (such as the floor or tree textures in mavic\_pro sample world). I reinstalled webots, everything run smoothly until i got another crash and then I had the same problem. Error is suggesting that the image format is unsupported.

##### David Mansolino [Cyberbotics] 03/24/2020 08:45:26
Hi, Can you copy paste the exact error message you have ?

##### Tosidis 03/24/2020 08:45:40
yeah give me a sec

##### David Mansolino [Cyberbotics] 03/24/2020 08:45:48
Of course!


And what is your OS  and Webots version?

##### Tosidis 03/24/2020 08:46:39
WARNING: Texture image size of 'C:/Users/XXX/AppData/Local/Programs/Webots/projects/appearances/protos/textures/glossy\_car\_paint/glossy\_car\_paint\_normal.jpg' is not a power of two: rescaling it from -1x-1 to 0x0.

WARNING: Mavic2Pro (PROTO) > DEF FRONT\_LEFT\_HP\_HELIX Propeller > Solid > Shape > GlossyPaint (PROTO) > ImageTexture: Cannot load texture 'C:/Users/XXX/AppData/Local/Programs/Webots/projects/appearances/protos/textures/glossy\_car\_paint/glossy\_car\_paint\_normal.jpg': Unsupported image format.


Windows 10, 2020a rev1

##### David Mansolino [Cyberbotics] 03/24/2020 08:48:25
Are you launching Webots from the command line?

We had a similar issue a long time ago, see: [https://github.com/cyberbotics/webots/issues/137](https://github.com/cyberbotics/webots/issues/137)

##### Tosidis 03/24/2020 08:49:04
nope, through the shortcut


even though i found a solution in the issue

##### David Mansolino [Cyberbotics] 03/24/2020 08:51:30
Can you please try from the command line, following the instructions here:

[https://cyberbotics.com/doc/guide/starting-webots#windows](https://cyberbotics.com/doc/guide/starting-webots#windows)

Just to check if it works this way

##### Tosidis 03/24/2020 08:51:59
running it through webots.bat (instead of webots.exe, and with administrative rights (don't know if it is needed though)) solves the problem

##### David Mansolino [Cyberbotics] 03/24/2020 08:52:14
Perfect, very good news.

##### Tosidis 03/24/2020 08:52:30
it was suggested from omichel here : I could reproduce the problem as well, but I noticed that it can be fixed by starting webots.bat instead of webots.exe. This is probably due to the fact the DOS cmd.exe ignores the webots.exe.config file that adds an extra path to the search for shared libraries (e.g., ../../usr/bin).


[https://github.com/cyberbotics/webots/issues/137#issuecomment-457503914](https://github.com/cyberbotics/webots/issues/137#issuecomment-457503914)

##### David Mansolino [Cyberbotics] 03/24/2020 08:53:31
indeed, that should fix the library path issue 🙂

##### Tosidis 03/24/2020 08:53:40
And since i have another 'problem' maybe you could help me with that aswell

##### David Mansolino [Cyberbotics] 03/24/2020 08:53:49
Of course

##### Tosidis 03/24/2020 08:55:09
I am importing some models from Blender, but the texture url is not correct , which results in me needing to change the appearance colormap url in every model manually.


Is it possible to set a correct path for them so it loads them automatically? ( i need more than enough models to run some experiments and it really takes quite some time to change the url manually)

##### David Mansolino [Cyberbotics] 03/24/2020 08:56:25
Are you using the blender to Webots exporter or exporting from Blender to VRML ?

##### Tosidis 03/24/2020 08:56:39
blender to webots


( which i didn't have a success intalling in the latest blender version )

##### David Mansolino [Cyberbotics] 03/24/2020 08:57:33
Yes unfortunately, the exporter is not compatible with Blender 2.8 yet.


How did you defined the path, absolute or relative ?

##### Tosidis 03/24/2020 08:58:43
In blender?


while exporting you mean?

##### David Mansolino [Cyberbotics] 03/24/2020 08:59:20
in Blender

##### Tosidis 03/24/2020 09:03:09
David, thank you. You saved me quite some time!


I defined absolute paths in Blender file settings, and now its exporting the whole thing 🙂

##### David Mansolino [Cyberbotics] 03/24/2020 09:04:29
Perfect 🙂


You're welcome!

##### Tosidis 03/24/2020 09:05:40
Last question (for now 🙂 ) Is it possible to export a wbo file from blender, or i can only export a wbt, open it in webots and then export the object as wbo

##### David Mansolino [Cyberbotics] 03/24/2020 09:06:25
Unfortunately, Blender does not support wbo export

##### Tosidis 03/24/2020 09:06:51
Ok thank you, not a big deal, since my workload dropped dramatically with the texture thing 🙂

##### divya 03/24/2020 14:04:00
hi! I am very new to webots! can anyone tell me how to log something in webots in a C based controller?

##### Olivier Michel [Cyberbotics] 03/24/2020 14:04:16
Hi,


You can simply use printf  statements...

##### Hue 03/24/2020 14:05:03
Don't forget the trailing newline though 😉

##### divya 03/24/2020 14:05:11
i am using printf statements, but what i was looking for is to write to a file!

##### Olivier Michel [Cyberbotics] 03/24/2020 14:05:32
It's a standard C programming question, not related with Webots.

##### divya 03/24/2020 14:05:40
tried fprintf, it didnt work in webots


just creates a file but writes nothing in it!

##### Olivier Michel [Cyberbotics] 03/24/2020 14:06:52
Are you doing this in the main control loop?

##### divya 03/24/2020 14:07:19
yup!

##### Olivier Michel [Cyberbotics] 03/24/2020 14:07:46
If your code look like this [https://www.javatpoint.com/fprintf-fscanf-in-c](https://www.javatpoint.com/fprintf-fscanf-in-c), then it should work in a Webots controller as well.

##### divya 03/24/2020 14:08:19
it looks exactly like this!

##### Olivier Michel [Cyberbotics] 03/24/2020 14:08:46
Note: the resulting file will be located in your controller directory, so you must have write rights there so that the file will be created.

##### divya 03/24/2020 14:09:40
oh alright!! i will check the write rights!! thanks for the answers!! 🙂

##### osiixy 03/25/2020 12:36:12
hi! I use Manjaro and Webots is unable to build controller. During the make process an extra space is added after the WEBOTS\_HOME path (/opt/webots /resources   so after webots in my case), however my path does not contain that extra space (I've checked  and redefined it many time). It seems that it happens in the Makefile, but I cannot figure it out why.

##### David Mansolino [Cyberbotics] 03/25/2020 12:39:12
Hi `@osiixy`, we fixed an issue with makefiles adding a spaces in the file a few weeks ago in the development version of Webots: 

[https://github.com/cyberbotics/webots/pull/1304](https://github.com/cyberbotics/webots/pull/1304)

This is not yet released, but you can already get a patched version using the nightly builds to check if this fixes your issue:

[https://github.com/cyberbotics/webots/releases](https://github.com/cyberbotics/webots/releases)

Alternatively, you may also try to simply apply the patch to you local Makefile of your controller.

##### osiixy 03/25/2020 12:44:18
`@David Mansolino`  thank you!🤩  It worked (I just copypaste it for testing and changed \ to / cause of Linux)

##### David Mansolino [Cyberbotics] 03/25/2020 12:45:25
You're welcome 🙂

##### elkelkmuh 03/25/2020 15:28:29
Hi `@David Mansolino`
%figure
![Screenshot_20200325_182727_com.whatsapp.jpg](https://cdn.discordapp.com/attachments/565154703139405824/692394486172614696/Screenshot_20200325_182727_com.whatsapp.jpg)
%end
%figure
![Screenshot_20200325_182645.jpg](https://cdn.discordapp.com/attachments/565154703139405824/692394487271391232/Screenshot_20200325_182645.jpg)
%end


Where is Op2's x = 0 y = 0 z = 0 point in webots?

##### David Mansolino [Cyberbotics] 03/25/2020 15:31:31
This point is the origin of the robot. It is where the handles are located when you select the robot.

##### Laojiang 03/25/2020 15:33:12
how can I reset my model by code?

##### David Mansolino [Cyberbotics] 03/25/2020 15:35:40
Hi `@Laojiang` do you want to reset the whole world or only one specific robot?

##### Laojiang 03/25/2020 15:36:38
Just one robot, my model is a walker\_two\_legs,

##### Olivier Michel [Cyberbotics] 03/25/2020 15:36:55
Hi, you can use the wb\_supervisor\_node\_reset\_physics(robot\_node); See the documentation here: [https://cyberbotics.com/doc/guide/supervisor-programming](https://cyberbotics.com/doc/guide/supervisor-programming)

##### Laojiang 03/25/2020 15:37:42
ok ,thank you


How can I use this C code 'wb\_supervisor\_node\_reset\_physics(robot\_node)' by python?


I found it ,thank you


I try to use 'Supervisor.simulationResetPhysics(robot)' to reset my robot. However, there is an error:TypeError: in method 'Supervisor\_simulationResetPhysics', argument 1 of type 'webots::Supervisor *'


How can I solve it? or how can I use the code nomally?

##### Olivier Michel [Cyberbotics] 03/26/2020 07:20:32
Does your `Robot` node have the `supervisor` field set to `TRUE`?


If so, you can use `simulationResetPhysics` like any other robot API function.


(also your robot controller class should be derived from `Supervisor`).


And then you can call `self.simulationResetPhysics(robot)`.


(assuming you are coding your controller in Python).

##### Laojiang 03/26/2020 07:51:22
I tried many times. However, the error still here😔
%figure
![862GPJM9MK6T5Y_ZP84.png](https://cdn.discordapp.com/attachments/565154703139405824/692641837546209280/862GPJM9MK6T5Y_ZP84.png)
%end



%figure
![JS_EGWRG9BBR7ET7ND.png](https://cdn.discordapp.com/attachments/565154703139405824/692641882093912094/JS_EGWRG9BBR7ET7ND.png)
%end



%figure
![KALU7ANRCUET_L5_VG2MY.png](https://cdn.discordapp.com/attachments/565154703139405824/692641960598437908/KALU7ANRCUET_L5_VG2MY.png)
%end

##### Olivier Michel [Cyberbotics] 03/26/2020 07:52:40
You should call `robot.simulationResetPhysics(robotNode)`


where `robotNode` points to your robot node.

##### Laojiang 03/26/2020 07:56:10
I'm sorry but...😔
%figure
![2EMY3NMUOTHXJJA1LT2W.png](https://cdn.discordapp.com/attachments/565154703139405824/692643042733195294/2EMY3NMUOTHXJJA1LT2W.png)
%end

##### Olivier Michel [Cyberbotics] 03/26/2020 07:56:55
Your robot object should be a Supervisor instance, not a Robot instance.


Like in `WEBOTS_HOME/projects/languages/python/controllers/driver/driver.py`.


Sorry, my advice was wrong...

##### Laojiang 03/26/2020 08:11:04
Where is wrong？The .py document?

##### Olivier Michel [Cyberbotics] 03/26/2020 08:11:21
Instead of calling `robot.simulationResetPhysics(robotNode)`, you should get a pointer to the robot you want to reset physics and call `my_robot.resetPhysics()`


As documented here: [https://www.cyberbotics.com/doc/reference/supervisor?tab-language=python#wb\_supervisor\_node\_reset\_physics](https://www.cyberbotics.com/doc/reference/supervisor?tab-language=python#wb_supervisor_node_reset_physics)


Please send me you whole python code at support@cyberbotics.com and I will point you to the problem more precisely.

##### Laojiang 03/26/2020 08:30:11
I have send you my code

##### Olivier Michel [Cyberbotics] 03/26/2020 08:38:19
I received an e-mail from you, but there is no code, it only says "I want to build a reinforcement learning project,and you needn't to see what I comment.



I am debugging this reset function at the end of the code"


Then a picture, but still no code... 😒

##### Laojiang 03/26/2020 08:39:24
okok, I try again


now?The picture is my model😅

##### Olivier Michel [Cyberbotics] 03/26/2020 08:43:29
Got it.

##### Laojiang 03/26/2020 09:00:04
I change my cade as you advise, but  this error
%figure
![DUVJ0RXMNIMD0H.png](https://cdn.discordapp.com/attachments/565154703139405824/692659123719766076/DUVJ0RXMNIMD0H.png)
%end

##### David Mansolino [Cyberbotics] 03/26/2020 09:01:06
Do you have any other warning ?

##### Laojiang 03/26/2020 09:02:28
no,just this one

##### David Mansolino [Cyberbotics] 03/26/2020 09:12:28
Can you print this (just to be sure):

```Python
print([robot, robot.getSelf()])
```

##### Laojiang 03/26/2020 09:15:17
The result is that.
%figure
![0HDD_N_N3WWW86DOG5.png](https://cdn.discordapp.com/attachments/565154703139405824/692662955883495495/0HDD_N_N3WWW86DOG5.png)
%end

##### David Mansolino [Cyberbotics] 03/26/2020 09:15:44
Which version of Webots are you using?


Is the ``supervisor``field of your robot set to TRUE ?

##### Laojiang 03/26/2020 09:17:57
webots R2020a. Yes, it's true

##### David Mansolino [Cyberbotics] 03/26/2020 09:18:20
Can you please try with revision 1 of R2020a ?

##### Laojiang 03/26/2020 09:20:19
I have to install a new webots😱

##### David Mansolino [Cyberbotics] 03/26/2020 09:31:35
Or if you don't want can you maybe send us your world file ?

##### Laojiang 03/26/2020 09:32:04
ok, I'll send you

##### David Mansolino [Cyberbotics] 03/26/2020 09:32:39
Thank you

##### Laojiang 03/26/2020 09:35:12
I have send a .rar file to you.

##### David Mansolino [Cyberbotics] 03/26/2020 09:40:26
Thank you I just received it, let me try.

##### Simon Steinmann [Moderator] 03/26/2020 09:43:49
I have run into a very peculiar issue. For some reason the time required for this timestep increases with each reset. This adds up quickly. In the simulation this manifests itself by requiring many minutes up to hours of simulation time, even though it should only be milliseconds (128 to be exact). Running at real-time-speed, resets would take literally 30min-2h after a little bit
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/692670134627729458/unknown.png)
%end


Terminal output, showing the increased time required
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/692670422348595270/unknown.png)
%end

##### David Mansolino [Cyberbotics] 03/26/2020 09:45:38
HI `@Simon Steinmann` we are aware of the issue, this is reported here: [https://github.com/cyberbotics/webots/issues/1432](https://github.com/cyberbotics/webots/issues/1432)

We are trying to fix the problem as soon as possible, you can follow this issue to get updates.

##### Simon Steinmann [Moderator] 03/26/2020 09:47:05
Thank you. Is there a workaround in the meantime to reset a simulation without this happening? I'm using it for Reinforcement learning. I have to reset everything without resetting the controller.


perhaps manually moving to an initial position + physics reset?

##### David Mansolino [Cyberbotics] 03/26/2020 09:48:03
Yes, you might use this way of resetting manually your robots: [https://cyberbotics.com/doc/guide/using-numerical-optimization-methods#using-the-wb\_supervisor\_field\_set\_-and-wb\_supervisor\_simulation\_reset\_physics-functions](https://cyberbotics.com/doc/guide/using-numerical-optimization-methods#using-the-wb_supervisor_field_set_-and-wb_supervisor_simulation_reset_physics-functions)

##### Simon Steinmann [Moderator] 03/26/2020 09:49:34
Thanks :).

##### David Mansolino [Cyberbotics] 03/26/2020 09:50:05
You're welcome 🙂

##### Simon Steinmann [Moderator] 03/26/2020 09:50:42
And I hope this bug gets fixed soon. It is essential for Reinforcement Learning. Soon I might be able to provide a template for OpenAI based Reinforcement learning, coupled with webots

##### David Mansolino [Cyberbotics] 03/26/2020 09:52:05
`@Laojiang`, I checked your wimulation and the Robot `supervisor` field is not set to `TRUE` in the Webots scene-tree.

Please set it to `TRUE`, save the simulation, revert the simulation and try again, it should work this way.

##### Laojiang 03/26/2020 10:04:31
Isn't it the place I marked?
%figure
![H1DQKJMXJUZCWQNIH95RD.png](https://cdn.discordapp.com/attachments/565154703139405824/692675344297230386/H1DQKJMXJUZCWQNIH95RD.png)
%end

##### David Mansolino [Cyberbotics] 03/26/2020 10:04:44
Yes it is


Make sure to save and revert when you change this field

##### Laojiang 03/26/2020 10:13:45
I restart my webots, and the error has gone.However, my robots don't reset itself.


Maybe I need to change the code
%figure
![HQH78WCNXL7Y_EPH5S.png](https://cdn.discordapp.com/attachments/565154703139405824/692678530454257724/HQH78WCNXL7Y_EPH5S.png)
%end

##### David Mansolino [Cyberbotics] 03/26/2020 10:21:53
Reseting the physics just means that the velocity of all the Solids will be set to 0, but this will not reset the position. You probably better reset the simulation if you want the robot to be placed at it's initial position, please see:  [https://cyberbotics.com/doc/guide/using-numerical-optimization-methods#using-the-wb\_supervisor\_world\_reload-function](https://cyberbotics.com/doc/guide/using-numerical-optimization-methods#using-the-wb_supervisor_world_reload-function)

By the way I am adding a warnings in the Webots code that will warn you in the future versions of Webtos if you use this function while the 'supervisor' field is not set to ``TRUE``: [https://github.com/cyberbotics/webots/pull/1501](https://github.com/cyberbotics/webots/pull/1501)

##### Simon Steinmann [Moderator] 03/26/2020 12:26:33
I may have missed something, but I couldnt find the answer in the documentation: How can I fix the base of the robot? I have a robot node with the irb4600-40 proto node in children. As it is a robotic arm, I want to have the base fixed in the world. currently it is wiggling around a bit (as can be seen from the translation and rotation of the children node)
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/692711090106138664/unknown.png)
%end

##### David Mansolino [Cyberbotics] 03/26/2020 12:48:46
HI `@Simon Steinmann`, in the development version of Webots we added a few weeks ago a new field allowing you to attach the robot to the environment:

[https://github.com/cyberbotics/webots/pull/1349](https://github.com/cyberbotics/webots/pull/1349)

To use this patch you can either copy the patch to your local version of the PROTO or use on of the nightly builds of Webtos including the patch: [https://github.com/cyberbotics/webots/releases](https://github.com/cyberbotics/webots/releases)



Another workaround would be to define a 'boundingObject' for your parent PROTO without physics object.

##### Simon Steinmann [Moderator] 03/26/2020 13:29:51
thank you 🙂


Is there a reason then, to have the robotic arm proto inside of a generic robot node?

##### David Mansolino [Cyberbotics] 03/26/2020 13:32:30
You're welcome.

With the fixed/updated version not anymore, you will just have to set it as root node and set the 'staticBasis' field to ``TRUE``.

##### Simon Steinmann [Moderator] 03/26/2020 13:32:53
root node?

##### David Mansolino [Cyberbotics] 03/26/2020 13:33:33
I mean you can remove the parent 'Robot' node and put instead directly the rb4600-40 node.

##### Simon Steinmann [Moderator] 03/26/2020 13:33:48
ah okay, thanks that answer my question 🙂

##### David Mansolino [Cyberbotics] 03/26/2020 13:34:03
You're welcome.

##### Simon Steinmann [Moderator] 03/26/2020 14:05:43
Is there already some sort of implementation for trajectories? Currently I calculate the end position with Inverse Kinematics, however, the PID controller just changes the angles of the motors in proportion to the start and goal angle. This can cause the end effector to crash into the ground, if the new position is a larger positional change. Any Ideas on how to approach this? For example with ROS, Moveit and Gazebo, there is trajectory controllers. Is there anything similar in Webots?

##### David Mansolino [Cyberbotics] 03/26/2020 14:10:23
Webots doesn't provide such tool out of the box, but it is very easy to use external libraries executing inverse kinematics, here is an example with the same robot arm that is using the ``ikpy``python  module (this module is used internally by MoveIt too): [https://github.com/cyberbotics/webots/blob/master/projects/robots/abb/irb/controllers/inverse\_kinematics/inverse\_kinematics.py](https://github.com/cyberbotics/webots/blob/master/projects/robots/abb/irb/controllers/inverse_kinematics/inverse_kinematics.py)



And here is an example of the result:



[https://www.youtube.com/watch?v=Jq0-DkEwwj4](https://www.youtube.com/watch?v=Jq0-DkEwwj4)

##### Simon Steinmann [Moderator] 03/26/2020 14:42:52
I already implemented IKFast. The issue is not IK itself, but motion planning (trajectories). Meaning not just getting a valid solution vor position B, but the 'how to get from A to B'


Have you interfaced with moveit?


Or if not, if we create a trajectory using moveit for example (a list of joint positions), how would we go about executing these in Webots?


For example: 

Lets say we execute in the webots controller a motors.setPosition(pos) for every timestep, with each position being a waypoint of the trajectory. Would this work? Or would we run into problems with the internal PID controller. To my understanding, it tries to reach that position and then stop, while we want to keep going, after it reaches that position

##### David Mansolino [Cyberbotics] 03/26/2020 14:53:22
We have an interface with ROS and therefore MoveIt is available through ROS, however this part is only available for the Universal Robots. But it should be quite simple to extend it to other robotic arms, here is the description: [https://github.com/cyberbotics/webots/tree/master/projects/robots/universal\_robots/resources/ros\_package/ur\_e\_webots](https://github.com/cyberbotics/webots/tree/master/projects/robots/universal_robots/resources/ros_package/ur_e_webots)

The code of the controller providing the ROS interface is available here: [https://github.com/cyberbotics/webots/tree/master/projects/robots/universal\_robots/controllers/universal\_robots\_ros](https://github.com/cyberbotics/webots/tree/master/projects/robots/universal_robots/controllers/universal_robots_ros)

Alternatively, we are currently creating a more powerfull and generic interface with ROS2: [https://github.com/cyberbotics/webots\_ros2](https://github.com/cyberbotics/webots_ros2)

But MoveIt support for ROS2 is still not perfect.

> For example: 

> Lets say we execute in the webots controller a motors.setPosition(pos) for every timestep, with each position being a waypoint of the trajectory. Would this work? Or would we run into problems with the internal PID controller. To my understanding, it tries to reach that position and then stop, while we want to keep going, after it reaches that position

`@Simon Steinmann` this should work, if you make sure to set the position at each step it should work, and even better, if I am not wrong moveit can generate velocity in addition of position, so you can also specify the velocity at each step in Webots in addition of the position.

##### Simon Steinmann [Moderator] 03/26/2020 14:55:07
Thank you, I will have a look. So many rabbit holes 😄

##### David Mansolino [Cyberbotics] 03/26/2020 14:55:36
You're welcome

##### CadenGS 03/27/2020 19:04:22
Im attempting to install Webots for a class but when I run the installer after download it does nothing


so I cant install it


any help?

##### Olivier Michel [Cyberbotics] 03/28/2020 11:51:52
Hi, which version did you try to install? On which platform? Linux, Windows, mac OS?

##### Simon Steinmann [Moderator] 03/28/2020 12:52:52
The readme.me uses wrong launch commands [https://github.com/cyberbotics/webots/tree/master/projects/robots/universal\_robots/resources/ros\_package/ur\_e\_webots](https://github.com/cyberbotics/webots/tree/master/projects/robots/universal_robots/resources/ros_package/ur_e_webots)


webots uses the ur5e robot, not the ur5


also I am not sure about the standard installation procedures. I just copied the whole ur\_e\_webots folder into my catkin\_ws/src, where I also have the universal\_robots package, and compiled with catkin\_make. Using the correct commands for ur\_e it works 🙂

##### CadenGS 03/28/2020 16:05:30
`@Olivier Michel` Windows

##### [] 03/28/2020 18:05:48
Hi,

I'm trying to set with PYTHON Webots API the color of led based on the camera readings RGB colors. But I cant manage to find any conversion tool in Webots API that allos to convert RGB readings form



image\_array = camera\_object.getImageArray();

image\_array = [[[116, 55, 35]], [[117, 57, 37]], [[115, 57, 39]]]



Into the HEX format that LED requires ( R8G8B8 ).



Any idea on how this could be accomplished?

Isnt there a :



led\_camera.set(value=[[116, 55, 35])?


Ok I think I gt the answer:


def rgb\_to\_rgbint(rgb):

    r = rgb[0]

    g = rgb[1]

    b = rgb[2]

    rgb = 65536 * r + 256 * g + b

    #value = hex(rgb)

    #value = '0x%02x%02x%02x' % rgb

    return rgb


int\_rgb = rgb\_to\_rgbint((255, 0, 0))

print("HEX VALUE===")

print(int\_rgb)



led\_z\_pos.set(int\_rgb)


We input the int value and seems to work, while if we convert it to hex(int\_rgb) it gives error.

##### David Mansolino [Cyberbotics] 03/30/2020 05:39:20
Hi `@[]`, you're solution is pefectly correct indeed.


Even so we usually prefeer this way:

```Python
 rgb = (r << 16) + (g << 8) + b
```


`@CadenGS`, which version of Windows are you using? Can you trying launching the installer as administrator?


`@Simon Steinmann` you're right, I will correct the name of the launh files. Thank you

##### elkelkmuh 03/30/2020 05:44:02
Hi `@David Mansolino`, Can I change the xyz point to the feet, i.e. fsr?  Or how do I find the distance to the feet and recalculate?
%figure
![Screenshot_20200325_182645.jpg](https://cdn.discordapp.com/attachments/565154703139405824/694059343435399268/Screenshot_20200325_182645.jpg)
%end
%figure
![Screenshot_20200325_182727_com.whatsapp.jpg](https://cdn.discordapp.com/attachments/565154703139405824/694059343804629062/Screenshot_20200325_182727_com.whatsapp.jpg)
%end

##### David Mansolino [Cyberbotics] 03/30/2020 05:50:35
`@elkelkmuh` I am sorry but your question is not clear, what do you mean by xyz point ?

##### elkelkmuh 03/30/2020 05:58:58

%figure
![Screenshot_20200330_0852592.jpg](https://cdn.discordapp.com/attachments/565154703139405824/694063102378901515/Screenshot_20200330_0852592.jpg)
%end

##### David Mansolino [Cyberbotics] 03/30/2020 06:00:03
This indicate the position of the node you have selected, this is defined inside the PROTO you can change it by changing the 'translation' field.

##### elkelkmuh 03/30/2020 06:02:48
This xyz point, Doesn't it also indicate the center of mass?

##### David Mansolino [Cyberbotics] 03/30/2020 06:03:22
Yes, CoM means center of mass indeed.

##### Tentaculus 03/30/2020 11:11:05
Hey, I need to build a PC that is able to run a simulation with 10 Nao robots playing soccer (see Robocup) close to realtime. What kind of CPU/GPU do you think would be strong enough to make that happen?

##### Olivier Michel [Cyberbotics] 03/30/2020 11:17:39
Hi, I would recommend a Intel i9-10980XE or AMD Ryzen 9 3950X CPU and a NVIDIA RTX 2080 (or RTX 2070 or GTX 1080 Ti).


Depending on your budget, a slightly more modest configuration may also do the job if your simulation is not too intensive (like not using a high frame rate for high resolution camera images, low physics time step, etc.).


Also, if robot controllers are supposed to run on the same machine, I would prefer a machine with at least 12 virtual cores (which is anyhow the case for the CPUs I just recommended).

##### Tentaculus 03/30/2020 11:27:32
Do you think the AMD Ryzen 9 3900X is a good choice instead? It has 12 cores and is 300$ cheaper than your recommendation

##### Olivier Michel [Cyberbotics] 03/30/2020 11:28:49
Sure, it should probably be sufficient.

##### Tentaculus 03/30/2020 11:29:40
Alright thank you!

##### elkelkmuh 03/30/2020 11:46:02
@David Mansolino I want to know. How to find the center of the right and left foot relative to the Com point.

##### CadenGS 03/30/2020 11:50:24
`@David Mansolino` windows 10 and running as admin doesnt work

##### David Mansolino [Cyberbotics] 03/30/2020 11:52:06
`@CadenGS` that's strange, and when you run the installer, nothing is happenning at all?


Maybe your antivirus is blocking the installation?

##### CadenGS 03/30/2020 11:53:06
Both in and out of admin just nothing happens

##### David Mansolino [Cyberbotics] 03/30/2020 11:53:46
> `@David Mansolino` I want to know. How to find the center of the right and left foot relative to the Com point.

`@elkelkmuh` from the node editor you can get the absolute position of the center of mass, then from the node editor too ('position' tab) you can get the position of the absolute position of the selected node.


> Both in and out of admin just nothing happens

`@CadenGS` Maybe your antivirus is blocking the installation? Can you try disabling it temporarily to install Webots ?

##### CadenGS 03/30/2020 11:55:18
Like my Windows firewall?

##### David Mansolino [Cyberbotics] 03/30/2020 11:56:08
If you only have firewall it should not cause any problem

##### CadenGS 03/30/2020 11:58:22
I don’t believe I have any other antivirus

##### David Mansolino [Cyberbotics] 03/30/2020 11:59:01
Can you maybe try to install Webots from a command prompt?

```
./webots-R2020a-rev1_setup.exe //VERYSILENT //SUPRESSMSGBOXES //ALLUSERS
```

##### CadenGS 03/30/2020 12:03:19

%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/694154792121008218/unknown.png)
%end

##### David Mansolino [Cyberbotics] 03/30/2020 12:04:11
is the Webots installer in the correct folder from where you are trying to start it?

##### CadenGS 03/30/2020 12:04:43
i have my installer in downloads

##### David Mansolino [Cyberbotics] 03/30/2020 12:04:44
i.e. ``Users/cgear``

##### CadenGS 03/30/2020 12:04:50
so no

##### David Mansolino [Cyberbotics] 03/30/2020 12:05:02
ok in that case you should probably ``cd Downloads``before

##### CadenGS 03/30/2020 12:07:07

%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/694155751056474182/unknown.png)
%end


nothing i do lets the installer run

##### David Mansolino [Cyberbotics] 03/30/2020 12:13:01
you are missing the initial dot.

##### Olivier Michel [Cyberbotics] 03/30/2020 12:13:40
Or should remove the "/" at the beginning.

##### CadenGS 03/30/2020 12:55:14

%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/694167857084497950/unknown.png)
%end


no . and no / worked i think

##### David Mansolino [Cyberbotics] 03/30/2020 12:58:17
Perfect, thank you for the feedback

##### CadenGS 03/30/2020 13:15:33
thanks for the help

##### David Mansolino [Cyberbotics] 03/30/2020 13:18:23
You're welcome

##### tilly 03/30/2020 13:22:35
Hi, how can i make the texture on the floor that the ground sensors spot a difference (eg. on the red ground is a different value than on the black). I want to use the Thymio II
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/694174741090795610/unknown.png)
%end

##### David Mansolino [Cyberbotics] 03/30/2020 13:32:54
`@tilly` the ground distance sensors can sense diffetence in the red component of the texture and roughness of the texture, so the important textures are the ``baseColorMap`` and ``roughnessMap``.

##### CadenGS 03/30/2020 13:38:54
is it possible to create and use your own 3D models as bots

##### tilly 03/30/2020 13:39:02
Where can i set those

##### CadenGS 03/30/2020 13:39:03
like a fusion cad of a vex robot for example

##### Olivier Michel [Cyberbotics] 03/30/2020 13:40:07
`@CadenGS`: yes, you need to convert and import such models from your CAD software to Webots.

##### CadenGS 03/30/2020 13:40:23
does it need to be imprted as a certain file type? if so which?

##### Olivier Michel [Cyberbotics] 03/30/2020 13:40:36
Yes, VRML97.


So, you need to convert each part of your model to VRML97 to create IndexedFaceSet primitives which you can then re-use in Webots.


I would recommend you to follow our tutorials for creating a new robot from scratch.

##### CadenGS 03/30/2020 13:42:03
where can I find these videos, on the webots yt?

##### Olivier Michel [Cyberbotics] 03/30/2020 13:42:11
[https://cyberbotics.com/doc/guide/tutorials](https://cyberbotics.com/doc/guide/tutorials)

##### CadenGS 03/30/2020 13:42:20
thank you

##### Olivier Michel [Cyberbotics] 03/30/2020 13:42:23
You should follow tutorial 1 to 7.

##### David Mansolino [Cyberbotics] 03/30/2020 13:44:03
> Where can i set those

`@tilly` it is in the PBRappearance node of your floor appearance definition.

##### tilly 03/30/2020 14:16:21
is there a way to add this node
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/694188272217358416/unknown.png)
%end


i cant find it

##### Hue 03/30/2020 14:18:18
It is located in PROTO nodes (Webots projects)->objects->floors, have you tried to type `rect` in the Find searching field ? (Add a node popup)

##### tilly 03/30/2020 14:26:33
i have a solution where i made every different color a new floor it works but i always get a warning that the world is to complex

##### Olivier Michel [Cyberbotics] 03/30/2020 15:33:55
What kind of warning do you get exactly?

##### David Mansolino [Cyberbotics] 03/30/2020 15:47:13
> i have a solution where i made every different color a new floor it works but i always get a warning that the world is to complex

`@tilly` you can add several visual plane, but please avoid adding several coplanar physical planes.

##### furkann 03/30/2020 22:01:52
hi guys when I want to open webots, a form opens and wants e-mail and pw. but I dont have account and then when I click for registration webpage says 404 not found

##### Darko Lukić [Cyberbotics] 03/30/2020 22:05:19
`@furkann`  You don't need an account to use Webots. Do you have Webots installed on your computer?

##### furkann 03/30/2020 22:06:33
here is my app open form, I installed I think
%figure
![Capture.PNG](https://cdn.discordapp.com/attachments/565154703139405824/694306603372904458/Capture.PNG)
%end

##### Darko Lukić [Cyberbotics] 03/30/2020 22:08:32
Is there a reason you use the old version of Webots. If not, you can download the newest version of Webots here:

[https://github.com/cyberbotics/webots/releases/download/R2020a-rev1/webots-R2020a-rev1\_setup.exe](https://github.com/cyberbotics/webots/releases/download/R2020a-rev1/webots-R2020a-rev1_setup.exe)

and you will not need an account.


`@furkann` A bit of background. Webots used to be a commercial product until the version R2019a - reason you are seeing the registration form. After R2019a (R2019a included) Webots is open-source! More about it here:

[https://twitter.com/webots/status/1075019490096762881](https://twitter.com/webots/status/1075019490096762881)

##### furkann 03/30/2020 22:14:12
Many thanks for you interest and help. I am newbie in this kind of jobs 🙂

##### Darko Lukić [Cyberbotics] 03/30/2020 22:14:43
No problem, good luck!

##### 🍎小苹果🍎 03/30/2020 22:41:01
Hi! I'm getting error in sumo\_supervisor

>>> TypeError : '<' not supported between instances of 'Edge' and 'Edge'



and sumo stops working. I didn't change anything it's was working yesterday I can't understand 😢

##### David Mansolino [Cyberbotics] 03/31/2020 05:45:01
`@🍎小苹果🍎`, did you updated the Webots, Python or SUMO version installed on your computer since yesterday?

##### 🍎小苹果🍎 03/31/2020 10:05:14
No I didn't

##### Dorteel 03/31/2020 11:35:50
Hi guys! Do you know if there is a die PROTO somewhere I could use?

##### David Mansolino [Cyberbotics] 03/31/2020 11:37:59
Not as I know, but it should be quite simple to create one from the ``SolidRoundedBox``object:

[https://cyberbotics.com/doc/guide/object-solids#solidroundedbox](https://cyberbotics.com/doc/guide/object-solids#solidroundedbox)

Basically you just have to set the dimensions and texture.


> No I didn't

`@🍎小苹果🍎` did you change anything else to your system since yesterday?


Otherwise, would it be possible to get the complete error message?

##### Dorteel 03/31/2020 11:40:08
Perfect, thank you `@David Mansolino` !

##### David Mansolino [Cyberbotics] 03/31/2020 11:44:43
You're welcome

##### kwy 03/31/2020 11:47:56
Hello, i'm building a supervisor controller in python, before I try to get "root = supervisor.getRoot()" like " root = wb\_supervisor\_node\_get\_root(); " in c,   I have to get the "supervisor", but I don't know how to get this.  ("supervisor = robot.getSupervisor()" is not right)

##### David Mansolino [Cyberbotics] 03/31/2020 11:54:08
If you want to get the supervisor itself you should use:

```Python
supervisorNode = supervisor.getSelf()
```

##### kwy 03/31/2020 11:56:23
if i try this, there is an error "Only one instance of the Robot class should be created"
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/694515436267503616/unknown.png)
%end


how to get the class of "supervisor"

##### David Mansolino [Cyberbotics] 03/31/2020 11:57:37
The supervisor class inherits from the robot class, so you should only call:

```
supervisor = Supervisor()
```

And remove the:

```
robot = Robot()
```

You can then use the `supervisor` instance as if it was a `robot` instance

##### kwy 03/31/2020 11:58:09
but i also need "robot.step(8000) "

##### David Mansolino [Cyberbotics] 03/31/2020 11:58:39
Then simply replace it by:

```Python
supervisor.step(8000)
```

##### kwy 03/31/2020 11:59:28
ok thanks ! i'd try it

##### David Mansolino [Cyberbotics] 03/31/2020 11:59:35
You're welcome

##### kwy 03/31/2020 12:01:21
It works! 😆  thanks

##### Dorteel 03/31/2020 12:03:28
Hi again, the rounded box turns into a ball when I try to make it 2cm wide cube. Tried changing the borderradius and subdivision, but didn't notice any changes
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/694517219631300608/unknown.png)
%end


also, is it possible to have different pictures on all sides?

##### kwy 03/31/2020 12:10:21
Hello, for emitter I can't change "robot" to "supervisor"?
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/694518949915918356/unknown.png)
%end

##### Olivier Michel [Cyberbotics] 03/31/2020 12:10:43
Yes, you can.

##### kwy 03/31/2020 12:11:11
but i get Error: wb\_emitter\_send\_packet(): invalid argument: data = NULL.

##### Olivier Michel [Cyberbotics] 03/31/2020 12:11:37
That's another problem.


You cannot send a NULL packet.

##### David Mansolino [Cyberbotics] 03/31/2020 12:15:08
> Hi again, the rounded box turns into a ball when I try to make it 2cm wide cube. Tried changing the borderradius and subdivision, but didn't notice any changes

`@Dorteel` You should set the ``borderRadius``to a smaller value (e.g. 0.002).

About the different pictures, I am not so sure. You probably have to create your own model for this.

##### kwy 03/31/2020 12:15:56
I'm trying to learn how to use supervisor in Python..
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/694520356924293232/unknown.png)
%end

##### Dorteel 03/31/2020 12:16:01
thank you, that worked!

##### kwy 03/31/2020 12:31:16
so ...how can i fix this error, I wrote this python based on the sample in c.

##### David Mansolino [Cyberbotics] 03/31/2020 12:32:06
can you print the value of the ``robot\_coords``?


Just to make sure what it returns

##### kwy 03/31/2020 12:33:08

%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/694524686071234590/unknown.png)
%end

##### David Mansolino [Cyberbotics] 03/31/2020 12:34:22
Ok thank you, that's strange, it is supposed to work


Can you send me the code of you controller so that I can try ?

##### kwy 03/31/2020 12:38:54
there are two instances, "DEF GPS\_ROBOT  Robot" named "MyBot" and "Robot" named "gps\_supervisor". the fist one use the class"Robot" , and the second use the class"Supervisor". and the emitter is equipped on the first one not "supervisor".


how can i send the whole code to you , or should i send the world to you?

##### David Mansolino [Cyberbotics] 03/31/2020 12:40:28
> the emitter is equipped on the first one not "supervisor"

That looks strange since you are trying to emit the message from the superviros


Probably just the code is enough, thank you

##### kwy 03/31/2020 12:41:29

> **Attachment**: [message.txt](https://cdn.discordapp.com/attachments/565154703139405824/694526787614670918/message.txt)

##### David Mansolino [Cyberbotics] 03/31/2020 12:49:20
Thank you


I will test and let you know

##### kwy 03/31/2020 12:51:21
Thanks!


I found the emitter is equipped on the supervisor.. still don't know how to fix

##### David Mansolino [Cyberbotics] 03/31/2020 14:08:52
`@kwy` I checked your controller and the problem is that in Python the `send` function does accept strings only, you might change your controller like this to send the coordinate as a string:

```Python
from controller import Supervisor

TIME_STEP = 64

supervisor = Supervisor()
# /* get a handler to the emitter and to the robot /
emitter = supervisor.getEmitter("emitter")

# / get the field which contains the position of the robot*/
robot_node = supervisor.getFromDef("GPS_ROBOT")

robot_translation = robot_node.getField("translation")

while supervisor.step(TIME_STEP) != -1:
    robot_coords = robot_translation.getSFVec3f()
    emitter.send("%lf %lf %lf" % (robot_coords[0], robot_coords[1], robot_coords[2]))
```

Or use the Python `struct` module as explained in the Pyton part of the emitter.send function documentation: [https://www.cyberbotics.com/doc/reference/emitter?tab-language=python#emitter-functions](https://www.cyberbotics.com/doc/reference/emitter?tab-language=python#emitter-functions)

##### ClBaze 03/31/2020 15:05:09
Hello, I'm using the supervisor getFromDef() function to get a pointer to a robot in the scene. It returns a node pointer. Is it possible to cast this pointer to a Robot pointer ?

##### David Mansolino [Cyberbotics] 03/31/2020 15:05:45
You mean a pointer to a Robot class of the Webots API ?

##### ClBaze 03/31/2020 15:05:51
exactly


my bad

##### David Mansolino [Cyberbotics] 03/31/2020 15:06:30
No unfortunately the node pointer will let you get/change the node content but not cast it to a robot to be used as if you were the controller.

##### ClBaze 03/31/2020 15:07:18
Ok thanks

##### David Mansolino [Cyberbotics] 03/31/2020 15:11:10
You're welcome

##### ClBaze 03/31/2020 16:17:17
I want to lock/unlock the connector of a robot from a supervisor. I tried to modify the isLocked field since I havn't access to the lock() function from the supervisor, and the value change but the connector won't disconnect


unilateralUnlock field is set to TRUE for both connectors


I've also tried to set isLocked to false for both connectors just in case but same issue


Am I missing something ?

##### w3. eydi 03/31/2020 18:27:20
`@David Mansolino` First, I wish you and your loved ones healthy days. 



Does blender webots exporter work on windows? And second question is : will exporter work in new version like 2.8?


[https://github.com/cyberbotics/blender-webots-exporter](https://github.com/cyberbotics/blender-webots-exporter)


I couldn't find any information about these questions here.

## April

##### kwy 04/01/2020 02:49:15
`@David Mansolino` Thanks!!!

##### alsk 04/01/2020 04:52:10
Hello,Is there a way to change  the maxtorque'value& the maxvelocity's value to infinity ????



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/694771077015928842/unknown.png)
%end


in webot tree!

##### Olivier Michel [Cyberbotics] 04/01/2020 05:08:35
No. You can put huge values if you want, but infinity is not an option.

##### alsk 04/01/2020 05:23:12
ok, Thank you

##### David Mansolino [Cyberbotics] 04/01/2020 05:25:38
> `@David Mansolino` First, I wish you and your loved ones healthy days. 

> 

> Does blender webots exporter work on windows? And second question is : will exporter work in new version like 2.8?

Hi `@w3. eydi`, I wish you healthy days too, thank you.

The blender exporter is indeed supposed to work on Windows, however, for now it does not support versions > 2.7x


`@ClBaze` why aren't you locking the connector from the connector controller directly? From the supervisor you can use the emitter to send a message when the connector need to lock and receive it from the controller of the connector with a receiver.

##### nap 04/01/2020 05:57:38
Sorry but this isn’t really a technical question.

With the Corvid situation, our ‘Intro to Robotics’ course has gone online, and because it’s hard to get components, we’ve decided to use Webots.

My question is: does anyone know if/where I might be able to download a working ePuck project that will work with the currently available Webots binaries?


Ideally it would use more than the GSM module.

##### David Mansolino [Cyberbotics] 04/01/2020 06:00:06
You will find some example using the e-puck here: [https://cyberbotics.com/doc/guide/epuck#samples](https://cyberbotics.com/doc/guide/epuck#samples)

In addition the Webots curriculum uses the e-puck too: [https://en.wikibooks.org/wiki/Cyberbotics%27\_Robot\_Curriculum](https://en.wikibooks.org/wiki/Cyberbotics%27_Robot_Curriculum)

##### nap 04/01/2020 06:38:20
`@David Mansolino` , thank you!!  I'll see what we can do with that.

##### David Mansolino [Cyberbotics] 04/01/2020 06:38:34
You're welcome.

##### ClBaze 04/01/2020 07:14:35
`@David Mansolino` thank you, the thing is that my scene contains a lot of robots (>36) with each robot having 6 connectors. Attaching a controller to each connector will really slow down the simulation I think. So the idea was to have a unique controlleur using a supervisor to lock/unlock the connectors

##### David Mansolino [Cyberbotics] 04/01/2020 07:17:07
Ok, in that case have you tried to swithc the 'autoLock' field? Make also sure that the distance, axis and rotation tolerance are big enough.

##### ClBaze 04/01/2020 08:06:37
Our connectors are not supposed to be magnetic, so I've set the autoLock to False. I've just increased the distance, axis and rotation tolerances but the problem persists. I figured out that if I run the simulation, save the scene and reload it the connector are well connected.

##### David Mansolino [Cyberbotics] 04/01/2020 08:11:02
I am sorry, I just checked in the code, but changing the lock field while the simulation is running is not yet supported (it is supported only when the simulation is started), if you need this feature, please open an issue here and the development team will try to implement this as soon as possible: [https://github.com/cyberbotics/webots/issues/new?template=feature\_request.md](https://github.com/cyberbotics/webots/issues/new?template=feature_request.md)

##### [] 04/01/2020 08:16:12
Hi, I am getting None when accessing sensors like cameras and position sensors when staring controller. Is there a standard way of waiting until the sensor is ready? Because I want al systems to be operational before startibg to move, thanks

##### ClBaze 04/01/2020 08:16:39
Ok thanks! I think it could be a nice feature. I'll try the emitter solution.

##### David Mansolino [Cyberbotics] 04/01/2020 08:17:07
`@[]`, yes, make sure to enable the sensors and perform one robot step, then the sensors should all be ready.

##### [] 04/01/2020 08:17:50
Great thanks 😉


`@David Mansolino`

##### David Mansolino [Cyberbotics] 04/01/2020 08:20:20
You're welcome

##### nap 04/01/2020 08:38:32
When building my controller under windows, there were some errors reported.  These errors were not terminal, as the controller was produced and it ran fine in the Webots world I've developed for it.

Any one familiar with the cause of these errors?
%figure
![webot.png](https://cdn.discordapp.com/attachments/565154703139405824/694828032208404540/webot.png)
%end

##### Stefania Pedrazzi [Cyberbotics] 04/01/2020 08:44:06
`@nap` do you get the same errors if you compile it from the Webots text editor?

##### Olivier Michel [Cyberbotics] 04/01/2020 08:51:20
Webots controllers are not supposed to be compiled from a DOS console. I would recommend using Webots to compile them (or a MSYS2 terminal if you have installed the Webots development environment).

##### nap 04/01/2020 11:18:19
I have asked the other tutor to compile the controller from within the Webots Editor.  When I get a response, I will post the outcome here. (I'm running Webots on my Mac and am able to build without problems.)

##### Ευαγγελία 04/01/2020 20:07:02
Hello, i am a new user of webots and i would wanted a little help please


i have added a capsule robot to my code and i want to give it the ability to fly in order to cross an imaginary intestine which is implemented imagine like a tube.


Can anyone help me by givinf an idea or an instruction of what functions should i use?

##### David Mansolino [Cyberbotics] 04/02/2020 05:23:04
Hi `@Ευαγγελία`, you might use the propeller device: [https://www.cyberbotics.com/doc/reference/propeller](https://www.cyberbotics.com/doc/reference/propeller)

Here is an example for helicopters: [https://www.cyberbotics.com/doc/guide/samples-devices#propeller-wbt](https://www.cyberbotics.com/doc/guide/samples-devices#propeller-wbt)

You may also be interested in setting the WorldInfo.gravity field to 0 0 0: [https://www.cyberbotics.com/doc/reference/worldinfo](https://www.cyberbotics.com/doc/reference/worldinfo)

##### Ευαγγελία 04/02/2020 09:06:02
I am going to check it and i will inform you. Thank you very much!!! `@David Mansolino`

##### David Mansolino [Cyberbotics] 04/02/2020 09:11:54
You're welcome

##### Laojiang 04/02/2020 09:55:14
when I use robot.simulationReset() to reset my robot, my code just stopped here. How can I slove it? Is it because I use pycharm?

##### David Mansolino [Cyberbotics] 04/02/2020 09:57:38
Hi, `@Laojiang` the first things to try to make sure it is not pycharm is to run your controller as a regular controller from the Webots IDE, this way you will be able at least to know if the problems comes from pycharm or not.

##### Laojiang 04/02/2020 09:59:27
ok, I check it now

##### ksardias 04/02/2020 12:00:22
He everyone, I want to my robot go 1m and stop, I can do that go forward

##### David Mansolino [Cyberbotics] 04/02/2020 12:01:22
Hi `@ksardias` yes you can! 😄 

It depends on which robot, but basically you have to rotate the wheel and stop then when you reached the target location

##### ksardias 04/02/2020 12:03:09
`@David Mansolino` I can rotate the wheel, but I have a problem, how to measure distance

##### David Mansolino [Cyberbotics] 04/02/2020 12:04:11
From the wheel radius you can compute how many radians you should rotate them, alternatively you can add a GPS device to your robot to get the absolute location.

##### ksardias 04/02/2020 12:05:30
oh! first idea sounds greate form me, how to get wheel radius, i already use Khepera IV


but if you give me better robot to this request I will be grateful

##### David Mansolino [Cyberbotics] 04/02/2020 12:09:52
The radius of the wheel of the Khepera IV is 0.021meters

##### ksardias 04/02/2020 12:12:12
ok, but how can I control or count wheel rotation?

##### David Mansolino [Cyberbotics] 04/02/2020 12:12:50
You can use the wheel position sensors to get the total rotation of the wheel.

##### ksardias 04/02/2020 12:16:49
ok, Thank you!

##### David Mansolino [Cyberbotics] 04/02/2020 12:22:28
You're welcome

##### Laojiang 04/02/2020 12:56:53
Hello. What can cause the model to disappear suddenly? Looks like it's flying away. Then the related parameters would be very strange.


My mode is a two\_leg walker

##### David Mansolino [Cyberbotics] 04/02/2020 13:04:17
Hi this is probably a physics instability that makes the robot explode.


To check what is hapenning it is recomended to use the step by step mode to see exactly when and how/why it does explode.


One possible solution is to decrease the simulation step.

##### Laojiang 04/02/2020 13:05:24

> **Attachment**: [QQ202004.mp4](https://cdn.discordapp.com/attachments/565154703139405824/695257579429036172/QQ202004.mp4)

##### David Mansolino [Cyberbotics] 04/02/2020 13:07:03
Is your controller doing something? are you doing special when it explodes?

##### Laojiang 04/02/2020 13:09:46
I use legs[1].setVelocity(a[1]) to control it. And the a[] is coming from a Neural Networks. The value of a[] is always changing.


It have six joints.


Is it because the value of a[] changed too quickly?

##### David Mansolino [Cyberbotics] 04/02/2020 13:14:46
That may be the cause indeed, to avoid this, you can specify the 'acceleration' in the motor node of your joint.

##### Laojiang 04/02/2020 13:15:55
ok,I try it now


It's useful.Thank you!

##### David Mansolino [Cyberbotics] 04/02/2020 13:26:43
You're welcome

##### sach.20 04/03/2020 00:36:51
For some reason the world will not load, everything else works in the side bars. When I first open Webots, the simulation says loading world, when I minimize the screen and open it back up, this white screen appears. Any fixes?
%figure
![IMG_20200402_193454.jpg](https://cdn.discordapp.com/attachments/565154703139405824/695431588451975208/IMG_20200402_193454.jpg)
%end


Sorry I'm new to webots.

##### Mistral 04/03/2020 01:07:49

%figure
![IMG_20200403_090724.jpg](https://cdn.discordapp.com/attachments/565154703139405824/695439381003108362/IMG_20200403_090724.jpg)
%end


How can I build new motion files like those?


I want to control Nao to recognize and grasp a ball in Webots.


Python

##### David Mansolino [Cyberbotics] 04/03/2020 05:29:16
Hi `@sach.20` , please make sure to install the latest drivers of you GPU and retry launching Webots.


`@Mistral`, you might copy paste one of them and modify it by opening the file in a text editor. However, I would rather recommend to use directly the Webots motor API to control the motors:  [https://cyberbotics.com/doc/reference/motor](https://cyberbotics.com/doc/reference/motor)

##### [] 04/03/2020 07:59:20
Having a strange issue. When I launch my controller for the first time, I check that all the cameras are working and start my controller loop. It finishes, everything went ok. But when I re-execute the controller again, the cameras don't get any data. In the visualisers in webots the cameras are working, but I just don't get the camera data, its None. I'm using python and executing the controller externally. I'm also disabling the cameras before finishing the controller loop. Only when I reload the world that I can launch again the controller without issues.

##### Mistral 04/03/2020 08:06:46
> `@Mistral`, you might copy paste one of them and modify it by opening the file in a text editor. However, I would rather recommend to use directly the Webots motor API to control the motors:  [https://cyberbotics.com/doc/reference/motor](https://cyberbotics.com/doc/reference/motor)

`@David Mansolino` okay

##### David Mansolino [Cyberbotics] 04/03/2020 08:06:50
Hi `@[]`, the scenario you are describing should work, however I have to admit that it was never tested, may I ask you to open an issue here: [https://github.com/cyberbotics/webots/issues/new?template=bug\_report.md](https://github.com/cyberbotics/webots/issues/new?template=bug_report.md)

With a small very simple example controller + world that reproduce the issue?

##### Dorteel 04/03/2020 09:30:57
Hi! We're planning on doing a social experiment with the NAO robot from SoftBank, where users should be able to personalize the robot by setting colour schemes. Is it possible to set the body colour/material of the robot from white? To modify the built-in proto file?

##### Olivier Michel [Cyberbotics] 04/03/2020 09:31:20
Sure.


That should be pretty straightforward when you look into the PROTO file. If you have any problem let us know.

##### Dorteel 04/03/2020 10:35:48
Thank you, I managed to change it, but I have a problem with the wrists. I saw they have their own proto file, is it possible to change the colour of those when changing the main colour in the original proto file?
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/695582320807116840/unknown.png)
%end


By original I mean Nao's proto file

##### Olivier Michel [Cyberbotics] 04/03/2020 10:37:49
Yes, but you will need to add an extra parameter to the wrist proto file, named `bodyColor` or so.


(in addition to the existing `color` field)


And pass the correct color from the original Nao proto.

##### Dorteel 04/03/2020 10:40:25
ah alright, thank you so much!!

##### jmroa0 04/03/2020 13:52:27
Hello folks. I'm new to Webots and have a quick question. I'd like to use the platform to run experiments involving self driving autonomous vehicles. 

I'm looking for an open source example of a AI based car that can run in Webots. Basically the AI code car would get camera images, lidar etc from 

Webots and then send commands to drive the car around in the simulated world. Is there such a thing available? If so can you point me in the right direction?

Thanks a lot for your help!

##### David Mansolino [Cyberbotics] 04/03/2020 13:55:32
Hi `@jmroa0` we have a very simple example of autonomous simulation in Webots which is open-source (of course many of our clients have created their own IA to drive the car which are way more efficient and complex, but unfortunately they are close-source). Here is the sample: [https://www.cyberbotics.com/doc/automobile/city](https://www.cyberbotics.com/doc/automobile/city)

Here is the Webots project sources: [https://github.com/cyberbotics/webots/tree/master/projects/vehicles](https://github.com/cyberbotics/webots/tree/master/projects/vehicles)

This sample is available in Webots out of the box with the standard installation.


If you haven't yet followed our tutorial, I strongly recommend to follow at least tutorial 1-6: [https://cyberbotics.com/doc/guide/tutorials](https://cyberbotics.com/doc/guide/tutorials)


you will learn how your car controller can get camera, lidar, etc inputs and act on the car control.

##### jmroa0 04/03/2020 13:58:36
Thanks David. I'm working through the tutorials. They are very good! Do you know of people in academia using Webots for autonomous vehicle experiments? they tend to be more willing to share their code etc.

##### David Mansolino [Cyberbotics] 04/03/2020 14:01:54
I have been working closely with the EPFL university to do autonomous vehicle simulations in Webots, unfortunately I can't share this code either. But I can point you to some of the publications:

[https://www.epfl.ch/labs/disal/research/NetworkedIV/](https://www.epfl.ch/labs/disal/research/NetworkedIV/)

[https://infoscience.epfl.ch/record/220518/files/MV\_IROS2016\_camera\_ready.pdf](https://infoscience.epfl.ch/record/220518/files/MV_IROS2016_camera_ready.pdf)

[https://infoscience.epfl.ch/record/228319/files/IV2017\_0018\_MS\_final\_submission.pdf](https://infoscience.epfl.ch/record/228319/files/IV2017_0018_MS_final_submission.pdf)

##### jmroa0 04/03/2020 14:03:57
Awesome. After the tutorials, and the "out the box" example, I'll review these papers. Hopefully they have put some of the code in GitHub. Thanks again for your prompt and helpful responses!

##### David Mansolino [Cyberbotics] 04/03/2020 14:05:27
You're welcome!

##### ksardias 04/03/2020 16:58:22
Hi, can I create

 motion sensor on wall?

##### sach.20 04/03/2020 17:12:18
`@David Mansolino` I updated my graphics driver but I am still getting the white screen. I even tried messing with the OpenGL preferences. Literally everything else is working even the sound.

##### Kormit 04/03/2020 19:42:50
Is there any way of having a thermal camera sensor?


And is there any sort of sensors for detecting colour, some sort of light sensor.

##### kwy 04/04/2020 03:50:49
Hello, I'm using "pen" to draw trail. but I'm confused ,when I change the size of the arena, why does the trail  disappear and "pen" no longer draws trail ?

##### ksardias 04/04/2020 10:46:19
Why front left get wrong value?
> **Attachment**: [rontLeftNotWork\_Trim.mp4](https://cdn.discordapp.com/attachments/565154703139405824/695947355954085898/rontLeftNotWork_Trim.mp4)

##### yash 04/04/2020 11:41:40
I am using a camera to detect coloured objects , should the RGB values differ if the robot is far or near the object ?

And if so in my case they are not differing .!

##### Rajesh Roy 04/04/2020 12:25:39
Hey, I want a webGL based Simulation of an Autonomous drone. Basically I want to run it on the Google Chrome without adding any other plugin. Is the development according to my convention possible in Webots Software? 

What is the procedure basically? (If any)

##### DrVoodoo [Moderator] 04/04/2020 13:05:01
@Shaow, yes [https://www.cyberbotics.com/doc/reference/lightsensor](https://www.cyberbotics.com/doc/reference/lightsensor)


Sorry, that should be `@Kormit`

##### Rajesh Roy 04/04/2020 13:11:53
Hey `@DrVoodoo` , can you answer my question?

##### Kormit 04/04/2020 13:14:48
`@DrVoodoo`  Thanks for the response, does this work for RGB too then? Is there any way of having some sort of thermal camera?

##### DrVoodoo [Moderator] 04/04/2020 13:16:59
`@Rajesh Roy` there is [https://robotbenchmark.net/](https://robotbenchmark.net/) so it does appear to be technically possible but I can't speak to how it is achieved


`@Kormit` you can filter by colour, it doesn't offer an IR option but depending on your use case you could use some other colour instead of IR


I.e. use red instead of infrared


`@yash` I believe that you will need to use a fog node in your environment to simulate atmospheric effects if you want objects to get fainter with distance

##### Rajesh Roy 04/04/2020 13:29:53
`@DrVoodoo` could you address me with the right technical person who may have fair background of my requirements?

##### DrVoodoo [Moderator] 04/04/2020 14:19:16
I think you probably need to wait until Monday. The webots staff will probably be back online then

##### Simon Steinmann [Moderator] 04/04/2020 17:56:35
Hi, does anyone know how to implement or make a Cartesian velocity controller for a robotic arm? Any experience or ideas are welcome, I'm somewhat stuck.


Especially using moveit would be nice

##### Jie 04/06/2020 04:12:14
hi, when I use Microsoft Visual Studio build my controller , I need add this resources , every new project always need this? how can I solve this problem? I used Microsoft Visual Studio  2017 Community, and webots is R2020a-rev1
%figure
![2020-04-06_120640.jpg](https://cdn.discordapp.com/attachments/565154703139405824/696572955806793829/2020-04-06_120640.jpg)
%end

##### David Mansolino [Cyberbotics] 04/06/2020 05:26:29
> Hi, can I create

>  motion sensor on wall?

`@ksardias` You should probably use distance-sensors and set the type to ``sonar`` and increase the numberOfRays to something like 3-5. See more information here: [https://cyberbotics.com/doc/reference/distancesensor#distancesensor-types](https://cyberbotics.com/doc/reference/distancesensor#distancesensor-types)


> `@David Mansolino` I updated my graphics driver but I am still getting the white screen. I even tried messing with the OpenGL preferences. Literally everything else is working even the sound.

In that case you should probably try with the safe mode of Webots enabled: [https://cyberbotics.com/doc/reference/distancesensor#distancesensor-typesebots](https://cyberbotics.com/doc/reference/distancesensor#distancesensor-typesebots) enabled: 

`@sach.20`


> Is there any way of having a thermal camera sensor?

`@Kormit` Unfortunately this is not available out of the box in Webots.


> And is there any sort of sensors for detecting colour, some sort of light sensor.

`@Kormit` why not using a camera? you can set it's resolution to 1x1.

Webots also provide a light sensor, but it is not very useful to detect color: [https://cyberbotics.com/doc/reference/distancesensor#distancesensor-types](https://cyberbotics.com/doc/reference/distancesensor#distancesensor-types)

Alternatively, you can use the distance-sensor of type ``infra-red`` which are impacted by the color of the object: [https://cyberbotics.com/doc/reference/distancesensor#distancesensor-types](https://cyberbotics.com/doc/reference/distancesensor#distancesensor-types)


> Hello, I'm using "pen" to draw trail. but I'm confused ,when I change the size of the arena, why does the trail  disappear and "pen" no longer draws trail ?

`@kwy` It is difficult to say without looking at your simulation, may I ask you to open an issue (including your world file) here: [https://github.com/cyberbotics/webots/issues/new?template=bug\_report.md](https://github.com/cyberbotics/webots/issues/new?template=bug_report.md)

Thank you


> Why front left get wrong value?

`@ksardias` it seems you are using the Khepera 4 robot right? If yes, the distance sensors of the Khepera 4 are infra-red distance sensors, which means that they are influenced by the material of the object they are seeing. May I ask you to retry with a white box with a roughness of 0?

For more information about the infra-red distance sensors, please see: [https://cyberbotics.com/doc/reference/distancesensor#infra-red-sensors](https://cyberbotics.com/doc/reference/distancesensor#infra-red-sensors)


> I am using a camera to detect coloured objects , should the RGB values differ if the robot is far or near the object ?

> And if so in my case they are not differing .!

`@yash` 

If you have no fog node, their is indeed no reason for them to differ.


> Hey, I want a webGL based Simulation of an Autonomous drone. Basically I want to run it on the Google Chrome without adding any other plugin. Is the development according to my convention possible in Webots Software? 

> What is the procedure basically? (If any)

`@Rajesh Roy` yes this is possible.

You are lucky Webots does provide a web interface. If I where you I would create my simulation as a Webots simulation in a first step and then use the web interface of Webots to be able to share it throught a web page. As a first step I would start by playing with the mavic simulation in Webots that is probably the closest setup to what you are aiming for: [https://www.cyberbotics.com/doc/guide/mavic-2-pro](https://www.cyberbotics.com/doc/guide/mavic-2-pro) Once you're happy with the simulation in Webots you may find interesting information about how to move it to the web here: [https://www.cyberbotics.com/doc/guide/web-interface](https://www.cyberbotics.com/doc/guide/web-interface)


`@Simon Steinmann`, you will have to implement inverse kinematic to do cartesian control with a robotic arm, we have one example distributed within Webots, this example use the an ABB robotic arm and the ikpy python library to do inverse kinematic: From what I understood you have to provide a web simulation. You are lucky webots does provide a web interface. If I where you I would create my simulation as a Webots simulation in a first step and then use the web interface of Webots to be able to share it throught a web page. As a first step I would start by playing with the mavic simulation in Webots that is probably the closest setup to what you are aiming for: [https://www.cyberbotics.com/doc/guide/mavic-2-pro](https://www.cyberbotics.com/doc/guide/mavic-2-pro) Once you're happy with the simulation in Webots you may find interesting information about how to move it to the web here: [https://github.com/cyberbotics/webots/blob/master/projects/robots/abb/irb/controllers/inverse\_kinematics/inverse\_kinematics.py](https://github.com/cyberbotics/webots/blob/master/projects/robots/abb/irb/controllers/inverse_kinematics/inverse_kinematics.py)


> hi, when I use Microsoft Visual Studio build my controller , I need add this resources , every new project always need this? how can I solve this problem? I used Microsoft Visual Studio  2017 Community, and webots is R2020a-rev1

`@Jie` if you use the 'New Controller' wizard, Webots will setup your project files for you so that you don't have to do anything else.

##### Jie 04/06/2020 06:28:50
`@David Mansolino` ，yes, I have use 'New Controller' wizard, but there has problems, I haven't change it, just like this, so I have to add those resources.
%figure
![2020-04-06_142442.jpg](https://cdn.discordapp.com/attachments/565154703139405824/696607331315875890/2020-04-06_142442.jpg)
%end

##### David Mansolino [Cyberbotics] 04/06/2020 06:32:39
`@Jie` which resources in particular are you speaking about?

##### Jie 04/06/2020 06:35:07

%figure
![2020-04-06_143445.jpg](https://cdn.discordapp.com/attachments/565154703139405824/696608912966680596/2020-04-06_143445.jpg)
%end


if I dont add those  resources, it cant generate .exe, every project must be added, I feel it's trouble do this again and again

##### David Mansolino [Cyberbotics] 04/06/2020 06:39:47
Ok, let me check if this should be already included by Webots or not.

##### Jie 04/06/2020 06:40:46
ok,thanks

##### David Mansolino [Cyberbotics] 04/06/2020 06:53:30
I checked and it seems indeed they are missing.

You may fix this by changing this line in your Webots installation folder: 

[https://github.com/cyberbotics/webots/blob/master/resources/templates/controllers/cpp.vcxproj#L113](https://github.com/cyberbotics/webots/blob/master/resources/templates/controllers/cpp.vcxproj#L113)

##### Jie 04/06/2020 10:39:37
ummmm, I find this line is not missing in my files, but I find some promble, I didn't add environment variables，so I add "WEBOTS\_HOME" path ，and it make I can open some file in VS. But, this problems still exist.`@David Mansolino`
%figure
![2020-04-06_183852.jpg](https://cdn.discordapp.com/attachments/565154703139405824/696670445818216468/2020-04-06_183852.jpg)
%end


when I add  "WEBOTS\_HOME" path, I can open those files.The original can not be opened。
%figure
![2020-04-06_184429.jpg](https://cdn.discordapp.com/attachments/565154703139405824/696672450422898738/2020-04-06_184429.jpg)
%end

##### David Mansolino [Cyberbotics] 04/06/2020 11:36:36
> ummmm, I find this line is not missing in my files, but I find some promble, I didn't add environment variables，so I add "WEBOTS\_HOME" path ，and it make I can open some file in VS. But, this problems still exist.`@David Mansolino`

`@Jie` ok, indeed setting WEBOTS\_HOME is a mandatory step.


> when I add  "WEBOTS\_HOME" path, I can open those files.The original can not be opened。

`@Jie` What do you mean by the original?

##### Jie 04/06/2020 11:53:07
It's just that it can't be opened


I'm sorry my English is not very good


but I still can‘t build the project to exe, just prompt for missing these files.
%figure
![2020-04-06_183852.jpg](https://cdn.discordapp.com/attachments/565154703139405824/696690296939085864/2020-04-06_183852.jpg)
%end

##### Kormit 04/06/2020 12:06:09
Can a supervisor robot get values from another robot's senors? e.g. get led values.

##### David Mansolino [Cyberbotics] 04/06/2020 12:07:15
> Can a supervisor robot get values from another robot's senors? e.g. get led values.

`@Kormit` No, this is unfortunately not possible yet.


> It's just that it can't be opened

`@Jie` Ok, it makes sense, because Visual Studio can't find them so it is not able to open them.

##### Kormit 04/06/2020 12:08:25
Is there any way of a supervisor telling if a robot's LED's are on?

##### helosand 04/06/2020 12:18:39
Hi, I have to use Webots for a SIS project course. I installed it, I have windows 8, but when I try to open, it tells me the program has to be shut down... Here is a picture of what I get. I don't really know where to look for to fix that problem, is there anything I can try ? Thank you
%figure
![Capture_decran_370.png](https://cdn.discordapp.com/attachments/565154703139405824/696695368028520478/Capture_decran_370.png)
%end

##### DrVoodoo [Moderator] 04/06/2020 12:34:54
`@Kormit` are you asking how does the supervisor get the led object from the other robot or how it reads the led state once it's got the object?

##### Kormit 04/06/2020 12:37:57
`@DrVoodoo` yes

##### DrVoodoo [Moderator] 04/06/2020 12:39:29
which one?


and which language

##### Kormit 04/06/2020 12:40:32
Both, I need to be able to use the supervisor to get the LED device from another robot and be able to read the led state

##### DrVoodoo [Moderator] 04/06/2020 12:41:11
ok, easy one first, reading the led state [https://cyberbotics.com/doc/reference/led](https://cyberbotics.com/doc/reference/led)


wb\_led\_get()

##### Kormit 04/06/2020 12:41:57
I know how to do that from the robot that has the led on it, but how do I do it from another supervisor robot

##### DrVoodoo [Moderator] 04/06/2020 12:43:33
when programming your supervisor you first need to get the other robots node using wb\_supervisor\_node\_get\_from\_def()


or from\_id()

##### Kormit 04/06/2020 12:45:24
Ok

##### DrVoodoo [Moderator] 04/06/2020 12:45:35
Ah, found it [https://cyberbotics.com/doc/guide/supervisor-programming](https://cyberbotics.com/doc/guide/supervisor-programming)

##### Kormit 04/06/2020 12:50:47
But you I seem to find a way to get a device using a supervisor

##### DrVoodoo [Moderator] 04/06/2020 12:51:40
if the LED defined as part of the other robot's PROTO?


*is

##### Kormit 04/06/2020 12:51:52
Yes

##### DrVoodoo [Moderator] 04/06/2020 12:53:31
I believe you need to make it one of the interface fields.


can you DM me a copy of your proto?

##### Kormit 04/06/2020 12:54:47
Its the e-puck. But if it is a field, don't still need to get values from the led using a device class. The values of the led aren't in the field.

##### Olivier Michel [Cyberbotics] 04/06/2020 13:57:47
`@helosand`: It could be that your graphics card is not supported by Webots. Is your graphics drivers up-to-date?


You may want to try to start Webots in safe mode:


See documentation here: [https://cyberbotics.com/doc/guide/starting-webots#safe-mode](https://cyberbotics.com/doc/guide/starting-webots#safe-mode)

##### helosand 04/06/2020 14:55:34
`@Olivier Michel` Thank you, indeed I hadn't check that, it works in safe mode

##### ksardias 04/06/2020 14:56:42
how to disable laser goal view?

##### Olivier Michel [Cyberbotics] 04/06/2020 14:57:02
What do you mean by laser goal view?

##### ksardias 04/06/2020 14:57:58
i have laser distance sensor and if detect object, this object get red frame


laser
%figure
![ok.PNG](https://cdn.discordapp.com/attachments/565154703139405824/696735625897967768/ok.PNG)
%end

##### nilutpolkashyap 04/06/2020 14:59:16
Which is more preferred to use webots: Windows 10 or VirtualBox Ubuntu 18.0.4????

##### Hue 04/06/2020 15:00:06
`@ksardias`  Do you mean you want to toggle plain rendering (View -> Plain rendering) or pressing F11 ?


> Which is more preferred to use webots: Windows 10 or VirtualBox Ubuntu 18.0.4????

`@nilutpolkashyap` You are probably going to loose a lot of power calculation if using webots in a Virtual Machine, if you don't have Linux natively installed you may want to stick to Windows.

##### Olivier Michel [Cyberbotics] 04/06/2020 15:02:43
`@nilutpolkashyap`: Windows 10.

##### ksardias 04/06/2020 15:02:55
`@Hue`  not help

##### nilutpolkashyap 04/06/2020 15:04:00
`@Hue` `@Olivier Michel` Thanks

##### ksardias 04/06/2020 15:06:17
i want to don't see this red stain


*I wouldn't want see this red stain

##### David Mansolino [Cyberbotics] 04/06/2020 15:07:04
If you don't want this red point then you have to set the type of the distance-sensor to ``generic``the only difference between these two types is the red dot: [https://cyberbotics.com/doc/reference/distancesensor#distancesensor-types](https://cyberbotics.com/doc/reference/distancesensor#distancesensor-types)

##### ksardias 04/06/2020 15:07:45
ok, thanks

##### Olivier Michel [Cyberbotics] 04/06/2020 15:09:00
Or maybe reduce the aperture, number of rays, etc.

##### 🍎小苹果🍎 04/06/2020 23:10:40
I can't open wav file with speaker device I tried all the combinations it just don't see the file where I am doing wrong? I have a file  my\_controller  inside of it I created another file which named sounds and  my\_controller.py. so I wrote path  in the function as sound = 'sounds / my\_sound.wav'

##### Jie 04/07/2020 03:09:54
Ifind how to solve my problem, its need in VS to project/Rebuild project,😅

##### David Mansolino [Cyberbotics] 04/07/2020 05:25:40
> Ifind how to solve my problem, its need in VS to project/Rebuild project,😅

`@Jie` good news, thank you for the feedback


> I can't open wav file with speaker device I tried all the combinations it just don't see the file where I am doing wrong? I have a file  my\_controller  inside of it I created another file which named sounds and  my\_controller.py. so I wrote path  in the function as sound = 'sounds / my\_sound.wav'

`@🍎小苹果🍎` What you did should work, what is the exact error message you get? Can you try if this controller works for you (as it uses the exact same file hierarchy): [https://github.com/cyberbotics/webots/tree/master/projects/samples/devices/controllers/speaker](https://github.com/cyberbotics/webots/tree/master/projects/samples/devices/controllers/speaker)

##### airobotnews 04/07/2020 08:20:53
Is it possible to export solidworks design robot prototype to webots?

##### David Mansolino [Cyberbotics] 04/07/2020 08:22:10
From solidworks you can export to VRMl and then import this VRML to Webots, this will import all the shape, you will then have to re-create the hierarchy, bounding objects and joints.


Here is an example with autodesk: [https://www.youtube.com/watch?v=L0FVsFD2rS4&feature=youtu.be](https://www.youtube.com/watch?v=L0FVsFD2rS4&feature=youtu.be)

##### airobotnews 04/07/2020 08:28:07
Thank you very much


It needs to be modified for better use!

##### David Mansolino [Cyberbotics] 04/07/2020 08:52:28
You're welcome!

##### 🍎小苹果🍎 04/07/2020 09:37:41
`@David Mansolino` I look at the sample project it works fine but I still get error in my project . I'm checking the path with os.path.isfile(path) it returns True
%figure
![Untitled.png](https://cdn.discordapp.com/attachments/565154703139405824/697017243921547314/Untitled.png)
%end

##### David Mansolino [Cyberbotics] 04/07/2020 09:39:07
Maybe you can try to convert it to an absolute path with something like:

```Python
os.path.abspath(path)
```

##### 🍎小苹果🍎 04/07/2020 09:39:25
Okay thank you so much 🙂

##### David Mansolino [Cyberbotics] 04/07/2020 09:39:34
You're welcome

##### dédé 04/07/2020 12:36:39
Hello ! I am an EPFL student, and I need to install Webot 2019b for a project course. But I didn't arrive to do it. The program opened once perfectly, I close it, and when I tried to re-open it, it freezes.

##### David Mansolino [Cyberbotics] 04/07/2020 12:37:01
Hi again dédé, what is your OS ?


Are you on Windows?

##### Laojiang 04/07/2020 12:38:30
Why my model will jump first,  even though I didn't anything in my controller.

##### dédé 04/07/2020 12:40:40
I am on OS Catalina

##### Laojiang 04/07/2020 12:41:13

> **Attachment**: [1586263208735.mp4](https://cdn.discordapp.com/attachments/565154703139405824/697063431794196520/1586263208735.mp4)

##### David Mansolino [Cyberbotics] 04/07/2020 12:42:15
> I am on OS Catalina

`@dédé` ok, in that case the first things to do is to try the safe mode of Webots:

[https://cyberbotics.com/doc/guide/starting-webots#safe-mode](https://cyberbotics.com/doc/guide/starting-webots#safe-mode)


And what do you mean by it freeze, do you see the splash screen?

##### dédé 04/07/2020 12:43:50
I am not sure what you mean by splash screen, it stays like on the picture
%figure
![Capture_decran_2020-04-07_a_13.14.21.png](https://cdn.discordapp.com/attachments/565154703139405824/697064090346061834/Capture_decran_2020-04-07_a_13.14.21.png)
%end

##### David Mansolino [Cyberbotics] 04/07/2020 12:44:25
Ok, I think I already saw this issue on mac, let me check

##### dédé 04/07/2020 12:44:58
I don't think I can write the safe mode in the Webots variable unfortunately

##### David Mansolino [Cyberbotics] 04/07/2020 12:47:52
Ok, the problem is because a Webots window is blocking the start, you need to press OK, unfortunately, this windows is hidden below the welcome window, you can see it by pressing on another app and then Webots again

##### dédé 04/07/2020 12:49:15
I try, and I tell you if it works


It finally works😆 , but I have to admit that is not very logical, because it is really hard to see this window

##### David Mansolino [Cyberbotics] 04/07/2020 12:53:18
Perfect, thank you for the feedback, yes we know this not very intuitive, this is fixed in the new version of Webots, but unfortunately at EPFL you are still using an older version of Webots.

##### Laojiang 04/07/2020 12:53:57
Can anyone give me some suggestions?

##### dédé 04/07/2020 12:54:19
thank you for your help `@David Mansolino` !! 😄

##### David Mansolino [Cyberbotics] 04/07/2020 12:54:30
> Why my model will jump first,  even though I didn't anything in my controller.

`@Laojiang` This is indeed strange, unfortunately, it is difficult to say where does the problem comes from without seen your simulation, may I ask you to open a bug report here including your world file: [https://github.com/cyberbotics/webots/issues/new?template=bug\_report.md](https://github.com/cyberbotics/webots/issues/new?template=bug_report.md)


> thank you for your help `@David Mansolino` !! 😄

`@dédé` You're welcome, enjoy using Webots 😉

##### Francony 04/07/2020 12:54:56
Hi, I'm analyzing a robot on webots, but the overall mass of the robot is wrong. I see that there are masses under the Physics field of a node. My question is: is there another part where there could be masses? For example, I have a motor node with a Shape field that says "USE MOTOR" but there's no mass to be seen anywhere (tell me if what I wrote is too confusing). Thanks in advance.

##### David Mansolino [Cyberbotics] 04/07/2020 12:55:43
Hi `@Francony` each Solid node can have a Physics node and therfore its own mass, but Shape node are just visual, no physics

##### Francony 04/07/2020 12:59:37
Ah I see thanks. My main Supervisor (Robot) has a physics node and mass of 0.389. This is the sum of all the masses of the physics nodes of its children?

##### David Mansolino [Cyberbotics] 04/07/2020 13:00:29
No, this is just for the root node, if the node has Solid nodes in tis children fields the total mass is the sum of all the individual masses.

##### Francony 04/07/2020 13:02:07
ohhhhh okay. I'm gonna add them all up then and see if they match. Thanks a lot!

##### David Mansolino [Cyberbotics] 04/07/2020 13:03:14
You're welcome

##### Lussfer 04/07/2020 18:29:06
Hi, I am trying to get gps coordinates on a robot using python but getting nan as a result. i am using the following code, any idea why?


```robot = Robot()
gps = robot.getGPS('gps')
gps.enable(int(robot.getBasicTimeStep()))
value = gps.getValues()
print(str(value))
```

##### Darko Lukić [Cyberbotics] 04/07/2020 20:04:29
`@Lussfer` You probably need to call `step()` method before reading the value:

[https://cyberbotics.com/doc/reference/robot#wb\_robot\_step](https://cyberbotics.com/doc/reference/robot#wb_robot_step)

##### Lussfer 04/07/2020 21:41:56
lovely!


thanks :)

##### Darko Lukić [Cyberbotics] 04/07/2020 22:16:41
You are welcome, I am glad it works!

##### brainybot 04/08/2020 04:12:39
how to set battery in the proto file？

##### David Mansolino [Cyberbotics] 04/08/2020 05:18:51
Hi `@brainybot`, to add a battery, you should use the ``battery`` field of the Robot node: [https://cyberbotics.com/doc/reference/robot#field-summary](https://cyberbotics.com/doc/reference/robot#field-summary)

##### brainybot 04/08/2020 05:28:57
OK`@David Mansolino`，thankyou. I checked the document and checked the proto file again. My file was disturbed by the fields I set before. Now it's settled.😆😆😆

##### David Mansolino [Cyberbotics] 04/08/2020 05:29:18
You're welcome 😉

##### Jie 04/08/2020 06:06:30
`@David Mansolino` Thank you for your help！👍

##### thomas5mc 04/08/2020 06:13:50
Hello, I'm new to Webots and i'm trying to learn how to use the Supervisor functions in a controller. Could anybody help me out with the initial setup? I'm using it in python so that's why i can't find much resources online. I have this so far
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/697328334459109376/unknown.png)
%end


But i'm getting error:
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/697328552185692160/unknown.png)
%end

##### Hue 04/08/2020 06:18:16
Hi `@thomas5mc` I guess you are trying to do the first step code tutorial from the documentation...

Here is a translated example of the c controller:

```python
from controller import Supervisor

# create a supervisor instance
supervisor = Supervisor()

# get the time step of the current world.
timestep = int(supervisor.getBasicTimeStep())

# retrieve concerned robot node from supervisor
robot_node = supervisor.getFromDef("MY_ROBOT")

# retrieve concerned field from robot node
translation_field = robot_node.getField("translation")

while supervisor.step(timestep) != -1:
    # retrieve and print values from translation field repeatedly
    res = translation_field.getSFVec3f()
    print("MY_ROBOT is at position:", res[0], res[1], res[2])
    pass
```

##### thomas5mc 04/08/2020 06:24:37
`@Hue`  Thanks a bunch!

##### Hue 04/08/2020 06:24:59
You are welcome 😉

##### Taechu 04/08/2020 08:30:40
hello, could anybody help me with this warning? 

WARNING: Texture image size of 'C:/Users/Administrator/AppData/Local/Programs/Webots/projects/appearances/protos/textures/chequered\_parquetry/chequered\_parquetry\_base\_color.jpg' is not a power of two: rescaling it from -1x-1 to 0x0.

WARNING: Floor (PROTO) > ChequeredParquetry (PROTO) > ImageTexture: Cannot load texture 'C:/Users/Administrator/AppData/Local/Programs/Webots/projects/appearances/protos/textures/chequered\_parquetry/chequered\_parquetry\_base\_color.jpg': Unsupported image format.

##### Olivier Michel [Cyberbotics] 04/08/2020 08:31:31
Hi, this likely comes from a conflict coming from a wrong version of libjpeg.

##### Taechu 04/08/2020 08:31:42
all things aren't able to render


how can I solve it? I didn't change the image format

##### Olivier Michel [Cyberbotics] 04/08/2020 08:35:32
The name of the library is `libjpeg-8.dll`. It is located in `C:\Program Files\Webots\msys64\mingw64\bin` and Webots should use it. However, it seems your system as another version of this `libjpeg-8.dll` in a folder pointer to by your `PATH` environment variable and Webots uses it wrongly instead of using its own version. You should find this wrong library on your system and remove its path from your `PATH` environment variable or rename (temporarily) this conflicting library.

##### Taechu 04/08/2020 08:36:30
thanks a lot! I'll have a try

##### Olivier Michel [Cyberbotics] 04/08/2020 08:37:33
Let me know if that resolves the problem.

##### Taechu 04/08/2020 08:53:11
I reinstalled webots and it worked... but thank you

##### Olivier Michel [Cyberbotics] 04/08/2020 08:53:33
OK, thank you for the feedback.

##### 🍎小苹果🍎 04/08/2020 09:34:57
Hi! When I start to simulation my pc suddenly shuts down itself I thought maybe it was because of my code so I tried sample worlds too but it didn't change what should I do? 😢

##### Olivier Michel [Cyberbotics] 04/08/2020 09:35:35
That's strange. What is your OS?

##### 🍎小苹果🍎 04/08/2020 09:35:43
Windows

##### Olivier Michel [Cyberbotics] 04/08/2020 09:35:48
10?

##### 🍎小苹果🍎 04/08/2020 09:35:52
Yes

##### Olivier Michel [Cyberbotics] 04/08/2020 09:36:00
What graphics card do you have?

##### 🍎小苹果🍎 04/08/2020 09:36:46
Nvdia GeForce GTX 1050 and Intel UHD 630

##### Olivier Michel [Cyberbotics] 04/08/2020 09:37:47
Do you know which one is used when you run Webots?

##### 🍎小苹果🍎 04/08/2020 09:38:31
I don't know I tried started with Nvdia before but this time it gives texture error so I stopped trying open with it

##### Olivier Michel [Cyberbotics] 04/08/2020 09:38:48
Did you try to run Webots in safe mode? [https://cyberbotics.com/doc/guide/starting-webots#safe-mode](https://cyberbotics.com/doc/guide/starting-webots#safe-mode)

##### 🍎小苹果🍎 04/08/2020 09:40:07
I didn't know that I'll try thank you so much


it worked thank you so much again. actually if you know how can I fix this graphic card problem please could you tell me ?  It happens when I try to start with Nvidia
%figure
![1.png](https://cdn.discordapp.com/attachments/565154703139405824/697383069279191050/1.png)
%end

##### Olivier Michel [Cyberbotics] 04/08/2020 09:53:17
Your problem is similar to the one of `@Taechu` which I just answered one hour ago, please scroll up to see it.

##### 🍎小苹果🍎 04/08/2020 09:53:35
okay thank you so much

##### Olivier Michel [Cyberbotics] 04/08/2020 09:57:08
By the way, did you install any other software after installing Webots?

##### 🍎小苹果🍎 04/08/2020 10:06:22
I probably installed because its been a while .but It always like this from the first day I downloaded Webots. I searched  for libjpeg-8.dll I only have two one is in webots others again in webots but in windows.old folder .

##### Olivier Michel [Cyberbotics] 04/08/2020 10:09:04
OK, so can you try to remove the one in the `windows.old` folder? By the way, where is folder located? Inside `C:\Program Files\Webots`?

##### 🍎小苹果🍎 04/08/2020 10:10:02
its in the C:\Users\nur-b\AppData\Local\Programs\Webots\msys64\mingw64\bin

##### Taechu 04/08/2020 10:10:46
earlier I only found one libjpeg-8.dll in my computer. the problem occurred after I installed python in the same route as Webots

##### Olivier Michel [Cyberbotics] 04/08/2020 10:11:37
Which version of Python did you installed?

##### Taechu 04/08/2020 10:11:56
my route was the same as `@🍎小苹果🍎` 's  then I reinstalled Webots to c:\ program files


3.7

##### Olivier Michel [Cyberbotics] 04/08/2020 10:13:41
Instead of `C:\Users\...`? So, that would mean the problem arises when Webots is installed in the local user folder, but not when Webots is installed for all users (in `C:\Program Files\Webots`)?

##### Taechu 04/08/2020 10:14:22
perhaps. I reinstalled it for all users

##### Olivier Michel [Cyberbotics] 04/08/2020 10:14:49
`@🍎小苹果🍎`: can you try to re-install it for all users?

##### 🍎小苹果🍎 04/08/2020 10:15:09
okay I'll try thank you so much


it didn't work 😭
%figure
![1.png](https://cdn.discordapp.com/attachments/565154703139405824/697392388410179614/1.png)
%end

##### Olivier Michel [Cyberbotics] 04/08/2020 13:17:08
BTW, I have a question for you: how do you start Webots? By clicking on the icon on the desktop? From the Windows Start menu? Or from a DOS CMD console by typing `webots.exe` or `webots.bat` or `webots`?


The problem you are reporting is similar to the one described in this issue: [https://github.com/cyberbotics/webots/issues/137](https://github.com/cyberbotics/webots/issues/137)

##### 🍎小苹果🍎 04/08/2020 15:22:47
I was clicking on the icon. If I do right click and choose Nvdia as graphic card that error happens but if I just click the icon and open it it works fine. And I found something in help >OpenGL information it shows as program uses Nvdia somehow I don't know if I understand correctly but

##### Yuxiang Z's grandpapa 04/08/2020 16:27:08
Cooool!

##### Mr J 04/08/2020 20:10:36
Is there a way to stop execution of commands without stopping the whole simulation? My goal is to give my robot enough time to move its motors before going onto the next instruction. I have tried time.sleep but that just pauses the whole simulation and has no effect on the end result

##### Darko Lukić [Cyberbotics] 04/08/2020 20:51:08
`@Mr J` You need to call `robot.step(timestep)` periodically, e.g.:

```py
# Set motor velocity at e.g. 1 radian per second
motor.setVelocity(1)

# Let the motor move for a while
# The loop will create a pause of 10*timestep[ms]
for _ in range(10)
    robot.step(timestep)

# Do the other command...
```



You can find more about `.step()`  here:

[https://cyberbotics.com/doc/reference/robot#wb\_robot\_step](https://cyberbotics.com/doc/reference/robot#wb_robot_step)

##### Mr J 04/08/2020 20:57:09
ah ok thank you

##### Jie 04/09/2020 02:09:26
Hi, can you provide the pdf version of User guide and Reference Manual

##### Olivier Michel [Cyberbotics] 04/09/2020 05:00:43
Hi, unfortunately, it is only available in HTML on the web and within Webots.

##### Jie 04/09/2020 05:32:59
ok, that's terrible。

##### nikzzzlegrande 04/09/2020 06:29:50
Hi I am pretty much new to webots can anyone please tell me how to send your robot to a particular x, y coordinate in the simulation area. The robot in hand is a epuck by gcctronic

##### David Mansolino [Cyberbotics] 04/09/2020 07:13:56
`@nikzzzlegrande` what you want to achieve is called path planning, you will find some explanation and example with the e-puck robot and Webots here: [https://en.wikibooks.org/wiki/Cyberbotics%27\_Robot\_Curriculum/Advanced\_Programming\_Exercises#Path\_planning\_](https://en.wikibooks.org/wiki/Cyberbotics%27_Robot_Curriculum/Advanced_Programming_Exercises#Path_planning_)[Advanced]

##### Laojiang 04/09/2020 07:58:38
when I use "wb\_motor\_set\_torque" to contorl my rotationalmotor, should I to change the "control PID" value as 0,0,0 ?

##### Olivier Michel [Cyberbotics] 04/09/2020 08:01:29
No, the PID values will be ignored in that case.

##### Laojiang 04/09/2020 08:07:30
In fact, I'm trying to control my model by torque. However, it doesn't move anything. And my code is very simple.



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/697719367663878175/unknown.png)
%end


Can you help me to check my code?

##### Olivier Michel [Cyberbotics] 04/09/2020 08:10:32
Did you check the value of the `RotationalMotor.maxTorque` in your model? Maybe you should try to increase it?

##### Laojiang 04/09/2020 08:12:46
The default value of RotationalMotor.maxTorque is 10 ,need I to increase it?

##### Olivier Michel [Cyberbotics] 04/09/2020 08:13:45
It depends on your model, if it is heavy, with high friction, it may be needed to increase it.

##### Laojiang 04/09/2020 08:15:35
ok, I'll try it, thank you


My model can move now. However, I found that my both soft (minPosition and maxPosition) and hard limits (minStop and maxStop) don't do anything during  the model moving.


In fact, it looks that the moving can break in the limits easily

##### Olivier Michel [Cyberbotics] 04/09/2020 08:38:58
Yes, this is explained here: [https://cyberbotics.com/doc/reference/motor#motor-limits](https://cyberbotics.com/doc/reference/motor#motor-limits)

##### Dorteel 04/09/2020 09:53:18
Hi, is there a way to record motion files or an easy way to create them?


I'm planning on setting up a script that would generate one for me, but I'm wondering if there is an easier way

##### David Mansolino [Cyberbotics] 04/09/2020 10:04:36
Hi `@Dorteel`, unfortunately, there is no more tool to easily record motion file. But you can indeed quite easily create a script that will record them.

##### Dorteel 04/09/2020 10:09:47
Alright, thank you David! 🙂

##### David Mansolino [Cyberbotics] 04/09/2020 10:10:20
You're welcome

##### chenpixx 04/09/2020 10:53:25
Hi I received the errors: [my\_controller]     initialize\_Proxys()

[my\_controller]   File "my\_controller.py", line 22, in initialize\_Proxys

[my\_controller]     motion       =  ALProxy("ALMotion" , "127.0.0.1", 9559)

[my\_controller]   File "/usr/local/lib/pynaoqi/lib/python2.7/site-packages/naoqi.py", line 237, in \_\_init\_\_

[my\_controller]     inaoqi.proxy.\_\_init\_\_(self, args[0], args[1], args[2])

[my\_controller]   File "/usr/local/lib/pynaoqi/lib/python2.7/site-packages/inaoqi.py", line 273, in \_\_init\_\_

[my\_controller]     this = \_inaoqi.new\_proxy(*args)

[my\_controller] RuntimeError:     ALBroker::createBroker

[my\_controller]     Cannot connect to tcp://127.0.0.1:9559


I will use simulation environment not real robot.


from naoqi import ALProxy

from naoqi import ALModule





    motion.setStiffnesses("Body", 1.0)

    postureProxy.goToPosture("StandInit", 1.0)

    



    global motion, postureProxy, memoryProxy

    motion       =  ALProxy("ALMotion" , "127.0.0.1", 9559)

    postureProxy =  ALProxy("ALRobotPosture", "127.0.0.1", 9559)

    memoryProxy  =  ALProxy("ALMemory", "127.0.0.1", 9559)

##### David Mansolino [Cyberbotics] 04/09/2020 10:54:55
Hi, please make sure that you have read/write access to this port, note also that naoquissim is deprecated. We recommend to use the native Webots API to simulate the nao robot.

##### chenpixx 04/09/2020 10:56:05
Thanks

##### David Mansolino [Cyberbotics] 04/09/2020 10:56:31
You're welcome

##### Olivier Michel [Cyberbotics] 04/09/2020 11:48:42
`@🍎小苹果🍎` & `@Taechu`: can you try to download this version of Webots that should fix the problem with texture errors: [https://github.com/cyberbotics/webots/releases/download/testing-webots-bin-renaming-2/webots-R2020a-rev2\_setup.exe](https://github.com/cyberbotics/webots/releases/download/testing-webots-bin-renaming-2/webots-R2020a-rev2_setup.exe)


Please let me know if that works for you.

##### Kormit 04/09/2020 12:12:52
Using procedural proto nodes, how can I make the script to generate a texture update when one of the proto fields are updated?

##### David Mansolino [Cyberbotics] 04/09/2020 12:13:22
You want to generate the image from the proto or just change the texture used?

##### Kormit 04/09/2020 12:14:54
I'm generating an image, using text from a field in the texture. I would like the texture to update when the text field is updated.

##### David Mansolino [Cyberbotics] 04/09/2020 12:17:39
This PROTO here is doing exactly what you want to do: [https://github.com/cyberbotics/webots/blob/69202baee3c0974f69f0e72d3412d19ed69feaad/projects/objects/traffic/protos/DirectionPanel.proto](https://github.com/cyberbotics/webots/blob/69202baee3c0974f69f0e72d3412d19ed69feaad/projects/objects/traffic/protos/DirectionPanel.proto)

When the ``text`` field changes it generates a new image in the temporary files and then use it as texture.

Let me know if there is something you don't understand in this PROTO.

##### Kormit 04/09/2020 12:17:59
Thanks 🙂

##### David Mansolino [Cyberbotics] 04/09/2020 12:18:13
You're welcome 🙂

##### Ευαγγελία 04/09/2020 14:32:17
Hi! I have tried to change gravity into 0 0 0  and i kept the wheels. So, my capsule goes until one point and comes back. How can i fix it in order rto manipulate its motion and achieve to follow intestines root? I have stimulated intestine as a vrml file.

##### David Mansolino [Cyberbotics] 04/09/2020 14:41:02
`@Ευαγγελία` you might use a Propeller node to be able to add force and thrust on your capsule: [https://cyberbotics.com/doc/reference/propeller](https://cyberbotics.com/doc/reference/propeller)

##### nikzzzlegrande 04/09/2020 16:54:00

%figure
![IMG-20200409-WA0021.jpg](https://cdn.discordapp.com/attachments/565154703139405824/697851823817752687/IMG-20200409-WA0021.jpg)
%end


I am having problem with integrating matlab with webots can anyone help


I already installed that compiler still it's showing the error

##### nap 04/09/2020 16:54:56
Webots 2020revB Text-to-Speech device demo...  how do you make the robot speak?


Or, am I not hearing it for some reason?  I have headphones plugged in and selected as well as sufficient volume.

The controller while loop doesn't do anything.


Never mind, I found the "Speaker" button in the control bar.

##### zynp 04/09/2020 23:19:58
Hi, I want to recognize the things with the camera and for this reason I add recognition node in the project. But when I use the function of "getRecognitionNumberofObjects", the number of things turn to 0.  What should I do to solve this problem?
%figure
![Ekran_Alnts.PNG](https://cdn.discordapp.com/attachments/565154703139405824/697948955262058546/Ekran_Alnts.PNG)
%end

##### nikzzzlegrande 04/10/2020 00:34:09
How to give time delay in webots

##### Troy 04/10/2020 02:06:56
Hi! Sorry to bother you! Did this situation happened to anyone before? When I write a lot of codes in physics.c and build it, then run the simulation, but Webots just stoped working and crashed down. My environment is windows 10. Does anyone know how to fix this problem? Does this mean my codes are wrong?

##### tilly 04/10/2020 07:51:00
Hi, i encountered a problem: when I initial my simulation I give the Thymios II certain names they are displayed (right) in the tree and starting the simulation in normal speed everything works as expected. If I start the simulation in fast mode the name I get from robot.getName() is "Thymio II" and not the name i gave them. Is there any way to fix this?


only happens at the first try after opening webots  (after resetting the simulation it works fine)

##### nap 04/10/2020 15:23:13
Is there a document that explains how the `projects` folder is organised?  I would like to give a brief but succinct explanation to students in a class I'm instructing of what to expect and where.

##### kwy 04/10/2020 15:43:01
hello, is there any sensor detect landmarks ?

##### nap 04/10/2020 16:02:06
I would not think so, since a landmark can be anything.


You need to configure your sensor analysis code to detect when a landmark is being sensed.


If you mean GPS or cartesian coordinates, then you need to know where you are and test whether you're at the landmark.


If you're using vision, then you need some algorithm that is able to determine if it sees the landmark.

##### Techcore 04/10/2020 21:27:47
Hi! I hope someone can help me 🙂 how do I set the wheel position sensor to zero or any other value ??    leftWheelSensor.getValue()

##### kwy 04/11/2020 02:41:30
`@nap` thanks .


`@nap` So can I divide the map into simple geometric areas, or convert map into matrix. And then find the location of the robot and landmarks on the map. Is this effective?



using vision can I get the information about the range and bearing?

##### nap 04/11/2020 07:03:36
`@kwy` Essentially, that would be a good approach if you're using some coordinate system.  Obviously you will/can check where the robot is and compare it to your map.

In order to get bearing/range information, your vision system will need to recognise things and provide that information.  Then you could use the 'triangulation' principle to see where you are, in which case you will usually fall back to a Cartesian coordinate system.


`@Techcore` , good question.  One way to deal with the problem would be to record the value and compare the difference later?

##### kwy 04/11/2020 07:53:08
`@nap` It that possible to build a plugin which can recognise a  simple landmarks and provide bearing/range information. The landmarks can be very simple, like a green point on the wall.

##### nap 04/11/2020 08:07:15
You would probably do that in your "Controller".  Sensors are generally NOT smart;  they just provide the data.


(That is how I program my controllers.)


So, the camera provides a frame to your controller and your controller scans the frame to see if there is a green spot.  if there is, then do action A, otherwise continue doing action B.

##### nikzzzlegrande 04/11/2020 08:08:49
`@nap` can you tell me how to put time delay in controller

##### nap 04/11/2020 08:08:57
TIME\_STEP


otherwise a normal programming sleep


I have my own question:  What is the exact criteria for naming and locating a controller.  Does in NEED to be at the same level as the "worlds" folder or can it be else where?  (I already know the name of the folder becomes the name of the controller.)

##### Darko Lukić [Cyberbotics] 04/11/2020 08:38:18
> How to give time delay in webots

`@nikzzzlegrande` 

Please check this answer:

[https://discordapp.com/channels/565154702715518986/565154703139405824/697549114832977960](https://discordapp.com/channels/565154702715518986/565154703139405824/697549114832977960)

##### nikzzzlegrande 04/11/2020 08:39:38
Thank you


> I have my own question:  What is the exact criteria for naming and locating a controller.  Does in NEED to be at the same level as the "worlds" folder or can it be else where?  (I already know the name of the folder becomes the name of the controller.)

`@nap`  you have to keep it in the controller of the same folder as world folder lies for ur simulation see the code

##### Darko Lukić [Cyberbotics] 04/11/2020 09:32:11
> Hi, I want to recognize the things with the camera and for this reason I add recognition node in the project. But when I use the function of "getRecognitionNumberofObjects", the number of things turn to 0.  What should I do to solve this problem?

`@zynp` 

Make sure your object's `recognitionColors` field is not empty:

[https://cyberbotics.com/doc/reference/recognition?tab-language=python#description](https://cyberbotics.com/doc/reference/recognition?tab-language=python#description)


> hello, is there any sensor detect landmarks ?

`@kwy` 

If you want to evaluate your landmark detection algorithms (that can be scaled to the real-world) you can use ArUco Markers ([https://docs.opencv.org/trunk/d5/dae/tutorial\_aruco\_detection.html](https://docs.opencv.org/trunk/d5/dae/tutorial_aruco_detection.html)). OpenCV allows you to get position and rotation of the ArUco Markers, so you can use it to determine range and bearing. 



Otherwise, you can use Webots Recognition node. Just make sure to follow the instructions:

- [https://cyberbotics.com/doc/reference/recognition](https://cyberbotics.com/doc/reference/recognition)

- [https://cyberbotics.com/doc/reference/camera?tab-language=python#wb\_camera\_has\_recognition](https://cyberbotics.com/doc/reference/camera?tab-language=python#wb_camera_has_recognition)

##### kwy 04/11/2020 11:44:58
`@nap` `@Darko Lukić` thanks! I will try

##### Kyrex 04/11/2020 15:27:06
hi, how can i connect database to webots

##### nap 04/11/2020 16:23:53
How does one get an instance of an Accelerometer device?  Something analogous to getCamera("camera")


Never mind, I found the header and the comment stating how to do it: getAccelerometer("accelerometer")

##### furkann 04/11/2020 23:04:30
> hi, how can i connect database to webots

`@Kyrex`  please help this guy

##### nap 04/12/2020 19:30:15
Can someone please recommend a YouTube video that would introduce webots (and perhaps the epuck) to 1st year university students who have very little programming skills?


`@furkann` :  I would think that connecting to a DB, e.g. MySQL or SQLITE has nothing to do with the Webots APIs.  You just need to find the required dependencies (headers if C/C++) and add the libraries into the Makefile for linking.


`@furkann` :  What language are you using? What DB do you want to connect to?

##### Zuxin 04/13/2020 04:38:37
Hi, I wonder how could I get the node inside a proto using python? For example, I want to reset the KUKA yobot's position, now I could get the node for the robot using getFromDef() function and reset its position, however, the robot arm is not reset. How can I reset the whole KUKA yobot positions (both base and arm)? Thanks.

##### Jeremy Jiang 04/13/2020 06:50:07
Hi, I'm using webots to test my robot with an uneven ground to prove the robustness.I find a floor object called unevenTerrain in webots, which can randomly generated uneven terrain based on Perlin noise. It is okay, but I think I may need a more uneven ground than this object. How can I get an more uneven ground in Webots or is there any methods to create my own uneven terrain?

##### Meisam 04/13/2020 09:05:28
Hi, I am implementing an OpenAI gym environment using Webots. As a first step, I need to run Webots in python and make sure that it is opened successfully. how can I check if Webots opened in a safe way?

##### Simon Steinmann [Moderator] 04/13/2020 14:03:26
Hi, I want to make my own ROS controller. However, 'import rospy' doesnt work in a new controller, it only works when changing the existing universal\_robot\_ros controller. Any ideas as to why?


why does this work
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/699287546139639868/unknown.png)
%end


and this does not
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/699287567895625859/unknown.png)
%end


I want a synchronous controller in webots, for this I need a loop running, and only execute robot.step(timestep) when I give the command. How can I accomplish this. Is it possible inside webots, or do I HAVE to go the extern controller route?

##### Jie 04/14/2020 03:30:41
hi，How do I fix a robot (robotic arm) on the table？Can you help me ?

##### David Mansolino [Cyberbotics] 04/14/2020 05:26:56
> I am having problem with integrating matlab with webots can anyone help

`@nikzzzlegrande` hi, we did fix a lot of issues with matlab recently, please try with a nightly version of Webots R2020a-revision2: [https://github.com/cyberbotics/webots/releases](https://github.com/cyberbotics/webots/releases)


> Hi! Sorry to bother you! Did this situation happened to anyone before? When I write a lot of codes in physics.c and build it, then run the simulation, but Webots just stoped working and crashed down. My environment is windows 10. Does anyone know how to fix this problem? Does this mean my codes are wrong?

`@Troy` the physics plugins are loaded directly in Webots (not like the controller which are separated executables) which means that if your plugin has an issue an crashes, it will make Webots crash too.


> Hi, i encountered a problem: when I initial my simulation I give the Thymios II certain names they are displayed (right) in the tree and starting the simulation in normal speed everything works as expected. If I start the simulation in fast mode the name I get from robot.getName() is "Thymio II" and not the name i gave them. Is there any way to fix this?

`@tilly` you have not the same behavior in real-time and fast mode? Can you please report this (including a simple world, controller and procedure to reproduce this) here: [https://github.com/cyberbotics/webots/issues/new?template=bug\_report.md](https://github.com/cyberbotics/webots/issues/new?template=bug_report.md)

Thank you


> Is there a document that explains how the `projects` folder is organised?  I would like to give a brief but succinct explanation to students in a class I'm instructing of what to expect and where.

`@nap`, yes, here it is: [https://www.cyberbotics.com/doc/guide/the-standard-file-hierarchy-of-a-project](https://www.cyberbotics.com/doc/guide/the-standard-file-hierarchy-of-a-project)


> Hi! I hope someone can help me 🙂 how do I set the wheel position sensor to zero or any other value ??    leftWheelSensor.getValue()

`@Techcore`, you mean from the controller? This is unfortunately not possible from the Webots API, however, you can easily compute an offset in your controller.

##### nikzzzlegrande 04/14/2020 05:33:06
Can anyone tell me how to make a robot go to a particular set of coordinates? Is there any set of instructions other than going for a little bit complex path planning set up

##### David Mansolino [Cyberbotics] 04/14/2020 05:34:12
> hi, how can i connect database to webots

`@Kyrex` What kind of database? Webots controllers are regular processes, so you can connect them to any database like you would do with any other program.


> Can anyone tell me how to make a robot go to a particular set of coordinates? Is there any set of instructions other than going for a little bit complex path planning set up

`@nikzzzlegrande` you unfortunately have to do path planning for a realistic behavior. Otherwise you can use the Supervisor API to teleport your robot: [https://cyberbotics.com/doc/reference/supervisor](https://cyberbotics.com/doc/reference/supervisor)

##### nap 04/14/2020 05:35:35
Can someone please recommend a YouTube video that would introduce webots (and perhaps the epuck) to 1st year university students who have very little programming skills?

##### David Mansolino [Cyberbotics] 04/14/2020 05:37:37
> Can someone please recommend a YouTube video that would introduce webots (and perhaps the epuck) to 1st year university students who have very little programming skills?

`@nap` here is the presentation video: [https://www.youtube.com/watch?v=O7U3sX\_ubGc](https://www.youtube.com/watch?v=O7U3sX_ubGc)

Otherwise, you can have a look at the curriculum which is a bit more technical and explains Webots and the e-puck to beginnger programmer: [https://en.wikibooks.org/wiki/Cyberbotics%27\_Robot\_Curriculum](https://en.wikibooks.org/wiki/Cyberbotics%27_Robot_Curriculum)

##### nap 04/14/2020 05:38:08
thanks `@David Mansolino`

##### David Mansolino [Cyberbotics] 04/14/2020 05:38:29
You're welcome!


> Hi, I wonder how could I get the node inside a proto using python? For example, I want to reset the KUKA yobot's position, now I could get the node for the robot using getFromDef() function and reset its position, however, the robot arm is not reset. How can I reset the whole KUKA yobot positions (both base and arm)? Thanks.

`@Zuxin` internal nodes of a PROTO node can't be manipulated, but you might reset the robot using the wb\_supervisor\_node\_reset\_physics function ([https://cyberbotics.com/doc/reference/supervisor?version=develop#wb\_supervisor\_node\_reset\_physics](https://cyberbotics.com/doc/reference/supervisor?version=develop#wb_supervisor_node_reset_physics))


> Hi, I'm using webots to test my robot with an uneven ground to prove the robustness.I find a floor object called unevenTerrain in webots, which can randomly generated uneven terrain based on Perlin noise. It is okay, but I think I may need a more uneven ground than this object. How can I get an more uneven ground in Webots or is there any methods to create my own uneven terrain?

`@Jeremy Jiang` the uneven terrain PROTO uses internally the ElevationGrid node: [https://cyberbotics.com/doc/reference/elevationgrid](https://cyberbotics.com/doc/reference/elevationgrid)

Using this node you can create a floor with any custom eleveation (based on a regularly spaced grid).


> Hi, I am implementing an OpenAI gym environment using Webots. As a first step, I need to run Webots in python and make sure that it is opened successfully. how can I check if Webots opened in a safe way?

`@Meisam` I know that some other users have made partial interface between OpenAI an Webots, you might for example take inspiration from: [https://github.com/talregev/gym-webots](https://github.com/talregev/gym-webots)


> Hi, I want to make my own ROS controller. However, 'import rospy' doesnt work in a new controller, it only works when changing the existing universal\_robot\_ros controller. Any ideas as to why?

`@Simon Steinmann` this is because this controller contains a ``runtime.ini`` files that adds the rospy libraries to the path, see: [https://github.com/cyberbotics/webots/blob/master/projects/robots/universal\_robots/controllers/universal\_robots\_ros/runtime.ini](https://github.com/cyberbotics/webots/blob/master/projects/robots/universal_robots/controllers/universal_robots_ros/runtime.ini)

You will find more information about the use of runtime.ini files with controllers here: [https://cyberbotics.com/doc/guide/controller-programming#environment-variables](https://cyberbotics.com/doc/guide/controller-programming#environment-variables)


> I want a synchronous controller in webots, for this I need a loop running, and only execute robot.step(timestep) when I give the command. How can I accomplish this. Is it possible inside webots, or do I HAVE to go the extern controller route?

`@Simon Steinmann` this is indeed possible inside Webots, but you have to make sure that you have a callback (for example from a ROS service) that calls the ``robot.step(timestep)`` function.


> hi，How do I fix a robot (robotic arm) on the table？Can you help me ?

`@Jie` you simply have to make sure that the root node of the robot have a bounding object defined but no Physics node. Do you have one particular robot in mind?

##### Daniel Deng 04/14/2020 05:58:15
Hi, I ran into a problem/bug, I have a solid with a group as its children, and the group as the bouldingobject. The group have contained two transforms, the first have a children shape DEF A, the second children use DEF A, (two identical shape, cylinder, at different place). When I change the radius of A, both cylinders change shape, which is correct. However, only one side of the boundingobject(white border) changed, resulting in different boundingobject on two sides. If I save and reload, the two sides will match again. I’m I missing something here?

##### David Mansolino [Cyberbotics] 04/14/2020 06:05:22
Hi `@Daniel Deng`, what you are doing looks correct (even so it is indeed always safer to save and revert to make sure the scene tree is completely up to date), can you please open an issue with this description here: [https://github.com/cyberbotics/webots/issues/new?template=bug\_report.md](https://github.com/cyberbotics/webots/issues/new?template=bug_report.md)

We will then try to fix the problem.

##### Daniel Deng 04/14/2020 06:06:00
Sure, thanks!

##### David Mansolino [Cyberbotics] 04/14/2020 06:09:27
You're welcome.

##### Jie 04/14/2020 06:16:52
`@David Mansolino` I add abb irb4600 robot, Looks it don't have it.

##### David Mansolino [Cyberbotics] 04/14/2020 06:22:45
`@Jie` you're right, we fixed this in the development version, it now have a 'staticBase' field allowing you to pin it to the environment. You can download a beta of the R2020rev2 version here: [https://github.com/cyberbotics/webots/releases](https://github.com/cyberbotics/webots/releases)

##### Jie 04/14/2020 06:23:40
ok，thanks for your help

##### David Mansolino [Cyberbotics] 04/14/2020 06:24:04
You're welcome

##### Jie 04/14/2020 06:25:17
download this one Webots Nightly Build (13-4-2020)?

##### David Mansolino [Cyberbotics] 04/14/2020 06:31:31
Yes

##### Jie 04/14/2020 06:31:42
ok

##### nikzzzlegrande 04/14/2020 11:23:15
Can we put gps way point in webots?

##### David Mansolino [Cyberbotics] 04/14/2020 11:24:24
Can you be a bit more precise, what do you mean by GPS waypoint ?

##### nikzzzlegrande 04/14/2020 11:25:03
If I put a GPS marker my robot shud go to that particular point

##### David Mansolino [Cyberbotics] 04/14/2020 11:33:06
Yes, you simply have to add a GPS node to your robot and write a controller that does the necessary motion to reach this point based on the current position returned by the GPS.

##### nikzzzlegrande 04/14/2020 11:34:17
Is there any example code available which I can refer to?

##### David Mansolino [Cyberbotics] 04/14/2020 11:37:08
Here is a sample code showing how to get the GPS coordinate: [https://cyberbotics.com/doc/guide/samples-devices#gps-wbt](https://cyberbotics.com/doc/guide/samples-devices#gps-wbt)

##### nikzzzlegrande 04/14/2020 11:37:29
`@David Mansolino` thank you

##### David Mansolino [Cyberbotics] 04/14/2020 11:38:12
You're welcome

##### Mathie20 04/14/2020 11:54:06
Hi, When i use the universal robot ros controller (using a ur3e). I dont get any services on the toolslot. Which i added a camera on top of it. How can i get the rosservice of the toolslot using the universal robot ros controller so that i can activate the camera

##### David Mansolino [Cyberbotics] 04/14/2020 11:56:09
`@Mathie20` this is normal, the ure ros controller handle the joints only, to make the slot device available throught ROS, the simplest solution is to encapsulate them in a Robot node (which is itself in the toolslot) and assign the ``ros`` controller to this robot.

##### Tosidis 04/14/2020 12:01:06
Got a couple of questions. Can i open a wbt file through a python script? And if yes, can I then export a node in that world as wbo? (again through a script)

##### David Mansolino [Cyberbotics] 04/14/2020 12:01:51
Yes, you can but we do not provide any library to parse and export wbt file in Python.

##### Mistral 04/14/2020 12:22:42
Can the Webots directly call the NAOqi library to use?

##### David Mansolino [Cyberbotics] 04/14/2020 12:23:42
It was able, but this is now deprecated and we do not provide any support for this anymore: [https://github.com/cyberbotics/naoqisim](https://github.com/cyberbotics/naoqisim)

##### Mathie20 04/14/2020 12:36:31
> `@David Mansolino`  I have tried it using the robot. The multisense camera and gripper fall of when i run it...

##### David Mansolino [Cyberbotics] 04/14/2020 12:37:46
You may have to add a 'fake' bounding object and physics node to the intermediary robot node (this can be a very small sphere).

##### Tosidis 04/14/2020 12:57:58
> Yes, you can but we do not provide any library to parse and export wbt file in Python.

`@David Mansolino` probably you mean wbo, right?

##### David Mansolino [Cyberbotics] 04/14/2020 12:58:40
Yes, it is actually the same

##### LuisD 04/14/2020 15:06:51
Hi, i have a problem where the time step after i restart the simulation increases with everytime i restart the simulation. But it is only the first time step after i restart the simulation, the time steps after that are fine again. Is there something i could be doing wrong?

##### David Mansolino [Cyberbotics] 04/14/2020 15:14:55
Hi `@LuisD`, I am not sure to understand exactly what is your problem. Is it similar to [https://github.com/cyberbotics/webots/issues/1432](https://github.com/cyberbotics/webots/issues/1432) ?

##### LuisD 04/14/2020 15:19:24
Thanks yes, that's exactly my problem. But since the issue is still open, i guess there is nothing i can do about it for now?

##### David Mansolino [Cyberbotics] 04/14/2020 15:23:24
Unfortunately we are indeed still working on it. But you can subscribe to the notifications of this issue to know when we progress on this front.

##### LuisD 04/14/2020 15:24:50
Ok, but thank you for your quick answer

##### David Mansolino [Cyberbotics] 04/14/2020 15:28:14
You're welcome

##### Zuxin 04/14/2020 20:16:58
Hi, can we get robot1's sensor information (such as camera) in robot2's controller using python? For example, I want to use a centralized controller to gather all the robots sensor information and send move commands to other robots' controller..

##### ITS11 04/14/2020 23:18:51
Hi there


I need help to create an account
%figure
![webots_8.jpg](https://cdn.discordapp.com/attachments/565154703139405824/699760960507871242/webots_8.jpg)
%end


The web page thats says below is not working longer


[http://www.cyberbotics.com/my\_account/register](http://www.cyberbotics.com/my_account/register)

##### Mistral 04/15/2020 02:18:30
I also need a webots account

##### nap 04/15/2020 05:12:16
In Webots R2020a-rev1, I don't seem to be getting any noise in the motors and my epuck drives striaght without needing any control.  Is there a setting that turns on noise?

##### David Mansolino [Cyberbotics] 04/15/2020 05:41:16
> I need help to create an account

`@ITS11` Webots does not require any account anymore, you can use any email address you want and the generic 'webots' password, for more information see:

[https://www.cyberbotics.com/doc/guide/general-faq#can-i-still-use-a-webots-version-before-the-r2019a-release](https://www.cyberbotics.com/doc/guide/general-faq#can-i-still-use-a-webots-version-before-the-r2019a-release)

Note also that we do recommend to use the latest version of Webots which doesn't require to login anymore.


> Hi, can we get robot1's sensor information (such as camera) in robot2's controller using python? For example, I want to use a centralized controller to gather all the robots sensor information and send move commands to other robots' controller..

`@Zuxin` you need to use emitter and receiver to send/share these information.


> In Webots R2020a-rev1, I don't seem to be getting any noise in the motors and my epuck drives striaght without needing any control.  Is there a setting that turns on noise?

`@nap` Webots does not provide noise in motor command.

##### nap 04/15/2020 06:01:27
`@David Mansolino` :  So, given a differential robot and symmetric motor commands, the robot travels in a perfectly straight line on a flat/level surface?  (I don't think that was the case in Webots 7/8)

##### David Mansolino [Cyberbotics] 04/15/2020 06:13:55
Yes it does. On Webots 7, the kinematic version had indeed a noise feature you're right, but since these robots are now dynamic for most of them this is not supported anymore. But since it might indeed be a good idea to have noise on the motor command, feel free to open an a feature request here: [https://github.com/cyberbotics/webots/issues/new?template=feature\_request.md](https://github.com/cyberbotics/webots/issues/new?template=feature_request.md)

##### furkann 04/15/2020 06:45:18
Hello guys, How can I control a webots simulation via Qt Widget application.

##### Olivier Michel [Cyberbotics] 04/15/2020 06:46:17
Hi, you can simply write a Qt application that includes webots C or C++ include files and is linked with the Webots libController library.


Your Qt application should however call the `wb_robot_step` on a regular basis (for example called by QTimer callback) to make the simulation advance.

##### furkann 04/15/2020 06:47:52
Briefly, I want to connect simulation via qt application. For example I want to send to a command to robot


> Your Qt application should however call the `wb_robot_step` on a regular basis (for example called by QTimer callback) to make the simulation advance.

`@Olivier Michel` Thank you so much for your interest

##### nap 04/15/2020 08:06:47
`@David Mansolino` : Thanks.  I'll take you up on that suggestion.  I was planning on making an introductory exercise for my students, but with no noise, I'll work out some other scenarios.

Is there a way of inducing noise?  (I don't want the students to simply disable it and then say "Look my project works".  lol

##### David Mansolino [Cyberbotics] 04/15/2020 08:26:49
You may add artificial noise on the controller side, but this is indeed easy to disable for the students. 

Otherwise, you can rather add noise on the sensor side, most of the sensors in Webots do provide a noise model.

##### nap 04/15/2020 08:45:07
`@David Mansolino` :  (1) I was thinking about this after I posted my question.  I suppose if the students work out how to disable the noise they can easily work out how to implement a feedback loop for this.

(2) Our students will be installing their own Webots versions based on the OS they have.  So I would need to supply them with our version of the sensor model.

 BTW, where would the sensor noise model be implemented?  Would it be in the controller as well or in a different part of the project (I have no idea atm.)

##### David Mansolino [Cyberbotics] 04/15/2020 08:46:12
For the sensors, this is defined directly in the Webots scene-tree (or can be hidden in a PROTO file if you want to hide this to your student).

##### nap 04/15/2020 08:47:26
`@David Mansolino` : ok.  So it would be 'given to them' but in such a way that it would be 'obfuscated'?

##### David Mansolino [Cyberbotics] 04/15/2020 08:47:28
For example for distance sensors, this is defined in the look-up table: [https://cyberbotics.com/doc/reference/distancesensor#lookup-table](https://cyberbotics.com/doc/reference/distancesensor#lookup-table)


> `@David Mansolino` : ok.  So it would be 'given to them' but in such a way that it would be 'obfuscated'?

`@nap` Yes exactly. Of course they can always manually edit the PROTO file a text editor, but this way more tricky.

##### nap 04/15/2020 08:48:22
We're not going into details about PROTOs, though I've mentioned they exist.


`@David Mansolino` :  Cheers, that sounds like something interesting for me to learn how to do. (And thanks for the link/example.)

##### David Mansolino [Cyberbotics] 04/15/2020 08:52:28
You're welcome 🙂

##### Laojiang 04/15/2020 09:04:18
Is there any way to cancel graphics rendering?

##### David Mansolino [Cyberbotics] 04/15/2020 09:05:17
Yes, you can run Webots in fast mode. This can be set using the '--mode=fast' argument when starting Webots or from the preferences.

##### Laojiang 04/15/2020 09:07:39
I find it, thank you

##### David Mansolino [Cyberbotics] 04/15/2020 09:07:47
You're welcome

##### machinekoder 04/15/2020 10:04:30
What's the best way to simulate a light source emitted from a plane? In particular an LED strip.

##### Olivier Michel [Cyberbotics] 04/15/2020 10:06:28
You should probably set some emissive color to the material of that plane.


See [https://www.cyberbotics.com/doc/reference/material](https://www.cyberbotics.com/doc/reference/material)

##### machinekoder 04/15/2020 11:19:59
`@Olivier Michel` I tried that, but it doesn't change the illumination of surrounding objects.

##### Olivier Michel [Cyberbotics] 04/15/2020 11:21:47
This is normal. To change the illumination of surrounding objects, you should setup lights in your environment.


[https://cyberbotics.com/doc/reference/light](https://cyberbotics.com/doc/reference/light)


I guess you will have to tune the `ambientIntensity` parameter and `location` or  `direction` depending on the type of light you will select.

##### nap 04/15/2020 12:01:02
`@David Mansolino` : I've looked at the E-puck.proto file, and whilst it is possible to add noise to the positional sensors, the follow-line behaviour does not use that information.  Instead it uses the GSM module to detect the line and simply sends differential motor commands.  I don't want to introduce more noise on the GSM as that will throw the control loop out.  RotationalMotors however does not allow a noise parameter.

Just thinking aloud here.  If I were to introduce a "Brake" device, with some friction coefficient, can noise be introduced there?

Are there any callbacks I could subscribe to in order to fiddle the motor commands?


Is the power of the wheels affected by the battery state?  Can there be some noise introduced there?


I assume the simulation is based on rigid bodies, can I introduce something between the motor and the epuck body that varies the position/orientation of the wheel randomly?

##### David Mansolino [Cyberbotics] 04/15/2020 12:07:06
Webots API does not include any callback, but you might introduce some in the controller.

About the Brake, it will work if you control the motor in torque, if you use speed control, the PID controller will compensate for the brake (util it reaches the maximum torque).

About the battery, it will unfortunately switch on/or the motor but not influence the commands.


> I assume the simulation is based on rigid bodies, can I introduce something between the motor and the epuck body that varies the position/orientation of the wheel randomly?

`@nap` yes it is indeed, yes that's a possibility.

##### nap 04/15/2020 12:07:53
What kind of device could I insert into the chain?


does Webots model super-balls?

##### David Mansolino [Cyberbotics] 04/15/2020 12:08:30
But maybe if you really want to introduce some 'randomness' in your simulation the simplest solution is to use a second controller using the Supervisor API which will perturbate the robot (by adding some random force/torque on the robot for example).


> does Webots model super-balls?

`@nap` What so you mean by super-balls?

##### nap 04/15/2020 12:09:07
I've never used a Supervisor.  We had an Educational License for W7/8.  😦


lol, one of those balls kids play with that bounces really well and high.

##### David Mansolino [Cyberbotics] 04/15/2020 12:09:46
You're lucky, Webots is now free and open-source so even with Educational license you can use the Supervisor now 😉


> lol, one of those balls kids play with that bounces really well and high.

`@nap` not really, but you can have a ball and tune the contact properties to make bouncy.

##### nap 04/15/2020 12:10:33
Yes, and I'm very happy that I have access, I think Webots is a terrific development and look forward to a bright future.


Could you point me to a supervisor example?  I've seen one in python, but I need C/C++.


Have the code signing mechanisms been removed from the Open Source version?


I could be useful here to prevent the students from modifying the supervisor code.

##### kwy 04/15/2020 12:14:56

%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/699955924114210906/unknown.png)
%end

##### David Mansolino [Cyberbotics] 04/15/2020 12:15:27
> Have the code signing mechanisms been removed from the Open Source version?

`@nap` yes.

##### nap 04/15/2020 12:15:43
`@kwy`, thanks

##### kwy 04/15/2020 12:16:00

%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/699956192881016833/unknown.png)
%end

##### David Mansolino [Cyberbotics] 04/15/2020 12:16:08
> I could be useful here to prevent the students from modifying the supervisor code.

`@nap` in that case you can distribute an already compiled binary (if all your students are using the same OS).

##### nap 04/15/2020 12:16:38
Yes, but I would need at least 3 (Win, MacOS, and Ubuntu)


but that's an interesting idea.

##### David Mansolino [Cyberbotics] 04/15/2020 12:17:25
> Could you point me to a supervisor example?  I've seen one in python, but I need C/C++.

`@nap` here is a simple example: [https://github.com/cyberbotics/webots/blob/master/projects/samples/devices/controllers/sample\_supervisor/sample\_supervisor.c](https://github.com/cyberbotics/webots/blob/master/projects/samples/devices/controllers/sample_supervisor/sample_supervisor.c)

##### nap 04/15/2020 12:17:56
thanks


`@kwy`, the `supervisor_draw_trail.wbt` world looks handy for my situation.  It has an epuck and a supervisor in it together.


In the draw trail, how does the supervisor get a reference to the Epuck?

##### David Mansolino [Cyberbotics] 04/15/2020 12:44:49
It gets it from the 'TARGET' DEF name: [https://github.com/cyberbotics/webots/blob/master/projects/samples/howto/controllers/supervisor\_draw\_trail/supervisor\_draw\_trail.c#L72](https://github.com/cyberbotics/webots/blob/master/projects/samples/howto/controllers/supervisor_draw_trail/supervisor_draw_trail.c#L72)

##### nap 04/15/2020 12:46:12
I can see that it creates the Trail shape, but I'm not seeing how it know to draw it where to epuck has been.


Yep, I see


Does DEF TARGET need to be globally unique in the world?


and if I wanted to get a reference to the Epuck, I would use "PROTO E-puck"?

##### David Mansolino [Cyberbotics] 04/15/2020 12:49:27
> Does DEF TARGET need to be globally unique in the world?

`@nap` Yes.

##### nap 04/15/2020 12:49:52
or is there a way of using the `name` property?

##### David Mansolino [Cyberbotics] 04/15/2020 12:50:09
> and if I wanted to get a reference to the Epuck, I would use "PROTO E-puck"?

`@nap` No, you have to add a DEF name to your e-puck and then use the same in the Supervisor controller: [https://www.cyberbotics.com/doc/reference/def-and-use](https://www.cyberbotics.com/doc/reference/def-and-use)

##### nap 04/15/2020 12:50:47
Ok, would that be done by editing the PROTO file?


Or attaching it to the turret?


(turret slot?  [Which is a collection])

##### David Mansolino [Cyberbotics] 04/15/2020 12:52:13
Non, when you select the node in Webots, you can define the DEF name in the node editor (just below the scene-tree): [https://www.cyberbotics.com/doc/reference/def-and-use](https://www.cyberbotics.com/doc/reference/def-and-use)

##### nap 04/15/2020 12:52:47
Ok, ic.  (actually seen it a lot but never understood its real meaning.)


I'll have a look at the python master/slave project now that can see roughly how it works.


That demo has 3 blue robots running around.


(Which reminds me, what are those blue robots called?)

##### David Mansolino [Cyberbotics] 04/15/2020 12:53:48
MyBot


?

##### nap 04/15/2020 12:54:36
They have faces on them and the wheels are external to the body (unlike the epuck)


thnx


These ones
%figure
![Screen_Shot_2020-04-15_at_10.56.54_pm.png](https://cdn.discordapp.com/attachments/565154703139405824/699966597825167390/Screen_Shot_2020-04-15_at_10.56.54_pm.png)
%end

##### David Mansolino [Cyberbotics] 04/15/2020 12:57:46
yes, we call it 'MyBot'.


(that's not a real robot)

##### nap 04/15/2020 12:58:16
Ok, that's fine.  I think some students might like them too.


What is the name of their PROTO file? I can't find mybot.proto

##### David Mansolino [Cyberbotics] 04/15/2020 13:02:35
It is not defined in a PROTO.

##### nap 04/15/2020 13:02:36
Is this it: `ResettableMyBot.proto`?


oh, so how do they work?  I suppose the python demo would explain that.


In 'slave.py', the initialiser builds a dynamic PROTO?


`@David Mansolino` thanks a million for answering all my questions.

`@kwy` , thanks for pointing out the supervisor demos.

I have some work (fun) ahead of me to prepare for tomorrow's class.

##### nikzzzlegrande 04/15/2020 13:25:22
Can anyone tell me how to save the photo taken by the camera in webots save it to my desktop

##### David Mansolino [Cyberbotics] 04/15/2020 13:26:31
Their is an APi function for that: 

[https://cyberbotics.com/doc/reference/camera#wb\_camera\_save\_image](https://cyberbotics.com/doc/reference/camera#wb_camera_save_image)

##### nap 04/15/2020 13:34:28
`@David Mansolino` :  It would be nice to be able to open two Webots windows. (Not to run in both, but to compare.)


hmmm.  `@David Mansolino` :  I decided to use a Physics Plugin.

So I edited the E-puck PROTO and added a DEF leftHinge to the HingeJoint (same for the right side).

Set the physics node in WorldInfo to my plugin name.  In the plugin C file, I have defined a `dBodyID` for each joint in the init() method using `epuckHinges[0] = dWebotsGetBodyFromDEF("epuckLeftHinge");`.  And in the step() method, I have `dBodyAddForce(epuckHinges[0], 0.0, 0.0, 9.0);` for each hinge (-9.0 for the other one.); spin around the Z axis.

But my epuck still goes straight.


I'm using the (mistake) actually it's the `flying_mybot.c` example as a rough guide.

##### kwy 04/15/2020 15:24:34
Hello, I have questions. can I change the range of the distance sensor on E-puck? and how far can it measure ?

##### nap 04/15/2020 15:27:37
`@kwy` : use the 'noise' parameter.  You can set the response for range.


sorry, `lookuptable`


[https://cyberbotics.com/doc/reference/distancesensor#lookup-table](https://cyberbotics.com/doc/reference/distancesensor#lookup-table)


That links to the explanation, which I have an idea about but couldn't explain succinctly.

##### kwy 04/15/2020 15:30:48
`@nap` thanks!

##### tilly 04/15/2020 16:34:48
hi, if Im trying to run multiple instances of webots I always get this error. Is there a way to fix it?
%figure
![image.png](https://cdn.discordapp.com/attachments/565154703139405824/700021321160982578/image.png)
%end


but only on ubuntu (it works fine on mac)

##### machinekoder 04/15/2020 18:00:51
`@Olivier Michel` Thanks, I'll try that. It doesn't really emulate an LED stripe, but might work for me. Is there any disadvantage of placing many lights if I disable shadows?

##### Olivier Michel [Cyberbotics] 04/15/2020 18:09:02
It may just slow down the simulation.

##### nap 04/15/2020 19:17:23
Why does the Y axis point up into the sky?  Should that not be the Z axis?


Anyone know much about Physics Plugins and the library functions available?


`@David Mansolino` : I did it.  It looks crap but it works.  I ended up using a Physics Plugin, but had to resort to dBodyGetRotation and dBodySetRotation because I couldn't get dBodyAddRelTorque and dBodyAddRelForce to work for some reason.

##### Olivier Michel [Cyberbotics] 04/16/2020 05:30:11
The Y axis pointing to the sky is a standard in VRML97 from which Webots inherited. I know RViz and other software more often use Z as the vertical axis. We are considering changing this into Webots, but that will take quite some time.

##### nap 04/16/2020 09:05:19
`@Olivier Michel` : I understand. I didn’t realise it was the case until I was debugging a physics plugin and had my forces in the wrong field.

##### yash 04/16/2020 10:43:38
I am working on swarm robotics . Increasing the number of robots the simulation runs slow and sometimes also hangs in between and then continues running slowly. What could be the issue .?

##### David Mansolino [Cyberbotics] 04/16/2020 10:48:36
Hi, it all depends on the kind of robot and devices you are using.


Can you tell us a bit more about this?

##### yash 04/16/2020 11:12:41
It’s a differential drive robot with 4 camera, 8 distance sensors , one turn table mechanism , one IMU, 2 position sensors


And LEDs and one bump sensor

##### David Mansolino [Cyberbotics] 04/16/2020 11:20:39
If each robot has 4 cameras, this is probably the bottleneck. Cameras are expensive to simulate or the GPU, you should either try with a more powerful GPU either try reducing the camera refresh rates.

##### yash 04/16/2020 11:30:12
Alright thanks ... let just check it out

##### Weiyi 04/16/2020 15:01:54
Hello, I wonder whether I can add stl or urdf file into my world😀

##### David Mansolino [Cyberbotics] 04/16/2020 15:25:38
Hi, we have an URDF importer: [https://github.com/cyberbotics/urdf2webots](https://github.com/cyberbotics/urdf2webots)

##### Weiyi 04/16/2020 15:26:30
OK, thank you very much!!!😀

##### yash 04/16/2020 18:48:17
Is it possible to detect RGB colours of LED using a camera ?

##### nikzzzlegrande 04/17/2020 01:04:04
Can anyone tell me why I am getting this error
%figure
![JPEG_20200417_063251.jpg](https://cdn.discordapp.com/attachments/565154703139405824/700511870318018640/JPEG_20200417_063251.jpg)
%end


Are there any libraries for accelerometer and gyro in webots?  `@Deleted User`


`@Deleted User` yeah thanks that was the issue

##### David Mansolino [Cyberbotics] 04/17/2020 05:14:22
> Is it possible to detect RGB colours of LED using a camera ?

`@yash` certainly yes.

##### yash 04/17/2020 05:14:55
So we have to use getImagered ... etc functions for this purpose .?

##### David Mansolino [Cyberbotics] 04/17/2020 05:21:21
Yes, you will find some example of simulation using the camera here for example: [https://cyberbotics.com/doc/guide/samples-devices#camera-wbt](https://cyberbotics.com/doc/guide/samples-devices#camera-wbt)

##### yash 04/17/2020 05:40:33
I already had a look at it , in this case the camera detects coloured objects and not colour from LED.

So that’s why asked it it’s possible or not .?

##### nap 04/17/2020 05:42:48
`@David Mansolino` : As explained earlier, I'm using the physics plugin to change the yaw of the robot by a small amount each step.  This seems to work for a few step, but then stops having an effect on the robot.

I'm wondering why this is happening and if there is a way to overcome this?

##### David Mansolino [Cyberbotics] 04/17/2020 05:55:47
> I already had a look at it , in this case the camera detects coloured objects and not colour from LED.

> So that’s why asked it it’s possible or not .?

`@yash` yes you have to create your own controller for detecting LEDs, this is just an example.


> `@David Mansolino` : As explained earlier, I'm using the physics plugin to change the yaw of the robot by a small amount each step.  This seems to work for a few step, but then stops having an effect on the robot.

> I'm wondering why this is happening and if there is a way to overcome this?

`@nap` I am sorry but I have no idea why this is happening.

##### nap 04/17/2020 05:57:09
`@David Mansolino` : np, thought I would ask just in case


Thnx

##### David Mansolino [Cyberbotics] 04/17/2020 05:57:24
You're welcome

##### nap 04/17/2020 05:58:29
I’ll have a look at the code in the repo and do some tests


I may be doing something wrong

##### yash 04/17/2020 06:00:37
> `@yash` yes you have to create your own controller for detecting LEDs, this is just an example.

`@David Mansolino`  yes will have to do that , thanks


Let me try it out

##### Jeremy Jiang 04/17/2020 07:42:38
Hello, I have a problem with Webots. Every time when I create the ElevatorGrid node within the solid node, the Webots will breakdown, and I cannot find the solution. I'm using the version of webots-R2020a-rev2. Is the problem related to this version, could you tell me the suggestions?

##### Olivier Michel [Cyberbotics] 04/17/2020 07:43:57
Please open a bug report allowing us to reproduce the crash.


[https://github.com/cyberbotics/webots/issues/new?template=bug\_report.md](https://github.com/cyberbotics/webots/issues/new?template=bug_report.md)


Meanwhile, you can try to edit your world file in a text editor and add the ElevationGrid manually there.

##### Jeremy Jiang 04/17/2020 07:45:42
Ok, thank you

##### Francony 04/17/2020 08:59:35
Hi, is there a way to automatically add all Bounding object based inertial matrices to my nodes so that they are accessible from a controller?

##### Olivier Michel [Cyberbotics] 04/17/2020 09:00:51
Yes, if you don't specify the inertial matrices, they are automatically computed from the bounding object.

##### Francony 04/17/2020 09:03:31
Thanks for the quick answer. Thats what I thought but when I don't add them in manually and use "inertiaMatrix.getMFVec3f(0)" I get a "called with an out-of-bound index: 0" error, should I be accessing them differently?

##### Olivier Michel [Cyberbotics] 04/17/2020 09:04:51
Yes, if they are not present in the scene tree, you cannot retrieve them from a supervisor...

##### Francony 04/17/2020 09:05:46
okay, thats what I was wondering from my first question, I wasn't clear. Thanks a lot and have a nice day.

##### Olivier Michel [Cyberbotics] 04/17/2020 09:06:26
There is an API function for getting the center of mass: [https://www.cyberbotics.com/doc/reference/supervisor#wb\_supervisor\_node\_get\_center\_of\_mass](https://www.cyberbotics.com/doc/reference/supervisor#wb_supervisor_node_get_center_of_mass)


But unfortunately none for getting the inertia matrix. Nevertheless it shouldn't be very difficult to implement it. If you want to dig into the source code of Webots and implement it, you are very welcome!

##### nap 04/17/2020 09:53:22
In the physics plugin with an E-Puck robot, setting `dBodySetRotation(gRobotBodyID, body_posr.R);` rotates the body, but the wheels come off (that is they do not rotate with the body).  It would appear to me that this has something to do with how the `E-puck.proto` is defined.  Is that so?

##### Francony 04/17/2020 12:44:01
Hi, just out of curiousity, I have a children field with one node in it. When I used .getField("children").getSFNode() it didn't find it, but .getField("children").getMFNode(0) found it. Is there something i'm missing here?

##### David Mansolino [Cyberbotics] 04/17/2020 12:46:31
`@Francony` even if you have only one node in the children field this field type is still a MFNode so you should use   getMFNode.

getSFNode is reserved for SFNode (such as for example the ``phyiscs`` field of the ``Solid`` nodes).

##### Francony 04/17/2020 12:47:26
makes sense, thanks!

##### David Mansolino [Cyberbotics] 04/17/2020 12:49:20
You're welcome.

##### Soyboy 04/17/2020 15:24:32
Hi guys, I just started using Webots about a week ago and I'm trying to make a shape using IndexedFaceSet. I made all the points and indexes and the shape is there but each face is only visible from certain angles. Does anyone know what is causing this and/or how to fix it?

##### Olivier Michel [Cyberbotics] 04/17/2020 15:26:11
That's because faces are single sided. If you need double sided faces, you should define them twice, but with reverse vertex order in the second time.


However, I would recommend you to use a 3D modeling software to create complex IndexedFaceSet nodes, such as Blender.

##### nikzzzlegrande 04/17/2020 15:29:57
Is there any way to turn the robot using gyro sensor values

##### Olivier Michel [Cyberbotics] 04/17/2020 15:30:32
Not sure to understand what you mean...

##### Soyboy 04/17/2020 15:31:15
`@Olivier Michel` Ahh that makes sense, thank you so much! I'll look into Blender

##### Morbius 04/17/2020 19:59:18
I'm new here. Is there any support for the WLKATA Mirobot G1?

##### nap 04/18/2020 09:52:10
Q about the Physics in Webots.... I'm trying to simulate some noise in the motors/wheels in the epuck (differential robot).  I've tried a few ways so far and right now I'm attempting to alter the course of the epuck using `dBodySetAngularVel`.  I'm setting the y (yaw) parameter to some value that generates an effect.  Then, every 50 steps, I'm flipping the sign on the yaw parameter, which in theory should create a zig-zag path.  However this is not happening and I'm cannot understand why.  Attached is a video that demonstrates my point:  [https://abms.net.au/public/physics\_angular\_velocity\_oil\_slick\_then\_tar.mp4](https://abms.net.au/public/physics_angular_velocity_oil_slick_then_tar.mp4)

The name of the video says it all.


The code for the physics plugin is at: [https://abms.net.au/public/worldPhysicsC.c.zip](https://abms.net.au/public/worldPhysicsC.c.zip)


This behaviour doesn't seem to make sense to me.


Can someone please explain the 4x3 matrix returned from a call to `dBodyGetRotation`?  I know that elements 3, 7, and 11 are to be ignored.  My understanding is that the diagonal of the matrix (0, 5,10) represent the rotation about the X, Y, Z axis respectively.  What I don't understand is the purpose/meaning of the other matrix elements; 1,2,4,6,8,9.  My understanding is that those elements represent coupling between axis, but a body rotation should not have these.  Unless the matrix includes information about inertial, or the body is being distorted around axis?

##### Simon Steinmann [Moderator] 04/19/2020 14:24:27
`@nap` give this a read: [https://www.tapatalk.com/groups/ultimate3d\_community/understanding-transformation-matrices-t5483.html](https://www.tapatalk.com/groups/ultimate3d_community/understanding-transformation-matrices-t5483.html)

##### nap 04/19/2020 14:50:45
`@Simon Steinmann` :  Thanks.  I will read it.  Does the tutorial use the same conventions as Webots?


(and ODE?)

##### Simon Steinmann [Moderator] 04/19/2020 14:53:01
it is linear Algebra. The math is the same, no matter what software you use


it is not 100% necessary to understand it, but it certainly helps. There is conversion libraries, to convert things like rotations from one form into another. The 3 most commonly used rotation notations are Quaternion (x,y,z, w). Euler Angles and 3x3 Rotation matrix. They all have andvantages and disadvantages


An incredible link to understand Quaternion is this: [https://eater.net/quaternions/](https://eater.net/quaternions/)

##### nap 04/19/2020 14:59:43
I'm  not new to 3D transformations, it's just that I don't use them everyday, and there are things happening in Webots which don't seem to make sense.  Like, when my epuck is facing up the screen (-Z), I can make it yaw by using  `dRFromAxisAndAngle(R,0.0,1.0,0.0, dBodyRobotRot[2] - angleDeltaBase);` followed by `dBodySetRotation(gLeftWheelBodyID,R);`

However, when I have the epuck facing Left on the screen (-X), I cannot use the same formula.  It doesn't make sense because I'm still performing a yaw.


(Thanks for your suggestions though.)

##### Simon Steinmann [Moderator] 04/19/2020 15:01:00
everything depends on your reference frame. Usually every joint and the world have their own coordinate systems, and it is not always clear, which way they 'point'

##### nap 04/19/2020 15:01:34
From the docs, dBodyGetRotation return world coords.


and can be used in dBodySetRotation


So, I get the orientation, add a small yaw and then set the new orientation.


At least that's what I want to do.

##### Simon Steinmann [Moderator] 04/19/2020 15:02:40
for rotating a bot, it usually makes sense to use its own frame

##### nap 04/19/2020 15:03:21
I get the bot's current orientation using  `dBodyRobotRot = (dReal *) dBodyGetRotation(gRobotBodyID);`


I suppose I should calculate the X-Z angle.

##### Simon Steinmann [Moderator] 04/19/2020 15:03:57
I'm working on robot arms, so I can't help you much here, srry :p

##### nap 04/19/2020 15:04:31
no problem, I will have a read of the links you posted.


thnx

##### David Mansolino [Cyberbotics] 04/20/2020 05:57:24
`@Morbius` welcome!

This robot is not available ot of the box in Webots, hoewver you can build you own model. I recommend to follow tutorial 1 to 6 to learn how to do this: [https://cyberbotics.com/doc/guide/tutorials](https://cyberbotics.com/doc/guide/tutorials)

##### Robin-Wagenaar 04/20/2020 13:44:04
Hello, I'm just starting with using Webots for a school project and I have a question with the first tutorial. I'm on a Mac and at tutorial 1 at hands on #9. I have to connect the controller to the E-puck but there is nog "Select" button. On Windows you are able to click a select button, but I can't find that button on MacOS. Can somebody help me connecting the controller to the E-puck? Thank you in advance.

##### David Mansolino [Cyberbotics] 04/20/2020 13:45:37
Hi `@Robin-Wagenaar` welcome. You have to select the 'controller' field before looking the 'Select' button.

##### Robin-Wagenaar 04/20/2020 13:51:08
I have this, where is the controller I have to select?
%figure
![Schermafbeelding_2020-04-20_om_15.50.25.png](https://cdn.discordapp.com/attachments/565154703139405824/701792071903608852/Schermafbeelding_2020-04-20_om_15.50.25.png)
%end


Thanks for your quick response!

##### David Mansolino [Cyberbotics] 04/20/2020 13:52:24
It seems you closed the node editor, their is an editor on the bottom of the scene-tree (you should be able to re-open it by draging it), it should looks like: [https://cyberbotics.com/doc/guide/the-scene-tree#field-editor](https://cyberbotics.com/doc/guide/the-scene-tree#field-editor)

##### Robin-Wagenaar 04/20/2020 13:53:04
Yes it worked! Thanks so much!

##### David Mansolino [Cyberbotics] 04/20/2020 13:53:26
You're welcome!

##### Simon Steinmann [Moderator] 04/20/2020 16:16:17
Hi, is there a simple way to publish the odometry into a ros topic from within webots? The only way I can think of right now is to use supervisor with getPosition() and geOrientation(), to then convert the orientation matrix to Quaternion and to manually construct a Pose message and publish it. Is there a simpler way?

##### Darko Lukić [Cyberbotics] 04/20/2020 16:20:17
`@Simon Steinmann`  If you use ROS2 than you can use `WebotsDifferentialDriveNode` in your ROS2 driver. You can check a good example of `WebotsDifferentialDriveNode` usage here:

[https://github.com/cyberbotics/webots\_ros2/blob/471430ae85beb4524f9db83b971b132fb5aa7a04/webots\_ros2\_tiago/webots\_ros2\_tiago/tiago\_controller.py#L25](https://github.com/cyberbotics/webots_ros2/blob/471430ae85beb4524f9db83b971b132fb5aa7a04/webots_ros2_tiago/webots_ros2_tiago/tiago_controller.py#L25)

##### Simon Steinmann [Moderator] 04/20/2020 16:20:42
using ROS1 sadly


and I'm using a robot arm, I basically want the position and orientation of the endeffektor relativ to the robot itself


with the orientation being in quaternion


How can i get the position and orientation relative to a different frame? I dont want it relative to the world. In the GUI I can select it, but I want to set it by code.


basically I want to set this, but from within my controller. And I want to get the Rotation in Quaternion as shown in the pic.
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/701830894499135588/unknown.png)
%end

##### Darko Lukić [Cyberbotics] 04/20/2020 18:57:05
`@Simon Steinmann` Oh, odometry is usually used in the context of mobile robots. I didn't know you use industrial robots. `tf` is a package that you want to check out. `tf` allows you to get transformation (translation and rotation) between any two links in a transform tree. 



To see all available published transformations, you can use:

```
rostopic echo /tf
```

This is one of many ways, you can use e.g. RViz or check the following page for more examples:

[http://wiki.ros.org/tf](http://wiki.ros.org/tf)



As mentioned, `tf` can calculate any transformation in the given transform tree, so you can use:

```
rosrun tf tf_echo [link_1] [link_2]
```

so, e.g. you can can obtain transformation between `upper_arm_link` and `wrist_1_link` as:

```
$ rosrun tf tf_echo /upper_arm_link /wrist_1_link
At time 152.976
- Translation: [0.000, -0.137, 1.184]
- Rotation: in Quaternion [0.000, 0.707, 0.000, 0.707]
            in RPY (radian) [3.142, 1.571, 3.142]
            in RPY (degree) [180.000, 89.998, 180.000]
At time 152.976
```



How to code it? With an understanding of everything above it is relatively easy to code. Please check an example here:

[http://wiki.ros.org/tf2/Tutorials/Writing%20a%20tf2%20listener%20%28C%2B%2B%29](http://wiki.ros.org/tf2/Tutorials/Writing%20a%20tf2%20listener%20%28C%2B%2B%29)



Hope this helps.

##### dmknuth 04/20/2020 20:50:50
Hello, the 3D View keeps disappearing on me.  I have tried Tools->Restore Layout and that worked one time, but has not since.  Is there something else I can do?

##### Jie 04/21/2020 04:19:42
Hello,what meaning “arm\_set\_height(ARM\_FRONT\_CARDBOARD\_BOX);” in ‘youbot’ controller?

##### David Mansolino [Cyberbotics] 04/21/2020 05:00:49
> Hello,what meaning “arm\_set\_height(ARM\_FRONT\_CARDBOARD\_BOX);” in ‘youbot’ controller?

`@Jie` you will find the header of these functions here: [https://github.com/cyberbotics/webots/blob/master/projects/robots/kuka/youbot/libraries/youbot\_control/include/arm.h](https://github.com/cyberbotics/webots/blob/master/projects/robots/kuka/youbot/libraries/youbot_control/include/arm.h)

And the implementation here: [https://github.com/cyberbotics/webots/blob/master/projects/robots/kuka/youbot/libraries/youbot\_control/src/arm.c](https://github.com/cyberbotics/webots/blob/master/projects/robots/kuka/youbot/libraries/youbot_control/src/arm.c)

##### Jie 04/21/2020 05:10:11
okok，thanks

##### David Mansolino [Cyberbotics] 04/21/2020 05:12:39
You're welcome


> Hello, the 3D View keeps disappearing on me.  I have tried Tools->Restore Layout and that worked one time, but has not since.  Is there something else I can do?

`@dmknuth` can you send us a screenshot of the current layout you have?

##### Olivier Michel [Cyberbotics] 04/21/2020 05:44:58
`@dmknuth`: in the `Tools` menu, please enable the `3D View`  and disable all other items: `Scene Tree`, `Text Editor`, `Console` and `Documentation`. Let me know if that helps.

##### kf1375 04/21/2020 08:20:38
Hello, I'm just starting with using Webots for a school project and I have a problem with writing a simple python controller for my quadrotor. I'm on a windows laptop and my controller is uploaded in the attachment. when it gets to <<while self.step(int(self.timeStep)) is not -1:>> at line 49, The simulation freezes. I'm wondering why this is happening and if there is a way to overcome this? Thank you in advance.
> **Attachment**: [pycontroller.py](https://cdn.discordapp.com/attachments/565154703139405824/702071286452453416/pycontroller.py)


>
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/702072924051341372/unknown.png)
%end

##### David Mansolino [Cyberbotics] 04/21/2020 08:55:42
`@kf1375` this error message gives you the answers:

```
[my_controller] my_controller.py:49: SyntaxWarning: "is not" with a literal. Did you mean "!="?
```

You should replace the `while (wb_robot_step(timestep) is not -1) {` condition by `while (wb_robot_step(timestep) != -1) {`.

##### kf1375 04/21/2020 09:02:13
> `@kf1375` this error message gives you the answers:

> 
```
> [my_controller] my_controller.py:49: SyntaxWarning: "is not" with a literal. Did you mean "!="?
> 
```

> You should replace the `while (wb_robot_step(timestep) is not -1) {` condition by `while (wb_robot_step(timestep) != -1) {`.

`@David Mansolino` I changed it but still, it doesn't work.
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/702081751723540551/unknown.png)
%end


> 

> `@kf1375` this error message gives you the answers:

> 
```
> [my_controller] my_controller.py:49: SyntaxWarning: "is not" with a literal. Did you mean "!="?
> 
```

> You should replace the `while (wb_robot_step(timestep) is not -1) {` condition by `while (wb_robot_step(timestep) != -1) {`.

> `@David Mansolino` There are no errors or warnings in the console.

##### David Mansolino [Cyberbotics] 04/21/2020 09:04:57
If the simulation is not running anymore it means that Webots is waiting for the controller, which means that your controller is not calling the robot.step function anymore.


> If the simulation is not running anymore it means that Webots is waiting for the controller, which means that your controller is not calling the robot.step function anymore.

##### kf1375 04/21/2020 09:26:17
> If the simulation is not running anymore it means that Webots is waiting for the controller, which means that your controller is not calling the robot.step function anymore.

`@David Mansolino` Thank you , The problem was solved. The keyboard reading part had a problem. I changed <<while self.key:>> with <<if self.key is not -1:>>

##### Hue 04/21/2020 09:41:51
> `@David Mansolino` Thank you , The problem was solved. The keyboard reading part had a problem. I changed <<while self.key:>> with <<if self.key is not -1:>>

`@kf1375` Why are you using `is not -1:` ?

##### kf1375 04/21/2020 09:53:19
> `@kf1375` Why are you using `is not -1:` ?

`@Hue` [https://www.google.com/amp/s/www.geeksforgeeks.org/python-membership-identity-operators-not-not/amp/](https://www.google.com/amp/s/www.geeksforgeeks.org/python-membership-identity-operators-not-not/amp/)

##### Dorteel 04/21/2020 09:56:03
Hi! Is there a way to create dialogue boxes in WeBots? I can´t seem to find a solution to it
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/702095299698622494/unknown.png)
%end

##### Olivier Michel [Cyberbotics] 04/21/2020 09:57:49
Hi, yes you can it from a robot window.


[https://cyberbotics.com/doc/guide/controller-plugin#robot-window](https://cyberbotics.com/doc/guide/controller-plugin#robot-window)


Basically your robot window is a web page which may include some JavaScript code and open a dialog box.


Another option is to add a Display ([https://www.cyberbotics.com/doc/reference/display](https://www.cyberbotics.com/doc/reference/display)) device to your robot and display there whatever you want.

##### Hue 04/21/2020 10:00:59
> `@Hue` [https://www.google.com/amp/s/www.geeksforgeeks.org/python-membership-identity-operators-not-not/amp/](https://www.google.com/amp/s/www.geeksforgeeks.org/python-membership-identity-operators-not-not/amp/)

`@kf1375` Yes except here you want to compare the value I guess not the identity, and `getKey()` will always return an integer

##### kf1375 04/21/2020 10:10:24
> `@kf1375` Yes except here you want to compare the value I guess not the identity, and `getKey()` will always return an integer

`@Hue` Yes, It's correct. 👍

##### Dorteel 04/21/2020 10:12:25
Thank you very much `@Olivier Michel` !

##### Simon Steinmann [Moderator] 04/21/2020 12:05:22
Is the simulation reset bug fixed by now?

##### David Mansolino [Cyberbotics] 04/21/2020 12:21:58
> Is the simulation reset bug fixed by now?

`@Simon Steinmann` Please watch this thread to get updates about this bug: [https://github.com/cyberbotics/webots/issues/1432](https://github.com/cyberbotics/webots/issues/1432)

##### Psyka 04/21/2020 13:01:22
Hello everyone,



I've got an issue when I try to launch any simulation with a windows cmd I've got a message telling : "File not found: 'C://resources/qt\_warning\_filters.conf'."

and most of my textures doesn't show up, I've been searching for help everywhere, I know that the path given is wrong it should be : "C://Program Files/Webots/resources/qt\_warning\_filters.conf" but I Don't know where I could make this change. If someone can help me it would be cool.

##### Olivier Michel [Cyberbotics] 04/21/2020 13:06:11
Did you try to define the `WEBOTS_HOME` environment variable and make it point to `C:\Program Files\Webots`?

##### Psyka 04/21/2020 13:06:53
not at all


I'll try

##### Olivier Michel [Cyberbotics] 04/21/2020 13:07:18
Let me know if that resolves the issue.

##### Psyka 04/21/2020 13:09:18
same

##### Olivier Michel [Cyberbotics] 04/21/2020 13:10:18
Did you try to launch `webots.bat` instead of `webots.exe`?

##### Psyka 04/21/2020 13:11:03
Not working eather

##### Olivier Michel [Cyberbotics] 04/21/2020 13:11:34
The nightly build version of Webots R2020a revision 2 may fix the problem as we introduced a new launcher. You can download it from here: [https://github.com/cyberbotics/webots/releases/tag/nightly\_20\_4\_2020](https://github.com/cyberbotics/webots/releases/tag/nightly_20_4_2020)

##### Psyka 04/21/2020 13:11:44
still have the message "file not found C://resources/qt\_warning\_filters.conf"


I must have an older version since I didn't found any Webotsw.exe to launch it in silence mode


should I uninstall the old one befor installing the new ?

##### Olivier Michel [Cyberbotics] 04/21/2020 13:14:14
Yes.

##### Psyka 04/21/2020 13:14:29
ok thank's


I will keep you udpated of the issue thank's for now I'll be back once installed

##### Olivier Michel [Cyberbotics] 04/21/2020 13:15:42
Wait, I may have an idea...

##### Psyka 04/21/2020 13:16:03
I already uninstall it


but give it anyway I will try ^^

##### Olivier Michel [Cyberbotics] 04/21/2020 13:17:32
Oops... Can you try to set the following environment variable: `QT_QPA_PLATFORM_PLUGIN_PATH` to point to `C:\Program Files\Webots\msys64\mingw64\share\qt5\plugins`?


Anyhow, the new revision 2 you are downloading may work without this.

##### Psyka 04/21/2020 13:18:21
ok i'll try without


Ok thank's it's working !


just after installing the new version


without the environment variable


thank's very much

##### Olivier Michel [Cyberbotics] 04/21/2020 13:46:22
Great! Thank you for the feedback.

##### dmknuth 04/21/2020 19:24:54
`@David Mansolino` here is a screen shot
%figure
![webots.png](https://cdn.discordapp.com/attachments/565154703139405824/702238453059944566/webots.png)
%end


`@Olivier Michel` I tried your suggestions, but they did not work.  When I launched Webots this morning, it was behaving correctly, but when I launched it this afternoon, the 3D View was blank again.  I did nothing in between launches.

##### Olivier Michel [Cyberbotics] 04/22/2020 05:20:37
Can you try to download the latest version of Webots R2020a revision 2 which was uploaded last night at [https://github.com/cyberbotics/webots/releases/tag/nightly\_21\_4\_2020](https://github.com/cyberbotics/webots/releases/tag/nightly_21_4_2020) and let me know if that resolves the problem? This version contains a patch that should fix it.

##### Jeremy Jiang 04/22/2020 08:34:46
Hello, I wonder is there any api to apply the external force to the robot in Webots?

##### David Mansolino [Cyberbotics] 04/22/2020 08:36:16
Hi `@Jeremy Jiang`, yes we recently introduced such functions: [https://cyberbotics.com/doc/reference/supervisor#wb\_supervisor\_node\_add\_force](https://cyberbotics.com/doc/reference/supervisor#wb_supervisor_node_add_force)

##### Jeremy Jiang 04/22/2020 09:09:59
Thank you for the feedback.

##### David Mansolino [Cyberbotics] 04/22/2020 09:10:29
You're welcome

##### Greenhigh 04/22/2020 12:02:53
I have a question. Is there any way to set intrincs calibration for a camera? Like focal length and scew. It seems like if i add a focus node to the camera its possible to set a focal length but it seems to change noting.


I am trying to estimate a 3d point in the world from a pixel and depth mesurement. But i need the intrincs calibration inorder to do that 😄

##### David Mansolino [Cyberbotics] 04/22/2020 12:12:28
Hi `@Greenhigh`  To calibrate the camera, you can add a Lens node to the camera to calibrate the distortion ([https://cyberbotics.com/doc/reference/lens](https://cyberbotics.com/doc/reference/lens)) and a Focus node ([https://cyberbotics.com/doc/reference/focus](https://cyberbotics.com/doc/reference/focus)) to define the focal length (here is a demo with auto-focus: [https://www.youtube.com/watch?v=ZHUt6ifcHfU](https://www.youtube.com/watch?v=ZHUt6ifcHfU))

##### Greenhigh 04/22/2020 13:08:01
I dont know if im doing it wrong but I tried to add the focal node and set a focal length. So now i can select a focal distance and focal length. but whenever i choose some values it changes focus as exspeted. but shouldnt the FOV change aswell?

##### David Mansolino [Cyberbotics] 04/22/2020 13:10:17
In Webots, the focal length and the FOV are not coupled you can change the FOV using the `fieldOfView` field of the camera.

##### Greenhigh 04/22/2020 13:21:51
So that is the diffrence between focal distance and focal length?


Shouldnt it just be one varible?


Focal length should that be kinda of a zoom. Like to detimine how much of the image will be captured in the field of view?

##### David Mansolino [Cyberbotics] 04/22/2020 13:27:07
The focal distance is the distance to the focusing plane.

And the focal length is the distance from the optical centre of the lens to the sensor. Bigger this value is, larger the sharp area is.

##### Psyka 04/22/2020 14:48:09
Hello there,



I have an issue for you guys, I've installed the last vesion of REV-2 and i'll try to launch some simulation by the console, with the option --log-performance=logfile but no logfile to be found after the end of the simulation. a friend of mine has a file in "C:\Program Files\Webots\" but I don't

##### David Mansolino [Cyberbotics] 04/22/2020 14:48:57
Let me try


For me it is working fine with revision 2. Try setting an absolute path so that you are sure you know where to look for the file.

##### Psyka 04/22/2020 14:53:58
hum I guess I have it wrong since I can't put an absolute path


it tell me: "webots: too many arguments" "try webots --help ..." and "could not open file: 'C:/Users/Name/Files/Webots/logfile'."


my cmd is :


webots --log-performance="C:\Program Files\Webots\logfile" project.wbt

##### David Mansolino [Cyberbotics] 04/22/2020 15:00:38
I am sorry, I don't have Windows yet to test, but on macOS and Linux it works fine even with absolute path for me, can you please open an issue here so that we can test on Windows: [https://github.com/cyberbotics/webots/issues/new?template=bug\_report.md](https://github.com/cyberbotics/webots/issues/new?template=bug_report.md)

Thank you

##### Olivier Michel [Cyberbotics] 04/22/2020 15:01:01
I am investigating the issue on Windows right now.

##### David Mansolino [Cyberbotics] 04/22/2020 15:01:44
Perfect, thank you.

##### Olivier Michel [Cyberbotics] 04/22/2020 15:20:41
`@Psyka`: can you try to type `webots-bin.exe` instead of `webots.exe`?

##### Psyka 04/22/2020 15:21:28
I think I make it work with an absolute path


after reinstalling


It working only when I put the logfile into an other hard drive like E: not on C: maybe a permission issue


It will be fine enough for what I need to do thank's very much


I have an other question around the log


Is it possible to set specified log from a simulation ?

##### Olivier Michel [Cyberbotics] 04/22/2020 15:35:19
What do you mean exactly?

##### Psyka 04/22/2020 15:39:41
this log file is about performance


but can we get some with the position of elements at instant T and everything happening inside the simulation ?


I didn't find any ^^

##### yxc1280 04/22/2020 15:45:29
Hello, can you show me how to use sleep or delay function in Webots? Thank you!

##### dmknuth 04/22/2020 20:11:21
`@Olivier Michel`  the problem has not recurred with the new build (2020a-revision2)  Though I am hesitant to say this is resolved because I have seen it come back a day later before.  However, thank you for the new build.  If you don't hear from me again, then all is well!

##### Olivier Michel [Cyberbotics] 04/23/2020 05:20:07
`@Psyka`: you should use supervisor to track down the positions of objects and store them in your own custom log file.


`@yxc1280`: a controller program should usually not `sleep()` as this will block the simulation process id the controller is synchronous. Instead you probably want to use the `wb_robot_step()` function and specify the duration as an argument (expressed in milliseconds). During this amount of time, the simulation will progress but your controller will do nothing.

##### Huey 04/23/2020 07:32:28
Morning everyone.. I was looking for epuck groundsensor documentation in python from the cyberbotics website


however, I cant seem to find it, would you guys mind giving me a pointer where this might be? Thankyou

##### Psyka 04/23/2020 07:36:34
`@Olivier Michel`  ok thank's I will check that

##### David Mansolino [Cyberbotics] 04/23/2020 07:41:14
`@Huey`, their name are indeed not documented ([https://cyberbotics.com/doc/guide/epuck#e-puck-characteristics](https://cyberbotics.com/doc/guide/epuck#e-puck-characteristics)), but the names are `gs0`, `gs1` and `gs2`, and they work the exact same way than the other distance sensors.


Actually the names are documented just a bit after: [https://cyberbotics.com/doc/guide/epuck#devices-names](https://cyberbotics.com/doc/guide/epuck#devices-names)

##### Huey 04/23/2020 07:48:29
Thanks `@David Mansolino` ! I would like add a new ground sensor function as epuck line follower behaviour using Python..


However, I  wonder if there is a documentation where i could refer in python, for example the library to include for ground sensors ,etc

##### David Mansolino [Cyberbotics] 04/23/2020 07:51:34
There is no notion of language, you have to add the sensor in the Webots scene-tree, then to use them you should do like with any other distance sensors, here is an example in Python: [https://cyberbotics.com/doc/guide/tutorial-6-4-wheels-robot?tab-language=python#the-controller-code](https://cyberbotics.com/doc/guide/tutorial-6-4-wheels-robot?tab-language=python#the-controller-code)

##### Huey 04/23/2020 07:55:23
Cool.. Thanks `@David Mansolino`!

##### Simon Steinmann [Moderator] 04/23/2020 14:38:05
`@David Mansolino` Quick question, how does a worldfile know, which .proto to load? I had to make a change to the ur10e.proto, and it made me save it in my project location instead of altering the original (totally fine). However, the .wbt file does not change. Where is the link to that file stored? I'm asking, because I'm working on a group project, and our git does not include the webots install

##### David Mansolino [Cyberbotics] 04/23/2020 14:42:37
Webots will load in priority the PROTO from the ``protos`` folder of your project and then (if it didn't find them) in the Webots installation directory.


To test this you can try to add the ur10e proto to your world using the add node dialog, you will see that the one in your project is available but the one in the Webots installation directory is grey and not addable.

##### Simon Steinmann [Moderator] 04/23/2020 14:43:50
So as long as Include the protos in the protos folder here and the world file is in the world folder, it works?
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/702892496832692244/unknown.png)
%end

##### David Mansolino [Cyberbotics] 04/23/2020 14:44:17
yes exactly

##### Simon Steinmann [Moderator] 04/23/2020 14:44:23
perfect, thank you 🙂

##### David Mansolino [Cyberbotics] 04/23/2020 14:44:29
You're welcome

##### JoanGerard 04/23/2020 16:08:44
Hello, I've been working with Webots for almost a year now and I feel very happy with the software and the community support. You guys rock!

As part of my Master Thesis at ULB I am working on the subject: "Machine Learning for Probabilistic Robotics with Webots" and I developed a Particle's Filter algorithm together with a visualisation plugin that I would like to share with you. A very small demo can be found on Youtube: [https://www.youtube.com/watch?v=fISDutZca5g](https://www.youtube.com/watch?v=fISDutZca5g) and the code is here: [https://github.com/joangerard/webots-thesis](https://github.com/joangerard/webots-thesis) 

I am still working on the documentation part. Hopefully I will finish it by the end of next month. 

Is there anyone working on a similar subject?

##### kwy 04/24/2020 01:15:44
hello, can I create a simulation environment from a black/white map on webots ?  Black represents obstacles

##### Troy 04/24/2020 01:27:23
Hi! I used the dBodyAddForce  in my physics plugin, but my simulation will crash. When I delete this line, and everything go back to normal. But I do need to add a force on my robot, what can I do? Help!


It‘s driving me crazy

##### David Mansolino [Cyberbotics] 04/24/2020 04:49:19
> hello, can I create a simulation environment from a black/white map on webots ?  Black represents obstacles

`@kwy` not automatically, but you can use it as texture for the ground and place object manually on it, or write a script to do this, or use ground sensors to detect these black area from your robot controller


`@JoanGerard` very nice demo!!! Your robot-window looks very handy and your repository is very well organized (well documented and clean code), this is clearly a good reference for people wanting to use particle filter algorithm in Webots!


> Hi! I used the dBodyAddForce  in my physics plugin, but my simulation will crash. When I delete this line, and everything go back to normal. But I do need to add a force on my robot, what can I do? Help!

`@Troy` you might use a Supervisor to add for instead of a physics plugin: [https://cyberbotics.com/doc/reference/supervisor#wb\_supervisor\_node\_add\_force](https://cyberbotics.com/doc/reference/supervisor#wb_supervisor_node_add_force)

##### kwy 04/24/2020 07:51:09
`@David Mansolino`  thanks. How to generate such a simulation environment or place object on map by a script? I have read this map as an array. Using this array to place object on map?



And this map is like this



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/703151117504348190/unknown.png)
%end


I have tried to place some path point (those red spots)on this map by supervisor.

##### David Mansolino [Cyberbotics] 04/24/2020 07:57:05
You're supervisor should probably read the map image and compute the location of the obstacle.

##### kwy 04/24/2020 08:00:06
The shape of these obstacles is strange, supervisor can also change the shape?


maybe this is a possible method for my small environment ...it seems for really huge environment 😂 [https://cyberbotics.com/doc/automobile/openstreetmap-importer#map-edition-and-creation](https://cyberbotics.com/doc/automobile/openstreetmap-importer#map-edition-and-creation)

##### David Mansolino [Cyberbotics] 04/24/2020 08:34:01
> The shape of these obstacles is strange, supervisor can also change the shape?

`@kwy` yes of course.


> maybe this is a possible method for my small environment ...it seems for really huge environment 😂 [https://cyberbotics.com/doc/automobile/openstreetmap-importer#map-edition-and-creation](https://cyberbotics.com/doc/automobile/openstreetmap-importer#map-edition-and-creation)

`@kwy`it is indeed a possibility but you have to create the OSM map.

##### kwy 04/24/2020 08:53:52
`@David Mansolino`  thanks!

##### XZbot 04/24/2020 09:54:38
Hi `@David Mansolino` , I have two questions regarding the Webots environment. (1) I put an e-puck inside a triple T-maze constructed by walls. When it passes some T-intersection, I would like to temporarily block its way back so that it has to explore the unvisited area. I am not sure if a one-way door can be applied in this case, which means the e-puck can push the door from one direction but not the other, so that it won't go back after passing the door. Or can I make a door/wall suddenly appear at the intersection after the e-puck passes it during simulation? Or do you have some better suggestion?  (2) Can I run multiple simulation trials parallelly (at the same time) in the fast mode and how?  Thanks a lot!

##### David Mansolino [Cyberbotics] 04/24/2020 10:22:37
Hi `@XZbot`, yes you can make a wall appears using the Supervisor API (the simplest solution is to have the wall already present in the simulation and simply move it with the supervisor): [https://cyberbotics.com/doc/reference/supervisor](https://cyberbotics.com/doc/reference/supervisor)

About multiple run, please find some explanation about numerical optimisation with Webots here: [https://cyberbotics.com/doc/reference/supervisor](https://cyberbotics.com/doc/reference/supervisor)

##### XZbot 04/24/2020 10:30:43
`@David Mansolino` thanks! I will take a look at these links.

##### Troy 04/24/2020 14:42:54
`@David Mansolino` Thank you, I'll try the supervisor today

##### David Mansolino [Cyberbotics] 04/24/2020 14:46:56
You're welcome

##### SR-CNA 04/24/2020 14:48:34
I wonder if it is possible to let a plane to have a random color. For example, every time I start the simulation, I hope the color of the plane can be either red or blue. Is is possible?

##### David Mansolino [Cyberbotics] 04/24/2020 14:52:47
`@SR-CNA` yes, this is possible, for this you will have to create a PROTO of the plane and use procedural PROTO to define randomly the color.

I strongly advice to follow our tutorial about PROTO (and the previous one) if not already done: [https://www.cyberbotics.com/doc/guide/tutorial-7-your-first-proto](https://www.cyberbotics.com/doc/guide/tutorial-7-your-first-proto)

This is for creating a simple non-procedural PROTO, then you should read the documentation about procedural PROTO: [https://www.cyberbotics.com/doc/guide/tutorial-7-your-first-proto](https://www.cyberbotics.com/doc/guide/tutorial-7-your-first-proto)

And finally, you can find here an example of procedural PROTO: [https://github.com/cyberbotics/webots/blob/ad933d92210f17f784807cb33741ab4dc41d684f/projects/objects/factory/pallet/protos/WoodenPalletStack.proto#L22](https://github.com/cyberbotics/webots/blob/ad933d92210f17f784807cb33741ab4dc41d684f/projects/objects/factory/pallet/protos/WoodenPalletStack.proto#L22)

##### SR-CNA 04/24/2020 14:56:25
`@David Mansolino` Thank you, I will go through the example you provided.

##### David Mansolino [Cyberbotics] 04/24/2020 15:05:42
You're welcome

##### Troy 04/24/2020 15:19:52
`@David Mansolino` Hi David, one more question, when I use the wb\_supervisor\_node\_add\_force function, it says " warning: implicit declaration of function 'wb\_supervisor\_node\_add\_force' [-Wimplicit-function-declaration]" but I do set the supervisor field to TRUE

##### David Mansolino [Cyberbotics] 04/24/2020 15:25:08
`@Troy` did you include the 'supervisor' include?

##### Mathie20 04/24/2020 15:25:32
is it possible to put lines on the rectanglearena. i.e. factory yellow stripe/lines...

##### David Mansolino [Cyberbotics] 04/24/2020 15:27:12
Yes, you simply have to change the floor texture, I strongly recommend to follow this tutorial if not already done: [https://www.cyberbotics.com/doc/guide/tutorial-3-appearance](https://www.cyberbotics.com/doc/guide/tutorial-3-appearance)

##### Troy 04/24/2020 15:31:20
I add the webots/supervisor.h, but then there are more problems. Is there an example using the supervospr add force?

##### nap 04/25/2020 02:25:56
Is there an upper limit on the number of robots that can be included in the simulation? (I currently have 96 robots plus one supervisor that generates a TRAIL Shape for one of the robots that shows the path the robot has traversed.)

I am getting the following error (47 times):

`[void] socket connect() failed for /private/var/folders/tg/vymk3ysd1n14cpx7r7\_q5pgw0000gn/T/webots\_75232\_1507880620, errno=61

[void] Cannot connect to Webots on pipe: /private/var/folders/tg/vymk3ysd1n14cpx7r7\_q5pgw0000gn/T/webots\_75232\_1507880620

WARNING: 'void' controller exited with status: 1.

`

This may actually be due to an OS limit (MacOS) to the number of pipes, but the number seems small compared to what would normally be the limit.

(I am going to start reducing the number of robots until the error goes away.)

##### Professor Felix 04/25/2020 02:29:59
If not I’m going to create a mass army of 2000+ drones and send them on a virtual attacking spree

##### nap 04/25/2020 03:15:52
I suspect the limit it 50.  (49 robots + 1 supervisor)


`@Professor Felix` looks like your army may be smaller that you originally planned, but you may be able to concentrate the weapons more?

##### machinekoder 04/25/2020 10:05:19
Does anyone know why this happens when moving the object along with a connector?
> **Attachment**: [webots\_robot\_connector\_weirdness.mp4](https://cdn.discordapp.com/attachments/565154703139405824/703547180677595137/webots_robot_connector_weirdness.mp4)


Note: The adapter has no physics node, the gripper has physics enabled. When I enable physics on the adapter, the gripper falls right off. Maybe that's related to the problem. 🤔
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/703571562598629396/unknown.png)
%end


gripper is gray, the adapter black

##### nikzzzlegrande 04/26/2020 11:25:48
I am using gyro to turn my robot at certain degree but the problem is when I want it to stop at the particular amount of degree my robot won't stop


This is code
%figure
![JPEG_20200426_165600.jpg](https://cdn.discordapp.com/attachments/565154703139405824/703930000847667221/JPEG_20200426_165600.jpg)
%end


Can anyone say why because I am sure it's going inside if condition but the motor isn't stopping but controller is exiting

##### machinekoder 04/26/2020 16:49:00
`@nikzzzlegrande` 1. set the velocity before the while loop

2. remove the set\_position call inside the if condition

##### Rahul0496 04/26/2020 21:41:29
hi, i am working with ur3e arm using ros controller and when i give it a set of positions to go to. the arm doesnt give a feedback message saying it has reached its goal and hence it doesnt go to the next position and is stuck


am i the only one facing this issue?

##### David Mansolino [Cyberbotics] 04/27/2020 05:06:21
> I add the webots/supervisor.h, but then there are more problems. Is there an example using the supervospr add force?

`@Troy` not forces, but you will find some supervisor example in this simulation:

[https://www.cyberbotics.com/doc/guide/samples-devices#supervisor-wbt](https://www.cyberbotics.com/doc/guide/samples-devices#supervisor-wbt)

and this one:

[https://www.cyberbotics.com/doc/guide/samples-howto#supervisor\_draw\_trail-wbt](https://www.cyberbotics.com/doc/guide/samples-howto#supervisor_draw_trail-wbt)

##### mearvind 04/27/2020 05:06:57
We can see translation and rotational values on left side of the screen under a robots name. Can we get those values  in the code? and can we set those values from the code?

##### David Mansolino [Cyberbotics] 04/27/2020 05:11:31
> Is there an upper limit on the number of robots that can be included in the simulation? (I currently have 96 robots plus one supervisor that generates a TRAIL Shape for one of the robots that shows the path the robot has traversed.)

> I am getting the following error (47 times):

> `[void] socket connect() failed for /private/var/folders/tg/vymk3ysd1n14cpx7r7\_q5pgw0000gn/T/webots\_75232\_1507880620, errno=61

> [void] Cannot connect to Webots on pipe: /private/var/folders/tg/vymk3ysd1n14cpx7r7\_q5pgw0000gn/T/webots\_75232\_1507880620

> WARNING: 'void' controller exited with status: 1.

> `

> This may actually be due to an OS limit (MacOS) to the number of pipes, but the number seems small compared to what would normally be the limit.

> (I am going to start reducing the number of robots until the error goes away.)

`@nap` there is no limitation on the Webots side, but as you said, on the OS side there is a limitation about the number of pipe, but this configurable in your OS.


> We can see translation and rotational values on left side of the screen under a robots name. Can we get those values  in the code? and can we set those values from the code?

`@mearvind` to get them you can use a GPS device ([https://cyberbotics.com/doc/reference/gps9](https://cyberbotics.com/doc/reference/gps9)).

To get AND change them you will need to use the Supervisor API: [https://cyberbotics.com/doc/reference/supervisor](https://cyberbotics.com/doc/reference/supervisor)


> Does anyone know why this happens when moving the object along with a connector?

`@machinekoder` very nice demo!

Are you speaking of the warning you get in the console about the physics step?


> I am using gyro to turn my robot at certain degree but the problem is when I want it to stop at the particular amount of degree my robot won't stop

`@nikzzzlegrande` you set the position of the right motor to 0. But are you sure your motor is currently at position 0? And in any case as you exit right after sending the command without performing any robot step, the command is actually never sent to Webots.

P.S: next time use  screen shot instead of camera.


> hi, i am working with ur3e arm using ros controller and when i give it a set of positions to go to. the arm doesnt give a feedback message saying it has reached its goal and hence it doesnt go to the next position and is stuck

`@Rahul0496` your issue may be related [https://github.com/cyberbotics/webots/issues/1362](https://github.com/cyberbotics/webots/issues/1362).

##### pro2017001 04/27/2020 07:15:00
Hello there


I am using a Webot simulator to run the hoap2 robot using an inbuilt controller written in C programming language. I am getting an error

WARNING: hoap2: The process crashed sometime after starting successfully.

WARNING: 'hoap2' controller crashed.

And hoap2 is not working in the simulated environment.

Please guide me how can I use hoap2 robot for walking simulation.

##### Rahul0496 04/27/2020 07:54:08
> `@Rahul0496` your issue may be related [https://github.com/cyberbotics/webots/issues/1362](https://github.com/cyberbotics/webots/issues/1362).

`@David Mansolino` Hi i tried this but i had no luck. It doesnt output any feedback and ur is stuck

##### Stefania Pedrazzi [Cyberbotics] 04/27/2020 08:20:05
`@pro2017001` from the log it seems that your controller program crashed. You should debug it to find where is the bug that makes it crashing.

##### nap 04/27/2020 08:44:52
Is there a way to clear the console from code?  `printf("\f\n");` used to do that, but doesn't seem to do so anymore?

##### Olivier Michel [Cyberbotics] 04/27/2020 08:46:02
On the nightly builds, you can use the ANSI control code to clear the console.

##### nap 04/27/2020 08:46:48
ok, thanks `@Olivier Michel` , how about 2020 rev 1a?

##### Olivier Michel [Cyberbotics] 04/27/2020 08:48:16
In that version `printf("\f");` should work, isn't it?

##### nap 04/27/2020 08:49:27
I'm doing it from the physics plugin, where normally I've been using `dWebotsConsolePrintf`.  I can put it in my controller and see.

##### Olivier Michel [Cyberbotics] 04/27/2020 08:52:37
I checked and it works for example in `projects/samples/devices/worlds/battery.wbt`

##### nap 04/27/2020 08:53:28
`@Olivier Michel` : yes, from my controller it works fine.  Not sure why it didn't work from the physics plugin, but I'm not going to worry about that for now.

##### David Mansolino [Cyberbotics] 04/27/2020 09:00:38
> `@David Mansolino` Hi i tried this but i had no luck. It doesnt output any feedback and ur is stuck

`@Rahul0496` on that case can you please add a comment and explain your issue in [https://github.com/cyberbotics/webots/issues/1362](https://github.com/cyberbotics/webots/issues/1362)

So that we can investigate and fix the issue. Thank you

##### pro2017001 04/27/2020 09:31:49
`@Stefania Pedrazzi` Ok, I will check.

##### nap 04/27/2020 09:38:35
`@David Mansolino` :  You won't believe it, but I'm still stuffing around with the motor/wheel noise.  I'm using `dRFromAxisAndAngle` to rotate a small amount left/right and then `dBodySetRotation` .  However, it looks to me that on each step, my previous rotation is 'undone' and the `dBodyGetRotation` is back to its original course.

I tried using Force and Torque (as well as Rel) as you originally suggested, but I have to apply such high values to overcome the coulombFriction that when the epuck finally alters it course, it flies away wildly.

Should I use Kinematics mode?  Any other suggestions?

##### David Mansolino [Cyberbotics] 04/27/2020 10:43:47
`@nap` why not simply changing the robot rotation using the Supervisor API instead of doing it from a physics plugin?

##### nap 04/27/2020 11:28:39
`@David Mansolino` : I could, but I figured using a physics plugin was the more natural way of doing it.  And to be honest, now that I've invested the time, I would like to work out why I'm having these problem.  Otherwise, I'll need to go through the learning curve again next time I attempt a physics plugin.

##### David Mansolino [Cyberbotics] 04/27/2020 11:45:01
Actually physics plugin are more and more outdated, the Supervisor API is getting so powerfull that it offers almost all the features fo the physics plugin (and is much more simple/stable).

##### Psyka 04/27/2020 11:59:22
Hello everyone :)

I've seen that there are some launching "mode" like "run" "pause" "fastrun" or "realtime", I've tried them but is there a silent mode where webot doesn't launch any visual just working like a hidden process


?


on windows I mean

##### Olivier Michel [Cyberbotics] 04/27/2020 12:00:39
There is `--minimize` mode, that will open a iconified window.


Actually, your should probably combine `--minimize`, `--batch` and `--mode=fast`.

##### Psyka 04/27/2020 12:03:16
that's the more silent webots can do ?

##### Olivier Michel [Cyberbotics] 04/27/2020 12:03:48
Yep.

##### Psyka 04/27/2020 12:04:30
I'm trying to do an anylizer of simulation and I will run like 20k short simulation, I would like not to see any of them


ok thank's ^^


I've got an other question for you ^^


Is there a way to get the simulation name from a controller ?


didn't find one from the supervisor

##### Olivier Michel [Cyberbotics] 04/27/2020 12:06:38
Do you mean the world filename?

##### Psyka 04/27/2020 12:07:22
the "Title" from worldinfo


of the simulation

##### Olivier Michel [Cyberbotics] 04/27/2020 12:07:43
You can get it from a supervisor controller.

##### Psyka 04/27/2020 12:07:57
haha


i'm stupid right ?


xD

##### Olivier Michel [Cyberbotics] 04/27/2020 12:08:02
As you would get any other field of any node.

##### Psyka 04/27/2020 12:08:08
it's like a position

##### Olivier Michel [Cyberbotics] 04/27/2020 12:08:12
Yes.

##### Psyka 04/27/2020 12:08:38
but I say "WorldInfo" and "title" for field ?

##### Olivier Michel [Cyberbotics] 04/27/2020 12:08:49
Yes.

##### Psyka 04/27/2020 12:09:02
haha nice cool thx


have a nice day I think it's all for me today 🙂


ho I've got a last question:


is it possible to creat in webot an invisible robot or object with a controller that can log everything ?

##### Olivier Michel [Cyberbotics] 04/27/2020 12:23:28
Yes.

##### Psyka 04/27/2020 12:23:43
is it not better to do that then doing a log in every robot ?

##### Olivier Michel [Cyberbotics] 04/27/2020 12:24:09
It depends on your need.

##### Psyka 04/27/2020 12:24:24
I've got a lot of robots to log


position


and one or two with a lot more parameter then position

##### Olivier Michel [Cyberbotics] 04/27/2020 12:24:54
So, it's probably better in your case to have an invisible supervisor process logging everything.

##### Psyka 04/27/2020 12:25:14
ok thank's how can I do that the more efficient possible ?


having an invisible supervisor process do I have to creat it into the world file .wbt ?

##### Olivier Michel [Cyberbotics] 04/27/2020 12:26:21
Yes.

##### Psyka 04/27/2020 12:33:31
is there a tuto or any doc who is showing an efficient way of creating an invisible supervisor process ?

##### Olivier Michel [Cyberbotics] 04/27/2020 12:34:16
No. But it's very simple. Just create a Supervisor and if it has no children (default), then it is invisible.

##### Psyka 04/27/2020 12:35:51
something like :

Supervisor {

controller "my\_supervisor"

}


?

##### Olivier Michel [Cyberbotics] 04/27/2020 12:36:04
Exactly.

##### Psyka 04/27/2020 12:36:12
ok thank's very much 😉


Me again with an other question:

Is there a way to know when 2 robots touch each other ? or only by notifying the position of each and see when they are near each other ?


like a colision signal

##### Olivier Michel [Cyberbotics] 04/27/2020 13:11:10
You may use a touch sensor on the robots.

##### Psyka 04/27/2020 13:12:32
ok thank's

##### Simon Steinmann [Moderator] 04/27/2020 13:30:15
How can I tell webots to use the ros libraries installed on the system?


it gives me this:


ImportError: No module named tf

##### David Mansolino [Cyberbotics] 04/27/2020 13:38:10
Are you're ros library in the PYTHONPATH environment variable?

##### Simon Steinmann [Moderator] 04/27/2020 13:39:22
yes


it only exists in python2 though


are you using a python3 compiled ros?


this would indicate python2
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/704326383056453642/unknown.png)
%end


bit more readable
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/704326522281918535/unknown.png)
%end

##### David Mansolino [Cyberbotics] 04/27/2020 13:42:10
No we are using python2 for ROS controllers

##### Simon Steinmann [Moderator] 04/27/2020 13:42:51
In my .bashrc I have to include the source commands to add the paths


do I have to do that for webots too?


and if so, where?

##### David Mansolino [Cyberbotics] 04/27/2020 13:43:28
The ROS controller of the UR robots is using the version of the python ROS libraries distributed in Webots (which doesn't include TF), this is defined (and can be changed) here: [https://github.com/cyberbotics/webots/blob/master/projects/robots/universal\_robots/controllers/universal\_robots\_ros/runtime.ini](https://github.com/cyberbotics/webots/blob/master/projects/robots/universal_robots/controllers/universal_robots_ros/runtime.ini)

##### Simon Steinmann [Moderator] 04/27/2020 13:44:56
can I edit this on a per project basis, or do I have to alter the install?


I am using a edited version of the universal\_robot\_ros controler, which is in its own git repository, not in the webots install

##### David Mansolino [Cyberbotics] 04/27/2020 13:48:27
Yes you can edit it per project, you just have to edit the runtime.ini file associated with your controller.

##### Simon Steinmann [Moderator] 04/27/2020 13:49:23
shouldn't this line in the runtime.ini

PYTHONPATH=$(WEBOTS\_HOME)/projects/lang....

be this:

PYTHONPATH=$(PYTHONPATH):$(WEBOTS\_HOME)/projects/lang....


this would automatically add the stuff installed on the system


good news, altering the runtime.ini works, bad news, tons of other errors. will investigate and post results

##### David Mansolino [Cyberbotics] 04/27/2020 14:04:15
> shouldn't this line in the runtime.ini

> PYTHONPATH=$(WEBOTS\_HOME)/projects/lang....

> be this:

> PYTHONPATH=$(PYTHONPATH):$(WEBOTS\_HOME)/projects/lang....

`@Simon Steinmann` yes if you want to preserve the ``PYTHONPATH`` (in our case as we don't want that a possible ROS installation on the computer cause conflicts we don't want to preserve it).

##### Simon Steinmann [Moderator] 04/27/2020 14:05:12
the ROS\_PACKAGE\_PATH= also has to be appended, for it to work


now the controller is crashing... hmm perhaps I should do extra ros stuff outside of webots.... On a different note, is it possible to get positions (using supervisor) relative to a specific frame? I want to get the gripper position relative to the robot base, not the world


right now my approach is to us the tf library to use kinematics tree transformation to calculate the toolslot position using the published tf topic. seems like uneccesary extra work. Is it possible to get that data directly?

##### David Mansolino [Cyberbotics] 04/27/2020 14:16:49
> now the controller is crashing... hmm perhaps I should do extra ros stuff outside of webots.... On a different note, is it possible to get positions (using supervisor) relative to a specific frame? I want to get the gripper position relative to the robot base, not the world

`@Simon Steinmann` looks like a good approach. For the supervisor, you can get the absolute position of both nodes and the compute te difference

##### Simon Steinmann [Moderator] 04/27/2020 14:17:41
that's true. any library you'd recommend? eigen?

##### David Mansolino [Cyberbotics] 04/27/2020 14:18:34
No, I am sorry I don't know, but for sure you will find some suggestions on Google ;-)

##### Simon Steinmann [Moderator] 04/27/2020 14:18:45
okay, thx 🙂

##### David Mansolino [Cyberbotics] 04/27/2020 14:18:55
You're welcome

##### adaptive 04/27/2020 19:07:38
is there an Webots IRC-channel too?

##### David Mansolino [Cyberbotics] 04/28/2020 05:24:28
> is there an Webots IRC-channel too?

`@adaptive` not as I know, at least officially only Discord is available.

##### Dorteel 04/28/2020 06:29:38
Hi, can you help me with recording a movie with the Supervisor? I have multiple problems, my idea was to see if the motion is over and stop the video recording. However the Motion.isOver returned true in the middle of the motion. I tried to comment out the video creating lines but I keep getting the error that the "Nothing was recorded because the simulation didn´t run" even though there is no line to make a recording. I get the warning at every timestep.



EDIT: I tried restarting WeBots, but now it just starts up and crashes instantly without a warning.
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/704580064972636280/unknown.png)
%end

##### Olivier Michel [Cyberbotics] 04/28/2020 06:32:53
If you don't create the movie, but issue a print statement when the motion is over, does it work as expected?

##### Dorteel 04/28/2020 06:34:00
No, it just prints the line a couple timesteps in the motion.


Is there a way to start up WeBots without autostarting the simulation? That seems to be why it´s crashing

##### Olivier Michel [Cyberbotics] 04/28/2020 06:35:38
Yes, you can select the startup mode from the Webots Preferences (pause mode).


Or use the `--mode=pause` command line argument.

##### Dorteel 04/28/2020 06:37:03
Ah, I opened another world and now I have it running. I'll set the preferences, thank you

##### Olivier Michel [Cyberbotics] 04/28/2020 06:37:49
It could be that one of your other controllers is crashing or hanging...

##### Dorteel 04/28/2020 06:38:14
I only have one controller as far as I know

##### Olivier Michel [Cyberbotics] 04/28/2020 06:38:19
OK...

##### Dorteel 04/28/2020 06:45:43
I switched the controller to another one and back and now it works, but the motion.isOver still doesn´t seem to work
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/704584116300939264/unknown.png)
%end


not just with my custom motion, same issue when I try it with the built-in motion files

##### Olivier Michel [Cyberbotics] 04/28/2020 06:52:09
`isOver` is a method, did you try to add parenthesis?, i.e., `self.testingMotion.isOver()`?


I know, it's not very pythonic... 😒

##### Dorteel 04/28/2020 06:53:37
ahh, no, that was the problem! thank you! 😅

##### adaptive 04/28/2020 08:12:15
Hello, i have a problem getting webots running python. I have installed python 3.8 (anaconda) and started webots "Python 3.7 not found" -> installed Python 3.7 -> "No module named 'numpy'" ..

##### David Mansolino [Cyberbotics] 04/28/2020 08:13:01
Is the 'numpy' module installed?

``python3.7 pip-m install numpy``

##### adaptive 04/28/2020 08:14:00
Numpy and any other lib is installed for 3.8

##### David Mansolino [Cyberbotics] 04/28/2020 08:15:22
But since you installed python 3.7 it seems it is using python 3.7 and therefore numpy is not installed for 3.7.

About python 3.8, which version of Webots are you using and on which OS ?

##### adaptive 04/28/2020 08:15:43
im using R2020a on Win10


rev1

##### David Mansolino [Cyberbotics] 04/28/2020 08:17:18
Ok that explains the problem, the support of Python 3.8 in Webots on Windows is not supported in R2020a-rev1, it will be in the next version of Webots. You can get a beta of the next version (R2020a-rev2) including Python 3.8 support on Windows by downloading a nightly build here: [https://github.com/cyberbotics/webots/releases](https://github.com/cyberbotics/webots/releases)

##### adaptive 04/28/2020 08:18:12
ok, i will install the nightly build instead of installing two python distributions parallel, that seems smarter. Thanks

##### David Mansolino [Cyberbotics] 04/28/2020 08:18:21
You're welcome

##### adaptive 04/28/2020 08:42:43
`@David Mansolino` hm.. i installed Rev2 but the error still appears.. running python in cmd shows 3.8.2 running. [https://bpaste.net/YWLA](https://bpaste.net/YWLA) this is the output of webots running an example world

##### Olivier Michel [Cyberbotics] 04/28/2020 08:45:01
Can you print the Python version from your controller program to check it is the same?

```
import sys
print("Python version")
print (sys.version)
```

##### adaptive 04/28/2020 08:48:06
I created a new project and inserted the code into an new controller, but how do I execute it?

##### Olivier Michel [Cyberbotics] 04/28/2020 08:48:26
Simply create a robot that uses this controller.


It may be simpler to start from the `WEBOTS_HOME/projects/languages/python/worlds/example.wbt` sample world and edit the `slave.py` controller for example.


Also check that the Python command is set to "python" in the Webots preferences.
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/704615829291139112/unknown.png)
%end

##### adaptive 04/28/2020 08:52:07
I have inserted the code befode defining the class Enumerate, saved it and pressed the "run" button, but in the console there is no output


Yes, the command is defined

##### Olivier Michel [Cyberbotics] 04/28/2020 08:54:04
Put it at the end of the `__init__` method. Before that the interface with Webots is not initialized and print commands don't land in the Webots console.

##### adaptive 04/28/2020 08:56:00
[https://bpaste.net/GQAQ](https://bpaste.net/GQAQ) but pressing the Run button dont output the version, only this [https://bpaste.net/WVXA](https://bpaste.net/WVXA)


But i cant Build the Project with F7


Its gray

##### Olivier Michel [Cyberbotics] 04/28/2020 08:59:45
Doing the same, I am getting this:

```
INFO: slave: Starting controller: python.exe -u "slave.py" 
INFO: slave: Starting controller: python.exe -u "slave.py" 
INFO: slave: Starting controller: python.exe -u "slave.py" 
INFO: driver: Starting controller: python.exe -u "driver.py" 
[slave] Python version
[slave] 3.8.2 (tags/v3.8.2:7b3ab59, Feb 25 2020, 23:03:10) [MSC v.1916 64 bit (AMD64)]
[slave] Python version
[slave] 3.8.2 (tags/v3.8.2:7b3ab59, Feb 25 2020, 23:03:10) [MSC v.1916 64 bit (AMD64)]
[slave] Python version
[slave] 3.8.2 (tags/v3.8.2:7b3ab59, Feb 25 2020, 23:03:10) [MSC v.1916 64 bit (AMD64)]
[driver] Commands:
[driver]  I for displaying the commands
[driver]  A for avoid obstacles
[driver]  F for move forward
[driver]  S for stop
[driver]  T for turn
[driver]  R for positioning ROBOT1 at (0.1,0.3)
[driver]  G for knowing the (x,z) position of ROBOT1
```


Did you save and revert the world file?

##### adaptive 04/28/2020 09:01:48
revert?

##### Olivier Michel [Cyberbotics] 04/28/2020 09:01:54
Yes.


Reload.

##### adaptive 04/28/2020 09:02:12
I think the problem is that I cant build the project, so that the new lines are ignored

##### Olivier Michel [Cyberbotics] 04/28/2020 09:02:13
Python doesn't need to build as it's not a compiled language like C or C++.

##### adaptive 04/28/2020 09:04:34

%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/704619057546002463/unknown.png)
%end

##### Olivier Michel [Cyberbotics] 04/28/2020 09:06:49
Yes, you should click OK and go ahead with that.

##### adaptive 04/28/2020 09:07:43
[https://bpaste.net/3BRQ](https://bpaste.net/3BRQ)


I copied the project into my private directory and it seems to work now.. thanks for your patience^^


but the problem is still there, if i include numpy in slave.py, it is not found

##### Olivier Michel [Cyberbotics] 04/28/2020 09:12:29
Which version of Python is displayed by your controller?

##### adaptive 04/28/2020 09:12:33
using numpy in vscode is no problem, so the package is definitely installed


the same as yours, [slave] 3.8.2 (tags/v3.8.2:7b3ab59, Feb 25 2020, 23:03:10) [MSC v.1916 64 bit (AMD64)]

##### Olivier Michel [Cyberbotics] 04/28/2020 09:13:47
And are you sure numpy was installed for this version?


Can you also print the Python version in your working vscode example using numpy?

##### adaptive 04/28/2020 09:21:52
oh man, what a mess, Vscode uses 3.7.6 (installed with conda), in my PATH i declared the path to python in conda dir which is the 3.7.6


"Warning:

This Python interpreter is in a conda environment, but the environment has

not been activated.  Libraries may fail to load.  To activate this environment

please see [https://conda.io/activation](https://conda.io/activation)"


this is what I get if I run python out of the dir


But if I open an CMD, and type "python" -> Microsoft Store opens and want me to install py 3.8^^


Ok, i changed the alias to "py" and now occurs this message [https://bpaste.net/CVLQ](https://bpaste.net/CVLQ) .. If Im running py in an cmd i get that the base isnt activated (i have activated it)


I have mkl-service installed, but nothing changes

##### Tahir [Moderator] 04/28/2020 09:52:43
I have a robot model(Clearpath Robotics Warthog) and three Universal Robot Arms(2 UR3 and 1 UR5) all at front. each UR3 weighs 11.2 kg and UR5 20.6 kg. UR3's are on the side and UR5 is in the the middle of both UR3's. The robot can travel at a speed of 18 km\hr. 



I want to check the stability of the platform at lower as well as higher speeds in two configurations. One as shown in the figure(UR 5 a little behind 2 UR3's) and another one when the all are inline at the front.



The desired one is the second configuration where all arms are at the front and inline to give maximum area for manipulation.

##### Olivier Michel [Cyberbotics] 04/28/2020 09:54:03
`@adaptive`: I would recommend you get rid of anaconda version and try to install Python 3.8 cleanly.

##### Tahir [Moderator] 04/28/2020 09:54:35
So can anyone guide how can I do that in webots


I mean what can be the procedure

##### PymZoR [Premier Service] 04/28/2020 09:55:24
I'm currently dealing with python versions issues as well `@adaptive` . What i'm trying to do right now il to install a virtualenv using a Pipfile (for dealing both with dependencies and python version at the same time, see [https://realpython.com/pipenv-guide/](https://realpython.com/pipenv-guide/))


Then in webots preferences, I set Python command to the output of `echo $(pipenv --venv)/bin/python`


Hope this helps

##### nikzzzlegrande 04/28/2020 09:57:07
Can anyone help me with finding the total distance travelled by the epuck in webota

##### Olivier Michel [Cyberbotics] 04/28/2020 09:59:07
`@Tahir`: did you already imported / created the model in Webots?

##### adaptive 04/28/2020 09:59:15
`@Olivier Michel` so deinstalling anaconda and all packages and installing python 3.8 clean or 3.7?

##### Olivier Michel [Cyberbotics] 04/28/2020 09:59:22
Yes.

##### adaptive 04/28/2020 09:59:42
ok, hopefully this helps

##### Tahir [Moderator] 04/28/2020 10:07:31
`@Olivier Michel` The model is in Blender I am just setting up Webots blender importer and than I will have that in Webots

##### Olivier Michel [Cyberbotics] 04/28/2020 10:08:31
I would recommend you to export only the Warthog model and re-use the existing UR arms from Webots.

##### adaptive 04/28/2020 10:08:37
`@Olivier Michel` shall i install 3.7 or 3.8.2?

##### Olivier Michel [Cyberbotics] 04/28/2020 10:09:09
3.8.2 seems better if you have Webots R2020a revision 2, but 3.7 should work also.

##### Tahir [Moderator] 04/28/2020 10:09:26
OK I will do that


do you have any leads for the solution to this problem

##### Olivier Michel [Cyberbotics] 04/28/2020 10:11:09
Not really. You should create an accurate model of the robot in Webots and running on various terrains.

##### Tahir [Moderator] 04/28/2020 10:11:41
Also is Blender 2.79b is the minimum or exact requirement for Webots importer to work


?

##### Olivier Michel [Cyberbotics] 04/28/2020 10:12:10
Exact. 2.80 doesn't work.

##### Tahir [Moderator] 04/28/2020 10:12:31
I have blender-2.82a


is this fine

##### Olivier Michel [Cyberbotics] 04/28/2020 10:15:17
No, you really need 2.79b.

##### Tahir [Moderator] 04/28/2020 10:16:29
OK Thank you I will download that

##### adaptive 04/28/2020 10:31:16
`@David Mansolino` , `@Olivier Michel` thanks! it works

##### David Mansolino [Cyberbotics] 04/28/2020 10:31:33
> Can anyone help me with finding the total distance travelled by the epuck in webota

`@nikzzzlegrande` you simply need to add a supervisor and track the position at each step, from these positions you can compute the distance traveled at each step (and sum it to get the total distance).

##### adaptive 04/28/2020 10:34:32
My GPU is very low budget (Intel HD520), I already have edited my preferences for OpenGL to fasten the Software like this:
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/704641696755089478/unknown.png)
%end


is there any other thing I can edit to increase the behaviour?

##### David Mansolino [Cyberbotics] 04/28/2020 10:38:42
You can find some clues about improving performance here: [https://cyberbotics.com/doc/guide/speed-performance](https://cyberbotics.com/doc/guide/speed-performance)

But I am afraid that what you did is already the best you can do to use the GPU as less as possible.

##### adaptive 04/28/2020 10:39:38
Ok, thanks

##### David Mansolino [Cyberbotics] 04/28/2020 10:39:44
You're welcome

##### lshil 04/28/2020 12:08:52
Does anybody know whether the position sensor in webots has positive or negative?

##### David Mansolino [Cyberbotics] 04/28/2020 12:24:29
The position sensors returns the current position of the joint, so it can be negative or positive depending on which direction goes the joint

##### lshil 04/28/2020 12:38:15
OK，thanks！Another question：how does the motor`s positive direction define🙃

##### David Mansolino [Cyberbotics] 04/28/2020 12:47:19
It is defined by the joint axis direction.

##### Tahir [Moderator] 04/28/2020 12:48:53
I have comverted a robot from blender t9 Webots. Using the blender to webots tool. The robot in the output world is inly a transform


Is there any way to get everything out in form of nodes


I converted stl to blend and than to webots

##### David Mansolino [Cyberbotics] 04/28/2020 12:50:48
Does your blender model have a hierarchy or are all the meshes at the root level?

##### Tahir [Moderator] 04/28/2020 12:54:34
It is one single object

##### David Mansolino [Cyberbotics] 04/28/2020 12:56:07
Then if it is one single object, it will be exported as a single object and not as an articulated robot, it needs to be cut in various different parts in Blender to have something with a hierarchy of nodes in Webots.

##### Tahir [Moderator] 04/28/2020 12:56:30
OK I got your point


Let me check something

##### lshil 04/28/2020 12:58:49
Is the angle of the position sensor defined as the angle between current position and initial position?


why does the angle at the initial time return 34.37😥

##### David Mansolino [Cyberbotics] 04/28/2020 13:12:10
> Is the angle of the position sensor defined as the angle between current position and initial position?

`@lshil` it is not exactly the initial position, because some joint may start from a non zero initial position, but it is defined as the angle between current position and zero angle.

##### lshil 04/28/2020 13:14:02
I get it,thanks!

##### David Mansolino [Cyberbotics] 04/28/2020 13:14:12
You're welcome.

##### Psyka 04/28/2020 13:14:16
Hello,

I've got an issue with the controller that I'am using, first it was working well when I had only one then I created an other one for a different caind of robots and now the first one doesn't compile anymore it says :  undefined reference to `wbu\_driver\_set\_cruising\_speed'


but I have #include <webots/vehicle/driver.h>


I'm on windows

##### David Mansolino [Cyberbotics] 04/28/2020 13:15:18
``wbu\_driver\_set\_cruising\_speed``  is working only for node based on the ``Car`` PROTO, with which robots are you using it?

##### Psyka 04/28/2020 13:15:26
a car


it was working well

##### David Mansolino [Cyberbotics] 04/28/2020 13:16:16
Does your makefile have the following libraries links:

```
LIBRARIES = -ldriver -lcar
```

?

##### Psyka 04/28/2020 13:16:25
yes


or not


not anymore


it diseaper

##### David Mansolino [Cyberbotics] 04/28/2020 13:17:16
That may explain the issue then.

##### Psyka 04/28/2020 13:17:23
when I deleted the makefile


it recreated one

##### David Mansolino [Cyberbotics] 04/28/2020 13:17:47
It makes sense, the default generated makefile does not include this line.

##### Psyka 04/28/2020 13:18:12
very nice


thank's

##### David Mansolino [Cyberbotics] 04/28/2020 13:18:19
You're welcome.

##### PymZoR [Premier Service] 04/28/2020 13:53:30
Is there a way to dynamically set the "python command" in the preferences ? (using a cli argument for instance)


My use case is : I have a python virtualenv for webots' controllers, this venv path is going to be different on each developper machine


I would like to avoid the process of setting it manually

##### David Mansolino [Cyberbotics] 04/28/2020 13:55:23
You may change the Webots preference file before starting Webots using a script.

Or you might define it in a runtime.ini file next to the controller (which can be written dynamically): [https://cyberbotics.com/doc/guide/controller-programming#languages-settings](https://cyberbotics.com/doc/guide/controller-programming#languages-settings)


Would this suit your needs?

##### PymZoR [Premier Service] 04/28/2020 13:57:12
I guess the second option would be the best to plug into a CMake workflow, executing the command to get the venv path (like `pipenv --venv`), and piping the output in a runtime.ini


Gonna give it a try. Thanks !

##### David Mansolino [Cyberbotics] 04/28/2020 13:57:53
> I guess the second option would be the best to plug into a CMake workflow, executing the command to get the venv path (like `pipenv --venv`), and piping the output in a runtime.ini

`@PymZoR` that sounds good indeed!


You're welcome.

##### machinekoder 04/28/2020 15:37:42
`@David Mansolino` No, the gripper looses it's position in relation to the flange.


The warnings aren't bothering me.

##### David Mansolino [Cyberbotics] 04/28/2020 15:42:54
About the warnings, we are currently improving the Webots console to be able to filter out some logs (such as ODE warnings), this might help you getting ride  of the warning, this is currently in development here (you can follow this PR to get news about it): [https://github.com/cyberbotics/webots/pull/1595](https://github.com/cyberbotics/webots/pull/1595)

If you want you can also open an issue here including your world file (or a simplified version reproducing the issue) so that we can have a look and try to understand what is not working as expected: [https://github.com/cyberbotics/webots/issues/new?template=bug\_report.md](https://github.com/cyberbotics/webots/issues/new?template=bug_report.md)

##### Lars 04/29/2020 07:58:26
I'm observing some strange behavior of my fruits in WeBots. Physics and BO is defined for all of them, but some move right through the surface they are put on as shown in the video. I've tried different physics settings such as removing mass and changing it for density, added intertia matrix, dampening, etc.

Does it all come down to the bounding object and being too complex? Especially the grapes is a bad one I think.
> **Attachment**: [fruit\_test.mp4](https://cdn.discordapp.com/attachments/565154703139405824/704964802958721024/fruit_test.mp4)


For reference the left-most banana, green apple and orange are standard fruits from WeBots itself and they work just fine like some of the other fruits I implemented.

##### Olivier Michel [Cyberbotics] 04/29/2020 08:48:30
Yes, I suspect that bounding object made up of small but complex meshes are responsible for such a behavior. I would recommend you to avoid IndexedFaceSet for the bounding objects and use instead a combination of simple primitives (such as spheres, capsules and boxes).

##### Alex123 04/29/2020 08:59:53
hello,I want to know that is there any ready sample for collecting data of sick's sensors in webots

##### David Mansolino [Cyberbotics] 04/29/2020 09:02:19
`@Alex123`, not as I know, but there are sample for getting the value from the sick sensors, then if you want to save them to a file you can simply do this as you would do in any regular program (Webots controllers are regular program).

##### Lars 04/29/2020 09:10:07
`@Olivier Michel` Thanks, that's what I was anticipating, but I was hoping it would be something different. The complexity was somewhat needed to emulate real world use case of grasping these types of fruits.

##### Olivier Michel [Cyberbotics] 04/29/2020 09:12:10
Yes, but with a complex combination of spheres of different sizes and capsules of different lengths and diameters, I am sure you can achieve a pretty precise bounding object for most fruits.

##### David Mansolino [Cyberbotics] 04/29/2020 09:14:25
`@Lars` have you tried drastically reducing the world time step?

##### Lars 04/29/2020 09:33:10
`@David Mansolino` With `basicTimeStep = 4` the test world runs at about half real-time speed and most of the fruits are doing alright aside from one of the lemons. Reducing the time step to 1 everything works fine, but it only runs at 1/10th of real time.

But in the world with the robot system I think this would be problematic as we have issues with ROS synchronization,  the clock resets all the time and giving us warnings (e.g. `Moved back in time (probably because ROS clock was reset)`)

##### David Mansolino [Cyberbotics] 04/29/2020 10:15:43
Did you set the use\_sim\_time parameter to true?

##### Tahir [Moderator] 04/29/2020 11:01:15
I have one robot base with a frame. I want to mount three UR arms on it. 

what is better hierarchy for Webots. All arm nodes inside the robot base node or 4 separate robot nodes (3 arms and 1 base) and than mounted on base

##### Lars 04/29/2020 11:17:51
> Did you set the use\_sim\_time parameter to true?

`@David Mansolino` Yeah it's set to true in the launch file

##### Alejandro Pescathore 04/29/2020 11:19:21
I am trying to build a tracked robot in Webots, but the robot cannot rotate, it just goes forward and backward. How can i solve this problem?

##### David Mansolino [Cyberbotics] 04/29/2020 11:21:49
It all depends on how you plan to control it.

If you want one central control then one single robot is better. But if you want to have one control algorithm for the base and one for each arm then it is better to have one Robot for the base and one sub-robot for each arm (this is my favourite solution, but again it all depends on what you want to do). Not also that if you use the ROS interface for example, one robot per arm is better.


> `@David Mansolino` Yeah it's set to true in the launch file

`@Lars` ok, then you probably have to go for simpler bounding object, because the ros interface doesn't like indeed when the simulation runs was slower than real time


> I am trying to build a tracked robot in Webots, but the robot cannot rotate, it just goes forward and backward. How can i solve this problem?

`@Alejandro Pescathore` I would recommend to have a look at this simple example that can indeed rotate: [https://cyberbotics.com/doc/guide/samples-devices#track-wbt](https://cyberbotics.com/doc/guide/samples-devices#track-wbt)

##### Alejandro Pescathore 04/29/2020 11:33:13
`@David Mansolino` Thanks!

##### David Mansolino [Cyberbotics] 04/29/2020 11:42:30
You're welcome!

##### Gautier 04/29/2020 14:03:11
Hey ! Might I ask a question ?

##### David Mansolino [Cyberbotics] 04/29/2020 14:03:25
Hi, yes of course.

##### Gautier 04/29/2020 14:03:35
Thank you !


So, I'm working on a scene with a proto inside a proto. I want to modify the value of a custom field (of type MF Bool)


I can retrieve the correct "pointer" on that field, but when I try to modify its values, it doesn't seems to work

##### David Mansolino [Cyberbotics] 04/29/2020 14:05:25
From the Supervisor you want to change this field, right?

##### Gautier 04/29/2020 14:06:02
Yes, from a supervisor

##### David Mansolino [Cyberbotics] 04/29/2020 14:06:22
When you said ''a proto inside a proto", is the children PROTO in a field of the parent PROTO or is it internal to the parent PROTO ?

##### Gautier 04/29/2020 14:07:09
Here is the supervisor: [https://pastebin.com/d60jTWYM](https://pastebin.com/d60jTWYM), and here is the output of the supervisor: [https://pastebin.com/phc3QfPs](https://pastebin.com/phc3QfPs)


The "interesting proto" is in a children node of another proto, it's not internal

##### David Mansolino [Cyberbotics] 04/29/2020 14:08:22
Are you using a beta of Webots R2020b ?

##### Gautier 04/29/2020 14:08:46
Here is the scene tree



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/705058003434602526/unknown.png)
%end


Yes, we're using a beta version of Webots R2020b. We compile it from source because we needed the function "getFromProtoDef"

##### David Mansolino [Cyberbotics] 04/29/2020 14:09:48
Ok, let me check your supervisor code and the outputs to try to understand the problem

##### Gautier 04/29/2020 14:11:06
ok, thank you !

##### David Mansolino [Cyberbotics] 04/29/2020 14:15:38
Have you tried replacing ``getFromProtoDef`` by ``getFromDef``? The field you are trying to get is indeed in a PROTO but it is visible in the scene-tree (and is therefore not internal).

##### Gautier 04/29/2020 14:17:42
Yes, I get the same exact result and same exact output


(I actually tried in first instance 'getFromDef' before 'getFromProtoDef' )

##### David Mansolino [Cyberbotics] 04/29/2020 14:20:48
OK, in that case that looks indeed like a bug. Can you check what you get if you try to get the value of this field from the supervisor (i.e. ``std::cout<<"Hello "<< isLockedTileContainer->getMFBool(i); <<", " << i <<std::endl;``) ?

##### Gautier 04/29/2020 14:23:51
I get that output: [https://pastebin.com/3uSUpzbE](https://pastebin.com/3uSUpzbE) ,


Corresponding c++ code :



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/705061857945321492/unknown.png)
%end

##### David Mansolino [Cyberbotics] 04/29/2020 14:26:19
Looks very strange, it seems you get always true whereas the fields are all set to false from the picture of the scene-tree you sent us.

##### Gautier 04/29/2020 14:26:59
We're using the version of webots from the commit " fe5893b968e160447a52cc4619ad68a8f41f8022 " , compiled from the git


> Looks very strange, it seems you get always true whereas the fields are all set to false from the picture of the scene-tree you sent us.

`@David Mansolino` 



Yes, I agree. By default, all the field of the proto are at "False"
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/705062822660276254/unknown.png)
%end

##### David Mansolino [Cyberbotics] 04/29/2020 14:30:16
It looks indeed like a bug, can you please try to simplify at maximum your PROTOs and world so that it still reproduce the issue and report the bug on our bug tracker: [https://github.com/cyberbotics/webots/issues/new?template=bug\_report.md](https://github.com/cyberbotics/webots/issues/new?template=bug_report.md)

Thank you

##### Gautier 04/29/2020 14:34:33
Sure thing ! Thank you for your time

##### David Mansolino [Cyberbotics] 04/29/2020 14:39:39
You're welcome, thank you for the bug report!

##### Gautier 04/29/2020 14:49:28
Excuse me, it's me again... I tried to reproduce the bug, and what you told me to do... And know, it's still "buggy", but I have a different output 😅


[https://pastebin.com/bCN2Q9n0](https://pastebin.com/bCN2Q9n0)


Now the "before" is indeed 0, and the after "1". Still, the files doesn't change$

##### David Mansolino [Cyberbotics] 04/29/2020 14:50:13
This seems to make more sense (still buggy but more coherent).

##### Simon Steinmann [Moderator] 04/29/2020 18:11:58
Hey, how do I change the coordinate system, so the world has z as vertical?

##### Tahir [Moderator] 04/29/2020 18:15:17
`@Simon Steinmann` on Stackoverflow there is a question about coordinate system conversion.  Which is answered in a very comprehensive manner discussing demerits as well.


[https://stackoverflow.com/questions/54557696/changing-global-coordinate-frame-in-webots](https://stackoverflow.com/questions/54557696/changing-global-coordinate-frame-in-webots)

##### Simon Steinmann [Moderator] 04/29/2020 18:16:12
coord sys conversion in general, or for changing the world frame?


oh, thx 🙂


hmm too bad the background textures dont work straight forward 😦


uff okay, so it doesnt work without major headache

##### Lussfer 04/29/2020 18:29:26
Is it possible to draw on roads and at specific WGS84 coordinate?

##### David Mansolino [Cyberbotics] 04/30/2020 05:08:28
`@Lussfer` if you have an OSM map of these road using WGS84, you can import it in Webots: [https://cyberbotics.com/doc/automobile/openstreetmap-importer](https://cyberbotics.com/doc/automobile/openstreetmap-importer)

##### Greenhigh 04/30/2020 09:32:40
Is it possible to have multiple Rectangle Areana's in the same world where only one of them defines the world height?

##### Olivier Michel [Cyberbotics] 04/30/2020 09:34:08
Yes. But what do mean by "world height"? Each rectangle arena will have it own height.

##### Greenhigh 04/30/2020 09:37:28
for example if you have two rectangle areana's at diffrent height. It seems like any object can not go below the top most areana. They just float in the air. Sort of difining the world hight since the objects cant go below the top areana?

##### Olivier Michel [Cyberbotics] 04/30/2020 09:39:20
I see, this is because of the plane primitive which is used as the bounding object of the floor proto. In that case, if you need different levels, you should probably create your own rectangle arena proto which uses a Box instead of the Plane for the floor.

##### Greenhigh 04/30/2020 09:40:09
`@Olivier Michel` Allright i try that 😄 Thanks


ill*


I have another question. Is it possible to change the starting position of the joints on the ur5e robot. It seems like it starts in joint possition 0 0 0 0 0 0? 

I looked into the proto and tried to set a position tag on the: 

HingeJoint {

        jointParameters HingeJointParameters{

             position 1.57



But this does nothing. help?

##### David Mansolino [Cyberbotics] 04/30/2020 11:49:42
> 

> I have another question. Is it possible to change the starting position of the joints on the ur5e robot. It seems like it starts in joint possition 0 0 0 0 0 0? 

> I looked into the proto and tried to set a position tag on the: 

> HingeJoint {

>         jointParameters HingeJointParameters{

>              position 1.57

> 

> But this does nothing. help?

Yes this is possible, it is not very easy, you have to change the default orientation of the Solid node in the `endPoint`  field of the joint.

##### haitao0617 04/30/2020 13:23:41
my\_controller1: Could not find the controller directory.

##### David Mansolino [Cyberbotics] 04/30/2020 13:25:05
Does your project respect the Webots project file hierarchy?

[https://cyberbotics.com/doc/guide/the-standard-file-hierarchy-of-a-project](https://cyberbotics.com/doc/guide/the-standard-file-hierarchy-of-a-project)

##### haitao0617 04/30/2020 13:29:39
I'm not sure, and to check it right now. Thank you~

##### Dorteel 04/30/2020 14:42:19
Hi, I'm trying to use the simulationReset() method of the Supervisor, but it makes the  my world go crazy.  I'm supposed to record a sequence of motions as videos, then resetting the simulation at the end of the motion, changing some variables (the colour of the robot), and then recording again, multiple times. When resetting, the variables do not reset, and the inner loops that change the variables go nuts and out of sequence, and the robot does not get reset to the right location either. Any suggestions?

##### David Mansolino [Cyberbotics] 04/30/2020 14:49:00
Have you tried with the ``worldReload`` function instead of the ``simulationReset``one ?

##### Dorteel 04/30/2020 14:50:34
I was thinking about it, but doesn´t it reset the controller?

##### David Mansolino [Cyberbotics] 04/30/2020 14:53:30
Yes it does, but just to check if it fixes the issue with your not resetting correctly

##### Dorteel 04/30/2020 14:54:30
Ah, alright, I'll try


Yes, the simulation resets correctly, although it resets twice for some reason

##### David Mansolino [Cyberbotics] 04/30/2020 15:04:33
Ok thanks for the confirmation.

And with ``simulationReset`` what is not rest correctly with your robot?

##### Dorteel 04/30/2020 15:07:08
the main issue was that the position of the robot did not reset, but stayed right where it was when the method was called, it was only the joint angles that reset.


The print functions didn´t work either, and the loop of the controller was messed up, it changed the colours, but did not record the videos. But that could be because the robot was embedded in the middle of a table


but the worldReload helps, I can create files that save the state of the loop and read them when the controller resets. So thanks for the help!

##### David Mansolino [Cyberbotics] 04/30/2020 15:11:38
> but the worldReload helps, I can create files that save the state of the loop and read them when the controller resets. So thanks for the help!

`@Dorteel` That is indeed the workaround while waiting for a fix for this issue.

About the original issue, may I ask you to open an issue reporting the problem (including a world and controller reproducing the problem) here: [https://github.com/cyberbotics/webots/issues/new?template=bug\_report.md](https://github.com/cyberbotics/webots/issues/new?template=bug_report.md) ?

This way we will be able to try reproducing the issue and fix it.

##### Dorteel 04/30/2020 15:13:54
I'll do that right now, thanks for the help!

##### David Mansolino [Cyberbotics] 04/30/2020 15:14:06
Perfect, thank you 🙂

##### Estelle 04/30/2020 15:25:28
I would like to ask that how could I change the field value directly in the controller?

##### David Mansolino [Cyberbotics] 04/30/2020 15:27:33
You can get the state of any field using the Supervisor API: [https://www.cyberbotics.com/doc/reference/supervisor](https://www.cyberbotics.com/doc/reference/supervisor)


Here is a simple example: [https://www.cyberbotics.com/doc/guide/samples-devices#supervisor-wbt](https://www.cyberbotics.com/doc/guide/samples-devices#supervisor-wbt)

##### Estelle 04/30/2020 15:28:46
OK,Thank you~~🥰

##### David Mansolino [Cyberbotics] 04/30/2020 15:29:18
You're welcome

##### iagsav 04/30/2020 21:55:57
Hello! the Opencv library has functions that allow you to perform camera calibration: [https://docs.opencv.org/2.4/modules/calib3d/doc/camera\_calibration\_and\_3d\_reconstruction.html](https://docs.opencv.org/2.4/modules/calib3d/doc/camera_calibration_and_3d_reconstruction.html). Please tell me, is it possible to do the same operation for a camera that is a sensor in Webots?

## May

##### nap 05/01/2020 00:26:43
In the `supervisor.h` API, there are a number of functions that include `sf` in their names; e.g. `wb_supervisor_field_get_sf_rotation` .  What is the meaning of `sf`?

##### Estelle 05/01/2020 00:27:23
it means single field

##### nap 05/01/2020 00:55:28
`@Estelle` :  Thanks.  Would you know where I can get a definition of `field`?  (Sorry, I wasn't asking you to write an essay about it.)

##### Estelle 05/01/2020 00:59:29
Sorry, I just don't quite understand what you mean. Do you mean the definition of field for specific nodes?

##### nap 05/01/2020 01:00:40
`@Estelle` :  I'm not familiar with the term `field` (as it is being used here), so I was asking for a reference which I can read.


`@Estelle` :  I found a reference to it in the Webots Glossary ([https://www.cyberbotics.com/doc/reference/glossary](https://www.cyberbotics.com/doc/reference/glossary)).  I'll look into the VRML97 specification.

##### Estelle 05/01/2020 01:06:04
OK~Because I am a beginner to use webots, so there are somethings I do not know very well. I'm happy that you find it~🙂

##### nap 05/01/2020 01:43:09
`@Estelle` : I found the following reference which looks useful.  This is the VRML tutorial:  [http://rvirtual.free.fr/programmation/VRML/tuto\_eng/](http://rvirtual.free.fr/programmation/VRML/tuto_eng/)   (Tutorial 6 covers `fields` and other things.)

##### Estelle 05/01/2020 02:07:45
`@nap` thanks for your share!👍

##### David Mansolino [Cyberbotics] 05/01/2020 05:24:22
> Hello! the Opencv library has functions that allow you to perform camera calibration: [https://docs.opencv.org/2.4/modules/calib3d/doc/camera\_calibration\_and\_3d\_reconstruction.html](https://docs.opencv.org/2.4/modules/calib3d/doc/camera_calibration_and_3d_reconstruction.html). Please tell me, is it possible to do the same operation for a camera that is a sensor in Webots?

`@iagsav` yes you can, however not that there are some differences between real and openGL camera ([https://www.scratchapixel.com/lessons/3d-basic-rendering/perspective-and-orthographic-projection-matrix/opengl-perspective-projection-matrix](https://www.scratchapixel.com/lessons/3d-basic-rendering/perspective-and-orthographic-projection-matrix/opengl-perspective-projection-matrix)),

##### Tahir [Moderator] 05/01/2020 13:30:51
I am having an issue when I run the simulation the floor starts to vibrate


the robot weighs around 400 kilos

##### David Mansolino [Cyberbotics] 05/01/2020 13:33:59
The floor is supposed to be a static object so it should never move. Since the robot is quite heavy, have you tried changing the contact properties ([https://www.cyberbotics.com/doc/reference/contactproperties](https://www.cyberbotics.com/doc/reference/contactproperties)) ?

Basically setting the `softCFM` to a lower value (e.g. 1e-05), the `coulombFriction` to a higher value (e.g. 5 to 10) and the WorldInfo.ERP to a higher value (e.g. 0.6).

Decreasing the time step may also help (e.g. to 10ms).

##### Tahir [Moderator] 05/01/2020 13:36:28
I already have set these values:



ERP=0.6

basicTimeStep=8

coulumbFriction=8

softCFM=1e-05

##### David Mansolino [Cyberbotics] 05/01/2020 13:37:03
Ok, these values looks good indeed.

##### Tahir [Moderator] 05/01/2020 13:37:31
also when I start moving the robot the UR3 arm joint breaks and look like this



%figure
![Screenshot_from_2020-05-01_15-33-49.png](https://cdn.discordapp.com/attachments/565154703139405824/705774949943476324/Screenshot_from_2020-05-01_15-33-49.png)
%end

##### David Mansolino [Cyberbotics] 05/01/2020 13:39:10
> also when I start moving the robot the UR3 arm joint breaks and look like this

`@Tahir` that's probably another issue. Did you set the `staticBase` field of the UR3 to False?


> I already have set these values:

> 

> ERP=0.6

> basicTimeStep=8

> coulumbFriction=8

> softCFM=1e-05

`@Tahir` about this, have you tried with the void controller, just to make sure if it is the robot model or the controller that makes it vibrating?

##### Tahir [Moderator] 05/01/2020 14:00:13
The floor vibration is  same with void as well

##### David Mansolino [Cyberbotics] 05/01/2020 14:01:08
Did you check the `staticbase` value?

##### Tahir [Moderator] 05/01/2020 14:02:13
Yes in robotic arms


but there is nothing in the base robot node

##### David Mansolino [Cyberbotics] 05/01/2020 14:03:11
In the `UR3` PROTO node, there is a `staticBase` which is TRUE by default, in you case you have to set it to FALSE ([https://cyberbotics.com/doc/guide/ure#field-summary](https://cyberbotics.com/doc/guide/ure#field-summary)).

##### Tahir [Moderator] 05/01/2020 14:03:26
Yes I did


and its still the same

##### David Mansolino [Cyberbotics] 05/01/2020 14:04:03
The arm joint still breaks ?

##### Tahir [Moderator] 05/01/2020 14:04:15
I have three UR arms and all of them are set to false


no arms does not break


sorry I am talking about floor vibration

##### David Mansolino [Cyberbotics] 05/01/2020 14:06:27
Ok, in that case I am sorry but I can't help you further without trying your simulation. B8ut if you want you can open an issue here including your simulation (or a simplified one reproducing the problem): [https://github.com/cyberbotics/webots/issues/new?template=bug\_report.md](https://github.com/cyberbotics/webots/issues/new?template=bug_report.md)

and we will have a look at it.

##### Tahir [Moderator] 05/01/2020 14:07:04
OK thank you I will look into it

##### David Mansolino [Cyberbotics] 05/01/2020 14:07:24
You're welcome

##### dralorg 05/01/2020 22:53:02
Hi, I'm trying to understand the PROTO files to be able to extract the distances between wheel centers of the Youbot, but I'm having a hard time. Could anyone point me where are those distances specified please?



I'm using tiles of length 0.1 m to have an approx. idea of the lengths of interest:
%figure
![size.png](https://cdn.discordapp.com/attachments/565154703139405824/705914711106912306/size.png)
%end

##### David Mansolino [Cyberbotics] 05/02/2020 05:28:40
Hi `@dralorg`, the simplest solution is to temporarily convert the Youbot node in Base nodes (you can do this by right-clicking on the Youbot node in the scene-tree), this way you will be able to select the wheels in the scene-tree and read their position in 'position' tab of the nod editor: [https://cyberbotics.com/doc/guide/the-scene-tree#field-editor](https://cyberbotics.com/doc/guide/the-scene-tree#field-editor)

##### dralorg 05/02/2020 05:46:18
Amazing, I got the values that I needed, thank you `@David Mansolino`!

##### David Mansolino [Cyberbotics] 05/02/2020 06:38:44
You're welcome 🙂

##### nap 05/02/2020 10:27:39
`@David Mansolino` : I've implemented a Supervisor that rotates the epuck every 10 time\_steps.  In the attached screenshot, I have the trail marked (using the the webots trail example supervisor but with more data points) and my 'noise' code (basically all of it is visible in the image).  The noise at the moment increments the CW rotation of the epuck on each step, while the epuck thinks it's going straight.  However, the result is confusing me.

1)  I had to apply rotation around the Y axis but using the Z axis orientation.  I would have thought I should be able to progressively change the Y rotation, but when I do that, there is no rotation.  Is there a  coordinate system swap going on somewhere?

2) Since I'm increasing the angle linearly, don't understand why the path is the way it is.  I would have expected to simply read the orientation and add a small amount of noise to it.  However, I need to multiply the noise by the number of iteration otherwise the epuck travels in a straight line after the initial deviation.

3) Is the rotation function using ARCTAN?  I don't think so, because the epuck does achieve more than 360 degrees of rotation.  However the path, in my mind should have been a circle rather than a weird spiral.
%figure
![epuck_path_anomoly.png](https://cdn.discordapp.com/attachments/565154703139405824/706089517857112064/epuck_path_anomoly.png)
%end


`@David Mansolino` : I tried using `wb_supervisor_node_add_torque(target_node, torqueValues, true);` and I'm getting better results, though the path looks more like a square with rounded arcs for each side.

##### phoenixash 05/03/2020 09:08:06
Hello everyone


I need some help making line following simulation


description : the area would be covered with zig zag line (motive covering whole area) what robot must do is follow this path avoiding obstacle


There is already a demo project on this but now when i trying to build from scratch i m not getting how to add ground sensor in the robot


If i have to use the existing project i m having problem changing the size of the epuck


And if i change the size of the rectangular area and floor tile the existing project seems to fail i don't know whats the issue


Can anyone help me with that

##### lshil 05/03/2020 11:09:54
when I use the wb\_position\_sensor\_get\_value() function and try to "printf" angle, it always shows 1.#QNAN0

##### WAYWARD 05/03/2020 13:20:53
We are facing a problem regarding the assembly of the model as it is not staying in the given positions. We are trying to build a snake bot and the body parts keep coming to the origin of the robot where its head is. We have tried multiple things with no avail. Any solutions to this issue?

##### Rhino 05/03/2020 20:08:16
I am trying to achieve something similar as the following link, are the models used in the link available to the public or are these custom made models. I am trying to leave behind a trail of spray by vehicle



Link: [https://youtu.be/OS0QByVv1do](https://youtu.be/OS0QByVv1do)

##### nap 05/03/2020 23:13:17
`@David Mansolino` :  There is something strange going on here.  In the attached image, I'm adding a relative torque to the epuck's body every 10 steps.  If I add 0.05 (lower portion of the image), the robot starts turning left for a few steps (may be just one) but then continues straight.  However, if I add 0.06 (top part), the robot performs the path I mentioned in my post above, square with arced sides.
%figure
![Add_Relative_Torque.png](https://cdn.discordapp.com/attachments/565154703139405824/706644583983087626/Add_Relative_Torque.png)
%end


`@phoenixash` : The epuck has a attachment point called `groundSensorSlot` in its interface (expand the epuck node in the LHS panel.  You need to add `E-puckGroundSensors` to this node.

When you change the floor size, your texture is scaled up/down accordingly. You should set the dimensions of your arena and then create the texture with the appropriate line widths.  (floorSize and floorTileSize work together.)

You should not change the size of the E-puck.  It will simply look smaller if you make your world larger.


`@lshil` there could be a number of things going wrong here.  You have to explain more clearly what you are trying to do.

##### phoenixash 05/04/2020 03:20:04
`@nap`  yup there is an attachment for groundsensor in epuck but I want to add ground sensor in some other robot which I created so how can I do that

##### nap 05/04/2020 03:21:42
`@phoenixash` : edit the proto of your robot and add the same node that the e-puck proto has.  Then, into that node, add the E-puckGroundSensor.

##### phoenixash 05/04/2020 03:22:15
`@nap` sorry I m not getting how to do

##### nap 05/04/2020 03:22:30
when  you edit your robot's proto, note that there is a node in the structure under "children" but there is also a reference in the interface section (fields)


study the proto for the e-puck and experiment.   You will get it. (I don't have to the time to make an example for you.)

##### phoenixash 05/04/2020 03:23:37
Sure I will try and let you know

##### David Mansolino [Cyberbotics] 05/04/2020 05:43:01
> when I use the wb\_position\_sensor\_get\_value() function and try to "printf" angle, it always shows 1.#QNAN0

`@lshil` did you call the wb\_robot\_step function between enabling the sensor and getting the value?


> We are facing a problem regarding the assembly of the model as it is not staying in the given positions. We are trying to build a snake bot and the body parts keep coming to the origin of the robot where its head is. We have tried multiple things with no avail. Any solutions to this issue?

`@WAYWARD` have you tried using a 'Transform' node to translate the origin of the parts?


> I am trying to achieve something similar as the following link, are the models used in the link available to the public or are these custom made models. I am trying to leave behind a trail of spray by vehicle

> 

> Link: [https://youtu.be/OS0QByVv1do](https://youtu.be/OS0QByVv1do)

`@Rhino` not all the model are available, but Webots comes with models of tractor and drones (not exactly the same as one the video but similar).


> `@David Mansolino` : I've implemented a Supervisor that rotates the epuck every 10 time\_steps.  In the attached screenshot, I have the trail marked (using the the webots trail example supervisor but with more data points) and my 'noise' code (basically all of it is visible in the image).  The noise at the moment increments the CW rotation of the epuck on each step, while the epuck thinks it's going straight.  However, the result is confusing me.

> 1)  I had to apply rotation around the Y axis but using the Z axis orientation.  I would have thought I should be able to progressively change the Y rotation, but when I do that, there is no rotation.  Is there a  coordinate system swap going on somewhere?

> 2) Since I'm increasing the angle linearly, don't understand why the path is the way it is.  I would have expected to simply read the orientation and add a small amount of noise to it.  However, I need to multiply the noise by the number of iteration otherwise the epuck travels in a straight line after the initial deviation.

> 3) Is the rotation function using ARCTAN?  I don't think so, because the epuck does achieve more than 360 degrees of rotation.  However the path, in my mind should have been a circle rather than a weird spiral.

`@nap` it is indeed strange that you have to multiply by index, can you try printing the value of the rotation you get (I do suspect that you get the value of one step before and therefore before the increment).


About the orientation, it seems from your code that you are correctly rotating around the Y axis and not Z, I am not sure what you mean Z axis orientation (in Webots the up axis is Y).

##### nap 05/04/2020 05:55:44
> About the orientation, it seems from your code that you are correctly rotating around the Y axis and not Z, I am not sure what you mean Z axis orientation (in Webots the up axis is Y).

`@David Mansolino` you will notice I'm using the indice "2" not "1".

##### David Mansolino [Cyberbotics] 05/04/2020 05:58:52
Oh ok I see, this is because you are using `wb_supervisor_node_get_orientation`  which returns a rotation matrix ([https://cyberbotics.com/doc/reference/supervisor#wb\_supervisor\_node\_get\_orientation](https://cyberbotics.com/doc/reference/supervisor#wb_supervisor_node_get_orientation)), you should probably use the rotation field instead:

`wb_supervisor_field_get_sf_rotation(rotField);`

This is probably the reason why you have to multiply by `index` too.

##### nap 05/04/2020 06:03:05
Ok, I'll try that.


`@David Mansolino` :  Ok, I've used `wb_supervisor_field_get_sf_rotation`, added a delta to the angle, fourth indice ([3]), and then used `wb_supervisor_field_set_sf_rotation`.  The results were promising at the start but then the circle turned into a spiral.
%figure
![Using-sf_rotation.png](https://cdn.discordapp.com/attachments/565154703139405824/706770381217988729/Using-sf_rotation.png)
%end

##### David Mansolino [Cyberbotics] 05/04/2020 08:03:31
Is the speed of the robot constant?

##### Quantumfox 05/04/2020 09:52:11
hey guys i have a question. I read the documentation and they said i can use the command webots in cmd but it doesnt work. `On Windows 10 and Windows 7, open the Start menu, go to the Program Files / Cyberbotics menu and click on the Webots R2020a revision 2 menu item.` this is above the commands but this folder doesnt exist on my system.  because i want to stream my webots to a website.

##### Olivier Michel [Cyberbotics] 05/04/2020 09:54:08
I would recommend you to use the latest nightly build of Webots R2020a revision 2 as we fixed several issues related to starting Webots from the DOS cmd.


Bye the way, did you installed Webots for all users or only for you?

##### Quantumfox 05/04/2020 09:55:33
uhh idk

##### nap 05/04/2020 09:55:44
> Is the speed of the robot constant?

`@David Mansolino` : Yes, with no lines, the robot's controller travels in a straight line forward.

##### Olivier Michel [Cyberbotics] 05/04/2020 09:55:44
[https://github.com/cyberbotics/webots/releases/tag/nightly\_30\_4\_2020](https://github.com/cyberbotics/webots/releases/tag/nightly_30_4_2020)

##### Quantumfox 05/04/2020 09:56:27
but it isnt possible with the stable version?

##### Olivier Michel [Cyberbotics] 05/04/2020 09:56:44
`@Quantumfox`: in case you installed it for all users, you should a folder in `C:\Program Files\Webots`.

##### Quantumfox 05/04/2020 09:56:50
yes

##### Olivier Michel [Cyberbotics] 05/04/2020 09:57:01
Yes, it should work with the stable version, but I cannot guarantee.

##### Quantumfox 05/04/2020 09:57:37
i only installed for the current user


i guess because its on my user map

##### Olivier Michel [Cyberbotics] 05/04/2020 09:58:27
If you installed it for all users, open a DOS cmd.exe and go to `C:\Program Files\Webots\msys64\mingw64\bin`.

##### Quantumfox 05/04/2020 09:58:59
ok so i have to remove webots


and reinstall?

##### Olivier Michel [Cyberbotics] 05/04/2020 10:00:04
No, you can also start it from the local user folder.

##### Quantumfox 05/04/2020 10:00:08
oeh nice

##### Olivier Michel [Cyberbotics] 05/04/2020 10:00:21
Just let me figure out which folder it is exactly.

##### Quantumfox 05/04/2020 10:00:50
C:\Users\user\AppData\Local\Programs\Webots\msys64\mingw64\bin


its here on my system

##### Olivier Michel [Cyberbotics] 05/04/2020 10:01:10
Yes, that's it.

##### Quantumfox 05/04/2020 10:01:28
aight


and how to stream

##### Olivier Michel [Cyberbotics] 05/04/2020 10:01:33
From there, if you type webots on a DOS cmd, it should work.

##### Quantumfox 05/04/2020 10:01:47
--stream[ =''port=[1234]; monitorActivity'']


i had this


but i dont think thats right

##### Olivier Michel [Cyberbotics] 05/04/2020 10:02:19
webots --stream="port=1234;monitorActivity"

##### Quantumfox 05/04/2020 10:02:51
aight when i stream i can show it in browser?

##### Olivier Michel [Cyberbotics] 05/04/2020 10:03:45
Then, you can open C:\Users\user\AppData\Local\Programs\Webots\resources\web\streaming\_viewer\index.html


in a web browser.

##### Quantumfox 05/04/2020 10:04:23
aight thx

##### Olivier Michel [Cyberbotics] 05/04/2020 10:04:34
Yes, the `--batch option` is useful in production only (it avoid that Webots opens interactive dialog windows).

##### Quantumfox 05/04/2020 10:05:01
ah thx man


it works 🙂

##### LaCava 05/04/2020 10:30:25
Hi -- I've searched in the channel, but haven't been able to find anything specific: is there a way to change the default position of a robot after a call to `simulationReset` with a supervisor? I'd like to have the robot begin in a specific pose during training of a RL agent

##### David Mansolino [Cyberbotics] 05/04/2020 10:32:22
Hi `@LaCava`, the position is reset at the position it was when loading the world. However, you can from your supervisor move your robot where you want at the first step after resetting the simulation.

##### LaCava 05/04/2020 10:33:20
Is there a way to specify the position when loading the world, or is that fixed? Otherwise, I'll just move it, thanks!


(By position, I mean joint angles, not XYZ space)


Sorry for the ambiguity there

##### David Mansolino [Cyberbotics] 05/04/2020 10:35:16
No problem. To move the joints position is a bit more tricky. First, is your robot a PROTO node or noe?

##### LaCava 05/04/2020 10:35:47
It's a NAO v5, straight from the PROTO

##### David Mansolino [Cyberbotics] 05/04/2020 10:37:38
Ok, in that case the simplest solution is probably to un-prototize the robot (right click on the robot->`Convert to Base Node(s)`), this way you will be able to access the `position` field of the robot from your supervisor and change them at the first step after the reset.

##### LaCava 05/04/2020 10:38:37
Alright, thank you!

##### David Mansolino [Cyberbotics] 05/04/2020 10:38:50
You're welcome!

##### Point 05/04/2020 11:52:42
is there a way to define materials for wheels? like make them from rubber

##### Stefania Pedrazzi [Cyberbotics] 05/04/2020 11:58:45
`@Point` do you want that the wheels looks like rubber or behave like if they are made from rubber?

If you want that a wheels behaves like if it is made from rubber, then you have to add specific ContactProperties defining the wanted behavior: [https://www.cyberbotics.com/doc/reference/contactproperties](https://www.cyberbotics.com/doc/reference/contactproperties)

##### Point 05/04/2020 11:59:54
thnx

##### Simon Steinmann [Moderator] 05/04/2020 12:08:55
What exactly are fields? It's never really explained. Are those the different parameters / variables a node has?

##### Stefania Pedrazzi [Cyberbotics] 05/04/2020 12:09:46
`@Simon Steinmann` yes. Fields are all the parameters of a node.

##### Olivier Michel [Cyberbotics] 05/04/2020 12:10:24
`@Simon Steinmann`: this is explained here: [https://www.cyberbotics.com/doc/reference/glossary](https://www.cyberbotics.com/doc/reference/glossary)

##### Simon Steinmann [Moderator] 05/04/2020 12:11:12
ohhhh


perhaps that should be in the introduction


so node.get\_orientation is the same as


node.getField(rotation).getSFRotation()


?

##### Stefania Pedrazzi [Cyberbotics] 05/04/2020 12:19:15
not really, as described in the documentation [https://www.cyberbotics.com/doc/reference/supervisor#wb\_supervisor\_node\_get\_orientation](https://www.cyberbotics.com/doc/reference/supervisor#wb_supervisor_node_get_orientation): the `wb_supervisor_node_get_orientation` functions returns tthe rotation of the node in the global world coordinate system and as a 3x3 matrix

##### Simon Steinmann [Moderator] 05/04/2020 12:19:51
well it returns a 1x9 list 😉

##### Stefania Pedrazzi [Cyberbotics] 05/04/2020 12:19:54
but the `SFRotation` field contains the local rotation with respect to the parent node and using axis angle format

##### Simon Steinmann [Moderator] 05/04/2020 12:20:11
ahh okay. yeah makes sense


but I already submitted a change request about the get\_orientation thing

##### Stefania Pedrazzi [Cyberbotics] 05/04/2020 12:21:37
Yes. The documentation explains that is a list of 9 values that shall be interpreted as a 3x3 matrix

##### Aan 05/04/2020 12:22:46
Hi, I am trying a quadcopter using mavic2pro example controller. Why the quadcopter cannot hold in its position after takeoff? it moves pitch forward by itself.

##### David Mansolino [Cyberbotics] 05/04/2020 12:39:16
> Hi, I am trying a quadcopter using mavic2pro example controller. Why the quadcopter cannot hold in its position after takeoff? it moves pitch forward by itself.

`@Aan` the sample controller of the mavic2pro example is extremely simple, there is no position feedback from the gps or any other sensors used to stabilize it.

##### Aan 05/04/2020 13:03:56
thank you

##### David Mansolino [Cyberbotics] 05/04/2020 13:04:04
You're welcome

##### Janx1913 05/04/2020 13:30:14
I am trying to make a robot grasp a banana on a flat surface. I am using the UR5 robot and the Tiago parallel gripper. However, when "clamping" the banana and moving the gripper up, the banana slips out of the grasp. What could cause this?



I have tried running with smaller timestep, with no luck. I also tried playing around with contact material and contact properties, also no luck. I also tried with a higher coloumb friction on the gripper, same as the others, no luck

##### David Mansolino [Cyberbotics] 05/04/2020 13:31:50
Hi `@Janx1913` time step and coloumb friction are indeed the firest things to try. Can you share a small video of the problem?

##### Janx1913 05/04/2020 13:45:41
Here you go. Here the timestep is 8 and coloumb friction -1
> **Attachment**: [banana\_grasp.webm](https://cdn.discordapp.com/attachments/565154703139405824/706864130518155355/banana_grasp.webm)

##### David Mansolino [Cyberbotics] 05/04/2020 13:49:33
Thank you, everything looks good indeed, what you should try to do is:

  1. try with an extremely small tiem step to check if it helps (e.g. 1).

  2. try to understand what is happenning by enableing the boundign objects and contact points optionnal rendering.

  3. perform a control of the gripper in torque instead of position.

##### Janx1913 05/04/2020 13:51:09
`@David Mansolino` Thanks, I will give that a try

##### David Mansolino [Cyberbotics] 05/04/2020 13:51:18
You're welcome

##### Rhino 05/04/2020 15:05:29
thank you for your response `@David Mansolino`. I can try and make custom models for myself, but is it possible to make trail like in the video on the road? 



link:[https://youtu.be/OS0QByVv1do](https://youtu.be/OS0QByVv1do)

##### Stefania Pedrazzi [Cyberbotics] 05/04/2020 15:08:15
`@Rhino` yes. This tractor model is using the Pen device to draw on the ground texture. [https://www.cyberbotics.com/doc/reference/pen](https://www.cyberbotics.com/doc/reference/pen)

##### Rhino 05/04/2020 15:08:58
oh cool! thank you `@Stefania Pedrazzi`

##### WAYWARD 05/05/2020 11:54:50
> `@WAYWARD` have you tried using a 'Transform' node to translate the origin of the parts?

`@David Mansolino`. Hey thank you so much for the response. We've already tired it and it still doesn't work though.

##### David Mansolino [Cyberbotics] 05/05/2020 11:55:50
You're welcome. In that case can you share the bounding object you want to move (share the world or proto file)?

##### Tahir [Moderator] 05/05/2020 14:36:36
I am trying to import a Hukoyu sensor. I have the STEP file. I have tried different converters to Webots but all loose information.


Is there anyway to do that while loosing color information?


I have exported VRML2.0 but that does not work with Webots.


or is there anyway to convert VRML2 to VRML97 as I tried to look on internent but all in vain so far

##### David Mansolino [Cyberbotics] 05/05/2020 14:53:24
You might use a nightly build of Webots R2020b which includes import for mode formats (see 'Import 3D Model...' menu item): [https://cyberbotics.com/doc/guide/the-user-interface?version=develop#file-menu](https://cyberbotics.com/doc/guide/the-user-interface?version=develop#file-menu)

You can download the nightlies from here: [https://github.com/cyberbotics/webots/releases](https://github.com/cyberbotics/webots/releases)

##### WAYWARD 05/05/2020 18:00:28
> You're welcome. In that case can you share the bounding object you want to move (share the world or proto file)?

`@David Mansolino`  Is there any way i can send you the world and the picture of the final solidworks model and explain to you the issue? i could even send the final solidworks file if you wish.

##### JIAO 05/06/2020 01:05:53
can I still use webots 2018 now? The license link appears to be 404

##### Mike Wescott 05/06/2020 03:35:47
I am just getting started with Webots.  Doing the first tutorial I get this error.  Anyone know how to fix it?  I am doing the controller with C++:



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/707435446912680027/unknown.png)
%end


My goal is to setup a Real time data exchange connection from Webots to the Universal Robots Polyscope virtual machine simulator.  I want to teach UR to Tech school and High School level without the robot.  Has anyone done this?  I found a C++ RTDE interface already I am thinking I could put into the UR controller in Webots and just map variables.  Does that sound like it would work?  I want to be able to write code on the virtual teach pendant that runs on the Webots simulated UR.

##### David Mansolino [Cyberbotics] 05/06/2020 04:50:20
> `@David Mansolino`  Is there any way i can send you the world and the picture of the final solidworks model and explain to you the issue? i could even send the final solidworks file if you wish.

`@WAYWARD` yes of course you can send them here directly.


> can I still use webots 2018 now? The license link appears to be 404

`@JIAO` yes of course, you just need to use the magic 'webots' password: [https://cyberbotics.com/doc/guide/general-faq#can-i-still-use-a-webots-version-before-the-r2019a-release](https://cyberbotics.com/doc/guide/general-faq#can-i-still-use-a-webots-version-before-the-r2019a-release)


> I am just getting started with Webots.  Doing the first tutorial I get this error.  Anyone know how to fix it?  I am doing the controller with C++:

`@Mike Wescott` which version of Webots are you using?


> My goal is to setup a Real time data exchange connection from Webots to the Universal Robots Polyscope virtual machine simulator.  I want to teach UR to Tech school and High School level without the robot.  Has anyone done this?  I found a C++ RTDE interface already I am thinking I could put into the UR controller in Webots and just map variables.  Does that sound like it would work?  I want to be able to write code on the virtual teach pendant that runs on the Webots simulated UR.

`@Mike Wescott` that is exactly the goal of Webots, been able to do experiment without the need for the real robot. About the control, the C++ RTDE interface of the UR robot is not supported by default, only the Webots C++ API is: [https://cyberbotics.com/doc/guide/using-cpp](https://cyberbotics.com/doc/guide/using-cpp)

IF you haven't followed the tutorials, I strongly advice to do so (at least for tutorial 1 to 6): [https://cyberbotics.com/doc/guide/tutorials](https://cyberbotics.com/doc/guide/tutorials)

##### mearvind 05/06/2020 05:06:48
I am new to webots and trying to use supervisor functions. I am not getting what parameter to pass to wb\_supervisior\_node\_get\_from\_def(); i passed the name of my robot but its showing error. how to get def name of my robot?

##### David Mansolino [Cyberbotics] 05/06/2020 05:10:59
The DEF can be defined in the field editor of the scene-tree when you select the node: [https://cyberbotics.com/doc/guide/the-scene-tree#field-editor](https://cyberbotics.com/doc/guide/the-scene-tree#field-editor)

You can find more information about DEF and USE here: [https://www.cyberbotics.com/doc/reference/def-and-use](https://www.cyberbotics.com/doc/reference/def-and-use)

And en example simulation using the supervisor API here: [https://www.cyberbotics.com/doc/guide/samples-devices#supervisor-wbt](https://www.cyberbotics.com/doc/guide/samples-devices#supervisor-wbt)

##### elkelkmuh 05/06/2020 07:18:00
Hi `@David Mansolino`  How can I draw graphics on Webots?

##### David Mansolino [Cyberbotics] 05/06/2020 07:18:21
Hi `@Mathie20` is it you that posted this stackoverflow question [https://stackoverflow.com/questions/61620055/a-c-code-that-needs-to-be-translated-to-c-ros](https://stackoverflow.com/questions/61620055/a-c-code-that-needs-to-be-translated-to-c-ros) ?

If yes, I am currently writing an answer.


> Hi `@David Mansolino`  How can I draw graphics on Webots?

`@elkelkmuh` what kind of graphics do you want to draw?

##### elkelkmuh 05/06/2020 07:21:11
`@David Mansolino` I wrote a program to calculate op2 zmp with fsr, I want to graph it.

##### David Mansolino [Cyberbotics] 05/06/2020 07:23:30
In that case you can either open a window from your controller (using the language and framework of your choice) either use the robot-window to plot your data, here is a very simple example of custom robot-window: [https://cyberbotics.com/doc/guide/samples-howto#custom\_html\_robot\_window-wbt](https://cyberbotics.com/doc/guide/samples-howto#custom_html_robot_window-wbt)


> I am struggling to make topic work. For objectrecognition with camera on ROS. I get some errors saying dropping connections and i cant echo the topic.

`@Mathie20` here it is: [https://stackoverflow.com/questions/61620055/a-c-code-that-needs-to-be-translated-to-c-ros?answertab=oldest#tab-top](https://stackoverflow.com/questions/61620055/a-c-code-that-needs-to-be-translated-to-c-ros?answertab=oldest#tab-top)

##### Mathie20 05/06/2020 07:32:57
I dont get how the const ptr is done. How do you know whether its image, values or target etc...

##### elkelkmuh 05/06/2020 07:35:10
`@David Mansolino`  Should I look at "Com example"?

 [https://github.com/cyberbotics/webots/tree/master/projects/samples/howto/worlds/center\_of\_mass.wbt](https://github.com/cyberbotics/webots/tree/master/projects/samples/howto/worlds/center_of_mass.wbt)

##### David Mansolino [Cyberbotics] 05/06/2020 07:36:41
> I dont get how the const ptr is done. How do you know whether its image, values or target etc...

`@Mathie20` you don't really care, this is just a name, you have to define it in your callback header but you can set the name you want., only the type is important


> `@David Mansolino`  Should I look at "Com example"?

>  [https://github.com/cyberbotics/webots/tree/master/projects/samples/howto/worlds/center\_of\_mass.wbt](https://github.com/cyberbotics/webots/tree/master/projects/samples/howto/worlds/center_of_mass.wbt)

`@elkelkmuh` no, to the 'custom\_html\_robot\_window.wbt' one.

##### adaptive 05/06/2020 09:51:10
Am I right that I can Use the roadpicture Information drawn in the webots world with OpenCV to implement lane-detection?

##### Olivier Michel [Cyberbotics] 05/06/2020 09:55:55
Yes, you should get the image from a camera embedded on your robot/vehicle.

##### Estelle 05/06/2020 10:54:39
could I have two robot in one world?

##### David Mansolino [Cyberbotics] 05/06/2020 10:55:14
Yes of course you can have as many robots as you want (as long as your computer is powerful enough to handle them).

##### Estelle 05/06/2020 10:58:05
Should their controllers run separately?

##### David Mansolino [Cyberbotics] 05/06/2020 10:59:00
Each robot will have it's own controller process (which can be the same executable or different ones).

##### Estelle 05/06/2020 11:00:32
Thank you~

##### David Mansolino [Cyberbotics] 05/06/2020 11:00:46
You're welcome

##### adaptive 05/06/2020 11:01:09
Can I use my Kinect v2 with skelleton-tracking for manipulating Robot-Aktors in Webots?

##### David Mansolino [Cyberbotics] 05/06/2020 11:01:56
You can do whatever you want since Webots controller are regular programm, but you will have to code yourself the interface between your controller and the Kinect.

##### adaptive 05/06/2020 11:02:13
ok that sounds fun^^

##### David Mansolino [Cyberbotics] 05/06/2020 11:02:27
It probably will 😉

##### Mathie20 05/06/2020 12:28:54
`@David Mansolino`  hi everytime i do rostopic echo /Littlehelper8/cameras/recognition\_objects i get this error
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/707569584189734962/unknown.png)
%end

##### David Mansolino [Cyberbotics] 05/06/2020 12:29:40
Which version of Webots are you using? And how did you install the webots\_ros package?

##### Mathie20 05/06/2020 12:30:35
im using webots R2020a revision 1. yes...

##### David Mansolino [Cyberbotics] 05/06/2020 12:31:11
How did you install the webots\_ros package, from sources? From APT ?

##### Mathie20 05/06/2020 12:31:25
from sources. as it says on website root etc


sorry it is APT

##### David Mansolino [Cyberbotics] 05/06/2020 12:35:51
Ok, in that case it looks indeed like a bug, can you please fill a bug report here and I will have a look when I have the time:

[https://github.com/cyberbotics/webots/issues/new?template=bug\_report.md](https://github.com/cyberbotics/webots/issues/new?template=bug_report.md)

Thank you.

##### Mathie20 05/06/2020 12:37:15
ok

##### yash 05/06/2020 12:42:30
Hello ! I have newly imported my CAD model.

When I run the simulation for a controller code , the robot tilts a bit and one wheel moves upward in the air


What could be the issue


As you can see in the picture
%figure
![image0.jpg](https://cdn.discordapp.com/attachments/565154703139405824/707573377661141022/image0.jpg)
%end

##### Olivier Michel [Cyberbotics] 05/06/2020 12:45:12
`@yash`: it could be a problem with the bounding object of the robot.

##### yash 05/06/2020 12:46:14
Okay let me check

##### Tahir [Moderator] 05/06/2020 13:22:29
I have converted robotiq 2f gripper using URDF2Webots


but after the conversion the proto node gives the error


ERROR: '/home/tahir/mbs\_warthog/mbs\_models/gripper.wbt':19:39: error: Expected node or PROTO name, found '{'.

ERROR: '/home/tahir/mbs\_warthog/mbs\_models/gripper.wbt': Failed to load due to syntax error(s).


any insights on how to debug this

##### David Mansolino [Cyberbotics] 05/06/2020 13:24:45
Just for the note, a user tried to create a model of this gripper, you can find the current progress here: [https://github.com/cyberbotics/webots/pull/1351](https://github.com/cyberbotics/webots/pull/1351)


About your issue, can you share the first 25 lines of the generated PROTO ?

##### Tahir [Moderator] 05/06/2020 13:27:20

> **Attachment**: [message.txt](https://cdn.discordapp.com/attachments/565154703139405824/707584289486929940/message.txt)


The model is different in the proto on github also I need two other models which are not already there

##### David Mansolino [Cyberbotics] 05/06/2020 13:36:22
I think I understand the issue, let me try to fix it.

##### Tahir [Moderator] 05/06/2020 13:36:37
OK thank you

##### David Mansolino [Cyberbotics] 05/06/2020 13:45:45
I may have fix the problem here:

[https://github.com/cyberbotics/urdf2webots/pull/43](https://github.com/cyberbotics/urdf2webots/pull/43)

May I try to retry the importation from the `fix-def-name` branch?

##### Tahir [Moderator] 05/06/2020 13:55:34
Thank you the problem is fixed

##### yash 05/06/2020 13:58:29
> Hello ! I have newly imported my CAD model.

> When I run the simulation for a controller code , the robot tilts a bit and one wheel moves upward in the air

checked the bounding objects


seems right but the problem still exists

##### Olivier Michel [Cyberbotics] 05/06/2020 14:20:37
Is the mass distribution correct?

##### yash 05/06/2020 14:26:25
I have not specifies any mass


specified*

##### Olivier Michel [Cyberbotics] 05/06/2020 14:30:46
Does your model have Physics nodes?

##### yash 05/06/2020 14:30:59
yes

##### Olivier Michel [Cyberbotics] 05/06/2020 14:31:23
So the mass is in there.

##### yash 05/06/2020 14:31:54
its the default value i guess

##### Olivier Michel [Cyberbotics] 05/06/2020 14:31:57
It's based on the density information and the bounding object.


If you didn't set anything here, it should be OK.


The next thing to check is the joint structure of your robot.


Did you follow this tutorial: [https://cyberbotics.com/doc/guide/tutorial-6-4-wheels-robot](https://cyberbotics.com/doc/guide/tutorial-6-4-wheels-robot) and the previous one to understand how to define the mechanical structure of a robot?

##### yash 05/06/2020 14:35:04
let me have a look again

##### Tahir [Moderator] 05/06/2020 16:23:03
My webots world is behvaing strange.

I have a robot proto node which is in protos folder. When I insert the proto in the world everything works fine. When I reload/restart webots I get error and the proto is not present in the scene treen. If I convert it in base node or insert Webots proto everythings work fine.


ERROR: '/home/tahir/mbs\_robot/mbs\_models/robot\_v1.wbt':15:1: error: Skipped unknown 'robot' node or PROTO.


any insights on this issue

##### Olivier Michel [Cyberbotics] 05/06/2020 16:24:01
Your proto is named "robot"?

##### Tahir [Moderator] 05/06/2020 16:26:08
no its a dummy just for the sake of info


proto name is consistent as the file name and in the deifnition


this happens to all other protos to my working directory as well


may be this is because I dont have a project just only .wbt file and protos folder


because in the main window with the world file name it is written 'No Project'

##### Olivier Michel [Cyberbotics] 05/06/2020 16:28:38
Yes, you should create a correct project folder hierarchy.

##### Tahir [Moderator] 05/06/2020 16:33:00
OK I will check that

##### dralorg 05/06/2020 17:28:18
Hi, I'm trying to get the rotation of the robot frame respect to the world frame. I achieved that by doing:

    supervisor = Supervisor()

    robot\_node = supervisor.getFromDef("youbot")

    orientation = robot\_node.getOrientation()



But then my old code where I retrieved the encoders:

    robot = Robot()

    robot.getPositionSensor('wheel1sensor')



Is complaining that "Only one instance of the Robot class should be created"



Then if I try to get the same encoders but with the robot\_node:

    supervisor = Supervisor()

    robot\_node = supervisor.getFromDef("youbot")

    robot\_node.getPositionSensor('wheel1sensor')



It complains like: "AttributeError: 'Node' object has no attribute 'getPositionSensor'"



Is it possible to get the encoders from the supervisor mode?

##### Olivier Michel [Cyberbotics] 05/06/2020 17:33:42
you should simply call `supervisor.getPositionSensor('wheel1Sensor')`.


Don't forget that the `Supervisor` class inherits from the `Robot` class, so all its methods can be used the same way.

##### dralorg 05/06/2020 17:36:06
Great, it works, thank you very much!

##### yusah 05/06/2020 18:26:55
I have an e-puck2 robot which I'll be working with. I want to first use the e-puck driver provided here ([https://www.gctronic.com/doc/index.php?title=e-puck2\_PC\_side\_development#Connecting\_to\_the\_Bluetooth](https://www.gctronic.com/doc/index.php?title=e-puck2_PC_side_development#Connecting_to_the_Bluetooth)) on webots simulator to write and simulate my additional scripts. However, there's no support on how to go about interfacing this driver with webots. I tried following the support provided based on ROS-Hydro for e-puck1 here ([https://www.gctronic.com/doc/index.php?title=E-Puck#ROS](https://www.gctronic.com/doc/index.php?title=E-Puck#ROS)), but the epuck-webots slam didn't work. I followed a tutorial on how to interface ros with webots and run all examples successfully. Does anyone know how I can successfully interface the driver so I could start my simulation?

##### yash 05/06/2020 18:36:31
> The next thing to check is the joint structure of your robot.

`@Olivier Michel`  had problem with joint position , the issue is solved. Thanks👍

##### sinancimen 05/06/2020 22:49:10
Hi, I am trying to build a ball-and-the-beam experiment setup on Webots. The thing is, I need 2 hinge joints on the beam. However, I could not figure out how can I make the beam end point for 2 hinge joints. Any suggestions?

##### David Mansolino [Cyberbotics] 05/07/2020 05:00:28
Hi, you simply need to have one more solid has endpoint of the first hinge and then add a second hinge in the children of this Solid.

If this is not clear can you please provide a drawing of the mechanism you want to simulate and where exactly is the problematic part.


> I have an e-puck2 robot which I'll be working with. I want to first use the e-puck driver provided here ([https://www.gctronic.com/doc/index.php?title=e-puck2\_PC\_side\_development#Connecting\_to\_the\_Bluetooth](https://www.gctronic.com/doc/index.php?title=e-puck2_PC_side_development#Connecting_to_the_Bluetooth)) on webots simulator to write and simulate my additional scripts. However, there's no support on how to go about interfacing this driver with webots. I tried following the support provided based on ROS-Hydro for e-puck1 here ([https://www.gctronic.com/doc/index.php?title=E-Puck#ROS](https://www.gctronic.com/doc/index.php?title=E-Puck#ROS)), but the epuck-webots slam didn't work. I followed a tutorial on how to interface ros with webots and run all examples successfully. Does anyone know how I can successfully interface the driver so I could start my simulation?

`@yusah` you will find some information about how to interface the real e-puck with Webots here: [https://cyberbotics.com/doc/guide/epuck#control-interface](https://cyberbotics.com/doc/guide/epuck#control-interface)

For any question about the real robot, please get in touch with the support of GCTronic directly.

##### Ork 05/07/2020 09:11:56
I wanna show the camera output in html , but not with the integrated web streamer , How would i do that ? (in Python)

##### David Mansolino [Cyberbotics] 05/07/2020 09:15:23
You can get the camera raw image from your python controller and send it to whatever you want, or save the image to a file and then use this file from html.

Here is an example in Python where the camera image is sent to a custom html robot window that you can use as a base to write your own export: [https://github.com/cyberbotics/webots/blob/master/projects/samples/robotbenchmark/visual\_tracking/controllers/visual\_tracking/visual\_tracking.py#L34](https://github.com/cyberbotics/webots/blob/master/projects/samples/robotbenchmark/visual_tracking/controllers/visual_tracking/visual_tracking.py#L34)

##### Ork 05/07/2020 09:18:10
Thank you

##### David Mansolino [Cyberbotics] 05/07/2020 09:18:18
You're welcome.

##### sinancimen 05/07/2020 10:12:23
`@David Mansolino` Thanks for replying David. The thing is when I make the beam endpoint for the first hinge and then add the second hinge joint as a children of the beam, second hinge is rotating the base, not the beam.
%figure
![unnamed.png](https://cdn.discordapp.com/attachments/565154703139405824/707897615387197451/unnamed.png)
%end

##### David Mansolino [Cyberbotics] 05/07/2020 10:55:35
Can you share you world file so that I can have a look at the problem in real?

##### sinancimen 05/07/2020 13:01:33

> **Attachment**: [ball\_beam.rar](https://cdn.discordapp.com/attachments/565154703139405824/707940186897776680/ball_beam.rar)

##### David Mansolino [Cyberbotics] 05/07/2020 13:01:50
thank you, I will try it

##### sinancimen 05/07/2020 13:02:02
Thank you so much for sparing your time

##### David Mansolino [Cyberbotics] 05/07/2020 13:36:08
I checked your simulation, the biggest issue I see is that the weight of the 'BEAM\_BASE' solid is extremely big. I assume this is to simulate the fact that it is part of the ground and can't move ?

Instead of using a very heavy mass, it is better to set the endpoint of the joint to be a 'SolidReference' node and to set the name to ``<static environment>`, this way the end of the joint will be locked to the environment: [https://cyberbotics.com/doc/reference/solidreference](https://cyberbotics.com/doc/reference/solidreference)


Here is a very draft version of this.
> **Attachment**: [empty3.wbt](https://cdn.discordapp.com/attachments/565154703139405824/707948938723983360/empty3.wbt)

##### sinancimen 05/07/2020 14:01:14
It works! thank you so so much for your help.

##### David Mansolino [Cyberbotics] 05/07/2020 14:01:32
You're welcome!

##### Rhino 05/07/2020 16:23:21
I am trying to use PEN sensor on my vehicle with following parameters but doesn't seem to work, am i missing something?
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/707990970993475635/unknown.png)
%end

##### David Mansolino [Cyberbotics] 05/08/2020 05:18:05
Which size has your floor object?

##### Dobby 05/08/2020 13:00:00
I am trying to get the window to work for our robot so we can control it through the robot, I used the simple example html in the how to section. But for some reason it doesn't find it



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/708302201310806056/unknown.png)
%end



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/708302223142027355/unknown.png)
%end

##### David Mansolino [Cyberbotics] 05/08/2020 13:01:36
You might be interested by this html robot-windows that allow to control the Thymio II robot directly (which looks similar to your case): [https://github.com/cyberbotics/webots/tree/master/projects/robots/mobsya/thymio/plugins/robot\_windows/thymio2](https://github.com/cyberbotics/webots/tree/master/projects/robots/mobsya/thymio/plugins/robot_windows/thymio2)

##### Dobby 05/08/2020 13:05:23
Ah yes I have used that before I tried the simple version, but then I couldnt find the functions in the controller anywhere, so I was wondering where those functions are made.


It does launch then but the controls dont work, and I was looking for an example to stop the motors or slow them down, but I couldnt find them anywhere in the thymio2 controller code that was provided, so I couldnt really implement it into our robot yet



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/708304479577178122/unknown.png)
%end

##### David Mansolino [Cyberbotics] 05/08/2020 13:11:24
The message sent from the robot windows JS are interpreted by the controller here: [https://github.com/cyberbotics/webots/blob/master/projects/robots/mobsya/thymio/controllers/thymio2\_demo/thymio2\_demo.c#L163-L185](https://github.com/cyberbotics/webots/blob/master/projects/robots/mobsya/thymio/controllers/thymio2_demo/thymio2_demo.c#L163-L185)

##### Dobby 05/08/2020 13:12:57
Aah thanks, that'll help a ton! ^^

##### David Mansolino [Cyberbotics] 05/08/2020 13:20:27
You're welcome!

##### lshil 05/08/2020 13:49:20
WARNING: Quadruped\_Robot: Forced termination (because process didn't terminate itself after 1 second).


what does this mean?

##### yash 05/08/2020 13:52:07
I am using a light sensor to detect a light source .... so is it possible to get separate RGB values of the detected light as output using this light sensor?

##### David Mansolino [Cyberbotics] 05/08/2020 14:01:01
> what does this mean?

`@lshil` it means that your controller is either not responsive anymore or does not check for the returned value of the step function (if the returned value is equal to `-1.0` your controller should exit).


> I am using a light sensor to detect a light source .... so is it possible to get separate RGB values of the detected light as output using this light sensor?

`@yash` not directly, however you can put color filters on light sensors, yo sou can put 3 light sensors, each with one different color filter to detect the RGB values: [https://www.cyberbotics.com/doc/reference/lightsensor#field-summary](https://www.cyberbotics.com/doc/reference/lightsensor#field-summary)

##### yash 05/08/2020 14:04:05
Okay , understood 👍. Thanks !

##### David Mansolino [Cyberbotics] 05/08/2020 14:07:44
You're welcome

##### Dobby 05/08/2020 14:13:43
Where should I declare a receive text in cpp?



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/708320741086593135/unknown.png)
%end

##### David Mansolino [Cyberbotics] 05/08/2020 14:15:21
You are trying the Webots C API in a C++ controller.

For C++ you should instead use the Robot::wwiReceive function: [https://cyberbotics.com/doc/reference/robot?tab-language=c++#wb\_robot\_wwi\_receive](https://cyberbotics.com/doc/reference/robot?tab-language=c++#wb_robot_wwi_receive)

##### Dobby 05/08/2020 14:36:40
Allright, I see! 😄


So I should change my if's aswell I reckon

##### Doc 05/08/2020 14:58:48
Hiya, I'm new to webots


My friend made this bot and I'm trying to steer it by moving the front wheels at different speeds
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/708332216538628146/unknown.png)
%end


But no matter the difference, it always drives forward. It's like there's so much sideways friction that it will only go forwards and backwards?


I can see the wheels spinning at the right speeds.

Do you know any leads for what I could check/read to solve this issue please?

##### Olivier Michel [Cyberbotics] 05/08/2020 15:01:01
Did you check that the wheels are independent?

##### Doc 05/08/2020 15:01:33
They are on two separate rotational motors and I can definitely control then independently

##### Olivier Michel [Cyberbotics] 05/08/2020 15:01:43
Is the big back wheel a motorized wheel or is it passive?

##### Doc 05/08/2020 15:02:04
it's motorised but the speed is set to 0 (which is probably part of the problem)

##### Olivier Michel [Cyberbotics] 05/08/2020 15:02:32
I see... I would replace it with a sphere and set a very low friction on it.

##### Doc 05/08/2020 15:02:47
Right I'll give that a go, thanks


Yeah looks like it was the back wheel which was causing all the problems, thank you 🙂

##### Olivier Michel [Cyberbotics] 05/08/2020 15:10:54
You are welcome.

##### Rhino 05/08/2020 15:16:53
`@David Mansolino` these are the parameters of the road object i am trying to write on with pen
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/708336633870680094/unknown.png)
%end

##### David Mansolino [Cyberbotics] 05/08/2020 15:19:28
Can you try splitting the road in smaller sub-roads (PEN works better with smaller objects) ?

##### Rhino 05/08/2020 15:20:07
i can give that a try


i tried running the vehicle over a small stripe of road but that still didn't work
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/708337981513269248/unknown.png)
%end

##### David Mansolino [Cyberbotics] 05/08/2020 15:24:34
Can you try the same on the 'Floor' node?

##### Rhino 05/08/2020 15:29:23
it does seem to work on floor


whats weird about this is it only seems to work with size and tile size are the same


doesn't work otherwise

##### lojik 05/08/2020 15:40:19
Hello everyone, I am new on this discord.



I'm using webots on a master project and have some questions :

- I am trying to overshoot my webots PIDs without realistic success. Is it better to implement a custom PID in the controller directly or could I missed something in the simulation that makes my webots PIDs unrealistic ?

- Are the simulation with webots deterministics or there is always some noise automatically added to make them more realistic but not deterministic ?



Thank you in advance for your help. I can provide parameters if it is needed to better understand my questions.

Louis

##### Professor Felix 05/08/2020 15:49:49
hello, I just had one small question. Theoretically, what is the best way to get a live video feed into a working program memory (for example, storing the pixels as a Tensor)? I'm assuming i'd just use the wb\_camera\_get\_image for every frame and then store every frame together, but I was wondering if anyone had some better suggestions

##### Olivier Michel [Cyberbotics] 05/08/2020 15:54:41
`@lojik`: the PID control is performed here: [https://github.com/cyberbotics/webots/blob/master/src/webots/nodes/WbMotor.cpp#L248-L260](https://github.com/cyberbotics/webots/blob/master/src/webots/nodes/WbMotor.cpp#L248-L260). I would recommend you to recompile Webots from the source and add some printf statements here, so that you can better understand what's wrong with your approach.


About determinism. Yes: Webots is deterministic. The same noise seed is applied when you run twice the same simulation, so that you should obtain the very same results. If you want it to be non deterministic, you can simply have your controller wait for some random amount of time (using a time-based seed) before starting to move the robot and you will get non-reproducible results.


`@Professor Felix`: your approach seems good.

##### Professor Felix 05/08/2020 15:58:08
thank you

##### lojik 05/08/2020 16:03:56
`@Olivier Michel` Thank you for both of your answers.

- I will take a look on the PID part to try finding why it is not working.

- So if I do not have the same result on each experiment I should have a look on my controller instead of webots ? There is no parameters inside webots that makes it non deterministic ?

##### Olivier Michel [Cyberbotics] 05/08/2020 16:05:01
That's correct.

##### lojik 05/08/2020 16:06:11
Ok, thank you very much for your help. That makes it clearer.

##### yash 05/08/2020 17:11:08
I am using LED and it’s first child as shape .... when I glow the LED the light sensor doesn’t detect any output ! 

What could be the issue ?


Is it necessary that a light source such as point light or spot light must be present to percept the amount of light by the light sensor .?

##### Olivier Michel [Cyberbotics] 05/08/2020 17:34:38
Yes. But you can put a point light or a spot light in a LED.


See the samples / devices / led.wbt

##### yash 05/08/2020 17:36:01
So but is it possible to ON /Off the LED when the child is point light ?


> See the samples / devices / led.wbt

`@Olivier Michel`   Okay !

##### Alejandro Pescathore 05/08/2020 17:49:38
Hello there, I have a question, how coulomb friction works in Webots? I understand that it is a factor between 0-1 and it is related to the normal force, but in webots I can specify values ​​between 0 and infinity. What is the appropriate value to simulate the friction between rubber and wood?

##### WAYWARD 05/08/2020 19:05:03
> `@WAYWARD` yes of course you can send them here directly.

`@David Mansolino`
> **Attachment**: [SnakeBot.wbt](https://cdn.discordapp.com/attachments/565154703139405824/708394052608852038/SnakeBot.wbt)


> `@David Mansolino`
> **Attachment**: [final\_assem.SLDASM](https://cdn.discordapp.com/attachments/565154703139405824/708394337574191124/final_assem.SLDASM)

##### Aan 05/09/2020 00:32:22
Is there any sensor to know where the sound coming from? Is it possible using speaker node to represent sound source?

##### Weiyi 05/09/2020 02:19:35
Hello, how can I make such a object so that it can let go or stop cars?
%figure
![images.jpg](https://cdn.discordapp.com/attachments/565154703139405824/708503404816760842/images.jpg)
%end

##### Simon Steinmann [Moderator] 05/09/2020 13:32:12
Hi, I want to install the latest nightly build. Do I have to compile it myself or do I use this? [https://github.com/cyberbotics/webots/releases](https://github.com/cyberbotics/webots/releases) Are these the newest compiles?


and what is the difference between 2020a and b?

##### lojik 05/09/2020 15:45:19
`@Alejandro Pescathore` as I understand, on webots coulomb friction work as follow:

1. while there is no force bigger than <coulomb friction>*<normal force at this point> the two object will not slip pass each other

2. as soon as you have a force bigger than the one set with coulomb friction (in point 1.), you will have a speed equal to the <force acting on your object>*<forceDependentSlip cofficient set>



Coulomb friction coefficients bigger than one are physically correct.



But even with these informations I can not set a frottement that is physically satisfaying on my side too... Do someone has good tricks to have good results with a four wheeled robot turning on spot using differential wheels ? As soon as I test it on inclined plan it will just slip down the slope.


Finally I obtained something not too bad with 0.8 as a friction coulomb and 0.001 as a forceDependentSlip (if it is smaller it produce non symmetric results)


But I am not totally convinced with this solution ..

##### erdanielx 05/09/2020 20:18:02
Hi, why is it that I can't access any of the Driver or Car functionalities? I get an error when Building stating that those two symbols can't be found (I'm using Java). Is this  problem with my installation?


These are the two errors: error: package com.cyberbotics.webots.controller.vehicle does not exist


error: cannot find symbol

import com.cyberbotics.webots.controller.Car;

##### Deleted User 05/09/2020 23:46:53
Hey I'm extremely new to robotics as well as webots. I'm curious as to how to modify a pre-existing robot (like youbot). I'd like to add distance and line sensors. Is that possible or is better to just start from scratch? I originally made my own but adding/find a claw was difficult. I'm assuming I can just add sensors by using #include \_\_\_\_\_\_ One of my main problems is simply adding lines for a robot to follow. Is there a video or possible tutorial that could help me? I've already visited the tutorials on the official site.
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/708827364205002782/unknown.png)
%end

##### Aan 05/10/2020 01:58:48
`@Deleted User` you can add sensor in body slot

##### Deleted User 05/10/2020 04:51:16
`@Aan` thank you!

##### Aan 05/10/2020 06:22:47
You are welcome

##### jomell310 05/10/2020 06:38:49
Hi! I'm really new to webots. I'm trying to get better at the robotbenchmark task of Obstacle Avoidance, I have to use a braitenberg approach, I can't use any If-else statements. I was thinking on using reinforcement learning to tune the parameters. Two things, how can I stop the simulation and give the score like they to in robotbenchmark so like stop it if the robot crashes, crosses the line or takes longer than a minute 20. And also any advice or something to look for implementing reinforcement learning, don't have much experience in that either... Thanks in advance!

##### Doc 05/10/2020 10:22:42
Hi again


My webots program runs instantly on Python 3 but slowly on Python 2 (as in you'll see each print appear one by one in the console)

Any idea why this is please?

##### sinancimen 05/10/2020 17:16:43
Is there any way to import Solidworks assemblies? (in R2020b). I import as .obj files but I need to import geometries part by part. Any way to preserve their locations and import?

##### Ork 05/10/2020 17:54:23
Is there a way to exactly turn 90 degrees ? Use a compass ?

##### Lussfer 05/10/2020 22:56:34
Is there a way to draw a line between two gps points?

##### Mohai 05/11/2020 02:24:17
Hi , i am very new to webots and robotics, my teacher sent me a file but i couldn't open it using webots , the file format is text document .log , anyone can help me please?

##### Stefania Pedrazzi [Cyberbotics] 05/11/2020 06:25:03
`@Alejandro Pescathore` here you can find the detailed description of the friction approximation made by the physical engine ODE used by Webots: [http://ode.org/wiki/index.php?title=Manual#Friction\_Approximation](http://ode.org/wiki/index.php?title=Manual#Friction_Approximation). Unfortunately I don't have any calibrated values for contact properties between rubber and wood.


`@Aan` at the moment Webots doesn't have any microphone device to detect sound sources in a simulation. But it's already in our plan to add it.

However you could cheat and get the Speaker node (or any placeholder node for the sound source) position using the Supervisor API (for example [https://www.cyberbotics.com/doc/reference/supervisor?tab-language=c++#wb\_supervisor\_node\_get\_position](https://www.cyberbotics.com/doc/reference/supervisor?tab-language=c++#wb_supervisor_node_get_position))


`@Simon Steinmann` usually the nightly build are available as compiled packages that you just have to download and install. Just click on the Assets drop down menu and pick your package: [https://github.com/cyberbotics/webots/releases](https://github.com/cyberbotics/webots/releases)

It can happen that some errors occur during the nightly build and thus some packages are missing for a particular day but usually all the packages are available.

The difference between the current two versions is that R2020a revision 2 contains is fixed version completely compatible with R2020a, and R2020b contains new features and changes that could break the compatibility with the previous version of Webots.


`@Weiyi` there are different methods that you could use to model a barrier, here are a youple of suggestions:

1. passive: Add a big bounding object to the barrier and a DistanceSensor to the car that will detect it: when the barrier will be lifted the distance sensor value changes and the car can continue

2. active: add Emitter/Receiver nodes to the barrier and to the car that will communicate: the barrier could emit continuously a message indicating its status open/closed or the car could request the status when it approaches

##### David Mansolino [Cyberbotics] 05/11/2020 06:54:16
> `@David Mansolino`

`@WAYWARD` I am sorry but the world you sent me is just a set of independant `Transform` node, you should move them in a `Robot`node and probably transform them into `Solid` nodes. If not already done I would suggest followign this tutorial to understand how to create your own robot model: [https://cyberbotics.com/doc/guide/tutorial-6-4-wheels-robot](https://cyberbotics.com/doc/guide/tutorial-6-4-wheels-robot)


`@erdanielx` you have to modify your Makefile and add a runtime.ini file next to your controller, here is an example: [https://github.com/cyberbotics/webots/tree/master/projects/vehicles/controllers/VehicleDriver](https://github.com/cyberbotics/webots/tree/master/projects/vehicles/controllers/VehicleDriver)


> Hi! I'm really new to webots. I'm trying to get better at the robotbenchmark task of Obstacle Avoidance, I have to use a braitenberg approach, I can't use any If-else statements. I was thinking on using reinforcement learning to tune the parameters. Two things, how can I stop the simulation and give the score like they to in robotbenchmark so like stop it if the robot crashes, crosses the line or takes longer than a minute 20. And also any advice or something to look for implementing reinforcement learning, don't have much experience in that either... Thanks in advance!

`@jomell310` you might be interested by this doc: [https://cyberbotics.com/doc/guide/using-numerical-optimization-methods](https://cyberbotics.com/doc/guide/using-numerical-optimization-methods)

##### Ork 05/11/2020 08:07:37
Is there a way to exactly turn 90 degrees ? Use a compass ?

##### Stefania Pedrazzi [Cyberbotics] 05/11/2020 08:11:21
`@Mohai` `.log` file is not Webots files. A valid Webots world file should have `.wbt` format.

Alternatively other formats are also support for importing objects ina world (like `.proto`, `.wbo`, `.vrml`).

##### David Mansolino [Cyberbotics] 05/11/2020 08:12:24
> Is there a way to draw a line between two gps points?

`@Lussfer` Yes of course, you can use an indexedLineSet node for example: [https://cyberbotics.com/doc/reference/indexedlineset](https://cyberbotics.com/doc/reference/indexedlineset)


> Is there any way to import Solidworks assemblies? (in R2020b). I import as .obj files but I need to import geometries part by part. Any way to preserve their locations and import?

`@sinancimen` in R2020b the followig format are support for importation ([https://cyberbotics.com/doc/guide/the-user-interface?version=develop#file-menu](https://cyberbotics.com/doc/guide/the-user-interface?version=develop#file-menu)): 

    3D Studio mesh files (.3ds).

    Blender files (.blend).

    Biovision Hierarchy files (.bvh).

    Collada files (.dae).

    Filmbox files (.fbx).

    STL files (.stl).

    VRML files (.wrl).

    Wavefront files (.obj).

    X3D files (.x3d).

Maybe you can use another format than obj that is supporting multi-parts (-dae or .fbx for example).


> My webots program runs instantly on Python 3 but slowly on Python 2 (as in you'll see each print appear one by one in the console)

> Any idea why this is please?

`@Doc` it should be almost the same regardless of the version of python, can you open an issue to report this (including a sample world + controller reprocuing the issue)? Thank you.

[https://github.com/cyberbotics/webots/issues/new?template=bug\_report.md](https://github.com/cyberbotics/webots/issues/new?template=bug_report.md)


> Is there a way to exactly turn 90 degrees ? Use a compass ?

`@Ork` yes you can use a compass indeed. Please find also a smiliar question here: [https://stackoverflow.com/questions/59458686/webots-e-puck-turn-90-degrees](https://stackoverflow.com/questions/59458686/webots-e-puck-turn-90-degrees)

##### Rodeknopje 05/11/2020 09:19:59
How can i check if my rotational motor is rotating?

##### Olivier Michel [Cyberbotics] 05/11/2020 09:20:31
Simply select the motor and you should see its wireframe bounding object rotating.


(the children part of the motor actually)

##### Rodeknopje 05/11/2020 09:21:23
sorry i meant, how can you check for it in code

##### David Mansolino [Cyberbotics] 05/11/2020 09:36:39
You can use the PositionSensors device of the joint to get the updated position: [https://cyberbotics.com/doc/reference/positionsensor](https://cyberbotics.com/doc/reference/positionsensor)

##### sinancimen 05/11/2020 09:55:42
Hey David, you helped on the problem I had last week and solved it but, I am facing another problem now. I couldn't understand why hingejoints' axes are acting weird. The parts of the hinge become seperated after some time. Do you have any idea about this? Thank you...
> **Attachment**: [ball\_beam.rar](https://cdn.discordapp.com/attachments/565154703139405824/709342967084744704/ball_beam.rar)

##### David Mansolino [Cyberbotics] 05/11/2020 10:39:41
Hi `@sinancimen` have you tried reducing the time step or playing with the worlfinfo parameters (such as ERP and CFM) ?

##### Aan 05/11/2020 11:01:17
> `@Aan` at the moment Webots doesn't have any microphone device to detect sound sources in a simulation. But it's already in our plan to add it.

> However you could cheat and get the Speaker node (or any placeholder node for the sound source) position using the Supervisor API (for example [https://www.cyberbotics.com/doc/reference/supervisor?tab-language=c++#wb\_supervisor\_node\_get\_position](https://www.cyberbotics.com/doc/reference/supervisor?tab-language=c++#wb_supervisor_node_get_position))

`@Stefania Pedrazzi` 



Thank you

##### Rodeknopje 05/11/2020 11:03:39
> You can use the PositionSensors device of the joint to get the updated position: [https://cyberbotics.com/doc/reference/positionsensor](https://cyberbotics.com/doc/reference/positionsensor)

`@David Mansolino` 

thanks i got it working

##### Point 05/11/2020 11:16:04
is there a sensor that can be used as sound sensor?

##### yash 05/11/2020 11:50:55
How to specify bounding object for LED when it’s children is a point light source .?

##### Olivier Michel [Cyberbotics] 05/11/2020 12:06:44
`@Point`: depending on what you want to achieve, you may use Receiver and Emitter nodes.


`@yash`: I would recommend you to define it arbitrarily as a small Sphere if needed (but this normally not needed).

##### yash 05/11/2020 12:29:52
> `@yash`: I would recommend you to define it arbitrarily as a small Sphere if needed (but this normally not needed).

`@Olivier Michel`   The console displays a warning that mass is invalid because bounding object is not defined !

##### Olivier Michel [Cyberbotics] 05/11/2020 12:31:53
Then you should remove the Physics node from your LED device.

##### yash 05/11/2020 12:32:39
Oh okay

##### Weiyi 05/11/2020 12:59:34
hello, I have make such a track for robots in the form of vrml using other software, but when I import it,  the track is recognized as many Transforms and has no bounding so the robot on the track will drop to the ground. How can I fix it?
%figure
![8728f23200303a06.png](https://cdn.discordapp.com/attachments/565154703139405824/709389237782315048/8728f23200303a06.png)
%end

##### Stefania Pedrazzi [Cyberbotics] 05/11/2020 13:25:41
Hi `@Weiyi`, VRML is a graphical modeling language and doesn't have the notion of bounding object or physical properties, so it is not possible to import VRML models in Webots that already have bounding objects and physics properties set. But you have to set them directly in Webots.

##### Weiyi 05/11/2020 13:30:23
Sorry I' new to webots, should I add bounding object and physical properties in every Transform shown in my screenshot or  rebuild the whole track using webots?

##### Stefania Pedrazzi [Cyberbotics] 05/11/2020 13:32:40
You can add the bounding objects and physical nodes in the imported Transform nodes. Note that static objects doesn't need physical nodes but only bounding objects.

If you are new to Webots I recommend you to look at this Tutorial: [https://www.cyberbotics.com/doc/guide/tutorial-5-compound-solid-and-physics-attributes](https://www.cyberbotics.com/doc/guide/tutorial-5-compound-solid-and-physics-attributes)

##### Weiyi 05/11/2020 13:34:27
Thank you very much for your detailed help!!! I will learn and make it!😀

##### Stefania Pedrazzi [Cyberbotics] 05/11/2020 13:34:43
You're welcome!

##### Ork 05/11/2020 13:36:46
How to convert the getimage function return to a normal image ?

##### David Mansolino [Cyberbotics] 05/11/2020 13:37:00
> How to convert the getimage function return to a normal image ?

`@Ork` in which language?

##### Ork 05/11/2020 13:37:05
python

##### David Mansolino [Cyberbotics] 05/11/2020 13:37:14
And what do you mean by 'normal image' ?

##### Ork 05/11/2020 13:37:27
like png or jpg with color

##### David Mansolino [Cyberbotics] 05/11/2020 13:38:27
This code for example allows you to create a Pillow image and save it:

```Python
    image = camera.getImage()
    pilImage = Image.frombytes('RGBA', (camera.getWidth(), camera.getHeight()), image, 'raw', 'BGRA')
    pilImage.save('my_image.png'))
```

##### Ork 05/11/2020 13:38:44
Thank you

##### David Mansolino [Cyberbotics] 05/11/2020 13:38:48
You're welcome

##### Jeremy Jiang 05/11/2020 14:10:17
Hello, I have built a world in Webots, and there are many objects such as obscles and balls (not robots). I want to create a controller for this world. By this controller, we can get information such as whether the obscles are collided or the positions of different objects all the time. How can I realize this goal? Is it possible to directly build a supervisor node and create the supervisor controller to realize my function?

##### David Mansolino [Cyberbotics] 05/11/2020 14:11:31
Yes the Supervisor is the way to go, from the supervisor controller you can monitor the position of the objects and even move them, create new ones, remove some etc.

##### Jeremy Jiang 05/11/2020 14:14:20
Okay, thank you.

##### Lussfer 05/11/2020 15:03:35
Is there a possible example for indexlineset? Just want to know how I can implement it.


`@David Mansolino`

##### David Mansolino [Cyberbotics] 05/11/2020 15:04:33
Yes, you can find one here: [https://cyberbotics.com/doc/guide/samples-howto#supervisor\_draw\_trail-wbt](https://cyberbotics.com/doc/guide/samples-howto#supervisor_draw_trail-wbt)

##### Estelle 05/11/2020 15:06:54
Hellow, how could I solve this problem?
%figure
![5210a182e31ff8bd.JPG](https://cdn.discordapp.com/attachments/565154703139405824/709421284551032926/5210a182e31ff8bd.JPG)
%end

##### David Mansolino [Cyberbotics] 05/11/2020 15:11:05
Hello, this probably comes from your Makefile or from a bad file extension of your code.

##### Lussfer 05/11/2020 15:11:21
Awesome, thx David!

##### David Mansolino [Cyberbotics] 05/11/2020 15:11:33
You're welcome

##### Estelle 05/11/2020 15:15:34
Thank you~ I will check it.

##### jomell310 05/11/2020 17:21:36
> `@jomell310` you might be interested by this doc: [https://cyberbotics.com/doc/guide/using-numerical-optimization-methods](https://cyberbotics.com/doc/guide/using-numerical-optimization-methods)

`@David Mansolino` Thanks!

##### lojik 05/11/2020 17:34:49
Hello everyone, small question:

- Is it possible that the simulation is faster when we are recording a vidéo? It is the case on one of our computer and we would like to understand what happens. Is there some properties that are disabled durin video recording on webots?



Thank you

##### jomell310 05/11/2020 17:42:02
Hi, sorry to bother, but I'm a bit stuck at the moment:

I'm trying to run the ObstacleAvoidance from robotbenchmark but I'm having trouble "running" the supervisor, I don't really understand how to execute it.

I guess it's a really basic thing but can't figure out how it works.

Thanks in advance!

##### kwy 05/11/2020 23:29:03
hallo, can Robot-window display  3D graphs? it seems not support WebGL, and I just tried to use echarts and highcharts, but neither can do it. I wanna get something like this .
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/709547655616921680/unknown.png)
%end

##### David Mansolino [Cyberbotics] 05/12/2020 05:24:23
> Hello everyone, small question:

> - Is it possible that the simulation is faster when we are recording a vidéo? It is the case on one of our computer and we would like to understand what happens. Is there some properties that are disabled durin video recording on webots?

> 

> Thank you

`@lojik` that should not be possible indeed. Maybe one explanation could be that the resolution of the video is smaller than your regular resolution.


> Hi, sorry to bother, but I'm a bit stuck at the moment:

> I'm trying to run the ObstacleAvoidance from robotbenchmark but I'm having trouble "running" the supervisor, I don't really understand how to execute it.

> I guess it's a really basic thing but can't figure out how it works.

> Thanks in advance!

`@jomell310` as any regular controller process the supervisor is launched by Webots.


> hallo, can Robot-window display  3D graphs? it seems not support WebGL, and I just tried to use echarts and highcharts, but neither can do it. I wanna get something like this .

`@kwy` if I am not wrong our html viewer embedded in Webots is not able to use WebGL.

##### kwy 05/12/2020 05:28:30
thanks. so it cant display 3D Graph? or is there any other method to show 3D Graph?

##### David Mansolino [Cyberbotics] 05/12/2020 05:30:40
> thanks. so it cant display 3D Graph? or is there any other method to show 3D Graph?

`@kwy` it might be possible to open the robot window in your own web browser and therefore use WebGL but this might require some minor modifications of the robot-window mechanism.

##### kwy 05/12/2020 05:37:25
ok , maybe I need to change my 3d graph to 2D..like heat map. thanks for your answer

##### David Mansolino [Cyberbotics] 05/12/2020 05:42:50
You're welcome

##### Olivier Michel [Cyberbotics] 05/12/2020 05:51:45
`@kwy`: it should be possible to draw simple 3D graphs such as yours using a HTML canvas and no WebGL. If you don't want to write your own 3D drawing functions, you can use some js libraries such as phoria.js: [http://www.kevs3d.co.uk/dev/phoria/](http://www.kevs3d.co.uk/dev/phoria/)

##### kwy 05/12/2020 05:52:33
wow Thanks!

##### Olivier Michel [Cyberbotics] 05/12/2020 06:09:50
Maybe this one is even better for what you want to achieve: [https://visjs.org/](https://visjs.org/)


See [https://visjs.github.io/vis-graph3d/examples/](https://visjs.github.io/vis-graph3d/examples/)

##### Jeremy Jiang 05/12/2020 07:50:00
Hello, I want to get the 3D position of the Transform node using the Supervisor controller. However, it seems that the api wb\_supervisor\_node\_get\_position or wb\_supervisor\_field\_get\_sf\_vec3f can only get the relative position of the node. So how can I get the global position of a node?

##### Olivier Michel [Cyberbotics] 05/12/2020 07:51:55
`wb_supervisor_node_get_position` should return the absolute position.


`wb_supervisor_field_get_sf_vec3f` should return the relative position.

##### kwy 05/12/2020 08:04:28
thanks! Olivier. This is much better.



I have another question. I am using heat map to show a covariance array on RobotWindow, but when it’s bigger than 50x50 , it refreshes poorly.(see video)



If I open the robotWindow in my own web browser, will it refresh better ?
> **Attachment**: [kwy.mp4](https://cdn.discordapp.com/attachments/565154703139405824/709677363964936242/kwy.mp4)

##### Olivier Michel [Cyberbotics] 05/12/2020 08:06:05
I don't know... Maybe you should try...

##### kwy 05/12/2020 08:08:11
So can you give me some tips how can I open the robot window on my own browser ?😂

##### Olivier Michel [Cyberbotics] 05/12/2020 08:09:34
You should stream the simulation: See [https://www.cyberbotics.com/doc/guide/web-streaming](https://www.cyberbotics.com/doc/guide/web-streaming)

##### kwy 05/12/2020 08:11:41
thanks!

##### Jeremy Jiang 05/12/2020 08:12:27
Well, thank you for your answer.In fact, maybe I know the reason why I cannot get the global position of the transform node. this model is created in the form of vrml using other software and then  imported as a whole. So when I use the api wb\_supervisor\_node\_get\_position , the result is (0,0,0). In this case, How can I get the realistic global position the transform node?

##### David Mansolino [Cyberbotics] 05/12/2020 08:19:23
Can you compare it from what you get in the 'position' tab of the node editor (bottom part of the scene-tree) ?

##### Jeremy Jiang 05/12/2020 08:26:31

%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/709682909854040115/unknown.png)
%end


Do you mean this? They are the same. (0,0,0)

##### David Mansolino [Cyberbotics] 05/12/2020 08:28:18
Yes exactly. In that case it perfectly make sense to get (0,0,0) from the supervisor too. It seems the problem is more on your hierarchy side.

##### Jeremy Jiang 05/12/2020 08:39:59
Sorry, I don't understand what you mean... The model created using other software is imported as a whole  and all the transform nodes in the model are all (0,0,0). For example, the transform node is exactly the cuboid in this picture. I created a ball on this cuboid, the position of the transform node should be exactly close to the ball. However, the position of the ball is about (0.33, 0.18, 1.68) while the node is (0,0,0).
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/709686300235661322/unknown.png)
%end

##### David Mansolino [Cyberbotics] 05/12/2020 08:43:42
This just means that the points of the indexedFaceSet are not correctly centered around the origin of your node, but the origin of the node is still 0,0,0


It might be possible to correct this in your other software directly (I am usign Blender for example and it is possible).

##### Jeremy Jiang 05/12/2020 09:38:01
Hello


I also want to ask an another question.Is it possible to add an external force to a transform node?

##### David Mansolino [Cyberbotics] 05/12/2020 09:41:58
Not to a transform, but to a Solid node yes, the Supervisor can do this: [https://www.cyberbotics.com/doc/reference/supervisor#wb\_supervisor\_node\_add\_force](https://www.cyberbotics.com/doc/reference/supervisor#wb_supervisor_node_add_force)

##### lojik 05/12/2020 09:51:04
> `@lojik` that should not be possible indeed. Maybe one explanation could be that the resolution of the video is smaller than your regular resolution.

`@David Mansolino`



Thank you 👌, it was also one of my intuitions but was not sure if webots disable something to record videos.

##### Алексей Александрович 05/12/2020 10:30:58
Hello, I am programming robots in the Webots simulator. There is an example of a radar "radar.wbt", it is written in C++, is there an example of programming radar in Python?

##### jomell310 05/12/2020 11:20:46
> `@jomell310` as any regular controller process the supervisor is launched by Webots.

`@David Mansolino` Okay, so I do I need to setup anything? Because right now even if I run the sample project obstacle\_avoidance the simulation doesn't stop after the robot has crossed the line or crashed into something. In the console it says that the supervisor has been started though but It's not doing anything else

##### David Mansolino [Cyberbotics] 05/12/2020 11:39:53
> Hello, I am programming robots in the Webots simulator. There is an example of a radar "radar.wbt", it is written in C++, is there an example of programming radar in Python?

`@Алексей Александрович` the example is written in C indeed, however, the Python radar API is available here and works almost the same way as for the other devices: [https://cyberbotics.com/doc/reference/radar?tab-language=python](https://cyberbotics.com/doc/reference/radar?tab-language=python)


> `@David Mansolino` Okay, so I do I need to setup anything? Because right now even if I run the sample project obstacle\_avoidance the simulation doesn't stop after the robot has crossed the line or crashed into something. In the console it says that the supervisor has been started though but It's not doing anything else

`@jomell310` probably that your supervisor is not detecting the event correctly, have you tried printing something when it is supposed to stop the simulation?

##### jomell310 05/12/2020 12:11:58
> `@jomell310` probably that your supervisor is not detecting the event correctly, have you tried printing something when it is supposed to stop the simulation?

`@David Mansolino` I haven't tried that since I was testing with the sample \sample\robotbenchmark\obstacle\_avoidance to see if it would actually work

##### David Mansolino [Cyberbotics] 05/12/2020 12:15:14
Oh ok, this case is a bit special, because it is not directly the supervisor that is stopping the simulation but the robobenchmark server that is sending the command


However, if you open the supervisor robot-window you will see that the metric stops when the robot touches an object

##### jomell310 05/12/2020 12:20:50
How can I open that window? Can't find it. I double clicked on the robot and I see the "Generic Robot Window [Thymio II]" but nothing happens when it crosses the line or crashes or the time expires

##### David Mansolino [Cyberbotics] 05/12/2020 12:22:08
You have to right click on the supevisor (i.e. ``ObstacleAvoidanceBenchmark``) node in the scene tree.

##### Rugnir 05/12/2020 12:24:31
Hi all. I have a fluid I am rendering with a PBRA appearance (with partial transparency), and it looks great from outside of the water, but when the camera is submerged, the water dissapears from view entirely. Is there any way to fix this properly?

##### jomell310 05/12/2020 12:25:15
> You have to right click on the supevisor (i.e. ``ObstacleAvoidanceBenchmark``) node in the scene tree.

`@David Mansolino` Okay found it in the Metric tab. I guess if I modify the supervisor code I could actually get the simulation to stop? I'm trying to basically get the score so I can tune some parameters

##### AyresAlmada 05/12/2020 13:58:54
hi there. i want to use the distance sensor to let a robot find an arch and go through it. but the wb\_distance\_sensor\_get\_value always return the same distance value 1000. Any suggestions about how to solve this problem?

##### David Mansolino [Cyberbotics] 05/12/2020 14:01:33
> Hi all. I have a fluid I am rendering with a PBRA appearance (with partial transparency), and it looks great from outside of the water, but when the camera is submerged, the water dissapears from view entirely. Is there any way to fix this properly?

`@Rugnir` unfortunately object are visible only when you are outside of them so what you did is the only 'simple solution'. To have a better solution (but more complex to setup) you can once your viewpoint is below the surface of the water add a 'water plane' in front of the viewpoint (you will have to move the plane at each step so that it follows the viewpoint).


> hi there. i want to use the distance sensor to let a robot find an arch and go through it. but the wb\_distance\_sensor\_get\_value always return the same distance value 1000. Any suggestions about how to solve this problem?

`@AyresAlmada` this simply means your robot is not seeing anything. Is the type of your distance sensor 'infra-red'?

##### AyresAlmada 05/12/2020 14:03:33
> `@AyresAlmada` this simply means your robot is not seeing anything. Is the type of your distance sensor 'infra-red'?

`@David Mansolino` the type is sonar

##### David Mansolino [Cyberbotics] 05/12/2020 14:05:35
Ok, then it just means that the obstacle is too far compared to the default range of the distance sensor (which is by default 0.1m).

You can change it from the lookup table of the sensor: [https://cyberbotics.com/doc/reference/distancesensor](https://cyberbotics.com/doc/reference/distancesensor)

##### AyresAlmada 05/12/2020 14:07:09
> Ok, then it just means that the obstacle is too far compared to the default range of the distance sensor (which is by default 0.1m).

> You can change it from the lookup table of the sensor: [https://cyberbotics.com/doc/reference/distancesensor](https://cyberbotics.com/doc/reference/distancesensor)

`@David Mansolino` okay, i will try the lookup table. thanks

##### David Mansolino [Cyberbotics] 05/12/2020 14:08:09
You're welcome

##### jomell310 05/12/2020 14:47:13
> Oh ok, this case is a bit special, because it is not directly the supervisor that is stopping the simulation but the robobenchmark server that is sending the command

`@David Mansolino` Is there a sample World where there is a supervisor that ends the simulation if some event happens?

##### Simon Steinmann [Moderator] 05/12/2020 17:17:20
There is a werid issue with webots, ROS and the ur10e robot



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/709816531961511956/unknown.png)
%end


rviz shows the wrist 2 joint rotated 180°. Or to be more precise, the wrist\_2\_link coordinate frame is rotated around its z-achses (blue).  I have no idea how this error comes to be


My guess would be, that there is a difference between the protos file and  the urdf file provided by universal robot (which get's loaded by the tf publisher, and which rviz uses to display the robot)

##### TheOrangeOne 05/12/2020 19:05:11
Hello! Can anyone explain to me what the return value of `camera.get_orientation` is? It's 4 values, which according to the docs are in radians, but beyond that i'm not sure. Some bits of ROS documentation say it's `X, Y, Z, W` values for quarternions, but using that leads to values jumping all over the place when rotating the object around the axis i'm looking at

##### Lussfer 05/13/2020 01:37:25
Is there a way to convert local coordinate to wgs84 gps coordinate?

##### Deleted User 05/13/2020 02:34:32
Hey guys, just want to ask if anyone knows where an image for a straight line is (for the floor)? I want the youbot to be able to follow a line.
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/709956719119433768/unknown.png)
%end

##### David Mansolino [Cyberbotics] 05/13/2020 05:11:32
> `@David Mansolino` Is there a sample World where there is a supervisor that ends the simulation if some event happens?

`@jomell310` unfortunately not, but you can check this sample simulation using supervisor:

[https://cyberbotics.com/doc/guide/samples-devices#supervisor-wbt](https://cyberbotics.com/doc/guide/samples-devices#supervisor-wbt)

Then to end the simulation you can use the `wb_supervisor_simulation_quit` function: [https://www.cyberbotics.com/doc/reference/supervisor#wb\_supervisor\_simulation\_quit](https://www.cyberbotics.com/doc/reference/supervisor#wb_supervisor_simulation_quit)


> Hey guys, just want to ask if anyone knows where an image for a straight line is (for the floor)? I want the youbot to be able to follow a line.

`@Deleted User` you can easily create one in your favorite image editor (Gimp for example).


> Is there a way to convert local coordinate to wgs84 gps coordinate?

`@Lussfer` you can set the 'WorldInfo.gpsCoordinateSystem' field to 'WGS84' (and specify the 'WorldInfo.gpsReference'): [https://www.cyberbotics.com/doc/reference/worldinfo](https://www.cyberbotics.com/doc/reference/worldinfo)

Here is an example: [https://cyberbotics.com/doc/guide/samples-devices#gps\_lat\_long-wbt](https://cyberbotics.com/doc/guide/samples-devices#gps_lat_long-wbt)


> Hello! Can anyone explain to me what the return value of `camera.get_orientation` is? It's 4 values, which according to the docs are in radians, but beyond that i'm not sure. Some bits of ROS documentation say it's `X, Y, Z, W` values for quarternions, but using that leads to values jumping all over the place when rotating the object around the axis i'm looking at

`@TheOrangeOne` can you be a bit more precise? What do you mean by `camera.get_orientation`, are you using the ROS controller? Or the Supervisor API to get the orientation of a node? Or something else?


> rviz shows the wrist 2 joint rotated 180°. Or to be more precise, the wrist\_2\_link coordinate frame is rotated around its z-achses (blue).  I have no idea how this error comes to be

`@Simon Steinmann` I checked it with the UR5e a few weeks ago and it was working fine, but never checked with the UR10e, is it in the opposite direction for all the angles or is there just one singularity angle? Do you have a simple procedure to reproduce this?

##### Weiyi 05/13/2020 06:56:02
hello, I have imported an object from vrml file and I have added the bounding. When the robot is walking on it, sometimes the simulation is working wrongly so that the robot's foot goes under the surface of the table. This happens randomly, sometimes it works well but suddenly the situation occurs. I wonder how to fix this problem.
%figure
![15893527451.png](https://cdn.discordapp.com/attachments/565154703139405824/710022527803457546/15893527451.png)
%end

##### Olivier Michel [Cyberbotics] 05/13/2020 07:03:02
Hi `@Weiyi` Weiyi. This is probably due to the fact that your bounding object is an IndexedFaceSet. Depending on the resolution of the IndexedFaceSet (size of the triangles), this kind of problem may appear. I would recommend you to replace the IndexedFaceSet with primitives nodes such as a Plane or a series of Boxes which you can arrange inside a Group node that contains Transform nodes containing the Box Shapes, so that you can use as many boxes as you want at different positions.

##### Weiyi 05/13/2020 07:06:29
Thank you  for your help, so is it better to rebuild the table in webots rather than import a vrml file?

##### Olivier Michel [Cyberbotics] 05/13/2020 07:06:47
Yes.

##### Weiyi 05/13/2020 07:08:41
Thank you very much!  By the way, I want to build a table with a hole like the hole in golf, so the ball can fall into it, how should I make it in webots?

##### Olivier Michel [Cyberbotics] 05/13/2020 07:09:32
Can the hole be a rectangle or a square?


Or do you want it circular?

##### Weiyi 05/13/2020 07:10:26
I hope it's a circle


but it seems difficult to make a circle hole... do you have any advice?

##### Olivier Michel [Cyberbotics] 05/13/2020 07:12:18
Yes, you should use a SolidPipe proto: [https://www.cyberbotics.com/doc/guide/object-solids#solidpipe](https://www.cyberbotics.com/doc/guide/object-solids#solidpipe) with large thickness parameter.


That will make a round table with a circular hole at the middle.


Then, you can add boxes around it if you need to have a rectangular table.

##### Weiyi 05/13/2020 07:15:40
OK, I will try it, thank you  very much for your help!!!


Hello, what's the meaning of these points? If I add more points, will the situation I mentioned just now get better?
%figure
![15893547881.png](https://cdn.discordapp.com/attachments/565154703139405824/710030517222899772/15893547881.png)
%end

##### Olivier Michel [Cyberbotics] 05/13/2020 07:29:16
These are the points of your mesh.

##### TheOrangeOne 05/13/2020 07:48:13
> `@TheOrangeOne` can you be a bit more precise? What do you mean by `camera.get_orientation`, are you using the ROS controller? Or the Supervisor API to get the orientation of a node? Or something else?

`@David Mansolino` Sorry, I'm using a regular controller and the Python API. The orientation is coming via the camera recognition API, looking at a solid node.

##### David Mansolino [Cyberbotics] 05/13/2020 07:52:02
Ok, then the orientation is defined as axis angle. Like for the 'rotation' fields in Webots.

##### TheOrangeOne 05/13/2020 07:59:11
But there's 3 axis, and 4 values?

##### Olivier Michel [Cyberbotics] 05/13/2020 08:00:37
[https://en.wikipedia.org/wiki/Axis%E2%80%93angle\_representation](https://en.wikipedia.org/wiki/Axis%E2%80%93angle_representation)

##### TheOrangeOne 05/13/2020 08:14:45
That mentions 3 values?

##### David Mansolino [Cyberbotics] 05/13/2020 08:15:08
3 to define the rotation axis and one for the angle

##### TheOrangeOne 05/13/2020 08:22:09
Is that easily converted so a plain rotation around X,Y,Z etc? Assume I need to do something with the angle to get that?

##### David Mansolino [Cyberbotics] 05/13/2020 08:22:53
Yes of course, I am sure you will find all the required formula on internet, these conversions are pretty standard

##### Olivier Michel [Cyberbotics] 05/13/2020 08:23:13
[https://www.andre-gaschler.com/rotationconverter/](https://www.andre-gaschler.com/rotationconverter/)

##### TheOrangeOne 05/13/2020 08:26:40
Aha, nice! Now to find out how to do that in Python and I'm set!


Thanks!

##### David Mansolino [Cyberbotics] 05/13/2020 08:27:45
In Python you can use the ``Transforms3d`` module: [https://matthew-brett.github.io/transforms3d/](https://matthew-brett.github.io/transforms3d/)

##### TheOrangeOne 05/13/2020 08:29:54
Oooh that's nice! `axangle2euler` looks to be perfect!


I'll try and push most of this to the docs at some point so it's easier to reason about

##### kwy 05/13/2020 09:31:11
Hi, I'm stuck at this problem, i don't know how to stream a Webots Simulation😫
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/710061575511474286/unknown.png)
%end

##### Olivier Michel [Cyberbotics] 05/13/2020 09:40:01
Do you get any message in the Javascript console?

##### kwy 05/13/2020 09:42:11

%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/710064342045032528/unknown.png)
%end

##### Olivier Michel [Cyberbotics] 05/13/2020 09:43:20
It may be because of a local firewall preventing connections to port 1234?

##### kwy 05/13/2020 09:44:17
i need to modify the port?


actually i don't know how to use those command line arguments [https://www.cyberbotics.com/doc/guide/starting-webots#command-line-arguments](https://www.cyberbotics.com/doc/guide/starting-webots#command-line-arguments)

##### Olivier Michel [Cyberbotics] 05/13/2020 09:49:24
No, you probably need to allow this port in your local firewall.

##### kwy 05/13/2020 09:56:57
i directly turn off firewall, but there is no feedback from the streaming viewer now..

##### Olivier Michel [Cyberbotics] 05/13/2020 09:58:08
You mean nothing in the javascript console?

##### kwy 05/13/2020 09:59:29
15 err...
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/710068696047157339/unknown.png)
%end


I only open my webots and this streaming viewer, and what else should i do

##### Olivier Michel [Cyberbotics] 05/13/2020 10:01:07
Are you following the instructions at [https://www.cyberbotics.com/doc/guide/web-streaming?](https://www.cyberbotics.com/doc/guide/web-streaming?)

##### kwy 05/13/2020 10:03:06
actually i don't know how to use those command line,  this step...Start Webots with the streaming server using the --stream option


open -a webots--stream ?

##### Olivier Michel [Cyberbotics] 05/13/2020 10:07:31
`webots --stream="port=1234;monitorActivity"`


But since 1234 is the default port, it should work the same without it: `webots --stream`

##### kwy 05/13/2020 10:11:09
when type  open -a webots --stream="port=1234;monitorActivity",   but the option is unrecognized..   open -a webots --stream either

##### Olivier Michel [Cyberbotics] 05/13/2020 10:11:53
Why do you use "open -a" ?

##### kwy 05/13/2020 10:12:13
but -bash: webots: command not found..

##### Olivier Michel [Cyberbotics] 05/13/2020 10:12:37
Are you Linux or Windows?

##### kwy 05/13/2020 10:12:43
mac

##### Olivier Michel [Cyberbotics] 05/13/2020 10:16:26
OK, you should type /Applications/Webots.app/Contents/MacOS/webots (or create an alias to it).

##### kwy 05/13/2020 10:25:42
just make it open the webots --stream, but it still can't connect with the streaming viewer, Still have the same error


in the javascript console

##### Dobby 05/13/2020 11:37:52
Is it possible to control a robot through html or javascript with an Arduino Esplora in the localhost?
%figure
![esplora-voorkant.png](https://cdn.discordapp.com/attachments/565154703139405824/710093456386555984/esplora-voorkant.png)
%end

##### David Mansolino [Cyberbotics] 05/13/2020 11:38:35
You mean a simulated robot?

##### Dobby 05/13/2020 11:40:56
Yeah! We work together with electrical engineers for our University project and they asked if it is possible to use this physical controller on the robot through a localhost with the use of JS


We allready have a edited version of the thymio2 controller working perfectly and they wondered if they can somehow control it the same way but with a physical controller

##### David Mansolino [Cyberbotics] 05/13/2020 11:55:22
That is indeed possible, but you will have to write a Webots controller that will do the bridge between the simulated robot and the physical controller

##### yash 05/13/2020 12:01:57
My robot (differential drive) weighs 750gm , so according the torque required by each motor can be Calculated from T= umg, where u is the friction between wheels and rectangular arena, m is the mass of the robot , g is acceleration due to gravity.

So can I use this relation T= umg, to set the max torque in device parameters and the friction in contact materials?


Sorry the equation should be  T = r*umg , where r = radius of wheel


Because when I set the values calculated from above , it doesn’t work !

##### David Mansolino [Cyberbotics] 05/13/2020 12:07:56
What do you mean by 'it doesn't work', what is the behavior? And what is the desired behavior?

##### yash 05/13/2020 12:08:15
The robot doesn’t move

##### David Mansolino [Cyberbotics] 05/13/2020 12:09:18
Maybe you forget to take something else into account, like for example the wheel joint friction, etc.

##### yash 05/13/2020 12:10:52
One more thing the wheels do rotate


But the robot doesn’t move

##### David Mansolino [Cyberbotics] 05/13/2020 12:19:28
you mean the robot is slipping at the same place?

##### yash 05/13/2020 12:20:11
Yes !

##### David Mansolino [Cyberbotics] 05/13/2020 12:20:56
In that case the coulombFriction is probably too low

##### yash 05/13/2020 12:26:38
That’s what I used the value of friction calculated from the above equation


The thing is I can use that equation right .? If done properly

##### David Mansolino [Cyberbotics] 05/13/2020 12:27:39
Probably yes, but I am not an expert in friction.

##### yash 05/13/2020 12:28:13
Okay , let me have a check again , thank you 👍

##### David Mansolino [Cyberbotics] 05/13/2020 12:28:34
You're welcome, good luck!

##### lojik 05/13/2020 12:32:05
Hello, I take the opportinity that you are on the subject. Do you know where we can find good values for both friction and forceDependentSlip ?



I have a four wheels robot. My expectation is that when I would like to turn on spot using differential wheels it will turn. Then if I put it on a slope it will continues to turn on spot until a certain angle of the slope where it will begin to slide.



Actually, with webots, it begins to slide at a constant speed as soon as there is a slope.

##### jomell310 05/13/2020 12:32:18
> `@jomell310` unfortunately not, but you can check this sample simulation using supervisor:

> [https://cyberbotics.com/doc/guide/samples-devices#supervisor-wbt](https://cyberbotics.com/doc/guide/samples-devices#supervisor-wbt)

> Then to end the simulation you can use the `wb_supervisor_simulation_quit` function: [https://www.cyberbotics.com/doc/reference/supervisor#wb\_supervisor\_simulation\_quit](https://www.cyberbotics.com/doc/reference/supervisor#wb_supervisor_simulation_quit)

`@David Mansolino` Thanks a lot David! Really appreciate it!

##### David Mansolino [Cyberbotics] 05/13/2020 12:38:21
> Hello, I take the opportinity that you are on the subject. Do you know where we can find good values for both friction and forceDependentSlip ?

> 

> I have a four wheels robot. My expectation is that when I would like to turn on spot using differential wheels it will turn. Then if I put it on a slope it will continues to turn on spot until a certain angle of the slope where it will begin to slide.

> 

> Actually, with webots, it begins to slide at a constant speed as soon as there is a slope.

`@lojik` it all depends on your robot, but it doesn't always slide, see for example the 'accelerometer' world, where a differential wheeled robot rotates on a slope: [https://cyberbotics.com/doc/guide/samples-devices#accelerometer-wbt](https://cyberbotics.com/doc/guide/samples-devices#accelerometer-wbt)

##### Dobby 05/13/2020 13:11:13
Another question, we edited the img files in the thymio2 file to `<i>` files and to send the function onmousedown and then send it through the javascript with a function but we get this error as soon as we start it! ^^



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/710116952521048154/unknown.png)
%end

##### Olivier Michel [Cyberbotics] 05/13/2020 13:13:17
It looks like there might be an error in your Javascript code...

##### Dobby 05/13/2020 13:18:57
`@Robin` will send a screenshot now

##### Robin 05/13/2020 13:20:12

%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/710119209903980574/unknown.png)
%end

##### kwy 05/13/2020 13:42:02
`@Olivier Michel`  you're right, thanks!

##### Olivier Michel [Cyberbotics] 05/13/2020 13:45:49
So what was the problem exactly?

##### kwy 05/13/2020 13:59:23
I just rebooted my Mac… and opened a Sample on Webots, it could connect to the streaming viewer successfully. So I thought that was the error in my own JS. 

But just now my own world can also connect to the streaming viewer.

So the problem is … my Mac need to have a break.


😂


And I have found, streaming viewer is not so smooth like webots screen.

So I decide to use its own robot-window.

It can display 3D graph with vis.js
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/710130671724789800/unknown.png)
%end


`@Olivier Michel`  thanks for your help!

##### lojik 05/13/2020 14:44:42
> `@lojik` it all depends on your robot, but it doesn't always slide, see for example the 'accelerometer' world, where a differential wheeled robot rotates on a slope: [https://cyberbotics.com/doc/guide/samples-devices#accelerometer-wbt](https://cyberbotics.com/doc/guide/samples-devices#accelerometer-wbt)

`@David Mansolino` Thank you for your answer, I did not see this example. Unfortunately it does not work anymore if we put the basicTimeStep to 1ms. If I understand it correctly, it means that the physics behind the simulation has some errors due to a too high timeStep.

##### Lussfer 05/13/2020 14:48:00
how to convert wgs84 coordinate to local coordinate without changing coordinate system in world info? like i want to pass since wgs84 coordinate and convert it into local coordinate

##### David Mansolino [Cyberbotics] 05/13/2020 14:50:05
> `@David Mansolino` Thank you for your answer, I did not see this example. Unfortunately it does not work anymore if we put the basicTimeStep to 1ms. If I understand it correctly, it means that the physics behind the simulation has some errors due to a too high timeStep.

`@lojik` yes the basic time step may in rare case influence the calibration of the friction, but even with a smaller time step you should be able to find some parameters that works for your case.


> how to convert wgs84 coordinate to local coordinate without changing coordinate system in world info? like i want to pass since wgs84 coordinate and convert it into local coordinate

`@Lussfer` In that case you have to convert them in your controller, here is the code in Webots that allows to make the conversion, you can probably take inspiration from it: [https://github.com/cyberbotics/webots/blob/565b5aed95a2aadb73bccf2ad733d37893d5edfe/src/webots/nodes/WbGps.cpp#L85-L106](https://github.com/cyberbotics/webots/blob/565b5aed95a2aadb73bccf2ad733d37893d5edfe/src/webots/nodes/WbGps.cpp#L85-L106)

##### Simon Steinmann [Moderator] 05/13/2020 14:52:44
`@Lussfer` Check out this out [https://pastebin.com/k7kf4Ez5](https://pastebin.com/k7kf4Ez5)

##### lojik 05/13/2020 14:53:59
> `@lojik` yes the basic time step may in rare case influence the calibration of the friction, but even with a smaller time step you should be able to find some parameters that works for your case.

`@David Mansolino` Thank you, so I will play with this example to try to find good coefficients.

##### Simon Steinmann [Moderator] 05/13/2020 15:16:59
`@David Mansolino` I already submited a change to the supervisor.md, which includes this code and an explanation on how to get positions of nodes relative to other nodes. Would be nice if that could get added soon to the build 🙂


I already needed to go back to reference it, luckily I still had the pastebinlink

##### Lussfer 05/13/2020 15:17:59
thx David & Luftwaffel

##### David Mansolino [Cyberbotics] 05/13/2020 15:18:48
> `@David Mansolino` I already submited a change to the supervisor.md, which includes this code and an explanation on how to get positions of nodes relative to other nodes. Would be nice if that could get added soon to the build 🙂

`@Simon Steinmann` I am sorry but I probably missed your submission, did you open a Github Pull-Request ?

##### Rajesh Roy 05/13/2020 15:40:49
I want to create a webgl based simulation which could just run like any other webgl application - "No add-ons, just the browser"

After referring to the materials provided on the documentation section, I found a paragraph saying



"

Chrome: launch with the --allow-file-access-from-files option

Firefox:

Open Firefox browser and in the address bar type about:config,

hit Enter button and click on I'll be careful, I promise!.

Search for privacy.file\_unique\_origin or security.fileuri.strict\_origin\_policy and double click on it to change the status from true to false.

"



Link: [https://cyberbotics.com/doc/guide/web-scene](https://cyberbotics.com/doc/guide/web-scene)


I want to know that isn't there any other option available? Since this part "--allow-file-access-from-files: turns your browser very vulnerable to attacks.



Also, do you have any idea of how to create a javascript block of code handling this to turn on and turn off automatically whenever calling the .html webpage?


Has anyone gone through the procedure of exporting your Webots file to a webgl file?

##### Olivier Michel [Cyberbotics] 05/13/2020 15:42:46
The tricks for Chrome and Firefox are only if you want to open the webgl page locally (with a `file://` URL). When you publish it on the web, e.g., with a `http(s)://` URL, you don't need these tricks.

##### Rajesh Roy 05/13/2020 15:55:21
Alright, and how to do that?

Is there any way of doing it using GitHub?

##### Olivier Michel [Cyberbotics] 05/13/2020 15:58:39
You simply need to publish the page anywhere on the web.


Doing that on github pages is an option indeed.


[https://pages.github.com/](https://pages.github.com/)

##### Simon Steinmann [Moderator] 05/13/2020 18:31:27
Is there any downside of running the webots controller in python 2.7 instead of python3?

##### Olivier Michel [Cyberbotics] 05/13/2020 20:53:36
Not to my knowledge.

##### Troy 05/13/2020 23:08:18
`@Olivier Michel` Hi Olivier! When I use the urdf2webots program on github, it reminds me that "Can't determine package root path."


Could you please help on this problem? How can I use this?


when i changed the someRobot.urdf to the path of my file, it reminds me that "math\_utils.py:40: RuntimeWarning: invalid value encountered in true\_divide "


I tried again, it suddenly worked. Sorry to bother you guys.

##### YCSU 05/14/2020 07:11:41
Hi,  I am using the Microsoft Kinect sensor model in Webots. Since I would like to calculate the 3D coordinates (x ,y, z) in meters from the  depth image, I need to know the intrinsic parameter of the camera or at least the FoV angle. I searched the webots document and could not find the information.  I wonder where can I find such information?

##### David Mansolino [Cyberbotics] 05/14/2020 07:15:49
Hi, the horizontal field of view is 1.0 radians, you can read this in the PROTO file: [https://github.com/cyberbotics/webots/blob/master/projects/devices/microsoft/protos/Kinect.proto#L513-L520](https://github.com/cyberbotics/webots/blob/master/projects/devices/microsoft/protos/Kinect.proto#L513-L520)

##### YCSU 05/14/2020 07:17:06
Great! Thank you so much for the information

##### David Mansolino [Cyberbotics] 05/14/2020 07:20:18
You're welcome

##### Rajesh Roy 05/14/2020 08:16:25
What average time does it takes to create an UAV which can be manually controlled? Has anyone build it?

##### David Mansolino [Cyberbotics] 05/14/2020 09:33:48
> What average time does it takes to create an UAV which can be manually controlled? Has anyone build it?

`@Rajesh Roy` it all depends on your UAV, but you can probably take inspiration from an UAV already existing in Webots, such as this one: [https://cyberbotics.com/doc/guide/mavic-2-pro](https://cyberbotics.com/doc/guide/mavic-2-pro)

##### AyresAlmada 05/14/2020 09:56:30
hi there. are there any codes can make the wheels on the rover keep moving at a stable velocity?

##### David Mansolino [Cyberbotics] 05/14/2020 10:01:19
Yes, you simply have to control the motor in speed instead of position: [https://cyberbotics.com/doc/reference/motor#velocity-control](https://cyberbotics.com/doc/reference/motor#velocity-control)

##### AyresAlmada 05/14/2020 10:06:48
yes, i already control it in speed. i just want the rover to avoid the obstacles, but it can only steer at the moment it see the obstacles. it has to keep steering for a while

##### David Mansolino [Cyberbotics] 05/14/2020 10:12:11
Then can't you just steer more?

This is a control question, not really specific to Webots by the way.

##### AyresAlmada 05/14/2020 10:26:43
that's right, i just want it steer more. i wonder whether there are any codes have the similar function like 'delay' in c

##### David Mansolino [Cyberbotics] 05/14/2020 10:31:48
You can just call the `robot.step` function with as argument the time in milisecond you want to wait.

##### AyresAlmada 05/14/2020 10:43:13
got it! thanks

##### nav3549 05/14/2020 11:28:44
my webots clossing after loading world model
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/710453543940784158/unknown.png)
%end


I tried to delete these preferences to solve the problem, but still persists. And the preferences variables are set again after i open webots

##### David Mansolino [Cyberbotics] 05/14/2020 11:41:58
Have you tried the safe mode ([https://cyberbotics.com/doc/guide/starting-webots#on-windows](https://cyberbotics.com/doc/guide/starting-webots#on-windows) )?

Or to open another world file?

##### nav3549 05/14/2020 11:57:18
sorry, i got a mistake i solve the problem !! thanks

##### infinity 05/14/2020 12:14:11
Hlo


I have a problem in webots


I wanna import my track drive robot which is developed in solid works


Anybody have any solution

##### David Mansolino [Cyberbotics] 05/14/2020 12:32:23
`@infinity` [https://www.youtube.com/watch?v=L0FVsFD2rS4&feature=youtu.be](https://www.youtube.com/watch?v=L0FVsFD2rS4&feature=youtu.be)

##### Troy 05/14/2020 15:45:55
Hi! I have a problem. When I used the proto to import the robot, one of my model is correct, but when I import the other one using the same method, webots reminds me that " ERROR: 'D:/Lab/Simulation/5\_13TestURDF/protos/MCrab.proto':19:39: error: Expected node or PROTO name, found '{'. " I both used the urdf2webots program to output the proto file, and put them in two separate wbt file. I don't what wrong...


what should I do with the proto file or the URDF file?

##### David Mansolino [Cyberbotics] 05/15/2020 04:53:04
Hi `@Troy` it seems there is an issue with the generated PROTO, can you share it with us so that we can check what is exactly the problem?

##### Troy 05/15/2020 04:54:08
I'm not sure if I could share this model


but the URDF is correct, I imported this urdf into V-Rep, and it's correct


I'll try the urdf2webots program again tomorrow

##### elkelkmuh 05/15/2020 07:09:20
Hi `@David Mansolino` Can I get the engine information in the data for 0.1 seconds as data?
%figure
![Screenshot_20200515_100629_com.whatsapp.jpg](https://cdn.discordapp.com/attachments/565154703139405824/710750650992164934/Screenshot_20200515_100629_com.whatsapp.jpg)
%end

##### David Mansolino [Cyberbotics] 05/15/2020 07:21:10
The refresh rate of the default robot windows is not configurable, but you can get the data from your controller at the rate you want and save them to a file

##### elkelkmuh 05/15/2020 08:12:32
`@David Mansolino` how can I save them to a file?

##### David Mansolino [Cyberbotics] 05/15/2020 08:17:35
See this question for example: [https://stackoverflow.com/questions/59263637/webots-write-controller-data-to-external-csv-file](https://stackoverflow.com/questions/59263637/webots-write-controller-data-to-external-csv-file)

##### AyresAlmada 05/16/2020 06:10:34
hi there. if i use the supervisor to track the position of a robot. is it possible to send the position information to another controller?

##### brianne.byer 05/16/2020 12:40:16
Is there code available online that directly controls the wheels of the youbot? I mean, instead of what the webot demo uses (keyboard control)? The idea is for the youbot to follow a black, straight line. I'm also curious if I am required to add 4 hingejoints to the body slot of youbot. Thanks in advance, it is greatly appreciated as I am very new to coding.
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/711196323235233802/unknown.png)
%end

##### Mathie20 05/16/2020 13:19:21
On webots i see that the object recognition is giving. X as Z, Y as Y and Z as -X. on webots does rotation match the orientations..
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/711206156856590387/unknown.png)
%end

##### Lussfer 05/17/2020 09:38:58
Does any of the example use pure pursuit path follow algorithm by any chance?

##### Conor 05/17/2020 23:52:53
Hello, I'm working on a room-mapping robot for my final year project and was wondering if it is possible to get the grid that the robot is currently on? I'm trying to do a very basic 2d array as a topological map?


> hi there. if i use the supervisor to track the position of a robot. is it possible to send the position information to another controller?

`@AyresAlmada` Did you ever find if this was possible? At least getting the robots position?


`@AyresAlmada` I know you can use GPS but I'm not entirely sure how I would translate the GPS into an X,Y position that can then go into a 2d array

##### dralorg 05/18/2020 00:31:15
Hi, I'm running the Youbots back wheels but the robot isn't moving. (The top wheels do make the robot move).



I've added the "contactProperties" inside the "WorldInfo" tag in the world file, this is what I've added.



```
  contactProperties [
    ContactProperties {
      material1 "InteriorWheelMat"
      coulombFriction [
        1.8, 0, 0.2
      ]
      frictionRotation -0.9648 0
      bounce 0
      forceDependentSlip [
        10, 0
      ]
    }
    ContactProperties {
      material1 "ExteriorWheelMat"
      coulombFriction [
        1.8, 0, 0.2
      ]
      frictionRotation 0.9648 0
      bounce 0
      forceDependentSlip [
        10, 0
      ]
    }
  ]
```



Why the bottom wheels are not making the robot move?
> **Attachment**: [first\_world.mp4](https://cdn.discordapp.com/attachments/565154703139405824/711737634514272369/first_world.mp4)

##### David Mansolino [Cyberbotics] 05/18/2020 05:39:28
> hi there. if i use the supervisor to track the position of a robot. is it possible to send the position information to another controller?

`@AyresAlmada` yes of course, you can use an emitter to send it from your supervisor and a receiver node to receive it in your other controller.


> Is there code available online that directly controls the wheels of the youbot? I mean, instead of what the webot demo uses (keyboard control)? The idea is for the youbot to follow a black, straight line. I'm also curious if I am required to add 4 hingejoints to the body slot of youbot. Thanks in advance, it is greatly appreciated as I am very new to coding.

`@brianne.byer` sure, here is an example: [https://github.com/cyberbotics/webots/blob/master/projects/robots/kuka/youbot/libraries/youbot\_control/src/base.c](https://github.com/cyberbotics/webots/blob/master/projects/robots/kuka/youbot/libraries/youbot_control/src/base.c)

About the HingeJoint, you can indeed add them directly in the body slot as you would do with a regular chidren field (if not already done I would suggest to read this tutorial: [https://cyberbotics.com/doc/guide/tutorial-6-4-wheels-robot](https://cyberbotics.com/doc/guide/tutorial-6-4-wheels-robot))

##### Jatin Sharma 05/18/2020 06:03:41
Hi, we are trying to simulate a simple robot in Webot with two rear driving wheels. To make it simpler among our interdisciplinary team we decided to choose python as the controller language. We are stuck with simple logic like PWM implementation, most of the sample code are written in C/C++ , shall we change it to C or there is some supporting database out there that we have not looked for. We are struggling with this sort of issue from a couple of weeks. Any suggestions would be highly appreciated. Thanks

##### David Mansolino [Cyberbotics] 05/18/2020 06:08:53
> On webots i see that the object recognition is giving. X as Z, Y as Y and Z as -X. on webots does rotation match the orientations..

`@Mathie20` Yes the orientations match the 'rotation' field.

Abotu the axes inversion, I can't unfortunately reproduce this in the 'camera\_recognition' sample, do you have a specific case to reproduce this? Note that the position is expressed in the camera frame and not i nthe robot or world frame.


> Hi, we are trying to simulate a simple robot in Webot with two rear driving wheels. To make it simpler among our interdisciplinary team we decided to choose python as the controller language. We are stuck with simple logic like PWM implementation, most of the sample code are written in C/C++ , shall we change it to C or there is some supporting database out there that we have not looked for. We are struggling with this sort of issue from a couple of weeks. Any suggestions would be highly appreciated. Thanks

`@Jatin Sharma` hi, in webots you don't need to implement PWM, you can directly control the motors in speed or position, I would recommend to follow our tutorials (available in Python) to get familiar with controller programming in Webots: [https://cyberbotics.com/doc/guide/tutorial-1-your-first-simulation-in-webots?tab-language=python](https://cyberbotics.com/doc/guide/tutorial-1-your-first-simulation-in-webots?tab-language=python)

##### Stefania Pedrazzi [Cyberbotics] 05/18/2020 06:14:29
> Hello, I'm working on a room-mapping robot for my final year project and was wondering if it is possible to get the grid that the robot is currently on? I'm trying to do a very basic 2d array as a topological map?

`@Conor` To get the position  of the robot you can use the GPS device or the Supervisor API. Both methods will give you the global 3D position, to map it to a XY grid map (or XZ using the default Webots coordinate system) you can simply discard the Y value.  I suggest you to check this sample simulation for an example about getting the robot position: [https://www.cyberbotics.com/doc/guide/samples-devices#gps-wbt](https://www.cyberbotics.com/doc/guide/samples-devices#gps-wbt)

##### David Mansolino [Cyberbotics] 05/18/2020 06:17:07
> Does any of the example use pure pursuit path follow algorithm by any chance?

`@Lussfer` here are some path plannign example in Webots: [https://en.wikibooks.org/wiki/Cyberbotics%27\_Robot\_Curriculum/Advanced\_Programming\_Exercises#Path\_planning\_](https://en.wikibooks.org/wiki/Cyberbotics%27_Robot_Curriculum/Advanced_Programming_Exercises#Path_planning_)[Advanced]

Unfortunately none of them is using pure pursuit.


`@dralorg` this might be due to the fact that the center of mass of the robot is not centered but rather to the front.

##### w3. eydi 05/18/2020 06:40:19
Good morning `@David Mansolino`;



I was going to create an issue in Github, but since I need to upload pictures, I am writing here.



I take error : Cannot load texture and Unsupported image format.



I switched to Linux. Authority problem ?



I'm using Linux Debian9 - Pardus 17.5


and error message but simulation is working !
%figure
![DeepinEkranGoruntusu_20200516234207.png](https://cdn.discordapp.com/attachments/565154703139405824/711830697127575612/DeepinEkranGoruntusu_20200516234207.png)
%end

##### elkelkmuh 05/18/2020 06:41:41
Hi `@David Mansolino` I want to do stair climbing work with Op2 with python. When I use the    gaitManager.setYAmplitude  command, the foot does not rise as usual.  The robot is falling.  What's your advice?

##### David Mansolino [Cyberbotics] 05/18/2020 06:42:28
HI `@w3. eydi`, may I ask you to try with a nightly version of R2020a-revision2 available here, the unsuported image bug should be fixed with this version (let us know if it is not the case): [https://github.com/cyberbotics/webots/releases](https://github.com/cyberbotics/webots/releases)

##### w3. eydi 05/18/2020 06:42:31
`@David Mansolino`  I received this error message when I used it with optirun.
%figure
![DeepinEkranGoruntusu_20200516234439.png](https://cdn.discordapp.com/attachments/565154703139405824/711831066775912455/DeepinEkranGoruntusu_20200516234439.png)
%end

##### David Mansolino [Cyberbotics] 05/18/2020 06:43:31
> Hi `@David Mansolino` I want to do stair climbing work with Op2 with python. When I use the    gaitManager.setYAmplitude  command, the foot does not rise as usual.  The robot is falling.  What's your advice?

`@elkelkmuh` the gait algorithm of the darwin-op is not maid to climb stairs, unfortunately you will have to write your own gait algorithm if you want to climb stairs.

##### w3. eydi 05/18/2020 06:53:04
As I understand it, there is a stable version in the only repository. I will download it manually and install it again. I will give you feedback if I get an error. If the problem is not resolved, I will continue to use it on Windows, thank you `@David Mansolino` .

##### elkelkmuh 05/18/2020 06:58:17
`@David Mansolino`  Which commands should I use?

For example: self.getMotor('LegUpperL').setPosition(1.0) 

            self.getMotor('LegLowerL').setPosition(-1.0)

            self.getMotor('AnkleL').setPosition(-0.4)

##### David Mansolino [Cyberbotics] 05/18/2020 06:58:48
Yes you should controler the motor directly like this indeed.

##### taeyoung 05/18/2020 07:06:57
Hi, I'm testing the use of sliderjoint in webots with differnet values for the timesteps (basictimestep and wb\_robot\_step).

In my simulation the speed is send to the robot controller every 50ms.  I set my basictimestep to 10ms and wb\_robot\_step to 10ms. It works fine.

But when I test my simulation with basictimestep 10ms and wb\_robot\_step 50ms, the slider moves outside(less than minstop), the range i set for it [0,0.15]([minstop,maxstop])

##### elkelkmuh 05/18/2020 07:39:13
`@David Mansolino`  How should I determine the wait between movements?Are there sample gait codes?

##### brianne.byer 05/18/2020 08:36:53
`@David Mansolino` thank you so much!

##### Rodeknopje 05/18/2020 08:47:19
which method do i have to call to get acces to my inertial unit?

##### David Mansolino [Cyberbotics] 05/18/2020 08:49:05
> which method do i have to call to get acces to my inertial unit?

`@Rodeknopje` hi, which language are you using? In any case, it works exactly like for the other sensors, it is based on the sensor name. See for example this tutorial where distance sensors are used: [https://cyberbotics.com/doc/guide/tutorial-4-more-about-controllers#program-a-controller](https://cyberbotics.com/doc/guide/tutorial-4-more-about-controllers#program-a-controller)


`@brianne.byer` you're welcome!

##### Rodeknopje 05/18/2020 08:49:34
im using python

##### David Mansolino [Cyberbotics] 05/18/2020 08:49:53
> `@David Mansolino`  How should I determine the wait between movements?Are there sample gait codes?

`@elkelkmuh` I am sorry, but I am not an expert in gait generation, but I am sure you will fidn a lot of literrature on the subject on internet.


`@Rodeknopje` in that case you should use the `Robot.getInertialUnit` method ([https://cyberbotics.com/doc/reference/robot?tab-language=python#wb\_robot\_get\_device](https://cyberbotics.com/doc/reference/robot?tab-language=python#wb_robot_get_device)).


> Hi, I'm testing the use of sliderjoint in webots with differnet values for the timesteps (basictimestep and wb\_robot\_step).

> In my simulation the speed is send to the robot controller every 50ms.  I set my basictimestep to 10ms and wb\_robot\_step to 10ms. It works fine.

> But when I test my simulation with basictimestep 10ms and wb\_robot\_step 50ms, the slider moves outside(less than minstop), the range i set for it [0,0.15] ([minstop,maxstop])

`@taeyoung` have you tried using the min/maxPosition instead?

##### Rodeknopje 05/18/2020 08:51:58
`@David Mansolino` Thanks

##### taeyoung 05/18/2020 11:29:25
It doesn't work...

##### yash 05/18/2020 13:24:21
On what basis should I select whether to use controller or supervisor programming? for ex=position of a robot can be obtained through both controller as well as supervisor programming. So which to choose to programme the robot?

##### David Mansolino [Cyberbotics] 05/18/2020 13:32:04
It all dends what you want to do, but usually if you can do it only using the robot api it is better to use only the robot api.

##### yash 05/18/2020 13:36:36
okay , so some functionalities that are not available using Robot API, then only may be I should go for supervisor programming?

##### David Mansolino [Cyberbotics] 05/18/2020 13:36:48
yes exactly

##### yash 05/18/2020 13:37:40
alright, thank you!👍

##### David Mansolino [Cyberbotics] 05/18/2020 13:37:53
You're welcome

##### Conor 05/18/2020 15:28:41
`@David Mansolino`  Thank you David, also is it possible to get the number of tiles programmatically?

##### Stefania Pedrazzi [Cyberbotics] 05/18/2020 15:54:50
what do you mean with tiles?

##### Conor 05/18/2020 15:59:47

%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/711971307176067192/unknown.png)
%end


You can set the size of the tiles for the floor. So I was wondering if it is possible to programmatically get the number of tiles or the size of the floor?

##### Stefania Pedrazzi [Cyberbotics] 05/18/2020 16:03:59
Yes. You can compute it. For example if you are using the Rectangle arena, you can use the Supervisor API to get the `floorSize` and `floorTileSize`. Dividing the size by the tile size you get the number of tiles. [https://www.cyberbotics.com/doc/guide/object-floors#rectanglearena](https://www.cyberbotics.com/doc/guide/object-floors#rectanglearena)

##### Conor 05/18/2020 16:04:34
Thank you!


That is perfect!

##### cakar 05/18/2020 16:05:04
hello i got  a question  i was following a tutorial and put controlller code to the robot in python but after that it didnt let me build it , anything i am missing?

##### Conor 05/18/2020 16:05:39
Do you have Python installed?

##### cakar 05/18/2020 16:05:46
yes 3.7

##### Conor 05/18/2020 16:05:51
Go to the command prompt and type in "Python"


to check if it's in your path

##### Stefania Pedrazzi [Cyberbotics] 05/18/2020 16:06:08
Hi `@cakar`, python code cannot be built it is enough to save the file to apply the modifications

##### cakar 05/18/2020 16:07:11
ok thank you

##### Conor 05/18/2020 16:10:02
`@cakar` Is it working now?

##### cakar 05/18/2020 16:12:09

%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/711974420377239563/unknown.png)
%end


couldnt work it out

##### Conor 05/18/2020 16:13:15
what happens when you open the command prompt and type 'Python'?


do you get the following output



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/711974782903648276/unknown.png)
%end


`@cakar`

##### cakar 05/18/2020 16:19:25

%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/711976247881891870/unknown.png)
%end

##### Conor 05/18/2020 16:19:40
Your problem is that you are using 3.8.1


Uninstall it


then install 3.7.7

##### cakar 05/18/2020 16:20:05
oh ok ty

##### Conor 05/18/2020 16:20:10
You are welcome


make sure that when you install 3.7.7 you tick the box which adds it to yur PATH

##### cakar 05/18/2020 16:35:10
thank you again its all working good now

##### Conor 05/18/2020 16:35:33
You are welcome, enjoy.

##### iagsav 05/18/2020 17:10:45
Hello! I modeled the ElcBot robot in Webots ([https://tinyroboticsteam.github.io/ElcBot/](https://tinyroboticsteam.github.io/ElcBot/)), the source codes are located here: [https://github.com/Ronin52/WeBots\_graduation\_project](https://github.com/Ronin52/WeBots_graduation_project). During testing, it turned out that when the robot stands still (does not move), it twitches. The wheel sinks into the floor. A video of how it works was posted on the link to instagram: [https://www.instagram.com/p/CAVkbXNDKti/?utm\_source=ig\_web\_copy\_link](https://www.instagram.com/p/CAVkbXNDKti/?utm_source=ig_web_copy_link). Everything is fine while the robot is moving. Please tell me what this may be related to? I also get this warning: "WARNING: The current physics step could not be calculated correctly. Your world may be too complex. If this problem persists, try simplifying your bounding object(s), reducing the number of joints, or reducing WorldInfo.basicTimeStep"


Changing the WorldInfo.basicTimeStep parameter did not improve the result

##### Conor 05/18/2020 18:27:40
Anyone know if it's possible to use robot AND supervisor functions in the same controller or do you need to choose between the two?

##### dralorg 05/18/2020 19:09:39
> `@dralorg` this might be due to the fact that the center of mass of the robot is not centered but rather to the front.

`@David Mansolino` Omg, that sounds like a real world thing, I was expecting something simulator-related. Thanks!

##### Olivier Michel [Cyberbotics] 05/18/2020 19:17:43
`@Conor`: you can use both robot and supervisor API functions in a robot controller which has the `Robot.supervisor` flag set to `TRUE`.

##### Conor 05/18/2020 19:17:58
Thank you!


I assume it's a single line?


Robot.supervisor = TRUE?

##### Olivier Michel [Cyberbotics] 05/18/2020 20:11:04
Yes, but in the world file (.wbt), not in the controller program.


(and there is no equal sign)


```
Robot {
  [ ... ]
  supervisor TRUE
}
```


See [https://www.cyberbotics.com/doc/reference/robot](https://www.cyberbotics.com/doc/reference/robot)

##### Conor 05/18/2020 20:55:06
Done, thank you.

##### Musaab 05/18/2020 21:06:42
Hey hi How do I load PROTO file in webots

##### davisUndergrad 05/18/2020 23:35:42
Hello, I am having trouble using the Robot.getTime function. When trying to store the time (time = robot.getTime), the function is not returning the time. Instead the variable 'time' above contains the method object. Any suggestions?

##### AyresAlmada 05/19/2020 04:01:07
hi there. i want to build a bridge in Webots, but have no idea about use which nodes. Any suggestions?

##### brianne.byer 05/19/2020 04:43:01
For some reason my project works on macOS but not on windows? Is it something to do with the Makefile?
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/712163378860130404/unknown.png)
%end

##### David Mansolino [Cyberbotics] 05/19/2020 05:01:50
`@iagsav` you may have to tweak the erp and cfm parametrs of your Worldinfo node. Make also sure that the anchor of your HingeJoint are located at the center of the wheels


`@dralorg` Webots is indeed very realistic 😉


> Hey hi How do I load PROTO file in webots

`@Musaab` like any regular node, you can simply use the add node dialog window.


> Hello, I am having trouble using the Robot.getTime function. When trying to store the time (time = robot.getTime), the function is not returning the time. Instead the variable 'time' above contains the method object. Any suggestions?

`@davisUndergrad` this is because it is a function you have to use it like this:

```
time = robot.getTime()
```


> hi there. i want to build a bridge in Webots, but have no idea about use which nodes. Any suggestions?

`@AyresAlmada` here is a tutorial showing how to build new objects:

[https://cyberbotics.com/doc/guide/tutorial-5-compound-solid-and-physics-attributes](https://cyberbotics.com/doc/guide/tutorial-5-compound-solid-and-physics-attributes)

Since your bridge will be a static object, you should not put any 'Physics' node.

Note also that this world contains some bridges: [https://cyberbotics.com/doc/automobile/highway](https://cyberbotics.com/doc/automobile/highway)


> For some reason my project works on macOS but not on windows? Is it something to do with the Makefile?

`@brianne.byer` what is not working on Windows? Do you have compilation errors? From the picture you sent we don't see any issue.

##### brianne.byer 05/19/2020 05:12:39
`@David Mansolino` it keeps crashing
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/712170839059202068/unknown.png)
%end

##### David Mansolino [Cyberbotics] 05/19/2020 05:21:34
Ok, that's probably an issue rather on your controller code, make sure for example that all the variables are initialised.

You will also find some documentation about how to use a debugger with your controller here: [https://cyberbotics.com/doc/guide/debugging-c-cpp-controllers](https://cyberbotics.com/doc/guide/debugging-c-cpp-controllers)

##### Deleted User 05/19/2020 05:21:57
Thanks David, I will look into that

##### Luiz Felipe 05/19/2020 05:27:19
Hello `@David Mansolino`, I am trying to follow the troubleshooting page: [https://cyberbotics.com/doc/reference/troubleshooting](https://cyberbotics.com/doc/reference/troubleshooting) as my webots is turning off on average every 30 minutes running my world on ubuntu and I want to make sure the problem is not on the physics plugin. But when i try to run the gdb following the instructions on the page i get the error: "No executable file specified". I am using gdb 7.11.1 configured as "x86\_64-linux-gnu".

##### David Mansolino [Cyberbotics] 05/19/2020 05:51:52
Which command exactly are you using to start gdb ?


(and attach webots)

##### Luiz Felipe 05/19/2020 06:01:10
If I run 'ls -la' the name of the executable is 'webots'. I tried to start gdb with 'gdb ./webots', 'gdb ./webots-bin'... I also tried to use 'file' inside the gdb to change the command but got the same error.


I checked, it exists a 'webots' executable in /usr/local/webots folder and a 'webots-bin' in the /usr/local/webots/bin folder. Also correcting the libraries path to /usr/local/webots/lib/webots and running 'gdb ./webots-bin' again from my /bin folder it works. It shows the ERROR: Webots has not been started regularly. Please start Webots from its launcher.


but works. I think the path in the [https://cyberbotics.com/doc/reference/troubleshooting](https://cyberbotics.com/doc/reference/troubleshooting) troubleshooting page leads to the executable launcher?

##### David Mansolino [Cyberbotics] 05/19/2020 06:33:24
The page says to start `gdb ./webots-bin` which is the executable and not the launcher (`webots` is the launcher).

About the `ERROR: Webots has not been started regularly. Please start Webots from its launcher.` you can indeed ignore it, this is normal when debugging.

##### Luiz Felipe 05/19/2020 06:35:39
yups. The path /usr/local/webots leads to the launcher what can be misleading. The correct paths in my environment were /usr/local/webots/bin and /usr/local/webots/lib/webots. Thanks!!

##### David Mansolino [Cyberbotics] 05/19/2020 06:41:37
you're right, let me fix this!


This is probably more correct, right?

```sh
$ cd /usr/local/webots/bin
$ export LD_LIBRARY_PATH=/usr/local/webots/lib/webots:$LD_LIBRARY_PATH
$ gdb ./webots-bin
(gdb) run
```

##### Luiz Felipe 05/19/2020 06:42:45
yups! at least in my ubuntu environment it is.

##### David Mansolino [Cyberbotics] 05/19/2020 06:44:01
Perfect, I am fixing this in the doc right now, thank you for the feedback.

##### iagsav 05/19/2020 06:52:01
> `@iagsav` you may have to tweak the erp and cfm parametrs of your Worldinfo node. Make also sure that the anchor of your HingeJoint are located at the center of the wheels

`@David Mansolino` Thank you!

##### Luiz Felipe 05/19/2020 07:01:39
`@David Mansolino` my GDB backtrace is leading me somewhere in the /usr/local/webots/lib/webots/libode.so


the end of my run command
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/712198807974051871/unknown.png)
%end


and the backtrace
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/712198930959433759/unknown.png)
%end

##### Olivier Michel [Cyberbotics] 05/19/2020 07:12:06
`@Luiz Felipe`: it could be that your simulation is reaching edge conditions for ODE, like very large speeds, deep collisions, unstabilities, etc. Do you get any warning in the Webots console before the crash?

##### Luiz Felipe 05/19/2020 07:15:56
`@Olivier Michel`  Hi Olivier! Its highly likely that is what is happening in the simulation (large speeds, deep collisions, unstabilities). The GDB freezed webots right before crashing and I did not observed any warning in the console. Usually the 'WARNING: The current physics step could not be computed correctly. Your world may be too complex. If this problem persists, try simplifying your bounding object(s), reducing the number of joints, or reducing WorldInfo.basicTimeStep.' happens during my simulation.

##### Olivier Michel [Cyberbotics] 05/19/2020 07:17:52
So, you should try to follow the advice given by Webots 😉

##### Luiz Felipe 05/19/2020 07:18:33
😄

##### Musaab 05/19/2020 07:55:26
> `@Musaab` like any regular node, you can simply use the add node dialog window.

`@David Mansolino` Thanx even with .proto file?

##### David Mansolino [Cyberbotics] 05/19/2020 08:00:54
Yes 🙂

##### chungshan 05/19/2020 08:22:16
Hello, I'm using ur5e to pick and place experiment. But sometimes the object will be stuck with gripper. Why?
%figure
![ur5_pickup_stuck.png](https://cdn.discordapp.com/attachments/565154703139405824/712218557680713768/ur5_pickup_stuck.png)
%end


Besides, the yellow box's boundingObject and physics are all set

##### David Mansolino [Cyberbotics] 05/19/2020 08:31:32
Have you tried the following:

  - Reduce the world time step?

  - Control the gripper in torque instead of position?

##### Professor Felix 05/19/2020 09:14:19

%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/712231657855254558/unknown.png)
%end


so I've been having this problem lately where when I launch a controller Webots will say that there are no external robot receivers, but as you can see on the side menu I do have a receiver. Anyone have any ideas as to what is going on

##### Olivier Michel [Cyberbotics] 05/19/2020 09:21:24
I seems some of your controllers are crashing. You should probably fix this first.

##### Mathie20 05/19/2020 12:06:49
what objects can the webots object recognition find? since i see it only finds some objects on webots

##### David Mansolino [Cyberbotics] 05/19/2020 12:10:39
It can recognised any Solid node whose `recognitionColors` field is not empty (this field is empty by default): [https://cyberbotics.com/doc/reference/solid](https://cyberbotics.com/doc/reference/solid)

##### kwy 05/19/2020 14:32:39
Hi, can Webots record the Robot-Window?

##### David Mansolino [Cyberbotics] 05/19/2020 15:00:26
No, this not supported yet, but it is of course possible to improve the robot window to support recording.

##### kwy 05/19/2020 15:02:43
thanks

##### PurplePi 05/19/2020 15:07:52
Hello, I'm trying to do Multi agent Deep reinforcement learning. The algorithm I want to use is the MADDPG, where all the Critics get the partial observation of all the other agents. Is there an way to share  LIDAR observations and velocities between external controllers (without emitter/receiver) ? Thank you.

##### David Mansolino [Cyberbotics] 05/19/2020 15:23:01
Since controller are regular processes, if you don't want to use emitter/receiver, you can implement your inter-process communication mechanism (TCP, UDP, shared memory, pipes, etc.).

##### jomell310 05/19/2020 15:26:36
Hi, I'm having trouble with resetting the simulation from the supervisor, for some reason the contactPoints of the robot take a long time to reset,


So what happens is that the robot crashes, but my supervisor doesn't know and lets the simulation run

##### David Mansolino [Cyberbotics] 05/19/2020 15:29:14
What do you mean by 'it crashes'? Its controller crashes?


Did you had a look at this doc about using Webots for optimisation methods?

[https://cyberbotics.com/doc/guide/using-numerical-optimization-methods](https://cyberbotics.com/doc/guide/using-numerical-optimization-methods)

##### PurplePi 05/19/2020 15:35:37
Thank you

##### David Mansolino [Cyberbotics] 05/19/2020 15:35:53
You're welcome

##### jomell310 05/19/2020 15:47:00
> Did you had a look at this doc about using Webots for optimisation methods?

> [https://cyberbotics.com/doc/guide/using-numerical-optimization-methods](https://cyberbotics.com/doc/guide/using-numerical-optimization-methods)

`@David Mansolino`  Yes and we looked at the sample, genetic sample, we are trying to implement something similar but in python. Right now I'm using this:

robot.simulationResetPhysics()

thymio2.resetPhysics()

thymio2.restartController()

robot.simulationReset()


Where robot is the supervisor and thymio2 the actual robot


I'm trying to do as the link, I want to have the supervisor and robot in the same file so that I don't have to deal with Emitter and Receiver, I wasn't to get that working either. It's showing me an error "Only one instance of the Robot class should be created" but I only create on instance so I don't know where the other one is coming from

##### TheOrangeOne 05/19/2020 18:52:17
Hello! A while back I asked what the recognition orientation is on the camera, and got pointed in the direction of axis angles. I can get values out, but they act strangely. Rotating a cube around the Y axis. Is this just a case of unavoidable gimble lock? I can't imagine it is else the vision API is near useless? Thanks!

##### Ronin52 05/19/2020 18:58:36
Hello everybody! Please help me write a PROTO of a wheel similar to the one in the screenshot. That is, the wheel rotates on an axis, and the axis with the wheel rotates in around the other axis. I couldn't figure out how to do this, so I replaced it with a sphere and a Hinge2Joint, whose anchor is located in the center of the sphere. This gave me the ability to move in two planes, but periodically triggers a warning "WARNING: The current physics step could not be calculated correctly. Your world may be too complex. If this problem persists, try simplifying your bounding object(s), reducing the number of joints, or reducing WorldInfo.basicTimeStep"
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/712378694873907300/unknown.png)
%end

##### nap 05/20/2020 00:18:49
Hi, I'm using a standard Kuka `youbot` robot in my own project, but am getting an unusual warning regarding positioning of HingeJoints as follows:

`WARNING: Youbot (PROTO) > DEF ARM Solid > HingeJoint > Solid > HingeJoint > Solid > HingeJoint > Solid > HingeJoint > Solid > HingeJoint > Solid > SliderJoint > LinearMotor: too low requested position: -2.40623e-11 < 0`

Reason for saying  it's an unusual warning is because I don't get it when I run the demo from the `Webots Tour`.  I'm using the standard proto definition and don't have anything added to the bodySlot In my project.  Can anyone suggest why this is happening?

##### Weiyi 05/20/2020 02:07:39
Hello, I wonder if I can export objects in webots to stl files, obj files, 3D studio files(3ds) or Direct 3D files?

##### AyresAlmada 05/20/2020 03:02:18
> `@AyresAlmada` here is a tutorial showing how to build new objects:

> [https://cyberbotics.com/doc/guide/tutorial-5-compound-solid-and-physics-attributes](https://cyberbotics.com/doc/guide/tutorial-5-compound-solid-and-physics-attributes)

> Since your bridge will be a static object, you should not put any 'Physics' node.

> Note also that this world contains some bridges: [https://cyberbotics.com/doc/automobile/highway](https://cyberbotics.com/doc/automobile/highway)

`@David Mansolino` thanks

##### David Mansolino [Cyberbotics] 05/20/2020 04:53:15
`@jomell310` this is because the Supervisor class inherits from the Robot class, so if you instantiate one Supervisor you should not instantiate any Robot.


`@AyresAlmada` you're welcome


> Hello, I wonder if I can export objects in webots to stl files, obj files, 3D studio files(3ds) or Direct 3D files?

`@Weiyi` no, only to VRML (and then you can find some other software such as Blender for example, that convert VRML to something else), but be careful to the license.


> Hi, I'm using a standard Kuka `youbot` robot in my own project, but am getting an unusual warning regarding positioning of HingeJoints as follows:

> `WARNING: Youbot (PROTO) > DEF ARM Solid > HingeJoint > Solid > HingeJoint > Solid > HingeJoint > Solid > HingeJoint > Solid > HingeJoint > Solid > SliderJoint > LinearMotor: too low requested position: -2.40623e-11 < 0`

> Reason for saying  it's an unusual warning is because I don't get it when I run the demo from the `Webots Tour`.  I'm using the standard proto definition and don't have anything added to the bodySlot In my project.  Can anyone suggest why this is happening?

`@nap` this error simply means that the controllers send a position request that is slightly out of range of the motor.


> Hello everybody! Please help me write a PROTO of a wheel similar to the one in the screenshot. That is, the wheel rotates on an axis, and the axis with the wheel rotates in around the other axis. I couldn't figure out how to do this, so I replaced it with a sphere and a Hinge2Joint, whose anchor is located in the center of the sphere. This gave me the ability to move in two planes, but periodically triggers a warning "WARNING: The current physics step could not be calculated correctly. Your world may be too complex. If this problem persists, try simplifying your bounding object(s), reducing the number of joints, or reducing WorldInfo.basicTimeStep"

`@Ronin52` to simulate this kind of wheel you usually have to use 2 HingeJoint instead of a Hinge2joint, here is an example: 

```
DEF CASTER_WHEEL_FRONT_RIGHT_JOINT HingeJoint {
  jointParameters HingeJointParameters {
    axis 0 0 1
    anchor 0.1695 -0.102 -0.0335
  }
  device [
  ]
  endPoint DEF CASTER_WHEEL_FRONT_RIGHT Solid {
    translation 0.1695 -0.102 -0.0335
    rotation 0 0 1 0
    children [
      DEF SMALL_WHEEL_JOINT HingeJoint {
        jointParameters HingeJointParameters {
          axis 0 1 0
          anchor -0.016 0 -0.04
        }
        device [
        ]
        endPoint DEF SMALL_WHEEL Solid {
        ...
        }
      }
      ...
    ]
  }
}
```

In any case, the warning that you are seeing just means that the physics engine encounter some instabilities, but in most of the cases if you just get a few of them you can ignore them.


> Hello! A while back I asked what the recognition orientation is on the camera, and got pointed in the direction of axis angles. I can get values out, but they act strangely. Rotating a cube around the Y axis. Is this just a case of unavoidable gimble lock? I can't imagine it is else the vision API is near useless? Thanks!

`@TheOrangeOne` I am sorry but can you be a bit more precise, what is the issue when rotating around the Y axis ? Can you provide an example? Using the axis angle you should not get any gimble lock.

##### Jeremy Jiang 05/20/2020 07:09:02
Hello, I create a world in webots and want to  export all objects in the world as VRML model (.wrl file). It is ok! However, when I want to  open the VRML file with other software such as SolidWorks, there will be something wrong but in fact this software can open other VRML files which is not produced from Webots. Could you tell me the reason?
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/712562515409764362/unknown.png)
%end

##### Olivier Michel [Cyberbotics] 05/20/2020 07:14:05
Webots produce VRML97 format (not VRML 1.0). So if you third party software is supporting only VRML 1.0, you may get this error.

##### David Mansolino [Cyberbotics] 05/20/2020 07:51:34
> What is timestep and basictimestep?

That's up to you to let us know which one you are using?

If it falls like that it probably means that the gait parameters are not perfect.

##### elkelkmuh 05/20/2020 07:56:41
> That's up to you to let us know which one you are using?

> If it falls like that it probably means that the gait parameters are not perfect.

  Hi `@David Mansolino`  op2 falls to the ground after taking 3-4 steps. what would you recommend for this?  What is timestep and basictimestep?

##### Stefania Pedrazzi [Cyberbotics] 05/20/2020 08:02:42
`@elkelkmuh` you can find the definition of basic time step and (controller) time step in the glossary: [https://www.cyberbotics.com/doc/reference/glossary](https://www.cyberbotics.com/doc/reference/glossary)

##### elkelkmuh 05/20/2020 08:07:22
What is the best value for timestep and basictimestep? how should I determine?

##### PurplePi 05/20/2020 08:10:32
I think it depends of your accuracy/efficiency trade off.


Hello,  I need all the robots to run an initialization function every time the sim reset. How can robots detect the reset of the simulation ?

##### Stefania Pedrazzi [Cyberbotics] 05/20/2020 08:28:04
`@PurplePi` do you mean pushing the reset button or using the Supervisor API to reset the simulation? Which version of Webots are you using?

##### PurplePi 05/20/2020 08:29:40
I mean using the Supervisor API.

##### Stefania Pedrazzi [Cyberbotics] 05/20/2020 08:30:11
Ok. And on reset, you are not restarting the robots controller, is it right?

##### TheOrangeOne 05/20/2020 08:30:19
`@David Mansolino` Given the following setup and code:

```
o = obj.get_orientation()
x, y, z = transforms3d.euler.axangle2euler(o[:3], o[3])
print(degrees(x), degrees(y), degrees(z))
```

Rotating the cube around its Y axis should give me sane values, but I actually get:

```
0.9383443740233955 45.00008200374141 -2.710677376055925e-06
0.7229730866926742 45.000082000667604 -2.0672197875466448e-06
0.7342896472589717 45.0000995411886 -2.080906395177219e-06
0.749429438851949 60.00013461964227 -2.9573789185743686e-06
0.7645132888899848 60.00013462119542 -2.9684612427260756e-06
0.7791367763655455 75.00016969917081 -5.7539592431410275e-06
0.7932387797503188 75.00016970059033 -5.772235723774259e-06
-178.7728805271608 89.99979521589438 -179.58065165692838
-178.7586346851022 89.9997952144679 -179.5794361035914
-179.16841603962547 74.99976014227151 -179.99999417840684
-179.15628415418655 74.99976014089336 -179.99999416271666
-179.14707736581408 59.99972506329158 -179.99999697220557
-179.13734318759495 59.99972506212261 -179.9999969656765
-179.12869941117953 44.999689984531415 -179.9999978502986
-179.12106445267116 44.99968998356652 -179.99999784666974
-179.1136369364455 44.99968998260577 -179.9999978431371
-179.10357698161877 29.999654904742503 -179.99999823501287
-179.09389726672924 29.999654903412058 -179.99999823124332
-179.08655014906373 15.00019278364224 -179.99999841160027
-179.0775154776643 15.000192782325234 -179.99999840843702
-179.06882369955719 0.00015770296432111142 -179.99999845977928
-179.06046157685424 -14.999877373336558 -179.99999840245312
```

Which screams gimble lock to me
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/712582971823095848/unknown.png)
%end

##### PurplePi 05/20/2020 08:30:45
No I am not restarting the robots controller

##### Stefania Pedrazzi [Cyberbotics] 05/20/2020 08:32:22
> No I am not restarting the robots controller

`@PurplePi` Then you should use a IPC method (like using the Emitter/Receiver nodes) to let the Supervisor controller notify the robot controllers about the reset so that they can execute the initialization function.


The other option to automatically notify them, is to restart the robots controllers.

##### PurplePi 05/20/2020 08:34:36
Yes but if I restart the robots controllers, I have to save the Neural Net 's parameters and reload again.


I will try the emitter/receiver.


Thank you

##### David Mansolino [Cyberbotics] 05/20/2020 08:50:20
> What is the best value for timestep and basictimestep? how should I determine?

`@elkelkmuh` by default 32 is used, but it is recommended to determine it by trial and error, basically try and as long as the simulation is not stable enough you can divide it by two.

##### cakar 05/20/2020 09:00:50
Hello i got a question ,i  added a fluid node but i cant see it  is there anything else that i needed to change in the node ,and if there is fluid in the floor can i clean it with a robot.

##### Stefania Pedrazzi [Cyberbotics] 05/20/2020 09:02:53
Hi `@cakar`, the Fluid node is just a functional node and has no graphical appearance. You have to add the Shape node in the children field to visualize it. Here is a sample simulation: [https://cyberbotics.com/doc/guide/samples-geometries#floating\_geometries-wbt](https://cyberbotics.com/doc/guide/samples-geometries#floating_geometries-wbt)


For simulating fluid on the floor, where the objects are not immersed in it, I don't think that the Fluid node is the best option. I would rather display it on the floor like a graphical effect and then adjust the ContactProperties

##### cakar 05/20/2020 09:06:47
ok thank you i will work on it

##### David Mansolino [Cyberbotics] 05/20/2020 09:09:44
`@TheOrangeOne` unfortunately, Webots highly relies on axis angle representation, and there is no way to go around this.

##### TheOrangeOne 05/20/2020 09:10:38
`@David Mansolino` so there's no way to convert the axis angles into a rotation around a specific axis?

##### Ronin52 05/20/2020 09:12:57
> `@David Mansolino` Thank you so much!

##### David Mansolino [Cyberbotics] 05/20/2020 09:13:05
This might help you to make some tests: [https://www.andre-gaschler.com/rotationconverter/](https://www.andre-gaschler.com/rotationconverter/)


`@Ronin52` You're welcome.

##### Ork 05/20/2020 09:47:35
Is there a way to teleport a robot ?

##### TheOrangeOne 05/20/2020 09:48:25
`@David Mansolino` Thanks! It seems the correct way to do it is to multiply the y value by the angle, and then convert that to degrees. Most of the guides i've seen divide it, which I guess is for something different. Now this returns sane values, thanks!

##### Olivier Michel [Cyberbotics] 05/20/2020 09:50:51
`@Ork`: yes, using a supervisor.

##### Ork 05/20/2020 09:55:30
Thnx

##### elkelkmuh 05/20/2020 10:40:30
`@David Mansolino` thank you

##### David Mansolino [Cyberbotics] 05/20/2020 10:48:11
You're welcome

##### elkelkmuh 05/20/2020 11:47:20
`@David Mansolino` I want to know how many mm the right foot and left foot move. how can i learn this?

##### David Mansolino [Cyberbotics] 05/20/2020 11:53:58
You should use the Supervisor API to get the position of the foot and then compute the difference

##### elkelkmuh 05/20/2020 12:02:12
`@David Mansolino` Is there an example I can examine?

##### David Mansolino [Cyberbotics] 05/20/2020 12:02:57
Unfortunately not

##### elkelkmuh 05/20/2020 12:04:48
`@David Mansolino` supervisor does not work on real robot. what would you recommend in this case?

##### David Mansolino [Cyberbotics] 05/20/2020 12:14:46
Sorry no idea

##### Luiz Felipe 05/20/2020 13:11:06
To use a external controller, as explained here: [https://cyberbotics.com/doc/guide/running-extern-robot-controllers?tab-os=windows&tab-language=python](https://cyberbotics.com/doc/guide/running-extern-robot-controllers?tab-os=windows&tab-language=python) I should add the PYTHONPATH to the environment variables. My end users are not familiar with setting environment variables in linux/windows. Is there a workaround for that? The ${WEBOTS\_HOME}/lib/controller/python3X folder is created after the python version is detected in the user's computer?

##### PurplePi 05/20/2020 13:17:32
Hello, is there a way to have a supervisor not binded to a robot in the simulation. thank you

##### Olivier Michel [Cyberbotics] 05/20/2020 13:19:16
`@PurplePi`: no.


`@Luiz Felipe`: no, you have no other option.

##### PurplePi 05/20/2020 13:20:09
Ok, thank you

##### Luiz Felipe 05/20/2020 13:23:22
> `@Luiz Felipe`: no, you have no other option.

`@Olivier Michel` 👍

##### nap 05/20/2020 14:38:14
> `@nap` this error simply means that the controllers send a position request that is slightly out of range of the motor.

`@David Mansolino` :  Should I get the warning when the controller is set to `void`? (In fact the warning seems to be issued before the world is ready to start executing after a reload.)

Can the warning be fixed by editing the PROTO?

##### David Mansolino [Cyberbotics] 05/20/2020 14:40:14
No you should not get it with the `void` controller.

Did you somehow saved the world after it has run?

##### nap 05/20/2020 14:41:53
> No you should not get it with the `void` controller.

> Did you somehow saved the world after it has run?

`@David Mansolino` : That may be the problem.  I just loaded the original but local copy of the Tower\_of\_Hanoi world and the warning did not show.  (I'll debug it and come back.)


> Did you somehow saved the world after it has run?

> `@David Mansolino` : Yes, that was it.  There were a bunch of `hidden position, hidden linearVelocity, hidden angularVelocity, hidden rotation` nodes saved into the WBT file.  Thanks!!

##### elkelkmuh 05/20/2020 15:33:25
`@David Mansolino`  How can I find the position of the foot? I can find the position of the robot with the supervisor api.  The robot has fsr on its feet.

##### ChapoGuzman 05/20/2020 15:53:51
Hello guys, I designed a robotic arm in solidworks and I import it by v97 but I have problems to implement it as a "robot" I am new with the program and I have already read the tutorials and the user guide, there will be a diagram like this that I can follow to implement my parts in a single "robot" section



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/712694659821862932/unknown.png)
%end


Thanks in advance.

##### kwy 05/21/2020 03:43:24
there seems be a bug from the Lidar Node, and how to fix it ? Thanks !
%figure
![exp_kwy.png](https://cdn.discordapp.com/attachments/565154703139405824/712873155362029588/exp_kwy.png)
%end



> **Attachment**: [exp\_kwy.mp4](https://cdn.discordapp.com/attachments/565154703139405824/712873398539255828/exp_kwy.mp4)

##### cakar 05/21/2020 12:48:14
hi `@kwy` i cant answer your problem but i was interested in your work is your robot following a path ,can you explain how it decides where it goes. thanks in advance

##### kwy 05/21/2020 13:12:58
the algorithm called Dynamic Window Approach 🙂 . and i have found the reason. it's not a Bug, it's that Lidar detects the ground.  just because of inertia, the robot leans forward while decelerating

##### Alfian 05/21/2020 13:20:24
where is I can find the mathematical model of the DJI Mavic 2 Pro Quadrotor? I guess it is use the euler angle, then, I want to change with SO(3) for rotation, thus I can make the Quadrotor to Flip. Thank you.

##### jiang 05/21/2020 14:19:25
hello,the floor in 'RectangleArena' is so soft anf my box always sink in it. How can I make the floor be hard?

##### G1020BS 05/21/2020 21:53:18
Hi, I tried both in java, python and c++ but I can't manage to include opencv2. Any tips on how to include opencv. Preferable in java but any other language will suffice. I allready used the vision controller tutorial/example on the webots github but no luck. I get these kind of errors: " fatal error: opencv2/opencv.hpp: No such file or directory"

##### Troy 05/22/2020 01:12:31
Hi everyone! when I add the display and trying to drawtext with it, when is the text so vague?
%figure
![display.png](https://cdn.discordapp.com/attachments/565154703139405824/713197569844576305/display.png)
%end

##### kzooi 05/22/2020 01:12:55
Hi all, I am experiencing some issues when using the rangeImageGetDepth(image, width, x, y) function. 



I am currently using the Kinect proto node to detect an object through an RBG threshold. Using the x and y coordinates, I am trying to obtain the depth of that object through the rangefinder. The function seems to work fine for one iteration but it immediately crashes in the next loop. Does anyone know how I can fix this?

##### riddlefive 05/22/2020 02:16:41
Hi everyone, urgent problem QAQ, could you tell me how to use(take out) the data like(get\_id,get\_position) when using the CameraRecognitionObject by Python? Thanks a lot.



%figure
![2020-05-22_10.16.33.png](https://cdn.discordapp.com/attachments/565154703139405824/713213827956605039/2020-05-22_10.16.33.png)
%end

##### chungshan 05/22/2020 05:34:07
Hello, I import a vrml file to the webot. It is a bottle created in Solidworks. First, I convert this bottle to Solid node. I set the boundingObject to IndexedFaceSet of this bottle. However, the bottle is floating and it shows "WARNING: The current physics step could not be computed correctly. Your world may be too complex. If this problem persists, try simplifying your bounding object(s), reducing the number of joints, or reducing WorldInfo.basicTimeStep." How can I fix this?
> **Attachment**: [bottle\_floating.mp4](https://cdn.discordapp.com/attachments/565154703139405824/713263404667764766/bottle_floating.mp4)

##### Olivier Michel [Cyberbotics] 05/22/2020 06:30:43
`@ChapoGuzman`: you should proceed step-by-step to create a simple robotics arm, with only one joint at the beginning, then two, etc. Also, you should use simple primitives, like boxes, cylinders before importing 3D shapes from SolidWorks. That will help you understand how Webots models are implemented and you will be able in a later stage to import shapes from SolidWorks.


`@Alfian`: the model is available here: [https://github.com/cyberbotics/webots/blob/master/projects/robots/dji/mavic/protos/Mavic2Pro.proto](https://github.com/cyberbotics/webots/blob/master/projects/robots/dji/mavic/protos/Mavic2Pro.proto)


`@jiang`: this floor is not "soft". The softness you seems to observe is due to the WorldInfo ([https://www.cyberbotics.com/doc/reference/worldinfo](https://www.cyberbotics.com/doc/reference/worldinfo)) parameters. See [https://cyberbotics.com/doc/guide/modeling#my-robot-sinks-into-the-ground-how-to-remove-this-effect](https://cyberbotics.com/doc/guide/modeling#my-robot-sinks-into-the-ground-how-to-remove-this-effect) for a solution to this problem.


`@G1020BS`: This world file [https://github.com/cyberbotics/webots/blob/master/projects/samples/howto/worlds/vision.wbt](https://github.com/cyberbotics/webots/blob/master/projects/samples/howto/worlds/vision.wbt) is a demo of using OpenCV with a Webots controller. The controller itself and Makefile are located in [https://github.com/cyberbotics/webots/tree/master/projects/samples/howto/controllers/vision](https://github.com/cyberbotics/webots/tree/master/projects/samples/howto/controllers/vision). This should help you.


`@Troy`: you should increase the resolution of your Display device (width and height).


`@kzooi`: is it your controller crashing or Webots? If Webots, please post a bug report on GitHub with all the information allowing us to reproduce the crash.


`@riddlefive`: Please share a sample source code on your GitHub issue showing the problem.


`@chungshan`: You should avoid using complex meshes as bounding objects as they generate instabilities due to their complexity. Instead, you should create a composite bounding object made up of a Group node containing several Transform nodes. Each Transform should contain a translation, rotation and a children which should be a simple Shape (like a Sphere, a Capsule, a Box or a Cylinder).


See for example: [https://cyberbotics.com/doc/guide/tutorial-5-compound-solid-and-physics-attributes#compound-solid](https://cyberbotics.com/doc/guide/tutorial-5-compound-solid-and-physics-attributes#compound-solid)

##### kzooi 05/22/2020 07:18:51
`@Olivier Michel`: The controller.

##### yash 05/22/2020 07:26:59
I want to track the position of the robot in the environment. I am using odometry for this purpose. So I want to produce a graph of the robot path . How can this graph be plotted .?

##### Olivier Michel [Cyberbotics] 05/22/2020 07:27:40
Then, you should debug your controller to understand where and why it crashes. You can use printf (and start Webots with the --stderr --stdout options) or use gdb: see [https://cyberbotics.com/doc/guide/debugging-c-cpp-controllers](https://cyberbotics.com/doc/guide/debugging-c-cpp-controllers)


`@yash`: you can use a robot window to plot your graph.


See example  in `WEBOTS_HOME/projects/samples/howto/worlds/custom_html_robot_window.wbt`.


Then, you will have to use a HTML canvas or a js library.

##### yash 05/22/2020 07:34:31
Alright , then what about the display node .?

##### Olivier Michel [Cyberbotics] 05/22/2020 07:44:13
Yes, that's another option.


For the robot window, a good js plotting library is vis.js for example ([https://visjs.org](https://visjs.org)).

##### yash 05/22/2020 07:49:45
Okay , let me check it out . Thanks 👍

##### Quantumfox 05/22/2020 09:34:18
hey guys i have a problem i get the following error when i try the vision demo



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/713323856609411072/unknown.png)
%end

##### Olivier Michel [Cyberbotics] 05/22/2020 09:41:36
You simply need to install OpenCV (see the Makefile of the robot controller)

##### Quantumfox 05/22/2020 09:42:49
yes i did


so can you help?

##### Ork 05/22/2020 09:45:42
[http://letmegooglethat.com/?q=Opencv+install+windows+10](http://letmegooglethat.com/?q=Opencv+install+windows+10)

##### Quantumfox 05/22/2020 09:46:15
i already did that


so idk why its not working

##### Olivier Michel [Cyberbotics] 05/22/2020 09:46:23
Then you need to recompile the robot controller.

##### Quantumfox 05/22/2020 09:46:33
with the gearwheel

##### Olivier Michel [Cyberbotics] 05/22/2020 09:46:59
Yes, or by typing make in a MSYS2 console.

##### Quantumfox 05/22/2020 09:47:07
i also did that


so thats why its so strange


i also put the opencv into path variables with 
```
D:\username\Documents\opencv\build\bin
```



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/713329653972205630/unknown.png)
%end

##### Olivier Michel [Cyberbotics] 05/22/2020 09:58:23
Are you sure your controller is using the same version of python as the above?

##### Quantumfox 05/22/2020 10:00:50
yes i guess the controller is using also version 4

\#include <opencv2/core/core.hpp>

\#include <opencv2/imgproc/imgproc.hpp>


when i search tutorials it also shows up like this when using version 4


but the example uses c++

##### Olivier Michel [Cyberbotics] 05/22/2020 10:04:49
And can you compile the example?

##### Quantumfox 05/22/2020 10:05:08
just the error


and a black cam

##### Olivier Michel [Cyberbotics] 05/22/2020 10:19:45
What is the error message?

##### Quantumfox 05/22/2020 10:20:33

%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/713335485996597348/unknown.png)
%end


thats the only error


so i think he cant find opencv

##### Olivier Michel [Cyberbotics] 05/22/2020 10:20:55
That means it doesn't get compiled.

##### Quantumfox 05/22/2020 10:21:19
ok but how to fix it

##### Olivier Michel [Cyberbotics] 05/22/2020 10:21:37
Look into the Makefile to understand why it doesn't find your installation of OpenCV.

##### Quantumfox 05/22/2020 10:22:18
```null :=
space := $(null) $(null)
WEBOTS_HOME_PATH=$(subst $(space),\ ,$(strip $(subst \,/,$(WEBOTS_HOME))))

include $(WEBOTS_HOME_PATH)/resources/Makefile.os.include

USE_C_API = true

# define the opencv installation directory if not set in an environment variable (tested with OpenCV 2.4)
#OPENCV_DIR =

ifneq ($(OPENCV_DIR),)
INCLUDE = -I$(OPENCV_DIR)/include/opencv4
ifeq ($(OSTYPE),windows)
OPENCV_VERSION := $(subst .,,$(shell $(OPENCV_DIR)/bin/opencv_version.exe))
LIBRARIES = -L$(OPENCV_DIR)/lib -lopencv_core$(OPENCV_VERSION) -lopencv_imgproc$(OPENCV_VERSION)
else
LIBRARIES = -L"$(OPENCV_DIR)/lib" -lopencv_core -lopencv_imgproc
endif
# Do not modify the following: this includes Webots global Makefile.include
include $(WEBOTS_HOME_PATH)/resources/Makefile.include
else
release debug profile clean:
    @+echo "# opencv not installed, skipping vision controller."
endif
```

##### Olivier Michel [Cyberbotics] 05/22/2020 10:22:40
You should define the OpenCV installation path in `OPENCV_DIR` environment variable.

##### Quantumfox 05/22/2020 10:22:51
yes i see but already did that


but i delete it so not eveeryone will see my path


`Documents\opencv\build\bin/bin/opencv_version.exe: Command not found`

##### Olivier Michel [Cyberbotics] 05/22/2020 10:24:27
Are you on Windows, Linux or mac OS?


OK, Windows...


OK, it seems your path is wrong...

##### Quantumfox 05/22/2020 10:25:24
yes i guess


changed it to this

##### Olivier Michel [Cyberbotics] 05/22/2020 10:25:34
(there are twice bin)

##### Quantumfox 05/22/2020 10:25:39
`Documents/opencv`

##### Olivier Michel [Cyberbotics] 05/22/2020 10:25:54
It should be an absolute path.

##### Quantumfox 05/22/2020 10:25:58
`Documents/opencv/bin/opencv_version.exe: Command not found`


yeah with c:/username  in front


`D:/username/Documents/opencv`

##### Olivier Michel [Cyberbotics] 05/22/2020 10:27:21
Do you have non-ASCII characters in your username?


(or spaces)

##### Quantumfox 05/22/2020 10:27:51
nope i changes the path i think that part works now


`D:\username\Documents\opencv\build\x64\vc14\`


vision.cpp:29:10: fatal error: opencv2/core/core.hpp: No such file or directory

   29 | #include <opencv2/core/core.hpp>

##### Olivier Michel [Cyberbotics] 05/22/2020 10:29:53
Check the INCLUDE variable from the Makefile (it should point to a folder with the necessary include files).

##### Quantumfox 05/22/2020 10:31:57
oke i will thx


```C:/Users/username/AppData/Local/Programs/Webots/msys64/mingw64/bin/../lib/gcc/x86_64-w64-mingw32/9.2.0/../../../../x86_64-w64-mingw32/bin/ld.exe: cannot find -lopencv_core430
C:/Users/username/AppData/Local/Programs/Webots/msys64/mingw64/bin/../lib/gcc/x86\_64-w64-mingw32/9.2.0/../../../../x86\_64-w64-mingw32/bin/ld.exe: cannot find -lopencv\_imgproc430
```


i now get the following error


i cant find the files the make file wants me to have

##### Olivier Michel [Cyberbotics] 05/22/2020 11:26:23
The libraries path is indicated by the `LIBRARIES` variable of the Makefile...

##### Quantumfox 05/22/2020 11:32:02
yes i know


but the file doesnt exist into the opencv

##### Olivier Michel [Cyberbotics] 05/22/2020 11:32:46
you should have libopencv\_core430.dll somewhere in your opencv installation.


and also libopencv\_core.dll.a to link with gcc


How did you installed / compiled opencv?

##### Quantumfox 05/22/2020 11:34:17
i used the installer from the opencv website

##### Olivier Michel [Cyberbotics] 05/22/2020 11:34:30
In MSYS2, they include these: [https://packages.msys2.org/package/mingw-w64-x86\_64-opencv](https://packages.msys2.org/package/mingw-w64-x86_64-opencv)


Maybe the package misses the gcc/msys2 lib files?

##### Quantumfox 05/22/2020 11:34:56
yeah i think it does

##### Olivier Michel [Cyberbotics] 05/22/2020 11:37:42
So, you should download the same version from here: [http://repo.msys2.org/mingw/x86\_64/](http://repo.msys2.org/mingw/x86_64/)


[http://repo.msys2.org/mingw/x86\_64/mingw-w64-x86\_64-opencv-4.3.0-2-any.pkg.tar.zst](http://repo.msys2.org/mingw/x86_64/mingw-w64-x86_64-opencv-4.3.0-2-any.pkg.tar.zst)

##### Quantumfox 05/22/2020 11:38:30
alright


sorry for more question but idk how to open that tar.zst file

##### Olivier Michel [Cyberbotics] 05/22/2020 11:50:17
[https://stackoverflow.com/questions/45355277/how-can-i-decompress-an-archive-file-having-tar-zst](https://stackoverflow.com/questions/45355277/how-can-i-decompress-an-archive-file-having-tar-zst)

##### Quantumfox 05/22/2020 12:31:03
thx for helping it works now

##### Troy 05/22/2020 14:35:55
`@Olivier Michel` Hi Olivier! Sorry to bother you again. Could you please tell me how to increase the display resolution? I didn't find any functions in manual.

##### Olivier Michel [Cyberbotics] 05/22/2020 14:36:45
It not from the controller, but in the model (world file or proto). You should set Display.width and Display.height.

##### Troy 05/22/2020 14:50:57
finally! Thank you so much! It's just under display node


It's me again...why the numbers are still vague...
%figure
![display.png](https://cdn.discordapp.com/attachments/565154703139405824/713405327487533136/display.png)
%end

##### Olivier Michel [Cyberbotics] 05/22/2020 14:59:23
It looks like the text gets overwritten. You should clear the display before writing new text.


E.g., draw a black filled rectangle.

##### Troy 05/22/2020 15:00:01
ok


It works! I just need to adjust a little bit. Thank you!


Sorry It's me again...


when I added the display, and then tried to record a video, when is the simulation doesn't work



%figure
![simulation_didnt_run.png](https://cdn.discordapp.com/attachments/565154703139405824/713410023027507250/simulation_didnt_run.png)
%end


I clicked on the record button and ran the simulation, but the simulation didn't run


`@Olivier Michel`

##### Olivier Michel [Cyberbotics] 05/22/2020 15:18:49
It probably means that your controller is not calling wb\_robot\_step() with a strictly positive value.

##### Troy 05/22/2020 15:19:41
I wrote that     while (wb\_robot\_step(time\_step) != -1) {   

}

##### Olivier Michel [Cyberbotics] 05/22/2020 15:22:18
You should debug your controller by putting printf with the time\_step value performed.

##### Troy 05/22/2020 15:22:32
ok

##### benjovengo 05/22/2020 20:32:08
Hello, guys!

I'm having a problem with Light Sensor. I am trying to make a line following robot. I followed the Four Wheels Robot and made my platform. Then I added a LightSensor on the bottom of the chassis, with x-axis pointing down.


When I read the values of the sensor, it gives me straight 1000 (independently from what is on the floor).


What am I doing wrong?

##### hrsh12 05/22/2020 21:00:47
Hi everyone, I'm doing project related to steering controllers for Steer-By-Wire system, I'm not able to edit the steering system of Tesla3 or any other model given. Can anyone suggest how can I approach this? like I want to make changes in the steering system of the car.

##### Rajesh Roy 05/23/2020 07:47:42
There used to be some interactive programming guide to Webots right? Some website which uses to let you program under webots player. Can anyone find me the link? I tried.

##### Estelle 05/23/2020 10:09:18
The controller can run successfully on my computer, but in my classmate's computer, it will generate such error and still report this error when it has been recompiled, I want to ask how could I solve this problem?
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/713695046486196304/unknown.png)
%end

##### PowerYdRa 05/23/2020 14:15:07
anyone know python example code how to read distance sensor on e-puck?

##### kwy 05/23/2020 14:25:44
Hello,  can the value Y of rotation keep being 1 instead of -1 ?


\# distance sensors

ps = []

textPS = ["ps0", "ps1", "ps2", "ps3", "ps4", "ps5", "ps6", "ps7"]

for it in range(NB\_DIST\_SENS):

    ps.append(robot.getDistanceSensor(textPS[it]))


for \_ in range(NB\_DIST\_SENS):

        sensor\_values[\_] = ps[\_].getValue()


`@PowerYdRa`


and set initial sensor\_values = [0, 0, 0, 0, 0, 0, 0, 0]


and dot forget to enable it before read it..for i in range(NB\_DIST\_SENS):

        ps[i].enable(TIME\_STEP)

##### PowerYdRa 05/23/2020 15:54:42
ok thanks, will be back here if any issue happen 😄

##### iagsav 05/23/2020 16:59:25
Hi! file radar.wbt shows an excellent example of using radar to detect a target. But when I add an e-puck robot to the scene, the radar "doesn't see" it. How can I make a robot or object visible to radar?

##### Rodeknopje 05/24/2020 21:27:38
when i try to use the saveImage method on the camera my image displays weird vertical lines in the middle, is this normal
%figure
![image.jpg](https://cdn.discordapp.com/attachments/565154703139405824/714228142419607583/image.jpg)
%end


`self.camera.saveImage(self.imagePath,20)`

##### Stefania Pedrazzi [Cyberbotics] 05/25/2020 06:15:49
> Hi! file radar.wbt shows an excellent example of using radar to detect a target. But when I add an e-puck robot to the scene, the radar "doesn't see" it. How can I make a robot or object visible to radar?

`@iagsav` As described in the Radar documentation ([https://www.cyberbotics.com/doc/reference/radar](https://www.cyberbotics.com/doc/reference/radar)) you should set the `radarCrossSection` field of your robot/object (or any Solid nodes that it is part of it) to a value greater than 0 in order to let the radar device detect it. In the `radar.wbt` simulation this is set for the `RADAR_TARGET` Solid in MyBot2, MyBot3, and MyBot4.


> when i try to use the saveImage method on the camera my image displays weird vertical lines in the middle, is this normal

`@Rodeknopje` The format of the saved camera image is BGRA. do you also use this format to open the saved camera image?

##### David Mansolino [Cyberbotics] 05/25/2020 06:28:53
> there seems be a bug from the Lidar Node, and how to fix it ? Thanks !

`@kwy` it looks like your robot slightly tilts itself (maybe when braking for example) and therfore the lidar is tilted too and therefore it see the ground.


`@benjovengo` instead of a light sensors, you probably want to use a distance-sensor (which can somehow sense colors too), here is an example of line following: [https://cyberbotics.com/doc/guide/epuck#e-puck\_line-wbt](https://cyberbotics.com/doc/guide/epuck#e-puck_line-wbt)


> Hi everyone, I'm doing project related to steering controllers for Steer-By-Wire system, I'm not able to edit the steering system of Tesla3 or any other model given. Can anyone suggest how can I approach this? like I want to make changes in the steering system of the car.

`@hrsh12` You can either convert your car node to base node (right click on the node in the scene-tree) and then you will be able to change the structure, either change directly the Car.proto file.


> There used to be some interactive programming guide to Webots right? Some website which uses to let you program under webots player. Can anyone find me the link? I tried.

`@Rajesh Roy` you are probably refeering to Robobenchmark: [https://robotbenchmark.net/](https://robotbenchmark.net/)

##### elkelkmuh 05/25/2020 06:42:36
@David Mansolino  How can I find the position of the foot? I can find the position of the robot with the supervisor api.  The robot has fsr on its feet.

##### David Mansolino [Cyberbotics] 05/25/2020 06:56:29
> The controller can run successfully on my computer, but in my classmate's computer, it will generate such error and still report this error when it has been recompiled, I want to ask how could I solve this problem?

`@Estelle` can you try doing a 'make clean' before recompiling it?


> anyone know python example code how to read distance sensor on e-puck?

`@PowerYdRa` here are some examples: [https://cyberbotics.com/doc/guide/tutorial-4-more-about-controllers?tab-language=python](https://cyberbotics.com/doc/guide/tutorial-4-more-about-controllers?tab-language=python)


`@elkelkmuh` exactly like you are doing with the robot, you have to get the DEF name of a node in the foot slot (such as the FSR for example).

##### Estelle 05/25/2020 07:48:04
> `@Estelle` can you try doing a 'make clean' before recompiling it?

`@David Mansolino` Thanks, I'll have a try.

##### David Mansolino [Cyberbotics] 05/25/2020 07:48:18
You're welcome

##### Estelle 05/25/2020 08:15:05
`@David Mansolino` Sorry, it still doesn't work. Additionally, what makes me confused is that all other contollers can run well on my friend's computer. Only this one report an error.😭

##### David Mansolino [Cyberbotics] 05/25/2020 08:16:47
Maybe it has some problematic dependencies, you should check which dependencies the controller has amd compare the installed version of these dependencies between your and his computer.

##### Estelle 05/25/2020 08:33:31
Ok, thank you~

##### elkelkmuh 05/25/2020 08:49:09
`@David Mansolino` Can I find the position of left and right foot from FSRs?

I tried the "  FSRField =robot.getField('TouchSensor "LFsrFL"')

    FSRField1 =FSRField.getField('translation')  "  command, but it didn't work. how can I do it.

##### David Mansolino [Cyberbotics] 05/25/2020 09:06:44
you can't use `FSRField =robot.getField('TouchSensor "LFsrFL"')`, you should use the getFromDef function:

Somthing such as:

```
FSRNode = robot.getFromDef('LFsrFL')  # the 'LFsrFL' DEF should be defined
postion = FSRNode.getPosition()
```

##### elkelkmuh 05/25/2020 09:25:51
`@David Mansolino`  [Supervisor]   File "Supervisor.py", line 23, in initialization

[Supervisor]     FSRNode = robot.getFromDef('LFsrFL') 

[Supervisor] AttributeError: 'Node' object has no attribute 'getFromDef'

WARNING: 'Supervisor' controller exited with status: 1.



%figure
![IMG-20200525-WA0001.jpg](https://cdn.discordapp.com/attachments/565154703139405824/714410358579920906/IMG-20200525-WA0001.jpg)
%end

##### David Mansolino [Cyberbotics] 05/25/2020 09:32:34
But what is your 'robot' variable? Is it the supervisor or is it a handle to the robot node?

##### elkelkmuh 05/25/2020 09:36:17
it is robot    

robot=self.getFromDef('ROBOT1')

##### David Mansolino [Cyberbotics] 05/25/2020 09:37:01
ok in that case you should use the same for getting the foot node handle:

```
FSRNode = self.getFromDef('LFsrFL')  # the 'LFsrFL' DEF should be defined
postion = FSRNode.getPosition()
```

##### iagsav 05/25/2020 09:39:52
> `@iagsav` As described in the Radar documentation ([https://www.cyberbotics.com/doc/reference/radar](https://www.cyberbotics.com/doc/reference/radar)) you should set the `radarCrossSection` field of your robot/object (or any Solid nodes that it is part of it) to a value greater than 0 in order to let the radar device detect it. In the `radar.wbt` simulation this is set for the `RADAR_TARGET` Solid in MyBot2, MyBot3, and MyBot4.

`@Stefania Pedrazzi` Thank you!

##### elkelkmuh 05/25/2020 15:00:02
`@David Mansolino`  thank you

##### Benjovengo 05/25/2020 16:01:53
`@David Mansolino` Thank you very much!!

##### David Mansolino [Cyberbotics] 05/25/2020 19:30:02
`@elkelkmuh` and `@Benjovengo` you're welcome!

##### Rajesh Roy 05/25/2020 19:44:17
Okay, I ping this one more time.

Is there any hands on programming tutorial with Webots? A long ago I visited a site which had webots player and used to allow to code. Anyone can help me with the link?

##### Darko Lukić [Cyberbotics] 05/25/2020 19:47:39
`@Rajesh Roy` Try this one:

[https://robotbenchmark.net/](https://robotbenchmark.net/)

##### Fikrul Alamsyah 05/25/2020 23:23:05
Hello, I tried to make a stereo camera manually with two cameras and simulate it on a robot. I want to ask, does the focal length on the webot really represent the distance between the center of the lens and its focus? or only represent sharp areas of the result image.

##### David Mansolino [Cyberbotics] 05/26/2020 04:25:22
`@Fikrul Alamsyah` it does indeed represent the sharp areas.

##### elkelkmuh 05/26/2020 07:42:04
Hi `@David Mansolino`  how can I work to robot two second. 

This is inifinitive loop while controller.step(controller.timeStep) != -1:



How can I change 

 while controller.step(controller.timeStep) != -1:

Which command I use instead of it?

##### David Mansolino [Cyberbotics] 05/26/2020 07:56:21
I am sorry but your question is not clear..

##### elkelkmuh 05/26/2020 08:04:13
I want to work my controller just for the seconds such as 1s ,2s, and 3s. I dont wont infinitive loop How can I change the while loop comand

##### David Mansolino [Cyberbotics] 05/26/2020 08:07:54
then you just have to call the controller.step(1000) instead

##### lojik 05/26/2020 08:10:16
Hello everyone,



Is there a way to measure motor consumption on webots? I would like to compute the conversion between torque and speed in my controller and need current and voltage consumption to do that.



Thank you

##### David Mansolino [Cyberbotics] 05/26/2020 08:11:23
Hi `@lojik` current feedback is unfortunately not available yet in Webots. You can only get directly the torque and position feedback.

##### lojik 05/26/2020 08:13:18
Sadly .. but I expected this answer after reading the doc. There is no way to deduce current/voltage from consumptionFactor?

##### David Mansolino [Cyberbotics] 05/26/2020 08:15:16
You might use this factor and the torque feedback to compute it, but it will probably be only an approximation.

##### lojik 05/26/2020 08:17:57
Ok ok, thank you 👌

##### elkelkmuh 05/26/2020 08:29:08
`@David Mansolino` It did not work.  Should it be like this while controller.step(1000) != -1:

      controller.main\_controller();

##### David Mansolino [Cyberbotics] 05/26/2020 08:29:31
something like this yes

##### elkelkmuh 05/26/2020 08:39:29
No, it slow work. I dont want it.  want to see the result of my controller for just two seconds. For example the robot walks continiously. I want to see jor for just two seconds. I want to work for my controller to two seconds.

##### David Mansolino [Cyberbotics] 05/26/2020 08:40:24
then stop it after two seconds...

##### elkelkmuh 05/26/2020 08:51:48
> then stop it after two seconds...

`@David Mansolino`  how?

##### lojik 05/26/2020 10:24:47
You can have a variable like elapsedTime. You increment it with timestep for each basictimestep. And having a main while loop like :



while controller.step() != -1 and elapsedTime <= 2000:

 ...


But it will not completely stop the simulation. It will stop you controller and the behavior of the simulation is unpredictable when it stop itself.

##### elkelkmuh 05/26/2020 11:24:30
@David Mansolino  how can add stop

##### David Mansolino [Cyberbotics] 05/26/2020 11:25:24
You might use the Supervisor API: [https://cyberbotics.com/doc/reference/supervisor#wb\_supervisor\_simulation\_set\_mode](https://cyberbotics.com/doc/reference/supervisor#wb_supervisor_simulation_set_mode)

##### AngelAyala 05/26/2020 23:51:26
Hi, anyone knows why when I capture the camera node image, the simulation go slow down.

I'm using python, with the camera.getImageArray(), but when run the script without the method, runs okHi, anyone knows why when I capture the camera node image, the simulation go slow down.

I'm using python, with the camera.getImageArray(), but when run the script without the method, runs ok

##### Clara Cardoso Ferreira 05/27/2020 00:01:30
I am thinking about doing an ML CV project in Webots and I was wondering if it is possible. Here is the background: I want to detect shadows of hills and explore the terrain. I would run the simulation until the robot gets stuck on the hill. How would I keep track of how long it took for the robot to get stuck if I just want it to record a lot of data automatically?

Also, are neuromorphic sensors available in Webots/


?

##### AngelAyala 05/27/2020 00:49:29
`@Clara Cardoso Ferreira`  I think you must program the sensor using a camera, I'm new eith webots, but I does not have seen that kind of sensor

##### Clara Cardoso Ferreira 05/27/2020 03:19:04
Thanks `@AngelAyala` . I talked to someone and found out that I could translate RGB camera values into neuromorphic data (event based)


I would do that with HOTS algorithm after I get RGB images. 



After some thought about the question I was wondering earlier:

If I want to collect a bunch of data (time it took for simulation to run),  would it be possible to set an initial condition pattern for the robot to follow so that every time the robot recognizes it got stuck it could restart the simulation from the beginning with new initial conditions?

##### Rajesh Roy 05/27/2020 03:34:14
> `@Rajesh Roy` Try this one:

> [https://robotbenchmark.net/](https://robotbenchmark.net/)

`@Darko Lukić` Thanks mannn!!! This is it.

##### AngelAyala 05/27/2020 03:51:28
> After some thought about the question I was wondering earlier:

> If I want to collect a bunch of data (time it took for simulation to run),  would it be possible to set an initial condition pattern for the robot to follow so that every time the robot recognizes it got stuck it could restart the simulation from the beginning with new initial conditions?

`@Clara Cardoso Ferreira` the Supervisor node can help you to reset the simulation [https://www.cyberbotics.com/doc/reference/supervisor](https://www.cyberbotics.com/doc/reference/supervisor)


Hi, it is recommended to do a node search from supervisor.getRoot() or it is better use the super.getFromDef(node\_def)  for python?


I would like to change the initial position of a node for the simulation


And control another robot node

##### David Mansolino [Cyberbotics] 05/27/2020 12:16:12
Hi, if you know the DEF it is better to use getFromDef.


(and simpler)

##### AngelAyala 05/27/2020 12:16:47
thanks

##### David Mansolino [Cyberbotics] 05/27/2020 12:20:31
You're welcome

##### lojik 05/27/2020 13:45:19
Hello everyone, what is the best way to import custom model in webots ?



I would like to create rounded terrain like in a skatepark.

##### David Mansolino [Cyberbotics] 05/27/2020 13:46:17
What is the current format of your model?

##### lojik 05/27/2020 13:47:05
I did not begin it right now. But I plan to make it with fusion360 or blender.

##### David Mansolino [Cyberbotics] 05/27/2020 13:48:35
Ok, then from Fusion or Blender you can import the shape in Webots (from Fusion you might export to an intermediary format), bu note that this will work only for the shape, you ill stil have to set the joint, physics, bounding objects, etc. in Webots afterward

##### lojik 05/27/2020 13:50:06
No problem, I was wondering how to import the shape mainly. The physics part will be set in webots as I do usually.


What is the best format to import a custom shape?

##### David Mansolino [Cyberbotics] 05/27/2020 13:54:11
Currently, Webots support VRML97 importation, but the next version of Webots (to be released soon, beta version already available here: [https://github.com/cyberbotics/webots/releases](https://github.com/cyberbotics/webots/releases)) will support many more formats (see 'Import 3D Model...'): [https://cyberbotics.com/doc/guide/the-user-interface?version=develop#file-menu](https://cyberbotics.com/doc/guide/the-user-interface?version=develop#file-menu)

##### lojik 05/27/2020 13:55:11
Oooh nice, I was expected to have more than only vrml97 to import models. Thank you 👌

##### David Mansolino [Cyberbotics] 05/27/2020 13:55:26
You're welcome

##### Rajesh Roy 05/27/2020 16:02:07
Hello, I want to download a pre-release version of Webots for my Jetson Nano GPU which is sporting Linux4Tegra

Linux OS  which is actually a version of Ubuntu 18.04 that's designed to run on Nvidia's hardware.

Can you find me appropriate download file for R2020b version?
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/715233383923318865/unknown.png)
%end

##### Olivier Michel [Cyberbotics] 05/27/2020 16:03:54
I would try the tarball (tar.bz2) version.

##### Iguins 05/27/2020 18:18:00
Hellow, I was wondering if webots is able to work with a voxel environment. Is there any documentation about it?

##### Rhino 05/27/2020 19:38:35
Hello, i have existing simulation and i need to integrate ros into it. I am new to ros and I am not sure how ros works with webots. How can i move my simulation files to my catkin workspace or what is the effective way to implement ros into existing simulation? thank you in advance.

##### Clara Cardoso Ferreira 05/27/2020 21:28:56
`@Iguins` I am looking for that too

I have a similar question posted in the development section

##### Iguins 05/27/2020 21:33:13
I was thinking to use a heightmap as an alternative using this [https://www.cyberbotics.com/doc/reference/elevationgrid](https://www.cyberbotics.com/doc/reference/elevationgrid)


but I am still learning the basics of webots

##### AngelAyala 05/28/2020 01:53:30
Hi, anyone has configured VS code to execute python scripts for webots?

##### Clara Cardoso Ferreira 05/28/2020 02:22:36
> I was thinking to use a heightmap as an alternative using this [https://www.cyberbotics.com/doc/reference/elevationgrid](https://www.cyberbotics.com/doc/reference/elevationgrid)

`@Iguins` same but those instructions are not for voxel environment right?

##### Iguins 05/28/2020 02:42:00
no not exactly 😦

##### David Mansolino [Cyberbotics] 05/28/2020 05:20:59
> Hello, i have existing simulation and i need to integrate ros into it. I am new to ros and I am not sure how ros works with webots. How can i move my simulation files to my catkin workspace or what is the effective way to implement ros into existing simulation? thank you in advance.

`@Rhino` are you using ROS1 or ROS2 ?

IF you are using ros1, you probably don't need to move anything, you simply need to assign the 'ros' controller to on of the robot of your simulation world.

##### Rhino 05/28/2020 14:53:15
thank you `@David Mansolino`, I am using ROS1 infact. all my robots in the world already have set controller with set functionality. if i change one of their controller to ros how do i get the said robot's functionality back?

##### David Mansolino [Cyberbotics] 05/28/2020 14:54:24
You can simply add an empty 'Robot' node and set the controller of this 'empty' robot to ros, this wqy, this robot can do the bridge between ros and your other robots


But if you are not using ros to control the robot, why do you want to integrate ros ?

##### Rhino 05/28/2020 14:55:51
future functionality of the robot will be done through ros and currently my robots have basic functionlity


I was just getting feel of the webots


and just to confirm the ros controller you are refering to is the one that is located at `/usr/local/webots/projects/default/controllers/ros/Ros.cpp` this location correct?

##### David Mansolino [Cyberbotics] 05/28/2020 14:56:55
yes exactly

##### Rhino 05/28/2020 14:57:04
awesome thank you 🙂

##### David Mansolino [Cyberbotics] 05/28/2020 14:57:11
You're welcome

##### Samir Hosny Mohamed 05/28/2020 15:04:57
Hello, i have issue with the supervisor mode.

I'm using Robotis Op3, When i try the example code of the supervisor the program becomes not responding!

Any suggested solutions ?

Thanks in advance



Edit: On windows 10

##### Stefania Pedrazzi [Cyberbotics] 05/28/2020 15:14:41
Hi, which is the "example code of the supervisor" that you are running?

##### Samir Hosny Mohamed 05/28/2020 15:28:23
from controller import Supervisor

TIME\_STEP = 32

supervisor = Supervisor()

\# do this once only

robot\_node = supervisor.getFromDef("MY\_ROBOT")

trans\_field = robot\_node.getField("translation")

while supervisor.step(TIME\_STEP) != -1:

    # this is done repeatedly

    values = trans\_field.getSFVec3f()

    print("MY\_ROBOT is at position: %g %g %g" % (values[0], values[1], values[2]))

##### David Mansolino [Cyberbotics] 05/28/2020 15:32:43
Do you know where it crashes?

Did you define a 'MY\_ROBOT' DEF ?

##### Samir Hosny Mohamed 05/28/2020 15:33:41
it crashes when i try to run the simulation


yes i changed it

##### David Mansolino [Cyberbotics] 05/28/2020 15:35:15
You should probably check (print) the value of `robot_node`, `trans_field` and `values`:

```Python
from controller import Supervisor
TIME_STEP = 32
supervisor = Supervisor()
# do this once only
robot_node = supervisor.getFromDef("MY_ROBOT")
print(robot_node)
supervisor.step(TIME_STEP)
trans_field = robot_node.getField("translation")
print(trans_field)
while supervisor.step(TIME_STEP) != -1:
    # this is done repeatedly
    values = trans_field.getSFVec3f()
    print(values)
    print("MY_ROBOT is at position: %g %g %g" % (values[0], values[1], values[2]))
```

##### Samir Hosny Mohamed 05/28/2020 15:41:03
it worked when i saved the world and restart the program, THANKS ALOT

##### Rajesh Roy 05/29/2020 03:32:13
I'm using AMD Radeon 8670M GPU. How to maximise my performance in this hardware?
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/715769442260222002/unknown.png)
%end

##### dralorg 05/29/2020 04:08:57
Hi, when I command the Youbot's  top left and bottom right wheels to run at the same angular speed, the final robot speed isn't pointing at 45 degrees CCW (exactly to the top right), it has a different angle, around 55 degrees CCW. May this be because of the friction of the wheels? Otherwise, why may that be?

##### David Mansolino [Cyberbotics] 05/29/2020 05:03:37
> it worked when i saved the world and restart the program, THANKS ALOT

`@Samir Hosny Mohamed` You're welcome


> I'm using AMD Radeon 8670M GPU. How to maximise my performance in this hardware?

`@Rajesh Roy` if you want to maximise performance you should reduce the OpenGL features enabled, you can do this from the preferences: [https://cyberbotics.com/doc/guide/preferences#opengl](https://cyberbotics.com/doc/guide/preferences#opengl)

Here are also a few tips about improving performance: [https://cyberbotics.com/doc/guide/speed-performance](https://cyberbotics.com/doc/guide/speed-performance)


> Hi, when I command the Youbot's  top left and bottom right wheels to run at the same angular speed, the final robot speed isn't pointing at 45 degrees CCW (exactly to the top right), it has a different angle, around 55 degrees CCW. May this be because of the friction of the wheels? Otherwise, why may that be?

`@dralorg` the center of mass of the robot is not perfectly center (mainly because of the arm), which can cause slight differences like this.

##### taeyoung 05/29/2020 11:39:19
Hi, I'm trying to use display.

The first time i open the world file, I turned off a display.

How can I make it visible again?

##### David Mansolino [Cyberbotics] 05/29/2020 12:08:42
You can re-open it from the 'Overlays' menu.

##### dimple.bhuta 05/29/2020 12:57:57
Hello, 

Using the sumo\_supervisor example in /usr/local/webots/projects/default/controllers, I am able to generate and delete a vehicle (bmwx) in webots simulation using traci controller. 

However when I try to specify ros\_automobile as my controller instead of sumo using the following modification in Objects.py file 



    defName = "EGO\_VEHICLE%d" % index

        vehicleString = "DEF " + defName + " " + model + " {\n"

        #vehicleString += "  translation 10000 0.5 0\n"

        vehicleString += "  translation -3.16697 0.317 -173.705\n"

        vehicleString += "  controller \"ros\_automobile\"\n"

        vehicleString += "  sensorsSlotCenter [\n"

        vehicleString += "    GPS {\n"

        vehicleString += "    }\n"

        vehicleString += "   ]\n"



I get the following error ([ros\_automobile] Error: Only nodes based on the 'Car' node can used the car library.)

I will highly appreciate any guidance that you guys can provide. Thank you for your time.

##### David Mansolino [Cyberbotics] 05/29/2020 13:01:21
Hi, the sumo supervisor is using a simlified version of the vehicle inseat of the the usueal one to make the simulation run smoother: [https://cyberbotics.com/doc/automobile/car#simple-vehicles](https://cyberbotics.com/doc/automobile/car#simple-vehicles)



Instead of modifying the sumo controller, you should rather already add the vehicle with the correct controller in your simulation and set the appropriate DEF name so that the sumo supervisor will use it when needed: [https://cyberbotics.com/doc/automobile/sumo-interface#use-vehicles-already-present-in-the-world](https://cyberbotics.com/doc/automobile/sumo-interface#use-vehicles-already-present-in-the-world)

##### dimple.bhuta 05/29/2020 13:05:28
Hi David thank you for your reply. I am trying to replace sumo controller with my own so i can do without sumo. However for my project we don't have an pre estimate of how many cars we would like in the simulation. Therefore I was trying to figure out how to add/remove robots via code and it wont be possbile to specify or use vehicles that are already present as the number of vehicles would vary per simulation

##### David Mansolino [Cyberbotics] 05/29/2020 13:17:20
Oh ok, in that case, to add robot from controller, it is quite simple you just have to use the supervisor API: 

  - [https://cyberbotics.com/doc/guide/supervisor-programming](https://cyberbotics.com/doc/guide/supervisor-programming)

  - [https://cyberbotics.com/doc/reference/supervisor](https://cyberbotics.com/doc/reference/supervisor)


In particular these function can be used to import new nodes: 

[https://cyberbotics.com/doc/reference/supervisor#wb\_supervisor\_field\_import\_mf\_node](https://cyberbotics.com/doc/reference/supervisor#wb_supervisor_field_import_mf_node)

##### dralorg 05/29/2020 15:50:27
> `@dralorg` the center of mass of the robot is not perfectly center (mainly because of the arm), which can cause slight differences like this.

`@David Mansolino` Thank you!


> `@dralorg` the center of mass of the robot is not perfectly center (mainly because of the arm), which can cause slight differences like this.

`@David Mansolino` I've tried putting a WoodenBox on top of the Youbot, but I'm getting the same velocities no matter the mass of the box. May I be missing something?
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/715961687420960878/unknown.png)
%end

##### Samir Hosny Mohamed 05/29/2020 22:28:25
What're the available values for the contactMaterial attr. in the Floor node ?

##### kwy 05/30/2020 05:38:45
Hallo, how to install numpy for python(snap)

##### Simon Steinmann [Moderator] 05/30/2020 10:59:23
the simplest way to install python packages is to use 'pip'


dont know how it works with snap, but if you use apt you do this:

sudo apt install python-pip

pip install numpy

##### Iguins 05/30/2020 18:45:52
hi


someone know how to change names in the scene tree?
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/716361856817692833/unknown.png)
%end


I saw this in the tutorial n2 but I just got those 5 named as "solid"

##### Ans 05/30/2020 20:38:57
Hi! Webots noob here, could someone tell me how to add an odor plume in the simulation and make the robot follow it? (Kinda trying to recreate this : [https://en.wikibooks.org/wiki/Webots\_Odor\_Simulation](https://en.wikibooks.org/wiki/Webots_Odor_Simulation))

##### dralorg 05/30/2020 21:49:04
> Hallo, how to install numpy for python(snap)

`@kwy` Be sure that you pip install Numpy using the Python executable that Webots uses. To do so, call `path_to_python/python -m pip install numpy`


> someone know how to change names in the scene tree?

`@Iguins` Maybe you can edit the world file directly and change it there. I'm not sure if/how to do that from the GUI.

##### Iguins 05/31/2020 00:06:02
Thank you Manuel but I could not do it from there either

##### Samir Hosny Mohamed 05/31/2020 05:49:32
I'm trying to use TouchSensor for the foot of the robot but i can't  get the sensor in the code, can you help me ? 🙂
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/716528776078426122/unknown.png)
%end

##### Rodeknopje 05/31/2020 13:53:55
Is it possible to rotate a hingejoint based on physics instead of a motor rotation?

##### Jesusmd 05/31/2020 15:50:08
Hi `@Samir Hosny Mohamed`  have you been checked if the sensor class/object was created correctly?

##### Samir Hosny Mohamed 05/31/2020 15:55:59
Yes, it works if i put the sensor directly under the robot node, but when i put it under nested node (foot node) it fails to get the sensor! And i want the sensor follows the foot

##### Jesusmd 05/31/2020 16:14:27
`@Samir Hosny Mohamed` ok I see, I suggest you to follow node chart, I have used the touch sensor but in a different way, also I woul try some trick using transform an put in the children the sensor, I am just figuring out by your warning outcume, [https://cyberbotics.com/doc/reference/node-chart](https://cyberbotics.com/doc/reference/node-chart)

##### Samir Hosny Mohamed 05/31/2020 16:34:48
Ok i will try that

##### missflo 05/31/2020 19:39:06
hi - just wondering how to it's possible that after reinstalling webots I am no longer able to see the 3d view when starting with the first tutorial #newbie


i have tried restoring the layout but no luck.


when i first installed webots I had no issue seeing the 3d view, it was after i had to uninstall and reinstall that the 3d view does not show

##### furkann 05/31/2020 23:53:22
Hello all, can anybody help to make connection between webots and qtcreator ide

## June

##### taeyoung 06/01/2020 04:43:13
Hi, I'm trying to load some png images to display by wb\_display\_image\_load.

With some images, webots says "image\_path" is unreadable.

But when I check the properties of that image, access property is 'read and write'.

##### cakar 06/01/2020 06:33:31
hi i am tryimg to simulate a cleaning robot with irobot's create robot but i couldnt add dust on the floor and i dont know how to clean it with the robot in simulation can anyone help? Thanks in advance

##### Doc 06/01/2020 12:10:54
Hi, is it possible to set a relative path pointing to a texture in a webots example project (So using a part from an existing project and keeping the texture path relative to that)

##### Samir Hosny Mohamed 06/01/2020 18:39:56
`@Jesusmd` My problem has been solved after reopen the world, Thanks

##### David Mansolino [Cyberbotics] 06/02/2020 06:10:18
> What're the available values for the contactMaterial attr. in the Floor node ?

`@Samir Hosny Mohamed` you can define the name of the contact material from the 'Floor' node, then in the WorldInfo.contactProperties you can define the properties.


> Hallo, how to install numpy for python(snap)

`@kwy` if you need to install numpy, you should either use another package of Webots than snap either use external controller: [https://cyberbotics.com/doc/guide/running-extern-robot-controllers](https://cyberbotics.com/doc/guide/running-extern-robot-controllers)


> someone know how to change names in the scene tree?

`@Iguins` you can't change the 'Solid' part as it show the type of node, but you can change the 'DEF' name from the node editor just below the scene-tree


> Hi! Webots noob here, could someone tell me how to add an odor plume in the simulation and make the robot follow it? (Kinda trying to recreate this : [https://en.wikibooks.org/wiki/Webots\_Odor\_Simulation](https://en.wikibooks.org/wiki/Webots_Odor_Simulation))

`@Ans` you might find some interesting informations here: [https://stackoverflow.com/questions/61391562/odour-plume-environment-in-webots](https://stackoverflow.com/questions/61391562/odour-plume-environment-in-webots)


> I'm trying to use TouchSensor for the foot of the robot but i can't  get the sensor in the code, can you help me ? 🙂

`@Samir Hosny Mohamed` touch sensors works exactly the same way as the other sensors, you can get a handle to the sensor using it$s name.


> Is it possible to rotate a hingejoint based on physics instead of a motor rotation?

`@Rodeknopje` yes, if you don't but any motor, the joint will be free and move according to physical constraints.


> when i first installed webots I had no issue seeing the 3d view, it was after i had to uninstall and reinstall that the 3d view does not show

`@missflo` which version of Webots are you using? And with which OS?


> Hello all, can anybody help to make connection between webots and qtcreator ide

`@furkann` you might find some usefull information here: [https://cyberbotics.com/doc/guide/using-your-ide](https://cyberbotics.com/doc/guide/using-your-ide)


> Hi, I'm trying to load some png images to display by wb\_display\_image\_load.

> With some images, webots says "image\_path" is unreadable.

> But when I check the properties of that image, access property is 'read and write'.

`@taeyoung` have you checked that the path is correct? Are you using absolute or relative path?


> hi i am tryimg to simulate a cleaning robot with irobot's create robot but i couldnt add dust on the floor and i dont know how to clean it with the robot in simulation can anyone help? Thanks in advance

`@cakar` the simplest solution is to use a Display device for the floor, here is an example: [https://cyberbotics.com/doc/guide/create#samples](https://cyberbotics.com/doc/guide/create#samples)


> Hi, is it possible to set a relative path pointing to a texture in a webots example project (So using a part from an existing project and keeping the texture path relative to that)

`@Doc` this is unfortunately not porrible, but we are working on it (see [https://github.com/cyberbotics/webots/issues/1638](https://github.com/cyberbotics/webots/issues/1638)).

##### taeyoung 06/02/2020 06:37:45
I'm using relative path to the supervisor

##### David Mansolino [Cyberbotics] 06/02/2020 07:06:28
then you should probably make sure that the path is correct relatively to your controller directory.

##### Samir Hosny Mohamed 06/02/2020 08:52:24
Thanks `@David Mansolino`

##### David Mansolino [Cyberbotics] 06/02/2020 08:54:40
You're welcome

##### AngelAyala 06/02/2020 09:17:04
Hi!, is there a way to check if Webots is running or not with python?

##### David Mansolino [Cyberbotics] 06/02/2020 09:17:40
Hi, you might just look for the 'webots' process, would this be ok for you ?

##### AngelAyala 06/02/2020 09:21:02
I will check it, I'm currently developing an extern controller and covering all the possibles error cases

##### furkann 06/02/2020 09:58:29
> `@furkann` you might find some usefull information here: [https://cyberbotics.com/doc/guide/using-your-ide](https://cyberbotics.com/doc/guide/using-your-ide)

`@David Mansolino` I tried instructions

##### trawzified 06/02/2020 15:10:49
Are there instructions on how to setup OpenCV for the Vision sample? Can't get it to work for the life of me. Which version of OpenCV do I need, 4.3.0?

##### David Mansolino [Cyberbotics] 06/02/2020 15:11:20
Last time I tried it was with 2.x

##### trawzified 06/02/2020 15:11:51
Tried setting the system variable but it doesn't seem to match the directories it's looking for in the Makefile

##### David Mansolino [Cyberbotics] 06/02/2020 15:12:19
But here is a Python version currently working: [https://github.com/cyberbotics/webots/blob/master/projects/samples/robotbenchmark/visual\_tracking/controllers/visual\_tracking/visual\_tracking.py](https://github.com/cyberbotics/webots/blob/master/projects/samples/robotbenchmark/visual_tracking/controllers/visual_tracking/visual_tracking.py)

##### trawzified 06/02/2020 15:14:24
That's neat! It does work but I'd like to implement the vision features in my own project which has been built with C++ so I'm not sure on how to tie Python to that

##### David Mansolino [Cyberbotics] 06/02/2020 15:15:35
Ok, in that case, you probably have to slightly adapt th eMakefile to your version of openCV: [https://github.com/cyberbotics/webots/blob/master/projects/samples/howto/controllers/vision/Makefile#L31-L44](https://github.com/cyberbotics/webots/blob/master/projects/samples/howto/controllers/vision/Makefile#L31-L44)

##### Simon Steinmann [Moderator] 06/02/2020 15:15:36
Hey `@David Mansolino`  do you guys have benchmarks, showing the performance & accuracy compared to other simulators / physics engines? I'm curious as to how your flavour of ODE is different

##### Olivier Michel [Cyberbotics] 06/02/2020 15:16:25
Hi `@Simon Steinmann`. Unfortunately, we don't have such benchmarks.

##### Simon Steinmann [Moderator] 06/02/2020 15:17:02
Also, you use a fairly large default step time. of 8-16ms, compared to gazebo with 1ms. Is there any special sauce? I read and heared that you are 100% deterministic.

##### Olivier Michel [Cyberbotics] 06/02/2020 15:17:19
We modified ODE to produce better contact points that yields to a better stability. Also, we added fluid dynamics and multi-threading, fixed some collision functions, etc.


True, if your simulation is designed carefully, it should be 100% deterministic.

##### Simon Steinmann [Moderator] 06/02/2020 15:18:22
I send you a friend request, would like to pm you about a project

##### Olivier Michel [Cyberbotics] 06/02/2020 15:18:40
The default time step of 8 or 16 ms works in many simulation setups and is way faster that 1 ms.


OK.

##### Simon Steinmann [Moderator] 06/02/2020 16:08:59
Does webots use any GPU acceleration for simulation? Or just for rendering

##### Olivier Michel [Cyberbotics] 06/02/2020 16:09:17
No it uses GPU for simulation as well.


Mainly for simulating cameras, range-finders and lidars.

##### Simon Steinmann [Moderator] 06/02/2020 16:10:18
using OpenGL? or is cuda required?

##### Olivier Michel [Cyberbotics] 06/02/2020 16:10:28
No just OpenGL.


No requirement on CUDA.

##### Simon Steinmann [Moderator] 06/02/2020 16:10:42
thx 🙂

##### Olivier Michel [Cyberbotics] 06/02/2020 16:10:47
OpenGL 3.3 (minimum version).

##### Simon Steinmann [Moderator] 06/02/2020 16:23:28
does the velocity controller for the motor really not use PID?
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/717413087430574166/unknown.png)
%end

##### Olivier Michel [Cyberbotics] 06/02/2020 16:24:06
Yes, it relies on the direct velocity control of ODE which is very stable.

##### Simon Steinmann [Moderator] 06/02/2020 16:24:44
ah, but there is some form of PID controller in the engine then?! Otherwise that would cause troubles wouldnt it?

##### Olivier Michel [Cyberbotics] 06/02/2020 16:24:51
But you are free to implement your own PID for velocity control.


Yes.

##### Simon Steinmann [Moderator] 06/02/2020 16:25:22
gotcha, thanks for clarifying


Is it possible to export a .proto in urdf format? For ROS the robot\_description is loaded into the parameter server, which IK software like MoveIT and tools like Rviz use. With robots that webots natively supports like the universal robots, the urdf used by ROS is different to the modified model in webots.


If not urdf, perhaps .stl or .dae files

##### Olivier Michel [Cyberbotics] 06/02/2020 17:11:52
It's not yet possible, but we are working on that at the moment. So, you can expect to have this soon...

##### Simon Steinmann [Moderator] 06/02/2020 17:43:41
How is dynamic friction handled in webots?  I can set the coloumbFriction, but what happens once it starts slipping? The dynamic friction coefficient is usually different than the static one.

##### dimple.bhuta 06/03/2020 05:01:29
Hello I am using gps to track my vehicle, however there is coordinate mismatch


WorldInfo {

  info [

    "World generated using the Open Street Map to Webots importer"

    "Author: David Mansolino <david.mansolino@epfl.ch>"

  ]

  basicTimeStep 16

  northDirection 0 0 1

  gpsCoordinateSystem "WGS84"

  gpsReference 12.987525 77.6685 0

  lineScale 2

  contactProperties [

    ContactProperties {

      softCFM 1e-05

    }

  ]


In the world info i changed the gpsCoordinates system to 'local'


but I am still not able to understand what value should be of gpsReference point


AAny guidance that you guys can provide will be of great help

##### Clara Cardoso Ferreira 06/03/2020 05:04:31
Im not sure, but my guess is that the reference point is which coordinate do you want the gps to reference the robot, is it the center of the robot? if so, I think you want it to be 0,0,0?

##### dimple.bhuta 06/03/2020 05:04:56
I tried that but it did not work

##### David Mansolino [Cyberbotics] 06/03/2020 05:35:56
`@dimple.bhuta` if you set it to 'local' it will just return the X-Y-Z coordinate of the GPS in the Webots reference frame.


if you set it to 'WGS84', then it will return the latitude, longitude and altitude of the GPS.


In that case it is important to set the 'gpsReference' as it will define the latitude, longitude and altitude of the origin (0, 0, 0) of your simulation world.

##### dimple.bhuta 06/03/2020 05:37:10
Ok but the coordinates arn't matching vehicle position. The reference that was generated using transforms and the car goes off-course.


Ok

##### Clara Cardoso Ferreira 06/03/2020 05:37:26
David, thanks for the guidance with helping me implement the uneven terrain proto.

How do I put the robots in the terrain? It seems like the Koala bots cannot get to the terrain
%figure
![moonmap_inc.PNG](https://cdn.discordapp.com/attachments/565154703139405824/717612891657732116/moonmap_inc.PNG)
%end

##### David Mansolino [Cyberbotics] 06/03/2020 05:38:22
Note also that 'northDirection' matter as it indicate which direction point to the north and therefor which direction is latitude and which direction is longitude


> David, thanks for the guidance with helping me implement the uneven terrain proto.

> How do I put the robots in the terrain? It seems like the Koala bots cannot get to the terrain

`@Clara Cardoso Ferreira` did you use it for the bounding object too?

##### dimple.bhuta 06/03/2020 05:39:17
So if I set my gps to local the north direction adjustment would be all (0,0,0)

##### David Mansolino [Cyberbotics] 06/03/2020 05:40:12
> How is dynamic friction handled in webots?  I can set the coloumbFriction, but what happens once it starts slipping? The dynamic friction coefficient is usually different than the static one.

`@Simon Steinmann` you will find more about this topic in the ODE (our physic engine) manual: [http://ode.org/wiki/index.php?title=Manual#Friction\_Approximation](http://ode.org/wiki/index.php?title=Manual#Friction_Approximation)


> So if I set my gps to local the north direction adjustment would be all (0,0,0)

`@dimple.bhuta` if you set it to local it just means that it will simply return X,Y,Z position in meter (which are the deviation from the reference point).

##### Clara Cardoso Ferreira 06/03/2020 05:43:17
> bounding objects

`@David Mansolino` not sure what you are talking about. Are you asking if I set the meshes like in tutorial 2 with the ball? If so, I did not



%figure
![Screenshot_159.png](https://cdn.discordapp.com/attachments/565154703139405824/717614501666750584/Screenshot_159.png)
%end

##### David Mansolino [Cyberbotics] 06/03/2020 05:45:14
In Webots meshes are used for two purpose, for visualization (including sensors such as camera, lidar, etc.) and for the physics (basically collision detection). The first one is used when you specify it in a Shape node and the second one is used when you specify it in the boundingObject field of a Solid node.

##### Clara Cardoso Ferreira 06/03/2020 05:50:46
`@David Mansolino` Im still a little bit lost as to what to do to the uneven terrain so that the robot interacts with it, sorry. The terrain is currently above the robots (cant reach).


Unlike tutorial 2, the UnevenTerrainGenerator.proto does not have a subdivision option to change the meshes

##### David Mansolino [Cyberbotics] 06/03/2020 05:52:41
> `@David Mansolino` Im still a little bit lost as to what to do to the uneven terrain so that the robot interacts with it, sorry. The terrain is currently above the robots (cant reach).

`@Clara Cardoso Ferreira` maybe you should have a look to: [https://cyberbotics.com/doc/guide/samples-geometries#physics\_primitives-wbt](https://cyberbotics.com/doc/guide/samples-geometries#physics_primitives-wbt)

##### Clara Cardoso Ferreira 06/03/2020 05:54:00
sounds good, Ill look into that. 

One more related question:


do you recommend that I delete the prvious ground setup


?

##### David Mansolino [Cyberbotics] 06/03/2020 05:54:20
> Unlike tutorial 2, the UnevenTerrainGenerator.proto does not have a subdivision option to change the meshes

`@Clara Cardoso Ferreira` the subdivision is actually the resolution of the the image.


> do you recommend that I delete the prvious ground setup

`@Clara Cardoso Ferreira` yes, otherwise it might cause conflicts.

##### Clara Cardoso Ferreira 06/03/2020 05:56:09
cool thanks.

##### David Mansolino [Cyberbotics] 06/03/2020 05:56:16
You're welcome

##### Clara Cardoso Ferreira 06/03/2020 06:05:14
`@David Mansolino` I just sent you a message on LinkedIn to ask you about Season of Docs


🙂

##### David Mansolino [Cyberbotics] 06/03/2020 06:08:14
I received it indeed. I will answer you.

##### Olivier Michel [Cyberbotics] 06/03/2020 06:23:12
> How is dynamic friction handled in webots?  I can set the coloumbFriction, but what happens once it starts slipping? The dynamic friction coefficient is usually different than the static one.

`@Simon Steinmann`: yes, there is also the Force Dependent Slip parameter which you can set. See details here: [https://www.cyberbotics.com/doc/reference/contactproperties](https://www.cyberbotics.com/doc/reference/contactproperties)

##### Dobby 06/03/2020 08:52:23
I cant get opencv to work with webots for some reason keeps coming up with different errors across our team



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/717661969519476786/unknown.png)
%end



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/717662025622224946/unknown.png)
%end


Other guy gets this
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/717662091154161694/unknown.png)
%end

##### Olivier Michel [Cyberbotics] 06/03/2020 08:54:16
You should get opencv from MSYS2 to be able to link with the provided Webots makefiles.


[https://packages.msys2.org/package/mingw-w64-x86\_64-opencv](https://packages.msys2.org/package/mingw-w64-x86_64-opencv)

##### Dobby 06/03/2020 09:01:18
Okay thanks Ill try that!

##### TheWiseSidney 06/03/2020 09:44:13
Sub guys, im working on a Webots project for my school and have a question. Is it possible to use multiple languages, for instance we are using C++ as the main language and beside that we use Python for the vision and a tcp server. Is this possible?

##### David Mansolino [Cyberbotics] 06/03/2020 09:45:43
Yes and no, you can use different langiag for different controllers (i.e. different robots), but you can use the emitter-receiver mechanism to transmit informations between them.

##### Professor Felix 06/03/2020 11:43:02
is there a specific command or programming  function used to enable/display camera input in the webots simulation view? I know there is a feed of the camera in the example tutorial worlds but I am unable to recreate it in mine, even after following the same code and using the same robot

##### Stefania Pedrazzi [Cyberbotics] 06/03/2020 11:46:49
`@Professor Felix`, do you mean the camera feedback in the view with a magenta border? This is called "Overlay" and should be enabled by default. If it is not (maybe it was closed in a previous run of the simulation), you can enable it by right-clicking on the robot (from the 3D view or scene tree) and selecting the "Overlays" item in the context menu and checking the camera item


Here is a screenshot of the context menu item to enable the camera overlay
%figure
![Screenshot_from_2020-06-03_13-47-13.png](https://cdn.discordapp.com/attachments/565154703139405824/717706320106487900/Screenshot_from_2020-06-03_13-47-13.png)
%end

##### Professor Felix 06/03/2020 12:11:14
yes, and ok, thank you

##### Stefania Pedrazzi [Cyberbotics] 06/03/2020 12:19:35
you are welcome

##### John520 06/03/2020 15:46:00
Hi guys, I used the truck.proto from Webots and controlled it via ros\_automobile before, and it worked very well. This time, I would like to create a tractor by myself and control it via ROS for a project. My question is, do I need to program a ros controller for this tractor by myself? I am following the Tutorial 6: 4-wheels robot, but I am not pretty clear about it. Thank you very much for your help.

##### Dobby 06/03/2020 17:43:56
`@Olivier Michel` now I am getting this error with installing opencv through msys2, while trying to compile the howto -> Vision file



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/717795726821949520/unknown.png)
%end

##### Clara Cardoso Ferreira 06/04/2020 01:04:08
`@Dobby` the errors says that it cant find your file in the resources folder....   my guess is that you need your Open CV files to be in the resources folder. 

Or maybe you have conflicting versions?


Im just about to install it as well, so Ill let you know if I get that


> You should get opencv from MSYS2 to be able to link with the provided Webots makefiles.

`@Olivier Michel` 

hum i couldnt figure out which files to download from the website since I was too intimidated by many depedencies and build files. Which files am I supposed to download?

##### David Mansolino [Cyberbotics] 06/04/2020 04:59:00
> Hi guys, I used the truck.proto from Webots and controlled it via ros\_automobile before, and it worked very well. This time, I would like to create a tractor by myself and control it via ROS for a project. My question is, do I need to program a ros controller for this tractor by myself? I am following the Tutorial 6: 4-wheels robot, but I am not pretty clear about it. Thank you very much for your help.

`@John520` as long as your tractor is using on the Car PROTO ([https://cyberbotics.com/doc/automobile/car](https://cyberbotics.com/doc/automobile/car)) as root node, you can use the ros\_automobile controller. Otherwise you will either have to create your own controller either use the more generic 'ros' controller.


> `@Olivier Michel` now I am getting this error with installing opencv through msys2, while trying to compile the howto -> Vision file

`@Dobby` this indicates that the `INCLUDE = -I$(OPENCV_DIR)/include/opencv4` line in your makefile is not working as expected

##### Olivier Michel [Cyberbotics] 06/04/2020 06:34:55
> `@Olivier Michel` 

> hum i couldnt figure out which files to download from the website since I was too intimidated by many depedencies and build files. Which files am I supposed to download?

`@Clara Cardoso Ferreira`: it may be easier to install MSYS2 from msys2.org and type `pacman -S mingw-w64-x86_64-opencv` in the MSYS2 console to install it along with all the needed dependencies.

##### TheWiseSidney 06/04/2020 08:20:12
Sub guys, Im still working on  a school project in webots. We are using Opencv for object recognition but i cant get it to work. How do i include opencv, like the normal way you include libs in c++ or do you guys have support for that.

##### David Mansolino [Cyberbotics] 06/04/2020 08:39:55
It works the axact same way as for other libs, here is a simple guide: [https://cyberbotics.com/doc/guide/using-webots-makefiles#adding-an-external-library-ccp](https://cyberbotics.com/doc/guide/using-webots-makefiles#adding-an-external-library-ccp)

##### Dobby 06/04/2020 08:47:05
Yeah that seemed to fix it, I changed my OPENCV\_DIR global value to the right map now, however we are still getting compile errors, hows it going for you? `@Clara Cardoso Ferreira`



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/718024786776948806/unknown.png)
%end



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/718024827629207632/unknown.png)
%end


Installed through msys2

##### TheWiseSidney 06/04/2020 09:42:07
`@David Mansolino` thnx, is all i have to add the INCLUDE and the LIBRARY? Or is there more i have to do? I dont get any prints in the console that it is compiling opencv.

##### ThomasH 06/04/2020 09:55:12
Hi all! I have a question concerning the access to a node within a robot. I added a Camera to the existing iCreate Robot PROTO and now I want to use the C++ API to read out the position and orientation of the camera. This code is working to access the out Robot's node:

auto rootBot = m\_robo->getFromDef("ROBOT1");



However, I always get null when I try to access the camera node:

auto cameraSolid = m\_robo->getFromDef("ROBOT1.CREATE\_CAMERA");



Here is the relevant section of the PROTO file:

PROTO CreateLPR [

  ...

]

{

Robot {

  translation IS translation

  rotation IS rotation

  children [

      ....

    DEF CREATE\_CAMERA Camera {

      translation 0 0.044 -0.172

      rotation IS camera\_rotation

      children [



...



Maybe someone has an idea what I do wrong. Thanks for your help!

##### Olivier Michel [Cyberbotics] 06/04/2020 09:58:02
Yes, it doesn't work because your camera is inside a PROTO.


We introduced a new supervisor API function that allows you to get a handle to a node that is inside a proto.

##### ThomasH 06/04/2020 09:58:53
ah nice

##### Olivier Michel [Cyberbotics] 06/04/2020 09:59:02
But it's available only in the nightly builds of Webots R2020b.

##### ThomasH 06/04/2020 09:59:16
Actually I used the most recent github master

##### Olivier Michel [Cyberbotics] 06/04/2020 09:59:24
See the documentation here: [https://cyberbotics.com/doc/reference/supervisor?version=develop#supervisor-functions](https://cyberbotics.com/doc/reference/supervisor?version=develop#supervisor-functions)

##### ThomasH 06/04/2020 09:59:24
I compiled it some days ago

##### Olivier Michel [Cyberbotics] 06/04/2020 09:59:43
Yes, but you should use the `develop` branch to get this feature.

##### ThomasH 06/04/2020 10:01:47
I see, thanks! I will try it out.

##### David Mansolino [Cyberbotics] 06/04/2020 10:18:29
> `@David Mansolino` thnx, is all i have to add the INCLUDE and the LIBRARY? Or is there more i have to do? I dont get any prints in the console that it is compiling opencv.

`@TheWiseSidney` the goal is not to compile OpenCV, you have to cmpile it before, the goal is to include and link with opencv.

##### ThomasH 06/04/2020 10:33:29
`@Olivier Michel` Its working with the getFromProtoDef() method. Thanks again for your help 👍

##### lojik 06/04/2020 11:50:17
Hey everyone, I do not fully understand something. If I set a new basicTimeStep by doing :



sup.getFromDef('world\_info').getField('basicTimeStep').setSFFloat(param.BASIC\_TIMESTEP)



Then if I do a sup.getBasicTimeStep() after, it will return the old basicTimeStep and not the new one just set before.



Is it normal?

##### David Mansolino [Cyberbotics] 06/04/2020 11:51:19
Yes, it is not recommended to change the time step while the simulation is running, this can cause some instabilities.

##### lojik 06/04/2020 11:54:29
My goal is to set the timestep with a constant in my controller parameters. So I can have some parameters in a python file and change them inside to influe the simulation. It will let me implement some grid search on parameters instead of changing them by hand for each simulations. I was thinking to set the world with these parameters and then do the steps simulation.


Is there an other way to do that? I do not would like to change the timestep in a simulation but between them.

##### David Mansolino [Cyberbotics] 06/04/2020 11:56:08
Ok, in that case what you are trying to do might work (even so the controller is not receiving the update). But I would rather use another methd not changing the timestep after the controllers started.


One possible solution, would be to have your controller 'write' your next world file (it can for example do a search and replace of the timestep value, or generate the world from a template), then your controller can use the 'wb\_supervisor\_world\_load' ([https://cyberbotics.com/doc/reference/supervisor#wb\_supervisor\_world\_load](https://cyberbotics.com/doc/reference/supervisor#wb_supervisor_world_load)) function to load the new world.

##### lojik 06/04/2020 12:01:49
Ok, nice I will check that. Thank you 👍 



If I understand it right, the simulation is consider as started as soon as we load a world file? This is why the timestep is consider as "fixed" by the supervisor?

##### David Mansolino [Cyberbotics] 06/04/2020 12:03:28
> Ok, nice I will check that. Thank you 👍 

You're welcome!

> If I understand it right, the simulation is consider as started as soon as we load a world file? This is why the timestep is consider as "fixed" by the supervisor?

`@lojik` yes, some of the parameters which should remain constant while the simulation is running (very few are like this actually) are transferred to the controller only when it is started (this will minimize communication between the controller process and the Webots process and therefore improve performance).

##### lojik 06/04/2020 12:04:56
Is there a list somwhere about these parameters? So I will be able to search them into my .wbt file before running it and change the others parameters after with getFromDef(). Instead of changing all my parameters.

##### David Mansolino [Cyberbotics] 06/04/2020 12:05:49
Unfortunately not, however, as far as I rememeber, here are the main ones:


- worldInfo.timestep.  

- camera.width and height.

- Plugins (such as robot-window, physics plugins, remote-control).

##### lojik 06/04/2020 12:08:05
ok perfect, thank you 👍 So I will check to change the timestep directly in .wbt files. This is the only one I change that seems to be done before loading the world.

##### David Mansolino [Cyberbotics] 06/04/2020 12:08:19
You're welcome 🙂

##### elkelkmuh 06/04/2020 12:30:23
`@David Mansolino`  hi I will use Reinforcement algortihm inwebots. In each episode, can I add different object over a table. How?That is, I need to dynamic environment.

##### David Mansolino [Cyberbotics] 06/04/2020 12:31:19
Yes you should use the Supervisor API

##### elkelkmuh 06/04/2020 12:34:21
I will only change a object in that environment. How?

##### David Mansolino [Cyberbotics] 06/04/2020 12:38:59
I am sorry, but can you please read the doc before asking such kind of questions, the documentation explains and gives many examples of how to do this!

##### elkelkmuh 06/04/2020 12:48:41
please say one example wbt in samples.

##### David Mansolino [Cyberbotics] 06/04/2020 12:49:51
[https://cyberbotics.com/doc/guide/samples-devices#supervisor-wbt](https://cyberbotics.com/doc/guide/samples-devices#supervisor-wbt)

##### elkelkmuh 06/04/2020 12:59:46
There are all examples in this link

##### David Mansolino [Cyberbotics] 06/04/2020 13:05:16
indeed..

##### elkelkmuh 06/04/2020 13:41:41
I will add new object not available one.

##### Stefania Pedrazzi [Cyberbotics] 06/04/2020 13:47:08
It is described in the Supevisor documentation how to add new nodes: [https://www.cyberbotics.com/doc/reference/supervisor#wb\_supervisor\_field\_import\_mf\_node](https://www.cyberbotics.com/doc/reference/supervisor#wb_supervisor_field_import_mf_node)

Please take the time to read the available documentation.

##### Lussfer 06/04/2020 21:48:18
for practice i have replicated ros\_python world, i am trying to use a custom ros message but getting import error. the custom ros message is in catkin pakage. is it possible to use custom message in webots?

##### Clara Cardoso Ferreira 06/05/2020 02:02:34
I have open cv installed but it is not being recognized in the webots path. I tried editing the makefile as in the screenshot, and tried creating an environment path but has not worked yet. 

Some other people are also having an issue installing this, so it would be great to get some more direction
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/718283594866360400/unknown.png)
%end



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/718284453390057482/unknown.png)
%end

##### Jorrock [no] 06/05/2020 04:02:15
Hello, I'm new here! simple question but how do I modify my lookup table for my little old DistanceSensor?

##### David Mansolino [Cyberbotics] 06/05/2020 05:09:11
> for practice i have replicated ros\_python world, i am trying to use a custom ros message but getting import error. the custom ros message is in catkin pakage. is it possible to use custom message in webots?

`@Lussfer` yes this is possible, however, you have to modify the runtime.ini file () to add the path to your custom ros message package path: [https://github.com/cyberbotics/webots/blob/master/projects/languages/ros/controllers/ros\_python/runtime.ini](https://github.com/cyberbotics/webots/blob/master/projects/languages/ros/controllers/ros_python/runtime.ini)


> Hello, I'm new here! simple question but how do I modify my lookup table for my little old DistanceSensor?

`@Jorrock [no]` you can simply modify it in the scene-tree, or if the DistanceSensor is defined in a PROTO file you will need to manually edit the file.

If you are new, I strongly recommend following the tutorials: [https://cyberbotics.com/doc/guide/tutorials](https://cyberbotics.com/doc/guide/tutorials)


> I have open cv installed but it is not being recognized in the webots path. I tried editing the makefile as in the screenshot, and tried creating an environment path but has not worked yet. 

> Some other people are also having an issue installing this, so it would be great to get some more direction

`@Clara Cardoso Ferreira` from the screenshot of your controller it seems that the OPENCV\_DIR line is commented out, is this normal?

##### Clara Cardoso Ferreira 06/05/2020 05:24:30
that changed the error to this
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/718334415402434570/unknown.png)
%end


what is considered the build file in open CV?



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/718334923957600256/unknown.png)
%end

##### David Mansolino [Cyberbotics] 06/05/2020 05:57:41
It seems that you are using OpenCV 4 whereas the controller is made for OpenCV 2

##### Clara Cardoso Ferreira 06/05/2020 05:58:23
open cv 2 is in the open cv 4 folder. I tried both

##### David Mansolino [Cyberbotics] 06/05/2020 05:58:40
I would recommend trying to write your own controller from scratch to integrate with OpenCV 4, here are some usefull information: [https://cyberbotics.com/doc/guide/using-webots-makefiles#using-the-compiler-and-linker-flags-ccp](https://cyberbotics.com/doc/guide/using-webots-makefiles#using-the-compiler-and-linker-flags-ccp)

##### Clara Cardoso Ferreira 06/05/2020 06:02:28
sure, ill look into it later. thanks


also , it has been a while since I do not add and position a camera to a robot and I cant remember even after looking through examples. On the documentation, it says that the camera can be derived from 'device' and 'solid'. Would you please remind me of how to get the camera node?

##### David Mansolino [Cyberbotics] 06/05/2020 06:14:36
What do you mean exactly by 'get' from the controller? From a Supervisor? From the add node dialog?

##### Clara Cardoso Ferreira 06/05/2020 06:18:02
I have this simulation I created a few months ago. 

I dont remember how I inserted the camera on the physical robot and then positioned it on the scene tree
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/718347886877736991/unknown.png)
%end


now Im trying to do the same thing on the sojourner robot

##### David Mansolino [Cyberbotics] 06/05/2020 06:22:02
You simply need to select the 'extensionSlot' (name might be different on different robot) and clock the '+' button on top of the scene-tree.

##### Clara Cardoso Ferreira 06/05/2020 06:23:47
OMG, I was completely overthinking it. Thanks a bunch

##### David Mansolino [Cyberbotics] 06/05/2020 06:24:04
You're welcome 😉

##### dimple.bhuta 06/05/2020 06:36:17
`@David Mansolino` Thank you for your help by changing the GPS field from WGS84 to local and tweaking my controller I was able to correctly move my robot on an osm map. Once again thank you for all your help.

##### David Mansolino [Cyberbotics] 06/05/2020 06:39:49
You're welcome, thank you for the feedback!

##### Simon Steinmann [Moderator] 06/05/2020 10:14:20
Hey, do you guys have more detailed documentation about webot's fluid dynamics capabilities?


Is it based on an open source engine like ODE? what are the capabilities and restrictions, perhaps compared to other programs?

##### Olivier Michel [Cyberbotics] 06/05/2020 10:16:35
Hi, we don't have more documentation than the one in the Webots reference manual. To get more information, you should look into the source code of our ODE fork.


[https://github.com/cyberbotics/webots/tree/master/src/ode/ode/src/fluid\_dynamics](https://github.com/cyberbotics/webots/tree/master/src/ode/ode/src/fluid_dynamics)

##### Simon Steinmann [Moderator] 06/05/2020 10:21:16
I'm guessing the main application would be buoyancy and drag. But I'm guessing that is just approximations and for lower velocities? As proper CFD is quite complex and computationally intensive

##### David Mansolino [Cyberbotics] 06/05/2020 10:33:13
Yes indeed the model is quite simple and works better for low velocity, but it gives pretty realistic result for most of the underwater and flyign robots.

##### Simon Steinmann [Moderator] 06/05/2020 11:43:37
Is there a way to get all motors (or sensors) from a node? Without having to explicitly naming all of them?

##### David Mansolino [Cyberbotics] 06/05/2020 11:44:16
What do you mean from a node? You want to get all the motors available in a robot from the controller?

##### Simon Steinmann [Moderator] 06/05/2020 11:45:04
lets say I add a gripper to my robot arm. I give it a DEF. Can I extract all the motors contained in that gripper?

##### David Mansolino [Cyberbotics] 06/05/2020 11:46:21
Ok from a supervisor then, yes this is possible, but not so easy, you will have to parse the node tree from the supervisor and for each node you can check it's field.

##### Simon Steinmann [Moderator] 06/05/2020 11:56:03
how do I parse the node tree? I can't find the function for that

##### David Mansolino [Cyberbotics] 06/05/2020 11:56:54
You should get the 'children'/'endpoint' field of the current node, then get all the nodes in this field and do the same recursively on thoose nodes.

##### Simon Steinmann [Moderator] 06/05/2020 11:58:09
okay, I'll have a look

##### nelsondmmg 06/05/2020 12:14:55
I'm trying to use the object Crossroad to create a T-intersection. When I enable bottom and bounding box the following error appears: 

webots2020a/projects/objects/road/protos/Crossroad.proto':56:28: error: Did not find a 'DEF CROSSROAD\_APPEARANCE' to match 'USE CROSSROAD\_APPEARANCE'.

Indeed, the object appears How can I solve this issue?

##### David Mansolino [Cyberbotics] 06/05/2020 12:20:05
Can you share the exact parameters you are using for the crossroad?

##### nelsondmmg 06/05/2020 12:22:50

%figure
![webots.png](https://cdn.discordapp.com/attachments/565154703139405824/718439690797187161/webots.png)
%end

##### David Mansolino [Cyberbotics] 06/05/2020 12:24:09
thank you, let me check this


`@nelsondmmg` you are right, it seems there is an issue with the crossroad proto when setting the `bottom` field to true, here is a patch: [https://github.com/cyberbotics/webots/pull/1731/files](https://github.com/cyberbotics/webots/pull/1731/files)

It will be included in the next version of Webots (and in the nightly build from tomorrow: [https://github.com/cyberbotics/webots/releases](https://github.com/cyberbotics/webots/releases))

##### nelsondmmg 06/05/2020 12:55:44
Ok, thanks

##### David Mansolino [Cyberbotics] 06/05/2020 12:55:54
You're welcome

##### tilly 06/05/2020 14:09:19
hi, is it possible to show the communication range (display in the 3 d simulation) for the emitter module ?

##### David Mansolino [Cyberbotics] 06/05/2020 14:11:20
Unfortunately, this is no possible out of the box, but you can use a Shape node with a Spere as geometry, such as here: [https://cyberbotics.com/doc/guide/samples-devices#emitter\_receiver-wbt](https://cyberbotics.com/doc/guide/samples-devices#emitter_receiver-wbt)

##### tilly 06/05/2020 14:12:49
much thanks ill try it 🙂


have a nice weekend

##### David Mansolino [Cyberbotics] 06/05/2020 14:13:04
You're welcome!


Have a nice week-end too!

##### Lussfer 06/05/2020 14:28:00
> `@Lussfer` yes this is possible, however, you have to modify the runtime.ini file () to add the path to your custom ros message package path: [https://github.com/cyberbotics/webots/blob/master/projects/languages/ros/controllers/ros\_python/runtime.ini](https://github.com/cyberbotics/webots/blob/master/projects/languages/ros/controllers/ros_python/runtime.ini)

`@David Mansolino`



So should I just create a new environment variable and assign the folder path where my new custom message is located?

##### David Mansolino [Cyberbotics] 06/05/2020 14:29:52
You should be able to just add one more path to the `PYTHONPATH` variable already present in th efile.

##### Lussfer 06/05/2020 14:39:36
Oh ok, thank you :)

##### David Mansolino [Cyberbotics] 06/05/2020 14:39:43
You're welcome

##### Lussfer 06/05/2020 14:52:16
`/home/lussfer/catkin_ws/src/webots_ros/msg` as a path but i will still getting import error


i am using `from webots_ros import custom_msg` as my import statement


not sure if i am messing up with path variable or my import statement

##### David Mansolino [Cyberbotics] 06/05/2020 14:53:15
Did yo compiled the message? Is the Python equivalent of your message already generated?

##### Lussfer 06/05/2020 14:53:28
`from webots_ros.msg import custom_msg` is the correct import statement

##### David Mansolino [Cyberbotics] 06/05/2020 14:53:46
> `from webots_ros.msg import custom_msg` is the correct import statement

`@Lussfer` yes that part looks correct

##### Lussfer 06/05/2020 14:54:35
i have able to use the custom message when my simple ros publisher and listener


i am able to*

##### David Mansolino [Cyberbotics] 06/05/2020 14:57:59
Ok, then how did you edit this line?

[https://github.com/cyberbotics/webots/blob/master/projects/languages/ros/controllers/ros\_python/runtime.ini#L2](https://github.com/cyberbotics/webots/blob/master/projects/languages/ros/controllers/ros_python/runtime.ini#L2)

##### Lussfer 06/05/2020 14:58:44
currently it is like this `PYTHONPATH=/home/lussfer/catkin_ws/devel/lib/python3/dist-packages:/opt/ros/melodic/lib/python2.7/dist-packages:/home/lussfer/catkin_ws/src/webots_ros`


i also tried using `PYTHONPATH=/home/lussfer/catkin_ws/devel/lib/python3/dist-packages:/opt/ros/melodic/lib/python2.7/dist-packages:/home/lussfer/catkin_ws/src/webots_ros/msg`


since the custom\_msg.msg is in msg folder

##### David Mansolino [Cyberbotics] 06/05/2020 15:01:11
The `/home/lussfer/catkin_ws/src/webots_ros/msg` part looks useless as this are the sources, but the actuall python files should be located somewhere like `/home/lussfer/catkin_ws/devel/lib/python3/dist-packages`.

##### Lussfer 06/05/2020 15:04:06
ah so i do have \_custom\_msg.py and \_custom\_msg.cpy under /home/lussfer/catkin\_ws/devel/lib/python3/dist-packages/webots\_ros/msg is that what you meant by compiled python files?

##### Simon Steinmann [Moderator] 06/05/2020 15:12:48
`@Lussfer` do you automatically source your ros workspace when opening a terminal?


in the .bashrc

##### Lussfer 06/05/2020 15:13:44
i usually run my source commands

```source /devel/setup.bash
source /opt/ros/melodic/setup.bash
```

##### David Mansolino [Cyberbotics] 06/05/2020 15:13:46
> ah so i do have \_custom\_msg.py and \_custom\_msg.cpy under /home/lussfer/catkin\_ws/devel/lib/python3/dist-packages/webots\_ros/msg is that what you meant by compiled python files?

`@Lussfer` Yes exactly

##### Simon Steinmann [Moderator] 06/05/2020 15:14:11
My runtime.ini looks like this:

`[environment variables with relative paths]

PYTHONPATH=$(PYTHONPATH):$(WEBOTS\_HOME)/projects/languages/ros/controllers/ros\_python/python/site-packages:$(WEBOTS\_HOME)/projects/languages/ros/controllers/ros\_python/kinetic/dist-packages



[environment variables]

ROS\_LOG\_DIR=ros\_python\_log

ROS\_PACKAGE\_PATH=$(ROS\_PACKAGE\_PATH):$(WEBOTS\_HOME)/projects/languages/ros/controllers/ros\_python/kinetic/share

ROS\_MASTER\_URI=http://localhost:11311`


if you open your terminal, source your workspace, then you can simply run webots from the terminal using 'webots'


it will then use your path definitions


this way you only have to edit the runtime.ini once. And you can use all packages you have in your ROS install

##### Lussfer 06/05/2020 15:15:58
ah i see


thats pretty neat


thank you

##### Simon Steinmann [Moderator] 06/05/2020 15:16:28
you're welcome... struggled with this myself ^^


let me know if it works

##### Lussfer 06/05/2020 15:16:41
for sure


`@Simon Steinmann` its recognizing my custom message now. Thank you. so apparently if i open webots by clicking the application icon it doesn't recognize my custom message but if i open webots through terminal as you said, it is recognizing the custom message


reverted back my runtime.ini file to what i originally had and still works if i open webots through terminal

##### Lifebinder (tsampazk) 06/05/2020 17:42:43
Hello! I am using Python and i've been wondering if there's a way to pass object arguments (like a class object) to a robot's controller? I create the robot with importMFNodeFromString via a supervisor controller and i would like to initialize some objects there and pass them to the robot controller.

##### dimple.bhuta 06/06/2020 08:49:33
Hello I have gone through the documentation. I wanted to verify that the the rotational field of robots/vehicles is quaternions.


TeslaModel3 {

  translation 3.46 0.318652 -118.22

  rotation  -0.00487135 0.999985 0.00235245 1.57488

  name "agent\_0"

  controller "ros\_automobile"

  controllerArgs "--name=agent\_0 --clock --use-sim-time"

  sensorsSlotCenter [

    GPS {

    }

  ]

}


and if there is a reference code to obtain starting translational/rotational coordinates of a vehicle given consecutive reference x,y coordinates

##### Simon Steinmann [Moderator] 06/06/2020 10:51:27
`@dimple.bhuta` It is not quaternion. This explains it: [https://www.cyberbotics.com/doc/reference/transform?tab-language=python](https://www.cyberbotics.com/doc/reference/transform?tab-language=python)


Can you elaborate your second question?

##### dimple.bhuta 06/06/2020 10:55:18
Okay so in the wbt file you specify the translation/rotation coordinates and car spawns at that particular location in the map. I am trying to write a code that generates the car during coding/real time and based on my coordinates *


(that I have of the road map)


i need to figure out the starting translation (i have figured this out). or rotation coordinates. So i am trying to write the code that calculates these and starts the car from the calculated position in the map.


Thank you for directing me towards the documentation


I am just confused about how to calculate rotation coordinates

##### Simon Steinmann [Moderator] 06/06/2020 10:58:07
are you using a supervisor controller?

##### dimple.bhuta 06/06/2020 10:58:08
So if there is any documentation/formula to get those coordinates


yes

##### Simon Steinmann [Moderator] 06/06/2020 10:58:49
I made a commit to the documentation, but it is not live yet. Take a look at this example code. Perhaps it will help


> `from controller import Supervisor

> import numpy as np

> 

> robot = Supervisor()

> ur10e = robot.getFromDef('ur10e')

> box = robot.getFromDef('box')

> 

> \# get the transposed rotation matrix of the robot, so we can calculate poses of everything relative to it

> \# get orientation of the Node we want as our new reference frame and turn it into numpy array. Returns 1-dim list of len=9

> rot\_ur10e = np.array(ur10e.getOrientation())

> \# reshape into a 3x3 rotation matrix

> rot\_ur10e.reshape(3, 3)

> \# transpose the matrix, because we need world relative to the robot, not the robot relative to world

> rot\_ur10e = np.transpose(rot\_ur10e)

> 

> \# get the translation between the robot and the world. Basically where the origin of our new realative frame is. 

> \# no need to use the reverse vector, as we will subtract instead of add it later

> pos\_ur10e = np.array(ur10e.getPosition())

> 

> 

> \# box position relative to world

> box\_pos\_world = np.array(box.getPosition())

> \# calculate the relative translation between the box and the robot

> box\_pos\_world = np.subtract(box\_pos\_world, pos\_ur10e)

> \# matrix multiplication with rotation matrix. Box pos relative to robot

> box\_pos\_robot = np.dot(rot\_ur10e, box\_pos\_world)

> 

> \# calculate the orientation of the box, relative to the robot. All in one line

> box\_rot\_robot = np.dot(rot\_ur10e, np.array(box.getOrientation()).reshape(3, 3)) `

##### dimple.bhuta 06/06/2020 10:59:19
Ok thanks a lot

##### Simon Steinmann [Moderator] 06/06/2020 10:59:22
it's python

##### dimple.bhuta 06/06/2020 10:59:34
yeah thank you i am fine with python

##### Simon Steinmann [Moderator] 06/06/2020 10:59:56
perhaps copy it into your editor for proper format

##### dimple.bhuta 06/06/2020 11:00:25
ok thanks a lot

##### Simon Steinmann [Moderator] 06/06/2020 11:00:27
If you want to calculate the position and orientation of any node relative to any other node, you can take a look at this example in python. It should be easily adaptable to any other language, as it uses simple matrix and vector calculations.


that's what the code does

##### dimple.bhuta 06/06/2020 11:01:10
0k

##### Simon Steinmann [Moderator] 06/06/2020 11:20:18
`@dimple.bhuta` I also wrote some code to convert the orientation to quaternion. Let me know if you need that too

##### dimple.bhuta 06/06/2020 11:22:17
Thanks a lot. I am using ros, so it does have a function to convert that. Its just I wasnt understanding the rotation thing. Thank you though for all your help.

##### Simon Steinmann [Moderator] 06/06/2020 11:23:05
you're welcome 🙂


If you have webots - ROS relatied questions, I might be able to help, implemented it too. Same with Reinforcement Learning

##### dimple.bhuta 06/06/2020 11:24:09
Great. i will definitely ping you.

##### David Mansolino [Cyberbotics] 06/08/2020 05:33:09
> Hello! I am using Python and i've been wondering if there's a way to pass object arguments (like a class object) to a robot's controller? I create the robot with importMFNodeFromString via a supervisor controller and i would like to initialize some objects there and pass them to the robot controller.

`@Lifebinder (tsampazk)` when you import the robot you can set the `controllerArgs` field to set arguments of the controller in your import string. Would this be enough?

##### cakar 06/08/2020 06:27:06
hello is there an easy way to make robot go back to its starting point in an obstacled enviroment?thanks in advance

##### Olivier Michel [Cyberbotics] 06/08/2020 06:27:57
Hi, the easiest way is to use a supervisor to reset the simulation. Or simply reset the robot to its initial position.

##### cakar 06/08/2020 06:28:37
what about during the simulation?

##### Olivier Michel [Cyberbotics] 06/08/2020 06:29:03
Yes, that is during the simulation. Do you know what a supervisor is?

##### cakar 06/08/2020 06:29:24
not exactly


ı know that i can a get a translation value out of it, thats all

##### Olivier Michel [Cyberbotics] 06/08/2020 06:31:01
You can also set a translation for an object while the simulation is running.

##### cakar 06/08/2020 06:31:51
ok thank you

##### yash 06/08/2020 06:40:19
Hello ! Wanted to know if there are any resources for occupancy grid mapping and kalman filter localization for implementing in WEBOTS .?

##### David Mansolino [Cyberbotics] 06/08/2020 06:41:48
> Hello ! Wanted to know if there are any resources for occupancy grid mapping and kalman filter localization for implementing in WEBOTS .?

`@yash` not as I know.

##### yash 06/08/2020 06:44:57
Okay , but mapping will be possible in Webots .?

##### David Mansolino [Cyberbotics] 06/08/2020 06:45:10
Yes of course!


You can use distance sensors, lidar, or any distance measurment sensor to create a map.

##### yash 06/08/2020 06:46:01
Alright thank you , will try it out !

##### David Mansolino [Cyberbotics] 06/08/2020 06:46:22
This example might interest you: [https://cyberbotics.com/doc/guide/samples-howto#sick\_terrain\_scanning-wbt](https://cyberbotics.com/doc/guide/samples-howto#sick_terrain_scanning-wbt)


You're welcome!

##### yash 06/08/2020 06:48:02
> This example might interest you: [https://cyberbotics.com/doc/guide/samples-howto#sick\_terrain\_scanning-wbt](https://cyberbotics.com/doc/guide/samples-howto#sick_terrain_scanning-wbt)

`@David Mansolino`  okay 👍

##### nelsondmmg 06/08/2020 07:27:58
Hi, the following problem keeps happening in my vehicle simulations. Each vehicle's tire penetrates the road, and the effects of such phenomena can be seen in the vehicle's movement. Which parameters should I change to stop this behavior? Thanks.
%figure
![webPhysics.png](https://cdn.discordapp.com/attachments/565154703139405824/719452650084630528/webPhysics.png)
%end

##### Stefania Pedrazzi [Cyberbotics] 06/08/2020 07:40:30
Hi `@nelsondmmg`, you should decrease the `softCFM` value of the ContactProperties defined for the `ToyotaPriusWheels` material and the road material.  `softCFM 1e-05` is usually the correct value in the distributed examples. Did you modify the Prius car model?

##### nelsondmmg 06/08/2020 07:42:02
What do you mean by "Change the Prius car model"? Changes in the PROTO file? I don' think so.

##### Stefania Pedrazzi [Cyberbotics] 06/08/2020 07:42:55
Yes, in the PROTO file  or if you added any heavy objects/devices to it (in the scene tree)

##### nelsondmmg 06/08/2020 07:43:37
No. I added only sensors (camera, GPS, receiver, emitter, IMU).

##### Stefania Pedrazzi [Cyberbotics] 06/08/2020 07:44:35
Ok. If you set for example the softCFM value to 1e-06 you should immediately see a difference and the car should be lifted up a little bit (maybe enough).

##### nelsondmmg 06/08/2020 07:56:19
I changed to 1e-7 and the behavior remained the same. So I replace the Prius with a model 3 and it worked as it should. Thanks.

##### Stefania Pedrazzi [Cyberbotics] 06/08/2020 08:09:30
Ok, so then the ContactProperties node doesn't target the correct material for your Prius model.

##### David Mansolino [Cyberbotics] 06/08/2020 08:18:11
The contact material for the prius is called 'ToyotaPriusWheels'.

##### Lifebinder (tsampazk) 06/08/2020 09:24:37
`@David Mansolino` Thank you, i resorted to pickling objects and loading them in the other controller. As far as i can tell the controllerArgs cannot be used for passing objects?

##### David Mansolino [Cyberbotics] 06/08/2020 09:25:49
What kind of objects you want to pass exactly?

##### Lifebinder (tsampazk) 06/08/2020 09:27:42
just a class object of a library i use

##### David Mansolino [Cyberbotics] 06/08/2020 09:39:19
Unfortunately, this is not possible, you somehow have to convert it to a string to pass it in the import

##### Lifebinder (tsampazk) 06/08/2020 09:50:47
ok david, thank you very much. I circumvented the issue by pickling the objects using pythons pickle module for object serialization 🙂

##### black\_hammer\_67 06/08/2020 11:38:12
Hello all, i'm trying to add a camera on a custom robot, i add it as a children but i am getting error:  device with tag=12288 not found. when trying to activate it


in fact i were using as tag the "name" of the camera, now i set it to integer 1 and it works but i cant understand why


where i can find the device tag ?

##### David Mansolino [Cyberbotics] 06/08/2020 12:18:30
Did you tried to save and revert the simulation after addign the camera ?

##### elkelkmuh 06/08/2020 14:45:48
Hi `@David Mansolino`  can I use supervisor for op3. That is receiver emiter like as in op2.[my\_controllerop3]     self.emitter.send(message.encode('utf-8'))

[my\_controllerop3] AttributeError: 'NoneType' object has no attribute 'send'

##### David Mansolino [Cyberbotics] 06/08/2020 14:47:52
That message indicates that your are not gettign correctly the emitter..

##### elkelkmuh 06/08/2020 15:21:28
`@David Mansolino`  same code works for op2.self.emitter = self.getEmitter('emitter')

        self.receiver = self.getReceiver('receiver')

        self.receiver.enable(self.timeStep)



[my\_controllerop3]   File "my\_controllerop3.py", line 92, in initalize

[my\_controllerop3]     self.receiver.enable(self.timeStep)

[my\_controllerop3] AttributeError: 'NoneType' object has no attribute 'enable'

##### black\_hammer\_67 06/08/2020 17:03:36
`@David Mansolino` yes i tried, finally i figured out that this issue is only on C as in other languages as python the tag is a string, the only thing i dont get is why in C it has to be 1, what indicates that ?

##### TheWiseSidney 06/08/2020 17:06:25
sub, im trying to include Python.h in webots. This is what inside my makefile, it builds perfectly fine but when i run the simulation i get an error: (WARNING: RobotVisionTestController: The process crashed some time after starting successfully.

WARNING: 'RobotVisionTestController' controller crashed.)
%figure
![python_screen.png](https://cdn.discordapp.com/attachments/565154703139405824/719598220149260379/python_screen.png)
%end


is this the right way to include a lib?

##### black\_hammer\_67 06/08/2020 17:07:02
also I am trying to build a custom vehicle with 2 rear rotational wheels and 2 front steering wheels and atm I am trying with 4 motor, one on each joint, and the front once having them rotate around y axis. The problem is that rear wheels are spinning and fronts are not because they are not free to move. Can u help me to solve this problem ? Or there is a different approach for steering wheels ?

##### David Mansolino [Cyberbotics] 06/09/2020 05:08:15
`@elkelkmuh` you should make sure that your robot has an emitter device called 'emitter' and if not you can add one in the slot fields.


> `@David Mansolino` yes i tried, finally i figured out that this issue is only on C as in other languages as python the tag is a string, the only thing i dont get is why in C it has to be 1, what indicates that ?

`@black_hammer_67` that's strange, it shouldn't, escpecially because the Python API is calling the C one, so it is the exacte same function that is called at the end.


> sub, im trying to include Python.h in webots. This is what inside my makefile, it builds perfectly fine but when i run the simulation i get an error: (WARNING: RobotVisionTestController: The process crashed some time after starting successfully.

> WARNING: 'RobotVisionTestController' controller crashed.)

`@TheWiseSidney` Yes, what you did looks correct to use the python lib in C/C++, howerver, why not directly writting your controller in Python?


> also I am trying to build a custom vehicle with 2 rear rotational wheels and 2 front steering wheels and atm I am trying with 4 motor, one on each joint, and the front once having them rotate around y axis. The problem is that rear wheels are spinning and fronts are not because they are not free to move. Can u help me to solve this problem ? Or there is a different approach for steering wheels ?

`@black_hammer_67` the front one should use a Hinge2Joint node instead of a simple 'HingeJoint' node. BUt an even better solution would be to use the AckermannVehicle node: [https://cyberbotics.com/doc/automobile/ackermannvehicle](https://cyberbotics.com/doc/automobile/ackermannvehicle)

##### elkelkmuh 06/09/2020 05:32:32
`@David Mansolino` Previously i added it to the robot node. I will add to body slot of op3 now. I will add both emi ter and receiver tiop3 body slot.  Correct?  Mant thanks

##### David Mansolino [Cyberbotics] 06/09/2020 05:33:13
if you use the receiver, fur sure you need it..

##### elkelkmuh 06/09/2020 06:12:48
Should i delete the emiter and receiver in children in robot node? Because i added into body slot.

##### David Mansolino [Cyberbotics] 06/09/2020 06:13:20
no, they just should not have the same name

##### elkelkmuh 06/09/2020 06:14:39
`@David Mansolino`  thank you.

##### TheWiseSidney 06/09/2020 07:35:09
`@David Mansolino` Thnx it should totaly work but it does not, we already have a controller in .cpp thats why im trying to include python.h to create an embadded system. Have any idea what could be going wrong?

##### David Mansolino [Cyberbotics] 06/09/2020 07:35:43
Maybe you can create a second controller i python and communicate with emitter-receiver.

##### Stanislas Larnier 06/09/2020 10:10:20
Hello everyone. I am trying to use a motoman arm gp8. I have a problem. When I launch the simulation, the arm is falling. I add staticBase true in the proto file but the base is not static. Is there something else, I could do. Am I missing something?

##### David Mansolino [Cyberbotics] 06/09/2020 10:37:49
Hi `@Stanislas Larnier`, where does this model of the motoman gp8 arm comes from, did you created it yourself?

In any case, to make it static with the environment, the root Solid/Robot node should have a boundign object but no physics node (and all the childrens Solid nodes should have both).

##### black\_hammer\_67 06/09/2020 11:20:31
`@David Mansolino`  so i tried the Hinge2joint with a rotational motor on device one and nothing on device 2, now the wheels are free to move on the x axis but i am trying to steer the wheels by setting the position on the motors and nothing happens

##### David Mansolino [Cyberbotics] 06/09/2020 11:31:10
Maybe the maxtorque of the motor is not high enough

##### black\_hammer\_67 06/09/2020 11:33:35

%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/719876848062038047/unknown.png)
%end


i set it to 100000 but the same happens

##### David Mansolino [Cyberbotics] 06/09/2020 11:34:10
did you set all the require boundign object and phsyics nodes?

##### black\_hammer\_67 06/09/2020 11:35:51
yes and i am concerned about the case that the body doesn't let the wheel steer because of collision, but i can't see not a little movement

##### David Mansolino [Cyberbotics] 06/09/2020 11:40:52
Have you tried starting from an AkermannVehicle node?

##### black\_hammer\_67 06/09/2020 11:42:48
i am trying this right now, what building process should I follow ? Like making a body and add the Ackermann vehicle as a child or the starting node is the vehicle ?

##### David Mansolino [Cyberbotics] 06/09/2020 11:46:36
No it is the contrary, add the ackermann vehicle first, and then add the body in the `extensionSlot` field.

##### black\_hammer\_67 06/09/2020 11:47:42
thank you, I was confused because I couldn't find the children node


one last question, is there a way to take a robot from the presets like the pioneer and attach a camera to it ?

##### David Mansolino [Cyberbotics] 06/09/2020 11:52:22
Yes, the same way as for the ackermannVehicle you can find an `extensionSlot` field allowing you to add more node.


Depending on the robot, the name of the field might change.

##### black\_hammer\_67 06/09/2020 11:58:20
ok thank you a lot, you were very helpful

##### David Mansolino [Cyberbotics] 06/09/2020 12:10:36
You're welcome!

##### Musaab 06/09/2020 13:11:04
hi guys can someone help me with this error?
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/719901383666696273/unknown.png)
%end

##### Olivier Michel [Cyberbotics] 06/09/2020 13:12:07
Hi, that means you are trying to get a handle to a device named "BACK", however, no such device exists in your Robot...

##### Musaab 06/09/2020 13:12:41
this is my controller
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/719901789385654302/unknown.png)
%end

##### Olivier Michel [Cyberbotics] 06/09/2020 13:13:37
Yes, there is no DistanceSensor device named "BACK" in your Robot model...


Check it in your world file or Robot proto file.

##### Musaab 06/09/2020 13:15:34
I do have DEF Proto file in world file named Back



%figure
![MicrosoftTeams-image.png](https://cdn.discordapp.com/attachments/565154703139405824/719902868320288828/MicrosoftTeams-image.png)
%end

##### Olivier Michel [Cyberbotics] 06/09/2020 13:17:52
It's not the DEF name, but the DistanceSensor.name that should match (and it's case sensitive).


If you expand the DistanceSensor node, you will see it.

##### Musaab 06/09/2020 13:19:58
Thank you!!!


fixed!

##### Robin-Wagenaar 06/09/2020 13:57:53
Hello, can anyone explain me how I can change the python version that Webots uses? I'm on a Mac and I have installed python 3.7 now, but I need to know how I can switch to this version of Python

##### David Mansolino [Cyberbotics] 06/09/2020 13:58:47
You can simply do this from the preferences, where you can specify the Python command: [https://cyberbotics.com/doc/guide/preferences#general](https://cyberbotics.com/doc/guide/preferences#general)

##### Robin-Wagenaar 06/09/2020 13:59:16
Ah it's that simple. Thanks very much!

##### David Mansolino [Cyberbotics] 06/09/2020 13:59:23
You're welcome!

##### mearvind 06/09/2020 14:29:05
I am new to webots, Does it support sharing of data amoung controllers in same world or we need to use our own file handling? If it supports then how?

##### David Mansolino [Cyberbotics] 06/09/2020 14:34:37
Hi, welcome!


Yes, it does, you can use the emitter-receiver mechanism to transmit data: 

  - [https://www.cyberbotics.com/doc/reference/emitter](https://www.cyberbotics.com/doc/reference/emitter)

  - [https://www.cyberbotics.com/doc/reference/receiver](https://www.cyberbotics.com/doc/reference/receiver)

##### Stanislas Larnier 06/10/2020 00:56:14
Hi `@David Mansolino`. I made a conversion from the urdf [https://github.com/ros-industrial/motoman/tree/kinetic-devel/motoman\_gp8\_support/urdf](https://github.com/ros-industrial/motoman/tree/kinetic-devel/motoman_gp8_support/urdf). I will try what you said. Thank you for your answer.

##### David Mansolino [Cyberbotics] 06/10/2020 05:18:45
You're welcome.

##### nelsondmmg 06/10/2020 08:43:28
Does WeBots account for lateral slip in vehicle's tires (is there a lateral contact coefficient in the joint defined by tire-road) ?

##### David Mansolino [Cyberbotics] 06/10/2020 08:45:10
By default friction is symetric, in both direction, but you can of course change the contact properties of your simulation world to make them asymetric, see the contact properties doc for more information: [https://www.cyberbotics.com/doc/reference/contactproperties](https://www.cyberbotics.com/doc/reference/contactproperties)

##### Gautier 06/10/2020 08:48:21
Hello ! I have a little question on the utilization of the standard ros controller on camera

##### nelsondmmg 06/10/2020 08:48:33
Thanks!

##### David Mansolino [Cyberbotics] 06/10/2020 08:48:36
Hi, yes what is your question?


> Thanks!

`@nelsondmmg` you're welcome

##### Gautier 06/10/2020 08:48:54
So, I have a robot with the default ros controller with just a camera inside.


the controlleur has as controllerArgs " --use-sim-time "


I enable the camera with a rosservice call , and right after, call a rostopic hz on the topic of the camera, and it seems to publish at 125 hz



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/720198431691505784/unknown.png)
%end


So my question would be : does the default ros controller really publish (by default) the camera topic at 125 hz ? If so, how can I diminish that update rate ?

##### David Mansolino [Cyberbotics] 06/10/2020 08:54:22
It will depend on the time step of the simulation and the speed at which run the simulation, but yes it is possible that it publishes at 125Hz. To reduce it, when you call the `/camera/enable` service, you should assigne a `value` to the service that is bigger (the value indicates the refresh period).

##### Gautier 06/10/2020 08:57:06
So, the publish rate expressed with 'rostopic hz ' is relative to the simulation time instead of ros time ? The timeStep is 8ms, and the simulation runs at 0.10x, so that would means that the topic is updated at around 12.5 hz ?

##### David Mansolino [Cyberbotics] 06/10/2020 08:59:01
It all depends if `rostopic hz` is configured to use sim time or not, but in your case it seems to be the case since 1000ms / 8ms = 125Hz (if it was based on the real time it would be indeed 12.5Hz if your simulation runs at 0.1x)

##### Gautier 06/10/2020 09:02:37
Ok, i understand. Thank you a lot !

##### David Mansolino [Cyberbotics] 06/10/2020 09:03:10
You're welcome!

##### Tosidis 06/10/2020 10:41:43
Hello, 

i am having a problem getting cameraData.

sometimes it works as intended, sometimes it returns None

##### Olivier Michel [Cyberbotics] 06/10/2020 10:42:17
Are you sure the camera was enabled with the same time step as the control loop?


`wb_camera_enable(camera, 32);`

`wb_robot_step(32);`

##### Tosidis 06/10/2020 10:44:08
timestep = int(robot.getBasicTimeStep())

camera = robot.getCamera('camera')

camera.enable(timestep)


robot is my Supervisor


(python)

##### Olivier Michel [Cyberbotics] 06/10/2020 10:59:20
Do you call the Robot.step() method with the timestep argument between calls to Camera.getImage()?

##### Tosidis 06/10/2020 11:13:30
yeah, it now seems to work consistently (don't ask me why)

##### Soyboy 06/10/2020 12:39:15
Hello, I just wanted to know if it is possible to physically connect two robots

##### David Mansolino [Cyberbotics] 06/10/2020 12:40:10
Hi, yes, you can have one robot that is a child of the other, or use connector devices.

##### Kyrex 06/10/2020 12:42:43
how can i bind qt and webots.I read website of webots but i couldnt find enough infos.

##### furkann 06/10/2020 12:43:36
> how can i bind qt and webots.I read website of webots but i couldnt find enough infos.

`@Kyrex` +

##### Stefania Pedrazzi [Cyberbotics] 06/10/2020 12:45:32
`@Kyrex` what do you want to do with Qt? Do you want to use it in a Webots C++ controller?

##### Kyrex 06/10/2020 12:48:04
> `@Kyrex` what do you want to do with Qt? Do you want to use it in a Webots C++ controller?

`@Stefania Pedrazzi` yea i created ui with qt and in this ui i want to send some commands to nao robot in webots simulator

##### Stefania Pedrazzi [Cyberbotics] 06/10/2020 12:54:51
Ok, so if it is a graphical Qt application the best approach would probably be to integrate it as a `robot window` controller plugin (note that this is deprecated and HTML/JS robot windows are preferred over Qt ones).

There are a couple of examples of Qt robot windows in the distributed samples, for example ` projects/robots/nex/plugins/robot_windows/fire_bird_6_window` used in this simulation [https://www.cyberbotics.com/doc/guide/firebird6#fire\_bird\_6-wbt](https://www.cyberbotics.com/doc/guide/firebird6#fire_bird_6-wbt)

##### Tosidis 06/10/2020 12:59:41
I was able to replicate the problem again (Not getting data from the camera)

I am running the controller by an external IDE. 

Script crashes -> reset simulation -> run controller -> run sim : i am not getting any data from the camera

Script crashes -> reset simulation -> run controller -> run sim -> reset simulation (before controller crash) and rerun it works as intended

##### Robin-Wagenaar 06/10/2020 13:21:56
Hello guys, does anyone know if it is possible to measure the weight of an object with a gripper in Webots? I have to measure the weight of a stone which will be picked up by a gripper, but I haven't found a way to do that yet.

##### Deleted User 06/10/2020 13:22:55
Can anyone help me? How can i build webots simulator on QT Creator? I designed GUI (button, labels etc.)  When i click the button, webots simulator should run.


I'm working on Ubuntu


[https://cyberbotics.com/doc/guide/using-your-ide?tab-language=c++](https://cyberbotics.com/doc/guide/using-your-ide?tab-language=c++) this links didn't help me 😦

##### Simon Steinmann [Moderator] 06/10/2020 13:28:13
`@Deleted User` did you set up your environment variables?

##### Stefania Pedrazzi [Cyberbotics] 06/10/2020 13:28:32
`@Deleted User` the instructions you posted are to compile a Webots controller in an IDE instead of the Webots editor. If you just want to start Webots from your app, then I suggest you to use something like QProcess to execute a shell command that starts the Webots application.

##### Soyboy 06/10/2020 13:30:30
> Hi, yes, you can have one robot that is a child of the other, or use connector devices.

`@David Mansolino`


Thank you

##### Deleted User 06/10/2020 13:46:35
> `@Deleted User` did you set up your environment variables?

`@Simon Steinmann` yep. I did. I edited QT.pro file like this.


> `@Deleted User` the instructions you posted are to compile a Webots controller in an IDE instead of the Webots editor. If you just want to start Webots from your app, then I suggest you to use something like QProcess to execute a shell command that starts the Webots application.

`@Stefania Pedrazzi` I want to use IDE instead of Text Editor.

##### nelsondmmg 06/10/2020 13:56:35
The WheelsDampingConstant is a constant c in an expression like F=c*w, with w being the angular velocity of the vehicle's axis (meaning it is a resistance force in each tire against the motor output)?

##### Darko Lukić [Cyberbotics] 06/10/2020 14:20:25
`@Robin-Wagenaar` TouchSensor can measure the force, maybe you can use it:

[https://cyberbotics.com/doc/reference/touchsensor#force-sensors](https://cyberbotics.com/doc/reference/touchsensor#force-sensors)

##### David Mansolino [Cyberbotics] 06/10/2020 14:22:55
> The WheelsDampingConstant is a constant c in an expression like F=c*w, with w being the angular velocity of the vehicle's axis (meaning it is a resistance force in each tire against the motor output)?

`@nelsondmmg` yes exaclty

##### nelsondmmg 06/10/2020 14:26:41
`@David Mansolino` The definition of c is for each wheel (so I have to multiply F by 4) ? Or it accounts all the resistance torque for all wheels ?

##### Deleted User 06/10/2020 14:27:34
Is Skeletal Tracking available on Microsoft Kinect?

##### Robin-Wagenaar 06/10/2020 14:29:10
Ah thanks `@Darko Lukić` , I'll take a look at it.

##### David Mansolino [Cyberbotics] 06/10/2020 14:30:39
`@nelsondmmg` it is for each wheel.

##### nelsondmmg 06/10/2020 14:30:51
Ok Thanks.

##### David Mansolino [Cyberbotics] 06/10/2020 14:31:04
> Is Skeletal Tracking available on Microsoft Kinect?

`@Deleted User` not out of the box, you have to implement your own interfeace in the controller.


> Ok Thanks.

`@nelsondmmg` you're welcome

##### Deleted User 06/10/2020 14:33:41
> `@Deleted User` not out of the box, you have to implement your own interfeace in the controller.

`@David Mansolino` how ? I'am new

##### David Mansolino [Cyberbotics] 06/10/2020 14:40:06
The controller is a program you can writte the code like any other program you would write, please find a tutorial here: [https://cyberbotics.com/doc/guide/tutorial-4-more-about-controllers](https://cyberbotics.com/doc/guide/tutorial-4-more-about-controllers)

##### nelsondmmg 06/10/2020 15:18:30
I'm trying to model the Tesla Model 3 using a dynamic bicycle model, but there is still a performance difference which I cannot explain. For the motor propulsion, I accounted the motor output accordingly ( min value between maxT and the maxP expression, eletric motor), with aerodynamic force and the wheels resistance torque (with 4*c*w as wheel damping). I am for the moment maintaining the steering angle equal to zero, but for the slip friction a model F=c*alpha will be used. Am I forgetting some longitudinal component ?


Result for 10 m/s step, red is the predicted, blue is the measured
%figure
![result.png](https://cdn.discordapp.com/attachments/565154703139405824/720296072995667968/result.png)
%end

##### Simon Steinmann [Moderator] 06/10/2020 15:20:06
what are the units of the graph?


and is that blue spike towards the end reproducible?

##### nelsondmmg 06/10/2020 15:20:44
seconds on X and m/s on Y

##### Simon Steinmann [Moderator] 06/10/2020 15:21:13
you mean timesteps? on x? cause seconds would be slow af


or ms probably

##### nelsondmmg 06/10/2020 15:21:37
Sorry, is ms

##### Simon Steinmann [Moderator] 06/10/2020 15:21:48
how did you generate the red line?

##### nelsondmmg 06/10/2020 15:22:15
Using the model that I described in the message

##### Simon Steinmann [Moderator] 06/10/2020 15:24:15
did you consider rotational energy of wheels?


hmm it also looks like the blue line would never reach 10 m/s. It looks like an asymptote. This would only be the case, if your max power equals the drag and friction losses at 10 m/s

##### nelsondmmg 06/10/2020 15:28:42
Which is the case, since at this point the throttle remains at the same value (because of the controller)

##### Simon Steinmann [Moderator] 06/10/2020 15:30:24
is the throttle constant, or do you control it? Because the red line suggest a sudden throttle change


we might not wanna spam too much here, switch to pm?

##### nelsondmmg 06/10/2020 15:31:34
Sure

##### Doc 06/10/2020 18:10:50
Hi again, is it possible to export video from webots with multiple camera angles (without repeating the recording process for each position)?

##### David Mansolino [Cyberbotics] 06/11/2020 05:00:33
Hi `@Doc` unfortunately not out of the box, only the viewpoint can genereate video, and only one viewpoint per simulation is allowed. However, the cameras can be used to save pictures at each step (a function of the API is available for this), you can then use these pictures to generates a video.

##### Stanislas Larnier 06/11/2020 06:25:40
Hello. In Webots, how can I obtain intrinsic parameters of a camera?

##### Stefania Pedrazzi [Cyberbotics] 06/11/2020 06:29:24
Hi `@Stanislas Larnier` you can retrieve the Camera parameters using the Camera API ([https://cyberbotics.com/doc/reference/camera](https://cyberbotics.com/doc/reference/camera)), for example the focal length, the near value, etc.

##### black\_hammer\_67 06/11/2020 09:15:08
Hello, i just moved my projects from windows to linux and installed all the of the required software i were using. I am trying to run a simulation with a controller that uses openCV but the python intepreter is giving me an error at the instruction "import cv2"



%figure
![Screenshot_from_2020-06-11_12-16-06.png](https://cdn.discordapp.com/attachments/565154703139405824/720567115563925564/Screenshot_from_2020-06-11_12-16-06.png)
%end

##### Stefania Pedrazzi [Cyberbotics] 06/11/2020 09:18:13
hi `@black_hammer_67`, did you try to start python3 from a terminal and type `import cv2` to check if openCV is correctly installed?

##### black\_hammer\_67 06/11/2020 09:18:51
yes


i checked the cv2.\_\_version\_\_ too


its 4.2


all work perfectly outside webots

##### Stefania Pedrazzi [Cyberbotics] 06/11/2020 09:19:46
did you install webots using the snap?

##### black\_hammer\_67 06/11/2020 09:20:11
yes straight from the ubuntu software

##### Stefania Pedrazzi [Cyberbotics] 06/11/2020 09:21:50
ok, so then Webots is running on the snap sandbox and the openCV you installed on the system is not available in the sandbox.


You have two options:

1) reinstall Webots from the debian or tarball package ([https://github.com/cyberbotics/webots/releases](https://github.com/cyberbotics/webots/releases))


2) run your controller external from the snap sandbox (see [https://www.cyberbotics.com/doc/guide/installation-procedure#extern-controllers](https://www.cyberbotics.com/doc/guide/installation-procedure#extern-controllers)) and use the snap installation

##### black\_hammer\_67 06/11/2020 09:24:32
i guess that i'll have similar problems later with tensorflow


so i think the best is to reinstall it

##### Stefania Pedrazzi [Cyberbotics] 06/11/2020 09:27:30
Yes, there will be the same issues. Using external controllers works even with tensorflow.

The difference between the two options is that with external controllers you have to start the controllers manually from a terminal, but yes having them starting automatically from Webots (i.e. using a different installation method than snap) is easier.

##### black\_hammer\_67 06/11/2020 09:29:17
ok thank u a lot , I wouldn't had find it out if you hadn't helped me

##### Stefania Pedrazzi [Cyberbotics] 06/11/2020 09:29:42
you're welcome!

##### black\_hammer\_67 06/11/2020 09:30:00
I'm installing the deb version and I'll let u know if there is any issues

##### Marian 06/11/2020 09:58:06
Hi WeBots team. I have got a funny bug. When I import a wrl model the WeBots GUI turns gray after I try to load that world. I'm not able to do any other input.

##### David Mansolino [Cyberbotics] 06/11/2020 09:59:54
Hi `@Marian` does the first import works fine?

##### dimple.bhuta 06/11/2020 10:00:26
`@David Mansolino` Hello, you had answered my question previously regarding this. But I still have some doubts. I am sorry I am reading the documentation and sample codes simultaneously.

I understand that in the wbt file I can specify the robot/ vehicle and give it name for example

DEF EGO\_VEHICLE TeslaModel3 {

  translation 6.38 0.4 174.59

  rotation 0 1 0 1.60078733165

  name "agent\_0"

  controller "ros\_automobile"

  controllerArgs "--name=agent\_0 --clock --use-sim-time"

  sensorsSlotCenter [

    GPS {

    }

  ]

}

In this section of wbt file I have specified Tesla vehicle's name as ego vehicle

And using supervisor I can reference it 

robot\_node = supervisor.getFromDef("EGO\_VEHICLE")

trans\_field = robot\_node.getField("translation")

##### Marian 06/11/2020 10:01:35
`@David Mansolino` It works as long as I don't try to load that world again.

##### David Mansolino [Cyberbotics] 06/11/2020 10:01:44
> `@David Mansolino` Hello, you had answered my question previously regarding this. But I still have some doubts. I am sorry I am reading the documentation and sample codes simultaneously.

`@dimple.bhuta` hi, what is the question exactly?


> `@David Mansolino` It works as long as I don't try to load that world again.

`@Marian` ok then it is probably an error on our side, can you please report the issue here including the world file (and ideally the wrml file too)?[https://github.com/cyberbotics/webots/issues/new?template=bug\_report.md](https://github.com/cyberbotics/webots/issues/new?template=bug_report.md)



Thank you

##### dimple.bhuta 06/11/2020 10:04:17
Sorry i was editing in same question

##### Marian 06/11/2020 10:04:47
`@David Mansolino` I'll do that. Thanks

##### dimple.bhuta 06/11/2020 10:05:01
The question is how to create EGO\_VEHICLE from the code


meaning I dont want to specify that there is a vehicle in simulation using wbt file


but to create it based on some predefined conditions


in that case will I require to generate a proto


i mean should i create a proto


and name is EGO\_VEHICLE and try to reference in via getfromDef

##### Simon Steinmann [Moderator] 06/11/2020 10:07:30
`@dimple.bhuta` do you want to generate the proto from your own code?

##### dimple.bhuta 06/11/2020 10:07:30
and than generate cars like EGO\_VEHICLE1, EGO\_VEHICLE2 etc

##### Simon Steinmann [Moderator] 06/11/2020 10:07:57
or use existing protos, and just spawn them in with your code, changing the DEF?

##### dimple.bhuta 06/11/2020 10:08:06
`@Simon Steinmann` I want to generate the vehicle from the code not sure about the proto


yes it will be better to use tesla model proto and spawn them


but i am still not understanding how exactly to do it


as i did try


robot\_node = supervisor.getFromDef("TeslaModel3") accessing the tesla model this way but its definitely wrong

##### Simon Steinmann [Moderator] 06/11/2020 10:09:51
does it have to be spawned dynamically, while running the simulation, or just once at the start?

##### dimple.bhuta 06/11/2020 10:10:08
no it has to be dynamic


and there should be multiple cars spawing at different times

##### Simon Steinmann [Moderator] 06/11/2020 10:10:34
> robot\_node = supervisor.getFromDef("TeslaModel3") accessing the tesla model this way but its definitely wrong

`@dimple.bhuta` this works right? you just need to know how to spawn a new tesla and assign it a DEF

##### dimple.bhuta 06/11/2020 10:10:37
thats why i cant specify it in  wbt file


No actually it didn't work. Also how can I assign it a def i mean a name to it

##### Simon Steinmann [Moderator] 06/11/2020 10:11:44
I do it using the GUI

##### dimple.bhuta 06/11/2020 10:12:02
okay

##### Simon Steinmann [Moderator] 06/11/2020 10:12:03
you click on the node and should see a DEF variable you can specify

##### dimple.bhuta 06/11/2020 10:12:16
so isnt it possible via code?

##### Simon Steinmann [Moderator] 06/11/2020 10:17:04
let me have a look, rebooted to linux

##### dimple.bhuta 06/11/2020 10:17:57
Also by specifying the vehicle name (specifying the tesla proto in wbt file and giving it "EGO\_VEHICLE" name) i can access the following classes

robot\_node = supervisor.getFromDef("EGO\_VEHICLE")

print (dir(robot\_node))



[ego\_vehicle] ['ACCELEROMETER', 'APPEARANCE', 'BACKGROUND', 'BALL\_JOINT', 'BALL\_JOINT\_PARAMETERS', 'BOX', 'BRAKE', 'CAMERA', 'CAPSULE', 'CHARGER', 'COLOR', 'COMPASS', 'CONE', 'CONNECTOR''setVelocity', 'setVisibility', 'this']

I mean there are more but due to space constraint
> **Attachment**: [message.txt](https://cdn.discordapp.com/attachments/565154703139405824/720582590645403729/message.txt)

##### Simon Steinmann [Moderator] 06/11/2020 10:18:53
you can access anything within that node

##### dimple.bhuta 06/11/2020 10:20:03
However if I do the same with tesla proto

robot\_node = supervisor.getFromDef("TeslaModel3")

print (dir(robot\_node))

following are the functions [ego\_vehicle] ['\_\_class\_\_', '\_\_delattr\_\_', '\_\_doc\_\_', '\_\_format\_\_', '\_\_getattribute\_\_', '\_\_hash\_\_', '\_\_init\_\_', '\_\_new\_\_', '\_\_reduce\_\_', '\_\_reduce\_ex\_\_', '\_\_repr\_\_', '\_\_setattr\_\_', '\_\_sizeof\_\_', '\_\_str\_\_', '\_\_subclasshook\_\_']

so I cant actually access the vehicle. hence I thought it was wrong way of accessing


`@Simon Steinmann` Thanks a lot. I will also simultaneously go through all your examples and see if I can figure it out. I was able to use your sumo\_supervisor example to add/delete vehicles on the go


but there is an issue using ros\_automobile controller


but thank you for all your help

##### Simon Steinmann [Moderator] 06/11/2020 10:21:23
it depends on the structure of your node. you might have to do something like: 

robot\_node.motor.get\_position()

##### dimple.bhuta 06/11/2020 10:21:36
ok


I will definitely look into it

##### Simon Steinmann [Moderator] 06/11/2020 10:26:14
which sumo\_sueprvisor example? Do you have a link?

##### dimple.bhuta 06/11/2020 10:27:46
I went through this /usr/local/webots/projects/default/controllers/sumo\_supervisor


and its corresponding proto and modified my code accordingly


you have an objects.py function


where code is written to generate vehicles based on departure time

##### Simon Steinmann [Moderator] 06/11/2020 10:29:07
I see it, having a look

##### dimple.bhuta 06/11/2020 10:29:12
i modified it to generate vehicles when I received a request from ros topic


thank you

##### Simon Steinmann [Moderator] 06/11/2020 10:41:45
`@dimple.bhuta`  If you check here, the node generated from the string has the DEF  of defName
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/720588582271713340/unknown.png)
%end


you should be able to adress or call the different vehicles by using

self.vehicles(number).node

##### dimple.bhuta 06/11/2020 11:06:08
I think I understand what needs to be done. Instead of Vehicle class that has been defined in Objects.py. I need to try to access the 'Car' class for ros\_automobile work. I will definitely give it a go. And if it works I share the results. Thank you `@Simon Steinmann`  for your help

##### Simon Steinmann [Moderator] 06/11/2020 11:09:44
`@dimple.bhuta` you're welcome 🙂


Is there already a proto for the 2 finger robotiq gripper?

##### David Mansolino [Cyberbotics] 06/11/2020 12:03:17
> Is there already a proto for the 2 finger robotiq gripper?

`@Simon Steinmann` I just created one in our development environment this morning: [https://cyberbotics.com/doc/guide/p-rob3?version=develop#gripper](https://cyberbotics.com/doc/guide/p-rob3?version=develop#gripper)

##### Simon Steinmann [Moderator] 06/11/2020 12:04:12
oh, but not the robotiq gripper?

##### David Mansolino [Cyberbotics] 06/11/2020 12:04:33
No not this one unfortunately.


But you should be able to use the urdfimport to create one: [https://github.com/cyberbotics/urdf2webots](https://github.com/cyberbotics/urdf2webots)

##### Simon Steinmann [Moderator] 06/11/2020 12:06:14
does this work with xarco and the dynamic urdf that most ros repos use?

##### David Mansolino [Cyberbotics] 06/11/2020 12:07:47
Unfortunately not, you have to generate an URDF file from the XACRO one with the xacro command.

##### Simon Steinmann [Moderator] 06/11/2020 12:08:22
you got that command or docu link by any chance?

##### David Mansolino [Cyberbotics] 06/11/2020 12:09:18
No but it is quite easy to find it on google (I did it already a few times 😅 )

##### Simon Steinmann [Moderator] 06/11/2020 12:09:36
thx, will have a look

##### David Mansolino [Cyberbotics] 06/11/2020 12:09:47
You're welcome

##### Simon Steinmann [Moderator] 06/11/2020 12:38:02
`@David Mansolino` I managed to do it. But I have a few questions:

what do these arguments do exactly? is there a documentation?

[--output=outputFile] [--box-collision] [--normal] [--disable-mesh-optimization]



- the generated proto is a robot node, while the 3f gripper included in webots is a solid node. Is this important?



- the gripper points sideways when attaching it to the endeffector of a robot arm, as the ros model goes along z axis, not y axis. How do I change this?

##### David Mansolino [Cyberbotics] 06/11/2020 12:39:22
You can use the '--help' argument to get more information about these arguments.


About the Robot, it might indeed be better to just transform it into a Solid node, but it all depends on what you want to do.


About the orientation, you might simply use the 'rotation' field to rotate it.

##### Simon Steinmann [Moderator] 06/11/2020 12:40:44
oh okay


would you recommend not disabling the mesh-optimization?


I want a proper end model, dont care about the speed

##### David Mansolino [Cyberbotics] 06/11/2020 12:41:56
Then if you don't care about the time spent to do the conversion I would recommend NOT to use the 'disable-mesh-optimization'.

##### Simon Steinmann [Moderator] 06/11/2020 12:42:58
to change it into a Solid, do I just replace Robot with Solid ontop of the proto file and remove the controller?



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/720619202024570927/unknown.png)
%end



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/720619275362238474/unknown.png)
%end

##### David Mansolino [Cyberbotics] 06/11/2020 12:43:53
Yes exactly!

##### Simon Steinmann [Moderator] 06/11/2020 13:06:44
I transformed the proto to base nodes, in order to edit it. Can I somehow convert the edited node back to proto?

##### David Mansolino [Cyberbotics] 06/11/2020 13:07:19
Not automatically, you have to do it manually: [https://cyberbotics.com/doc/guide/tutorial-7-your-first-proto](https://cyberbotics.com/doc/guide/tutorial-7-your-first-proto)

##### Simon Steinmann [Moderator] 06/11/2020 13:08:00
aww shucks... well then the colors will be all black 😄

##### Lussfer 06/11/2020 13:45:31
Is there way to reset drawing on display controller so we can draw again?

##### Stefania Pedrazzi [Cyberbotics] 06/11/2020 13:49:35
`@Lussfer`  yes, you can use the `wb_display_fill_rectangle` function to clear the display using for example a black color. I'm searching for an example..

##### Lussfer 06/11/2020 13:50:24
Ah cool


I think I get it, that's pretty neat


Thank you :)

##### Stefania Pedrazzi [Cyberbotics] 06/11/2020 13:51:54
you're welcome

##### lojik 06/11/2020 14:24:13
`@Lussfer` yes it works as `@Stefania Pedrazzi` said. For example, I do it like follow :



\# Clear display

disp\_stab.setColor(0x000000)

disp\_stab.fillRectangle(0, 0, param.DISPLAY\_SIZE,param.DISPLAY\_SIZE)

disp\_stab.setColor(0xFFFFFF)



In python

##### Simon Steinmann [Moderator] 06/11/2020 14:24:35
Does webots proto support <mimic joint />?

##### David Mansolino [Cyberbotics] 06/11/2020 14:28:27
`@Simon Steinmann` not yet, but that's on our short term plans: [https://github.com/cyberbotics/webots/issues/1365](https://github.com/cyberbotics/webots/issues/1365)

##### Simon Steinmann [Moderator] 06/11/2020 14:29:29
hmm how would I go about implementing this now? The robotiq 2f gripper has basically 1 motor, and mimics all joints

##### David Mansolino [Cyberbotics] 06/11/2020 14:30:12
For now the workaround is to actually put 2 motors and send exactly the same command to both in the controller

##### Simon Steinmann [Moderator] 06/11/2020 14:30:12
is there a way to do this in the model, or do I have to do it with the controller and move 'motors' that dont really exist

##### David Mansolino [Cyberbotics] 06/11/2020 14:30:29
For now only in the controller.

##### Simon Steinmann [Moderator] 06/11/2020 14:30:34
okay, thx

##### David Mansolino [Cyberbotics] 06/11/2020 14:30:42
you're welcome

##### Lussfer 06/11/2020 14:40:09
`@lojik` that's exactly how I have it setup. Thanks for confirming :)

##### Simon Steinmann [Moderator] 06/11/2020 15:03:48
Is it possible to have multiple joints per link?


I want to connect all these links together
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/720654566126780526/unknown.png)
%end

##### Stefania Pedrazzi [Cyberbotics] 06/11/2020 15:10:04
Yes, you can connect multiple joints to the same Solid part using the `SolidReference` node ([https://www.cyberbotics.com/doc/reference/solidreference](https://www.cyberbotics.com/doc/reference/solidreference)). This is used for example in the Khepera3 gripper : [https://www.cyberbotics.com/doc/guide/khepera3#khepera3\_gripper-wbt](https://www.cyberbotics.com/doc/guide/khepera3#khepera3_gripper-wbt)

[https://github.com/cyberbotics/webots/blob/master/projects/robots/k-team/khepera3/protos/Khepera3\_Gripper.proto](https://github.com/cyberbotics/webots/blob/master/projects/robots/k-team/khepera3/protos/Khepera3_Gripper.proto)

##### Simon Steinmann [Moderator] 06/11/2020 15:12:11
thx, I'll have a look


uff this goes a bit over my head...


could someone help me to attach that dangling bit to the hinge? one finger would be enough, so I can understand the process. I'd be really grateful 😅
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/720662443201789952/unknown.png)
%end


this is the gripper proto
> **Attachment**: [Robotiq2f85Gripper.proto](https://cdn.discordapp.com/attachments/565154703139405824/720662620763586622/Robotiq2f85Gripper.proto)

##### David Mansolino [Cyberbotics] 06/11/2020 16:11:42
`@Simon Steinmann` you might be interested by [https://github.com/cyberbotics/webots/pull/1351](https://github.com/cyberbotics/webots/pull/1351)

##### Simon Steinmann [Moderator] 06/11/2020 16:16:16
uhhh 🙂


IT'S WORKING 😄


using a controller side workaround for the urdf <mimic /> tag
> **Attachment**: [robotiq\_2f\_85.mp4](https://cdn.discordapp.com/attachments/565154703139405824/720682622157586483/robotiq_2f_85.mp4)


if someone is interested in the code, let me know 🙂

##### Deleted User 06/11/2020 22:28:20
how can i build my controller code on Qt Creator? Not using webots build


> how can i build my controller code on Qt Creator? Not using webots build

`@Deleted User` this is my qmake file 



QT       += core gui



greaterThan(QT\_MAJOR\_VERSION, 4): QT += widgets



CONFIG += c++11

DEFINES += QT\_DEPRECATED\_WARNINGS



\# You can also make your code fail to compile if it uses deprecated APIs.

\# In order to do so, uncomment the following line.

\# You can also select to disable deprecated APIs only up to a certain version of Qt.

\#DEFINES += QT\_DISABLE\_DEPRECATED\_BEFORE=0x060000    \# disables all the APIs deprecated before Qt 6.0.0



SOURCES += \

    main.cpp \

    mainwindow.cpp \

    secondform.cpp



HEADERS += \

    mainwindow.h \

    secondform.h



FORMS += \

    mainwindow.ui \

    secondform.ui



\# Default rules for deployment.

qnx: target.path = /tmp/$${TARGET}/bin

else: unix:!android: target.path = /opt/$${TARGET}/bin

!isEmpty(target.path): INSTALLS += target



\# Setup global paths. The WEBOTS\_HOME environment variable should be setup.

WEBOTS\_HOME\_PATH = /usr/local/webots

CONTROLLER\_PATH = /home/sergen/Webots/nao/controllers/nao\_autism

CONTROLLER\_NAME = $$basename(CONTROLLER\_PATH)



\# Get C or C++ sources in the current directory (only).

SOURCES = $$files(*.c, true)

SOURCES += $$files(*.cpp, true)

HEADERS = $$files(*.h, true)



\# Setup the project.

\# Its name is defined to be the controller directory name.

TARGET = $$CONTROLLER\_NAME

DESTDIR = $$CONTROLLER\_PATH

QMAKE\_TARGET = $$CONTROLLER\_NAME



\# Link with the Webots controller library.

INCLUDEPATH += $$WEBOTS\_HOME\_PATH/include/controller/c $$WEBOTS\_HOME\_PATH/include/controller/cpp

LIBS += -L$$WEBOTS\_HOME\_PATH/lib/controller -lController -lCppController

win32 {

  CONFIG += console

}

macx {

  CONFIG -= app\_bundle

  CONFIG += sdk\_no\_version\_check

}

##### David Mansolino [Cyberbotics] 06/12/2020 05:12:06
> using a controller side workaround for the urdf <mimic /> tag

`@Simon Steinmann` very nice! If you want to integrate this in Webots do not hesitate to create a PR 😉

##### Olivier Michel [Cyberbotics] 06/12/2020 06:10:11
`@Deleted User`: that looks pretty good. Does it work?

##### Simon Steinmann [Moderator] 06/12/2020 07:55:49
`@David Mansolino` I simply used the proto you linked me to. I could create a sample world with a controller though, implementing it.

##### David Mansolino [Cyberbotics] 06/12/2020 07:56:56
Oh ok, perfect (I was not sure about the state of the proto)

##### Simon Steinmann [Moderator] 06/12/2020 07:57:49
quick question: the setAvailableTorque function can be used to control how hard / soft the gripper grips right?


if I set it to .5 of max torque, it will only grip an object half as tight

##### David Mansolino [Cyberbotics] 06/12/2020 07:58:24
Yes, it will control the maximum torque used by the motor to reach the target position/velocity

##### Simon Steinmann [Moderator] 06/12/2020 07:58:45
thx, I'll add that too


where should I put the proto file for the PR?


in a new project directory?

##### David Mansolino [Cyberbotics] 06/12/2020 08:03:00
The best location would be next to the other robotiq 3f finger: [https://github.com/cyberbotics/webots/tree/master/projects/devices/robotiq/protos](https://github.com/cyberbotics/webots/tree/master/projects/devices/robotiq/protos)

##### Simon Steinmann [Moderator] 06/12/2020 08:03:42
okax. And then a new project containing the world and controllers?


thinking of attaching it to a ur10e and making a simple python and a ROS controller


any ideas why this crash might happen? I think it was when using reload world button
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/720918369980907560/unknown.png)
%end

##### David Mansolino [Cyberbotics] 06/12/2020 08:33:01
This only indicates that Webots crashes but nothing more so it's difficult to know the reason from this image.

##### Simon Steinmann [Moderator] 06/12/2020 08:34:15
I'll keep an eye open, maybe I can reproduce it reliably

##### Jasper 06/12/2020 09:21:32
```py
[maanrobot3py] Traceback (most recent call last):
[maanrobot3py]   File "maanrobot3py.py", line 5, in <module>
[maanrobot3py]     from controller import Robot, Motor, Camera, Keyboard
[maanrobot3py]   File "D:\Applications\Webots\lib\controller\python37\controller.py", line 15, in <module>
[maanrobot3py]     import _controller
[maanrobot3py] ImportError: DLL load failed: The specified module could not be found.
```

I'm getting this error using the normal webots application using a python controller. I looked in the folder of the extension module and \_controller.pyd is there. I set the path and the webots home but no results. Does anyone know what might be going on?

##### Olivier Michel [Cyberbotics] 06/12/2020 09:24:03
Can you try to run the provided python examples, e.g., in WEBOTS\_HOME/projects/languages/python/worlds/example.wbt, does it work without any error?

##### Jasper 06/12/2020 09:24:23
Trying now


Getting the same error a bunch of times for several of the python files using the controller


```py
[slave] Traceback (most recent call last):
[slave]   File "slave.py", line 21, in <module>
[slave]     from controller import Robot
[slave]   File "D:\Applications\Webots\lib\controller\python37\controller.py", line 15, in <module>
[slave]     import _controller
[slave] ImportError: DLL load failed: The specified module could not be found.
WARNING: 'slave' controller exited with status: 1.
[driver] Traceback (most recent call last):
[driver]   File "driver.py", line 21, in <module>
[driver]     from controller import Supervisor
[driver]   File "D:\Applications\Webots\lib\controller\python37\controller.py", line 15, in <module>
[driver]     import _controller
[driver] ImportError: DLL load failed: The specified module could not be found.
WARNING: 'driver' controller exited with status: 1.
```

##### David Mansolino [Cyberbotics] 06/12/2020 09:32:19
Are you using a non regular version of Python? Something like anaconda or similar?

##### Jasper 06/12/2020 09:33:02
I'm running regular python 3.7.7 at the moment

##### Olivier Michel [Cyberbotics] 06/12/2020 09:35:16
Did you install the 64 bit version of Python 3.7.7?

##### Jasper 06/12/2020 09:38:47
I seem to have both python 64 bit and 32 bit on my system


Could that be the issue?

##### Olivier Michel [Cyberbotics] 06/12/2020 09:42:41
Probably... Can you remove the 32-bit version (or disable it) and try again?

##### Jasper 06/12/2020 09:45:12
That has worked! Thanks a lot sir

##### Olivier Michel [Cyberbotics] 06/12/2020 09:45:29
You are welcome.

##### Simon Steinmann [Moderator] 06/12/2020 09:48:38
WARNING: The current physics step could not be computed correctly. Your world may be too complex. If this problem persists, try simplifying your bounding object(s), reducing the number of joints, or reducing WorldInfo.basicTimeStep.
> **Attachment**: [bounding\_problem.mp4](https://cdn.discordapp.com/attachments/565154703139405824/720937600822673418/bounding_problem.mp4)


I already decreased the timestep to 1ms, still same issue



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/720937897070559322/unknown.png)
%end



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/720938002292932688/unknown.png)
%end


I'm guessing, this has to be optimized

##### David Mansolino [Cyberbotics] 06/12/2020 09:50:33
I strongly recommend to re-create the bouding objects of the fingers from scratch to use only basic geometries.


> I'm guessing, this has to be optimized

`@Simon Steinmann` Exactly

##### Simon Steinmann [Moderator] 06/12/2020 09:54:09
on the right is the converted urdf, much simpler.  But it has the issue of the non connected joints.
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/720938991217541150/unknown.png)
%end


If I were to just replace the gripping portion, and leave the rest of the high poly mesh, would that have a significant performance impact?


or does only the contact surface really matter?

##### David Mansolino [Cyberbotics] 06/12/2020 09:59:12
The most important is the contact, the other part are also important but much less

##### Simon Steinmann [Moderator] 06/12/2020 10:00:36
what is the best course of action here? replace all the geometry entries from the high poly model with the one from the low poly?

##### David Mansolino [Cyberbotics] 06/12/2020 10:01:42
Actually instead of low poly meshes it is even better to replace them with basic geometries for the bounding objects (i.e. use a set of boxes, spheres, cylinder, etc.)

##### Simon Steinmann [Moderator] 06/12/2020 10:03:19
just the bounding object, or the geometry too?

##### David Mansolino [Cyberbotics] 06/12/2020 10:03:41
Just the boundign object should be enough (at least for improving the physics behavior)

##### Simon Steinmann [Moderator] 06/12/2020 10:03:58
that would leave the nice look?

##### David Mansolino [Cyberbotics] 06/12/2020 10:04:04
Yes

##### Simon Steinmann [Moderator] 06/12/2020 10:05:35
is there a way, other than converting to base nodes, to find the correct object in the proto file?

##### David Mansolino [Cyberbotics] 06/12/2020 10:05:57
This is unfortunately the simplest solution.

##### Simon Steinmann [Moderator] 06/12/2020 10:06:32
🙄  darn


ohhhhhh, I just found something in the urdf-converted proto
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/720942354512740432/unknown.png)
%end


that should be it

##### David Mansolino [Cyberbotics] 06/12/2020 10:07:56
Indeed, that looks like it!

##### Simon Steinmann [Moderator] 06/12/2020 10:09:14
aaaaand of course the links and joints are named differently 👀

##### gcarboni1 06/12/2020 10:22:35
Hi there

I'm a beginner user of webots.

I'm building my first 2 wheels custom robot, but I need a sphere wheel under the robot board.

Someone can suggest me how can I create it?


something like this...



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/720946247577501747/unknown.png)
%end


thank you

##### chenpixx 06/12/2020 10:50:22
Hi, I am using nightly build (10.6.2020) in linux. After simulation reset, I cant take new images from op2 camera.


What is problem?

##### Olivier Michel [Cyberbotics] 06/12/2020 10:54:22
`@gcarboni1`: using a simple Sphere, possibly with a low friction, should work. The sphere won't rotate in Webots, but you probably don't care. If you want it to rotate, you could implement it using a passive BallJoint node.


[https://cyberbotics.com/doc/reference/balljoint](https://cyberbotics.com/doc/reference/balljoint)


`@chenpixx`: no idea. Is this problem specific to this nightly build or can you observe it also with other versions?

##### chenpixx 06/12/2020 10:57:09
In previous version, I cant run perfectly simulation reset in 2020a revision 1. I checked camera dont work also after reset.


ın older versions, at same code, it works  as far as I know. However the versions dont include new reset command.

##### gcarboni1 06/12/2020 10:59:33
thank you `@Olivier Michel` I'll check

##### Olivier Michel [Cyberbotics] 06/12/2020 11:04:38
`@chenpixx`: I just checked darwin-op visual\_tracking.wbt example on Windows and the camera tracking seems to work even after reset. Can you try it?

##### chenpixx 06/12/2020 11:05:58
I tried to mooring. After reset physics, in previous versions, same code worked. However I need to your new reset command.

##### Olivier Michel [Cyberbotics] 06/12/2020 11:08:21
How do perform the reset? From the GUI or from a supervisor?

##### chenpixx 06/12/2020 11:09:36
self.simulationReset() from supervisor

##### Olivier Michel [Cyberbotics] 06/12/2020 11:10:02
Do you also restart the controllers?

##### chenpixx 06/12/2020 11:10:22
in facr reset works. robot comes it first pozition. but cmaera doesnt woks


for reinforcement learning, ı am using reset.

##### Olivier Michel [Cyberbotics] 06/12/2020 11:11:43
You might have found a bug. Can you open an issue about it with a precise description allowing us to reproduce the problem?


[https://github.com/cyberbotics/webots/issues/new?template=bug\_report.md](https://github.com/cyberbotics/webots/issues/new?template=bug_report.md)

##### chenpixx 06/12/2020 11:12:16
ok. Many Thanks.

##### ClBaze 06/12/2020 15:36:15
Hello,


I am using a scene containing a lot of textures for AprilTags/QRCode (500 different texture).


Each texture is applied to a solid representing the april tag.


I noticed that using small images impact the simulation speed.


Bigger images make it twice as fast (which is pretty cool for my use case). I am just wondering why ? Because it could help me optimising the other textures I'm using, and make the simulation even faster maybe.

##### Olivier Michel [Cyberbotics] 06/12/2020 15:38:56
Do you mean the resolution of the texture or the size of the texture on the object?

##### ClBaze 06/12/2020 15:39:07
the resolution

##### Olivier Michel [Cyberbotics] 06/12/2020 15:40:04
It could be that small texture size are filtered whereas larges textures are not and this filtering takes time?

##### ClBaze 06/12/2020 15:40:15
with 512x512 images the simulation runs at 0.3x the real time, while 1024x1024 runs 0.5x

##### Olivier Michel [Cyberbotics] 06/12/2020 15:40:37
Did you try to play with the `TextureImage.filtering` parameter?

##### ClBaze 06/12/2020 15:40:51
no

##### Olivier Michel [Cyberbotics] 06/12/2020 15:41:42
Which graphics card do you have?

##### ClBaze 06/12/2020 15:42:36
Filtering is set to 4 is my case. I'm using a gtx 1050Ti

##### Olivier Michel [Cyberbotics] 06/12/2020 15:43:13
OK... Honestly I have no idea why you are getting a better performance with high resolution textures.... It seems odd...

##### ClBaze 06/12/2020 15:43:45
Here is a small benchmark:



> **Attachment**: [log.txt](https://cdn.discordapp.com/attachments/565154703139405824/721026989829390436/log.txt)


even the physics seems faster

##### Olivier Michel [Cyberbotics] 06/12/2020 15:45:59
I see. Do you use any special sensor in this simulation?


If you disable any robot (use a void controller) do you get the same?

##### ClBaze 06/12/2020 15:47:38
Yes, I have two cameras with a default ros controller, but they weren't enabled during the bench


I can try with no controller

##### Olivier Michel [Cyberbotics] 06/12/2020 15:48:32
That will be helpful to better understand.

##### Deleted User 06/12/2020 15:51:15
> `@Deleted User`: that looks pretty good. Does it work?

`@Olivier Michel` nope. i can't build

##### Olivier Michel [Cyberbotics] 06/12/2020 15:53:09
Please follow the instructions here: [https://cyberbotics.com/doc/guide/using-your-ide#qt-creator](https://cyberbotics.com/doc/guide/using-your-ide#qt-creator)

##### ClBaze 06/12/2020 15:54:50
`@Olivier Michel` Is there a difference between setting controller to "" and "void" ?

##### Olivier Michel [Cyberbotics] 06/12/2020 15:55:46
Yes. Setting to "" will not launch any process (and is lighter). Setting it to void will launch the void controller which basically does nothing but runs in the background.

##### ClBaze 06/12/2020 15:56:40
Ok thanks



> **Attachment**: [log\_no\_controller.txt](https://cdn.discordapp.com/attachments/565154703139405824/721033625189220362/log_no_controller.txt)


Wow. If I set every controller to "void" it runs 2.8x with 512x512 and 0.28x with 1024x1024

##### Olivier Michel [Cyberbotics] 06/12/2020 16:16:25
Interesting... So can you try to remove the cameras from your robot to see whether this is the cause of the slow down?

##### ClBaze 06/12/2020 16:20:37
Ok maybe the 2.8x was because the images weren't finished being copied on the filesystem when I launched the bench for 512x512


I've run it twice, just to be sure, it was running at 0.5x this time


I'm removing the cameras now



> **Attachment**: [log\_no\_camera.txt](https://cdn.discordapp.com/attachments/565154703139405824/721038855238582342/log_no_camera.txt)


Both 512x512 and 1024x1024 are running at 0.5x

##### Zerfallskonstante 06/12/2020 17:19:58
Hello everyone,

I am participating in a project where we have a robot-vehicle in Webots. The robots gets its instructions from an ADA program via TCP. The communication works fine and we got the robot rolling. However, our simulation freezes pretty often. This behavior is non-deterministic: Sometimes it happens after just a few seconds, sometimes after a minute. The simulation speed goes to 0 and it does not proceed (not even a single simulation step). What could cause the freezes? We are using the latest stable Windows version.


When the simulation freezes, our ADA program can still recieve and send data to our Simulation's internal C-Controller.

##### Simon Steinmann [Moderator] 06/12/2020 17:41:30
`@Zerfallskonstante` do you use an internal or external controller for webots?

##### Zerfallskonstante 06/12/2020 17:46:21
I am not quite sure what you consider an internal or external controller. we wrote a small controller in C which executes in webots. This controller sends the raw sensor data to the external Ada program. The ada program sends the motor data to the c controller. i hope, this description is helpful.

##### Simon Steinmann [Moderator] 06/12/2020 17:46:48
if it runs in webots, it's not external


how do you synchornize time?


is the webots controller broadcasting the sim time?

##### Zerfallskonstante 06/12/2020 17:48:22
no, the time is not synchronized between the internal controller and the ada program

##### Simon Steinmann [Moderator] 06/12/2020 17:49:14
hmm hard to say, I'm a python and ROS guy. sorry


the simulation only continues, when your main loop in the controller keeps running and calls the robot step function. Perhaps another part in your loop gets stuck. Perhaps something with the sensors

##### Zerfallskonstante 06/12/2020 17:52:39
Thank you! Even though I didnt write the C controller, i will try to look for non-terminating loops in the internal controller.

##### dimple.bhuta 06/13/2020 09:48:57
Thank you `@Simon Steinmann` and `@David Mansolino` I am able to generate and spawn the vehicles given i have the starting id information. Following is the code for the same. Just incase it is useful for someone


from controller import Supervisor

self.rootChildren = self.supervisor.getRoot().getField("children")

defName = "EGO\_VEHICLE%d" % i

            vehicleString = "DEF " + defName + " " + "TeslaModel3" + " {\n"

            vehicleString += "  translation 10000 0.5 0\n"

            vehicleString += "  name \"{}\"\n".format(self.robot\_ids[i])

            vehicleString += "  sensorsSlotCenter [\n"

            vehicleString += "    GPS {\n"

            vehicleString += "    }\n"

            vehicleString += "  ]\n"

            vehicleString += "  }\n"

            self.rootChildren.importMFNodeFromString(-1, vehicleString)

            robot\_node = self.supervisor.getFromDef(defName)


i guess i am not able to paste the whole code


following snippets helped me generate the vehicle


robot\_node = self.supervisor.getFromDef(defName)


controller\_field=robot\_node.getField("controller")

 controller\_field.setSFString("ros\_automobile")


and using the above I can assign controller and starting translation and rotation position. Once again thank you for your help.

##### Simon Steinmann [Moderator] 06/13/2020 10:29:32
`@dimple.bhuta`  [https://tenor.com/view/minions-happy-excited-celebration-standing-ovation-gif-3439143](https://tenor.com/view/minions-happy-excited-celebration-standing-ovation-gif-3439143)


btw, if you have troubles with ROS and python3, let me know. Addressed this issue in my master's thesis

##### dimple.bhuta 06/13/2020 12:15:55
yeah that would be amazing


also this works as well


\#initial declaration of supervisor

class EgoVehicle:

    def \_\_init\_\_(self):

        self.robot\_ids = []

        self.supervisor = Supervisor()

        self.rootChildren = self.supervisor.getRoot().getField("children")

\#calling in the later stage      

           defName = "EGO\_VEHICLE%d" % i

            vehicleString = "DEF " + defName + " " + "TeslaModel3" + " {\n"

            x\_coord = []

            y\_coord = []

            xp, yp, zp = [], [], []

            key\_val = self.start\_edge\_ids[i]

            x\_coord = self.edge\_dict[key\_val]['x\_values']

            y\_coord = self.edge\_dict[key\_val]['y\_values']

            height = 0.4



            for index in range(2):

                pos = [round(-x\_coord[index]  + self.xOffset , 2), height, y\_coord[index] - self.yOffset]

                zp.append(pos[2])

                xp.append(pos[0])



            #Finding rotation and translation coordinates

            x1 = xp[0]

            x2 = xp[1]



            z1 = zp[0]

            z2 = zp[1]

            vehicleString += "  translation {} {} {}\n".format(x1, height, z1)


\# angle

            ang\_radians = math.atan2(x2-x1, z2-z1)

            vehicleString += "  rotation 0 1 0 {}\n".format(ang\_radians)

            vehicleString += "  color 0.18 0.50 0.72\n"

            vehicleString += "  name \"{}\"\n".format(self.robot\_ids[i])

            vehicleString += "  controller \"{}\"\n".format("ros\_automobile")

            vehicleString += "  controllerArgs \"--name={} --clock --use-sim-time\"\n".format(self.robot\_ids[i])

            vehicleString += "  sensorsSlotCenter [\n"

            vehicleString += "    GPS {\n"

            vehicleString += "    }\n"

            vehicleString += "  ]\n"

            vehicleString += "  }\n"

            self.rootChildren.importMFNodeFromString(-1, vehicleString)


but i will definitely ping you relating ros and python as my project is based on it and glitches dont seem to die down

##### Deleted User 06/13/2020 23:01:39
Can anyone share Kinect Skeletal Tracking SDK with me?


Did anyone work with it?


how can i add my nuitrack sdk library path webots


\#include <nuitrack/Nuitrack.h>

##### furkann 06/14/2020 00:39:43
Hello guys, I want to use Nuitrack software in webots simulator, but problem is I cant compile a code when I add nuitrack libs and includes to sample code in webots (nao\_demo.c).; even I add path of includes and libs of nuitrack sdk I couldnt fix the problem. are there anyone to help me ?

##### Simon Steinmann [Moderator] 06/14/2020 06:54:36
`@furkann` I would recommend using the external controller functionality. That way you can run your code in your own environment


[https://www.cyberbotics.com/doc/guide/installation-procedure#extern-controllers](https://www.cyberbotics.com/doc/guide/installation-procedure#extern-controllers)

##### Deleted User 06/14/2020 09:31:20
> `@furkann` I would recommend using the external controller functionality. That way you can run your code in your own environment

`@Simon Steinmann` Also i tried but nope i can't build

##### G1020BS 06/14/2020 10:33:23
`cout e.what()` but it just crashes and doesn't output the exception or anything. Is there a log file anywhere with detailed error logging? Or is there a way I can let Webots create this file? Many thanks

##### Olivier Michel [Cyberbotics] 06/14/2020 11:07:00
You may want to try to use gdb to debug your controller: [https://cyberbotics.com/doc/guide/debugging-c-cpp-controllers](https://cyberbotics.com/doc/guide/debugging-c-cpp-controllers)

##### G1020BS 06/14/2020 11:07:47
Currently I am using Visual Studio 2019. Does that make any difference?

##### Olivier Michel [Cyberbotics] 06/14/2020 11:08:16
Yes, in that case, you should the the Visual Studio debugger instead.

##### G1020BS 06/14/2020 11:10:47
Its giving me a lot of errors. Like, it cannot open source files like webots/Robot.hpp and such.

##### Olivier Michel [Cyberbotics] 06/14/2020 11:12:11
You should probably setup some path somewhere so that these files are found...

##### G1020BS 06/14/2020 12:30:23
I attached a debugger and found out that it crashes here: 
```int Robot::step(int duration) {
  return wb_robot_step(duration);
}
``` Any ideas?

##### elidor00 06/14/2020 15:41:19
Goodmorning everyone,

i am using webots for a university project. I have a problem in my controller for the pioneer3dx robot with the rangeImageGetDepth method on a RangeFinder object.

The code is as follows:



`kinectrange = robot.getRangeFinder("kinect range")

kinectrange.enable(TIME\_STEP)

\# robot.step(timestep)

image = kinectrange.getRangeImage()

while robot.step(TIME\_STEP) != -1:

    kinect\_values = kinectrange.getRangeImage()

    for i in range(75):

        value = RangeFinder.rangeImageGetDepth(kinect\_values, 150, i, 60)`


And during the execution, I received the message 



"Process finished with exit code 139 (interrupted by signal 11: SIGSEGV)"


I'm using python3.8 and webotsR2020a revision 1

##### sanyaade 06/14/2020 18:43:56
Hello Everyone, Sanyaade from London. Happy to join Webots  group

##### David Mansolino [Cyberbotics] 06/15/2020 05:40:05
> Hello Everyone, Sanyaade from London. Happy to join Webots  group

`@sanyaade` hi, welcome to the group!


> Goodmorning everyone,

> i am using webots for a university project. I have a problem in my controller for the pioneer3dx robot with the rangeImageGetDepth method on a RangeFinder object.

> The code is as follows:

> 

> `kinectrange = robot.getRangeFinder("kinect range")

> kinectrange.enable(TIME\_STEP)

> \# robot.step(timestep)

> image = kinectrange.getRangeImage()

> while robot.step(TIME\_STEP) != -1:

>     kinect\_values = kinectrange.getRangeImage()

>     for i in range(75):

>         value = RangeFinder.rangeImageGetDepth(kinect\_values, 150, i, 60)`

`@elidor00` there is a problem in your code this:

```Python
value = RangeFinder.rangeImageGetDepth(kinect_values, 150, i, 60)
```

Should be replaced by:

```Python
value = kinectrange.rangeImageGetDepth(kinect_values, 150, i, 60)
```

But even with this fix it seems indeed that it is crashing


The following seems however to works fine:

```Python
value = kinect_values[kinectrange.getWidth() * 60 + i]
```


I can't unforunately find the reason of the original crash, we will investigate this, in any case you should probably extract the value directly from the array as I showed just before.


> Hello guys, I want to use Nuitrack software in webots simulator, but problem is I cant compile a code when I add nuitrack libs and includes to sample code in webots (nao\_demo.c).; even I add path of includes and libs of nuitrack sdk I couldnt fix the problem. are there anyone to help me ?

`@furkann` can you share the error massage you get while compiling? And your makefile?

##### nelsondmmg 06/15/2020 06:48:50
Hi, I a question concerning the vehicle control done with throttle/brake. First, using a 3DoF dynamic model I can model rather nicely the acceleration of the vehicle, but the breaking still presents some errors, as one can see at the end of the figure (x is time in ms and y is velocity). The blue line is the executed by webots and the red in the one predicted. I'm using a Tesla Model3, so the braking force calculated was F= max(2 * brakeCoefficient * wTire + 4 * wheelsDampingConstant * wTire, mu * g * m/2), with the mu being defined in WorldInfo. I even tried to modify the brake value in the node of the vehicle, but the behavior remain the same. It seems to me that maybe there is some dynamic friction involved, with is lower than mu, and when the velocity becomes close to 0, the static is used, resulting in a sharp velocity fall to 0. Is there a dynamic mu defined somewhere? I didn't find anything in the ODE documentation.
%figure
![control.png](https://cdn.discordapp.com/attachments/565154703139405824/721979517274423336/control.png)
%end

##### David Mansolino [Cyberbotics] 06/15/2020 07:07:19
Hi `@nelsondmmg`, we did some calibration of the brake with some other electrical vehicles (e.g. C-Zero) and the brake was following the blue curve.

But to have something closer to the red curve, can you try to replacing this line:

[https://github.com/cyberbotics/webots/blob/master/projects/default/libraries/vehicle/c/driver/src/driver.c#L362](https://github.com/cyberbotics/webots/blob/master/projects/default/libraries/vehicle/c/driver/src/driver.c#L362)

By:

```c
const double damping_constant = fabs(instance->brake * instance->car->brake_coefficient)
```

And the recompiling the driver library.

##### nelsondmmg 06/15/2020 07:08:31
Ok, I'm going to try it. Thanks!


I'm trying to compile the code and the following message appears: 

> Makefile:54: /home/vedecom/webots/resources/Makefile.os.include: No such file or directory

> make: *** No rule to make target '/home/vedecom/webots/resources/Makefile.os.include'.  Stop.

How can I solve this?

##### David Mansolino [Cyberbotics] 06/15/2020 07:42:31
Did you check if the '/home/vedecom/webots/resources/Makefile.os.include' file exists?

##### nelsondmmg 06/15/2020 07:44:57
Ah, the absolute path is not right, there is some folders in between.


Still compiling, after I installed glm the following error occurs
%figure
![error.png](https://cdn.discordapp.com/attachments/565154703139405824/721997785167167539/error.png)
%end

##### David Mansolino [Cyberbotics] 06/15/2020 08:02:21
How did you install glm?

Here are th einstructions: [https://github.com/cyberbotics/webots/wiki/Linux-installation](https://github.com/cyberbotics/webots/wiki/Linux-installation)

##### nelsondmmg 06/15/2020 08:02:43
Using apt

##### David Mansolino [Cyberbotics] 06/15/2020 08:03:08
Note also that you should not need to install the complete development environment to recompile the driver library, you should be able to reompile the one from your installed version of Webots.


> Using apt

`@nelsondmmg` Ok then this is the problem, glm come with the clone of Webots as a submodule, the clone should be done with the `--recurse-submodules` argument.

##### Olivier Michel [Cyberbotics] 06/15/2020 08:08:21
`@G1020BS`: no idea about this crash... Can you compile one of the provided controller examples with Visual Studio and see whether it crashes too? If it does, that means there is likely a bug with the libController and you should open a bug report. Otherwise, that probably means that your controller has a problem and causes the crash. In such a case, I would recommend you to try to debug your controller by removing lines of code until it doesn't crash any more.

##### Shubham Dahatre 06/15/2020 08:44:27
Hello I want to simulate drone which is real type and not using propeller node. 

 rotating propeller(solid) must push air(fluid) and then thrust must be generated. 

Is it possible to make such simulation in which we can study the aerodynamic behaviour of drone.

##### Olivier Michel [Cyberbotics] 06/15/2020 08:49:11
Hi. Yes, this is possible, but in that case, you should probably apply forces and torques directly from a supervisor controller instead of using a Propeller device. See [https://cyberbotics.com/doc/reference/supervisor#wb\_supervisor\_node\_add\_force](https://cyberbotics.com/doc/reference/supervisor#wb_supervisor_node_add_force)

##### elidor00 06/15/2020 10:03:37
> The following seems however to works fine:

> 
```Python
> value = kinect_values[kinectrange.getWidth() * 60 + i]
> 
```

`@David Mansolino` Thanks, now it works properly!

##### David Mansolino [Cyberbotics] 06/15/2020 10:03:47
You're welcome

##### sinancimen 06/15/2020 13:12:06
Hello, is it possible to model a spring in Webots, in a way that it can change shape when it is being compressed or extended; and also, act like a spring in terms of mechanics?

##### David Mansolino [Cyberbotics] 06/15/2020 13:13:06
The Slider Joint can indeed act as a spring, see this chapter abotu the spring and damper effect of joints: [https://www.cyberbotics.com/doc/reference/jointparameters#springs-and-dampers](https://www.cyberbotics.com/doc/reference/jointparameters#springs-and-dampers)


About the deformation, you might use a skin node that will make the shape to be deformed when the joint moves.

##### sinancimen 06/15/2020 13:21:58
Thanks!

##### David Mansolino [Cyberbotics] 06/15/2020 13:22:14
You're welcome.

##### nelsondmmg 06/15/2020 13:46:56
Just to confirm, the steering angle control implemented for the Tesla Model 3 is composed only by a P controller, isn't it? I could not find in any of the PROTOs another defintion for the P,I,D constants.

##### David Mansolino [Cyberbotics] 06/15/2020 13:48:23
Yes it is indeed.

##### Musaab 06/15/2020 13:53:59
Hi, im currently busy with robot arm but I want to implement some kind of sensor to measure the weight of an object. Can anyone help explain how to get this done? Thanks

##### David Mansolino [Cyberbotics] 06/15/2020 14:00:04
you might use the force feedback of the motor of the arm to measure weight: [https://cyberbotics.com/doc/reference/motor#wb\_motor\_enable\_force\_feedback](https://cyberbotics.com/doc/reference/motor#wb_motor_enable_force_feedback)

##### Luiz Felipe 06/16/2020 03:36:25
Running a simulation using Ubuntu 18.04 and Webots 2020a the following error happens:



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/722293493942321162/unknown.png)
%end


Is any package missing?

##### David Mansolino [Cyberbotics] 06/16/2020 05:07:30
Hi `@Luiz Felipe` which simulation are you running? Is your controller using Qt?

##### Luiz Felipe 06/16/2020 10:07:02
In my personal environment the error does not happen, but when my colleague is running in his environment this error happened. He reinstalled Webots (removing all files related to webots) and the error still happens.


I don't think it is using Qt directly. The environment is a variant of this repo: [https://github.com/omichel/test\_world](https://github.com/omichel/test_world)

##### Olivier Michel [Cyberbotics] 06/16/2020 10:14:28
That seems to indicate that the supervisor is linked against Qt...

##### Luiz Felipe 06/16/2020 10:26:51
is it not finding the qt library?

##### Olivier Michel [Cyberbotics] 06/16/2020 10:27:54
Yes, but it is strange as the supervisor should not try to find the Qt library. It has no dependency on it...

##### Luiz Felipe 06/16/2020 10:28:36
Yes, i never experienced that running the environment hundreds of times...

##### Olivier Michel [Cyberbotics] 06/16/2020 10:30:27
It could be the supervisor is launching another process which on your colleague's machine is different from yours and requires Qt...

##### Master6 06/16/2020 11:27:09
I currently get this warning after I added in the battery variables to the robot node (webots can't calculate the consumption of the linearmotor in a track), is there a way to either fix this or at least get rid of the warnings? (it make using the console impossible)
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/722411944442855514/unknown.png)
%end

##### David Mansolino [Cyberbotics] 06/16/2020 11:29:31
This looks like a bug, can you please report it here: [https://github.com/cyberbotics/webots/issues/new?template=bug\_report.md](https://github.com/cyberbotics/webots/issues/new?template=bug_report.md)

In the meantime, the new version of Webots will allows you to filter messages from the console (just right click on the console in Webots), here is a beta of Webots R2020b: [https://github.com/cyberbotics/webots/releases](https://github.com/cyberbotics/webots/releases)

##### Master6 06/16/2020 11:33:18
Alright, thanks for the response. I'll try to filter the messages with R2020b and report the bug.

##### David Mansolino [Cyberbotics] 06/16/2020 11:33:32
You're welcome.

##### Master6 06/16/2020 12:38:54
So I tried both the 15-6-2020 nightly build and the 12-6-2020 nightly build of R2020b but they both crash when I try to load my proto

##### David Mansolino [Cyberbotics] 06/16/2020 12:41:09
That's still a beta so it is indeed not as stable as the latest release :-(

Would it be possible for you to report this bug too (and ideally include a PROTO that reproduces the issue with the report), so that we can make sure it will fix this in the beta?

##### Master6 06/16/2020 12:47:20
Well I have a quit complex proto with a lot of parts imported from solidworks, and I have no idea what causes the crash. I can send you the proto if you want, but I don't have the time myself to figure out what's causing it.

##### David Mansolino [Cyberbotics] 06/16/2020 12:48:08
If you can send us the PROTO that's indeed already good 🙂

##### Master6 06/16/2020 12:58:24
[https://wetransfer.com/downloads/581b6438ee1e208c6fb974c6cf706a3c20200616125133/1247ae1a2e8db58d233275de447100f020200616125209/6ae859](https://wetransfer.com/downloads/581b6438ee1e208c6fb974c6cf706a3c20200616125133/1247ae1a2e8db58d233275de447100f020200616125209/6ae859)

So here's a link to a wetransfer with my proto files.

I only tested our latest version (5.3) but I also included all our previous versions, might help you narrow down where the problem began.

##### David Mansolino [Cyberbotics] 06/16/2020 12:59:09
Perfect thank you.


I will try it.


I can indeed reproduce the crash with R2020b, we will fix it for the release.

##### Master6 06/16/2020 14:18:59
You guys are doing great work 👍

##### David Mansolino [Cyberbotics] 06/16/2020 14:19:18
Thank you 😉

##### sinancimen 06/16/2020 16:59:29
I couldn't find any documentation about skin node to model a spring. Can you suggest if there is any?

##### sanyaade 06/16/2020 18:16:05
Today I used webots in my computing class to teach programming in Python. Students simulate e-pluck using adapted webots Tutorials.

Everything went well but there are couple of hiccups:

    1.) Python 3.7 is requirement so < 3.7 or >= 3.8 will not work

    2.) Python has to be download, installed as system wide in Windows. This creates some issues but most student were able to resolved this.

    3.) I will like to used webots at lower age 6-16 old kids, to teach introduction to Programming (Python) and Robotics (ESP8266/ESP-32 based Robots)



In order to create solution for all the above points, I was wondering may I should compile Webots, packaged with its own Python compiler in order to make portable and non operating systems dependent. Look getting to work with a range of Python compilers versions e.g. > 2.7 or >3.7 as opposed to a fixed version only. (SWIG or SWIG alternative FFI generator(s) ). 



Is it possible to replace QT dependent with [https://github.com/Immediate-Mode-UI/Nuklear](https://github.com/Immediate-Mode-UI/Nuklear) ?  Later to see if I could get my hands dirty to do this as a project



Many thanks for creating and releasing now as open source. 



God blesses!!!



Best regards,

Sanyaade

##### David Mansolino [Cyberbotics] 06/17/2020 05:34:51
> I couldn't find any documentation about skin node to model a spring. Can you suggest if there is any?

`@sinancimen` the skin node is unfortunately not yet documented. However, some examples are availables: [https://cyberbotics.com/doc/guide/samples-rendering#animated\_skin-wbt](https://cyberbotics.com/doc/guide/samples-rendering#animated_skin-wbt)


`@sanyaade`, I suppose you are on Windows right?

About Qt, it should indeed be possible, but since Webots dependencies on Qt is not negligible, this would be a huge amount of work, and I am not sure to understand what would be the advantage?

##### nelsondmmg 06/17/2020 07:29:02
The vertical inertia moment of the vehicle in this case is the I22? Inside the PROTO file, according to the documentation the first line is I11, I22, I33; considering the color system used in the global coordinates the vertical axis would be y?
%figure
![intertia.png](https://cdn.discordapp.com/attachments/565154703139405824/722714408165310464/intertia.png)
%end

##### Olivier Michel [Cyberbotics] 06/17/2020 07:52:29
Yes, this is correct. By the way, we are going to introduce the possibility to switch to Z for the vertical axis in an upcoming version of Webots.

##### nelsondmmg 06/17/2020 07:53:47
Ok, thanks. That would be more intuitive, I used I33 as the vertical inertia for a long time 😅

##### dimple.bhuta 06/17/2020 09:12:38
Hi I had a question regarding wbt file. For representation purposes will it be possible to plot points on lanes of a road.

##### Olivier Michel [Cyberbotics] 06/17/2020 09:14:01
Do you mean like using a Pen device to write on the road?

##### dimple.bhuta 06/17/2020 09:16:02
for an edge I have a set of points like a reference path. I wanted to check if its possible to plot the reference path (no in real time) on the lanes

##### Olivier Michel [Cyberbotics] 06/17/2020 09:17:17
Can't you simply modify the road texture files?

##### dimple.bhuta 06/17/2020 09:17:24
i went through the documentation for road proto but it doesn't seem to facilitate plotting of reference paths on top of road proto


[https://cyberbotics.com/doc/guide/object-road](https://cyberbotics.com/doc/guide/object-road)

##### David Mansolino [Cyberbotics] 06/17/2020 09:17:51
You can show it on top of a road using an IndexedLineSet: [https://cyberbotics.com/doc/reference/indexedlineset](https://cyberbotics.com/doc/reference/indexedlineset)

##### dimple.bhuta 06/17/2020 09:18:27
ok thank `@David Mansolino` I will try this out

##### PurplePi 06/17/2020 10:43:57
Hello, I would like to know how to randomize robots and objects' positions when resetting the simulation.

##### David Mansolino [Cyberbotics] 06/17/2020 10:45:14
You have to move them at a random position from the supervisor at the first step after the reset.

##### PurplePi 06/17/2020 10:56:58
Ok, thank you. I was wondering if this was possible to have a random function inside the world file ?

##### David Mansolino [Cyberbotics] 06/17/2020 10:57:32
Not in the world file, but in the PROTO file yes, you can use procedural PROTO: [https://www.cyberbotics.com/doc/reference/procedural-proto-nodes](https://www.cyberbotics.com/doc/reference/procedural-proto-nodes)

##### dimple.bhuta 06/17/2020 11:07:39
Hi using the pointset function I am able to plot points on the lane.
%figure
![plottingPointsOnRoad.png](https://cdn.discordapp.com/attachments/565154703139405824/722769424167207053/plottingPointsOnRoad.png)
%end


DEF POINT\_SET\_142865550 Transform {

  translation 0.0 0.0 0.0

  children [

    Shape {

      geometry PointSet {

        color Color {

          color [

          0.8 0 0

          0.8 0 0

          0.8 0 0

          0.8 0 0

          ]

        }

        coord Coordinate {

          point [

          77.17   0.0   -37.49000000000001

          76.14   0.0   -37.349999999999994

          75.1   0.0   -37.20000000000002

          74.07   0.0   -37.06

          ]

        }

      }

    }

  ]

}


However for the IndexedLineSet function I am not able to understand


what should be the values in coordIndex field


DEF TRAIL Shape {

appearance PBRAppearance {

        baseColor 1 1 1

      }

    geometry DEF TRAIL\_LINE\_SET IndexedLineSet {

    coord Coordinate {

     point [

     77.17   0.5   -37.49000000000001

     76.14   0.5   -37.349999999999994

     75.1   0.5   -37.20000000000002

     74.07   0.5   -37.06

     ]

   }

   coordIndex [

    0 0 0 0

   ]

      }

    }


if you can guide me with it or provide any documentation that will be great. Once again thank you for your help.

##### David Mansolino [Cyberbotics] 06/17/2020 12:01:02
if you want to connect all the points you can simply use:

```
 coordIndex [
    0 1 2 3 -1
   ]
```

##### wessel 06/17/2020 12:06:09
Hello, I am working on a robotic arm, but when i added everything it just falls down and swings around


whilst there is a rotary motor connected


how do i fix this?

##### Olivier Michel [Cyberbotics] 06/17/2020 12:08:28
You should attach it to the static environment. In order to do so, the first link of the robot should have the `NULL` value in its physics field.

##### wessel 06/17/2020 12:09:43
What should i set to null? what do you mean with the first link of the robot?


it says Damping Null

##### Simon Steinmann [Moderator] 06/17/2020 12:10:07
What arm are you using?

##### wessel 06/17/2020 12:10:18
my own

##### Olivier Michel [Cyberbotics] 06/17/2020 12:11:09
I mean the Robot node (which is the first link, the second link being connected to the first one with a HingeJoint and a RotationalMotor).

##### wessel 06/17/2020 12:11:47
alright so i currently have only damping saying Null



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/722785899511021678/unknown.png)
%end


it does pivot correctly


the way i want it to go


before when i added a rotary motor the part just stopped swinging


now it swings even with rotary motor


but the bottom wheel spins fine and works with rotary motor

##### Olivier Michel [Cyberbotics] 06/17/2020 12:15:16
So, it looks like it is mobile robot, not a fixed arm?

##### wessel 06/17/2020 12:15:27
yes

##### Olivier Michel [Cyberbotics] 06/17/2020 12:15:54
In that case, forget about my advice to set the physics to NULL, it's correct the way you did.


Unfortunately, I have no idea why your arm is swinging...

##### dimple.bhuta 06/17/2020 13:35:57
`@David Mansolino` thank you it works

##### David Mansolino [Cyberbotics] 06/17/2020 13:36:19
You're welcome

##### David. 06/17/2020 13:59:58
how to initialise and flash leds on epuck in python?

##### David Mansolino [Cyberbotics] 06/17/2020 14:01:17
Here is a tutorial abotu Python controllers:

[https://cyberbotics.com/doc/guide/tutorial-4-more-about-controllers?tab-language=python](https://cyberbotics.com/doc/guide/tutorial-4-more-about-controllers?tab-language=python)

and here the documentation about LED in Python:

[https://cyberbotics.com/doc/reference/led?tab-language=python](https://cyberbotics.com/doc/reference/led?tab-language=python)

##### David. 06/17/2020 14:01:29
i looked at those


still confused

##### David Mansolino [Cyberbotics] 06/17/2020 14:01:53
Ok so can you be a bit more precise, what is confusing you?

##### David. 06/17/2020 14:02:39
well for starters, that first link says nothing about LEDs

##### David Mansolino [Cyberbotics] 06/17/2020 14:04:54
Yes, but it explains how to retrieve device handles with the Python API (which works the same for all the Devices).

##### David. 06/17/2020 14:05:31
thisis just for aschool assignmenti dont understand any of that


and i dont have time to understandit

##### Simon Steinmann [Moderator] 06/17/2020 14:09:08
Then I'd suggest asking your teacher

##### David. 06/17/2020 14:09:15
he isnt available


hence why im here


can i just get some very high-level instructions here? i just want some leds to blink on the epuck

##### Simon Steinmann [Moderator] 06/17/2020 14:12:18
the LEDs are called "led0" and "led1"

##### David. 06/17/2020 14:12:25
ye

##### Simon Steinmann [Moderator] 06/17/2020 14:15:25
so get a device handle to the LEDs, I havent tested it, but this should work:

LED0 = robot.getLED('led0')


then you can control the LED using the functions as explained in the documentation (2nd link he sent)

##### David. 06/17/2020 14:23:25
i put this in the controller and now the epuck wont move



class LED (Device):

   def set(self, 0xff0000):

   def get(self):

##### Simon Steinmann [Moderator] 06/17/2020 14:28:32
I hope you don't take this the wrong way, but you seem to be missing some basics of python programming. Didn't you get proper instructions with this assignment, or the fundamental courses required to writing python code?

##### David. 06/17/2020 14:29:14
since this lockdown started, online classes were minimalised and we were thrown pretty much in the deep end


Teacher is pretty unhelpful too

##### Simon Steinmann [Moderator] 06/17/2020 14:29:31
that sucks, sorry to hear that

##### David. 06/17/2020 14:30:04
was just following this
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/722820367055323186/unknown.png)
%end

##### Simon Steinmann [Moderator] 06/17/2020 14:30:10
I really suggest you do a python course. You should really know how objecgt oriented programming works. In python this especially includes classes and how to use them

##### David. 06/17/2020 14:30:40
I agree but the issue here is my timeframe

##### Simon Steinmann [Moderator] 06/17/2020 14:30:49
there is a free python course here: [https://www.robotigniteacademy.com/en/path/ros-for-beginners/](https://www.robotigniteacademy.com/en/path/ros-for-beginners/)


should be doable in a day

##### David. 06/17/2020 14:31:30
🤐 I don't have a day unfortunately, this sort of just needs to work

##### Simon Steinmann [Moderator] 06/17/2020 14:31:43
[https://www.youtube.com/watch?v=wfcWRAxRVBA](https://www.youtube.com/watch?v=wfcWRAxRVBA)


watch this at least


what python controller for the epuck are you using btw?


I doubt you wrote it from the ground up

##### David. 06/17/2020 14:32:58
No i didnt

##### Simon Steinmann [Moderator] 06/17/2020 14:33:17
are you using a sample world and controller?

##### David. 06/17/2020 14:33:40
im using the controller code on [https://cyberbotics.com/doc/guide/tutorial-4-more-about-controllers?tab-language=python](https://cyberbotics.com/doc/guide/tutorial-4-more-about-controllers?tab-language=python)

##### Simon Steinmann [Moderator] 06/17/2020 14:34:11
what about the world file?

##### David. 06/17/2020 14:34:18
created that

##### Simon Steinmann [Moderator] 06/17/2020 14:34:39
is it just a blank world with the epuck added?

##### David. 06/17/2020 14:34:48
and some barrels lol

##### Simon Steinmann [Moderator] 06/17/2020 14:36:20
watch the video in the meantime, I'll have a quick look

##### David. 06/17/2020 14:36:27
alright

##### Simon Steinmann [Moderator] 06/17/2020 14:54:06
this has led0 and led1 blinking. I added line 2, 24-26 and 34-37
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/722826412469518346/unknown.png)
%end


I purposefully pasted it as an image. type it yourself and try to understand. if something is not clear, let me know. A good little exercise would be to change the color of one of the LEDs


as an explanation of the ledValue. I use the simulation time and the sinusfunction to get an oscilating value. So the core is sin(2*pi*time). we need to add the 2*pi, because we want to oscilate once per second, not once per ~6,3 seconds. By multiplying our frequency in hz, we can increase or decrease the frequency. (sin(...)+1)/2 makes it so we oscilate between 0 and 1 and not -1 and 1


then we round(sin(...), 0) so we get 0 or 1 and finally we turn it into and integer using int()

##### Zenzo 06/17/2020 15:18:18
`@Simon Steinmann` I was looking at this conversation and it made me curious as to how you make blinking LED lights with maths, could you explain it a little further? I am very simple so simplifying it will help me to understand thanks.

##### Simon Steinmann [Moderator] 06/17/2020 15:27:21
`@Zenzo` 

`#!/usr/bin/env python2

\# -*- coding: utf-8 -*-

from math import sin, pi

import time



start\_time=  time.time()

while True:

    t = time.time() - start\_time   #time in seconds going up from 0

    

    value1 = sin(t) # oscilates between -1 and 1

    value2 = sin(t)+1 # oscilates between 0 and 2

    value3 = (sin(t)+1)/2 # oscilates between 0 and 1

    value4 = round(value3,0) # JUMPS between -0 and 1

    value5 = int(value4) # turns value4 into integer

    

    print(value1, value2, value3, value4, value5`)


let me know if this is clear 🙂


keep in mind that you have to use sin(2 * pi * t) if you want the value to oscilate ONCE per second, instead of 2*pi seconds (about 6,3 seconds)


you can also do sin(2 * pi * frequency * t)  with frequency being a variable you set. This is the value in Hz, so with frequency = 10, the value oscilates 10 times a second


Can you follow, or do you want me to elaborate?

##### Zenzo 06/17/2020 15:38:45
I am following

##### Simon Steinmann [Moderator] 06/17/2020 15:46:05
[https://www.wolframalpha.com/input/?i=plot+of+y%3Dsin%28x](https://www.wolframalpha.com/input/?i=plot+of+y%3Dsin%28x)*2*pi%29+and+y%3D%28sin%28x*2*pi%29%2B1%29%2F2+and+y%3Dround%28%28sin%28x*2*pi%29%2B1%29%2F2%29++for+x%3D0+to3+


this visualizes it 🙂


and people say they will never need Trigonometry outside of school 😄

##### nelsondmmg 06/17/2020 15:59:22
Looking through the ODE documentation, each surface has a mu, the static friction constant and a rho, the dynamic friction constant. I cannot find the rho definition in the contact properties node. What happens if I apply a torque in a tire with a higher intensity than the longitudinal static friction? Right now I am putting a high value for mu to avoid this scenario, but I noticed that when mu is low the velocity keeps oscillating. In the picture I used by control to set the throttle, but with a constant throttle value the plot is similar.
%figure
![slip.png](https://cdn.discordapp.com/attachments/565154703139405824/722842838429204511/slip.png)
%end

##### Simon Steinmann [Moderator] 06/17/2020 16:02:19
`@Olivier Michel` Can I address a field of a node directly? or do I have to use the "getField()" function first to get a handle? I'm trying to change the gradual and color field of a LED node. How would I go about that? Oh and what in the heck is the datatype of the color Field? in the documentation it's "color: [1 1 1]" but that's no data type. Slightly confusing

##### Olivier Michel [Cyberbotics] 06/17/2020 16:03:46
You should use `getField()`.


And the data type you receive in Python should be an array of 3 floats.

##### Simon Steinmann [Moderator] 06/17/2020 16:05:19
can I also set it that way? as an array=

##### Olivier Michel [Cyberbotics] 06/17/2020 16:05:54
Yes, using the setter.

##### Simon Steinmann [Moderator] 06/17/2020 16:06:05
thx, I'll try


LED0 = robot.getLED('led0')

gradual = LED0.getField('gradual')



2nd line throws errer


AttributeError: type object 'object' has no attribute '\_\_getattr\_\_'

##### Olivier Michel [Cyberbotics] 06/17/2020 16:10:58
You should use getFromDEF() instead of getLED().

##### Simon Steinmann [Moderator] 06/17/2020 16:11:49
oh wait, the robot has to be supervisor right?


otherwise I cant use that functionality

##### Olivier Michel [Cyberbotics] 06/17/2020 16:12:38
Yes.

##### Simon Steinmann [Moderator] 06/17/2020 16:13:05
uff, okay, the LED node really needs direct functionality to set gradual and color. This is quite painful workflow :p

##### Olivier Michel [Cyberbotics] 06/17/2020 16:16:22
If you want to change the color of a LED, you should use the LED API instead.


I am not sure what you are trying to do...


Can't you simply use the LED.set() method?

##### Simon Steinmann [Moderator] 06/17/2020 16:17:27
for that, the gradual field has to be set to true, and the color  field needs to be empty

##### Olivier Michel [Cyberbotics] 06/17/2020 16:17:55
Yes, but why don't you set this in the world or proto file?

##### Simon Steinmann [Moderator] 06/17/2020 16:17:57
would be nice to do that in the controller, not the proto file

##### Olivier Michel [Cyberbotics] 06/17/2020 16:18:28
So, the only way is to use a supervisor then.

##### Simon Steinmann [Moderator] 06/17/2020 16:22:46
now I get: AttributeError: 'NoneType' object has no attribute 'getField'


DEF EPUCK\_LED0 LED {

      translation 0 0.041 -0.0337

      children [

        Shape {

          appearance PBRAppearance { # Don't use DEF/USE here!

            baseColor 0.8 0.8 0.8

            roughness 0.2

            metalness 0.5

            emissiveIntensity 100

          }

          geometry DEF EPUCK\_LED\_GEOMETRY Box {

            size 0.004 0.003 0.003

          }

        }

      ]

      name "led0"


this is the proto for the LED


\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_

and I get the node handle like this:

LED0 = robot.getFromDef('EPUCK\_LED0')


with robot being a Supervisor()


Well I guess LEDs dont have to be set up on the fly...

##### doppiooooh 06/17/2020 22:45:04
can anyone help me figure out a problemo


i keep trying to download the webots latest stable version


ive tried on firefox and chrome


and it either fails and refuses to start after a few minutes or fails and corrupts the file


i am trying to download an older version but it still failed


does anyone know what the problem could be?

##### Simon Steinmann [Moderator] 06/17/2020 22:46:25
do you have enough storage on your computer? :p


and what OS are you using?

##### doppiooooh 06/17/2020 22:46:38
yeah i have plenty


windows 10

##### Simon Steinmann [Moderator] 06/17/2020 22:48:03
you tried this link? [https://github.com/cyberbotics/webots/releases/tag/R2020a-rev1](https://github.com/cyberbotics/webots/releases/tag/R2020a-rev1)


must be a problem on your side. Perhaps try updating and restarting your pc

##### doppiooooh 06/17/2020 22:49:13
ill try that link and update my computer


i tried it on my old pc and the same thing happened

##### Simon Steinmann [Moderator] 06/17/2020 22:49:49
I doubt github is down

##### doppiooooh 06/17/2020 22:49:50
ill try that link though

##### David Mansolino [Cyberbotics] 06/18/2020 05:33:14
> now I get: AttributeError: 'NoneType' object has no attribute 'getField'

`@Simon Steinmann` `getFromDef` can't get node inside a PROTO, this is why you get None. If you are using a beta of Webots R2020b you can use instead the `getFromProtoDef` function ([https://www.cyberbotics.com/doc/reference/supervisor?version=develop&tab-language=python#wb\_supervisor\_node\_get\_from\_proto\_def](https://www.cyberbotics.com/doc/reference/supervisor?version=develop&tab-language=python#wb_supervisor_node_get_from_proto_def)) that allows to get node inside a PROTO (in read only mode).

##### nelsondmmg 06/18/2020 05:46:36
> Looking through the ODE documentation, each surface has a mu, the static friction constant and a rho, the dynamic friction constant. I cannot find the rho definition in the contact properties node. What happens if I apply a torque in a tire with a higher intensity than the longitudinal static friction? Right now I am putting a high value for mu to avoid this scenario, but I noticed that when mu is low the velocity keeps oscillating. In the picture I used by control to set the throttle, but with a constant throttle value the plot is similar.

@nelsondmmg#41 `@David Mansolino` do you have any clue or know where I can get this info?

##### Sanket Khadse 06/18/2020 06:34:27
Hey, I wanted to use OpenStreetMap Importer. But as given in the instructions I don't see any path `$WEBOTS_HOME/resources/osm_importer` in my system. My webots version in R2020a rev1.

##### David Mansolino [Cyberbotics] 06/18/2020 06:50:43
> `@nelsondmmg`#41 `@David Mansolino` do you have any clue or know where I can get this info?

`@nelsondmmg` the rho parameter is unfortunately not set it therefore keeps the default value (0 or very close to). IF you need this parameters and want us to add it, please open a feature request here to explain why this parameter is important and we will add it:

[https://github.com/cyberbotics/webots/issues/new?template=feature\_request.md](https://github.com/cyberbotics/webots/issues/new?template=feature_request.md)


> Hey, I wanted to use OpenStreetMap Importer. But as given in the instructions I don't see any path `$WEBOTS_HOME/resources/osm_importer` in my system. My webots version in R2020a rev1.

`@Sanket Khadse` that's strange, which OS are you using? Did you defined 'WEBOTS\_HOME' ?

##### nelsondmmg 06/18/2020 06:56:07
Thanks for the answer, but how the tire reacts when the static force is higher than the friction when the rho is zero and the fds is also zero? That's what I don't understand in ODE documentation.

##### David Mansolino [Cyberbotics] 06/18/2020 07:08:30
From the manual it is said that only `mu` should always be set. My guess is that mu will impact the dynamic case when rho and fds are 0.

##### lojik 06/18/2020 07:19:35
As I understood by reading doc a bit with mu and fds is when the force at contact point is bigger than friction, the contact point will move with a constant speed equal to fds * normal force.



But I did not have the expected behavior in simulation on my side too.

##### Kormit 06/18/2020 08:39:23
I'm having issues with object recognition. The robot can detect the objects correctly but if the robot is on the other side of a wall it can detect the object through it. The detectable object is just a flat plane placed on the wall but if I move it away from the wall a bit, the robot can no longer detect it from the other side. Do you have any thoughts on how I could fix this? Thanks.

##### nelsondmmg 06/18/2020 08:44:23
> As I understood by reading doc a bit with mu and fds is when the force at contact point is bigger than friction, the contact point will move with a constant speed equal to fds * normal force.

> 

> But I did not have the expected behavior in simulation on my side too.

`@lojik` I'm gonna try to find out how the connection is modeled.

##### David Mansolino [Cyberbotics] 06/18/2020 08:50:01
`@Kormit`, did you set the `occlusion` of the Recognition node to True?

##### Kormit 06/18/2020 08:53:21
Yes it is

##### David Mansolino [Cyberbotics] 06/18/2020 08:54:06
Ok, in that case does your wall have a bounding object?

##### Kormit 06/18/2020 08:57:50
Yes it does

##### David Mansolino [Cyberbotics] 06/18/2020 08:58:36
Ok, then you have to make sure that the object is completely 'hidden' by the bounding object from the camera

##### lojik 06/18/2020 09:12:31
`@nelsondmmg` thank you 👌 Right now my simulation begin to slide down the slope as soon as it is a little bit tilted (0.5 degrees for example).



I do not think that the friction coulomb is taken into account here ...



For your understanding : Friction coulomb is 1, firce dependent slip is 0.001, basic time step is 2



I would help more but I am at the end of my master thesis and friction is not my higgest priority now in this simulation 😅

##### David Mansolino [Cyberbotics] 06/18/2020 11:07:43
> I currently get this warning after I added in the battery variables to the robot node (webots can't calculate the consumption of the linearmotor in a track), is there a way to either fix this or at least get rid of the warnings? (it make using the console impossible)

`@Master6` this is now fixed on Github and will be included in the next release.

##### Master6 06/18/2020 12:02:24
Awesome!

##### nelsondmmg 06/18/2020 13:04:57
The model 3 wheels inertia moment is defined somewhere in the PROTOs?

##### David Mansolino [Cyberbotics] 06/18/2020 13:06:18
It is computed automatically based on the bounding objects of the wheel.

##### nelsondmmg 06/18/2020 13:09:17
So it is calculated as a solid cylinder?

##### David Mansolino [Cyberbotics] 06/18/2020 13:13:12
Yes

##### aalmanso 06/18/2020 13:19:46
Hi, i want to build the graphical environment(Arena, Obstacls, Walls...) by using editor, is that possible in webots simulator?

##### David Mansolino [Cyberbotics] 06/18/2020 13:20:29
What do you mean by editor? The Webots GUI or a text editor?

##### aalmanso 06/18/2020 13:21:08
by using C or C++ programming language


text editor

##### David Mansolino [Cyberbotics] 06/18/2020 13:22:54
Yes of course, Webots uses an extension of WRML which is humand readable.

You will find more information about world files here: [https://cyberbotics.com/doc/reference/webots-world-files](https://cyberbotics.com/doc/reference/webots-world-files)

##### aalmanso 06/18/2020 13:32:14
> Yes of course, Webots uses an extension of WRML which is humand readable.

> You will find more information about world files here: [https://cyberbotics.com/doc/reference/webots-world-files](https://cyberbotics.com/doc/reference/webots-world-files)

`@David Mansolino` thank you very much

##### David Mansolino [Cyberbotics] 06/18/2020 13:33:04
You're welcome

##### chungshan 06/19/2020 03:07:19
hello, I want to use opencv in a controller. When I import cv2, it got error

[kinect\_controll]     import cv2

[kinect\_controll] ImportError: /usr/lib/x86\_64-linux-gnu/libQt5Test.so.5: undefined symbol: \_Z32qt\_register\_signal\_spy\_callbacksRK21QSignalSpyCallbackSet



opencv version is 3.3.1

python version is python 2.7

webots is installed in a docker like this : [https://github.com/cyberbotics/webots/wiki/Docker](https://github.com/cyberbotics/webots/wiki/Docker)

Besides, I can import cv2 like this in terminal:

===========================

root@c9e0f616ebb8:/# python

Python 2.7.12 (default, Apr 15 2020, 17:07:12) 

[GCC 5.4.0 20160609] on linux2

Type "help", "copyright", "credits" or "license" for more information.

> import cv2

> >>> print cv2.\_\_version\_\_

> 3.3.1-dev

> >>>

##### David Mansolino [Cyberbotics] 06/19/2020 05:22:18
Hi `@chungshan` it seems you have a version of Qt that is installed on your Docker that is not compatible with cv2.

Which version of Webots are you using?

##### Olivier Michel [Cyberbotics] 06/19/2020 05:35:11
Hi! Can you try running your opencv controller as an extern controller as explained here: [https://cyberbotics.com/doc/guide/running-extern-robot-controllers?tab-os=linux](https://cyberbotics.com/doc/guide/running-extern-robot-controllers?tab-os=linux). If that still doesn't work, I would recommend you to change the LD\_LIBRARY\_PATH variable so that it points to a new folder that you will create and that will contain a copy of libController.so and libCppController.so. The goal here is to avoid that your controller uses the Qt libraries of Webots.

##### chungshan 06/19/2020 05:37:41
`@David Mansolino` webots is building from source as [https://github.com/cyberbotics/webots/wiki/Docker](https://github.com/cyberbotics/webots/wiki/Docker) in "Create your own Image"

##### Olivier Michel [Cyberbotics] 06/19/2020 05:55:54
Two days ago we did an important commit to the master branch of Webots which should resolve the problem you are facing: [https://github.com/cyberbotics/webots/pull/1765](https://github.com/cyberbotics/webots/pull/1765). When did you clone Webots from the sources?

##### chungshan 06/19/2020 06:08:48
`@Olivier Michel` I cloned webots a week ago. I'll try it, thanks!

##### Olivier Michel [Cyberbotics] 06/19/2020 06:09:10
Let us know.

##### chungshan 06/19/2020 09:10:54
`@Olivier Michel` It works! I can import cv2 in the controller now. I clone the newest webots from the sources.

##### Olivier Michel [Cyberbotics] 06/19/2020 09:21:03
Great! Thank you for the feedback!

##### G1020BS 06/19/2020 11:56:52
`@Olivier Michel` I made a robot with tracks like your example world ‘track’. The only thing is, when I start to turn, the robot only goes back and forward like an idiot. Any suggestions?

##### Olivier Michel [Cyberbotics] 06/19/2020 12:04:51
The track.wbt example is working fine with respect to turning. How does your example differ from this one?

##### G1020BS 06/19/2020 12:10:42
I also made a tank and gave it tracks. But when I let it turn, it just goes back and forward.


If I set the controller to go just forward or backward, everything is fine. But turning just doesn't work

##### Olivier Michel [Cyberbotics] 06/19/2020 12:21:18
How to you program turning? Set a positive speed on one track and the same, but negative speed on the other track?

##### G1020BS 06/19/2020 12:39:41
Thats correct


leftSpeed = 0.1 and rightSpeed = -0.1

##### Olivier Michel [Cyberbotics] 06/19/2020 16:21:06
Please try to see how you example differ from the provided `track.wbt` example which works for turning. This will allow you to understand why your robot is not turning as expected. And keep us posted about your findings.

##### novice\_2222 06/19/2020 19:34:51
Hey!

I'm new to Webots and I'm trying to implement inverse kinematics algorithms for robotic manipulators (arms).

I'm currently using the UR10e manipulator.

I already implemented the algorithms in Python and in them I described the kinematics via rotation matrices which I derived from parametrizing the robot structure with Denavit-Hartenberg parameters.

I have also used Matplotlib animations to verify that the algorithms work.

The problem I have is the following:

I'm not able to align the coordinate systems used in my algorithms to those in the simulator.

I thought I just have to align the global coordinate system to the robot's base and check that the initial motor angles (positions) coincide, however I simply can't get it right.

Since I'm not too familiar with how the arm is implemented in Webots, I used measurements provided

by Universal robotics (manufacturers of UR10e) to get the link lenghts and of the arm and I simulated the arm

with motor positions set to 0 for the default angles. I derived the DH parameters from this.

I also added the GPS device in the tool slot to get the end-effector position and orientation.

However, I feel like I have the wrong approach. Is there a better way to do this?

The end goal is to be able to verify that the way I reprezent the robot in the algorithms 

is the same as in the simulation so that I can then calculate the Jacobian and so on.

I converted the UR10e PROTO node into the Robot class, but I don't know to extract the relevant data from there,

like axis of rotation as provided in the HingeJointParameters.

If you can point me to relevant documentation, a sample with direct kinematics on manipulators or explain what

should I do, it would help a lot, thanks.

##### chenpixx 06/19/2020 20:58:14
I think that the final nighly build (19.06) is for windows not linux. Is it correct? When will you publish for linuz?


Thanks for fixing the camera problem.

##### bug 06/21/2020 02:51:00
> Hey!

> I'm new to Webots and I'm trying to implement inverse kinematics algorithms for robotic manipulators (arms).

> I'm currently using the UR10e manipulator.

> I already implemented the algorithms in Python and in them I described the kinematics via rotation matrices which I derived from parametrizing the robot structure with Denavit-Hartenberg parameters.

> I have also used Matplotlib animations to verify that the algorithms work.

> The problem I have is the following:

> I'm not able to align the coordinate systems used in my algorithms to those in the simulator.

> I thought I just have to align the global coordinate system to the robot's base and check that the initial motor angles (positions) coincide, however I simply can't get it right.

> Since I'm not too familiar with how the arm is implemented in Webots, I used measurements provided

> by Universal robotics (manufacturers of UR10e) to get the link lenghts and of the arm and I simulated the arm

> with motor positions set to 0 for the default angles. I derived the DH parameters from this.

> I also added the GPS device in the tool slot to get the end-effector position and orientation.

> However, I feel like I have the wrong approach. Is there a better way to do this?

> The end goal is to be able to verify that the way I reprezent the robot in the algorithms 

> is the same as in the simulation so that I can then calculate the Jacobian and so on.

> I converted the UR10e PROTO node into the Robot class, but I don't know to extract the relevant data from there,

> like axis of rotation as provided in the HingeJointParameters.

> If you can point me to relevant documentation, a sample with direct kinematics on manipulators or explain what

> should I do, it would help a lot, thanks.

`@novice_2222` 



an official sample is available: irb/inverse\_kinematics.wbt, hope it's usefull to you.


Hi, guys.

i have a question and need you help, now i create  a robot and a independent camera device (within the robot), i use a supervisor controller in the robot so that i can control the  independent camera, and i can get node by using the API getFromDef, but i can't control the camera (i think i should using API like getCamera,but i can't find in supervisor  class), so how to control camera (enable, get image and so on ) by using supervisor controller? by the way, the language i use is python .  Thanks!

##### Olivier Michel [Cyberbotics] 06/21/2020 07:28:37
The Supervisor object inherits from the Robot object, so you should be able to use any Robot API function from your Supervisor object.

##### bug 06/21/2020 08:49:37
> The Supervisor object inherits from the Robot object, so you should be able to use any Robot API function from your Supervisor object.

`@Olivier Michel` 

Thank you for your answer, and i try using API  getCamera ,but it doesn't work, and ouputs [Warning: "camera3" device not found.] , this pic show the  relation of  robot and camera3
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/724184239783936070/unknown.png)
%end


and my code is  [camera3 = supervisor.getCamera("camera3");]

##### David Mansolino [Cyberbotics] 06/22/2020 05:33:00
> I think that the final nighly build (19.06) is for windows not linux. Is it correct? When will you publish for linuz?

`@chenpixx` IT seems indeed there were an issue while creating the nightly build for Linux, but the next one will be available for linux.


> Thanks for fixing the camera problem.

`@chenpixx` you're welcome


> `@Olivier Michel` 

> Thank you for your answer, and i try using API  getCamera ,but it doesn't work, and ouputs [Warning: "camera3" device not found.] , this pic show the  relation of  robot and camera3

`@bug` can you see the 'camera3' camera in the robot-window of the robot who is using this controller?

##### bug 06/22/2020 08:29:52
> `@bug` can you see the 'camera3' camera in the robot-window of the robot who is using this controller?

`@David Mansolino` 

i can't see it in the Generic-robot-window , the robot doesn't contain  the 'cameras', which is a external camera, so i want to using supervisor controller to get the camera, but i don't know how to do.

##### David Mansolino [Cyberbotics] 06/22/2020 08:30:43
so you mean that the camera does not belong to the robot from which you want to access it?

##### bug 06/22/2020 08:30:58
yes

##### David Mansolino [Cyberbotics] 06/22/2020 08:31:46
In that case I am sorry, but the devices are only accessible for the robot whose they belong. But if you want you can use the emitter/receiver API to share the images of the camera between controllers.

##### bug 06/22/2020 08:34:31
> In that case I am sorry, but the devices are only accessible for the robot whose they belong. But if you want you can use the emitter/receiver API to share the images of the camera between controllers.

`@David Mansolino`  

thank you!

##### David Mansolino [Cyberbotics] 06/22/2020 08:35:03
You're welcome

##### G1020BS 06/22/2020 12:21:38
Hi. cam.saveImage() is really slowing my simulation down. I save the cam image every step because I am sending the images to a local website that functions as a "remote viewing site". Do you know how to make this process faster or is it just not really possible?

##### Olivier Michel [Cyberbotics] 06/22/2020 12:23:20
Are you saving to PNG or JPEG image?

##### G1020BS 06/22/2020 12:23:27
PNG


if I save as jpeg, the whole image is gray and distorted...

##### Olivier Michel [Cyberbotics] 06/22/2020 12:23:48
Try switching to JPEG, it may be faster and will fore sure generate smaller files.


That's a bug...


On which platform you running Webots?

##### G1020BS 06/22/2020 12:24:18
Windows 10 64bit

##### Olivier Michel [Cyberbotics] 06/22/2020 12:24:34
Which version of Webots are you using?

##### G1020BS 06/22/2020 12:25:09
The last stable release from github. 2020A Rev. 1

##### Olivier Michel [Cyberbotics] 06/22/2020 12:25:54
May I ask you to try the latest R2020a revision 2 from the github nightly builds. It may fix this problem.

##### G1020BS 06/22/2020 12:26:14
Sure I'll go ahead and try that. I'll keep you updated

##### Olivier Michel [Cyberbotics] 06/22/2020 12:26:21
You get it from here: [https://github.com/cyberbotics/webots/releases/tag/nightly\_19\_6\_2020](https://github.com/cyberbotics/webots/releases/tag/nightly_19_6_2020)

##### G1020BS 06/22/2020 12:26:26
Thanks!


Regarding this question. I loaded another world and it just worked. Same Robot, same World settings. So I really dont know what the problem was..

> Please try to see how you example differ from the provided `track.wbt` example which works for turning. This will allow you to understand why your robot is not turning as expected. And keep us posted about your findings.

`@Olivier Michel`

##### Olivier Michel [Cyberbotics] 06/22/2020 12:28:55
Strange... So, shall we consider the problem is solved for you (although we don't understand how)?

##### G1020BS 06/22/2020 12:29:22
Let's do that. If I do find the issue later on, I will inform you about it.

##### Olivier Michel [Cyberbotics] 06/22/2020 12:29:48
Great. Thank you.


I just tested in development environment and the save to JPG image seems to work fine.

##### G1020BS 06/22/2020 12:39:00
Only one problem. I cant load my world anymore..
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/724604354962784326/unknown.png)
%end

##### Olivier Michel [Cyberbotics] 06/22/2020 12:39:27
Oops...


Does your world file uses an UnevenTerrain proto?

##### G1020BS 06/22/2020 12:40:40
There is no node of that kind as far as I can see.


I did a ctrl + f search when I opened the world file in notepad++

##### Olivier Michel [Cyberbotics] 06/22/2020 12:41:15
Can you please send your world file to support@cyberbotics.com so that we can check it?

##### G1020BS 06/22/2020 12:41:24
Sure.


I've sent an email

##### Olivier Michel [Cyberbotics] 06/22/2020 12:44:00
Got it!


OK, I am getting many warnings when loading it (missing proto files, images, etc.) but it shows up and seems fine. I am testing it with an older R2020a revision 2. I will test the last nightly now...

##### G1020BS 06/22/2020 12:49:18
Okay. So if 2020b doesn't work I'll downgrade to r2020a rev2. Do you want me to send the proto files and such or is that no necessary?

##### Olivier Michel [Cyberbotics] 06/22/2020 12:50:29
I thought you were already using R2020a revision 2 as I told you...

##### G1020BS 06/22/2020 12:51:02
The exe on that page is a 2020b


I see. Both a 2020a and 2020b are on that page


I installed 2020a rev2 and I can open the world also. When I save the camera image as a jpeg I still get a distorted image

##### Olivier Michel [Cyberbotics] 06/22/2020 13:02:49
OK, let me check again.


OK, I confirm I can run the example in `WEBOTS_HOME/samples/devices/worlds/camera.wbt` and it works as expected when I change the image type from PNG to JPG (and recompile the controller). The resulting JPG images are well saved (and look correct) in my home folder `C:\Users\username\blue_blob.jpg`


So, I would suspect that in your case, a conflicting JPEG library is found in your PATH and causes problems with JPEG save.


Can you check if you have some libjpeg-8.dll in your PATH that might conflict with the one shipped with Webots?

##### G1020BS 06/22/2020 13:14:55
Will do


I scanned my drive for it and it only found Openshot Video Editor using it. It didn't appear to be in my path though.. When I removed it nothing changes. Is it a possibility, when I reinstalled webots with the nightly built, that some files were kept and not reinstalled? Or does the install erase all the files first?


It appears theres nothing in my PATH that uses that .dll

##### Olivier Michel [Cyberbotics] 06/22/2020 13:37:19
If files are remaining after the uninstall, they should be removed manually. However, this should not happen normally...

##### G1020BS 06/22/2020 13:37:46
I'll try to reinstall once more


Did a complete uninstall of Webots and installed 2020a rev 2 again. Still no change..

##### Olivier Michel [Cyberbotics] 06/22/2020 13:49:41
Do you get the same problem with the `camera.wbt` example world I just mentioned?

##### G1020BS 06/22/2020 13:55:46
Jep, I got the same gray, distorted image


So its a problem on my machine..

##### Olivier Michel [Cyberbotics] 06/22/2020 13:56:09
Can you share this image here?

##### G1020BS 06/22/2020 13:56:28
The blue\_blob or from my own project?

##### Olivier Michel [Cyberbotics] 06/22/2020 13:56:36
The blue\_blob.

##### G1020BS 06/22/2020 13:56:46
Here it is
%figure
![blue_blob.jpg](https://cdn.discordapp.com/attachments/565154703139405824/724623923400147004/blue_blob.jpg)
%end

##### Olivier Michel [Cyberbotics] 06/22/2020 13:57:17
I see 😕


Do you have several versions of Webots installed on your PC?

##### G1020BS 06/22/2020 14:01:37
No. Only the version you told me to use


Im currently installing Webots on my laptop. Maybe that works..

##### Olivier Michel [Cyberbotics] 06/22/2020 14:03:13
That would interesting...


Let us know.

##### Musaab 06/22/2020 14:29:06
Hi, Im using distance sensors (a lot) on my robot to avoid obstacles. Is there a better way to avoid obstacle  ?

##### David Mansolino [Cyberbotics] 06/22/2020 14:33:16
You might use a lidar instead: 

  - [https://cyberbotics.com/doc/reference/lidar](https://cyberbotics.com/doc/reference/lidar)

  - [https://cyberbotics.com/doc/guide/samples-devices#lidar-wbt](https://cyberbotics.com/doc/guide/samples-devices#lidar-wbt)

  - [https://cyberbotics.com/doc/guide/samples-devices#sick-wbt](https://cyberbotics.com/doc/guide/samples-devices#sick-wbt)

##### G1020BS 06/22/2020 14:42:14
> That would interesting...

`@Olivier Michel` Tested it on my brand new laptop. Almost no programs on there. Still a grey image. I tested with the stable release tho. I'll try the nightly build now

##### Andrei 06/22/2020 15:08:39
hi

##### Quantumfox 06/22/2020 15:21:56
Hi. I tried to stream webots with "webots --stream" and Webots crashes with this error: 

`Exception code=0xc0000005 flags=0x0 at 0x00000000005D786E. Access violation - attempting to read data at address 0x0000000000000000`

##### Olivier Michel [Cyberbotics] 06/22/2020 15:22:40
`@Quantumfox`: can you please open a complete bug report so that we can try to reproduce and fix it?


[https://github.com/cyberbotics/webots/issues/new?template=bug\_report.md](https://github.com/cyberbotics/webots/issues/new?template=bug_report.md)

##### Quantumfox 06/22/2020 15:26:54
i tried a different world to stream then the exception code doesnt show up

##### Olivier Michel [Cyberbotics] 06/22/2020 15:30:41
Why world was causing the crash? Your own world?

##### Quantumfox 06/22/2020 15:30:56
jep


there was a random node who bugged

##### Olivier Michel [Cyberbotics] 06/22/2020 15:31:15
And does it crash without the --stream option?


OK, I see.

##### Quantumfox 06/22/2020 15:32:09
thx for your help 🙂

##### Andrei 06/22/2020 15:40:04
can I create objects(obstacles) at runtime ?

##### Olivier Michel [Cyberbotics] 06/22/2020 15:42:51
Yes, from a supervisor process.

##### adaptive 06/22/2020 16:30:29
I have a Problem getting the "matlab" sample world controller running on Arch Linux with Matlab 2020a (installed and works properly) and Webots (R2020a rev 1).. Webots is installed via "snap". If i click Run nothing happens, in the output terminal prompts "Warning: matlab: MATLAB Controllers should be launched as extern controllers with the snap package of webots"


matlab is callable from the terminal so the bin-dir is linked properly


also the sample world "Robots/Nao" with Matlab-Controller behaves the same with the Warning..

##### Andrei 06/22/2020 21:59:10
> Yes, from a supervisor process.

`@Olivier Michel` 

> can I create objects(obstacles) at runtime ?

`@Andrei`   does anyone have an example in C++ ?

##### David Mansolino [Cyberbotics] 06/23/2020 05:07:12
`@adaptive`, can you try from the tar.gz package?


Or using an extern controller: [https://cyberbotics.com/doc/guide/running-extern-robot-controllers?tab-language=matlab&tab-os=linux](https://cyberbotics.com/doc/guide/running-extern-robot-controllers?tab-language=matlab&tab-os=linux)

##### Rajesh Roy 06/23/2020 06:44:53
How can I host my webGL exported simulation project on GitHub?

Is there any other free options available too?

##### David Mansolino [Cyberbotics] 06/23/2020 06:45:37
Yes this should work, using Github pages for visualizing should work.

##### Rajesh Roy 06/23/2020 06:47:01
> Yes this should work, using Github pages for visualizing should work.

`@David Mansolino` Certainly for mine project, it did not.

I uploaded the x3d and html file but the webpage is not showing anything apart from the Readme.md

##### David Mansolino [Cyberbotics] 06/23/2020 06:47:23
which webpage ?

##### adaptive 06/23/2020 06:58:47
`@David Mansolino` if im running the matlab-launcher matlab crashed "error in Loadlibrary"

##### David Mansolino [Cyberbotics] 06/23/2020 06:59:21
Which version of Webot are you using?

Can you share the complete crash stack?

##### adaptive 06/23/2020 06:59:29
R2020a Rev 1


how? Matlab crashes and the terminal output dissappears

##### David Mansolino [Cyberbotics] 06/23/2020 07:00:19
'error in Loadlibrary' is the only error message you get?

##### adaptive 06/23/2020 07:01:12
No 😄 but it is the only one i can read before matlab closes


i shall pipe i


how can i pipe out of matlab-cmd?

##### David Mansolino [Cyberbotics] 06/23/2020 07:05:56
No idea 😕


Maybe there is an argument when you launch it

##### adaptive 06/23/2020 07:07:58
hm i tried to touch an file for an diary and the Folder is read-only.. "var/lib/snapd/snap/webots/14/usr/share/weboits/lib/controller/matlab"

##### Rajesh Roy 06/23/2020 07:08:42
> which webpage ?

`@David Mansolino` Here are the files which I committed to my repository and then I turned on the setting for GitHub Pages.



When I use my link, I don't see anything apart of the Readme.md file
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/724883618446704750/unknown.png)
%end

##### David Mansolino [Cyberbotics] 06/23/2020 07:08:47
Ok, maybe you should try using another way to install Webots

##### adaptive 06/23/2020 07:08:57
yes maybe

##### David Mansolino [Cyberbotics] 06/23/2020 07:09:50
> `@David Mansolino` Here are the files which I committed to my repository and then I turned on the setting for GitHub Pages.

> 

> When I use my link, I don't see anything apart of the Readme.md file

`@Rajesh Roy` you should not directly watch the pages on Github, but rather use Github pages: [https://pages.github.com/](https://pages.github.com/)

##### Rajesh Roy 06/23/2020 07:11:51
> `@Rajesh Roy` you should not directly watch the pages on Github, but rather use Github pages: [https://pages.github.com/](https://pages.github.com/)

`@David Mansolino` I've hosted the repository according to the guidelines.
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/724884411472019476/unknown.png)
%end

##### adaptive 06/23/2020 07:13:13
`@David Mansolino` which installation is recommend for Arch? I think the tar.bz2 install?

##### David Mansolino [Cyberbotics] 06/23/2020 07:14:21
> `@David Mansolino` I've hosted the repository according to the guidelines.

`@Rajesh Roy` then you should use a link who looks like (not sure it is exactly this as some part are hidden on the picture): [http://rajeshroy402.github.io/main\_arena.html](http://rajeshroy402.github.io/main_arena.html)


> `@David Mansolino` which installation is recommend for Arch? I think the tar.bz2 install?

`@adaptive` yes, tar.bz2 and you probably have to install a few dependencies manually

##### Rajesh Roy 06/23/2020 07:20:04
> `@Rajesh Roy` then you should use a link who looks like (not sure it is exactly this as some part are hidden on the picture): [http://rajeshroy402.github.io/main\_arena.html](http://rajeshroy402.github.io/main_arena.html)

`@David Mansolino` The link is of type myusername.github.io/repositoryname.github.io/



This shouldn't have happened right?

##### David Mansolino [Cyberbotics] 06/23/2020 07:21:26
Usually it looks more like 'myusername.github.io/repositoryname/'

##### Rajesh Roy 06/23/2020 07:23:49
> Usually it looks more like 'myusername.github.io/repositoryname/'

`@David Mansolino` that's fine, I just named my repository like repositoryname.github.io by following the step 3 from the image
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/724887425502937108/unknown.png)
%end


Even after renaming the repository from repositoryname.github.io to repositoryname is not helpin

##### David Mansolino [Cyberbotics] 06/23/2020 07:25:17
That's strange, but I am sorry, this has nothing to do with Webots, I can't help you more about this 😕 You should probably ask this directly on a Github support forum.

##### adaptive 06/23/2020 07:46:57
`@David Mansolino` here is the output [https://bpa.st/M7HQ](https://bpa.st/M7HQ), installing the tarball didnt help


this is the output which appears from webots terminal if im starting with te run-button

##### David Mansolino [Cyberbotics] 06/23/2020 07:49:07
The log is indeed usefull, it looks like a bug we fixed recently, can you please try with a beta version of Webots R2020a-rev2 available here: [https://github.com/cyberbotics/webots/releases](https://github.com/cyberbotics/webots/releases)

##### Rajesh Roy 06/23/2020 07:49:21
> That's strange, but I am sorry, this has nothing to do with Webots, I can't help you more about this 😕 You should probably ask this directly on a Github support forum.

`@David Mansolino` I missed one thing! The GitHub pages search for index.html so I just had to rename the main\_arena.html to index.html



Worked perfectly after that.

##### Jiajun Wang 06/23/2020 07:51:10
hi，How can Webots model a closed-loop kinematic chain？thx

##### David Mansolino [Cyberbotics] 06/23/2020 07:52:36
Hi, you should use the SolidReference node to create a mechanical loop: [https://cyberbotics.com/doc/reference/solidreference](https://cyberbotics.com/doc/reference/solidreference)

Here is a simple example:

[https://cyberbotics.com/doc/guide/samples-howto#pedal\_racer-wbt](https://cyberbotics.com/doc/guide/samples-howto#pedal_racer-wbt)

##### Jiajun Wang 06/23/2020 07:54:56
i sought the SolidReference of Joint，but when start simulating, it does not work well... i wanna know how to assemble the passive-closed hinge joint correctly.

##### David Mansolino [Cyberbotics] 06/23/2020 07:55:23
You should probably have a look at the example I sent

##### Jiajun Wang 06/23/2020 07:56:43
ok. i will try it. thx~

##### adaptive 06/23/2020 08:05:37
How can the tarball version be deinstalled if neccessary?

##### Olivier Michel [Cyberbotics] 06/23/2020 08:06:31
Simply by removing the files (`rm -rf webots`).

##### adaptive 06/23/2020 08:06:45
ok thx

##### Rajesh Roy 06/23/2020 08:10:34
> `@David Mansolino` I missed one thing! The GitHub pages search for index.html so I just had to rename the main\_arena.html to index.html

> 

> Worked perfectly after that.

`@Rajesh Roy` As a follow up to this message





The simulation which was created using Webots Application for Windows looks like the image attached with this message but the result of the hosted webpage is
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/724899187812073482/unknown.png)
%end



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/724899300156506142/unknown.png)
%end

##### Olivier Michel [Cyberbotics] 06/23/2020 08:12:52
It looks like you are missing the textures. Are they available through the corresponding URL?

##### Jiajun Wang 06/23/2020 08:16:56
`@David Mansolino`  the example is not so clearly. 

So, can it be understood this way: when i was modeling, the position of Solid was the assembly position? The rotational axis of the joint must be coaxial when modeling zhe two Solids, and if they are separated(not coaxial), the rotational axis will not be what i want.

is that so？

##### David Mansolino [Cyberbotics] 06/23/2020 08:19:25
The SolidReference is quite simple to use actually, when you add the second joint, instead of adding a `Solid` node in the endPoint field you add a SolidReference node, and you set it's `solidName` to be the name of the Solid in the endpoint field of thefirst joint.

##### Sanket Khadse 06/23/2020 08:20:16
`@Olivier Michel` you are right sir. I figured that out. The console of inspect element was showing errors, saying the textures were not provided.

##### Rajesh Roy 06/23/2020 08:20:55
> It looks like you are missing the textures. Are they available through the corresponding URL?

`@Olivier Michel` This is the console showing errors in Google Chrome.

The texture folder is missing.
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/724901792726384761/unknown.png)
%end

##### Jiajun Wang 06/23/2020 08:21:44
i mean Webots cannot specify the rotation position of the successor of the joint. `@David Mansolino`

##### David Mansolino [Cyberbotics] 06/23/2020 08:24:35
> i mean Webots cannot specify the rotation position of the successor of the joint. `@David Mansolino`

`@Jiajun Wang` no because the sucessor is a Solid already existing, so if you want to change the rotation you should change it at the Solid definition

##### Jiajun Wang 06/23/2020 08:25:46
even thought i know how to specify the successor(another Solid, i.e. SolidReference) , I must make sure that the axis of the successor is exactly at the same position of the first Solid?

##### David Mansolino [Cyberbotics] 06/23/2020 08:26:29
Then for the axis, you should simply change the anchor field of the joint parameter

##### Jiajun Wang 06/23/2020 08:27:31

%figure
![JPEG_20200623_162721.jpg](https://cdn.discordapp.com/attachments/565154703139405824/724903452685238302/JPEG_20200623_162721.jpg)
%end



%figure
![JPEG_20200623_163034.jpg](https://cdn.discordapp.com/attachments/565154703139405824/724904235514200084/JPEG_20200623_163034.jpg)
%end


`@David Mansolino`  is the photo clear?

##### David Mansolino [Cyberbotics] 06/23/2020 08:32:17
The angles you want to set are not at the last jo9nt level, but rather at the intermediary joint level, for which the rotation is completely available.

##### Jiajun Wang 06/23/2020 08:38:30
i have to manually calculate the angle values of q1 and q2, then set value to the jointParameters to make sure the right axis position of the last closed-joint, when i was modeling?

##### David Mansolino [Cyberbotics] 06/23/2020 08:47:23
Yes indeed, that's the way to go

##### Jiajun Wang 06/23/2020 08:49:25
Another quesition: How to model the planner joint? i mean 3 DoF in plan, two slide and one rotation. is there a joint option?

##### David Mansolino [Cyberbotics] 06/23/2020 08:50:04
No, you have to add 2 slider-joints one after the other to do this.

##### Jiajun Wang 06/23/2020 08:50:42
planar joint，sorry


What is the minimum mass of a Solid allowed for simulation calculation(ODE physics)?

##### David Mansolino [Cyberbotics] 06/23/2020 08:54:19
no minimum. But you should pay attention to avoid big differences between Solid masses to avoid unstabilities

##### Jiajun Wang 06/23/2020 08:57:56
`@David Mansolino` if i model the planar joint one by one, the mass of the intermediary Solid between Joints should be massless or light enough.

##### Andrei 06/23/2020 09:11:19
how do I make solid blocks "unpassable" ?

##### David Mansolino [Cyberbotics] 06/23/2020 10:16:22
What do you mean by unpasable? You don't want your robot to be able to pass through?

##### Andrei 06/23/2020 12:29:01
exactly


right now it can't pass through boxes but can pass Solid blocks

##### David Mansolino [Cyberbotics] 06/23/2020 12:29:46
How did you build your Solid blocks?

##### Andrei 06/23/2020 12:30:18
add solid add shape box as children

##### David Mansolino [Cyberbotics] 06/23/2020 12:31:05
Ok, in that yase you should define the 'boundingObject' of the solid too, the shape is only for the visual part and not the physics

##### Andrei 06/23/2020 12:31:46
thanks

##### David Mansolino [Cyberbotics] 06/23/2020 12:31:55
You're welcome

##### Andrei 06/23/2020 12:33:18
so add again as shape  wish same geometry

##### David Mansolino [Cyberbotics] 06/23/2020 12:34:02
Yes, or directly the box, or use a USE-DEF.

I would recommend following this tutorial: [https://cyberbotics.com/doc/guide/tutorial-5-compound-solid-and-physics-attributes](https://cyberbotics.com/doc/guide/tutorial-5-compound-solid-and-physics-attributes)

##### Tosidis 06/23/2020 13:34:35
Hey, is there a way to run webots headless?

##### Olivier Michel [Cyberbotics] 06/23/2020 13:35:18
Hi, yes.


You have to run a virtual X server.


See [https://stackoverflow.com/questions/58208419/does-webots-have-headless-mode](https://stackoverflow.com/questions/58208419/does-webots-have-headless-mode)

##### Tosidis 06/23/2020 13:37:30
Hmm will check it, thanks

##### Olivier Michel [Cyberbotics] 06/23/2020 13:38:23
See also this: [https://cyberbotics.com/doc/guide/web-simulation#server-display](https://cyberbotics.com/doc/guide/web-simulation#server-display)

##### Tosidis 06/23/2020 13:39:30
will this start using the onboard VGA? or does it still require a more powerfull one?


If you have a headless system, i.e., a system without any physical monitors attached, then with the NVIDIA graphics card you could fake a monitor in the X session


What we want to achieve: Run webots on onboard vga, so the Nvidia stays empty for model training

##### Olivier Michel [Cyberbotics] 06/23/2020 13:48:00
Webots needs a connection to an X server anyhow. So you can configure it to use the onboard VGA if you need the NVIDIA card for other purposes.


But I never did that and I am not sure whether this is possible at all.

##### Tosidis 06/23/2020 13:48:48
ok, thanks, will try it soon, if we have any problems i will come back 😄

##### Kormit 06/23/2020 16:14:15
Hi, we are having problems with running a webots simulation in macOS Catalina, is webots supported on catalina?

##### chenpixx 06/24/2020 00:48:41
Robotis-op2 slow move and even sometimes freeze.  Are there an idea for its reason?  timestep or the other criteria to change. Using tensorflow for Reinforcement Learning, DQN,, there is no problem, robot is perfect. However, for exactly Keras at similar code, robotis-op2 slow move and even sometimes freeze at iterative algorithm.   Are there an idea for its reason?  Which criteria or command should I check?

##### David Mansolino [Cyberbotics] 06/24/2020 05:56:39
> Hi, we are having problems with running a webots simulation in macOS Catalina, is webots supported on catalina?

`@Kormit` Yes it is supposed to work, what is the problem you are having?


`@chenpixx`, are you using the camera? Is your controller synchronous?

##### chenpixx 06/24/2020 06:54:45
Yes, I am using camera


at the begining, it seems synchronous. later problem


approximately after 60-90 steps,

##### David Mansolino [Cyberbotics] 06/24/2020 07:09:34
Just to make sure, you are speaking about simulation or real robot?

##### chenpixx 06/24/2020 07:11:09
it is just simulation.    I am using env.step(env.timeStep)

##### David Mansolino [Cyberbotics] 06/24/2020 07:11:59
what is env ?

##### chenpixx 06/24/2020 07:12:38
self.step(self.timeStep) , infact it my op2 environment

##### David Mansolino [Cyberbotics] 06/24/2020 07:13:47
ok this should work (provided that you defined `self.timeStep`), i am sorry but this is probably related to your controller that takes time to compute

##### chenpixx 06/24/2020 07:18:04
I am call  training file outside my controller. Is it problem.  or Are there a solution about this problem?

##### David Mansolino [Cyberbotics] 06/24/2020 07:20:54
but are you waitign for to training in some way in your controller?

##### chenpixx 06/24/2020 07:21:59
I wait just one step.

##### David Mansolino [Cyberbotics] 06/24/2020 07:33:40
Ok, in that case something is probably making your controller wait, not sure what 😕

##### Kormit 06/24/2020 08:19:18
`@David Mansolino` Don't worry we managed to get it fixed, the error was due to a python installation issue.

##### Samir Hosny Mohamed 06/25/2020 23:42:34
Does the Accelerometer sensor readings include noise ?

When I try to integrate the values to get the velocity, The velocities are shifted over time.

I'm using Robot OP3 model

##### nap 06/26/2020 04:02:20
In the `nao_robocup` demo, how does one ensure the soccer ball does not roll away when the simulation is started?  I'm using `Webots R2020`.

##### David Mansolino [Cyberbotics] 06/26/2020 05:23:57
> Does the Accelerometer sensor readings include noise ?

> When I try to integrate the values to get the velocity, The velocities are shifted over time.

> I'm using Robot OP3 model

`@Samir Hosny Mohamed` yes of course, if the noise is defined in the lookup table, then it is included in the reading.

##### Olivier Michel [Cyberbotics] 06/26/2020 05:31:50
`@nap`: it shouldn't roll away, does it?

##### nap 06/26/2020 05:45:16
`@Olivier Michel` yes, it does.  What I've done is put a solid box to prevent it from running away.  That's fine for my purpose.

##### Olivier Michel [Cyberbotics] 06/26/2020 05:52:42
For me, the ball doesn't roll away in this simulation. Does it roll away for you before being kicked by a robot?

##### nap 06/26/2020 05:54:05
I moved the ball to one of the penalty spots (near the blue goal). And yes, it rolls away without any other interactions.


I need to make the Nao kneel from a standing position.  If I command it to go to the kneeling position directly, the robot tips over forward.  Is there a way of interpolating the points?

##### Olivier Michel [Cyberbotics] 06/26/2020 05:57:08
OK, that's because the ball had some initial speed when you saved your simulation. In general, it's not recommended to save a simulation after it has run (you should have received a warning for that). You should re-open the original world file, in which the ball is not initially rolling, stop the simulation, revert the world, move the ball and save the simulation. This way, the ball will not have an initial speed.


About the kneeling behavior, you should generate a trajectory for each motor that ensures that the robot is always in a stable position (the projection of the center of mass on the floor should lie in the support polygon, select a robot and from the View menu -> Optional Rendering -> Show Support Polygon).

##### nap 06/26/2020 06:01:26
I understand what you mean, but there is no speed:

     RobocupSoccerBall {

      translation -3.22 0.0479 0

  }

##### Olivier Michel [Cyberbotics] 06/26/2020 06:02:27
The speed is stored in a hidden field (you should open the world file in a text editor to see it).

##### nap 06/26/2020 06:02:48
Yes, that's where I got that stanza from.

##### Olivier Michel [Cyberbotics] 06/26/2020 06:04:25
It there any initial collision with that ball which may cause an initial motion?

##### nap 06/26/2020 06:05:24
No.  I thought it may have something to do with how the ball was contacting the ground, so I've changed the Y axis from the normal 0.5, to bring it down.  But it still does that.

##### Olivier Michel [Cyberbotics] 06/26/2020 06:07:51
Well, if I edit the original file and set the ball position to `-3.22 0.05 0`, the ball stays still when I start the simulation.


Can you do this as well?

##### nap 06/26/2020 06:11:04
Yep, it does not move.


Here is the world I'm having the problem with.  There do not appear to be any hidden velocities or inertia.
> **Attachment**: [robocup\_moderator.wbt](https://cdn.discordapp.com/attachments/565154703139405824/725956959618072637/robocup_moderator.wbt)

##### Olivier Michel [Cyberbotics] 06/26/2020 06:20:55
It's simply a collision with the feet of the robots. Moving the two robot slightly backwards fixes the problem.

##### nap 06/26/2020 06:23:44
Oh, thanks.  Ok, I can see it when I turned on Bounding Objects.  They looked far enough away.


`@Olivier Michel` :  If I make a copy of the Nao proto, can I set the motor angles in the proto so that the nao appears in my scene already in the pose I want?

##### Olivier Michel [Cyberbotics] 06/26/2020 07:24:51
Yes.

##### nap 06/26/2020 07:25:26
What parameter would I use to do this?  Say RHipPitch


This is what the proto has for RHipPitch:

                      RotationalMotor {

                        name "RHipPitch"

                        maxVelocity 6.40239

                        minPosition -1.77378

                        maxPosition 0.48398

                        maxTorque %{= (version == "3.3") and 8 or 9.8 }%

                      }


I'm going to add fields so I can set them in the UI.

##### Olivier Michel [Cyberbotics] 06/26/2020 07:29:52
I can't tell without investigating, it's pretty tricky.

##### nap 06/26/2020 07:30:45
np, I'll figure it out.

##### Stanislas Larnier 06/26/2020 07:44:42
Hello. I have a similar question than the previous one. I'm working on a simulation with a robotic arm. Is it possible to define a new arm position at the start of a simulation without touching the PROTO file and without performing an arm movement? Sincerely

##### David Mansolino [Cyberbotics] 06/26/2020 07:46:23
Hi! You mean you want to change the initial joint angles?

##### Stanislas Larnier 06/26/2020 07:48:22
`@David Mansolino` Yes.

##### David Mansolino [Cyberbotics] 06/26/2020 07:53:18
That's possible, but very tricky and unrecommended. The simplest solution is either to convert the node to base node (right click in the scene tree on the node) either to edit the PROTO to open these fields.

##### EPIC 06/26/2020 08:05:04
Hi! Is it possible to edit Def-names in run-time?

##### David Mansolino [Cyberbotics] 06/26/2020 08:06:42
Yes of course, the USE nodes will be changed accordingly too.

##### EPIC 06/26/2020 08:07:06
Also when importing a node in run-time: I want to import a robot from the console, but not inside another field. Is this possible, since the "import"-functions derive from "Field"?


What command could I use in that case, to change the Def name? 🙂

##### David Mansolino [Cyberbotics] 06/26/2020 08:08:55
Yes, you can use the `wb_supervisor_node_get_root` function that gets the root node: [https://www.cyberbotics.com/doc/reference/supervisor#wb\_supervisor\_node\_get\_root](https://www.cyberbotics.com/doc/reference/supervisor#wb_supervisor_node_get_root)


The root node is a hidden  `Group` node, you can therefore get its 'children' field.

##### EPIC 06/26/2020 08:11:22
Aaah, I thought that gave you the root of the robot.. very nice! Is there also a command like "setDef(self, string)" ?

##### David Mansolino [Cyberbotics] 06/26/2020 08:12:01
No, this is unfortunately not possible.


By the way, to get the root of the robot it is the `wb_supervisor_node_get_self` function 😉

##### EPIC 06/26/2020 08:13:51
Ok 😉 How about setting the Def-name while importing? Like in one of the examples, this function is being used: "wb\_supervisor\_field\_import\_mf\_node\_from\_string(root\_children\_field, 4, "DEF MY\_ROBOT Robot { controller \"my\_controller\" }")". 

Is there a specific robot with the name MY\_ROBOT being imported, or are they setting the name of the robot while importing?

##### David Mansolino [Cyberbotics] 06/26/2020 08:14:52
You import should work, it will create the DEF when importing

##### nap 06/26/2020 08:44:33
`@David Mansolino` :  I did what you suggested about exploding the proto into base nodes.

As such, I've been able to get the Nao into the pose I want.  But how can I put them all back so they work as a Nao again?

Never mind, dumb question.....  Just select the same Root Node.


`@David Mansolino` :  Worked really well.  Essentially wasted the last 3 hrs stuffing around.

##### nelsondmmg 06/26/2020 10:06:20
Hi, does webots have defined as expression to calculate the lateral stiffness of the tire (or the lateral force generated by the tire given the slip angle) for the different vehicles available? Thanks.

##### David Mansolino [Cyberbotics] 06/26/2020 10:17:25
This is handle by our physicy engine, everything is defined in the contact properties, it is not defined in the wheel model, but rather in the world definition: [https://www.cyberbotics.com/doc/reference/contactproperties](https://www.cyberbotics.com/doc/reference/contactproperties)

##### Robsicky 06/26/2020 11:14:38
I've exported some .vrl 3D models from blender, but when I attach them to a solids in Webots, their origin get shifted (relative to the solid frame of reference). Anyone got an idea on how to get this right? I'm not too familiar with the .vrl format.

##### David Mansolino [Cyberbotics] 06/26/2020 11:15:22
Is the origin of the model correctly set in Blender?

##### Robsicky 06/26/2020 11:16:46
Pretty sure, yes. Not too familiar with Blender either, though🙃
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/726033210294796418/unknown.png)
%end


And it's not a small offset in Webots either. Meters.

##### David Mansolino [Cyberbotics] 06/26/2020 11:17:59
Looks correct indeed. Is there some transforms once imported in Webots?

##### Robsicky 06/26/2020 11:24:32
Problem solved. Was my incompetence in Blender that caused the problem. I made the offset on my model to get it out of the "default" blender box the first time i exported to vrl.


Blender UI got a discombobulating effect. The exported model from the pic above had no offset. Thank you!

##### Lifebinder (tsampazk) 06/26/2020 12:57:59
hello! i got the following error " [javascript] Uncaught RangeError: Failed to execute 'getImageData' on 'CanvasRenderingContext2D': Out of memory at ImageData creation (timeplot\_widget.js:130)" which i guess comes from robot windows. 

The thing is that i am not using robot windows whatsoever. Any idea where it might originate? 

(I got it on ubuntu 20.04, running python controllers for the robots)


Webots seems to have somehow silently crashed, the UI is responsive but the simulation won't run after this error (which appeared in white in the console)

##### David Mansolino [Cyberbotics] 06/26/2020 13:00:26
Hi, do you have it with the samples simulations? If yes, with all of them?

##### Lifebinder (tsampazk) 06/26/2020 13:54:12
`@David Mansolino` no, it's on my own project and it popped up just once after many hours of simulated time 😕


Should i try to run a sample simulation to see if it pops up again?

##### David Mansolino [Cyberbotics] 06/26/2020 13:56:51
It would indeed help to reproduce the issue on a standard sample so that we can investigate it.

##### Lifebinder (tsampazk) 06/26/2020 14:02:21
Ok then, i'll keep you updated if it occurs again, thank you!

##### David Mansolino [Cyberbotics] 06/26/2020 14:03:08
Perfect, thank you.

##### kentevan 06/27/2020 00:20:06
Hello all, 



I am using webots 2019, and I'd like to remove the Physics SFNode within a simple solid object for a short time period and then re-enable the physics.  From the docs, I understand there should be an importSFNodeFromString function for the physics field of a Solid, however i get an attribute error when I try this.  running dir(Field-object) shows the following screenshot.  From this I conclude that there is not, in fact, the function I would like to use.  Can anyone make a comment or recommendation for me?
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/726230340812668948/unknown.png)
%end

##### Simon Steinmann [Moderator] 06/27/2020 12:27:21
What is the quickest way to get all motor and sensor nodes of a robot / world? The nature of the .proto files makes them verry slow to dig through

##### Olivier Michel [Cyberbotics] 06/27/2020 14:31:42
`@Simon Steinmann`: double-click on the robot to open the robot window where all the devices should be listed.

##### Simon Steinmann [Moderator] 06/27/2020 14:32:37
`@Olivier Michel` that only works, when the joints and motors are already initialized through the controller.


to do that, I need the names


do you have a script by any chance, that uses a supervisor node to get all devices in a world by going through the scene tree?

##### Olivier Michel [Cyberbotics] 06/27/2020 15:38:40
I don't believe the devices need to be enabled to see them in the robot window. So running the void controller should be sufficient to display device names in the robot window.

##### Simon Steinmann [Moderator] 06/27/2020 15:42:17
ohhh, starting it with a void controller is the answer 😄


thank you 🙂


is there a command to retrieve all devices via code?

##### Olivier Michel [Cyberbotics] 06/27/2020 15:46:55
No, however you can have a look at the source code of the generic html robot window to understand how a robot can automatically generate the list of its devices.

##### Simon Steinmann [Moderator] 06/27/2020 15:48:09
I might check it out when I have time. I'm working on the 3f robotiq gripper. The proto you guys have in webots, has the wrong joint limits. Do you want me to create a PR with an updated proto?

##### Olivier Michel [Cyberbotics] 06/27/2020 15:50:01
See this function: [https://cyberbotics.com/doc/reference/robot#wb\_robot\_get\_device\_by\_index](https://cyberbotics.com/doc/reference/robot#wb_robot_get_device_by_index)

##### Simon Steinmann [Moderator] 06/27/2020 15:50:35
uhh, that looks promising

##### Olivier Michel [Cyberbotics] 06/27/2020 15:50:38
Yes, that would be great.

##### Simon Steinmann [Moderator] 06/27/2020 15:51:00
alright, I'll create one, once I verified everything


`@Olivier Michel`  Woooow... I just discovered a major bug!


a motor CAN'T have a positive minPosition and a negative maxPosition


when minPosition is positive, or maxPosition is negative, getting those Values returns a 0


this is true for using the node api, as well as checking the motors in webots robot view

##### Olivier Michel [Cyberbotics] 06/27/2020 16:08:19
That's normal minPosition should be inferior to maxPosition.

##### Simon Steinmann [Moderator] 06/27/2020 16:09:00
what do you mean?


for example, this is not possible
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/726469170971017226/unknown.png)
%end


neither is this
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/726469365330870352/unknown.png)
%end

##### Olivier Michel [Cyberbotics] 06/27/2020 16:09:57
Really? It should work normally. If not, that's a bug and you should report it.

##### Simon Steinmann [Moderator] 06/27/2020 16:13:30
can you check quickly whether it is the same for you?
> **Attachment**: [ur10e\_gripper.zip](https://cdn.discordapp.com/attachments/565154703139405824/726470275675324456/ur10e_gripper.zip)


just with a void controller, moving the motors of the gripper


I'm running a nightly build from 2 moth ago or so


I think I have found the issue. I didn't dive deep into the code, but it seems to reset min and max pos, if the current value is not inbetween
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/726472798934925352/unknown.png)
%end


And I'm guessing that the default position of the parentJoint = 0. So if we dont explicitly define it, the position is 0, and minPosition / maxPosition get's reset, if above or below 0

##### Olivier Michel [Cyberbotics] 06/27/2020 16:38:01
Yes, that's it.

##### Simon Steinmann [Moderator] 06/27/2020 16:40:31
I submitted a bug report on gitlab just now


I suck at cpp, so I wont try to provide a solution, but I think it should set the position to either the min or max position (whichever is closer to 0)


The PR for the correct 3f-robotiq gripper will have to wait I guess 😄


what is the difference between DeviceTag and NodeRef? And how can I get a nodehandle from a device?

##### kentevan 06/27/2020 19:41:44
> Hello all, 

> 

> I am using webots 2019, and I'd like to remove the Physics SFNode within a simple solid object for a short time period and then re-enable the physics.  From the docs, I understand there should be an importSFNodeFromString function for the physics field of a Solid, however i get an attribute error when I try this.  running dir(Field-object) shows the following screenshot.  From this I conclude that there is not, in fact, the function I would like to use.  Can anyone make a comment or recommendation for me?

`@kentevan`

##### chenpixx 06/27/2020 22:05:32
Do webots include sponge object

##### l\_eslam\_l 06/28/2020 16:27:58
Hello all,

I'm wondering why is the color of the bounding object is different for some bodies? Generally it's white, but for some bodies I have it black and for some others it's red!

What does it mean?



%figure
![JPEG_20200628_182848.jpg](https://cdn.discordapp.com/attachments/565154703139405824/726836671080824842/JPEG_20200628_182848.jpg)
%end



%figure
![JPEG_20200628_183056.jpg](https://cdn.discordapp.com/attachments/565154703139405824/726837158249496606/JPEG_20200628_183056.jpg)
%end


Well, I think I found it!

The black-coloured boundaries appeared when I render bounding object CTRL+F2 and when I pressed them back again they were gone and turned to white

The red ones were the same shape defined more than once instead of using the USE keyword

Kindly, correct me if I'm wrong

##### David Mansolino [Cyberbotics] 06/29/2020 05:32:03
> Hello all, 

> 

> I am using webots 2019, and I'd like to remove the Physics SFNode within a simple solid object for a short time period and then re-enable the physics.  From the docs, I understand there should be an importSFNodeFromString function for the physics field of a Solid, however i get an attribute error when I try this.  running dir(Field-object) shows the following screenshot.  From this I conclude that there is not, in fact, the function I would like to use.  Can anyone make a comment or recommendation for me?

`@kentevan` this function is not available in R2019, it was added in R2020a: [https://cyberbotics.com/doc/reference/changelog-r2020#webots-r2020a](https://cyberbotics.com/doc/reference/changelog-r2020#webots-r2020a)


> Do webots include sponge object

`@chenpixx` no, but you can easily create your own.


> Well, I think I found it!

> The black-coloured boundaries appeared when I render bounding object CTRL+F2 and when I pressed them back again they were gone and turned to white

> The red ones were the same shape defined more than once instead of using the USE keyword

> Kindly, correct me if I'm wrong

`@l_eslam_l` not exactly, the red ones are the ones that are colliding another object.

##### chenpixx 06/29/2020 06:27:13
Do webots include sponge object? I think that it is simple.


Too

##### l\_eslam\_l 06/29/2020 08:41:07
`@David Mansolino`

So, does this mean it's ok for the tires to be red as they collide with the floor?

##### David Mansolino [Cyberbotics] 06/29/2020 08:41:46
yes

##### l\_eslam\_l 06/29/2020 08:42:28
Ok, thank you

##### Simon Steinmann [Moderator] 06/29/2020 11:34:36
what is the difference between DeviceTag and NodeRef? And how can I get a nodehandle from a device?

##### Stefania Pedrazzi [Cyberbotics] 06/29/2020 11:43:27
`@Simon Steinmann`:

- a NodeRef is reference to the node instance: this is used mainly by the Supervisor API to get/set fields.

- a DeviceTag is a unique number that identifies the nodes (mainly devices nodes) on the controller side and that is used by the device APIs to to call device-specific functions.

The best way to get a NodeRef is to directly use the Supervisor API (for example retrieving the node from the DEF name).


There is no direct method to get the NodeRef from a DeviceTag because they are used in different classes and for different purposes.

##### Simon Steinmann [Moderator] 06/29/2020 12:24:00
I can easily retrieve a list of all devices in a world. Would be nice to be able to get the node handles too

##### Stefania Pedrazzi [Cyberbotics] 06/29/2020 12:25:20
At the moment you can get all the NodeRef instances by looping through the robot or scene using the Supervisor API and check for the type.

##### Simon Steinmann [Moderator] 06/29/2020 12:25:36
is there an example script?

##### Stefania Pedrazzi [Cyberbotics] 06/29/2020 12:28:15
You can adapt and extend the controller from samples/devices/supervisor.wbt simulation: 

[https://www.cyberbotics.com/doc/guide/samples-devices#supervisor-wbt](https://www.cyberbotics.com/doc/guide/samples-devices#supervisor-wbt)

[https://github.com/cyberbotics/webots/blob/master/projects/samples/devices/controllers/sample\_supervisor/sample\_supervisor.c](https://github.com/cyberbotics/webots/blob/master/projects/samples/devices/controllers/sample_supervisor/sample_supervisor.c)


note that this not very efficient if you have to parse the whole scene tree

##### yash 06/29/2020 14:35:25
I’ve installed Webots in Ubuntu , but there is no folder named Webots in the home directory


So what could be the issue .?

##### David Mansolino [Cyberbotics] 06/29/2020 14:36:12
Why would it be in the home directoy?


How did you install it? with the debian package, with the snap package or with the archive?

##### yash 06/29/2020 14:36:59
With the Debian package


I want to copy the Webots\_ros file and msg and srv file inside the catkin workspace .!

But I can find the Webots folder to copy these files

##### David Mansolino [Cyberbotics] 06/29/2020 14:45:08
can you type `echo $WEBOTS_HOME` in your terminal and see if it displays the path?

##### yash 06/29/2020 14:47:52
No the path is not displayed


However I just found out the Webots folder at usr/local


That’s fine right .?

##### David Mansolino [Cyberbotics] 06/29/2020 14:51:21
Yes, this is where it is supposed to be


Just note that to use it with webots\_ros you have to define $WEBOTS\_HOME to point to this location

##### yash 06/29/2020 14:53:58
Okay ... and do I have to clone the git hub repository .?

##### David Mansolino [Cyberbotics] 06/29/2020 14:54:23
Which one? the webots or weots\_ros one?

##### yash 06/29/2020 14:54:36
The Webots

##### David Mansolino [Cyberbotics] 06/29/2020 14:56:09
no you don't need, you can use the installed one.

##### kentevan 06/29/2020 14:56:53
`@David Mansolino` Thank you for the response David.  In that case, is there an alternative approach for achieving what I'd like to do?

##### David Mansolino [Cyberbotics] 06/29/2020 15:02:42
You're welcome, the simplest solution is to update your version of Webots.

##### yash 06/29/2020 15:03:16
> no you don't need, you can use the installed one.

`@David Mansolino`  thank you !

##### kentevan 06/29/2020 15:07:16
`@David Mansolino` I can talk to my team about that, but we are working on a bit of a deadline and I anticipate that being an unpopular option.  Is there any other way?

##### David Mansolino [Cyberbotics] 06/29/2020 15:10:10
Unfortunately the SFNode manipulation was not available in R2019. A workaround could be to create a procedural PROTO with a boolean field defining if the node has physics or not: [https://www.cyberbotics.com/doc/reference/procedural-proto-nodes](https://www.cyberbotics.com/doc/reference/procedural-proto-nodes)


Here is an example doing this with a simple object:

  - [https://github.com/cyberbotics/webots/blob/master/projects/objects/garden/protos/Gnome.proto#L11](https://github.com/cyberbotics/webots/blob/master/projects/objects/garden/protos/Gnome.proto#L11)

  - [https://github.com/cyberbotics/webots/blob/master/projects/objects/garden/protos/Gnome.proto#L84-L96](https://github.com/cyberbotics/webots/blob/master/projects/objects/garden/protos/Gnome.proto#L84-L96)

##### kentevan 06/29/2020 15:11:21
ahh, so replace the node I want to manipulate with one that does not have physics, do the manipulation, then replace again with one that does have physics

##### David Mansolino [Cyberbotics] 06/29/2020 15:11:42
> ahh, so replace the node I want to manipulate with one that does not have physics, do the manipulation, then replace again with one that does have physics

`@kentevan` that's another possibility indeed.

##### kentevan 06/29/2020 15:17:26
`@David Mansolino` just to clarify for myself:  is this physics field changeable mid-simulation?  The overall goal here is to differentiate a demonstrated motion from a robot action by making the demonstrated motion separate from robot actuation.  I am running the object through a generated path by directly manipulating the translation field of the solid object, but as soon as there is a pause, the object drops as it is beholden to physics.  My understanding of the above code is that a proto object can be instantiated with one value of the physics boolean field, but this would not allow "toggling" of the physics.  Is that correct?

##### David Mansolino [Cyberbotics] 06/29/2020 15:18:50
Yes, if you create a PROTO, you can create a condition around the physics (like in the example I sent), and then change in runtime from the supervisor the field that is trigerring this condition.


(I am sorry I have to leave, but I will be here again from tomorrow morning)

##### kentevan 06/29/2020 15:29:28
No problem, thank you for the insight.  So if an object is added to the world, the physics field will be present or not depending on some condition, but there is no way to change this field once instantiated.  However subsequent objects will be affected by that condition when they are spawned

##### Stefania Pedrazzi [Cyberbotics] 06/29/2020 15:32:25
`@kentevan` not sure what you mean by subsequent objects...

if you toggle the "physics" field (from the scene tree or a supervisor controller), the object will be deleted and new object with the new physcis condition will be instantiated, so you won't practically notice the object regeneration

##### kentevan 06/29/2020 15:35:46
`@Stefania Pedrazzi` You're right I just re-read what he wrote and realized I misinterpreted it.  Too much coffee this morning, need to slow down and read things completely!  That makes sense, thank you for clarifying

##### Jatin Sharma 06/29/2020 16:00:16
Has anybody tried SITL simulation with Ardupilot? I am running the webots on windows 10 and the ardupilot is running in the Unix WSL app provided by Microsoft. Is this sort of arrangement even possible to simulate? I am getting the warning "ardupilot\_SITL\_ROVER: Could not find controller file:". I checked in the controller node that the correct controller file is selected, but i still get the error


related logs
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/727200220684747068/unknown.png)
%end

##### lojik 06/29/2020 17:22:07
Hello everyone,

I have two small questions :



1. How can I access to the controllerArgs in python, Webots 2020b Nightly Build 9/6/2020 ?



I tried like this, without success :

world = Supervisor()

    args = world.getControllerArguments()



It gives this error :

AttributeError: type object 'object' has no attribute '\_\_getattr\_\_'



2. Someone can confirm me that it is normal to not be able to change the maxTorque value of a device with getField('maxTorque').setSFFloat(param.MAX\_TORQUE) ?



Thank you


Ok, for the first point, I finally managed to take the argument with :



world.getFromDef("Robot").getField('controllerArgs').getMFString(0)

##### David Mansolino [Cyberbotics] 06/30/2020 05:01:32
`@lojik` you can access it like you would access any arguments of a python script, e.g. `sys.argv`.


That's not normal for the maxTorque, what is not working exactly?


> Has anybody tried SITL simulation with Ardupilot? I am running the webots on windows 10 and the ardupilot is running in the Unix WSL app provided by Microsoft. Is this sort of arrangement even possible to simulate? I am getting the warning "ardupilot\_SITL\_ROVER: Could not find controller file:". I checked in the controller node that the correct controller file is selected, but i still get the error

`@Jatin Sharma` is your controller compiled?

##### Akang 06/30/2020 07:06:44
my webots always not respond when make first simulation project on wizard menu

##### David Mansolino [Cyberbotics] 06/30/2020 07:08:18
Which version of Webots are you using? And n which OS?

Do you have write right where you are trying to create the new project?

If you create just a new world is it working?

##### Akang 06/30/2020 07:10:31
could my computer running webots ?
%figure
![error_graphic.png](https://cdn.discordapp.com/attachments/565154703139405824/727420791758651452/error_graphic.png)
%end


my webots is lastest version on website

##### David Mansolino [Cyberbotics] 06/30/2020 07:12:01
Most probably yes, this just means that your GPU is not very powerfull and that Webots will disable advanced rendering features to save performance.

##### Akang 06/30/2020 07:14:10
Oke, so i cant use webots on my computer, do you mean ?

##### David Mansolino [Cyberbotics] 06/30/2020 07:14:36
No that's not what I mean

##### Akang 06/30/2020 07:16:59
thank you

##### David Mansolino [Cyberbotics] 06/30/2020 07:17:05
You're welcome

##### lojik 06/30/2020 07:20:56
`@David Mansolino` Thank your for your answers and sorry, I did not think to check on python side for arguments...



For the torque, last time we discussed about some parameters that stays constant during simulation. I did not expected torques to be in these ones. Actually my controller is run by webots. But inside the controller I have a "setup" fonction to modify some world parameters. But as you suggested I should do inverse. Set in the world file then load it.

##### David Mansolino [Cyberbotics] 06/30/2020 07:36:55
You're welcome


torque should indeed not be one of these constant parameters (if it is, then it is a bug), let me check.


I checked and it seems to work, what is not working exactly?

##### lojik 06/30/2020 08:55:58
What I would like to do when loading the world is to modify some of the parameters automatically to be sure having the same parameters from one simulation to an other. So I do it like follow with some parameters :



sup.getFromDef('motor\_{}'.format(i+1)).getField('maxTorque').setSFFloat(param.MAX\_TORQUE)



%figure
![Screenshot_from_2020-06-30_10-53-08.png](https://cdn.discordapp.com/attachments/565154703139405824/727447550558470144/Screenshot_from_2020-06-30_10-53-08.png)
%end


But as shown on this plot, torques are not bounded by MAX\_TORQUE = 100

##### David Mansolino [Cyberbotics] 06/30/2020 08:58:03
Ok, how are you getting the value you plot?

##### lojik 06/30/2020 08:58:57
I get them with the getTorques Webots function.

##### David Mansolino [Cyberbotics] 06/30/2020 08:59:33
getTorqueFeedback ?

##### lojik 06/30/2020 09:00:06
Yes, sorry

##### David Mansolino [Cyberbotics] 06/30/2020 09:01:44
Ok, have you tried using `getAvailableTorque` and `getMaxTorque` just to make sure the value you set is taken into account?

##### lojik 06/30/2020 09:03:17
No, I did not check with these. I tried using setAvailableTorque with the same value as MAX\_TORQUE and it worked. So I thought that did not change the value as expected. I will try it now.


Ok, what I saw is that it change the value in Webots interface but not when I call functions like getMaxTorque. And it is not taken into account in the controller.

##### David Mansolino [Cyberbotics] 06/30/2020 09:06:49
And about  getAvailableTorque?

##### lojik 06/30/2020 09:07:42
The same results, it changes only if I set with setAvailableTorque() function

##### Akang 06/30/2020 09:08:32
my webots always stack while create directory on wizard
%figure
![stack.png](https://cdn.discordapp.com/attachments/565154703139405824/727450489771524106/stack.png)
%end

##### David Mansolino [Cyberbotics] 06/30/2020 09:08:40
Ok, so both getMaxTorque and getAvailableTorque returns the old value? Unless you explicitely set it wihth setAvailableTorque, am I correct?

##### lojik 06/30/2020 09:09:24
Yep, it is exactly what I have 👍

##### yash 06/30/2020 09:21:02
I installed Ubuntu using Debian package with APT tool 

So after installation this what the Webots icon looks like !?



%figure
![image0.jpg](https://cdn.discordapp.com/attachments/565154703139405824/727453713093886002/image0.jpg)
%end


So just wanted to make sure it’s not an issue ?

##### David Mansolino [Cyberbotics] 06/30/2020 09:35:28
> Yep, it is exactly what I have 👍

  ok in that case that looks indeeed like a bug, can you please report this here, with a very simple example simulation (world + controller) and we will fix this: [https://github.com/cyberbotics/webots/issues/new?template=bug\_report.md](https://github.com/cyberbotics/webots/issues/new?template=bug_report.md)


`@yash`, whish version of Ubuntu are you using?

##### yash 06/30/2020 09:36:31
18.04

##### lojik 06/30/2020 09:38:20
>   ok in that case that looks indeeed like a bug, can you please report this here, with a very simple example simulation (world + controller) and we will fix this: [https://github.com/cyberbotics/webots/issues/new?template=bug\_report.md](https://github.com/cyberbotics/webots/issues/new?template=bug_report.md)

`@David Mansolino` Ok I note that and I will take time to do it next week. Unfortunately I have to finish my master thesis this Friday and cannot give you my files as they are.

##### David Mansolino [Cyberbotics] 06/30/2020 09:38:52
No problem, next week is fine too, thank you.


> 18.04

`@yash` in that case that seems indeed like a bug, can you please report this here: [https://github.com/cyberbotics/webots/issues/new?template=bug\_report.md](https://github.com/cyberbotics/webots/issues/new?template=bug_report.md)

##### yash 06/30/2020 09:41:00
Sure will do it ... but will it be a problem if I use it now .?

##### David Mansolino [Cyberbotics] 06/30/2020 09:41:53
No, don't worry, this shouldn't prevent you at all from using Webots.

##### yash 06/30/2020 09:42:13
Okay thanks 👍

##### David Mansolino [Cyberbotics] 06/30/2020 09:42:44
May I ask you also to try with a beta version of R2020b available here: [https://github.com/cyberbotics/webots/releases](https://github.com/cyberbotics/webots/releases)

I think this problem is already fixed in our development environment.

##### yash 06/30/2020 09:43:13
Okay , will try it 👍

##### David Mansolino [Cyberbotics] 06/30/2020 09:43:19
thank you

##### Jatin Sharma 06/30/2020 09:47:51
> `@Jatin Sharma` is your controller compiled?

`@David Mansolino` Hi yes, i tried running in Ubuntu it worked well. Seems like the webots running on windows is not able to communicate with the simulation environment running in the Ubuntu WSL. Thanks for your support.

##### David Mansolino [Cyberbotics] 06/30/2020 09:49:01
That's indeed possible, I never tried using WSL. You may use extern controller to workaround this issue, this way you can start yourself the controller instead of letting Webots doing it for you: [https://cyberbotics.com/doc/guide/running-extern-robot-controllers](https://cyberbotics.com/doc/guide/running-extern-robot-controllers)

##### Robsicky 06/30/2020 12:02:24
Hi. Quick question. I'm using "importMFNode( )" to import a solid as child of another solid. Is there a method to get the ID for this new import? Or maybe better, set the ID when importing?

##### Olivier Michel [Cyberbotics] 06/30/2020 12:04:17
You cannot set the ID when importing, Webots will do it automatically.


I am not sure what do you mean by ID? WbNodeRef?


If so, you can retrieve it from `getMFNode()` after the import.

##### Robsicky 06/30/2020 12:05:43
Unique identifier?


To use as arg in getFromID( ) later


Is this the same as WbNodeRef?

##### Olivier Michel [Cyberbotics] 06/30/2020 12:15:24
I see, then you should call `parentNode.getMFNode().getId()` to get the ID.

##### Stanislas Larnier 06/30/2020 12:55:35
Hi. Do you know some example in Webots of a robotic arm with a vacuum gripper (suction cup)? It is the last missing part of my simulation. It could make me win some time. Thank in advance.

##### David Mansolino [Cyberbotics] 06/30/2020 12:58:53
Hi, I know one but unfortunately can't share it as this one is condifential, but the idea is quite simple, you can use 2 connector devices, one at the end of the arm (in the vacuum gripper) and the other on the object to grasp.

##### Robsicky 06/30/2020 13:17:10
I'm having some trouble setting the geometry size of a shape within a solid. My attempt is:

```
box_child = box.getField("children")
box_shape = box_child.getMFNode(0)
shape_geometry = box_shape.getMFNode(0)
geometry_field = shape_geometry.getField("size")
```



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/727513489408524348/unknown.png)
%end


Goal is to set the "size" field, but don


... but don't know how to reach it*


Also, please ignore my terrible (temporary) variable names 🙃

##### Olivier Michel [Cyberbotics] 06/30/2020 13:22:57
You can't get the box geometry this way. You should retrieve from the geometry field.


```python
shape_geometry = box_shape.getField('geometry').getSFNode()
```

##### Robsicky 06/30/2020 13:29:30
Thanks a lot! This gives me "geometry" node? And from there I can get "size" field, and set/get vector?

##### Olivier Michel [Cyberbotics] 06/30/2020 13:33:20
Yes.


As a hint, you can check the return value of these getter functions and if you get `None`, that means it failed to retrieve the requested node or field. In your first example, `shape_geometry` was probably set to `None`.

##### Robsicky 06/30/2020 13:36:38
Perfect. It works🥳  Thank you very much!

## July

##### Soft\_illusion 07/01/2020 01:36:30
Any suggestions on how to dynamically change proto in the Webots simulators? While it is running.

##### David Mansolino [Cyberbotics] 07/01/2020 05:25:58
What do you mean by change PROTO? You want to chang the some internal fields/nodes of the PROTO from the Supervisor?

##### Bharath Kumar 07/01/2020 09:49:31
Hi, This is Bharath. I frequently get an issue while working with Webots. I can't modify the parameters in the scene try at times. Now after two restarts of the Webots application, I can modify the parameters. I has been happening a few times now. Why am I getting this issue?

##### David Mansolino [Cyberbotics] 07/01/2020 09:52:56
Which parameters are you tryign to change? And how?

What do you mean by you can't, is Webots crashing?

##### aalmanso 07/01/2020 10:06:28
Hi, I made an experiment using e-puck. Every regular time the robot place in a random position and rotation inside arena. By using supervisor function I doing that, but the problem is sometimes the robot rolls and turns( like a ball) and not stable at arena in correct way. Please any suggestions to disable this feature inside webots?

##### David Mansolino [Cyberbotics] 07/01/2020 10:11:36
Make sure that:


- The robot is not colliding with an object or the floor when you move it from the supervisor.

  - Once you have moved it, reset the physics of the robot from the supervisor too.

##### Robsicky 07/01/2020 10:49:24
Hi. Trying to "build" PROTOs. When inserting into world, I'm not allowed to translate from the "graphical frame" of the PROTO. I can rotate. Does anyone know what might be causing this?

##### David Mansolino [Cyberbotics] 07/01/2020 10:51:05
`@Robsicky` do you PROTO have a `translation` and a `rotation` fields ?

##### w3. eydi 07/01/2020 10:52:58
For the quadruped spot, I need parameters to be able to apply the trajectory I have specified with inverse kinematics. How can I find? Or Are there any created equations? I could not find it in documentation.
%figure
![IMG_20200701_134833.jpg](https://cdn.discordapp.com/attachments/565154703139405824/727839159049388132/IMG_20200701_134833.jpg)
%end

##### Robsicky 07/01/2020 10:54:34
Yes. And I can translate via the translation field of the Proto. Just not "graphically".

##### David Mansolino [Cyberbotics] 07/01/2020 10:56:26
> Yes. And I can translate via the translation field of the Proto. Just not "graphically".

`@Robsicky` Are they connected in the PROTO using `IS` statement or generated (using lua for example)?

##### Robsicky 07/01/2020 10:57:13
I was using "IS".

##### David Mansolino [Cyberbotics] 07/01/2020 10:57:27
> For the quadruped spot, I need parameters to be able to apply the trajectory I have specified with inverse kinematics. How can I find? Or Are there any created equations? I could not find it in documentation.

`@w3. eydi` you should be able to find them in the documentation of the real spot robot. Or you can convert the robot to base node to extract them from the model (right click on the spot node => 'Convert to Base Node(s)').

##### Robsicky 07/01/2020 11:00:42
I was setting translations and rotations using lua for "child frames". The graphical frame is the one linked to the translation and rotation field? What happens if several children "inherit" translation via "IS"?

##### Olivier Michel [Cyberbotics] 07/01/2020 11:01:34
That would likely make strange results...


Normally, you should IS connect only the main translation and rotation for a PROTO.

##### Robsicky 07/01/2020 11:02:50
Ah, makes sense. Can always set translation/rotation etc to be the same as the field using lua, I guess?


The graphical translation of my PROTO disappears when i do

```
%{trans = fields.translation.value}%
```

##### Stefania Pedrazzi [Cyberbotics] 07/01/2020 11:28:42
yes, this is correct. Graphical handles are not displayed if the translation/rotation fields are not open PROTO fields, or if they are template/lua fields.

The best practice if you are using the translation and rotation fields for inner child nodes is to rename them (for example using "childTranslation").

##### Robsicky 07/01/2020 11:34:01
Not sure if I understand your last sentence. I want to keep the graphical handle, but also want to use its values for inner child.

##### Stefania Pedrazzi [Cyberbotics] 07/01/2020 11:35:30
the best practice would be to use other fields with other names for the inner child. Otherwise the graphical handle for the top PROTO node won't be visible

##### Robsicky 07/01/2020 11:38:37
Is it possible to make these fields equal to the trans/rot fields?

##### Stefania Pedrazzi [Cyberbotics] 07/01/2020 11:43:49
Yes, but if you use them in template/lua statement, then you won't have the graphical handles visible in the 3D scene


The only option is to use the IS statement instead of the template/lua statement. But also in this case, the graphical handles will only be displayed if the field is also IS connected to the base node translation field


I know that this could not be very clear, but to get the graphical translation/rotation handle in the 3D view for a PROTO node these three conditions has to be fullfilled:

1. "translation"/"rotation" words should not be used in template/lua statements

2. The `translation`/`rotation` field of the PROTO base node should be IS connected with an open PROTO field


3. The `translation`/`rotation` field of the PROTO base node should not be set using a lua statement

##### Robsicky 07/01/2020 11:52:38
I understand. I think I got an idea on how to "solve" my PROTO now. Thanks!

##### l\_eslam\_l 07/01/2020 20:48:46
Hello,

I'm trying to run ROS with Webots

But I'm not sure whether webots\_ros is working or not

When I try robot\_information\_parser, what should the output be? I get nothing in the terminal nor in webots console

Also pioneer3at example, the robot doesn't move


I don't know what I'm missing

##### Simon Steinmann [Moderator] 07/01/2020 22:15:04
Do you want to implement ROS yourself?


then I suggest running your ROS code externally, and using the < extern> controller inside webots

##### l\_eslam\_l 07/01/2020 22:29:58
Thank you for your response.

But the documentation says that unless we want to create our own controller, we should use the standard "ros" controller, it's an interface between webots and the ROS network.

But the given examples seemingly don't work!


It only works when I run roscore and the node of the robot I want separately then starting webots and open the .wbt file of the same robot

##### Simon Steinmann [Moderator] 07/01/2020 22:50:04
Running ROS inside of webots has some peculiarities. For example, the code is only running, if you have the step(timestep) function inside of your main loop


you can run your ROS code in an external Terminal / IDE. much simpler


[https://www.cyberbotics.com/doc/guide/installation-procedure#extern-controllers](https://www.cyberbotics.com/doc/guide/installation-procedure#extern-controllers)


might need to read the extern-controllers part

##### l\_eslam\_l 07/01/2020 23:40:46
Thanks a lot, I will read it

##### David Mansolino [Cyberbotics] 07/02/2020 04:51:02
HI `@l_eslam_l`, did you use the launch file provided with webots\_ros?

[http://wiki.ros.org/webots\_ros/Tutorials/Sample%20Simulations](http://wiki.ros.org/webots_ros/Tutorials/Sample%20Simulations)

##### elkelkmuh 07/02/2020 06:26:58
Hi,

I reviewed fsr on demo nano application in webots.Nano is 5.4kg.But in webots demo program, it varies between 6kg to 10 kg. 

[nao\_demo]    left       right

[nao\_demo] +--------+ +--------+

[nao\_demo] |0.0  25.0| |25.0  0.0|  front

[nao\_demo] |        | |        |

[nao\_demo] |0.0  25.0| |25.0  0.0|  back

[nao\_demo] +--------+ +--------+

[nao\_demo] total: 100 Newtons, 10.1937 kilograms

##### David Mansolino [Cyberbotics] 07/02/2020 06:34:37
What do you mean by nano ??

##### Olivier Michel [Cyberbotics] 07/02/2020 06:37:24
I checked the `nao_demo.wbt` simulation and the total mass of the robot is 5.3 kg and the mass measured by the foot sensors is 6.1 kg which makes an error of 0.8 kg that can be explained by the dynamics model.


When the robot walks, the measurements oscillate between 5 and 8 kg, which seems fair.


You will probably get similar results with the real robot.


(depending on the calibration)

##### l\_eslam\_l 07/02/2020 08:36:36
`@David Mansolino`

Yeah, I tried all of them,  non of them are working

The only way it works when I run the world and the ROS nodes separately 

Actually I did have this problem a while ago, but I changed my laptop so I'm doing it all over again but the same problem appeared


Where should the installation directory of webots be on linux?

Mine is in /usr/local/webots

##### David Mansolino [Cyberbotics] 07/02/2020 08:41:03
Which version of ROS are you using?

##### l\_eslam\_l 07/02/2020 08:41:13
Melodic

##### David Mansolino [Cyberbotics] 07/02/2020 08:41:27
It all depends on how you installed Webots. but /usr/local/webots with the debian package is correct


have you defined 'WEBOTS\_HOME' before starting the launch file?

##### l\_eslam\_l 07/02/2020 08:42:20
Yeah I did, export WEBOTS\_HOME=/usr/local/ webots/


In .bashrc file

##### David Mansolino [Cyberbotics] 07/02/2020 08:50:16
Ok, in that case that's probabyl a bug, but I am sorry I don't have the time to look at it right now, can you please open an issue here so that we can fix it soon: [https://github.com/cyberbotics/webots\_ros/issues/new](https://github.com/cyberbotics/webots_ros/issues/new)

Thank you.

##### l\_eslam\_l 07/02/2020 08:56:09
Ok, I will.

Thank you.

##### David Mansolino [Cyberbotics] 07/02/2020 08:56:31
You're welcome

##### chenpixx 07/02/2020 22:40:53
I use self.importMFNode(self,2,'Glass.wbo')  to add Glass node after the second reset in supervisor file. However it shows  self.importMFNode(self,2,'Glass.wbo');     

TypeError: 'str' object is not callable


Glass.wbo is in supersior folder.


What can I add it.

##### David Mansolino [Cyberbotics] 07/03/2020 05:34:36
Hi `@chenpixx`, you should not include the self in the argument:

```Python
self.importMFNode(2,'Glass.wbo')
```

##### Luiz Felipe 07/03/2020 07:00:53
`@David Mansolino` I am still getting the /usr/local/bin/webots line 86 (core dumped error).


We tried to do some tests in which we relocate 2 robots to the same position of the environment, and we experience the turn off problem.


But we still don't know if the collisions that can end up in this situation is the responsible for this problem.


Is there a more effective way to debug this problem?

##### David Mansolino [Cyberbotics] 07/03/2020 07:02:52
I am sorry, but can please refresh my memory by summarizing the initial problem (I am sorry, but I had probably more than 100 other questions since last time we spoke 😅 )

##### Luiz Felipe 07/03/2020 07:04:49
hehehe ok. Actually I think last time I also explained about another problem.


While running my environment I sometimes experiences webots turning off. With the following kind of message:



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/728506699656200242/unknown.png)
%end


I have the intuition that this can be related to collisions, or other situation that the physics cannot handle.


We tried to do some tests in which we relocate 2 robots to the same position on the environment, and we experienced webots turning off like this also.


But we don't know how to solve that, which part of the environment to simplify to solve that...


Is there a way to exactly know where the problem is happening?

##### David Mansolino [Cyberbotics] 07/03/2020 07:09:27
This is indeed a crash. The simplest solution to find where it comes from is to try to reproduce the crash in a very simple example.

Alternatively, if you know how GDB works I can provide you a debug version of Webots so that you can try generating a stack.

##### Olivier Michel [Cyberbotics] 07/03/2020 07:17:05
`@Luiz Felipe`: which version of Webots are you using?

##### Luiz Felipe 07/03/2020 07:17:08
Yes. The way we tried to reproduce was relocating two robots to the same position. But we don't if that is what actually happen in our environment right before the crash.


R2020a revision 1

##### David Mansolino [Cyberbotics] 07/03/2020 07:18:00
In that case you might use the contrary, make sure you never relocate two robots to the same position and check if it still crashes.

##### Olivier Michel [Cyberbotics] 07/03/2020 07:19:40
It also may be worth trying with a recent nightly build of Webots R2020a revision 2 or R2020b as we fixed several crashes since the release of R2020a revision 1.

##### Luiz Felipe 07/03/2020 07:20:57
oh... ok. I will see if it is possible to port directly to R2020b and test again.


I will try to realize if it is really related to collisions. If it is, I think i will need to use the debug version with GDB `@David Mansolino` , even I am not very familiar with that.

##### David Mansolino [Cyberbotics] 07/03/2020 07:24:15
ok perfect, let us know.

##### Luiz Felipe 07/03/2020 07:26:17
The R2020b is here `@Olivier Michel` [https://github.com/cyberbotics/webots/releases](https://github.com/cyberbotics/webots/releases) ?


ah, is still in the nightly build



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/728516639024480256/unknown.png)
%end


where can i check the changes in this build?

##### Olivier Michel [Cyberbotics] 07/03/2020 07:45:57
Yes, the controllerArg field has changed from SFString to MFString. You should update your Referee.proto according to this.

##### David Mansolino [Cyberbotics] 07/03/2020 07:46:10
In case you need, the complete list of changes is available here: [https://cyberbotics.com/doc/reference/changelog-r2020?version=develop#webots-r2020b](https://cyberbotics.com/doc/reference/changelog-r2020?version=develop#webots-r2020b)

##### Luiz Felipe 07/03/2020 07:46:20
okz!


did something changed in the WEBOTS\_HOME? It seems i have an extra space using the makefile



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/728519439687090176/unknown.png)
%end

##### chenpixx 07/03/2020 07:56:16
Thanks. but it is same error:  self.importMFNode(3,'Glass.wbo');

 TypeError: 'str' object is not callable

##### David Mansolino [Cyberbotics] 07/03/2020 07:57:02
That strange, can you share a bit more of your code (as this part looks correct, maybe the problem is somewhere else) as well as the complete error?

##### Olivier Michel [Cyberbotics] 07/03/2020 07:58:00
`@Luiz Felipe`: they were some little changes, but it should be working. Can you try to replace your Makefile with one coming with the version of Webots you installed?


See for example: [https://github.com/cyberbotics/webots/blob/master/projects/robots/clearpath/moose/controllers/moose\_path\_following/Makefile](https://github.com/cyberbotics/webots/blob/master/projects/robots/clearpath/moose/controllers/moose_path_following/Makefile)

##### chenpixx 07/03/2020 08:00:27
> That strange, can you share a bit more of your code (as this part looks correct, maybe the problem is somewhere else) as well as the complete error?

`@David Mansolino` controller = Driver()

controller.initialization()

controller.objectcall()

controller.run()


def objectcall(self):

        self.importMFNode(3,'Glass.wbo');

##### Luiz Felipe 07/03/2020 08:03:06
`@Olivier Michel`  With the new Makefile it works. 🙂

##### chenpixx 07/03/2020 08:07:54
> `@David Mansolino` controller = Driver()

> controller.initialization()

> controller.objectcall()

> controller.run()

`@chenpixx` I delete controller.objectcall(). I moved     self.importMFNode(3,'Glass.wbo') into controller.run. -----            if message == 'reset':

                self.resetworld()

                self.importMFNode(3,'Glass.wbo');----         new error :

 return \_swig\_getattr\_nondynamic(self, class\_type, name, 0)



 return object.\_\_getattr\_\_(self, name)

 AttributeError: type object 'object' has no attribute '\_\_getattr\_\_'

##### David Mansolino [Cyberbotics] 07/03/2020 08:10:27
ok, thank you, I will try


I am sorry, but i just checked and it worked perfectly for me.

Here is the complete instruction I used, maybe you should try if this one works fine for you too:

```Python
self.getRoot().getField('children').importMFNode(3,'Glass.wbo')
```


It is worth testign with the beta of R2020b ([https://github.com/cyberbotics/webots/releases](https://github.com/cyberbotics/webots/releases)) too.

##### chenpixx 07/03/2020 08:52:51
Thanks, now there is no error but I see the glass  after the first reset  and the other resets later it vanish. I wait to see it during one/more  episode. If I use      while not self.step(self.timeStep) == -1:

         self.getRoot().getField('children').importMFNode(3,'Glass.wbo'), figure is below as:



%figure
![image0.jpg](https://cdn.discordapp.com/attachments/565154703139405824/728536531370901534/image0.jpg)
%end

##### David Mansolino [Cyberbotics] 07/03/2020 09:06:03
As documented (see 'Reset Simulation': [https://www.cyberbotics.com/doc/guide/the-user-interface#file-menu](https://www.cyberbotics.com/doc/guide/the-user-interface#file-menu)) the reset will remove all the nodes inserted.

##### chenpixx 07/03/2020 09:10:43
Do you mean that I would not see the glass during one episode.

##### David Mansolino [Cyberbotics] 07/03/2020 09:11:04
You should see at as long as you don't reset the simulation

##### chenpixx 07/03/2020 09:11:48
Thank I will work it.

##### David Mansolino [Cyberbotics] 07/03/2020 09:12:00
You're welcome

##### chenpixx 07/03/2020 09:40:33
> You're welcome

`@David Mansolino` I did it. It works. thanks

##### David Mansolino [Cyberbotics] 07/03/2020 09:42:04
Perfect, thank you for the feedback!

##### Robsicky 07/03/2020 11:49:16
Hi. When I use 

`getImageArray()` 

on my camera, it mostly returns None. Does anyone know the reason for this? My camera is enabled.

##### David Mansolino [Cyberbotics] 07/03/2020 11:51:13
Hi,

Which language are you using?

Are you doing at least one step between the enable and the getImageArray?

##### Robsicky 07/03/2020 11:55:19
I'm using python. And yes, I enable several steps before getImageArray

##### David Mansolino [Cyberbotics] 07/03/2020 11:57:19
Ok, in that case it should ineed not return nay None value. the fucntion is returning directly None, or the array is filled with None value?

##### Robsicky 07/03/2020 11:58:10
None directly

##### David Mansolino [Cyberbotics] 07/03/2020 11:59:06
Ok, can you create a minimal example world + controller reproducing the problem so that we can investigate?

##### Robsicky 07/03/2020 12:01:34
I'll try. Will get back to you 👍

##### David Mansolino [Cyberbotics] 07/03/2020 12:01:43
Perfect, thank you

##### tangdan 07/03/2020 13:03:08
how can i move the model that in webots to QT？thanks!

##### David Mansolino [Cyberbotics] 07/03/2020 13:03:42
I am sorry, but I don't understand your question.

##### tangdan 07/03/2020 13:07:46
just move the  code or related files of a world in webots to another platform like QT ,and simulate it.

##### Simon Steinmann [Moderator] 07/03/2020 13:14:25
Do you have .protos of kinova arms?

##### David Mansolino [Cyberbotics] 07/03/2020 13:15:04
> just move the  code or related files of a world in webots to another platform like QT ,and simulate it.

`@tangdan` Webots model and worlds can be used by Webots only.


> Do you have .protos of kinova arms?

`@Simon Steinmann` no, but it should be quite simple to convert one from URDF as we have already tested our URDF converter with some kinova model and it was working quite well: [https://github.com/cyberbotics/urdf2webots#notes](https://github.com/cyberbotics/urdf2webots#notes)

##### Simon Steinmann [Moderator] 07/03/2020 13:18:01
It would be nice to have a "alpha" version of more robots. Say I make a proto for a kinova arm, it would be nice if other people can get it too. And vice versa ofc


I know that optimizing a model is more work, but having some working sample easily accessible would be nice


would make webots more attractive as well, if people can simply load their stuff

##### David Mansolino [Cyberbotics] 07/03/2020 13:19:47
Yes sure, but if you create a model, do not hesitate to create a pull request to include it in Webots: [https://github.com/cyberbotics/webots](https://github.com/cyberbotics/webots)

I know that we are a bit picky with the model quality for integrating them, but it is on our roadmap to create a system allowing users to upload model in beta quality.


Worse case feel free to create a github repository with your model and we can then host it under the 'cyberbotics' Github organization.

##### Simon Steinmann [Moderator] 07/03/2020 13:20:49
Perhaps we can create something temporary, where people can easily upload

##### David Mansolino [Cyberbotics] 07/03/2020 13:21:35
That's a good idea, can you please open an issue here and we will talk internally about a temporary solution: [https://github.com/cyberbotics/webots/issues/new?template=feature\_request.md](https://github.com/cyberbotics/webots/issues/new?template=feature_request.md)

##### Simon Steinmann [Moderator] 07/03/2020 13:22:33
perhaps you can make a new repository with 'community-beta-models' or 'unofficial models'

##### David Mansolino [Cyberbotics] 07/03/2020 13:22:47
Yes that looks like a good idea!

##### Simon Steinmann [Moderator] 07/03/2020 13:23:00
cool, let me know once it's up and I'll upload my things


almost a year ago I looked at webots, but didnt end up using it, because implementing the kinova arm was too difficult for me at the time 😅

##### David Mansolino [Cyberbotics] 07/03/2020 13:27:29
I agree it is not so easy for a  beginner to create complex model.

##### Simon Steinmann [Moderator] 07/03/2020 13:27:54
do you want me to still write the feature request?

##### David Mansolino [Cyberbotics] 07/03/2020 13:28:03
I jsut created an issue to record what we talk about and will try to handle this next week: [https://github.com/cyberbotics/webots/issues/1874](https://github.com/cyberbotics/webots/issues/1874) (we can subscribe to the issue to get updates)


> do you want me to still write the feature request?

`@Simon Steinmann` just did it 😉

##### tangdan 07/03/2020 13:28:45
Even if I move the source code of Webots models  to another platform, can't I run the Webots models  on other platforms?

##### Simon Steinmann [Moderator] 07/03/2020 13:28:50
thx, I'll comment on it

##### David Mansolino [Cyberbotics] 07/03/2020 13:29:05
> thx, I'll comment on it

`@Simon Steinmann` perfect


> Even if I move the source code of Webots models  to another platform, can't I run the Webots models  on other platforms?

`@tangdan` that should be feasible, but not so easy

##### tangdan 07/03/2020 13:35:19
is there anyone who has done successfully like that? my teacher want me to realise that, so i feel  a little bit stressed.


`@David Mansolino` do you have any suggestions about that?thanks

##### EPIC 07/03/2020 13:39:17
`@tangdan` What do you mean by moving the source code to another platform?

##### tangdan 07/03/2020 13:40:09
`@EPIC`i want to  move the  code or related files of a world in webots to another platform like QT ,and simulate it by another paltform.


the aim is to run the webots model by other platform

##### Simon Steinmann [Moderator] 07/03/2020 13:42:38
your own model or an already provided robot or model? If it is the latter, it might be easier to use different sources

##### EPIC 07/03/2020 13:43:28
Like sending the code/world made on your Windows computer, to a computer who runs Linux?

##### tangdan 07/03/2020 13:45:43
the model is made of  robotA's arm and robotB's body, robotA and robotB are already provided robot


`@EPIC` nonono, just another client


Like sending the code/world made on Webots, to QT. you can google to understand what QT is

##### EPIC 07/03/2020 13:49:54
I'm working on a robot atm, built from scratch/own models together with two others. As long as they have access to the same files as I do, there is no problem 🙂

##### David Mansolino [Cyberbotics] 07/03/2020 14:01:39
> Like sending the code/world made on Webots, to QT. you can google to understand what QT is

`@tangdan` maybe you can use the X3D exportation feature of Webots to then import the resulting X3D file in the platform you want (X3D is a quite standard format): [https://cyberbotics.com/doc/guide/web-scene#how-to-export-a-web-scene](https://cyberbotics.com/doc/guide/web-scene#how-to-export-a-web-scene)

##### tangdan 07/03/2020 14:05:22
`@David Mansolino` thank you very much,I'll try it

##### David Mansolino [Cyberbotics] 07/03/2020 14:07:08
Your'e welcome

##### Robsicky 07/03/2020 14:09:43
Hi again. Another question about cameras/getImageArray().

I'm trying to extract an image  in 1080p, but my simulation halts for 2-4 seconds when doing "getImageArray()". Is there anything I can do about this?

##### David Mansolino [Cyberbotics] 07/03/2020 14:19:17
The `getImageArray` implies a conversion to create the array pixel by pixel which is costly, you might use `getImage` instead for better performances.


Here is an example: [https://github.com/cyberbotics/webots/blob/master/projects/samples/robotbenchmark/visual\_tracking/controllers/visual\_tracking/visual\_tracking.py#L114-L133](https://github.com/cyberbotics/webots/blob/master/projects/samples/robotbenchmark/visual_tracking/controllers/visual_tracking/visual_tracking.py#L114-L133)

##### Simon Steinmann [Moderator] 07/03/2020 15:00:52
Getting this error message for all joints for my urdf generated proto:

HingeJoint > Solid: Undefined inertia matrix: using the identity matrix. Please specify 'boundingObject' or 'inertiaMatrix' values.

##### David Mansolino [Cyberbotics] 07/03/2020 15:01:35
the boundign object where not generated?

##### Simon Steinmann [Moderator] 07/03/2020 15:01:37
links in the urdf have the inertial definitions:



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/728626517252505671/unknown.png)
%end

##### David Mansolino [Cyberbotics] 07/03/2020 15:02:03
Have you tried with the `--box-collision` argument?

##### Simon Steinmann [Moderator] 07/03/2020 15:02:05
yeah, looks like they were not generated


let me check


python demo.py --input=Kinova\_Gen3\_6DOF.urdf [--output=outputFile] [--box-collision] [--normal]


exact command I used

##### David Mansolino [Cyberbotics] 07/03/2020 15:03:37
argument in bracket are just to mention that they are optionnal, if you want to use them remove the brackets, if you don't want to use them remove both brackets and argument

##### Simon Steinmann [Moderator] 07/03/2020 15:03:38
oh wait, during generation, this came up:


Parsing Mesh: /home/simon/Documents/gitlab/sim2real\_baselines\_webots/simulations/ros\_workspace/src/ros\_kortex/kortex\_description/arms/gen3/6dof/meshes/base\_link.STL

Unsupported mesh format for collision: ".STL"

Parsing Mesh: /home/simon/Documents/gitlab/sim2real\_baselines\_webots/simulations/ros\_workspace/src/ros\_kortex/kortex\_description/arms/gen3/6dof/meshes/shoulder\_link.STL

##### David Mansolino [Cyberbotics] 07/03/2020 15:04:25
Make sense then that your bounding object are not set

##### Simon Steinmann [Moderator] 07/03/2020 15:04:48
what command should I use?


python demo.py --input=Kinova\_Gen3\_6DOF.urdf  --box-collision


or shoulud I add args


and why can't .stl be used for colllision?


does it matter, or simply use the visual mesh instead, if collision is not set?

##### David Mansolino [Cyberbotics] 07/03/2020 15:07:19
that looks strange, are you using an up to date version of the impoter?

##### Simon Steinmann [Moderator] 07/03/2020 15:07:58
fairly recent, like a month old or so

##### David Mansolino [Cyberbotics] 07/03/2020 15:08:21
I am sorry but I have to leave, can you please report this here (includeing the urdf): [https://github.com/cyberbotics/urdf2webots/issues/new](https://github.com/cyberbotics/urdf2webots/issues/new)

Or come back here on Monday.

##### Simon Steinmann [Moderator] 07/03/2020 15:08:32
will do

##### David Mansolino [Cyberbotics] 07/03/2020 15:08:37
> fairly recent, like a month old or so

`@Simon Steinmann` maybe you should try with a more recent one.

##### Simon Steinmann [Moderator] 07/03/2020 15:08:38
have a good weekend 🙂

##### David Mansolino [Cyberbotics] 07/03/2020 15:09:29
Thank you, you too

##### Doc 07/04/2020 08:36:14
Getting some weird shadow behaviour which you might be able to help with?

Shadows on the floor pane look fine for one PNG then disappear for another. The only thing that's changed between the two is the image texture path. Any idea what could cause this please?
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/728891916053119017/unknown.png)
%end



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/728891993043894342/unknown.png)
%end

##### Sanket Khadse 07/05/2020 10:05:36
*Note: The playback option may not work correctly depending on your default Web browser.*

These are the lines from X3D and Web Scene documentation. I have tried using a web scene many times, but cant figure out how to play the simulation? 

Any idea how should I play the simulation in the webpage?

##### ThomasH 07/05/2020 12:00:18
Hi all, I created a factory scene and the Physics simulation complains that its too big: "WARNING: The current physics step could not be computed correctly. Your world may be too complex. If this problem persists, try simplifying your bounding object(s), reducing the number of joints, or reducing WorldInfo.basicTimeStep." I tried changing the basicTimeStep option but my robot still jumps around in the scene like crazy. Are there some more tricks to get such scene working in Webots? thanks



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/729305696109330432/unknown.png)
%end

##### Simon Steinmann [Moderator] 07/05/2020 12:01:34
What timeStep are you using?

##### ThomasH 07/05/2020 12:01:53
I tried using 32, 50 and 4

##### Simon Steinmann [Moderator] 07/05/2020 12:02:02
32 and 50 are HUGE


4-8 is much more reasonable


you still have the issues with 4?

##### ThomasH 07/05/2020 12:02:30
ok thanks, I already tried 4 and still had issues, but I will try again

##### Simon Steinmann [Moderator] 07/05/2020 12:02:45
and the biggest difference you can make, is to simplify geometries


instead of a triangle/point mesh, defining things as base geometries like spheres, cylinders and boxes, immensely increases accuracy and performance


The bounding objects that is


what robot are you usingß

##### ThomasH 07/05/2020 12:05:59
I am using the iRobot create


I just run the simulation with time step 4 and did not see the robot "explode" so far


though the warning still pops up every second


A very low basicTimeStep=2 seems to work fine (though the simulation speed is very slow). thanks for your help

##### Luiz Felipe 07/06/2020 02:06:27
`@David Mansolino`, I think i will need the debug version to find what is responsible for the webots crash in my environment. In the 2020b the error still happens.

##### mint 07/06/2020 05:08:04
Hello, my Webots R2020a displays ModuleNotFoundError when importing numpy in python supervisor. python 2, python 3 and numpy are all correctly installed on the local PC, and numpy is imported with no error when python is run on the terminal. Could you help with this  issue?

##### Luiz Felipe 07/06/2020 05:09:00
The python command in Webots -> Tools -> Preferences is pointing to the right command of your python environment?

##### mint 07/06/2020 05:12:25
it just says "built-in python (snap)"


my other PC's webot has a text box with "python3" written in it. but the one is the issue has no text box


*the one with the issue

##### David Mansolino [Cyberbotics] 07/06/2020 05:33:17
> Getting some weird shadow behaviour which you might be able to help with?

> Shadows on the floor pane look fine for one PNG then disappear for another. The only thing that's changed between the two is the image texture path. Any idea what could cause this please?

`@Doc` probably that the one not receiving shadows has an alpha channel, if a textures has an alpha channel then the object is considered as partially transparent and therefore doesn't receive or cast shadows


> *Note: The playback option may not work correctly depending on your default Web browser.*

> These are the lines from X3D and Web Scene documentation. I have tried using a web scene many times, but cant figure out how to play the simulation? 

> Any idea how should I play the simulation in the webpage?

`@Sanket Khadse` did you checked this page?

[https://www.cyberbotics.com/doc/guide/web-animation](https://www.cyberbotics.com/doc/guide/web-animation)


> Hi all, I created a factory scene and the Physics simulation complains that its too big: "WARNING: The current physics step could not be computed correctly. Your world may be too complex. If this problem persists, try simplifying your bounding object(s), reducing the number of joints, or reducing WorldInfo.basicTimeStep." I tried changing the basicTimeStep option but my robot still jumps around in the scene like crazy. Are there some more tricks to get such scene working in Webots? thanks

`@ThomasH` very nice simulation world!

as `@Simon Steinmann` said, you should be able to improve the stability by simplifying the bounding objects (make sure to use only basic geometries such as box, sphere, cylinder, etc.)


> `@David Mansolino`, I think i will need the debug version to find what is responsible for the webots crash in my environment. In the 2020b the error still happens.

`@Luiz Felipe` ok, I will create it an let you know when it is ready


> Hello, my Webots R2020a displays ModuleNotFoundError when importing numpy in python supervisor. python 2, python 3 and numpy are all correctly installed on the local PC, and numpy is imported with no error when python is run on the terminal. Could you help with this  issue?

`@mint` the problem come from the fact that you are using the snap package, the snap package is running in a kind of sandbox and does not have access to external modules. You should either use another installation procedure for Webots either use extern controller: [https://cyberbotics.com/doc/guide/running-extern-robot-controllers](https://cyberbotics.com/doc/guide/running-extern-robot-controllers)

##### mint 07/06/2020 05:39:53
Oh.. I understood


Thank you David and Luiz!

##### David Mansolino [Cyberbotics] 07/06/2020 05:40:20
You're welcome!

##### chenpixx 07/06/2020 07:56:10

%figure
![image0.jpg](https://cdn.discordapp.com/attachments/565154703139405824/729606606307721236/image0.jpg)
%end


This is camera error for op3.


I cant understanr the problem.

##### David Mansolino [Cyberbotics] 07/06/2020 07:57:11
neither us without the rest of the code

##### chenpixx 07/06/2020 07:57:14
I received after reset


It normally works.

##### David Mansolino [Cyberbotics] 07/06/2020 07:59:31
Ok, the problem is probably related tot he fact that you have to do a robot.step between the camera activation and the getImageArray call

##### chenpixx 07/06/2020 08:02:06
Thanks a lot. It works

##### David Mansolino [Cyberbotics] 07/06/2020 08:02:15
You're welcome 🙂

##### Robsicky 07/06/2020 08:18:50
Hi!😀 

Quick question:

The format of the raw image bytes from

 `getImage()`

, is it b, g, r and a 4th value? What is the 4th?

##### David Mansolino [Cyberbotics] 07/06/2020 08:19:25
The format is BGRA ([https://cyberbotics.com/doc/reference/camera#camera-image](https://cyberbotics.com/doc/reference/camera#camera-image))


The last value can be ignored.

##### Robsicky 07/06/2020 08:19:51
Ah, thanks!


Also, is it formatted from top left by rows?

##### David Mansolino [Cyberbotics] 07/06/2020 08:20:58
yes

##### Robsicky 07/06/2020 08:21:40
Oki😀 Thanks a lot!

##### David Mansolino [Cyberbotics] 07/06/2020 08:21:52
You're welcome

##### EPIC 07/06/2020 09:23:06
Hi! I'm trying to loop through a list of ID's but I'm having some problems. I also read in your documentation that looping through ID's is not recommend. Is there an obvious reason it doesn't work? (I'm adding a node in run-time, adding its ID to a list, and loop through the list)

##### Stefania Pedrazzi [Cyberbotics] 07/06/2020 09:24:28
`@EPIC` could you provide some code so that we can better understand what you are doing?

##### EPIC 07/06/2020 09:26:20

%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/729629297832230972/unknown.png)
%end


Where "self.id\_box\_list" is the list of ID's it's looping through. I have checked that it's not an index-error. The new ID is added to the list, but it doesn't seem to find the object with the given ID

##### Stefania Pedrazzi [Cyberbotics] 07/06/2020 09:29:27
sorry but this part of code doesn't help very much given that most of the functionality is still missing


the best would be to provide a fully working example


what I could suggest you is to use DEF nodes to identify your boxes instead of the internal unique id

##### EPIC 07/06/2020 09:34:28
They all have the same DEF, as I import the same object in run-time (a robot is picking up a box - I'm importing a box inside the grippers child-node, and deletes the original box when picking it up). To keep track of all the boxes, I sort them by ID



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/729631350306504744/unknown.png)
%end

##### Stefania Pedrazzi [Cyberbotics] 07/06/2020 09:35:05
It is also possible to import objects in runtime and set a different DEF name

##### EPIC 07/06/2020 09:35:31
Oh, really? That would be a better solution indeed


How could I set a different DEF name? 🙂

##### Stefania Pedrazzi [Cyberbotics] 07/06/2020 09:38:01
With the Supervisor API you can also import a node from string:

[https://www.cyberbotics.com/doc/reference/supervisor#wb\_supervisor\_field\_import\_mf\_node\_from\_string](https://www.cyberbotics.com/doc/reference/supervisor#wb_supervisor_field_import_mf_node_from_string)


so you can dynamically build the string in the controller


for example storing all the box description in a variable (or file) and just adding the DEF name part dynamically just before calling the import instruction


this is for example done in the SumoSupervisor controller: [https://github.com/cyberbotics/webots/blob/master/projects/default/controllers/sumo\_supervisor/Objects.py#L158](https://github.com/cyberbotics/webots/blob/master/projects/default/controllers/sumo_supervisor/Objects.py#L158)

##### EPIC 07/06/2020 09:48:26
Ah, clever.. I didn't understand how to use it from the documentation, but that example were really nice. Will see if I can make it work as in the example, thank you!

##### Stefania Pedrazzi [Cyberbotics] 07/06/2020 09:49:11
you're welcome

##### Emna 07/06/2020 09:49:29
hi, how can i get a navigation controller to a specific target, i will use it to implement my model

##### yash 07/06/2020 09:54:14
Hello .!

I am using Webots with ROS . I am programming a publisher and subscriber node using visual studio code , then should have to save the nodes in the source file(src) of  webots\_ros Package? 

And what about the controller field of the robot node , which controller should I select there .?

##### David Mansolino [Cyberbotics] 07/06/2020 09:56:32
Hi `@yash` if yoru publisher and subscriber is using the services and topics provided by the default ros controller of Webots, you should simply assign the controller to 'ros'. Here are some example: [https://github.com/cyberbotics/webots\_ros](https://github.com/cyberbotics/webots_ros)

##### Stefania Pedrazzi [Cyberbotics] 07/06/2020 09:57:19
Hi `@Emna`, knokwing the target position you can use for example the GPS device to compare the current position with the target position and compute the motion direction. Based on that you just have to set your robot motors to move in that direction.


Webots doesn't include any built-in generic navigation controller, in the provided simulations the robots are mainly using obstacle detection based on sensors

##### Emna 07/06/2020 10:01:59
`@Stefania Pedrazzi` thanks for response i will do it

##### yash 07/06/2020 10:17:16
> Hi `@yash` if yoru publisher and subscriber is using the services and topics provided by the default ros controller of Webots, you should simply assign the controller to 'ros'. Here are some example: [https://github.com/cyberbotics/webots\_ros](https://github.com/cyberbotics/webots_ros)

`@David Mansolino`  Understood! You mean to say standard ROS controller .?

##### David Mansolino [Cyberbotics] 07/06/2020 10:23:15
Yes exactly

##### yash 07/06/2020 10:49:21
> Yes exactly

`@David Mansolino`  thanks , will try it out 👍

##### zeynepp 07/06/2020 11:18:18
Hi. I want to run the example of the Irb robot but I get this error:



%figure
![hata.JPG](https://cdn.discordapp.com/attachments/565154703139405824/729657598185308200/hata.JPG)
%end

##### David Mansolino [Cyberbotics] 07/06/2020 11:19:16
which version of ikpy and python are you using?

##### zeynepp 07/06/2020 11:19:35
pytho 3.7


ikpy 3.0.1

##### David Mansolino [Cyberbotics] 07/06/2020 11:21:24
Ok, this is due to an incompatible new version of ikpy, we updated the controller to be compatible with the latest version of ikpy recently, but this is not yet released.

Can you try applying this patch to your controler?

[https://github.com/cyberbotics/webots/pull/1782/files](https://github.com/cyberbotics/webots/pull/1782/files)

##### zeynepp 07/06/2020 11:24:33
I will try, thank you


I applied the solution you recommended but got the same error

##### David Mansolino [Cyberbotics] 07/06/2020 11:42:51
That's strange because another user reported the exact same issue and for him it worked.

Are you sure you changed the correct file and it is this one that is been used?

##### zeynepp 07/06/2020 12:01:01
Yes. I tried it on two different computers to make sure.

##### David Mansolino [Cyberbotics] 07/06/2020 12:02:07
Ok, thank you for checking it. Can I ask you to test with a beta version of R2020b available here?

[https://github.com/cyberbotics/webots/releases](https://github.com/cyberbotics/webots/releases)

##### zeynepp 07/06/2020 12:03:54
Of course, I will try

##### David Mansolino [Cyberbotics] 07/06/2020 12:04:05
Perfect, let us know

##### zeynepp 07/06/2020 12:53:05
Thank you so much. It worked in this version.

##### David Mansolino [Cyberbotics] 07/06/2020 12:53:20
You're welcome .-)

##### Jhon mathew 07/06/2020 17:16:20
Guys I have made a 4 wheeled mobile robot I have added a camera. I am planning to make robot can track the object like robotis soccer robot. But I am facing lots of error in library. I have sorted out but I can't use tge camera. ,! does anyone have custom object tracking library ?

##### Sanket Khadse 07/06/2020 17:16:47
Is there a way to simulate air drag on objects? Like a kite?

##### DrVoodoo [Moderator] 07/06/2020 20:26:49
`@Sanket Khadse` I have done simulations using Fluid nodes where Air is a low density fluid


density of 1.225 in my experience


you will need to specify the ImmersionProperties of the kite

##### Sanket Khadse 07/07/2020 04:44:14
`@DrVoodoo` thank you.

##### David Mansolino [Cyberbotics] 07/07/2020 05:51:16
> Guys I have made a 4 wheeled mobile robot I have added a camera. I am planning to make robot can track the object like robotis soccer robot. But I am facing lots of error in library. I have sorted out but I can't use tge camera. ,! does anyone have custom object tracking library ?

`@Jhon mathew` hi, what is not working exactly with the camera, can you share th eproblematic part of your code?

##### Jhon mathew 07/07/2020 06:10:34
[https://photos.app.goo.gl/PhVTEAd6dYFYo2yG9](https://photos.app.goo.gl/PhVTEAd6dYFYo2yG9)


I was trying to add object tracking to my mobile robot. I need  xCenter and yCenter of the object in a fixed frame can anyone help me ?

##### David Mansolino [Cyberbotics] 07/07/2020 06:19:40
What do you mean exactly by 'fixed frame'.

Since you can now the resolution and field of views of the camera, if you know the position and orientation of your camera (which you can get using a gps and inertial unit for example) you have everything you need to compute the object position (except the distance).

##### Jhon mathew 07/07/2020 06:22:39
if its possible can you help me to get atleast co-ordinates of the object. ( I  am asking similar function of vision library of robotis-op soccer robot)

##### David Mansolino [Cyberbotics] 07/07/2020 06:24:46
I would recommend to check the code of the soccer-op, a very similar algorithm can be used for you robot.

If you want, Cyberbotics provide professional consulting and can write it for you: [https://www.cyberbotics.com/#plans](https://www.cyberbotics.com/#plans)

##### Jhon mathew 07/07/2020 06:31:19
thank you ♥️

##### David Mansolino [Cyberbotics] 07/07/2020 06:31:28
You're welcome


`@Luiz Felipe` here are the debug versions of R2020a-rev2 (webots-R2020a-rev2-x86-64\_debug.tar.bz2 and  webots\_2020a-rev2\_amd64\_debug.deb): [https://github.com/cyberbotics/webots/releases/tag/nightly\_6\_7\_2020](https://github.com/cyberbotics/webots/releases/tag/nightly_6_7_2020)

##### Luiz Felipe 07/07/2020 07:04:33
Thank you so much `@David Mansolino` , you are the best!

##### David Mansolino [Cyberbotics] 07/07/2020 07:04:53
You're welcome, let us know when you have a stack or need help.

##### yash 07/07/2020 08:22:43
Hello ! I am using a standard ROS controller , so when I run the node using rosrun I get this error ...
%figure
![image0.png](https://cdn.discordapp.com/attachments/565154703139405824/729975674886029322/image0.png)
%end

##### David Mansolino [Cyberbotics] 07/07/2020 08:25:01
It seems you are not using the standard controller, what does 'webots\_test01.py? contain?

Did you set the PYTHONPATH to point to the Webots Python library?

Something like this: [https://github.com/cyberbotics/webots/blob/33d834e8debcc7c38a9be1144a48ae52971d303e/projects/languages/ros/webots\_ros/launch/webots\_ros\_python.launch#L12-L13](https://github.com/cyberbotics/webots/blob/33d834e8debcc7c38a9be1144a48ae52971d303e/projects/languages/ros/webots_ros/launch/webots_ros_python.launch#L12-L13)

##### yash 07/07/2020 09:23:19
webots\_test01.py is a publisher node . So do I create a webots\_ros\_python.launch file and include the content as given in the above link .?

##### David Mansolino [Cyberbotics] 07/07/2020 09:31:56
Not necessarily, you can also define yourself the  `LD_LIBRARY_PATH` and `PYTHONPATH` environment variable before starting your node (see more explanation here: [https://cyberbotics.com/doc/guide/running-extern-robot-controllers?tab-os=linux&tab-language=python#environment-variables](https://cyberbotics.com/doc/guide/running-extern-robot-controllers?tab-os=linux&tab-language=python#environment-variables))

##### yash 07/07/2020 09:34:43
Okay let me check it out

##### ONI 07/07/2020 11:47:56
Hi. I'm new to webots and i've to make a multi-robot system coordonation project using Webots. After i went through the tutorial and saw the basics i'm trying to make my own project. But when i add the pr2 robot for example to my world and project the robot does the things he do in the demo and uses the controller from demo. all i want is to use the robot but to code myself the controller. Can someone help me with some answers or to explain me what i've to do ? i know it sounds dumb ,but as i said i'm new to Webots .I tried to look up for other tutorials than the cyberbotics ones and i couldn't find  things related to my problem.

##### Simon Steinmann [Moderator] 07/07/2020 11:50:45
`@ONI` you can change your controller here. If you want to create a new controller inside webots, use the wizard (top of the screen). If you select extern, you can have your controller running outside in your Terminal or IDE of your choice
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/730028027165147186/unknown.png)
%end

##### ONI 07/07/2020 12:09:20
`@Simon Steinmann` thank you very much .

##### EPIC 07/08/2020 08:16:07
Hi! I'm having trouble with my touch sensor. The bounding object of the sensor is set at the end-effector of a robot, and is working just fine when there is nothing attached to the end-effector. But when the end-effector (gripper) is picking something up, the touch sensor doesn't work anymore (it starts working when I let go of the object that I picked up). Any idea why this could be happening?

Additional info: I'm not using physics (pure kinematic simulation). When I grab/pick up an object, I'm importing the object as a child of the end-effector/gripper (and then remove/delete the original object). When I put the object down/let go, I reverse the process (import the object into the world, then remove/delete the child-object from the end-effector/gripper).
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/730336402662752256/unknown.png)
%end


The output from the touch sensor is != 1 while I'm holding the object, both while overlapping other bounding objects and not

##### David Mansolino [Cyberbotics] 07/08/2020 08:20:04
Hi, does the object you imported overlap the bounding object of the touch sensor?

##### EPIC 07/08/2020 08:20:53
No :/ I also tried to add the object as a child before I started the simulation - then everything worked just fine

##### David Mansolino [Cyberbotics] 07/08/2020 08:23:58
Ok, in that case that is maybe a bug, can you try reproducing the issue with a very simple example (even if it implies adding manually the new object while the siulation is running) and report it here: [https://github.com/cyberbotics/webots/issues/new?template=bug\_report.md](https://github.com/cyberbotics/webots/issues/new?template=bug_report.md)

thank you

##### EPIC 07/08/2020 08:43:13
Sure 🙂 I manually added the object now (when the simulation were running), and the same problem occurred. When reporting, should I just describe the problem (like above)? Or do you need the code and the simulation-world?

##### David Mansolino [Cyberbotics] 07/08/2020 08:44:06
A very simple simulation world + controller would be nice.

##### oroulet 07/08/2020 09:07:10
Is there a way to get a list of solids within a given volume? or within a range from a point?

##### David Mansolino [Cyberbotics] 07/08/2020 09:07:48
Unfortunately not, you have to get all of them and then check the distance manually to the point.

##### oroulet 07/08/2020 09:08:58
OK . that is what we do now. Thanks

##### David Mansolino [Cyberbotics] 07/08/2020 09:09:13
You're welcome

##### oroulet 07/08/2020 11:05:23
just to make sure I understand clearly the way webots work:  Every call to the webots API is not threadsafe and must be done in that big loop:



          while supervisor.step(self.time\_step) != -1:

                # do something

##### Stefania Pedrazzi [Cyberbotics] 07/08/2020 11:09:50
`@oroulet` the `supervisor.step` function makes the simulation (physics computation, rendering, sensor measurements etc.) to run for the specified time step. If you don't call it regularly, then the simulation doesn't run.


About threadsafe properties, here are some additional documentation:

[https://cyberbotics.com/doc/reference/robot#wb\_robot\_task\_new](https://cyberbotics.com/doc/reference/robot#wb_robot_task_new)


[https://cyberbotics.com/doc/reference/robot#wb\_robot\_mutex\_new](https://cyberbotics.com/doc/reference/robot#wb_robot_mutex_new)

##### Simon Steinmann [Moderator] 07/08/2020 11:25:21
my .bashrc contains this:

export WEBOTS\_HOME='/usr/local/webots'

export LD\_LIBRARY\_PATH="${LD\_LIBRARY\_PATH}:${WEBOTS\_HOME}/lib/controller"

export PYTHONPATH="${PYTHONPATH}:${WEBOTS\_HOME}/lib/controller/python27"

export PYTHONPATH="${PYTHONPATH}:${WEBOTS\_HOME}/lib/controller/python37"

##### EPIC 07/08/2020 11:26:00
Hi `@George`! I've been struggling a bit with PyCharm aswell. One of the thing I keep forgetting is to create a new project (and thereby a virtual environment) in PyCharm, after I have used Webots' "Wizard" to create a new controller. Have you created one?

##### Simon Steinmann [Moderator] 07/08/2020 11:27:31
you dont need to create a new controller inside webots. Simply select 'extern' as the controller

##### Stefania Pedrazzi [Cyberbotics] 07/08/2020 11:27:36
yes, PYTHONPATH should also contain `${WEBOTS_HOME}\lib\controller\python37`

##### GeoCSBI 07/08/2020 11:29:04
`@EPIC` I didnt create a new virtual environment, i followed `@Simon Steinmann` way, set controller to extern

##### EPIC 07/08/2020 11:29:10
True `@Simon Steinmann`, but to set up the controller to use externally, it's nice to get a default set-up by Webots (by using their Wizard) 🙂

##### Simon Steinmann [Moderator] 07/08/2020 11:29:59
ah okay, know what you mean


Just set your paths like I posted above and it shoulud work.

 export WEBOTS\_HOME='/usr/local/webots' 

you might have to change, depending on your install

##### Stefania Pedrazzi [Cyberbotics] 07/08/2020 11:31:25
Here is the documentation for extern controllers:

[https://cyberbotics.com/doc/guide/running-extern-robot-controllers?tab-language=python](https://cyberbotics.com/doc/guide/running-extern-robot-controllers?tab-language=python)

##### GeoCSBI 07/08/2020 11:31:51
even if i had done something wrong on the webots side, shouldn't Pycharm run the code? I will try and re-modify the paths

##### Simon Steinmann [Moderator] 07/08/2020 11:32:45
If your paths are correct and you import the controller in pycharm, you set the controller to extern in webots, then you should be able to run the controller inside pycharm

##### EPIC 07/08/2020 11:34:17
I remember I got the same errors as `@GeoCSBI`, regarding the DLL load. My controller itself found the files it needed. But when the controller imports "controller.py", "controller.py" again tried to import "\_controller.py" or something. And I somehow had only given the files in my project access to what I needed, and not other files like "controller.py".. (Atleast that's what I think was happening)

##### Simon Steinmann [Moderator] 07/08/2020 11:34:19
The start of your controller in your own IDE should look something like this:



from controller import Supervisor



robot = Supervisor()

timestep = int(robot.getBasicTimeStep())


you guys on linux or windows?

##### EPIC 07/08/2020 11:34:56
Windows here

##### GeoCSBI 07/08/2020 11:35:40
Windows

##### Simon Steinmann [Moderator] 07/08/2020 11:35:45
Did you follow the tutorial Stefania posted above?

##### GeoCSBI 07/08/2020 11:37:38
`@Simon Steinmann` trying it now


It worked!

##### Simon Steinmann [Moderator] 07/08/2020 11:45:07
🥳

##### GeoCSBI 07/08/2020 11:45:11
Thank you!

##### Reza 07/08/2020 13:12:23
Hello Everyone, I would like to ask some questions in regards to the Salamander robot Immersion Properties if someone can provide some info

##### Simon Steinmann [Moderator] 07/08/2020 13:13:15
`@Reza` are you at UBCO in Canada?

##### Reza 07/08/2020 13:13:26
Switzerland 🙂

##### Simon Steinmann [Moderator] 07/08/2020 13:13:48
okay, different Reza then 😉

##### Reza 07/08/2020 13:14:06
😄


My first question is that how one can decide on which properties in the ImmersionProperties are best to be defined.  I can see in the case of Salamander PROTO, there are some instances of dragForceCoefficients but not any case of dragTorqueCoefficients and just one instance of viscousResistanceTorqueCoefficient but not any of viscousResistanceForceCoefficient.

##### David Mansolino [Cyberbotics] 07/08/2020 13:20:59
Hi `@Reza`~~ sure, what is your question?~~

##### Reza 07/08/2020 13:21:51
My second question is that can we highlight in anyway the parts of the PROTO node for which the properties are being defined


In webots simulation window I mean so we can see which part is referring to since the names can be confusing sometimes

##### David Mansolino [Cyberbotics] 07/08/2020 13:25:50
> My first question is that how one can decide on which properties in the ImmersionProperties are best to be defined.  I can see in the case of Salamander PROTO, there are some instances of dragForceCoefficients but not any case of dragTorqueCoefficients and just one instance of viscousResistanceTorqueCoefficient but not any of viscousResistanceForceCoefficient.

`@Reza` to my knowledge they have been choosen empirically to have a realistic motion of the salamender.


To check which part is selected, the simplest solution is to convert the PROTO node to base node (right click on the node in the scene-tree).

Then select the root salamander node in the Webots scene-tree and then select a part of the salamander in the 3D view, this part will then be auto-selected in the Webots scene-tree.

##### Reza 07/08/2020 13:38:53
`@David Mansolino` Thank you very much David for your answers. For the case of the question 1, do you know anyone who might possess some hydrodynamic intuition on why these particular properties are defined? For the 2nd question that was very nice solution!

##### David Mansolino [Cyberbotics] 07/08/2020 13:55:33
You're welcome.

Can you please re-ask the question on Monday as currently some of my colleagues which are more familliar with the subject are currenlty out of office.

##### GeoCSBI 07/08/2020 13:56:20
Guys I have another question, how do I use Multisense S21 from python? I can't seem to find which class i need to use to init it and use it

##### Reza 07/08/2020 13:56:36
Of course `@David Mansolino` . Thanks a lot!

##### David Mansolino [Cyberbotics] 07/08/2020 13:59:31
`@GeoCSBI` as stated in the doc ([https://cyberbotics.com/doc/guide/camera-sensors#multisense-s21](https://cyberbotics.com/doc/guide/camera-sensors#multisense-s21))

The device contains the following device:

an inertial unit: [https://cyberbotics.com/doc/reference/inertialunit?tab-language=python](https://cyberbotics.com/doc/reference/inertialunit?tab-language=python)

several cameras: [https://cyberbotics.com/doc/reference/camera?tab-language=python](https://cyberbotics.com/doc/reference/camera?tab-language=python)

one range-finder: [https://cyberbotics.com/doc/reference/rangefinder?tab-language=python](https://cyberbotics.com/doc/reference/rangefinder?tab-language=python)


and you can get the device handle using the Robot class: [https://cyberbotics.com/doc/reference/robot?tab-language=python#wb\_robot\_get\_device](https://cyberbotics.com/doc/reference/robot?tab-language=python#wb_robot_get_device)

##### EPIC 07/08/2020 14:04:54
Hi again 🙂 Since about 2-3 hours ago, my program keeps randomly crashing. Now it even crash if I just try to search for a node to add to the world.. I don't think I've made any changes in the program today either.. any clues why this could be happening?

##### David Mansolino [Cyberbotics] 07/08/2020 14:05:21
Have you tried rebooting?

##### EPIC 07/08/2020 14:05:32
Yeah, no luck :/

##### David Mansolino [Cyberbotics] 07/08/2020 14:05:50
Have you tried the safe mode?

##### EPIC 07/08/2020 14:06:06
I've added a PROTO inside the "protos" folder,, that's the only change I know off


No, I can try 🙂

##### David Mansolino [Cyberbotics] 07/08/2020 14:06:24
> I've added a PROTO inside the "protos" folder,, that's the only change I know off

`@EPIC` and if you remove it (temporarily), does it fix the crash?

##### EPIC 07/08/2020 14:11:58
Tried both safe mode and to remove the proto, still crashes

##### David Mansolino [Cyberbotics] 07/08/2020 14:12:46
Ok, in that case, may I ask you to try with a beta version of Webots R2020b (we fixed many crashes since the latest version): [https://github.com/cyberbotics/webots/releases](https://github.com/cyberbotics/webots/releases)

##### GeoCSBI 07/08/2020 14:14:53
`@David Mansolino` Thank you! I have already check it, I am having a hard time though to get it (sorry if this is a trivial question but I am fairly new with webots). I am trying to get the device from a Pedestrian(Supervisor) class -> self.getDevice("MultiSenseS21") but it returns None. I think I am messing up the tag but it is somewhat confusing. What tag am I supposed to use to get the object?


`@David Mansolino` I used the getDeviceByIndex method and managed to retrieve the devices thank you

##### Stefania Pedrazzi [Cyberbotics] 07/08/2020 14:22:23
`@GeoCSBI` note that the default MultiSenseS21 device name is `MultiSense S21` (with a space before S21)

##### David Mansolino [Cyberbotics] 07/08/2020 14:22:54
> `@David Mansolino` Thank you! I have already check it, I am having a hard time though to get it (sorry if this is a trivial question but I am fairly new with webots). I am trying to get the device from a Pedestrian(Supervisor) class -> self.getDevice("MultiSenseS21") but it returns None. I think I am messing up the tag but it is somewhat confusing. What tag am I supposed to use to get the object?

`@GeoCSBI` the issues in your code are:

You should never use the `getDevice` in python, but rather `getCamera`, `getRangeFinder` etc. I would recommend following this tutorial in Python: [https://www.cyberbotics.com/doc/guide/tutorial-4-more-about-controllers?tab-language=python](https://www.cyberbotics.com/doc/guide/tutorial-4-more-about-controllers?tab-language=python)


then the names of the devices are documented here (not simply `MultiSenseS21`) as this PROTO contains several internal Webots devices:

[https://cyberbotics.com/doc/guide/camera-sensors#internal-devices-names](https://cyberbotics.com/doc/guide/camera-sensors#internal-devices-names)

##### GeoCSBI 07/08/2020 14:31:22
`@David Mansolino` A little note, in the documentation the names are in the form of "MultiSenseS21.name some device", the correct names that I was able to retrieve the devices by name was "MultiSense S21 some device".  I understand that by MultiSenseS21.name implies the name-field of MultiSenseS21  but it was somewhat confusing till I figured it out.

##### David Mansolino [Cyberbotics] 07/08/2020 14:36:27
I agree this is not 100% clear, we will tr to improve this.

##### Rajesh Roy 07/09/2020 04:25:00
Hey,

In Webots, one can write Python code to simulate and run the objects present inside the simulation. If I try to export my Webots project into HTML WebGL simulation how should I execute the Python script then?

##### David Mansolino [Cyberbotics] 07/09/2020 05:37:08
The controller is executed on the Webots side before exportation, then the motion is recorded in the animation.

If you want to be able to change the controller in the web interface (similar to what is done at: [https://robotbenchmark.net/](https://robotbenchmark.net/), by the way the source code of this site is available at: [https://robotbenchmark.net/](https://robotbenchmark.net/)robotbenchmark.zip) you need to setup a simulation streaming server: 

[https://www.cyberbotics.com/doc/guide/web-streaming](https://www.cyberbotics.com/doc/guide/web-streaming)

[https://www.cyberbotics.com/doc/guide/web-simulation](https://www.cyberbotics.com/doc/guide/web-simulation)

##### Andrei 07/09/2020 06:21:25
hello. In a rectangle arena can I add a very thin square that can be read in supervisor and used as goal for robot? how can I change robot's goal without changing code or adding random to code?

##### David Mansolino [Cyberbotics] 07/09/2020 06:23:04
Hi, an you explain a bit more about your square?

Should it a be simply a texture on the floor or should it be a phyical 3D object with physics enabled?

##### Andrei 07/09/2020 06:23:29
texture in best

##### David Mansolino [Cyberbotics] 07/09/2020 06:24:15
Ok then I would suggest following the tutorials as this is clearly explaine in the tutorials, in particular this one: [https://cyberbotics.com/doc/guide/tutorial-3-appearance](https://cyberbotics.com/doc/guide/tutorial-3-appearance)

##### Andrei 07/09/2020 06:24:41
as long as I can def it and read it's position in supervisor, also drag it when I wanna change goal it's perfect

##### David Mansolino [Cyberbotics] 07/09/2020 06:26:01
If you want to be able to easily change and read its position, then the simplest solution is to add a simple rectangular 2D shape ([https://cyberbotics.com/doc/guide/tutorial-2-modification-of-the-environment](https://cyberbotics.com/doc/guide/tutorial-2-modification-of-the-environment)).

##### Andrei 07/09/2020 06:27:27
ya, I added lots of rectangular obstacles.


I guess I should have thought that a solid can be left passable and with really low height it can be used as a goal designation

##### oroulet 07/09/2020 06:59:18
I am getting that message quite often right after  restarting the robot controller. What is the reason? and Is there a way to avoid it? some better cleanup?
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/730679457685438506/unknown.png)
%end


to make it work again we need to reset simulation and then start controller again

##### David Mansolino [Cyberbotics] 07/09/2020 07:41:47
This may indicate that you robot controller did not exited cleanly (e.g. by calling wb\_robot\_cleanup in C, or destructing the Robot instance in OO languages), then Webots is not aware that the controller closed and think that there is no free 'extern' controller.

##### EPIC 07/09/2020 07:45:25
I have the same issue in Python, when I stop the the python-script (and not the simulation)

##### oroulet 07/09/2020 07:45:34
ummm , We are using python and just closing the script. I would have expected the cleanup to happen automatically... Maybe ctrl-C kills something before clenaup....

Is there a way to force cleanup from python?

##### David Mansolino [Cyberbotics] 07/09/2020 07:46:43
Yes that's probably the reason, the kill just stop the script and does not call the 'Robot destructor', one possible way would be to catch the kil signal in your controller and delte the Robot instance and then quit

##### EPIC 07/09/2020 07:47:50
Should one use "simulationQuit()" or "simulationReset()" in that case?

##### David Mansolino [Cyberbotics] 07/09/2020 07:49:25
None of them, this is to close Webot, you just want to close cleanly the controller. just something like:

```Python
del robot
sys.exit()
```

##### oroulet 07/09/2020 07:50:37
OK so that is the `__del__` method that has the code for cleaning up. I will try to test as soon as I get two minutes

##### David Mansolino [Cyberbotics] 07/09/2020 07:51:09
yes exactly, that's the key point

##### oroulet 07/09/2020 07:53:20
As far as I know that code is supposed to be called anyway. You cannot catch it or avoid it when closing a script. The only issue is that you do not have control of WHEN it is called. So maybe it gets called AFTER the connection to webots is closed or something similar

Might be an issue in wrapper here

##### Sanket Khadse 07/09/2020 08:05:07
Is there any way to move an object, say a table, with an oceanic movement (technically, 'sea state level 3 movement') ?

I tried using a hinge2Joint and setting its minPosition and maxPosition, but after it reaches the limits, it stops. If it could somehow retrace its path backwards, will do the work.

##### oroulet 07/09/2020 08:06:52
interesting. 

```
try:
    supervisor.plc_run_simulation(plc)
except (KeyboardInterrupt, BaseException):
    print("!!!!!!!!!!!!!!!!!!!!EXCPET CATCH!!!!!!!!!!!!")
    del plc
    del supervisor
    sys.exit(1) 
```



that kind of code allows reconnection after ctrl-c but triggers every time another issue we have had a few times before: RangeFinder.get\_range\_image() returns None... so the exit is still not clean enough..

Also generally I do not think it is a good idea to have a sys.exit() under a try catch,...

##### Stefania Pedrazzi [Cyberbotics] 07/09/2020 08:08:21
`@Sanket Khadse` yes, you can implement any movement from a controller. In the controller you should check the joint position and when it is close to the limits switch the motion direction

##### oroulet 07/09/2020 08:08:23
everything else seems to work. It is only the RangeFinder that breajs...

##### David Mansolino [Cyberbotics] 07/09/2020 08:09:39
> everything else seems to work. It is only the RangeFinder that breajs...

`@oroulet` the range-finder issue is a bug we fixed very recently in our development environment: [https://github.com/cyberbotics/webots/pull/1858](https://github.com/cyberbotics/webots/pull/1858)

You can get a beta of R2020b containing the fix here: [https://github.com/cyberbotics/webots/releases](https://github.com/cyberbotics/webots/releases)


If you try with R2020b let us know if this fixes the issue or not.

##### oroulet 07/09/2020 08:23:06
thanks `@David Mansolino` We will check that

##### David Mansolino [Cyberbotics] 07/09/2020 08:23:15
You're welcome

##### oroulet 07/09/2020 08:25:58
btw we are looking at webots to replace gazebo for robot simulation (we wanted something we could run without physicsc but with collilsion) and so far this looks very promissing. Much easier to install, better control over dependencies, more flexible architecture and less buggy. Great work!

##### David Mansolino [Cyberbotics] 07/09/2020 08:26:26
Thank you 🙂

##### EPIC 07/09/2020 09:31:14
Hi! I see that one can enable and disable boundingObject when writing the PROTO with enableBoundingObject (True/False). Is the boolean value automatically connected to the boundingObject? Or do I have to write some code inside the PROTO?


Sorry. I found some example-code from the E-puck, where the code is written. I'll assume that's the way to do it 🙂

##### David Mansolino [Cyberbotics] 07/09/2020 09:40:28
Yes exactly, if you write your own PROTO you have to do it, but this is quite simple, here is a simple example: [https://github.com/cyberbotics/webots/blob/74c086292a96bc0d372480e440de2fc56dc3a50e/projects/objects/buildings/protos/SimpleTwoFloorsHouse.proto#L263-L285](https://github.com/cyberbotics/webots/blob/74c086292a96bc0d372480e440de2fc56dc3a50e/projects/objects/buildings/protos/SimpleTwoFloorsHouse.proto#L263-L285)

##### EPIC 07/09/2020 09:42:18
And I can still set the node to static right? Is it when a node depends on other variables/arguments one should not set it as static?

##### David Mansolino [Cyberbotics] 07/09/2020 09:43:13
Yes sure, you should remove the static only when you use a random part in your PROTO (which is a very rare case).

##### EPIC 07/09/2020 09:44:08
Ah, I see. Nice, thank you! 😁

##### David Mansolino [Cyberbotics] 07/09/2020 09:44:15
You're welcome

##### EPIC 07/09/2020 09:58:42
About the contact properties: Is it possible (in the PROTO) to make the node return a value/bool when another bounding object intersects with it? And then read the value with supervisor?


Or even better, send the value (or it's own DEF/ID) directly to supervisor

##### David Mansolino [Cyberbotics] 07/09/2020 10:24:34
The first solution is not possible. But you can:

  - use a touchesensor to detect collision.

  - define a DEF for the Solid in the PROTO file and get it with the new `wb_supervisor_node_get_from_proto_def` function (only available in th ebeta of R2020b: [https://github.com/cyberbotics/webots/releases](https://github.com/cyberbotics/webots/releases)): 

  - [https://www.cyberbotics.com/doc/reference/supervisor?version=develop#wb\_supervisor\_node\_get\_from\_proto\_def](https://www.cyberbotics.com/doc/reference/supervisor?version=develop#wb_supervisor_node_get_from_proto_def)

  - [https://www.cyberbotics.com/doc/reference/supervisor?version=develop#wb\_supervisor\_node\_get\_proto\_field](https://www.cyberbotics.com/doc/reference/supervisor?version=develop#wb_supervisor_node_get_proto_field)

##### Simon Steinmann [Moderator] 07/09/2020 11:43:01
How can I get a nodehandle to 'worldinfo' without using DEF?

##### David Mansolino [Cyberbotics] 07/09/2020 12:00:48
One solution would be to:


1. get the root node handle (which is a hidden Group node)

2. loop through the nodes in its children field

3. check the type of each node in the children field.

##### Simon Steinmann [Moderator] 07/09/2020 12:03:11
can you give me a code snippet for '2.'?

##### David Mansolino [Cyberbotics] 07/09/2020 12:03:29
Sure, which language?

##### Simon Steinmann [Moderator] 07/09/2020 12:03:33
python

##### David Mansolino [Cyberbotics] 07/09/2020 12:06:41
Here is an (untested) example:

```Python
root_children_field = supervisor.getRoot().getField('children')
for i in range(root_children_field.getCount()):
    node = root_children_field.getMFNode(i)
    if node.getType() == Node.WORLD_INFO:
        pass  # do something with the node
```

##### Simon Steinmann [Moderator] 07/09/2020 12:07:19
thanks so much 🙂

##### David Mansolino [Cyberbotics] 07/09/2020 12:07:25
You're welcome

##### Simon Steinmann [Moderator] 07/09/2020 12:08:15
as Worldinfo is always on top, would this work?

root\_children\_field.getMFNode(0)

##### David Mansolino [Cyberbotics] 07/09/2020 12:09:14
Yes, this is less generic but in the Worldinfo case this should indeed work perfectly too

##### Simon Steinmann [Moderator] 07/09/2020 12:10:02
Alright, thank you, will make benchmark automation much easier 🙂


quick question, given a small enough timestep, it should not matter if I reload the world or just reset the simulation between runs right?


or are there some things that might need to be considered?

##### David Mansolino [Cyberbotics] 07/09/2020 12:12:59
the behavior is not exactly the same, the advantage of the reset are:

  - Much faster

  - The controller keeps running

And on the other side reload, make sure you are starting from a completely clean environment (like if you had close and re-open Webots).

##### Simon Steinmann [Moderator] 07/09/2020 12:13:26
which aspects might not be 'clean'


with a reset

##### David Mansolino [Cyberbotics] 07/09/2020 12:14:37
For example node removed during the simulation are not re-inserted.

Here is the complete list of what a reset does:

[https://cyberbotics.com/doc/guide/the-user-interface#file-menu](https://cyberbotics.com/doc/guide/the-user-interface#file-menu)

##### Simon Steinmann [Moderator] 07/09/2020 12:16:25
I'm talkinig about the supervisor function simulationReset, which doesnt restart the controller. But If I dont create or delete any nodes, I should be good?

##### David Mansolino [Cyberbotics] 07/09/2020 12:18:35
The simulationReset from the supervisor is performing the exact same action than the one from the user interface (except that the controller are not restarted).

But yes, except deleted node it should behave the same.

##### Simon Steinmann [Moderator] 07/09/2020 12:18:56
okay, thank you 🙂

##### Steven Granizo 07/09/2020 17:00:15
Hello, Can I fill an object like a bag of flour while respecting its physical properties such as weight, density, etc.? Thank you.

##### Lifebinder (tsampazk) 07/09/2020 17:46:35
Hey there, i'm running into an issue using R2020a rev1 and python. 



I am importing a .wbo node which is just a default light sensor i exported earlier, into the children of supervisor robot node.  I am then trying to get a handle to the light sensor device by using the getLightSensor() method, but it returns a warning that it is not found. I even tried delaying several steps between importing the light sensor and calling getLightSensor. 



Is there something i'm missing? I have a simple project reproducing the issue, i can share it if needed.

##### oroulet 07/09/2020 18:04:36
`@David Mansolino` 2020b did not solve the issue of get\_range\_image() returning None sometimes after startup in python   

Also adding `del robot` and `del supervisor` do not in fact change the behaviour, we still often an error message after closing the python controlle with ctrl-c.

So there is something else going on here... we have threads but are carefull to only call webot from main thread and I remember that early rototypes without threads also had that issue. must be something with the clenaup of connection...


btw what protocol is used between external controllers and webots? can we wireshark it?

##### Luiz Felipe 07/10/2020 02:32:22
`@David Mansolino` , I think I need additional help using the debug version. I ran the simulation using the debug version, I got the crash but the same error message only in my terminal ("/usr/local/bin/webots: line 88: 28099 aborted (core dumped)"). I guess I need to use gdb to get additional information, but using 'gdb webots-bin' I get an error...

##### David Mansolino [Cyberbotics] 07/10/2020 05:33:52
> Hello, Can I fill an object like a bag of flour while respecting its physical properties such as weight, density, etc.? Thank you.

`@Steven Granizo` yes sure, here is a tutorial about creating objects: [https://cyberbotics.com/doc/guide/tutorial-5-compound-solid-and-physics-attributes](https://cyberbotics.com/doc/guide/tutorial-5-compound-solid-and-physics-attributes)


> Hey there, i'm running into an issue using R2020a rev1 and python. 

> 

> I am importing a .wbo node which is just a default light sensor i exported earlier, into the children of supervisor robot node.  I am then trying to get a handle to the light sensor device by using the getLightSensor() method, but it returns a warning that it is not found. I even tried delaying several steps between importing the light sensor and calling getLightSensor. 

> 

> Is there something i'm missing? I have a simple project reproducing the issue, i can share it if needed.

`@Lifebinder (tsampazk)` This is unfortunately not supported, devices imported during the simulation are not available from the controller.


> `@David Mansolino` , I think I need additional help using the debug version. I ran the simulation using the debug version, I got the crash but the same error message only in my terminal ("/usr/local/bin/webots: line 88: 28099 aborted (core dumped)"). I guess I need to use gdb to get additional information, but using 'gdb webots-bin' I get an error...

`@Luiz Felipe` your right, however, the simplest solution is to start Webots normaly and then start GDB and attach the webots-bin process to it, here is an example for controller (works exactly the same way for Webots): [https://cyberbotics.com/doc/guide/debugging-c-cpp-controllers](https://cyberbotics.com/doc/guide/debugging-c-cpp-controllers)


> `@David Mansolino` 2020b did not solve the issue of get\_range\_image() returning None sometimes after startup in python   

> Also adding `del robot` and `del supervisor` do not in fact change the behaviour, we still often an error message after closing the python controlle with ctrl-c.

> So there is something else going on here... we have threads but are carefull to only call webot from main thread and I remember that early rototypes without threads also had that issue. must be something with the clenaup of connection...

`@oroulet` that strange, once the del robot is called, the connection with webots should be closed. When you do the del, do you see any exit message in Webots?


> btw what protocol is used between external controllers and webots? can we wireshark it?

`@oroulet` Webots uses it's own protocol to communicate with the controller processes (it is exactly the same for normal or 'extern' controllers), it uses pipes (and shared memory for camera images).


Here are some related files:

[https://github.com/cyberbotics/webots/blob/master/src/lib/Controller/api/request.c](https://github.com/cyberbotics/webots/blob/master/src/lib/Controller/api/request.c)

[https://github.com/cyberbotics/webots/blob/master/src/lib/Controller/util/g\_pipe.c](https://github.com/cyberbotics/webots/blob/master/src/lib/Controller/util/g_pipe.c)

##### Luiz Felipe 07/10/2020 06:55:21
> `@Luiz Felipe` your right, however, the simplest solution is to start Webots normaly and then start GDB and attach the webots-bin process to it, here is an example for controller (works exactly the same way for Webots): [https://cyberbotics.com/doc/guide/debugging-c-cpp-controllers](https://cyberbotics.com/doc/guide/debugging-c-cpp-controllers)

`@David Mansolino` This works. I opened webots with one terminal, and open "gdb /usr/local/webots/bin/webots-bin" with other terminal. Now i can get the variables with "info variables" for example. As the crash happens randomly (i cannot control when it happens) and i am quite noobie with gdb I don't know how I can get the stack from gdb after the webots crash and shut down.

##### David Mansolino [Cyberbotics] 07/10/2020 06:57:39
Once you attached it you can type un gdb 'continue' to let Webots run, then you can use Webots as usual, when it crashed you can go back to gdb and get the stack with 'backtrace'.

##### Lifebinder (tsampazk) 07/10/2020 07:05:28
> `@Lifebinder (tsampazk)` This is unfortunately not supported, devices imported during the simulation are not available from the controller.

`@David Mansolino` Oh that's unfortunate. Is there any known workaround?

##### Luiz Felipe 07/10/2020 07:11:36
> Once you attached it you can type un gdb 'continue' to let Webots run, then you can use Webots as usual, when it crashed you can go back to gdb and get the stack with 'backtrace'.

`@David Mansolino` Actually it was not attached correctly hehe... when i use "gdb /usr/local/webots/bin/webots-bin" and then use the command 'run' I get "/usr/local/webots/bin/webots-bin: error while loading shared libraries: libQt5WebSockets.so.5: cannot open shared object file: No such file or directory"... I don't get this error when opening running "webots" on the terminal... should I add any path to LD\_LIBRARY\_PATH?

##### David Mansolino [Cyberbotics] 07/10/2020 07:13:04
> `@David Mansolino` Oh that's unfortunate. Is there any known workaround?

`@Lifebinder (tsampazk)` completely importing a new robot if it works with yoru use case.

Otherwise if you ready need it, you can open a feature request so that we add the support for this:  [https://github.com/cyberbotics/webots/issues/new?template=feature\_request.md](https://github.com/cyberbotics/webots/issues/new?template=feature_request.md)


> `@David Mansolino` Actually it was not attached correctly hehe... when i use "gdb /usr/local/webots/bin/webots-bin" and then use the command 'run' I get "/usr/local/webots/bin/webots-bin: error while loading shared libraries: libQt5WebSockets.so.5: cannot open shared object file: No such file or directory"... I don't get this error when opening running "webots" on the terminal... should I add any path to LD\_LIBRARY\_PATH?

`@Luiz Felipe` yes, adding '/usr/local/webots/lib/webots' to your path might help.

##### Lifebinder (tsampazk) 07/10/2020 07:16:09
`@David Mansolino` Thank you david!

##### David Mansolino [Cyberbotics] 07/10/2020 07:16:16
You're welcome

##### Luiz Felipe 07/10/2020 07:20:31
> `@Luiz Felipe` yes, adding '/usr/local/webots/lib/webots' to your path might help.

`@David Mansolino` Now it seems to be working 🙂 a lot of Thread exited appearing in the terminal I have GDB opened... it seems that i need to wait for a crash 🙃

##### DragonBorne 07/10/2020 22:06:50
Hi there. I've designed a robot in creo which i want to simulate in webots. After watching a couple of tutorials and reading the documentation, it told me that the best possible way to import my model into webots is via blender. however whenever i install the addon provided in github for importing into blender, it gives an error that "upgrade to 2.8x required" while i'm already using 2.83.2 version of blender. Is there any way to fix it or should i install 2.79 version of blender for which the addon was originally made?
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/731270236204040312/unknown.png)
%end

##### Luiz Felipe 07/11/2020 03:57:46
`@David Mansolino` I got a backtrace. I guess the most important functions in the bt are related to dWorldStepAndSpaceCollide() and dlcp::transfer\_i\_from\_C\_to\_N() ... The first 10 lines of the backtrace looks like this:
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/731358552274501772/unknown.png)
%end

##### camillebrucky 07/11/2020 13:48:07
Hey everyone, I'm new to Webots and I'm having trouble setting up the correct python version. When I change the python command from "python" to "python3" in the general preferences, my script crashes every time. My python3 version is 3.7.6 and I'm using the base environment in anaconda. The error message I get in the console is: WARNING: epuck\_go\_forward: The process crashed some time after starting successfully.

WARNING: 'epuck\_go\_forward' controller crashed.

##### David Mansolino [Cyberbotics] 07/13/2020 05:53:08
`@camillebrucky` Webots Python API is compiled for the stadard version of Python and not for anaconda. Here are some information about how to compile the API for another version of Python: [https://cyberbotics.com/doc/guide/using-python#use-an-alternative-python-version](https://cyberbotics.com/doc/guide/using-python#use-an-alternative-python-version)


> `@David Mansolino` I got a backtrace. I guess the most important functions in the bt are related to dWorldStepAndSpaceCollide() and dlcp::transfer\_i\_from\_C\_to\_N() ... The first 10 lines of the backtrace looks like this:

`@Luiz Felipe` did you enable multithreading of th e physics in your simulation?


> Hi there. I've designed a robot in creo which i want to simulate in webots. After watching a couple of tutorials and reading the documentation, it told me that the best possible way to import my model into webots is via blender. however whenever i install the addon provided in github for importing into blender, it gives an error that "upgrade to 2.8x required" while i'm already using 2.83.2 version of blender. Is there any way to fix it or should i install 2.79 version of blender for which the addon was originally made?

`@DragonBorne` unfortunately, this plugin doesn't support Blender >= 2.8, so for now the only possible solution to use it is to install Blender 2.79.

Alternatively, the beta version of Webots R2020b support import from way more file format (maybe some of them can be exported directly from creo), see ' Import 3D Model...': [https://cyberbotics.com/doc/guide/the-user-interface?version=develop#file-menu](https://cyberbotics.com/doc/guide/the-user-interface?version=develop#file-menu)

Here is a link to the beta: [https://github.com/cyberbotics/webots/releases](https://github.com/cyberbotics/webots/releases)

##### Luiz Felipe 07/13/2020 06:05:57
`@David Mansolino` the first 15 steps... (I got 2 crashes, 2 backtraces during the weekend and they are the same...)
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/732115583000248441/unknown.png)
%end


we have a physics plugin that uses a mutex, like this: [https://github.com/omichel/test\_world/blob/develop/plugins/physics/collision\_detector/collision\_detector.cpp](https://github.com/omichel/test_world/blob/develop/plugins/physics/collision_detector/collision_detector.cpp)


Do you think the crash is related to the physics plugin or related to calling the step function in webots?

##### David Mansolino [Cyberbotics] 07/13/2020 06:52:56
Yes, that might be the reason indeed, the simplest is probably to try runnign your simulation without physics plugin and check if it still crashes.

##### Luiz Felipe 07/13/2020 06:56:32
I will re-run with the collision plugin disabled... what do you mean by "did you enable multithreading of the physics in your simulation?"

##### David Mansolino [Cyberbotics] 07/13/2020 06:57:17
Make sure the 'WorldInfo.optimalThreadCount' field is set to 1.

##### Luiz Felipe 07/13/2020 07:00:18
It is already set to 1.
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/732129261909180416/unknown.png)
%end


I am running one simulation without the physics plugin and one simulation with the physics plugin (but recompiled with CFLAGS=-g). Both running via gdb. This dWorldStep() function is from the ODE dynamics library right? If I don't have a physics plugin, only call a step() in the supervisor, does this function is still used?

##### David Mansolino [Cyberbotics] 07/13/2020 07:49:52
Yes it is called by Webots indeed. So it will be called even if you don't have physics plugin, but since the physics plugin interact with this fucntion, it can be the cause of the crash in this function.

##### Luiz Felipe 07/13/2020 07:58:56
I just got a crash for the one with the physics plugin (recompiled with CFLAGS=-g). Visually I see that one of the 10 robots disappeared from the screen. Only 9 are visible... Regarding the backtrace, I got the same backtrace I sent you once again (3 times i get the same backtrace). Nothing related to the functions contained in the collision\_detector.cpp file (e.g. webots\_physics\_step(), webots\_physics\_collide())...


It seems that after a collision, the robot is sent to a position so far in the space that it crashes the webots physics dynamics library. Now I can reproduce the error selecting a robot and grabbing it really far from the field.

##### David Mansolino [Cyberbotics] 07/13/2020 08:05:37
that can indeed be a good explanation. In that case you should make sure that they do not 'explode', you can try improvign the boundign objects, make sure that if you 'teleport' the robot you don't overlap them, etc.

##### Luiz Felipe 07/13/2020 08:07:48
When relocating we already are treating to not overlap them... But in the case of the robot 'exploding' after a collision, what can i change to avoid that (in addition to improve the bounding objects -> regarding improving the bounding objects would be simplifying them?)


Will try this: [https://cyberbotics.com/doc/guide/modeling](https://cyberbotics.com/doc/guide/modeling)

##### oroulet 07/13/2020 08:24:13
stupide question: why does a simple script like this one



In [1]: from controller import Supervisor as S                                                         

In [2]: s = S()                         

In [3]: while True: 

   ...:     s.step(1000) 

   ...:                                           

Uses a lot of GPU?                                                        



that script does nothing apart calling step() every second . GPU uses goes to 0 if not running the loop
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/732150380561170462/unknown.png)
%end

##### David Mansolino [Cyberbotics] 07/13/2020 08:24:21
> When relocating we already are treating to not overlap them... But in the case of the robot 'exploding' after a collision, what can i change to avoid that (in addition to improve the bounding objects -> regarding improving the bounding objects would be simplifying them?)

`@Luiz Felipe` yes, makeign sure to use only basic geometries and avoiding thin geometries.


> stupide question: why does a simple script like this one

> 

> In [1]: from controller import Supervisor as S                                                         

> In [2]: s = S()                         

> In [3]: while True: 

>    ...:     s.step(1000) 

>    ...:                                           

> Uses a lot of GPU?                                                        

> 

> that script does nothing apart calling step() every second . GPU uses goes to 0 if not running the loop

`@oroulet` because the step is makeing Webots run and therefore perform rendering, it is probably not your controller, but Webots that is using this GPU.

##### oroulet 07/13/2020 08:26:54
yes it is webots. OK if you says it is normal . We trust you ;-). although when nothing happens I would have expected some optimization

##### David Mansolino [Cyberbotics] 07/13/2020 08:28:12
A rendering is performs in any case at each step, but you can reduce this from the `Viewpoint.FPS` field ([https://cyberbotics.com/doc/reference/worldinfo](https://cyberbotics.com/doc/reference/worldinfo)) or usign the fast mode.

##### oroulet 07/13/2020 08:28:13
also ctrl-c on that loop kills the interpreter.. .. I am not sure this is correct behaviour... Although this a common issue with C wrappers...


> A rendering is performs in any case at each step, but you can reduce this from the `Viewpoint.FPS` field ([https://cyberbotics.com/doc/reference/worldinfo](https://cyberbotics.com/doc/reference/worldinfo)) or usign the fast mode.

`@David Mansolino` OK I will play with that. Thanks

##### David Mansolino [Cyberbotics] 07/13/2020 08:30:09
You're welcome

##### Machini 07/13/2020 13:26:39
Starting >>> webots\_ros2\_desktop

Traceback (most recent call last):s2\_desktop - 2.7s]

  File "/usr/lib/python3.6/urllib/request.py", line 1325, in do\_open

    encode\_chunked=req.has\_header('Transfer-encoding'))

  File "/usr/lib/python3.6/http/client.py", line 1264, in request

    self.\_send\_request(method, url, body, headers, encode\_chunked)

  File "/usr/lib/python3.6/http/client.py", line 1310, in \_send\_request

    self.endheaders(body, encode\_chunked=encode\_chunked)

  File "/usr/lib/python3.6/http/client.py", line 1259, in endheaders

    self.\_send\_output(message\_body, encode\_chunked=encode\_chunked)

  File "/usr/lib/python3.6/http/client.py", line 1038, in \_send\_output

    self.send(msg)

  File "/usr/lib/python3.6/http/client.py", line 976, in send

    self.connect()

  File "/usr/lib/python3.6/http/client.py", line 1417, in connect

    super().connect()

  File "/usr/lib/python3.6/http/client.py", line 948, in connect

    (self.host,self.port), self.timeout, self.source\_address)

  File "/usr/lib/python3.6/socket.py", line 724, in create\_connection

    raise err

  File "/usr/lib/python3.6/socket.py", line 713, in create\_connection

    sock.connect(sa)

ConnectionRefusedError: [Errno 111] Connection refused


build  the webots\_ros2 package from sources this happened

##### David Mansolino [Cyberbotics] 07/13/2020 13:31:54
Do you have internet access from where you build the package? It seems the package is having issue downloadign Webots

##### Machini 07/13/2020 13:33:29
I've build the Webots from .deb, should I uninstall it and build Webots by the webots\_ros2 package?

##### David Mansolino [Cyberbotics] 07/13/2020 13:42:05
Ok, in that case, is the `WEBOTS_HOME`  environment variable set?

##### Clara Cardoso Ferreira 07/13/2020 14:53:41
Im trying to use the supervisor example on the documentation and for this line:

  WbNodeRef robot\_node = wb\_supervisor\_node\_get\_from\_def("Sojourner");

  WbFieldRef trans\_field = wb\_supervisor\_node\_get\_field(robot\_node, "translation");



Im getting this error: [supervisorExample] Error: wb\_supervisor\_node\_get\_field() called with NULL or invalid 'node' argument.



Would you please help me understand how to fix it?

##### Stefania Pedrazzi [Cyberbotics] 07/13/2020 14:55:00
It seems that no node with DEF name "Sojourner" is found. Are you sure that such a node exists?

##### Clara Cardoso Ferreira 07/13/2020 14:55:35

%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/732248871190790164/unknown.png)
%end


yes, thanks for the prompt response

##### Stefania Pedrazzi [Cyberbotics] 07/13/2020 14:56:08
You did not set the DEF name. "Sojourner" is the node name not the DEF name.


To set the DEF name you have to select the node and write the DEF name in the field editor


In this tutorial it is explained how to set the DEF name: [https://www.cyberbotics.com/doc/guide/tutorial-2-modification-of-the-environment#def-use-mechanism](https://www.cyberbotics.com/doc/guide/tutorial-2-modification-of-the-environment#def-use-mechanism)

##### Clara Cardoso Ferreira 07/13/2020 15:03:15
Nice! I think it worked because I m not getting the error anymore
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/732250798825930802/unknown.png)
%end


all I did was change the DEF name as you suggested


Even though I m not getting an error anymore, Im not sure if the simulation is functioning properly... Would you have any suggestions as to why the robot moves about 1 m but gets stuck? 

When I m not running the supervisor, the robot runs the course without problems

##### Stefania Pedrazzi [Cyberbotics] 07/13/2020 15:10:12
It depends on what you are doing with the Supervisor API, but if you do not modify the world then it should run exactly as before adding the Supervisor API instructions

##### Clara Cardoso Ferreira 07/13/2020 15:16:01
the simulation never runs the for loop🧐


[https://cyberbotics.com/doc/guide/supervisor-programming?tab-language=c](https://cyberbotics.com/doc/guide/supervisor-programming?tab-language=c)


Im curious as to how I can get the code I copied  from the supervisor documentation to run as expected.

##### Stefania Pedrazzi [Cyberbotics] 07/13/2020 15:26:35
The problem is probably the integration of the sample code with your already existing controller code.

You should inspect step by step what is the resulting controller doing, which are the differences from the previous controller and where does the issue come from.


If you copy one to one the sample controller and set the robot DEF name, then the sample controller works as expected.

##### Clara Cardoso Ferreira 07/13/2020 16:02:57
Yeah, that's my strategy. It seems like it ran... i just had to wait a minute for the code to finish. I still dont know why the robot gets stuck, but Ill play around with the code a little longer. Thanks

##### hp 07/13/2020 16:20:21
Hello, I was wondering if there was an easy way to translate the soccer demo (which is written in C) into python. I am trying manually and I am having a hard time using the Receiver correctly..


To specify, I would like to leave the Supervisor untouched (that means in C) and only translate the players to python. That means, I need to find the right 'decode' parameters so that the python receiver can understand the C emitter. At the moment, my code for this looks like this: message=receiver.getData().decode('utf-8')


But this gives me the following error: UnicodeDecodeError: 'utf-8' codec can't decode byte 0xd9 in position 8: invalid continuation byte

##### David Mansolino [Cyberbotics] 07/14/2020 05:53:31
Hi `@hp`, since the supervisor is sending a struct ([https://github.com/cyberbotics/webots/blob/master/projects/robots/softbank/nao/controllers/nao\_soccer\_supervisor/RoboCupGameControlData.h#L76](https://github.com/cyberbotics/webots/blob/master/projects/robots/softbank/nao/controllers/nao_soccer_supervisor/RoboCupGameControlData.h#L76)) I would try in Python to read it with the `struct` module ([https://docs.python.org/3/library/struct.html](https://docs.python.org/3/library/struct.html)).

##### hp 07/14/2020 06:55:33
Thanks a lot, that helped! This code works:


message=receiver.getData()

dataList=struct.unpack('20d',message)

##### David Mansolino [Cyberbotics] 07/14/2020 06:56:02
Perfect, thank you for the feedback.


`@Simon Steinmann` the nw community repository is now live at: [https://github.com/cyberbotics/community-projects](https://github.com/cyberbotics/community-projects)

##### oroulet 07/14/2020 08:40:20
> A rendering is performs in any case at each step, but you can reduce this from the `Viewpoint.FPS` field ([https://cyberbotics.com/doc/reference/worldinfo](https://cyberbotics.com/doc/reference/worldinfo)) or usign the fast mode.



Works of course very well . I thought rendinering was linked to cycle time but it is obviously not...

##### chopin1998 07/14/2020 09:11:16
hi, i'm a newbie on Webots, on my laptop, the font size of "Simulation View" is too small, but cannot find where to adjust



%figure
![image0.jpg](https://cdn.discordapp.com/attachments/565154703139405824/732524660423655534/image0.jpg)
%end

##### David Mansolino [Cyberbotics] 07/14/2020 09:12:52
Which OS are you using?

##### chopin1998 07/14/2020 09:12:58
Linux

##### David Mansolino [Cyberbotics] 07/14/2020 09:13:28
Which version? I am not sure to understand the problem, what is exactly too small?

##### chopin1998 07/14/2020 09:14:22
Ubuntu 20.04


14'' thinkpad, 2560 x 1440

##### David Mansolino [Cyberbotics] 07/14/2020 09:15:18
If you are using Ubuntu 20.04, this is normal, we are aware of the problem and are currently fixing it, you can follow this issue to get notification about the issue: [https://github.com/cyberbotics/webots/issues/1605](https://github.com/cyberbotics/webots/issues/1605)

##### chopin1998 07/14/2020 09:29:58
ic... i hope it can be fixed soon

##### David Mansolino [Cyberbotics] 07/14/2020 09:30:22
We will do our best to fix it sson 😉

##### Reza 07/14/2020 09:30:40
Hello `@David Mansolino`. I tried to ask some questions regarding some ImmersionProperties and you mentioned that your colleagues that were responsible for them are not available at that moment and I can reach you guys this week


is there any of your colleagues who has some hydrodynamical vision on ImmersionProperties of Salamander robot?

##### David Mansolino [Cyberbotics] 07/14/2020 09:33:19
Yes, maybe `@Olivier Michel` do you remember how the immersionProperties of the salamander were calibrated?

##### Olivier Michel [Cyberbotics] 07/14/2020 09:34:52
Hi, unfortunately, I don't remember how this was calibrated. It was done a long time ago by a colleague who is not working with us any more.

##### Reza 07/14/2020 09:37:21
OK thanks~


!


another question: is there anyone in Cyberbotics now who is actively working on Fluid mediums and robot interactions?


I mean Hydrodynamic interactions of course

##### Olivier Michel [Cyberbotics] 07/14/2020 09:57:46
No.


But we provide consulting services if you need expertise on this topic.

##### hp 07/14/2020 11:05:19
In my opinion, the soccer supervisor is missing a line of code: After


packet[3 * i + 1] = robot\_translation[i][2];  // robot i: Z

it needs the following line to update the rotations:


robot\_rotation[i] = wb\_supervisor\_field\_get\_sf\_rotation(robot\_rotation\_field[i]);

##### David Mansolino [Cyberbotics] 07/14/2020 11:08:34
Hi, feel free to open a pull request to fix this: 

[https://github.com/cyberbotics/webots](https://github.com/cyberbotics/webots)

Thank you!

##### estrada 07/14/2020 11:20:08
Hello. I am wrapping a fairly complicated robot model into a self-contained PROTO node.  The file I've inherited relies on several, custom-defined shape definitions. These are all currently defined in the Webots world file but not within the robot node itself. Is there a way to encapsulate these custom shapes into the `.PROTO` node, or would best practice be to somehow define each of these shapes as another self-contained unit (e.g. objects?) and reference those?

##### David Mansolino [Cyberbotics] 07/14/2020 11:22:04
Hi, it depends, if you will use these shapes only from the PROTO file (and only from a single one) it is simpler to add them in the PROTO file, if you need to use them from elsewhere of the PROTO it is better to define sub-PROTO nodes.

##### estrada 07/14/2020 11:31:21
Thanks `@David Mansolino` ! It is only references from the PROTO file . Is there an example or documentation on where such definitions should go? I've tried defining these before the robot definition but it didn't seem to work correctly. E.g. : 



```
PROTO MyRobot[
    ...
]
{
  DEF MY_SHAPE1 Shape { 
    ...
  } 

  Robot {
  ... USE MY_SHAPE1 
  }
} 
```



If this is the correct placement, I still haven't done the due diligence to debug the node. My first doubt was whether this was even close to best practice in Webots.

##### David Mansolino [Cyberbotics] 07/14/2020 11:32:50
here is how ti should looks like:

```
PROTO MyRobot[
    ...
]
{
  Robot {
    children [
      DEF MY_SHAPE1 Shape { 
        ...
      }
      ...
    ]
  }
}
```

##### estrada 07/14/2020 11:37:45
Ok, duly noted. I assume it's not possible to define shapes outside of other nodes? 



I notice the file I've received is initially defining these shapes in Transform nodes above the main Robot node. It would be useful to define these somewhere slightly separated from the main lines of the  robot model-- the volumes are custom points (I assume generated from CAD) that are horribly long.

##### David Mansolino [Cyberbotics] 07/14/2020 11:38:41
> Ok, duly noted. I assume it's not possible to define shapes outside of other nodes? 

> 

> I notice the file I've received is initially defining these shapes in Transform nodes above the main Robot node. It would be useful to define these somewhere slightly separated from the main lines of the  robot model-- the volumes are custom points (I assume generated from CAD) that are horribly long.

`@estrada` to define outside you have to created another PROTO file.

##### estrada 07/14/2020 11:40:45
Great, makes sense. Thank you for the quick response, `@David Mansolino` !

##### David Mansolino [Cyberbotics] 07/14/2020 11:40:55
You're welcome

##### Simon Steinmann [Moderator] 07/14/2020 11:42:02
created a PR for the community repo

##### David Mansolino [Cyberbotics] 07/14/2020 11:50:36
Thank you! I just reviewed it 🙂

##### Simon Steinmann [Moderator] 07/14/2020 12:46:17
having a multipurpose/universal trajectory follower controller would be a great addition to webots. It would allow easy integration with moveit. Seeing as most robotic arm manufacturers provide all the configs already, That would be a huge value add


I created something along those lines, but I am not free to share that code. However, the universal\_ros controller with its joint state publisher and trajectory follower are already quite close. Might be something you want to look into 🙂

##### David Mansolino [Cyberbotics] 07/14/2020 12:49:15
We have indeed improved it for our ROS2 version of the interface between ROS and Webots 😉

##### lojik 07/14/2020 13:07:58
Hello everyone,



Question about physics node. In the case of a robotic arm where each segment has a physics node with a specified mass. What will be the effect of specifying the mass of the robot node?



1. The overall mass of the robot will be the one specified in the robot node?

2. The overall mass of the robot will be the sum of all the different mass?

3. The mass affect only objects specified inside boundingObjects node?



Thank you and I hope that I am understandable enough. I did not find the answer in the documentation.

##### David Mansolino [Cyberbotics] 07/14/2020 13:08:41
Hi `@lojik`, 2 and 3.

##### lojik 07/14/2020 13:13:35
Makes sense, thank you 👍


And to specify physics and boundingObject, it is better to specify them for each solid separately or having one specification for the overall robot (especially for bounding object part)?

##### David Mansolino [Cyberbotics] 07/14/2020 13:30:01
For each individual part you should specify it.

##### lojik 07/14/2020 13:35:47
Perfect, thank you, you saved my day to modify only some parts of the model I work on.

##### David Mansolino [Cyberbotics] 07/14/2020 13:35:58
You're welcome

##### hp 07/14/2020 17:32:31
> Hi, feel free to open a pull request to fix this: 

> [https://github.com/cyberbotics/webots](https://github.com/cyberbotics/webots)

> Thank you!

`@David Mansolino` I'm sorry: I have never used github before and I am afraid of breaking something. Could you give me some more details on how to open this pull request?

##### 汉堡恶霸 07/15/2020 02:27:07
Brain box. I work in Linux with C language. I want to know how API functions work. For example,wb\_radar\_get\_number\_of\_targets(WbDeviceTag tag), how can I find its implementation code, that is, its. C code

##### David Mansolino [Cyberbotics] 07/15/2020 05:16:00
HI `@汉堡恶霸`, I would first recommend to follow the Webots tutorials, in particular the one about controllers:

[https://cyberbotics.com/doc/guide/tutorial-4-more-about-controllers](https://cyberbotics.com/doc/guide/tutorial-4-more-about-controllers)

Then you will find the description of the radar C API here:

[https://cyberbotics.com/doc/reference/radar#radar-functions](https://cyberbotics.com/doc/reference/radar#radar-functions)

Finally, you can find the implementation of the radar C API here:

[https://github.com/cyberbotics/webots/blob/master/src/lib/Controller/api/radar.c](https://github.com/cyberbotics/webots/blob/master/src/lib/Controller/api/radar.c)

And the Webots side:

[https://github.com/cyberbotics/webots/blob/master/src/webots/nodes/WbRadar.cpp](https://github.com/cyberbotics/webots/blob/master/src/webots/nodes/WbRadar.cpp)


> `@David Mansolino` I'm sorry: I have never used github before and I am afraid of breaking something. Could you give me some more details on how to open this pull request?

`@hp` yes sure, if you are not familiar with git/Github, the simplest thing is to use the built-in editor (you need to create a Github account): [https://github.com/cyberbotics/webots/edit/master/projects/robots/softbank/nao/controllers/nao\_soccer\_supervisor/nao\_soccer\_supervisor.c](https://github.com/cyberbotics/webots/edit/master/projects/robots/softbank/nao/controllers/nao_soccer_supervisor/nao_soccer_supervisor.c)

Don't worry, the repository is protected, there is now way you break something without a review from one of the maintainers.

##### 汉堡恶霸 07/15/2020 07:54:19
thank you for your help

##### David Mansolino [Cyberbotics] 07/15/2020 07:54:39
You're welcome

##### Reza 07/15/2020 10:10:22
Hello all, one question: can we have a solid node with two bounding objects?


if not, can we define two solid nodes and merge their physics?

##### David Mansolino [Cyberbotics] 07/15/2020 10:10:57
[https://cyberbotics.com/doc/guide/tutorial-5-compound-solid-and-physics-attributes](https://cyberbotics.com/doc/guide/tutorial-5-compound-solid-and-physics-attributes)

##### hp 07/15/2020 15:49:59
> `@hp` yes sure, if you are not familiar with git/Github, the simplest thing is to use the built-in editor (you need to create a Github account): [https://github.com/cyberbotics/webots/edit/master/projects/robots/softbank/nao/controllers/nao\_soccer\_supervisor/nao\_soccer\_supervisor.c](https://github.com/cyberbotics/webots/edit/master/projects/robots/softbank/nao/controllers/nao_soccer_supervisor/nao_soccer_supervisor.c)

> Don't worry, the repository is protected, there is now way you break something without a review from one of the maintainers.

`@David Mansolino` Ok, I did it like that. (But I was actually talking about the demo soccer simulation: webots/projects/samples/demos/controllers/soccer\_referee\_supervisor )

##### David Mansolino [Cyberbotics] 07/16/2020 05:42:58
Oh ok sorry, then the links is: [https://github.com/cyberbotics/webots/edit/master/projects/samples/demos/controllers/soccer\_referee\_supervisor/soccer\_referee\_supervisor.c](https://github.com/cyberbotics/webots/edit/master/projects/samples/demos/controllers/soccer_referee_supervisor/soccer_referee_supervisor.c)

##### Luiz Felipe 07/16/2020 06:08:55
`@David Mansolino` I thought that I solved the instability in my simulation, but explosions after collisions still happen. I find that is probably caused by CFM and ERP values, but that is really hard to debug and solve it. Crashes are really critical for my application that is going to run for a long time or in real time. I am in doubt how to tune the CFM, soft CFM values, because in the "My Robot/Simulation Explodes, What should I do?" section it tells me to increase the CFM:



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/733203567275540611/unknown.png)
%end


About the softCFM then, it tells me to reduce the value:



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/733203696501915688/unknown.png)
%end

##### David Mansolino [Cyberbotics] 07/16/2020 06:12:14
About the CFM, increasing the CFM will decrease the constraints on the physics. Therefore, increasing the CFM will decrease the system precision but increase its staibility.

##### Luiz Felipe 07/16/2020 06:23:14
Yups. However, the softCFM in the contact properties should be reduced? As stated in "My Robot Sinks into the Ground, How to Remove this effect"... or this just applies to really heavy robots?

##### David Mansolino [Cyberbotics] 07/16/2020 06:53:39
This is indeed for heavy robots

##### Luiz Felipe 07/16/2020 10:34:57
> This is indeed for heavy robots

`@David Mansolino` To reduce this value would not make the simulation more unstable also?

##### David Mansolino [Cyberbotics] 07/16/2020 10:35:41
Yes:

> Therefore, increasing the CFM will decrease the system precision but increase its staibility.

##### Luiz Felipe 07/16/2020 10:39:41
I think maybe I am misunderstanding the softCFM value. Increasing the CFM I understand.



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/733271698417123378/unknown.png)
%end


And then

##### David Mansolino [Cyberbotics] 07/16/2020 10:40:06
Yes, to increase the stability you should increase the CFM

##### Luiz Felipe 07/16/2020 10:40:17

%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/733271785751183440/unknown.png)
%end


So in this part of the documentation should also be "Increase"?

##### David Mansolino [Cyberbotics] 07/16/2020 10:45:50
Can you point to which documentation you are taking these sentences?

##### Luiz Felipe 07/16/2020 10:45:57
[https://cyberbotics.com/doc/guide/modeling](https://cyberbotics.com/doc/guide/modeling)


"My robot/simulation explodes" and "My robot sinks to the ground"

##### David Mansolino [Cyberbotics] 07/16/2020 10:48:03
The doces seems correct, increasign the CFM will make the contact more spingy and therefore improve the stability, however the robot make therefore sink a bit in the floor.

##### Luiz Felipe 07/16/2020 10:49:02
Ah ok... now i got it... the robot sinks into the ground but it is not a crash


i tought it also resulted in a crash this situation

##### David Mansolino [Cyberbotics] 07/16/2020 10:50:00
Exactly, allowing the robot to sink a bit in the floor make the simulation stabler.

##### Luiz Felipe 07/16/2020 10:52:19
"The explosion is usually caused by inappropriate values passed to the physics engine (ODE)." Any tip on how to find which values are the inappropriate ones leading to crashes?

##### David Mansolino [Cyberbotics] 07/16/2020 10:56:15
I sorry, but this difficult and requires some test and trial or expertise at it depends a lot on the simulations.

But if you want Cyberbotics provides professional consulting ([https://www.cyberbotics.com/#plans](https://www.cyberbotics.com/#plans)) and can help you.

##### Sanket Khadse 07/16/2020 16:23:28
I wanted to run my controller code script (python) outside Webots. But obviously it gives ImportError for controller module. How should I proceed??!

##### Olivier Michel [Cyberbotics] 07/16/2020 16:27:37
See [https://cyberbotics.com/doc/guide/running-extern-robot-controllers](https://cyberbotics.com/doc/guide/running-extern-robot-controllers)


Did you set `LD_LIBRARY_PATH` and `PYTHONPATH` environment variables appropriately? Can you print them?

##### (,-*-) 07/17/2020 09:24:24
Hi all,

I have a question regarding using ROS2 with webots. Is creating webots node in ROS same procedure as creating normal ROS2 node?

##### David Mansolino [Cyberbotics] 07/17/2020 09:25:29
Yes sure, the Webots nodes are regular ros nodes.

##### (,-*-) 07/17/2020 09:28:36
Okay, thank, wasn't sure about it because there was no information about it

##### Sanket Khadse 07/17/2020 10:27:19
> Did you set `LD_LIBRARY_PATH` and `PYTHONPATH` environment variables appropriately? Can you print them?

`@Olivier Michel` Thanks for reminding. I did set them before, but restarted my system after that. Sorry for your trouble. 😉

##### (,-*-) 07/17/2020 12:23:43
I am trying to make my own ros controller for robot I've made in webots, so I am looking into the universal robots package on how it wokrks there and I can't figure out what on line         super().\_\_init\_\_('ur\_driver', args=args)  is "ur\_driver" and where to find it.  Any sugestions?





class ActionServerNode(WebotsNode):



    def \_\_init\_\_(self, args):

        super().\_\_init\_\_('ur\_driver', args=args)

        prefix = self.get\_parameter\_or('prefix',

                                       Parameter('prefix', Parameter.Type.STRING, '')).value

        self.jointStatePublisher = JointStatePublisher(self.robot, prefix, self)

        self.trajectoryFollower = TrajectoryFollower(self.robot, self, jointPrefix=prefix)

        self.jointStateTimer = self.create\_timer(0.001 * self.timestep, self.joint\_state\_callback)



    def joint\_state\_callback(self):

        # update joint state and trajectory follower

        self.jointStatePublisher.publish()

##### David Mansolino [Cyberbotics] 07/17/2020 12:24:37
Are you refeerign to ROS1 or ROS2 ?

##### (,-*-) 07/17/2020 12:24:42
ROS2

##### David Mansolino [Cyberbotics] 07/17/2020 12:26:42
Ok, in that case, the `ActionServerNode` class inherits from the `WebotsNode` one, which inherits from the `Node` one from rclpy.node.

As described in the documentation of rclpy ([http://docs.ros2.org/foxy/api/rclpy/api/node.html](http://docs.ros2.org/foxy/api/rclpy/api/node.html)) the first argument is the name of the node.

##### (,-*-) 07/17/2020 12:30:20
and its custom name which i can refer to later in code? I can put there whatever I want there?

##### David Mansolino [Cyberbotics] 07/17/2020 12:36:54
Yes, you are free to set whatever name for this node.

##### (,-*-) 07/17/2020 13:02:17
ever happened to you after colcon build --packages-select you could no more source setup.bash in your workspace directory<

##### David Mansolino [Cyberbotics] 07/17/2020 13:02:35
Not to me.

##### (,-*-) 07/17/2020 15:01:46
Was sending action to robot state and goal was rejected. I don't have a single clue where could be aproblem. I have valid joint\_names params


Hi, is it mandatory to have URDF file of robot for simulation in webots?

##### Darko Lukić [Cyberbotics] 07/18/2020 13:20:28
> Hi, is it mandatory to have URDF file of robot for simulation in webots?

`@(,-*-)` No. In context of `webots_ros2` URDF is used to visualize a robot in RViz

##### (,-*-) 07/19/2020 15:19:16
Thank you for clarification, `@Darko Lukić`


May I ask once again a question? 

I am trying to connect PyCharm with webots, I think I did everything in those papers (using windown rn)

[https://www.cyberbotics.com/doc/guide/running-extern-robot-controllers?tab-os=linux&tab-language=python](https://www.cyberbotics.com/doc/guide/running-extern-robot-controllers?tab-os=linux&tab-language=python) ; [https://cyberbotics.com/doc/guide/using-your-ide?tab-language=python#pycharm](https://cyberbotics.com/doc/guide/using-your-ide?tab-language=python#pycharm)



I have whole PATH in environment variables in PyCharm configuration my code is something like this:

*imports* 



print(sys.version)

--blah blah--

while robot.step(timestep) != -1:

   --- blah blah ---



It gives me error right away 

 File "C:/DP\_Webots/controllers/contr/contr.py", line 70

    while robot.step(timestep) != -1:

        ^

SyntaxError: invalid syntax



And not even printing out that sys.version ; am i missing something very important?

##### Simon Steinmann [Moderator] 07/19/2020 15:27:01
can you post your code?

##### (,-*-) 07/19/2020 15:28:02
[https://pastebin.com/gpHj5Qkd](https://pastebin.com/gpHj5Qkd) ; it is very simple code


I am using another libraries - like openpose ; every .dll for running openpose is included in path

##### Simon Steinmann [Moderator] 07/19/2020 15:29:54
try 

while (robot.step(timestep) != -1):


syntax error is werid

##### (,-*-) 07/19/2020 15:31:16
both what you typed and also : 

    while (robot.step(timestep)) != (-1):

        ^

SyntaxError: invalid syntax


didnt work

##### Simon Steinmann [Moderator] 07/19/2020 15:32:07
just as a sanity check, try:

while True:

     robot.step(timestep)

##### (,-*-) 07/19/2020 15:33:42
while True:

        ^

SyntaxError: invalid syntax ; 😆 💯


Kind of insanity check

##### Simon Steinmann [Moderator] 07/19/2020 15:33:52
ehhhm


ohh, lets look at the code before


just do something like print("test") before the while loop


perhaps the code above is not correct, so any line that comes there will throw a syntax error


I think I found your mistake


in line 35 you start a 'try:'


but you never have an 'except:'

##### (,-*-) 07/19/2020 15:37:56
that python37 is imported ; shouldnt I make it package to be importable?
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/734433854466555984/unknown.png)
%end

##### Simon Steinmann [Moderator] 07/19/2020 15:37:57
that is probably the cause of the syntax error


No idea how pycharm and windows works.


but try fixing the syntax error i mentioined

##### (,-*-) 07/19/2020 15:40:52
yeah, that was rough syntax error 😄 shame on me

##### chenpixx 07/19/2020 16:22:08
No size field

##### (,-*-) 07/19/2020 17:08:42
Can I bind Camera overlay to physical camera?

##### David Mansolino [Cyberbotics] 07/20/2020 05:44:37
> Can I bind Camera overlay to physical camera?

`@(,-*-)` Yes, but you need to us a display for this.


and the `wb_display_attach_camera` function ([https://cyberbotics.com/doc/reference/display#wb\_display\_attach\_camera](https://cyberbotics.com/doc/reference/display#wb_display_attach_camera))


> Can we change the size of wooden chair ?

`@chenpixx` you can put it in the children field of a Transform node.

##### Laojiang 07/20/2020 08:19:51
"WARNING: "python.exe" was not found.  " How can I solve it？

##### (,-*-) 07/20/2020 08:20:18
do you have python in your path?

##### Laojiang 07/20/2020 08:21:57
I don't know how to check it , but I have anaconda3 in my  computer

##### (,-*-) 07/20/2020 08:22:14
are you using win on linux

##### Laojiang 07/20/2020 08:23:01
My system is window10


I don't use linux.

##### (,-*-) 07/20/2020 08:24:20
press win + r and type SystemPropertiesAdvanced, then press Edit environment variables or so - check system variables and search for Path

##### David Mansolino [Cyberbotics] 07/20/2020 08:24:30
> I don't know how to check it , but I have anaconda3 in my  computer

`@Laojiang` unfortunately, the Webots Python API supports only the standard version of Python by default. However, you can recompile the Python API for another version of Python: [https://cyberbotics.com/doc/guide/using-python#use-an-alternative-python-version](https://cyberbotics.com/doc/guide/using-python#use-an-alternative-python-version)

##### Laojiang 07/20/2020 09:00:48
I solved it by download a new python ,thanks

##### David Mansolino [Cyberbotics] 07/20/2020 09:01:07
You're welcome.

##### chenpixx 07/20/2020 09:05:29
> `@chenpixx` you can put it in the children field of a Transform node.

`@David Mansolino`  thanks it works

##### David Mansolino [Cyberbotics] 07/20/2020 09:05:38
You're welcome


[https://cyberbotics.com/doc/guide/tutorial-3-appearance](https://cyberbotics.com/doc/guide/tutorial-3-appearance)

##### Laojiang 07/20/2020 09:12:59
When I click "reset simulation"button , my webots will turn off.  How can I solve it?

##### Olivier Michel [Cyberbotics] 07/20/2020 09:13:58
That looks like a crash, isn't it? Could you try to simplify your world file until it doesn't crash any more? This way, you will understand what is causing the crash.

##### Laojiang 07/20/2020 09:20:56
When I cut my "robot" node, it become normal，but I can't without the node.


So there isn't a solution about it?

##### Olivier Michel [Cyberbotics] 07/20/2020 09:51:02
`@Laojiang`: not sure to understand what you mean.


`@chenpixx`: yes, you need a 3D model of it.

##### (,-*-) 07/20/2020 09:52:48
`@chenpixx` if you have CAD model off that box, you can extract it to webot file using this [https://github.com/cyberbotics/blender-webots-exporter](https://github.com/cyberbotics/blender-webots-exporter)

##### Simon Steinmann [Moderator] 07/20/2020 10:01:16
How can I define the initial postition of joints in a proto file?


I tried this, but the initial position is still 0
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/734711558109659196/unknown.png)
%end


I would like to have the default position when adding the robot, to be its home position


because all joints at 0, is an invalid state


looks like that
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/734712039397785621/unknown.png)
%end

##### David Mansolino [Cyberbotics] 07/20/2020 10:21:35
What you did should work, let me try

##### Simon Steinmann [Moderator] 07/20/2020 10:22:03
this is the proto in question
> **Attachment**: [J2n6s300.proto](https://cdn.discordapp.com/attachments/565154703139405824/734716747684511764/J2n6s300.proto)


it has also a issue with the "j2n6s300\_end\_effector" not having a inertia matrix. As it is only a virtual link I think. Also the hand shape doesn't cast a shadow

##### David Mansolino [Cyberbotics] 07/20/2020 10:30:54
I just tested, you are right, this is working when editing the rotation field from the scene-tree because the rotation of the endpoint Solid is automatically updated, but not when manually editing the PROTO file (in that case you need to manually rotate the Solid).

##### Simon Steinmann [Moderator] 07/20/2020 10:31:43
But that would alter what a pose with specific joint values would look like right?

##### David Mansolino [Cyberbotics] 07/20/2020 10:32:30
No if you change both the position of the joint and rotation of the Solid, then the matching will remains untouched

##### Simon Steinmann [Moderator] 07/20/2020 10:33:06
but the position of the motors is 0, even when I specify otherwise

##### David Mansolino [Cyberbotics] 07/20/2020 10:33:24
Where do you see this?

##### Simon Steinmann [Moderator] 07/20/2020 10:34:10

%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/734719798767779860/unknown.png)
%end

##### David Mansolino [Cyberbotics] 07/20/2020 10:35:09
This indicates the latest target position, but not the actual curent position of the joint, for this you need to look at the position sensors.

##### Simon Steinmann [Moderator] 07/20/2020 10:36:22
they show 0 as well. but they probably updated to the target values of 0


but the question is, why is the target position 0?

##### David Mansolino [Cyberbotics] 07/20/2020 10:37:11
Because this is the default target position since you did not call wb\_motor\_set\_position.

##### Simon Steinmann [Moderator] 07/20/2020 10:38:30
this only happens with the void controller?

##### David Mansolino [Cyberbotics] 07/20/2020 10:41:15
This happens with any controller not calling the `wb_motor_set_position` function.

##### Simon Steinmann [Moderator] 07/20/2020 10:45:12
So if I dont call the function at all? my robot will always collapse? Going to 0


would be nice if it would go to the position defined in the proto file, which is 0, if not explicitly specified

##### David Mansolino [Cyberbotics] 07/20/2020 10:46:32
No you should not have to call it, what I am trying to say is that you should not rely on the value display in the 'motor' tab of the robot window to know the current angle, but rather to the position sensor one.

##### Simon Steinmann [Moderator] 07/20/2020 10:49:54
hmm okay, I'll try to get behind that part later. For now, I wanna figure out the correct proto settings though



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/734723866232094830/unknown.png)
%end


so here I add the position of the hinge joint to the rotation of the endPoint Solid? (marked)


I guess in this case I will have to define the axis too

##### David Mansolino [Cyberbotics] 07/20/2020 10:52:46
Yes this is the rotation you have to change (and define the axis, otherwise the rotation will have no effect).

##### Simon Steinmann [Moderator] 07/20/2020 10:58:53
oh god, this model is truly ugly. it needs rotations around several axis.


I think I give up. Getting that starting position to work is too much of a headache. I can still create a PR for the proto. It seems correct and can probably be worked with, if one disables SelfCollision (added a field for that), moves it to the correct pose and saves the world file


but it also has the issue of no shadow for the hand (converting to base nodes, the shapes seem to be correct and CastShadow field is set to TRUE)
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/734727439296626758/unknown.png)
%end

##### Stefania Pedrazzi [Cyberbotics] 07/20/2020 11:04:55
a simpler solution than computing the new `endPoint` translation and rotation manually is to convert the PROTO to base nodes and change the `position` field so that the endPoint will be automatically updated


then you simply have to copy the `endPoint` Solid translation and rotation values in your PROTO file

##### Simon Steinmann [Moderator] 07/20/2020 11:06:14
okay, I'll give it a shot... last try though 😄


uh I think that is the answer

##### Stefania Pedrazzi [Cyberbotics] 07/20/2020 11:20:13
about the shadows issue, is the object semi-transparent? because this could be a reason why shadows cannot be displayed

##### Simon Steinmann [Moderator] 07/20/2020 11:20:32
transparency is set to 0


this is the shape in question, colored it red as a check, no changes otherwise
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/734732139022647376/unknown.png)
%end

##### Stefania Pedrazzi [Cyberbotics] 07/20/2020 11:38:36
For this particular IndexedFaceSet the shadows are not displayed because it has too many vertices. If you want to get the shadow, then you should simplify the mesh

##### Simon Steinmann [Moderator] 07/20/2020 11:39:19
ah okay... well I can live with it 😄


other question, there is a empty link at the end of the arm
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/734736519528710264/unknown.png)
%end


webots throws an error that the solid doesnt have an inertia matrix


as it is just a virtual link, how should I deal with it? convert it to a transform?

##### David Mansolino [Cyberbotics] 07/20/2020 11:42:42
Yes, or a Solid without bounding object or physics. But probably you even don't need it?

##### Simon Steinmann [Moderator] 07/20/2020 11:43:19
most likely not, but someone converting their project from gazebo to webots might

##### David Mansolino [Cyberbotics] 07/20/2020 11:43:44
You right, in that case empty solid or transform should do the job

##### Simon Steinmann [Moderator] 07/20/2020 11:44:08
so I just delete the physics part of it?

##### David Mansolino [Cyberbotics] 07/20/2020 11:44:26
and boudning object

##### Simon Steinmann [Moderator] 07/20/2020 11:44:31
this is it atm
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/734737502807654420/unknown.png)
%end

##### David Mansolino [Cyberbotics] 07/20/2020 11:44:42
ok, then just the physics


But probabyl transform is simpler/cleaner

##### Simon Steinmann [Moderator] 07/20/2020 11:45:33
got rid of the error

##### David Mansolino [Cyberbotics] 07/20/2020 11:45:33
then you might connect the 'children' field to a proto parameter

##### Simon Steinmann [Moderator] 07/20/2020 11:47:26
like this? Left the solid in, but I would delete it then right?
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/734738238492901386/unknown.png)
%end

##### David Mansolino [Cyberbotics] 07/20/2020 11:48:44
yes, looks good

##### Simon Steinmann [Moderator] 07/20/2020 12:04:37
Final issue, the joints for the fingers rotate around the wrong axis. The screenshot also shows the urdf definition. One can see that the translation of the hingeJoint is correct. The rotation seems correct as well, as the in position = 0, the finger is placed correctly. However it does not rotate around its own z-axis like it should
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/734742559175475230/unknown.png)
%end


I'm guessing that anchor and axis of the Hingejoint has to be changed, but I have no clue on how to do that correctly.  Here I find the urdf way of doing it much more intuitive. Defining translation and rotation AND then the axis in that new frame

##### Laojiang 07/20/2020 12:08:15
How to slove the problem that click "reset simulation" webots shut down caused by the overly complex model?

##### Stefania Pedrazzi [Cyberbotics] 07/20/2020 12:15:01
`@Laojiang` did you try to simplify your model as much as possible but keeping the issue?

We can help you only if you share your model because we cannot reproduce it with the built-in models distributed in Webots.

I would suggest you to open an issue on the GitHub repo where you upload the project files and you describe your issue.: [https://github.com/cyberbotics/webots/issues/new/choose](https://github.com/cyberbotics/webots/issues/new/choose)

##### Simon Steinmann [Moderator] 07/20/2020 12:29:49
hmm I manually calculated the axis, and the values should be correct... but for some reason, the joint is rotating incorrectly

##### David Mansolino [Cyberbotics] 07/20/2020 12:31:01
> I'm guessing that anchor and axis of the Hingejoint has to be changed, but I have no clue on how to do that correctly.  Here I find the urdf way of doing it much more intuitive. Defining translation and rotation AND then the axis in that new frame

`@Simon Steinmann` this is probably related to: [https://github.com/cyberbotics/urdf2webots/issues/42](https://github.com/cyberbotics/urdf2webots/issues/42)

##### Simon Steinmann [Moderator] 07/20/2020 12:31:47
I installed the latest fixes for the converter, which fixed the issues for me


it's not that it rotates the wrong direction, It doesnt rotate on the correct axis at all


how can I tell webots to use the z-axis of the endpoint to use as the rotational axis for the hinge joint?
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/734758139206959144/unknown.png)
%end


okay I have found the issue


[https://www.andre-gaschler.com/rotationconverter/](https://www.andre-gaschler.com/rotationconverter/)


if you use this tool and enter the Euler angles from the urdf files you get this:
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/734761351729119252/unknown.png)
%end


as we are rotating around the z-axis, we multiply by [0 0 1] vector (vertical) and we get the last column as our hing joing axis


This is what webots does as well. This however gives us a wrong axis


now if we enter the axis angles, that webots calculated for the enpoint like so:
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/734761867838488677/unknown.png)
%end


We get this matrix. And entering the last column as our hingeJoint axis, finally gives the correct behavior
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/734762026898817084/unknown.png)
%end


webots seems to do something different with the Euler angles. If I convert the urdf euler angles to the axis angles, I get a different result. If I put these into webots, the finger is oriented wrongly. So webots seems to do that conversion correctly.


The strange thing is, this has only been an issue for these 3 fingers. The rest works fine. It might be worth to investigate though


I created a PR with the jaco2 proto. It works now, only thing is the missing shadow

##### David Mansolino [Cyberbotics] 07/20/2020 13:55:15
Perfect thank you, we will take a look as soon as we have the time.

##### John520 07/20/2020 21:08:10
Hi guys, I am having an issue with controlling the speed of the truck (using Truck.proto). In the practical test, our real vehicle needs to have continuous throttle values to reach and maintain a desired speed. In Webots simulations, we notice that the truck only needs a few throttle values and it will run forever. I wonder if I miss some settings on the road or the truck (for example, tire-road friction). Please kindly advise me. Thank you.

##### David Mansolino [Cyberbotics] 07/21/2020 05:59:30
Hi `@John520`, the throttle of the car was unfortunately not calibrated agains a real vehicle.


For this, the `engineFunctionCoefficients` and `gearRatio` fields of the truc should be calibrated ([https://cyberbotics.com/doc/automobile/car](https://cyberbotics.com/doc/automobile/car)).

##### Olivier Michel [Cyberbotics] 07/21/2020 11:13:20
You can use a Group node or a Transform node to put them together.

##### John520 07/21/2020 14:19:35
Thank you `@David Mansolino`  for your answer. It is really helpful for me.

##### Laojiang 07/21/2020 14:19:38
I have enabled the camera and camera.recognitionEnable(), but it doesn't recognition any solid. Can you teach me about that?

##### John520 07/21/2020 14:20:28
I have a question about the gear ratio.
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/735139136419266610/unknown.png)
%end


For example, the "16", does it mean that if the engine RPM is 1600, and the wheel RPM is 100?

##### David Mansolino [Cyberbotics] 07/21/2020 14:21:54
Yes exactly!


> I have enabled the camera and camera.recognitionEnable(), but it doesn't recognition any solid. Can you teach me about that?

`@Laojiang` did you set the `recognitionColor` field of your Solid nodes? and model field?

##### John520 07/21/2020 14:24:36
Thanks again `@David Mansolino` !

##### David Mansolino [Cyberbotics] 07/21/2020 14:24:50
You're welcome

##### Laojiang 07/21/2020 14:24:55
OK, I didn't set it of solid nodes. thank you!


How can I use 'CameraRecognitionObject' suitably?   I used it like that 'from controller import Robot,CameraRecognitionObject', 'id=CameraRecognitionObject.get\_id()', but it has error 'TypeError: get\_id() missing 1 required positional argument: 'self''. Can you help me about that?

##### Olivier Michel [Cyberbotics] 07/21/2020 15:29:17
Yes, you should get the CameraRecognitionObject from a Camera device.


Using the getRecognitionObjects() method.


See [https://www.cyberbotics.com/doc/reference/camera?tab-language=python#wb\_camera\_recognition\_get\_objects](https://www.cyberbotics.com/doc/reference/camera?tab-language=python#wb_camera_recognition_get_objects)

##### Laojiang 07/21/2020 15:36:17
I can't use it from camera 'AttributeError: 'Camera' object has no attribute 'CameraRecognitionObject' , and I have use 'camera.getRecognitionNumberOfObjects()' to recognite objects successfully. Then what should I do next?


And the camera node doesn't have 'CameraRecognitionObject' node.

##### watchdogs132 07/21/2020 16:59:13
Hello , I need some help in understanding the processes involved in simulating my robot . I'm a complete newbie to Webots , so please go easy on me . So I've created my bot on Solidworks , then converted it to .vrml97 format to import it to  Webots .  Now When I went through the website , I saw that one can simulate sensors like Kinect , Gyroscope and Accelerometer and also motors on Webots. This is the  part where I am having trouble with .  My bot is a stair climber which uses the above mentioned sensors and of course motors  to climb. How can I incorporate those sensors and motors into my robot in order to simulate the process? . If possible , please provide suitable links which cover this part in detail. Thanks !

##### Zerfallskonstante 07/21/2020 17:59:05
Is there a way to change the shortcut for resetting the simulation? The shortcut is Ctrl + Shift + F, which does not work because it is also the default shortcut for fullscreen mode.

##### chenpixx 07/21/2020 22:40:44
I have multiple solids. I will do a single solid box (for wbo) by using all of them.

How can we combine them. Which node should I use to combine? I used robot node and moved into children. Is it correct?

##### Laojiang 07/22/2020 00:09:53
I can't use it from camera 'AttributeError: 'Camera' object has no attribute 'CameraRecognitionObject' , and I have use 'camera.getRecognitionNumberOfObjects()' to recognite objects successfully. Then what should I do next?

And the camera node doesn't have 'CameraRecognitionObject' node.

##### Stefania Pedrazzi [Cyberbotics] 07/22/2020 05:59:21
`@chenpixx` Yes, it is correct to put all of them in the children field of a parent container node. But if your solid box is not a robot but just an object, then it is better to use:

* `Solid` node for dynamic objects (with physics properties)

* `Transform` node for static objects (pure graphical objects)


`@Zerfallskonstante` unfortunately it is not possible to change the shortcuts from the UI. But we already fixed this and in the latest version of Webots and changed the shortcut.


Which version are you using?


Actually it is just the tooltip that is wrong. The shortcut is CTRL+SHIFT+T (T instead of F)

##### Olivier Michel [Cyberbotics] 07/22/2020 06:09:14
`@Laojiang`: now that you have the list of CameraRecognitionObject, you can use the specific methods of this object, e.g., get\_id(), get\_position(), etc., see details here: [https://cyberbotics.com/doc/reference/camera?tab-language=python#wb\_camera\_recognition\_get\_objects](https://cyberbotics.com/doc/reference/camera?tab-language=python#wb_camera_recognition_get_objects)

##### Stefania Pedrazzi [Cyberbotics] 07/22/2020 06:13:24
`@watchdogs132` here is a tutorial explaining how to build a robot, add sensors and actuators and write the controller program:

[https://www.cyberbotics.com/doc/guide/tutorial-6-4-wheels-robot](https://www.cyberbotics.com/doc/guide/tutorial-6-4-wheels-robot)

##### Laojiang 07/22/2020 08:03:38
Does the camera have to be under the robot node?

##### (,-*-) 07/22/2020 08:06:50
`@Laojiang` Yes it does

##### Laojiang 07/22/2020 08:07:12
ok ,thank you!

##### (,-*-) 07/22/2020 08:38:42
Are there any simulation data from controllers stored somewhere?


When I run my program, it reserves by default (unchangably) almost 3GB of GPU memory. So maybe there is problem it runs out of memory after this time if some from webots are stored into it

##### Olivier Michel [Cyberbotics] 07/22/2020 08:46:04
Yes, it could be a problem. You should compare the footprint of your controller program with a simple python controller program to better understand the problem.

##### (,-*-) 07/22/2020 08:46:39
In task manager it doesnt show any increase of memory


That big is jump is start of webots with program.
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/735418458434437154/unknown.png)
%end

##### Olivier Michel [Cyberbotics] 07/22/2020 08:51:56
This is normal as Webots uses GPU resources (textures, vertices, etc.).

##### (,-*-) 07/22/2020 08:53:55
it does the same when I start the main program without webots


Reserves memory to 2,7GB of 3GB max - with or without webots

##### Olivier Michel [Cyberbotics] 07/22/2020 08:56:11
Then, the problem is probably in your program...

##### (,-*-) 07/22/2020 08:58:14
Well, if there would be problem in my program, why would it run for 2,176s exactly every time and then simulation stops? Does not make sense to me 😦

##### Laojiang 07/22/2020 09:06:41
I have two robot nodes, and both of them have camera node. However, I can just use only one camera.The other has warning ""camera1" device not found".How can I solve it?

##### Stefania Pedrazzi [Cyberbotics] 07/22/2020 09:08:43
`@Laojiang` from a robot controller you cannot access and control devices from another robot.

##### Laojiang 07/22/2020 09:11:11
> `@Laojiang` from a robot controller you cannot access and control devices from another robot.

`@Stefania Pedrazzi` That means I can't add more than one robot?

##### Stefania Pedrazzi [Cyberbotics] 07/22/2020 09:12:02
Each robot runs its own instance of the controller program.


but you can run multiple robots and their controllers in a simulation

##### Laojiang 07/22/2020 09:13:48
OK , thank you.


And How can I make these controllers connect with each other?

##### Stefania Pedrazzi [Cyberbotics] 07/22/2020 09:17:00
You could use the Emitter and Receiver Webots nodes:

- Emitter: [https://www.cyberbotics.com/doc/reference/emitter](https://www.cyberbotics.com/doc/reference/emitter)

- Receiver: [https://www.cyberbotics.com/doc/reference/receiver](https://www.cyberbotics.com/doc/reference/receiver)

or any interprocess communication method([https://en.wikipedia.org/wiki/Inter-process\_communication](https://en.wikipedia.org/wiki/Inter-process_communication)).

##### watchdogs132 07/22/2020 09:18:25
> `@watchdogs132` here is a tutorial explaining how to build a robot, add sensors and actuators and write the controller program:

> [https://www.cyberbotics.com/doc/guide/tutorial-6-4-wheels-robot](https://www.cyberbotics.com/doc/guide/tutorial-6-4-wheels-robot)

`@Stefania Pedrazzi` That's a great link . But are there any tutorials available on how to simulate a custom made robot imported in vrml format ? . I have imported my robot , and it shows every node as transform . I tried converting one of the the nodes to say range finder but the display is black .I'm at an impasse .

##### Laojiang 07/22/2020 09:20:12
Can I set a variable that all of these controllers can Identify it?


Is there such a way?

##### Stefania Pedrazzi [Cyberbotics] 07/22/2020 09:21:05
`@watchdogs132` if you import from VRML format, then you have to adjust all the Transform nodes and convert them to the appropriate Robot, Solid, etc. and basically rebuild the robot structure manually keeping just the translation/rotation of parts and the meshes.

An alternative is to use this converter: [https://github.com/cyberbotics/blender-webots-exporter](https://github.com/cyberbotics/blender-webots-exporter)


You should import your model in blender instead of converting it to VRML and use the converter to generate directly the Webots model.


`@Laojiang` no there is no other way to set variables available on all the controllers.

If you don't want to use IP methods as I suggested before to shared data between the controllers ((note that it is quite easy to use the Emitter/Receiver method) and the variable is simply a string or int or simple data, you could set it for example in the `Robot.customData` field and read it in the other robot controller using the Supervisor API

##### (,-*-) 07/22/2020 09:28:02
> `@Stefania Pedrazzi` That's a great link . But are there any tutorials available on how to simulate a custom made robot imported in vrml format ? . I have imported my robot , and it shows every node as transform . I tried converting one of the the nodes to say range finder but the display is black .I'm at an impasse .

`@watchdogs132` 

I used that converter to import meshes and then I built my robot by adding one mesh after another. 

However, I need to do some little more work on it, as it sometimes gives me error that my mass of robot is set to 1 due to some error in proto file

##### Laojiang 07/22/2020 09:28:53
OK , I think I like easier way, thank you😆


I make two controller in one world, but It just run one controller when I click 'run'. And I have more than one robot node in this world. How can I run both of controllers at the same time?

##### Stefania Pedrazzi [Cyberbotics] 07/22/2020 09:57:28
The controllers are started automatically. You just have to make sure that the `Robot.controller` field points to the controller you want to run.

##### Laojiang 07/22/2020 10:00:14
OK,thank you

##### culurciello 07/22/2020 13:27:27
Hi Guys, I added a Pioneer3Gripper to a UR-5 robot and when I move the robot the gripper falls apart (see pic). What can I do to fix this? Also is there a simple 2-finger alternative gripper I can use with the UR robots? Thanks a lot for all your kind help~
%figure
![gripper_problem.jpg](https://cdn.discordapp.com/attachments/565154703139405824/735488182455369768/gripper_problem.jpg)
%end

##### Stefania Pedrazzi [Cyberbotics] 07/22/2020 13:44:41
Hi `@culurciello`, quickly tested on the latest version in the `ure.wbt` world just replacing the default gripper with the Pioneer3Gripper and it seems to work fine.

Which Webots version are you using?

Did you save and revert your world after adding the gripper?

##### culurciello 07/22/2020 14:38:34
`@Stefania Pedrazzi` thank you so much you are very kind. Using Webots R2020 r1. here is the world we use:
> **Attachment**: [ur5\_grip.wbt](https://cdn.discordapp.com/attachments/565154703139405824/735506078011228190/ur5_grip.wbt)


Am also getting this warning: WARNING: DEF ARM UR5e (PROTO) > DEF GRIPPER Pioneer3Gripper (PROTO) > DEF LIFT\_SLIDER SliderJoint > DEF LIFT Solid > DEF LEFT\_FINGER\_SLIDER SliderJoint > LinearMotor: too low requested position: -0.0845174 < 0

##### GeoCSBI 07/22/2020 14:58:36
Hey guys, for some reason webots crashes when the Robot.step(duration) method is being executed. It's very weird since two days ago it was working just fine. I am running the controller code from PyCharm on Windows.

##### Olivier Michel [Cyberbotics] 07/22/2020 15:10:19
`@GeoCSBI`: not sure how to help you. Did you modify anything to your controller or simulation?

##### Stefania Pedrazzi [Cyberbotics] 07/22/2020 15:11:58
> `@culurciello` Am also getting this warning: WARNING: DEF ARM UR5e (PROTO) > DEF GRIPPER Pioneer3Gripper (PROTO) > DEF LIFT\_SLIDER SliderJoint > DEF LIFT Solid > DEF LEFT\_FINGER\_SLIDER SliderJoint > LinearMotor: too low requested position: -0.0845174 < 0

This seems a problem of your controller program that requires an invalid position to the gripper motor.

About your world, you didn't send the controller. But I moved the arm using the robot window (double click on the robot and then move the joints using the sliders) and it works correctly.

##### Simon Steinmann [Moderator] 07/22/2020 15:23:23
how can I launch webots and automatically load a specified world? Ultimately I need to be able to do it from within my code, but a terminal command should work

##### Stefania Pedrazzi [Cyberbotics] 07/22/2020 15:24:33
`@Simon Steinmann` you simply pass the world as argument `webots <my_path_to_wbt_file>`  [https://www.cyberbotics.com/doc/guide/starting-webots#command-line-arguments](https://www.cyberbotics.com/doc/guide/starting-webots#command-line-arguments)

##### Simon Steinmann [Moderator] 07/22/2020 15:25:30
okay i'm blind 😄 ... I just saw the listed options, not the worldfile. Thanks 🙂


Is there a way to check if the world is fully loaded? The goal is for a python script to automatically launch webots with a wolrd, run several benchmarks, close it, start up another simulation like Mujoco or Gazebo and so on

##### Olivier Michel [Cyberbotics] 07/22/2020 15:33:17
I would recommend you to have a supervisor process sending some signal to your script to notify that the simulation started. You may use various IPC for that, like pipes, TCP/IP socket, files, etc.

##### watchdogs132 07/22/2020 15:52:35
> I am having trouble in implementing camera node . I created a Robot node , the child node of which is a Camera node . Now in the controller program I added these three lines

>  Camera *cm;

>   cm=robot->getCamera("camera");

>   cm->enable(TIME\_STEP);.

> The code compiles but the display window is pitch black .  Sorry if this is a noob question .

##### Simon Steinmann [Moderator] 07/22/2020 16:07:47
`@Olivier Michel` The webots external controller keeps waiting, until a webots instance is open and ready. So I can just start both at the same time 🙂


I remember reading something here about anaconda having issues. But python2 with conda works no problem

##### PymZoR [Premier Service] 07/22/2020 22:42:38
> I'm sure this has been asked before, but running external controller under python3 doesnt work for me. I get this error:

`@Simon Steinmann` could this be the PYTHONPATH that must be exported to python3X ?


[https://cyberbotics.com/doc/guide/running-extern-robot-controllers?tab-language=python](https://cyberbotics.com/doc/guide/running-extern-robot-controllers?tab-language=python)


> add ${WEBOTS\_HOME}/lib/controller/python3X

##### Laojiang 07/23/2020 00:32:40
When I use Emitter/Receiver under different robot node in different  controller,should I use 'receiver.getData()' or 'emitter.send()' in Infinite loop statement? In fact, no matter how I use the command, there are error in both emitter and receiver. How can I solve it ?


I have solved it.

##### David Mansolino [Cyberbotics] 07/23/2020 06:04:36
`@watchdogs132`, are you doing robot steps after enabling the camera?


> I remember reading something here about anaconda having issues. But python2 with conda works no problem

`@Simon Steinmann` yes the problem is anaconda, Webots Python API is compiled for the regular version of Webots, here is instructions how to compile for other version of Python: [https://cyberbotics.com/doc/guide/using-python#use-an-alternative-python-version](https://cyberbotics.com/doc/guide/using-python#use-an-alternative-python-version)

##### watchdogs132 07/23/2020 06:35:20
`@watchdogs132` no , there is no code inside the while loop . I just want to see the display of camera or range finder .

##### David Mansolino [Cyberbotics] 07/23/2020 06:44:39
You need to call the robot.step otherwise simulation will not run and the sensors will not be updated.

##### watchdogs132 07/23/2020 06:46:11
while (robot->step(timeStep) != -1) {}; Do you mean this ? . This is there , just left empty .

##### David Mansolino [Cyberbotics] 07/23/2020 07:06:41
Yes this.


In that case it should update the image. Can youplease report this here (including the controller and world files): [https://github.com/cyberbotics/webots/issues/new?template=bug\_report.md](https://github.com/cyberbotics/webots/issues/new?template=bug_report.md)

##### watchdogs132 07/23/2020 07:14:58
Thank you for your reply , but since I am completely new to Webots , before I report this , I just want to make sure that I didn't mess anything up . Here's a step by step of what I did .

Created a world -> Added a Robot node -> Child node-> Added a camera node .

I created a controller cpp file .

Here's the code :

 #include <webots/Robot.hpp>

\#include <webots/Camera.hpp>

\#define TIME\_STEP 64

using namespace webots;

int main(int argc, char **argv) {

  Robot *robot = new Robot();

  int timeStep = (int)robot->getBasicTimeStep();

  Camera *cm;

  cm=robot->getCamera("camera");

  cm->enable(TIME\_STEP);

  while (robot->step(timeStep) != -1) {

  };

  delete robot;

  return 0;

}

It compiles but the camera window is pitch black .

##### David Mansolino [Cyberbotics] 07/23/2020 07:20:32
Did you assigne the controller to your robot?

##### watchdogs132 07/23/2020 07:22:31
I clicked on Wizard -> Create a new Robot controller . Do I have manually assign controller to the robot ? . How do I do that ? .

##### David Mansolino [Cyberbotics] 07/23/2020 07:23:26
Ok, in that case this is probably the reason 😉


Here is a tutorial explaining how to create a new controller and assign it to a robot: [https://cyberbotics.com/doc/guide/tutorial-1-your-first-simulation-in-webots#create-a-new-controller](https://cyberbotics.com/doc/guide/tutorial-1-your-first-simulation-in-webots#create-a-new-controller)

##### watchdogs132 07/23/2020 07:36:53
Amazing .  Thank you so much .

##### David Mansolino [Cyberbotics] 07/23/2020 07:43:56
You're welcome

##### (,-*-) 07/23/2020 10:31:00
Hi,

there exist a library named aruco ([https://docs.opencv.org/trunk/d5/dae/tutorial\_aruco\_detection.html](https://docs.opencv.org/trunk/d5/dae/tutorial_aruco_detection.html)), can I simulate similar coordinate systems as described in picture?
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/735806165384167434/unknown.png)
%end

##### Olivier Michel [Cyberbotics] 07/23/2020 10:39:08
Yes, certainly.

##### Gautier 07/23/2020 13:29:10
Hello, might I ask you something ?

##### David Mansolino [Cyberbotics] 07/23/2020 13:29:43
hi, yes sure!

##### Gautier 07/23/2020 13:29:51
Hi David, thank you !


So it's just a little question


When I'm opening a world with two camera, I have these two box



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/735851245075562506/unknown.png)
%end


Because these camera are only used through Ros, I'm not really interested having the visualizer "open" by default


Is there a way to desactivate it by default ?

##### David Mansolino [Cyberbotics] 07/23/2020 13:31:36
You can close them manually using the small cross on the top right of the box. Or disable all of them at once from the 'Overlays' menu.

##### Gautier 07/23/2020 13:33:13
Is there a way to do it automitcally when loading the world ?

##### David Mansolino [Cyberbotics] 07/23/2020 13:34:24
Unfortunately not, but if you use the 'Overlays' menu, this will be saved for all the world files 'forever'.

##### Gautier 07/23/2020 13:35:56
Understood, thank you a lot !

##### David Mansolino [Cyberbotics] 07/23/2020 13:36:02
You're welcome

##### culurciello 07/23/2020 15:07:35
> This seems a problem of your controller program that requires an invalid position to the gripper motor.

> About your world, you didn't send the controller. But I moved the arm using the robot window (double click on the robot and then move the joints using the sliders) and it works correctly.

`@Stefania Pedrazzi` see file here for a controller that replicates my proble: as the arm moves, the gripper falls apart (and falls completely apart in some other cases)
> **Attachment**: [test\_gripper.py](https://cdn.discordapp.com/attachments/565154703139405824/735875768839700490/test_gripper.py)

##### Sanket Khadse 07/23/2020 15:32:48
I was planning to run my Webots world on a github page, using the HTML and x3d file I exported from webscene option. But I am not able to figure out how should the controller code be executed. 

`extra notes:`

`I looked into the cross-compilation article in documentation. But I thought of confirming it beforehand here, because that process is too complex for me. `

##### GeoCSBI 07/23/2020 15:53:44
Hey, I have a little question. I am trying to determine the dimensions and position of a recognized object bounding box. When i get size\_on\_image attribute it returns a SwigPyObject that I can't do anything with it. Any tips on how can use it to get the dimension and coordinates of the bounding box?

##### chenpixx 07/23/2020 19:15:44
> I can't use it from camera 'AttributeError: 'Camera' object has no attribute 'CameraRecognitionObject' , and I have use 'camera.getRecognitionNumberOfObjects()' to recognite objects successfully. Then what should I do next?

> And the camera node doesn't have 'CameraRecognitionObject' node.

`@Laojiang` I moved them solid node. then I add physics physics to add mass. the solid fall down? Why? How can I correct it?

##### Laojiang 07/24/2020 00:42:46
> `@Laojiang` I moved them solid node. then I add physics physics to add mass. the solid fall down? Why? How can I correct it?

`@chenpixx` I think the reason of the solid fall down is it doesn't have right 'boundingObject' node

##### David Mansolino [Cyberbotics] 07/24/2020 05:30:25
> Hey, I have a little question. I am trying to determine the dimensions and position of a recognized object bounding box. When i get size\_on\_image attribute it returns a SwigPyObject that I can't do anything with it. Any tips on how can use it to get the dimension and coordinates of the bounding box?

`@GeoCSBI` are you using the `CameraRecognitionObject.get_position_on_image()`  function? If yes, you should be able to use the return value as a simple list.


> I was planning to run my Webots world on a github page, using the HTML and x3d file I exported from webscene option. But I am not able to figure out how should the controller code be executed. 

> `extra notes:`

> `I looked into the cross-compilation article in documentation. But I thought of confirming it beforehand here, because that process is too complex for me. `

`@Sanket Khadse` if you want your controller to run you have to export not the scene, but an animation and let the simulation run: [https://cyberbotics.com/doc/guide/web-animation](https://cyberbotics.com/doc/guide/web-animation)

If you want to be able to dynamically change the controller from the web scene, then this is a bit more complexe and requires in adition to GitHub pages a web server able to run Webots i nthe background: [https://cyberbotics.com/doc/guide/web-simulation](https://cyberbotics.com/doc/guide/web-simulation)


> `@Stefania Pedrazzi` see file here for a controller that replicates my proble: as the arm moves, the gripper falls apart (and falls completely apart in some other cases)

`@culurciello` let's continue the discussion on : [https://github.com/cyberbotics/webots/issues/1963#issuecomment-663137831](https://github.com/cyberbotics/webots/issues/1963#issuecomment-663137831)

##### watchdogs132 07/24/2020 06:18:07
Hello . I have imported my .wrl file to .wbt using Blender ,  my bot shows up accurately on Webot ,with all the nodes as shape . But when I put one of the shape nodes (say the wheel)as the child node of a robot node , ideally I want the axes of the child node to be totally aligned with the wheel but that is not the case. There is a major offset . How can I fix this? . This offset axes problem is with all the shape nodes .

##### David Mansolino [Cyberbotics] 07/24/2020 06:23:45
Hi `@watchdogs132`, you have to add a Transform (or Solid) node as children of the robot node, and then put the shape in the children field of this Transform/Solid ndoe.


I would recommend following this tutorial: 

[https://cyberbotics.com/doc/guide/tutorial-5-compound-solid-and-physics-attributes](https://cyberbotics.com/doc/guide/tutorial-5-compound-solid-and-physics-attributes)

[https://cyberbotics.com/doc/guide/tutorial-6-4-wheels-robot](https://cyberbotics.com/doc/guide/tutorial-6-4-wheels-robot)

##### watchdogs132 07/24/2020 06:33:54
I did that , but as you can see the axes is still not aligned .
%figure
![1.png](https://cdn.discordapp.com/attachments/565154703139405824/736108886792077343/1.png)
%end

##### David Mansolino [Cyberbotics] 07/24/2020 06:34:46
You can align them by changing the `translation` and `rotation` fields of the Transform node.

##### watchdogs132 07/24/2020 06:35:38
When I change that or move the axes with my cursor , the entire wheel moves .


Ideally , I want the intersection of the 3 axis to be aligned with the center of the wheel


When I create a shape in webots , then the axis is totally aligned , but that's not the case with imported objects

##### David Mansolino [Cyberbotics] 07/24/2020 06:43:57
> When I change that or move the axes with my cursor , the entire wheel moves .

`@watchdogs132` yes that's normal, that's not what you need?

##### watchdogs132 07/24/2020 07:02:43
`@David Mansolino`  I want that , that's possible in this picture too . But look at the offset ,I want the center of the 3 axis to be at the center of the wheel .
%figure
![2.png](https://cdn.discordapp.com/attachments/565154703139405824/736116135841497128/2.png)
%end


This is a shape created in webots . Is there any way to make the axes of imported parts aligned like this ?
%figure
![3.png](https://cdn.discordapp.com/attachments/565154703139405824/736118063279112223/3.png)
%end

##### David Mansolino [Cyberbotics] 07/24/2020 07:22:18
You should probably follow tutorial 1 to 6: [https://cyberbotics.com/doc/guide/tutorial-1-your-first-simulation-in-webots](https://cyberbotics.com/doc/guide/tutorial-1-your-first-simulation-in-webots)

##### chenpixx 07/24/2020 08:43:26
> `@chenpixx` I think the reason of the solid fall down is it doesn't have right 'boundingObject' node

`@Laojiang`   I selected a standart box .

##### David Mansolino [Cyberbotics] 07/24/2020 08:47:16
If you add a physics and mass, then the box dynamic is enabled and it therefore falls because of the gravity.

##### chenpixx 07/24/2020 08:47:40
I added physics and mass also.


It falls


D ensiry 1e+3 mass 0.5  but when i selecetd boundaryobject a box it fall down.

##### David Mansolino [Cyberbotics] 07/24/2020 08:49:51
but this is normal no? Or is it touching the ground?

##### chenpixx 07/24/2020 08:50:51
It is on the table and touches


Norma no?

##### David Mansolino [Cyberbotics] 07/24/2020 08:51:40
But it falls trhought the table?

##### chenpixx 07/24/2020 08:51:49
Yes

##### David Mansolino [Cyberbotics] 07/24/2020 08:52:51
Ok then it might indeed be a bug, can you please report this here: [https://github.com/cyberbotics/webots/issues/new?template=bug\_report.md](https://github.com/cyberbotics/webots/issues/new?template=bug_report.md)

Including your world file and a procedure to reproduce the problem.

##### chenpixx 07/24/2020 08:55:06
Thanks

##### Simon Steinmann [Moderator] 07/24/2020 09:53:39
What are the default values for the PID of motors, if not set manually? Is there a way to read them out?

##### David Mansolino [Cyberbotics] 07/24/2020 09:56:09
The default value are documented here: [https://cyberbotics.com/doc/reference/motor](https://cyberbotics.com/doc/reference/motor)

They are 10, 0, 0

##### Simon Steinmann [Moderator] 07/24/2020 09:56:56
ah okay. Is there still a way to read them out?

##### David Mansolino [Cyberbotics] 07/24/2020 09:57:02
There are unfortunately no way (except using a Supervisor controller) to read them out.

##### Simon Steinmann [Moderator] 07/24/2020 09:57:16
how can I read out the field of a deviceHandle?


(with a supervisor controller)

##### David Mansolino [Cyberbotics] 07/24/2020 09:57:51
You can't from the deviceHandle, you have to get the node reference and then get it's field.

##### Simon Steinmann [Moderator] 07/24/2020 09:58:27
and how do I get the nodehandle from a device handle?


I have run into this issue before. That is something that is not very clear


supervisor controller with nodes is awesome and easy to implement. I still havent fully understood device handles and what the difference to nodes is

##### David Mansolino [Cyberbotics] 07/24/2020 10:01:40
> and how do I get the nodehandle from a device handle?

`@Simon Steinmann` you can't, you have to use a DEFNAME or something like this, there is no way to link a device handle to its node ref.

##### Simon Steinmann [Moderator] 07/24/2020 10:04:02
converting the robot to basenodes seems easier ^^


but thank you, I can work from here


still, is there a explanation of devicehandles vs nodes? I would like to read up on it and understand it properly

##### David Mansolino [Cyberbotics] 07/24/2020 10:09:31
a device handle is to be used with the stadard API, a node ref is a reference to a node in the scene tree (regardless of it beeing a device or not) to be used with the Supervisor API only.

##### Simon Steinmann [Moderator] 07/24/2020 10:15:58
it would be nice to be able to set and get all fields of any device

##### Olivier Michel [Cyberbotics] 07/24/2020 10:17:20
You can do this from the supervisor.

##### watchdogs132 07/24/2020 10:19:03
> `@David Mansolino`  I want that , that's possible in this picture too . But look at the offset ,I want the center of the 3 axis to be at the center of the wheel .

`@watchdogs132`  As it turns out , the origin wasn't aligned with the object in the solidworks model . Aligning the origin and then importing in Webots did the trick .

##### Simon Steinmann [Moderator] 07/24/2020 10:19:56
but not without major hassle. Would be nice to take your motor handle like:

motor1 = robot.getMotor('motor1')

and then do something like

motor1.getControlPID()

##### Olivier Michel [Cyberbotics] 07/24/2020 10:22:42
I see.

##### Simon Steinmann [Moderator] 07/24/2020 10:23:28
or having an addition in supervisor like:

node\_get\_from\_device\_handle


that would actually be really nice

##### Olivier Michel [Cyberbotics] 07/24/2020 10:24:38
Yes, `@David Mansolino` proposed this here: [https://github.com/cyberbotics/webots/issues/1992](https://github.com/cyberbotics/webots/issues/1992). Would that suit your need?

##### Simon Steinmann [Moderator] 07/24/2020 10:25:28
yes!

##### mbusy 07/24/2020 12:47:26
Hello, I was looking at the conditions to make the simulation deterministic ([https://cyberbotics.com/doc/guide/modeling#how-to-make-replicabledeterministic-simulations](https://cyberbotics.com/doc/guide/modeling#how-to-make-replicabledeterministic-simulations)), regarding the first item (Each simulation must be restarted either by pushing the Reload button, or by using the wb\_supervisor\_world\_reload function, or by restarting Webots), can `wb_supervisor_simulation_reset` be used?

##### David Mansolino [Cyberbotics] 07/24/2020 13:00:10
Hi, it is safer to use the `wb_supervisor_world_reload` as this completely recreates the world from scratch, however, in most of the cases the ``wb\_supervisor\_simulation\_reset``function will be enough.

##### mbusy 07/24/2020 13:07:13
`@David Mansolino` Thanks!

##### David Mansolino [Cyberbotics] 07/24/2020 13:16:53
You're welcome

##### yash 07/24/2020 13:37:11
Hello !

Are there any ROS standard controller examples using python available for reference ......and also any examples of how to synchronise the simulation with ROS node using - - synchronise argument .

##### David Mansolino [Cyberbotics] 07/24/2020 13:37:45
Hi!


Do you want to create a ros node and communicate with the Webots ros standard controller, or write your own Python Webots ROS controller?

##### yash 07/24/2020 13:39:27
Want to create a ROS node with standard ROS  controller

##### David Mansolino [Cyberbotics] 07/24/2020 13:40:42
Ok, here is a simple example in that case: [https://github.com/cyberbotics/webots/blob/develop/projects/languages/ros/webots\_ros/scripts/ros\_python.py](https://github.com/cyberbotics/webots/blob/develop/projects/languages/ros/webots_ros/scripts/ros_python.py)

Used together with this launch file:

[https://github.com/cyberbotics/webots/blob/develop/projects/languages/ros/webots\_ros/launch/webots\_ros\_python.launch](https://github.com/cyberbotics/webots/blob/develop/projects/languages/ros/webots_ros/launch/webots_ros_python.launch)

##### yash 07/24/2020 13:42:14
Yes but in this case it’s an example for custom ROS controller

##### David Mansolino [Cyberbotics] 07/24/2020 13:42:48
Oh yes you're right, wrong link


Unfortunately, we have only C++ example of what you want to do.

##### yash 07/24/2020 13:44:08
Yes 😅 ! That’s why asked whether if python examples are available for the same

##### David Mansolino [Cyberbotics] 07/24/2020 13:44:34
Unfortunately not for ROS1, we have some but only for ROS2

##### yash 07/24/2020 13:44:57
Oh alright !  no problem will figure something out...

##### Simon Steinmann [Moderator] 07/24/2020 14:33:52
`@yash` you can run the c++ roscontroller, but then interact with it through your own python scripts

##### yash 07/24/2020 14:37:10
I didn’t understand exactly ! If you may elaborate it would be great `@Simon Steinmann`

##### Simon Steinmann [Moderator] 07/24/2020 14:38:29
if you run your simulation with the standard ros controller, every motor and sensor will get it's own topics. You can check these by running 'rostopic list', 'rosnode list' and 'rosservice list'


you can then interact with these through ros


create your own little python script, where you for example change the position of a motor by publishing to the appropiate topic


with ros, every node is independant and can run in either python or c++.

##### David Mansolino [Cyberbotics] 07/24/2020 14:40:34
I think what `@yash` is looking for is an example of a ros node written in Python that communicates with the default C++ Webots ROS controller.

##### Simon Steinmann [Moderator] 07/24/2020 14:42:26
`@yash` are you using an example world?

##### yash 07/24/2020 14:44:39
No custom made world


> if you run your simulation with the standard ros controller, every motor and sensor will get it's own topics. You can check these by running 'rostopic list', 'rosnode list' and 'rosservice list'

`@Simon Steinmann`  yes this is what exactly I am doing ....... all the topics and services are already available since I am using the Standard ros controller , But I wanted some similar examples because when the complexity of my code increases I face some issues

##### Simon Steinmann [Moderator] 07/24/2020 14:49:57
I just checked again, and you mainly interact through services. Do you know how to call services from rospy?


1. open terminal and run 'roscore'


2. select ros as conttroller in webots
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/736237055889113118/unknown.png)
%end


run rosservice list
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/736237230619754556/unknown.png)
%end


3. call services from your own script like so
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/736237398798893136/unknown.png)
%end

##### yash 07/24/2020 15:06:37
Yes this is what I get
%figure
![image0.jpg](https://cdn.discordapp.com/attachments/565154703139405824/736237915473969172/image0.jpg)
%end

##### Simon Steinmann [Moderator] 07/24/2020 15:07:26
please use a screenshot program. just press win-key, and type screenshot


import rospy

from webots\_ros.srv import set\_float, set\_floatRequest

rospy.init\_node('my\_controller') 



motor1 = rospy.ServiceProxy('/UR10e\_3208\_simon\_Legion\_Y540/shoulder\_pan\_joint/set\_position', set\_float) 

request = set\_floatRequest()



request.value = 1.0

motor1(request)



-----------------------

this is the sample code, in case you want to copy it

##### yash 07/24/2020 15:09:35
I am familiar with how to work with ros standard controller by using .......the problem is that when multiple sensors are used so I face some issue as the complexity rises due to increase in the number of sensors 

So that’s why wanted some example code done in python to see its control flow and structure which is a bit complex

##### Simon Steinmann [Moderator] 07/24/2020 15:10:12
I mean you can create your own ros controller, interacting directly with webots


I'm not sure what exactly you are asking

##### yash 07/24/2020 15:13:42
> I mean you can create your own ros controller, interacting directly with webots

`@Simon Steinmann`  yes ! That’s what I’ve done. 



I just wanted an example code of ros.py that directly interacts with Webots , which is complex with multiple sensors and actuators involved , so that I can understand the code structure

##### Simon Steinmann [Moderator] 07/24/2020 15:13:55
ahhhh


okay

##### yash 07/24/2020 15:16:54
Yes 😅, 👍


But thank you for your effort and help  👍😅

##### Simon Steinmann [Moderator] 07/24/2020 15:28:04
you can use the universal\_ros controller as a guideline


I also reduced one of my controllers to some of the basics. Perhaps that shows how to initialize some things and go about it


[https://pastebin.com/PimdNrGD](https://pastebin.com/PimdNrGD)


shows how to initialize motors and sensors and publish the clock


(ignore line 28, forgot to delete it

##### yash 07/24/2020 16:00:48
Sure thanks , will check it out 👍


> [https://pastebin.com/PimdNrGD](https://pastebin.com/PimdNrGD)

`@Simon Steinmann`  just to be sure , this is a custom ROS controller right .?

##### Simon Steinmann [Moderator] 07/24/2020 17:39:37
yes


you will have to adjust the names of your joints and such


but it should show you how to do it in principle

##### amitsaini 07/25/2020 08:39:11
Hello can somebody help me! :)

I am trying to port my Robotic Dog code from CoppeliaSim to webots. In CoppeliaSim I used delay function sim.wait() to put some gap between sequences. How can i achieve similar thing in webots.

##### Olivier Michel [Cyberbotics] 07/25/2020 10:20:46
Simply stop the motors and perform a robot step with the waiting time.

##### amitsaini 07/25/2020 10:59:45
ok `@Olivier Michel` thank you!

##### Lifebinder (tsampazk) 07/25/2020 21:10:58
Hello folks, i've noticed that if you initialize a supervisor and then do supervisor.getSelf().remove() crashes Webots. I searched here and in github and didn't find something related. Also tried the latest nightly build and still crashed.

##### Laojiang 07/26/2020 01:21:42
I closed the display window of the camera, how do I get it back？

##### Lifebinder (tsampazk) 07/26/2020 09:21:58
`@Laojiang` You can go to Menu -> Overlays -> Camera Devices

##### Laojiang 07/26/2020 09:22:43
> `@Laojiang` You can go to Menu -> Overlays -> Camera Devices

`@Lifebinder (tsampazk)` thank you, I have solved it.

##### watchdogs132 07/26/2020 11:31:50
Webot crashes on modifying Texture Animation  . How to fix this ? . Version R2020A Revsion 1

##### Stefania Pedrazzi [Cyberbotics] 07/27/2020 05:39:44
`@watchdogs132` I would first suggest you to try on the latest nightly build of R2020b to check if the problem has not already been fixed. Then if you can still reproduce it, you should open an issue here describing the procedure to reproduce it: [https://github.com/cyberbotics/webots/issues/new/choose](https://github.com/cyberbotics/webots/issues/new/choose)


`@Lifebinder (tsampazk)` thank you for reporting this crash, we will look at it. Note removing a Supervisor node from its controller doesn't seem a very good practice. We will fix this crash but I'm not sure that this would be feasible, otherwise we would simply prevent it.

##### Lifebinder (tsampazk) 07/27/2020 07:37:18
`@Stefania Pedrazzi` Yes it certainly is a weird use case! Thanks

##### EPIC 07/27/2020 07:48:26
Hi! I'm trying to make a PROTO-node, but I'm struggling to add a children node (so that I can manually add nodes into the children field later on, in Webots). I haven't found any examples of it either.. any tips? 🙂

##### David Mansolino [Cyberbotics] 07/27/2020 07:49:31
Here is an example with the `seatExtensionSlot` field: [https://cyberbotics.com/doc/reference/proto-example](https://cyberbotics.com/doc/reference/proto-example)

##### yash 07/27/2020 07:49:38
Is it necessary to use and call   /robot/time\_step service  for programming in  rospy script while using Standard ROS controller .? 

Or the ROS controller by default does the time steps  when connected with Webots .?



Because I am facing an issue that is  if I manually donot call /robot/time\_step service in the python script the sensor values donot change  when the robot come near the wall . I use print() command to observe values.

But when I use ‘rostopic echo’ and see the values when the robot comes near the wall they do change.

##### David Mansolino [Cyberbotics] 07/27/2020 07:50:24
> Is it necessary to use and call   /robot/time\_step service  for programming in  rospy script while using Standard ROS controller .? 

> Or the ROS controller by default does the time steps  when connected with Webots .?

> 

> Because I am facing an issue that is  if I manually donot call /robot/time\_step service in the python script the sensor values donot change  when the robot come near the wall . I use print() command to observe values.

> But when I use ‘rostopic echo’ and see the values when the robot comes near the wall they do change.

`@yash` No if you never call it, simulation will run on its own.

##### yash 07/27/2020 07:53:49
Okay but then if I don’t call it the distance sensor value donot change when robot is near the wall. So it hits the wall and doesn’t stop. 

But the values do change when I see it in robot window and ‘rostopic echo’

##### EPIC 07/27/2020 07:53:55
Ah, thanks again. Does the "children IS seatExtensionSlot" has to be inside a Transform-node? (I tried to just put "children IS seatExtensionSlot" on its own, but that didn't work)

##### David Mansolino [Cyberbotics] 07/27/2020 07:55:09
> Ah, thanks again. Does the "children IS seatExtensionSlot" has to be inside a Transform-node? (I tried to just put "children IS seatExtensionSlot" on its own, but that didn't work)

`@EPIC` yes, or any other node having a 'children' field.

##### yash 07/27/2020 08:04:56
> Okay but then if I don’t call it the distance sensor value donot change when robot is near the wall. So it hits the wall and doesn’t stop. 

> But the values do change when I see it in robot window and ‘rostopic echo’

`@yash` In the script below print(ds0\_val) displays the distance sensor value but donot change when robot is near the wall, because the robot has to stop but it hits the wall.



> **Attachment**: [ds\_subscriber.py](https://cdn.discordapp.com/attachments/565154703139405824/737219046935625838/ds_subscriber.py)


but when i observe the values in robot window in webots and 'rostopic echo' they do change.

##### Adriana 07/27/2020 08:12:00
+ Webots Crash on start up 2020a-rev2-Win10

+ Hi，everybody！I have some questions about webots-2020a-rev2 on Win10.

+ Computer: win10 pro, 64 bit, 32 GB RAM, Nvidia Geforce GTX 1650 (4GB);

+ I can’t open it once after installation. And the nvidia drivers are all up to date. I have tried safe mode, and also tried to install 2020a-rev1 and 2019b, and it doesn't work whether it is for the current user or all users. The installation path is also checked, and they are all English letters.+ Webots Crash on start up 2020a-rev2-Win10

+ Hi，everybody！I have some questions about webots-2020a-rev2 on Win10.

+ Computer: win10 pro, 64 bit, 32 GB RAM, Nvidia Geforce GTX 1650 (4GB);

+ I can’t open it once after installation. And the nvidia drivers are all up to date. I have tried safe mode, and also tried to install 2020a-rev1 and 2019b, and it doesn't work whether it is for the current user or all users. The installation path is also checked, and they are all English letters.

##### Olivier Michel [Cyberbotics] 07/27/2020 08:23:25
`@Adriana`: can you try it on a different computer? It could be that there is some conflicting software installed on your computer causing Webots to crash... Typically such a crash may be caused by a DLL installed in your `C:\Windows\System32` folder by some third party software.

##### Adriana 07/27/2020 09:14:27
`@Olivier Michel` Thanks for your reply, this information is very valuable to me! I have tried it on other computers and it can be installed successfully. Is there some way to know which dll file conflicts so that I can successfully run webots on my computer?

##### Olivier Michel [Cyberbotics] 07/27/2020 09:22:24
That is unfortunately difficult to determine. Did you installed any special software on your computer? Do you get any clue in the crash error message? Like it failed in a DLL? Otherwise, you may search for DLLs in your system that may be at the wrong place. I will post a list of DLLs used by Webots. Finally, the ultimate solution is to re-install Windows on your PC, install Webots and then install the other software you need, one-by-one, testing Webots after each install to determine the culprit...


DLLs used by Webots R2020b:
> **Attachment**: [dlls.txt](https://cdn.discordapp.com/attachments/565154703139405824/737238885075124274/dlls.txt)

##### Robsicky 07/27/2020 09:57:52
Hi. Is it possible to use protos inside protos?

##### Olivier Michel [Cyberbotics] 07/27/2020 09:59:25
Yes.

##### Robsicky 07/27/2020 10:00:27
Searching for documentation on it, but did not manage to find anything

##### Olivier Michel [Cyberbotics] 07/27/2020 10:01:16
Do you mean referring to a proto in the definition of another proto?

##### Robsicky 07/27/2020 10:05:02
Yes, I have a proto of a shape that I want to use in another proto

##### Olivier Michel [Cyberbotics] 07/27/2020 10:05:57
OK, that should work, no problem. Can you please suggest more precisely where our documentation could be improved to clarify the doubt you had?

##### Robsicky 07/27/2020 10:26:53
I've read the manual at [https://cyberbotics.com/doc/reference/proto](https://cyberbotics.com/doc/reference/proto)


But I can't seem to find anything on using a proto inside a new proto

##### David Mansolino [Cyberbotics] 07/27/2020 10:29:03
You can use it like any other regular node.

##### Robsicky 07/27/2020 10:31:54
Like this? (the transform is inside my new proto)

```
Transform {
   
    children [
         my_proto {
         
         }
    ]
}
```

##### David Mansolino [Cyberbotics] 07/27/2020 10:33:30
Yes exactly

##### Robsicky 07/27/2020 10:39:38
And it works! Thanks. There was a bug elsewhere in my code.

##### yash 07/27/2020 10:55:22
> Okay but then if I don’t call it the distance sensor value donot change when robot is near the wall. So it hits the wall and doesn’t stop. 

> But the values do change when I see it in robot window and ‘rostopic echo’

 In the script below print(ds0\_val) displays the distance sensor value but donot change when robot is near the wall, because the robot has to stop but it hits the wall.

`@David Mansolino`  if you could help regarding this !



> **Attachment**: [ds\_subscriber.py](https://cdn.discordapp.com/attachments/565154703139405824/737262312020508722/ds_subscriber.py)

##### Purple Pachyderm 07/27/2020 12:27:57
Hello, I am observing small variation between the translation of my robot in webot and the position returned by the GPS. Do you know what could cause that ?

##### David Mansolino [Cyberbotics] 07/27/2020 12:28:48
> Hello, I am observing small variation between the translation of my robot in webot and the position returned by the GPS. Do you know what could cause that ?

`@Purple Pachyderm` does you GPS have noise? If not, can you identify that the position has one step delay?

##### Purple Pachyderm 07/27/2020 12:29:28
No the GPS doesn't have noise


It is  hard to tell for the 1 step delay


I can check

##### David Mansolino [Cyberbotics] 07/27/2020 12:30:45
>  In the script below print(ds0\_val) displays the distance sensor value but donot change when robot is near the wall, because the robot has to stop but it hits the wall.

> `@David Mansolino`  if you could help regarding this !

`@yash` your code looks globally correct.

##### Purple Pachyderm 07/27/2020 12:35:30

%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/737287048360362034/unknown.png)
%end


Not delayed


On the left the translation of robot0 and on the right the position by GPS of the robot0

##### yash 07/27/2020 12:36:38
> `@yash` your code looks globally correct.

`@David Mansolino`  Yes , but due to some strange reason print(ds0\_val) doesn’t change its value when the robot is near the wall , so the robot doesn’t stop! 

So further I checked using ‘rostopic echo’ and it does change here 😅

##### David Mansolino [Cyberbotics] 07/27/2020 12:36:59
> On the left the translation of robot0 and on the right the position by GPS of the robot0

`@Purple Pachyderm` maybe the GPS is not exactly at the center of the robot.


> `@David Mansolino`  Yes , but due to some strange reason print(ds0\_val) doesn’t change its value when the robot is near the wall , so the robot doesn’t stop! 

> So further I checked using ‘rostopic echo’ and it does change here 😅

`@yash` if you want Cyberbotics provoide professional consulting and can write/correct the code for you: [https://www.cyberbotics.com/#plans](https://www.cyberbotics.com/#plans)

##### Purple Pachyderm 07/27/2020 12:39:40
The GPS is defined like this, it should be centered on the robot right ?
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/737288095686459392/unknown.png)
%end

##### David Mansolino [Cyberbotics] 07/27/2020 12:40:34
It is in a `Transform` node, so it will return the position respectively to the transformation.

##### yash 07/27/2020 12:41:23
> `@yash` if you want Cyberbotics provoide professional consulting and can write/correct the code for you: [https://www.cyberbotics.com/#plans](https://www.cyberbotics.com/#plans)

`@David Mansolino`  alright, thank you 😀

##### Purple Pachyderm 07/27/2020 12:50:41
Thank you

##### David Mansolino [Cyberbotics] 07/27/2020 12:50:51
You're welcome

##### EPIC 07/27/2020 13:17:44
Hi! I'm trying to get the bounding object to work for my PROTO, but can't get it to work (only some simple instances work, e.g. when I add a simple box as bounding object). I did some testing with the PROTO-code for the "Simple Chair" - the bounding object worked as long as Physics were turned on, but not when I turned it off..


(I'm using the Touch Sensors "bumper" type, which should not require physics to work)

##### Simon Steinmann [Moderator] 07/27/2020 13:40:43
`@chenpixx` ubuntu has a screenshot software included

##### watchdogs132 07/27/2020 18:36:05
Hello ,something weird is happening with my tracked robot when it climbs a staircase. In every iteration , my bot seems to stop climbing at the 14th step , before and after that particular step everything goes smoothly . This only happens during ascending .

##### m0narch 07/27/2020 19:06:13
motinan

##### chenpixx 07/27/2020 21:25:36

%figure
![image0.jpg](https://cdn.discordapp.com/attachments/565154703139405824/737420452183539762/image0.jpg)
%end


Do you an idea what ehat is problem? Box falls down.

##### Alex Nie 07/28/2020 05:51:58
Hello everyone😃

##### David Mansolino [Cyberbotics] 07/28/2020 05:53:46
Hi `@Alex Nie`


> Do you an idea what ehat is problem? Box falls down.

`@chenpixx` yes, try setting the 'scale' field to '1 1 1'.


> Hi! I'm trying to get the bounding object to work for my PROTO, but can't get it to work (only some simple instances work, e.g. when I add a simple box as bounding object). I did some testing with the PROTO-code for the "Simple Chair" - the bounding object worked as long as Physics were turned on, but not when I turned it off..

`@EPIC` what do you mean exactly by it doesn't work when physics is disabled? What is the behavior?

##### Alex Nie 07/28/2020 06:10:50
I would like to ask, how can I use one controller to control multiple robots and give different instructions to multiple robots. For example, I have two pioneer3dx (as shown in the figure below), and I want to use one controller to control them. One of them moves to the left and the other moves to the right. So how should I write the controller? Is there any kind person to answer? thank you very much! QAQ
%figure
![2020-07-28_141035.png](https://cdn.discordapp.com/attachments/565154703139405824/737552633598050364/2020-07-28_141035.png)
%end

##### David Mansolino [Cyberbotics] 07/28/2020 06:31:27
One simple solution is to use the `controllerArgs` field which can be used to defines the argument sent to the controller. This way you can use the same controller for every robot, but use different arguments.

##### Alex Nie 07/28/2020 07:09:43
👍 I truly appreciate your timely help.

##### David Mansolino [Cyberbotics] 07/28/2020 07:09:55
You're welcome

##### EPIC 07/28/2020 07:29:00
`@David Mansolino`  I'm using a Touch Sensor to detect collision with other objects. I have some boxes in the world already, where I receive a signal when their bounding objects are overlapping with the touch sensor. But when I add my PROTO to the world, the Touch Sensor will not send out/I won't receive signals when the Touch Sensor overlap with the same boxes as previously.

##### David Mansolino [Cyberbotics] 07/28/2020 07:41:32
You mean it overlaps? Does the touchsensor bounding object overlaps with another bounding object of the same robot?

##### EPIC 07/28/2020 07:42:11
Update: when I use "USE BEAM1" (not the transform) it works. Then I will detect both the previously boxes aswell as the beam. But when I use the transform instead (and not the last line), it won't detect either the boxes or thea beam.
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/737575621479366676/unknown.png)
%end


No, the robot does not have any bounding object itself (only the touch sensor's bounding object on the end-effector).

##### David Mansolino [Cyberbotics] 07/28/2020 07:43:41
Ok, in that case that might be a bug, can you please report this here:

[https://github.com/cyberbotics/webots/issues/new?template=bug\_report.md](https://github.com/cyberbotics/webots/issues/new?template=bug_report.md)

Including a sample simulation reproducing the problem

##### EPIC 07/28/2020 07:44:00
Ok👍

##### chenpixx 07/28/2020 08:46:21
> `@chenpixx` yes, try setting the 'scale' field to '1 1 1'.

`@David Mansolino`  in that case my box is bigger than one wanted one.

##### David Mansolino [Cyberbotics] 07/28/2020 08:48:28
Then change the 'size' field of the box, and not the 'scale' one of the transform

##### chenpixx 07/28/2020 08:50:14
Size seems correct.  10 cm 10cm 4.5 cm

##### Alex Nie 07/28/2020 08:59:31
> One simple solution is to use the `controllerArgs` field which can be used to defines the argument sent to the controller. This way you can use the same controller for every robot, but use different arguments.

`@David Mansolino` Could you please give me a  detailed example about using controllerArgs to defines the argument sent to the controller? I could hardly find information on how to use controllerArgs on [https://www.cyberbotics.com/doc/guide/](https://www.cyberbotics.com/doc/guide/).

##### David Mansolino [Cyberbotics] 07/28/2020 09:20:55
Here you will find a description of the field:

[https://www.cyberbotics.com/doc/reference/robot#field-summary](https://www.cyberbotics.com/doc/reference/robot#field-summary)


you simply need to assign a value to this field, then the controller will be started with the argument set as value and you can retrieve them like in any regular program (depending on the language you are using).

##### Alex Nie 07/28/2020 09:41:05
👍 good answer

##### chenpixx 07/28/2020 10:22:51
> Then change the 'size' field of the box, and not the 'scale' one of the transform

`@David Mansolino`   Inany case, falls down. Icant solved it


I. Changed 1  1 1 the size field


Should i change which field?

##### Kormit 07/28/2020 11:09:39
Hi, I was wondering if there was a way for lights/point lights to emit some sort of colour/light but you can't see that light in the map but light sensors can still detect it. If there is a better way to do this with other sensors/nodes let me know. Thanks.

##### chenpixx 07/28/2020 11:21:58
> Should i change which field?

`@chenpixx`  do you have another idea?

##### EPIC 07/28/2020 11:39:54
`@chenpixx` Is the origo of the box below the table?


If you don't want it to fall at all (not even on the table), I guess you could just sett "physics" to NULL for the box


`@Kormit` Have you tried "recognitionColors" on a Solid node? ([https://cyberbotics.com/doc/reference/solid](https://cyberbotics.com/doc/reference/solid))

##### chenpixx 07/28/2020 11:48:55
> If you don't want it to fall at all (not even on the table), I guess you could just sett "physics" to NULL for the box

`@EPIC`  but the robot will grasp it.  I think that physic is necessaary.

##### EPIC 07/28/2020 11:52:18
True. As long as the physic node is on, it will always fall down (unless you set gravity to 0). Do you not want it to fall down at all, or to fall on the table instead of the ground?

An alternative way is to turn physics off, and do a pure kinematic simulation. You can use Supervisor to simulate grasping, though this require some work..

##### David Mansolino [Cyberbotics] 07/28/2020 12:04:10
> Should i change which field?

`@chenpixx` the 'Transform' 'scale' field


> Hi, I was wondering if there was a way for lights/point lights to emit some sort of colour/light but you can't see that light in the map but light sensors can still detect it. If there is a better way to do this with other sensors/nodes let me know. Thanks.

`@Kormit` you might use the 'wb\_supervisor\_node\_set\_visibility' Supervisor API function to hide that light to the viewpoint and cameras: [https://cyberbotics.com/doc/reference/supervisor#wb\_supervisor\_node\_set\_visibility](https://cyberbotics.com/doc/reference/supervisor#wb_supervisor_node_set_visibility)

##### chenpixx 07/28/2020 12:40:36
> True. As long as the physic node is on, it will always fall down (unless you set gravity to 0). Do you not want it to fall down at all, or to fall on the table instead of the ground?

> An alternative way is to turn physics off, and do a pure kinematic simulation. You can use Supervisor to simulate grasping, though this require some work..

`@EPIC`  i want that it is a normal box solid, it is on the table. By robot , i will grasp.  If Robot cant grasp , it may fall on the table.as lifting  , It is normal. (Ps i am using supervisor) . Now there is no supervisor. I just see  it on the table with gravity.

##### yash 07/28/2020 12:42:55
Hello !  Webots displays the a new robot’s unique name every time I start it , so is there way to fix the name so that everytime the same name is shown by Webots  for programming standard ROS controller ?

##### David Mansolino [Cyberbotics] 07/28/2020 12:46:01
> Hello !  Webots displays the a new robot’s unique name every time I start it , so is there way to fix the name so that everytime the same name is shown by Webots  for programming standard ROS controller ?

`@yash` yes, as described in the doc, you can use the `--name=...` controller argument: [https://www.cyberbotics.com/doc/guide/using-ros#using-the-standard-ros-controller](https://www.cyberbotics.com/doc/guide/using-ros#using-the-standard-ros-controller)

##### chenpixx 07/28/2020 12:48:53
> True. As long as the physic node is on, it will always fall down (unless you set gravity to 0). Do you not want it to fall down at all, or to fall on the table instead of the ground?

> An alternative way is to turn physics off, and do a pure kinematic simulation. You can use Supervisor to simulate grasping, though this require some work..

`@EPIC`  what is purer kinematic solution. This is just a box.

##### EPIC 07/28/2020 12:57:45
`@chenpixx` Sorry, I must have misunderstood the problem

##### yash 07/28/2020 13:03:15
> `@yash` yes, as described in the doc, you can use the `--name=...` controller argument: [https://www.cyberbotics.com/doc/guide/using-ros#using-the-standard-ros-controller](https://www.cyberbotics.com/doc/guide/using-ros#using-the-standard-ros-controller)

`@David Mansolino`  but where exactly can I find the ROS controller argument - - name = <robot\_unique\_name>?

##### chenpixx 07/28/2020 13:03:46
> `@chenpixx` the 'Transform' 'scale' field

`@David Mansolino`  ok i did it. However robot arm cant grasp. Arm move throughout the box. That is invisible. That is not real box

##### Simon Steinmann [Moderator] 07/28/2020 13:05:51
windows-key (super) -> type in 'screenshot' -> start screenshot program -> take screenshot

##### David Mansolino [Cyberbotics] 07/28/2020 13:09:28
`@chenpixx` this is normal, you node is using ONLY a Transform node and no Solid node, so it can't be grasped by a robot.

I would strongly recommend following (again) tutorial 1-6.

##### Kormit 07/28/2020 13:13:38
`@David Mansolino` thanks for getting back to me, unfortunately setting the visibility to false will remove the mesh/object, but not the emitted light from the PointLight protos.

##### EPIC 07/28/2020 13:14:22
`@David Mansolino` I think I've found the root to the problem (with the touch sensor, bounding objects and PROTO). Everything works fine as long as my touch sensor is higher up than every bounding object that belongs to the PROTO when the simulation starts (or when the PROTO is imported). The problem occurs when a bounding object from the PROTO-node is being spawned above the touch sensor.. (I've also written this in the bug report)

##### David Mansolino [Cyberbotics] 07/28/2020 13:14:24
> `@David Mansolino` thanks for getting back to me, unfortunately setting the visibility to false will remove the mesh/object, but not the emitted light from the PointLight protos.

`@Kormit` oh yes your right, in that case unfortunately I don't see any other solution.

##### Alex Nie 07/28/2020 13:14:41
`@David Mansolino` Thank you very much for your previous help. But I regret to find that controllerArgs cannot satisfy the function I want to achieve. So I want to ask, is there any other way to use a script to control the movement of multiple robots, and the movement instructions of each robot are different. I want to use webots to simulate formation control. I want to use webots to simulate formation control based on deep reinforcement learning, so I must use a script file to control the movement of multiple robots. QAQ...

##### David Mansolino [Cyberbotics] 07/28/2020 13:14:54
> `@David Mansolino` I think I've found the root to the problem (with the touch sensor, bounding objects and PROTO). Everything works fine as long as my touch sensor is higher up than every bounding object that belongs to the PROTO when the simulation starts (or when the PROTO is imported). The problem occurs when a bounding object from the PROTO-node is being spawned above the touch sensor.. (I've also written this in the bug report)

`@EPIC` ok thank you for the precise report!

##### chenpixx 07/28/2020 13:14:56
> `@chenpixx` this is normal, you node is using ONLY a Transform node and no Solid node, so it can't be grasped by a robot.

> I would strongly recommend following (again) tutorial 1-6.

`@David Mansolino`  thanks i will work.

##### David Mansolino [Cyberbotics] 07/28/2020 13:15:34
> `@David Mansolino` Thank you very much for your previous help. But I regret to find that controllerArgs cannot satisfy the function I want to achieve. So I want to ask, is there any other way to use a script to control the movement of multiple robots, and the movement instructions of each robot are different. I want to use webots to simulate formation control. I want to use webots to simulate formation control based on deep reinforcement learning, so I must use a script file to control the movement of multiple robots. QAQ...

`@Alex Nie` why controllerArgs is not working ?

##### Simon Steinmann [Moderator] 07/28/2020 13:19:29
Just out of curiosity, can one have a wolrd with multiple bots, and use seperate extern controllers?

##### Olivier Michel [Cyberbotics] 07/28/2020 13:19:43
Sure.

##### Alex Nie 07/28/2020 13:20:16
> `@Alex Nie` why controllerArgs is not working ?

`@David Mansolino` ontrollerArgs is good, but it cannot be edited while the program is running, eh. . It should not be changed during the running of the program, right?

##### David Mansolino [Cyberbotics] 07/28/2020 13:22:24
Oh ok, in that case you can use the Robot 'customData' field instead which can be changed at rutime and retrieved from the controller using the 'wb\_robot\_get\_custom\_data' function: [https://cyberbotics.com/doc/reference/robot#wb\_robot\_get\_custom\_data](https://cyberbotics.com/doc/reference/robot#wb_robot_get_custom_data)


> Just out of curiosity, can one have a wolrd with multiple bots, and use seperate extern controllers?

`@Simon Steinmann` [https://cyberbotics.com/doc/guide/running-extern-robot-controllers#single-simulation-and-multiple-extern-robot-controllers](https://cyberbotics.com/doc/guide/running-extern-robot-controllers#single-simulation-and-multiple-extern-robot-controllers)

##### Alex Nie 07/28/2020 13:34:00
> Thank you for your help. 😃

##### David Mansolino [Cyberbotics] 07/28/2020 13:39:57
You're welcome

##### watchdogs132 07/28/2020 14:15:27
Hello . I am trying to move my bot's arms but upon executing the code nothing happens . I have added a hinge joint node with rotational motor , inside of that I have set the anchor and axis to my desired location . In the code  , I have used the set position function to say rotate the arm by 90 degrees . In spite of all this , nothing seems to happen . Where am I going wrong ?

##### Simon Steinmann [Moderator] 07/28/2020 14:16:32
is the simulation running with a void controller?

##### watchdogs132 07/28/2020 14:22:39
`@Simon Steinmann`  Nah , it's using my own controller .

##### Simon Steinmann [Moderator] 07/28/2020 14:23:15
try selecting void controller and doubleclicking your robot and manually changing the motor value there


to make sure the issue is your model setup, not the controller

##### watchdogs132 07/28/2020 14:28:22
Thank you . The problem seems to be in my model setup .

##### Simon Steinmann [Moderator] 07/28/2020 14:29:15
you can always add a existing model of a robotic arm and convert it into base nodes and see how it should be set up

##### (,-*-) 07/28/2020 16:48:26
Hi, how can I pin robot to a table, or any other solid?

##### Simon Steinmann [Moderator] 07/28/2020 16:57:52
you can disable the physics of the base node

##### TJR 07/28/2020 19:00:35
hey so how come the mavic is so slow and unstable? I've tried tweaking it to better sim a more agile racing or freestyle quadcopter and no matter what values or how I try to tweak the algo I just can't seem to get it to be stable.... always just wigs out and flips, is it cause of user error or just the physics and engine isn't capable or made for that ?

##### Simon Steinmann [Moderator] 07/28/2020 19:01:36
perhaps try lowering your timestep length


the issue might also be with your controllers

##### TJR 07/28/2020 19:05:31
Alright, will try that. Anyone else been able to? I can't imagine no one else has tried..

##### David Mansolino [Cyberbotics] 07/29/2020 05:39:14
> Alright, will try that. Anyone else been able to? I can't imagine no one else has tried..

`@TJR` yes, the controller of the mavic is extremely simple and therefore might not be very stable. But yes some people did create an improved version of it, for example:

  - [https://www.youtube.com/watch?v=vXC9\_T7ekWE&feature=youtu.be](https://www.youtube.com/watch?v=vXC9_T7ekWE&feature=youtu.be)

  - [https://github.com/PrasadNR/Webots-Quadcopter-Python-SITL](https://github.com/PrasadNR/Webots-Quadcopter-Python-SITL)

##### Alex Nie 07/29/2020 06:04:55
`@David Mansolino` Do you know how put multi external controllers into the same folder? I found that every time I create a new external controller, I have to repeat the work of pycharm configuration environment according to the instructions of [https://www.cyberbotics.com/doc/guide/using-your-ide?tab-language=python](https://www.cyberbotics.com/doc/guide/using-your-ide?tab-language=python).

##### David Mansolino [Cyberbotics] 07/29/2020 06:05:44
> `@David Mansolino` Do you know how put multi external controllers into the same folder? I found that every time I create a new external controller, I have to repeat the work of pycharm configuration environment according to the instructions of [https://www.cyberbotics.com/doc/guide/using-your-ide?tab-language=python](https://www.cyberbotics.com/doc/guide/using-your-ide?tab-language=python).

Hi `@Alex Nie`, unfortunately not, I am sorrry I am not very familliar with PyCharm

##### Alex Nie 07/29/2020 06:07:35
emmmm..ok, thank you.


`@David Mansolino` If there are multiple robots, and each robot has an external controller, how can these robots start simulation at the same time?😊

##### David Mansolino [Cyberbotics] 07/29/2020 06:27:29
[https://cyberbotics.com/doc/guide/running-extern-robot-controllers#single-simulation-and-multiple-extern-robot-controllers](https://cyberbotics.com/doc/guide/running-extern-robot-controllers#single-simulation-and-multiple-extern-robot-controllers)

##### Alex Nie 07/29/2020 06:28:49
Thank you for your answer.

##### David Mansolino [Cyberbotics] 07/29/2020 06:29:00
You're welcome

##### watchdogs132 07/29/2020 06:35:25
Is there anyway to have the endpoint node of a rotational motor as the combination of three nodes : shape ,track and track ?.  Right now , I have to create three hinge joint nodes for the above mentioned nodes .

##### Stefania Pedrazzi [Cyberbotics] 07/29/2020 06:36:30
`@watchdogs132` you can add a parent Solid node and put the Solid, Track and Track node in the children field

##### watchdogs132 07/29/2020 06:38:19
Yea , basically I created a solid node as the endpoint node , then put the 3 nodes in the child section . But in the bounding object ,I am only able to select the shape node , as a result only the outer boundary of the arms is rotating , the tracks and wheels are remaining intact . Maybe I'm doing something wrong , I will have a look again .

##### Stefania Pedrazzi [Cyberbotics] 07/29/2020 06:40:21
Not sure to understand what do you mean.

All the nodes in the endPoint will be rotated when the joint moves, independently if their shape is defined in the bounding object.


Then, it is enough to define the boundingObject shape directly in the Track node, no need to defined again the boundingObject of the Track in the parent Solid node.

##### Alex Nie 07/29/2020 07:58:33
> You're welcome

`@David Mansolino` Webots is really too smart. I just discovered that if there are multiple external controllers controlling multiple robots, then all the robots will only start to move when all the controllers are activated. So there is no need to write a program to control the car and start moving. This feature is great！👍

##### watchdogs132 07/29/2020 08:16:43
> Yea , basically I created a solid node as the endpoint node , then put the 3 nodes in the child section . But in the bounding object ,I am only able to select the shape node , as a result only the outer boundary of the arms is rotating , the tracks and wheels are remaining intact . Maybe I'm doing something wrong , I will have a look again .



`@watchdogs132` As you can see , I have created a solid node as the end point node . Inside of the child node , I have placed the shape node and two track nodes . But in the bounding object I am only able to select the shape node . When I move the motor "rot1" , nothing happens .
%figure
![Rotating.png](https://cdn.discordapp.com/attachments/565154703139405824/737946698680369212/Rotating.png)
%end

##### Stefania Pedrazzi [Cyberbotics] 07/29/2020 08:18:53
You should define the bounding object of the Track in the `Track.boundingObject` field.

But even without bounding object if you move the joint all the descendant nodes should be moved accordingly


Did you check that your motor has enough torque to move the endPoint? I would suggest you to try to increase the `maxTorque` and see if the solid and the tracks move

##### watchdogs132 07/29/2020 08:26:29
`@Stefania Pedrazzi`  Brilliant . Changing the max torque does the trick . Actually , I did do that earlier , but didn't restart  Webots . Note to self : Always restart Webots after making changes haha !


Thanks a lot !

##### Stefania Pedrazzi [Cyberbotics] 07/29/2020 08:27:14
You're welcome

##### Robsicky 07/29/2020 08:55:00
Hi. I'm trying to build my robot using protos, but have some trouble with translating and rotating the proto nodes.



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/737956342983295026/unknown.png)
%end


My code is able to rotate "Axis1" (change the field in the image), but the actual "Axis1" proto (built on a solid) does not rotate


If I change the rotation (or translation) field, then save and reload, the rotation (or translation) happens

##### Stefania Pedrazzi [Cyberbotics] 07/29/2020 08:59:05
`@Robsicky` could you please try to use a base `Robot` node instead of the `MyRobot` PROTO and check if moving `Axis1` works correctly?

##### Robsicky 07/29/2020 09:01:49
Oki👍

MyRobot is built on Robot though. And my python code is able to connect to it just as with a base Robot node. But will test now

##### Stefania Pedrazzi [Cyberbotics] 07/29/2020 09:03:29
Yes, this test is to check if there are some internal issues handling nested PROTO nodes.

##### tangdan 07/29/2020 09:05:43
Do you have some guide for "Interfacing Webots to Third Party Software with TCP/IP"?

##### David Mansolino [Cyberbotics] 07/29/2020 09:06:04
[https://cyberbotics.com/doc/guide/interfacing-webots-to-third-party-software-with-tcp-ip](https://cyberbotics.com/doc/guide/interfacing-webots-to-third-party-software-with-tcp-ip) ?


And here is an example in C: [https://github.com/cyberbotics/webots/blob/develop/projects/robots/k-team/khepera1/controllers/tcpip/tcpip.c](https://github.com/cyberbotics/webots/blob/develop/projects/robots/k-team/khepera1/controllers/tcpip/tcpip.c)

##### tangdan 07/29/2020 09:07:29
I have read it,but i don't know how to run the example world.


I think I need a more detailed guide.

##### David Mansolino [Cyberbotics] 07/29/2020 09:08:24
Did you follow the Webots tutorial first?

[https://cyberbotics.com/doc/guide/tutorial-1-your-first-simulation-in-webots](https://cyberbotics.com/doc/guide/tutorial-1-your-first-simulation-in-webots)

##### Robsicky 07/29/2020 09:17:24
> Yes, this test is to check if there are some internal issues handling nested PROTO nodes.

`@Stefania Pedrazzi` It works when using base Robot instead of my Robot PROTO

##### Stefania Pedrazzi [Cyberbotics] 07/29/2020 09:17:43
Which version of Webots are you using?

##### Robsicky 07/29/2020 09:17:50
R2020a


I can post my "MyRobot" code? Might be doing something wrong?

##### Stefania Pedrazzi [Cyberbotics] 07/29/2020 09:19:17
Yes, you can open an issue here [https://github.com/cyberbotics/webots/issues/new/choose](https://github.com/cyberbotics/webots/issues/new/choose) and add your world and PROTO files.

##### Robsicky 07/29/2020 12:00:46
`@Stefania Pedrazzi`  Hi again. I've done some more testing, and the problem with translating and rotating protos seem to be more general


Translation and rotation of protos that are children of a proto, only take effect after saving and reloading world


I'm able to move "Axis1", but not "Axis2". Also, I'm not trying to move "Forks", so I guess that's why I can move Axis1 despite it being a child of "Forks"
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/738004234804527175/unknown.png)
%end

##### Stefania Pedrazzi [Cyberbotics] 07/29/2020 12:08:21
There are some known issues with nested PROTO nodes but these are usually related to specific PROTO structures.

Not all the nested PROTO nodes have issues, so we can only inspect your issue by checking the models and the world.

Please open an issue on GitHub and we will have a look at it.


Another thing that you could try, is to check if is maybe already fixed in the latest version by installing the latest nightly build of R2020b:   [https://github.com/cyberbotics/webots/releases/tag/nightly\_27\_7\_2020](https://github.com/cyberbotics/webots/releases/tag/nightly_27_7_2020)

##### Robsicky 07/29/2020 12:11:01
I understand. I'll test the new version, and open an issue if it's not working 👍


Btw, I seem to have the same issue as described here:

[https://github.com/cyberbotics/webots/issues/214](https://github.com/cyberbotics/webots/issues/214)

##### Stefania Pedrazzi [Cyberbotics] 07/29/2020 12:34:42
Ok! If you can add your models as well when fixing this issue we will check it works in your case too

##### Robsicky 07/29/2020 12:52:25
Is there an .exe for R2020b Windows?

##### Stefania Pedrazzi [Cyberbotics] 07/29/2020 12:53:57
here there is also the Windows exe [https://github.com/cyberbotics/webots/releases/tag/nightly\_28\_7\_2020](https://github.com/cyberbotics/webots/releases/tag/nightly_28_7_2020)

##### Robsicky 07/29/2020 12:54:43
Thanks a lot😀

##### kentevan 07/29/2020 17:02:23
hello quick UI question.  Is there a way to prevent an object's axes from displaying when that object is selected?  Thanks

##### Alex0u0 07/29/2020 20:28:18
hi, im new to webots, but i wanted to know if theres a way to upload a controller of a simulation made in webots to an actual robot in real world, or right  now the only way is uploading it with ros. Also if there isnt an upload option in webots yet, will there be in a future or will it stay as a simulation environment only? thanks for the answer in advance 🙂

##### Simon Steinmann [Moderator] 07/29/2020 22:01:21
A webots controller interacts with the webots api. But it should be easily adaptable to the api of your robot. To make this easier, it can be a good idea to split your controller into modules that interact with each other and putting all the webots specific things in an extra module and all the logic in another.

##### chungshan 07/30/2020 06:15:08
Hello, I'd like to know how to get an accurate collision detection.

I'm doing an insertion task. The white box connects with a connector on ur5.(The connection is rigid.) The white box is controlled straight down. However, I have two problems:

1. I found that the white box overlapped with blue box (a bad collision detection). I set basicTimeStep=8

2. There are slipping between white box and blue box when the collision occurs (I already set a large colombFriction(=200) between them)

I'd like to have the performance like this:

When the white box collides with blue box, it has a good collision detection (no overlap) and without slipping.
%figure
![collision.png](https://cdn.discordapp.com/attachments/565154703139405824/738278488657887312/collision.png)
%end

##### David Mansolino [Cyberbotics] 07/30/2020 06:20:07
`@chungshan` how did you defined the bounding object of both Solid ?

##### Alex Nie 07/30/2020 06:21:57
Does anyone know how to randomly set the initial position of the robot in the program？For example, I have 5 Pioneer robots. I want to randomly set them in different positions at the beginning of the simulation. Which function should I use?

##### David Mansolino [Cyberbotics] 07/30/2020 06:22:55
> Does anyone know how to randomly set the initial position of the robot in the program？For example, I have 5 Pioneer robots. I want to randomly set them in different positions at the beginning of the simulation. Which function should I use?

`@Alex Nie` [https://cyberbotics.com/doc/guide/supervisor-programming#setting-the-position-of-robots](https://cyberbotics.com/doc/guide/supervisor-programming#setting-the-position-of-robots)

##### Alex Nie 07/30/2020 06:24:18
Thank you😃

##### chungshan 07/30/2020 06:25:20
`@David Mansolino` the bounding object is set by using DEF-USE mechanism([https://cyberbotics.com/doc/guide/tutorial-2-modification-of-the-environment#def-use-mechanism](https://cyberbotics.com/doc/guide/tutorial-2-modification-of-the-environment#def-use-mechanism))

the bounding object is set to the shape of solid (both white box and blue box)

##### David Mansolino [Cyberbotics] 07/30/2020 06:28:51
> hello quick UI question.  Is there a way to prevent an object's axes from displaying when that object is selected?  Thanks

`@kentevan` yes this is possible. From R2020b you can disable the handles, from the 'View -> Scene Interactions -> Disable Object Move' menu.


> `@David Mansolino` the bounding object is set by using DEF-USE mechanism([https://cyberbotics.com/doc/guide/tutorial-2-modification-of-the-environment#def-use-mechanism](https://cyberbotics.com/doc/guide/tutorial-2-modification-of-the-environment#def-use-mechanism))

> the bounding object is set to the shape of solid (both white box and blue box)

`@chungshan` Ok so you are using only a set of box nodes right?

##### chungshan 07/30/2020 06:31:29
`@David Mansolino` Yes, each box node is set like this
%figure
![Screenshot_from_2020-07-30_14-30-27.png](https://cdn.discordapp.com/attachments/565154703139405824/738282604230344734/Screenshot_from_2020-07-30_14-30-27.png)
%end

##### David Mansolino [Cyberbotics] 07/30/2020 06:33:08
Can I see the definition of 'inserted\_box\_geo' ?

##### chungshan 07/30/2020 06:35:42
`@David Mansolino`
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/738283666110939257/unknown.png)
%end

##### David Mansolino [Cyberbotics] 07/30/2020 06:36:30
Ok, this one look sperfect, and for the blue one?

##### chungshan 07/30/2020 06:39:02
The blue box is composed of four smaller blue box. (each set is the same like this picture
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/738284506166853703/unknown.png)
%end

##### David Mansolino [Cyberbotics] 07/30/2020 06:41:38
Ok, this should be fine indeed. Have you tried setting the timestep way smaller (e.g. 1 or 2) just to test?

##### chungshan 07/30/2020 06:52:22
`@David Mansolino` I try setting the timestep to 2. It looks better for collision detection. So, is this the only way to get an accurate collision detection?

##### David Mansolino [Cyberbotics] 07/30/2020 06:56:20
It actually depends on the speed of the motion of the object, there is a tradeoff to find between the time step and the motion of the object.


Not that you can put a world timestep small and use a bigger time step for your controller to save computational power.

##### chungshan 07/30/2020 07:04:45
`@David Mansolino` what's ratio of controller time step to world time step do you recommend

##### David Mansolino [Cyberbotics] 07/30/2020 07:05:07
You can for example use 2 and 16.

##### Alex Nie 07/30/2020 07:12:02
`@David Mansolino` Is it possible to control the startup of the controller by programming?


The controller here refers to the external controller‘

##### chungshan 07/30/2020 07:12:56
`@David Mansolino` thanks for your answer! Another question, is it true that friction only works when a physics node is added? If it's true, how can I fix the solid with physics to the world(no matter how large force exterts to it)

##### Sukrati Chaturvedi 07/30/2020 07:22:19
Hi! I'm new to webots. I want to perform simulation for the nao robot. I googled and found that there is a tool named webots for nao( version webot  8.x.x ) that simulates nao in virtual environment.I downloaded the mentioned version. But after installation It asks me to register first. When i click to register i am directed to webot's official website but there is no option to register. Please guide me how can i register to use this tool.

##### David Mansolino [Cyberbotics] 07/30/2020 07:24:09
> The controller here refers to the external controller‘

`@Alex Nie` what do you mean exactly? You want to start the controller from a script?


> `@David Mansolino` thanks for your answer! Another question, is it true that friction only works when a physics node is added? If it's true, how can I fix the solid with physics to the world(no matter how large force exterts to it)

`@chungshan` that's true, however if only one of the two solid has physics, the friction will work, so you can have one fix solid without physics and one with physics.


> Hi! I'm new to webots. I want to perform simulation for the nao robot. I googled and found that there is a tool named webots for nao( version webot  8.x.x ) that simulates nao in virtual environment.I downloaded the mentioned version. But after installation It asks me to register first. When i click to register i am directed to webot's official website but there is no option to register. Please guide me how can i register to use this tool.

`@Sukrati Chaturvedi` [https://cyberbotics.com/doc/guide/general-faq#can-i-still-use-a-webots-version-before-the-r2019a-release](https://cyberbotics.com/doc/guide/general-faq#can-i-still-use-a-webots-version-before-the-r2019a-release)

##### Sukrati Chaturvedi 07/30/2020 07:33:56
`@David Mansolino` thanks alot.

##### David Mansolino [Cyberbotics] 07/30/2020 07:35:21
You're welcome

##### Alex Nie 07/30/2020 08:25:58
> `@Alex Nie` what do you mean exactly? You want to start the controller from a script?

`@David Mansolino` Yes, i want to start the controller from a script


😃 I found this method in python. I used the os.system() command in multi-process to start multiple controllers through a script file

##### David Mansolino [Cyberbotics] 07/30/2020 09:02:56
That sounds good, Webots extern controller can indeed be started like any regular process.

##### yash 07/30/2020 09:29:36
Hi ! I 

> `@yash` yes, as described in the doc, you can use the `--name=...` controller argument: [https://www.cyberbotics.com/doc/guide/using-ros#using-the-standard-ros-controller](https://www.cyberbotics.com/doc/guide/using-ros#using-the-standard-ros-controller)

 I tried doing this but did'nt quite understand where and how to do this ? meaning where should I write the redefined name I want to give using --name controller argument?

##### Stefania Pedrazzi [Cyberbotics] 07/30/2020 09:31:39
`@yash` you should pass the `--name=..` argument to the Webots robot controllers, i.e., if you are not using extern controllers, you should set it in the `Robot.controllerArgs` field

##### yash 07/30/2020 09:33:15
I am using webots+ ROS standard controller , so in this case what should I do ?

##### Stefania Pedrazzi [Cyberbotics] 07/30/2020 09:33:50
You should set the `--name=..` argument in the `Robot.controllerArgs` field of your robot

##### yash 07/30/2020 09:36:24
ohh okay okay , understood , it's done ! I was thinking in a wrong direction before . Thank You...👍

##### EPIC 07/30/2020 10:04:31
Hi! After updating Webots, I can't run the simulation externally from PyCharm anymore. I saw someone else had the same problem, did you find out what the issue was? I installed Webots over the previous folder, so the environment variables should be the same (or do I have to delete the old, and add new ones even though they are the same?).

##### David Mansolino [Cyberbotics] 07/30/2020 10:04:58
From which and to which version of Webots did you updated?

##### EPIC 07/30/2020 10:06:21
From R2020a to R2020b

##### David Mansolino [Cyberbotics] 07/30/2020 10:07:42
What did you set as `PATH / LD_LIBRARY_PATH / DYLD_LIBRARY_PATH` ?


And in the `Add Content Root` ?

##### Alex Nie 07/30/2020 10:10:07
Maybe these environment variables were changed during the upgrade

##### EPIC 07/30/2020 10:15:45
The Path is set to WEBOT\_HOME/lib/controller and WEBOT\_HOME/msys64/mingw64/bin, and the content root is set to my controller (and tried the WEBOT\_HOME/lib/controller/python37)

##### David Mansolino [Cyberbotics] 07/30/2020 10:16:26
Ok, that seems all good.

##### EPIC 07/30/2020 10:16:26
Another question: which module is responsible for detecting collisions? The ODE-engine?

##### David Mansolino [Cyberbotics] 07/30/2020 10:16:37
What is the error you get?


> Another question: which module is responsible for detecting collisions? The ODE-engine?

`@EPIC` yes, ODE is the physics engine.


and collision detection engine

##### unda 07/30/2020 10:17:44
Can some explain how is webot different from gazebo?

##### EPIC 07/30/2020 10:18:03
It has its own collision detection engine? Any name? 🙂


"ImportError: DLL load failed. The given module was not found"


(I think "given" is the right word atleast, translated from my language)


And the error occurs when it tries to import from \_controller


This is actually the same problems I had when I tried to run the controller from PyCharm the first time.. but this time all the environment variables should be correct.. Maybe I should delete and reinstall?

##### Simon Steinmann [Moderator] 07/30/2020 10:22:55
`@unda`  webots uses an optimized and modified version of ODE physics engine. They added things like multicore processing and fluid simulation. But the devs will be able to tell you more

##### David Mansolino [Cyberbotics] 07/30/2020 10:26:06
Here are a few of the main differences:



Webots provides several advantages compared to other open-source robot simulators:

  - Simulations in Webots are reproducible: Reproducibility  is very important to make sure that if you use the same control algorithm your robot will behave exactly the same on two different runs. 

  - Webots is cross-platform, unlike Gazebo, Webots runs on Windows, Linux and macOS.

  - Realistic rendering: As vision is an important area in robotics, it is essential that a simulator can generate highly realistic camera images efficiently. Recently, the rendering engine of Webots has been rewritten from scratch. The new rendering engine allows the simulator to run much faster but also to take advantage of state-of-the-art rendering methods (such as Physics Based Rendering, ambient occlusion, bloom, focus blur, motion blur, etc.) to generate realistic camera images.

  - Improved physics engine: Webots uses an improved version of the Open Dynamics Engine (ODE) to simulate physics. The original version of this simulation engine is widely used by other robot simulators, however, it suffers from instability issues. In the Webots version, the collision detection algorithm was improved to generate much better contacts points (position and number of points) which results in much more stable simulations. This is fundamental for grasping and legged locomotion. Moreover, bug fixes, fluid dynamics and parallelisation were brought to the version of ODE used in Webots, bringing more stability, capabilities and performance comparing to other robot simulators.


Webots provides a cross-language APIs to control the simulated robots (C, C++, Python, Java and MATLAB) and some interface with frameworks such as ROS1 and ROS2.


> It has its own collision detection engine? Any name? 🙂

`@EPIC` no it uses ODE


> This is actually the same problems I had when I tried to run the controller from PyCharm the first time.. but this time all the environment variables should be correct.. Maybe I should delete and reinstall?

`@EPIC` yes, maybe it would be good to try recreating a new pyCharm project from scratch (no need to delete the current one, keep it as a backup): [https://cyberbotics.com/doc/guide/using-your-ide?version=documentation-enhacement-pycharm-instructions](https://cyberbotics.com/doc/guide/using-your-ide?version=documentation-enhacement-pycharm-instructions)

##### Simon Steinmann [Moderator] 07/30/2020 10:29:25
> Webots provides a cross-language APIs to control the simulated robots (C, C++, Python, Java and MATLAB) and some interface with frameworks such as ROS1 and ROS2.

`@David Mansolino` `@unda`   This is one of the biggest advantages of webots compared to all other simulators I've tried. Incredibly detailed documentation and native support for the listed languages. Not just a often slow and incomplete wrapper for let's say python

##### Robsicky 07/30/2020 11:09:02
Also having trouble with environmental variables after installing R2020b. Triple checked documentation, and tried creating a new pycharm project. No luck

##### David Mansolino [Cyberbotics] 07/30/2020 11:10:17
Are you on windows? Is your problem similar to the one of `@EPIC` a few message before?

##### Robsicky 07/30/2020 11:10:44
Yes, and yes🙂

##### David Mansolino [Cyberbotics] 07/30/2020 11:11:48
Ok, which version of Python are you using?

##### Robsicky 07/30/2020 11:12:30
3.7

##### David Mansolino [Cyberbotics] 07/30/2020 11:18:21
Ok, thank you. In that case, would it be possible for you to test the extern controller feature (outside of Pycharm) for python with this new version of Webots in Windows?

[https://cyberbotics.com/doc/guide/running-extern-robot-controllers?tab-os=windows&tab-language=python#introduction](https://cyberbotics.com/doc/guide/running-extern-robot-controllers?tab-os=windows&tab-language=python#introduction)

##### Robsicky 07/30/2020 11:25:51
As in running "python my\_controller.py" in terminal?


Gives the same error

##### David Mansolino [Cyberbotics] 07/30/2020 11:27:02
Yes exactly, but did you set the environment variables before starting the controller ([https://cyberbotics.com/doc/guide/running-extern-robot-controllers?tab-os=windows&tab-language=python#environment-variables](https://cyberbotics.com/doc/guide/running-extern-robot-controllers?tab-os=windows&tab-language=python#environment-variables)) ?

##### Robsicky 07/30/2020 11:28:00
Yes, but give me a second and I'll try once more

##### chenpixx 07/30/2020 11:31:15
The solid is playing fidgety.  Please give me an idea


I cant understand why the reason of it.

##### Robsicky 07/30/2020 11:40:29
> Yes exactly, but did you set the environment variables before starting the controller 

`@David Mansolino`  Using 

` WEBOTS_HOME     C:\Program Files\Webots`

and

`${WEBOTS_HOME}\...`

does not seem to work for me


However, still not working when using the full path for all

##### David Mansolino [Cyberbotics] 07/30/2020 11:42:06
`@chenpixx` you should probably check what is happenning with the contact point usign the optionnal rendering


> However, still not working when using the full path for all

`@Robsicky` ok, then there might be a problem on Windows, can you please report this here and I will try as soon as I have the time to do so?

[https://github.com/cyberbotics/webots/issues/new?template=bug\_report.md](https://github.com/cyberbotics/webots/issues/new?template=bug_report.md)

##### Robsicky 07/30/2020 11:44:50
Yes, I will. Thanks!

##### David Mansolino [Cyberbotics] 07/30/2020 11:53:19
Thank you

##### chenpixx 07/30/2020 11:58:01
> `@chenpixx` you should probably check what is happenning with the contact point usign the optionnal renering

`@David Mansolino`  sorry where is renering? Or what

##### David Mansolino [Cyberbotics] 07/30/2020 11:58:39
[https://cyberbotics.com/doc/guide/the-user-interface#view-menu](https://cyberbotics.com/doc/guide/the-user-interface#view-menu)

##### chenpixx 07/30/2020 12:17:40
Do you have another idea to solve it?

##### David Mansolino [Cyberbotics] 07/30/2020 13:02:33
Webots provide some video recording functionnalities... your video are very difficult to check

##### chenpixx 07/30/2020 13:04:49
I know that property .   Thanks . I. Had used it previously. In fact This video also shows the problem . The solid is finally flying. Thanks

##### EPIC 07/30/2020 13:09:11
Hi! Is there a way to change a bool in a PROTO, in run-time via Supervisor? I tried to use "...getMFNode(0).getField("enableBoundingObject").setSFBool(False)", but my program keeps crashing😅

##### David Mansolino [Cyberbotics] 07/30/2020 13:15:41
Yes that should be feasible.


is it Webots or your controller that is crashing?

##### EPIC 07/30/2020 13:16:05
Webots

##### David Mansolino [Cyberbotics] 07/30/2020 13:16:22
Which version of Webots are you using?

##### EPIC 07/30/2020 13:16:27
I think "getProtoField" would be better than "getField" though


2020b


Maybe I messed up in my PROTO, so that the "enableBoundingObject" is not accessible for Supervisor..?

##### David Mansolino [Cyberbotics] 07/30/2020 13:17:38
Ok, in that case, can you please report this here including a simple controller and simulation that reproduce the problem?

[https://github.com/cyberbotics/webots/issues/new/choose](https://github.com/cyberbotics/webots/issues/new/choose)

We will check what is happennign and fix the issue.

##### EPIC 07/30/2020 13:44:22
It crashed when I tried to both change the bool, and remove the node in the same step. If I first changed the bool to "False", and later deleted the node it worked just fine👍

##### Robsicky 07/30/2020 14:52:09
Hi. What is the purpose of

```
%{ end }%
```

when using Lua in PROTOs?

Also, does anyone know a good source for examples of usage of Lua in PROTOs?

##### David Mansolino [Cyberbotics] 07/30/2020 15:00:34
This is the end of a 'if' condition or 'for' loop


Here is the doc with an example: [https://www.cyberbotics.com/doc/reference/procedural-proto-nodes](https://www.cyberbotics.com/doc/reference/procedural-proto-nodes)

##### Robsicky 07/30/2020 15:05:28
> This is the end of a 'if' condition or 'for' loop

`@David Mansolino` Aaa🙃 Thanks! I've read the docs. Got discombobulated due to the "end" sitting there all by itself:



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/738411995094581258/unknown.png)
%end

##### Majanao 07/30/2020 15:31:43
Hi, I just this strange error message. The thing is, the wbt-file wasn't changed at all.
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/738418557552951366/unknown.png)
%end


If I double click the error message, it shows me the error...
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/738418811052752896/unknown.png)
%end


But it makes no sense.


The simulation was just running. And suddenly that error appeared.

##### EPIC 07/30/2020 15:35:45
In the new update, gravity is only one float instead of a 3D vector


I guess it now expect "gravity -9.81" instead of "gravity 0 0 -9.81" 🙂

##### Majanao 07/30/2020 15:38:34
That worked. Thanks a lot `@EPIC`


Another remark. It's "gravity 9.81" now. My objects just flew away 🤣

##### kentevan 07/30/2020 18:37:07
`@David Mansolino` does this approach completely disable moving objects?  I would still like to move them with Shift+Click/Drag.

##### TJR 07/31/2020 01:20:11
I closed the camera and can't figure out how to reopen it...


Camera view was there... clicked the x in corner to close it.. but can't seem to get it to come up again, even after reload


Ok so if you save world state after closing camera fpv camera window in simulation then it won't open back up after world reload... and can't find way to manually do it.

##### Alex Nie 07/31/2020 02:40:01
How to make the robot's behavior change over time? For example, I want a robot to move to the left in 0~10 seconds, and to the right in 10 seconds to 20 seconds.


> Ok so if you save world state after closing camera fpv camera window in simulation then it won't open back up after world reload... and can't find way to manually do it.

`@TJR` I meet the same question

##### trunc8 07/31/2020 05:05:22
I'm new to Webots. I built my world and did not realise that the simulation was running. Is there a way to reset simulation keeping the current world elements intact?


Or retrieve this environment in some other way? I wish to have it present at t=0.

##### Alex Nie 07/31/2020 05:15:01
> I'm new to Webots. I built my world and did not realise that the simulation was running. Is there a way to reset simulation keeping the current world elements intact?

`@trunc8`  Saving the world and  reset simulation

##### David Mansolino [Cyberbotics] 07/31/2020 05:45:04
`@Alex Nie` you can use in your controller the `wb_robot_get_time`  ([https://www.cyberbotics.com/doc/reference/robot#wb\_robot\_get\_time](https://www.cyberbotics.com/doc/reference/robot#wb_robot_get_time)) function to get the simulation time and act depending on the time.


> Or retrieve this environment in some other way? I wish to have it present at t=0.

`@trunc8` to avoid this in the Future I would recommend setting the starting mode to pause in the preferences: [https://cyberbotics.com/doc/guide/preferences#general](https://cyberbotics.com/doc/guide/preferences#general)


> Ok so if you save world state after closing camera fpv camera window in simulation then it won't open back up after world reload... and can't find way to manually do it.

`@TJR` You can re-open it from the 'Overlay' menu: [https://cyberbotics.com/doc/guide/the-user-interface#overlays-menu](https://cyberbotics.com/doc/guide/the-user-interface#overlays-menu)


> `@David Mansolino` does this approach completely disable moving objects?  I would still like to move them with Shift+Click/Drag.

`@kentevan` can you please remember me which approach you are talking about?


> Another remark. It's "gravity 9.81" now. My objects just flew away 🤣

`@Majanao` you should set 'gravity' to -9.81 and 'coordinateSystem' to 'ENU'.


Did you updated manually the header (`#VRML_SIM ...`) of the world file?

##### trunc8 07/31/2020 05:58:28
> `@trunc8`  Saving the world and  reset simulation

`@Alex Nie` Thanks, worked for me! The tutorials had recommended to avoid doing this as it would accumulate error. How does that work?

##### David Mansolino [Cyberbotics] 07/31/2020 06:29:51
To make sure your world is 'clean' it is recommended to open your world file in a text edirot, and remove all the lines starting with 'hidden'.

##### Alex Nie 07/31/2020 06:37:10
> `@Alex Nie` you can use in your controller the `wb_robot_get_time`  ([https://www.cyberbotics.com/doc/reference/robot#wb\_robot\_get\_time](https://www.cyberbotics.com/doc/reference/robot#wb_robot_get_time)) function to get the simulation time and act depending on the time.

`@David Mansolino` Thanks a lot😃

##### David Mansolino [Cyberbotics] 07/31/2020 06:37:30
You're welcome

##### ST33LDI9ITAL 07/31/2020 06:38:29
Are there any demos that use joystick?

##### David Mansolino [Cyberbotics] 07/31/2020 06:39:59
Yes, this controller is using the Joystick API to interface the controller with a racing wheel: [https://github.com/cyberbotics/webots/tree/master/projects/vehicles/controllers/racing\_wheel](https://github.com/cyberbotics/webots/tree/master/projects/vehicles/controllers/racing_wheel)

##### ST33LDI9ITAL 07/31/2020 06:41:54
Awesome

##### Robsicky 07/31/2020 08:09:26
Hi! Is using Lua in protos to change translations and rotations generally a bad idea? From the warnings I get, I assume this should be avoided:

```
PROTO example [
    field SFVec3f       translation    0 0 0
    field SFRotation    rotation       0 1 0 0
]
{
    Solid {
        %{
            local T = fields.translation.value
            local R = fields.rotation.value
        }%
        translation %{=T.x}% %{=T.y}% %{=T.z}%
        rotation %{=R.x}% %{=R.y}% %{=R.z}% %{=R.a}%

    }
}
```


But I also tried to set the translation and rotation of a Transform inside the Solid, and this also resulted in my simulation freezing for a moment

##### David Mansolino [Cyberbotics] 07/31/2020 08:26:41
Yes, that is indeed a bad idea, one problem for example will be that when you move the object with the handles in Webots, it will generate many many regeneration of the PROTO.


But in most of the case there are some workaround. What do you wahtn to achieve exactly?

##### Robsicky 07/31/2020 08:47:06
I tried to find a "workaround" for this issue: [https://github.com/cyberbotics/webots/issues/214](https://github.com/cyberbotics/webots/issues/214)

##### David Mansolino [Cyberbotics] 07/31/2020 08:48:11
Oh ok I see.

##### Robsicky 07/31/2020 08:48:56
I've tested a few things, on my own project as well as the one in the issue, and I think I have found something interesting

##### David Mansolino [Cyberbotics] 07/31/2020 08:49:27
ok good news, do not hesitate to add your conclusion to the issue 🙂

##### Robsicky 07/31/2020 08:49:46
Doing it now 👍

##### David Mansolino [Cyberbotics] 07/31/2020 08:50:50
Perfect, thank you

##### Robsicky 07/31/2020 09:08:56
Do you have a moment to read my last comment? [https://github.com/cyberbotics/webots/issues/214](https://github.com/cyberbotics/webots/issues/214)

You might be familiar with what was causing the issue.

##### David Mansolino [Cyberbotics] 07/31/2020 09:10:44
Yes sure, I will have a look as soon as I have some time and answer you directly in the issue.

##### Robsicky 07/31/2020 09:11:55
Thanks a lot! You guys are doing a great job btw👌

##### EPIC 07/31/2020 10:02:14
Hi! I want to store some values in a table, in a PROTO node for later use. Where should this table be placed?

##### David Mansolino [Cyberbotics] 07/31/2020 10:02:32
From where do you need to store these values?

##### EPIC 07/31/2020 10:04:24
In my PROTO, I've added a "SFInt32" field. This counter will decide how many objects I'm going to have as a child, in the Solid node. But I want the objects to be placed at specific places, and therefore use a table to give the new objects their translation and rotation


So it's only the PROTO itself that need to know the values

##### David Mansolino [Cyberbotics] 07/31/2020 10:04:58
Then use a MFVec3f field.

##### EPIC 07/31/2020 10:05:08
Ok, thanks 🙂

##### David Mansolino [Cyberbotics] 07/31/2020 10:05:13
You're welcome

##### kaustav 07/31/2020 10:58:15
Hello everyone. Hope everyone is safe and sound during the corona times.

I'm Kaustav. I wanted to attach a lidar to my differential drive and also make a cpp controller for it.

Consequently, i also want to use ROS cartographer for SLAM in vehicles environment. Any suggestions?

##### David Mansolino [Cyberbotics] 07/31/2020 10:59:25
Hi, have you tried our ROS tutorial?

[https://cyberbotics.com/doc/guide/tutorial-8-using-ros](https://cyberbotics.com/doc/guide/tutorial-8-using-ros)

We have an example of SLAM simulation: [http://wiki.ros.org/webots\_ros/Tutorials/Sample%20Simulations#Simulation\_Pionneer\_3\_AT](http://wiki.ros.org/webots_ros/Tutorials/Sample%20Simulations#Simulation_Pionneer_3_AT)

##### kaustav 07/31/2020 11:02:58
Thank you `@David Mansolino` . I will try the same and let you know

##### JacobW 07/31/2020 19:00:19
Hey all, I've been trying to get Webots to use python3.7 for the past few days but constantly get this error:



Traceback (most recent call last):

  File "BeerDelivery.py", line 5, in <module>

    from controller import Robot

  File "/Applications/Webots.app/lib/controller/python37/controller.py", line 32, in <module>

    import \_controller

ImportError: dlopen(/Applications/Webots.app/lib/controller/python37/\_controller.so, 2): Library not loaded: /Library/Frameworks/Python.framework/Versions/3.7/Python

  Referenced from: /Applications/Webots.app/lib/controller/python37/\_controller.so

  Reason: image not found

WARNING: 'BeerDelivery' controller exited with status: 1.



So far I've tried:

reinstalling python3

installing pyenv and setting my version to everything from 3-3.8 (including 3.7.7 and 3.7.0)

Adding a symlink to a different python.framework on my PC in the specified location



So far, nothing has been super helpful. Was wondering if anyone else has run into this issue and if they'd be willing to help

## August

##### Akash 08/01/2020 15:14:37
How can I store the experimental values/console display values to a text file?

##### ST33LDI9ITAL 08/01/2020 20:05:15
Does this support setting vars to node properties for hotloading? So don't have to constantly reload world to test different values?

##### tangdan 08/02/2020 01:50:01
In the section of 'Interfacing Webots to Third Party Software with TCP/IP', 

how to run the code of client.c? 3Q

##### oroulet 08/02/2020 05:23:56
I just opened that one:[https://github.com/cyberbotics/webots/issues/2057](https://github.com/cyberbotics/webots/issues/2057)

if anybody has an explanation/bypass I am interested

##### (,-*-) 08/02/2020 19:25:31
Hi, I have some problem in built structure of my robot. May I send my project to someone to see where problem might be?

##### ST33LDI9ITAL 08/03/2020 04:43:49
just upgraded to new version and now getting: 

Makefile:25: Files/Webots /resources/Makefile.include: No such file or directory

make: *** No rule to make target 'Files/Webots /resources/Makefile.include'.  Stop.


trying to compile copy of mavic demo world I've been tinkering on


think it was caused by not copying over all the world files...proto/plugin. fixed by just recopying original mavic world and copy/paste my own code over

##### David Mansolino [Cyberbotics] 08/03/2020 06:00:30
> Hey all, I've been trying to get Webots to use python3.7 for the past few days but constantly get this error:

> 

> Traceback (most recent call last):

>   File "BeerDelivery.py", line 5, in <module>

>     from controller import Robot

>   File "/Applications/Webots.app/lib/controller/python37/controller.py", line 32, in <module>

>     import \_controller

> ImportError: dlopen(/Applications/Webots.app/lib/controller/python37/\_controller.so, 2): Library not loaded: /Library/Frameworks/Python.framework/Versions/3.7/Python

>   Referenced from: /Applications/Webots.app/lib/controller/python37/\_controller.so

>   Reason: image not found

> WARNING: 'BeerDelivery' controller exited with status: 1.

> 

> So far I've tried:

> reinstalling python3

> installing pyenv and setting my version to everything from 3-3.8 (including 3.7.7 and 3.7.0)

> Adding a symlink to a different python.framework on my PC in the specified location

> 

> So far, nothing has been super helpful. Was wondering if anyone else has run into this issue and if they'd be willing to help

`@JacobW` did you installed Python from [https://www.python.org/downloads](https://www.python.org/downloads) ?

I would also try setting in the Webots Preferences the 'python command' to the absolute path of the Python application.


> How can I store the experimental values/console display values to a text file?

`@Akash` like in any regular programm, you simply have to open a file and write to it, which language are you using?


> In the section of 'Interfacing Webots to Third Party Software with TCP/IP', 

> how to run the code of client.c? 3Q

`@tangdan` you have to compile it and then you will be able to run it.


> Hi, I have some problem in built structure of my robot. May I send my project to someone to see where problem might be?

`@(,-*-)` feel free to share it here.

##### aplong 08/03/2020 06:26:58
Hello everyone, I'm new to webots and I've been trying it for the past week with a velodyne lidar. I installed ROS and webots on Windows 10.

Since I am working on Windows, my option is to use python in creating the custom controller and I was able to launch ROS node using rospy. Now, I am trying to launch an ROS node using the physics plugin. Has anyone tried launching an ROS node from physics plugin? Or is it possible? Appreciate any suggestions.

##### David Mansolino [Cyberbotics] 08/03/2020 06:28:57
Hi, I don't know anyone how did this, but in principle this should be doable. But why do you need to install it specifically from the physics plugin?

##### aplong 08/03/2020 06:38:16
I am trying to get the positions of the bodies using the ode physics api.


Thanks David. I'll try if I can make it work. Otherwise, I'll use supervisor api instead. It seems I can get the status of the robots from there.

##### David Mansolino [Cyberbotics] 08/03/2020 06:50:05
Yes, using the Supervisor APi is indeed simpler.

##### saditya 08/03/2020 08:34:56
A little guidance if someone could help? Have the slope structure and stairs but need some help with the "see saw" structure. The structure(see-saw) should go down on one side once the robot is on the slope. Sorry if this question is on the wrong place, I am trying to implement this now in WEBOTS if someone could help?
%figure
![Selection_010.png](https://cdn.discordapp.com/attachments/565154703139405824/739763222172663898/Selection_010.png)
%end

##### Olivier Michel [Cyberbotics] 08/03/2020 08:49:57
This can be implemented using a Solid node and a passive HingeJoint ([https://cyberbotics.com/doc/reference/hingejoint](https://cyberbotics.com/doc/reference/hingejoint)).

##### saditya 08/03/2020 09:18:55
> This can be implemented using a Solid node and a passive HingeJoint ([https://cyberbotics.com/doc/reference/hingejoint](https://cyberbotics.com/doc/reference/hingejoint)).

`@Olivier Michel`  Am I missing something here? I am new to this environment so a lot of questions.
%figure
![SS.png](https://cdn.discordapp.com/attachments/565154703139405824/739774289401872424/SS.png)
%end

##### Olivier Michel [Cyberbotics] 08/03/2020 09:21:53
That seems correct. The rotating board should be added in the `endPoint` field of the `HingeJoint` node.

##### saditya 08/03/2020 09:29:03
> That seems correct. The rotating board should be added in the `endPoint` field of the `HingeJoint` node.

`@Olivier Michel` I added two solids now? Is there anything I need to add more? Anything in the hinge joint parameter? This structure should go down when the robot approaches towards the end of it.

##### Olivier Michel [Cyberbotics] 08/03/2020 09:31:41
Yes, it should work.

##### saditya 08/03/2020 09:54:41
> Yes, it should work.

`@Olivier Michel` The second part which i added in the hinge joint , end point that part doesn't go down when the robot is on it. Did i do something wrong?

##### Olivier Michel [Cyberbotics] 08/03/2020 09:59:04
Did you add a Physics node to your board Solid?


And a boundingObject?

##### watchdogs132 08/03/2020 10:02:13
"WARNING: The current physics step could not be computed correctly. Your world may be too complex. If this problem persists, try simplifying your bounding object(s), reducing the number of joints, or reducing WorldInfo.basicTimeStep."

I'm getting this error , as a result my bot, in majority of my iterations gets stuck while climbing the stairs . Is there a tool or a trick to know which bounding objects are causing the problem ? .

##### Olivier Michel [Cyberbotics] 08/03/2020 10:04:08
I would recommend you to simplify the world file until the warning disappear. You will then understand who is the culprit...


This kind of error is often caused by mechanical loops (e.g., an object getting in contact with another object connected to itself via a series of joints)

##### oroulet 08/03/2020 10:35:46
RangeFinder.GetRangeImage()sometimes returns None in python. Reloading and restarting robot controller seems to fix it.. until the next restart of robot controller...

What can be the reason? when does GetRangeImage is supposed to return None?

We enable the camera one step before taking the picture then disable it again in the same step

##### Olivier Michel [Cyberbotics] 08/03/2020 10:37:52
Is it a reproducible problem or does it occur randomly?

##### oroulet 08/03/2020 10:40:00
at least very easy to reproduce in our environment. but our environment starts to be a bit complicated now

I can try to simplify it and send it over but  I was wondering if there is some known situastions where this can happen

##### Olivier Michel [Cyberbotics] 08/03/2020 10:40:31
GetRangeImage should return None if the sensor is indeed disabled or was enabled but the robot step amount of time elapsed since enable is inferior to the value passed to the enable function.


Like, enable(10), step(9) GetRangeImage would return None.


enable(10), step(10), GetRangeImage would return an image.

##### oroulet 08/03/2020 10:42:52
thanks. So at least it seems to be an enabling issue. Right now I am using enable(64) and step(64)....

##### saditya 08/03/2020 11:16:31
> Did you add a Physics node to your board Solid?

`@Olivier Michel` IN the SS you can see that this is the second half of the board which needs to act as a see saw? Should both the solids(main) and solid(end point) have a physics node? At the moment they both have a bounding object and one of them has a physics node as seen. Also does it have something to do with the mass? It's at -1 which i guess maybe wrong.
%figure
![Selection_017.png](https://cdn.discordapp.com/attachments/565154703139405824/739803888630104114/Selection_017.png)
%end

##### Olivier Michel [Cyberbotics] 08/03/2020 11:49:30
Leaving the mass to -1 is fine (mass will be computed according to the density and bounding object volume).


Your screenshot looks good. It should work as expected. If not you may have to adjust the HingeJointParameter fields.

##### Kormit 08/03/2020 12:37:39
Hi, I was wondering how you can get the raw sensor values bypassing the look up table so I can know what values the sensor is actually receiving (to then create a look up table).

##### David Mansolino [Cyberbotics] 08/03/2020 12:38:48
You can't, but you can get the content of the look up table to compute the raw value:  [https://cyberbotics.com/doc/reference/distancesensor#wb\_distance\_sensor\_get\_lookup\_table](https://cyberbotics.com/doc/reference/distancesensor#wb_distance_sensor_get_lookup_table)

##### Alex Nie 08/03/2020 12:39:12
Suppose I have multiple robots, how do I get these robots to get each other's position?

##### David Mansolino [Cyberbotics] 08/03/2020 12:39:51
You can use GPS + emitter-receiver mechanism: [https://www.cyberbotics.com/doc/guide/samples-devices#emitter\_receiver-wbt](https://www.cyberbotics.com/doc/guide/samples-devices#emitter_receiver-wbt)

##### Alex Nie 08/03/2020 12:40:14
OK

##### Kormit 08/03/2020 12:43:11
I get a no attribute error when I call `sensor.getLookupTable()`, is this method not available in python?

##### David Mansolino [Cyberbotics] 08/03/2020 12:44:36
It should be available: [https://cyberbotics.com/doc/reference/distancesensor?tab-language=python#wb\_distance\_sensor\_get\_lookup\_table](https://cyberbotics.com/doc/reference/distancesensor?tab-language=python#wb_distance_sensor_get_lookup_table)

But this is available only in the latest version of Webots (R2020b).

##### Kormit 08/03/2020 12:45:55
Thanks, didn't have the latest version!

##### David Mansolino [Cyberbotics] 08/03/2020 12:46:10
You're welcome

##### saditya 08/03/2020 12:49:18
> Your screenshot looks good. It should work as expected. If not you may have to adjust the HingeJointParameter fields.

`@Olivier Michel` A bit of visual to explain my see saw part. Does it matter on my robot's mass as well? Regarding hinge parameters, what attributes of it should i look at?
%figure
![Selection_019.png](https://cdn.discordapp.com/attachments/565154703139405824/739827236277977129/Selection_019.png)
%end

##### Olivier Michel [Cyberbotics] 08/03/2020 12:54:12
To test it, I would simply apply a force on the seesaw using Alt + mouse left click.


It should move (rotate about the hinge)


You may have a look at this example which relies on passive hinge joints as well: [https://cyberbotics.com/doc/guide/samples-howto#passive\_dynamic\_walker-wbt](https://cyberbotics.com/doc/guide/samples-howto#passive_dynamic_walker-wbt)

##### saditya 08/03/2020 12:57:45
> It should move (rotate about the hinge)

`@Olivier Michel` As per your advice, I tried and it doesn't not move. It remains as it was on applying force.

##### Olivier Michel [Cyberbotics] 08/03/2020 13:10:26
Strange... I am sorry I cannot further help on this one unless you have an active Premier service support contract.

##### Robsicky 08/03/2020 13:16:49
How to use getPosition (absolute position) for a PROTO node built on "Slot"?

##### Kormit 08/03/2020 13:39:36
After updating to 2020b, I'm getting an error

`FILE_NAME.proto': error: Template engine error: luaL_dostring error : ...m Files/Webots-2020-b/resources/lua/liluat/liluat.lua:520: attempt to perform arithmetic on local 'line_number' (a nil value).`

I'm not sure what the issue is.

##### Stefania Pedrazzi [Cyberbotics] 08/03/2020 13:42:00
`@Robsicky` the `Supervisor.getPosition` node works only for Transform (or derived) nodes. So if your PROTO node is based on the `Slot` node, then the  `getPosition` function is not available.

##### Robsicky 08/03/2020 13:42:49
Oki


Thanks

##### Stefania Pedrazzi [Cyberbotics] 08/03/2020 13:44:13
you can work around this by adding a dummy Node at the Slot root location that is visible from the scene tree (i.e. that is defined in the PROTO fields)

##### David Mansolino [Cyberbotics] 08/03/2020 13:51:38
> After updating to 2020b, I'm getting an error

> `FILE_NAME.proto': error: Template engine error: luaL_dostring error : ...m Files/Webots-2020-b/resources/lua/liluat/liluat.lua:520: attempt to perform arithmetic on local 'line_number' (a nil value).`

> I'm not sure what the issue is.

`@Kormit` are you getting this with one specific PROTO?

##### Kormit 08/03/2020 13:51:50
Yes

##### David Mansolino [Cyberbotics] 08/03/2020 13:51:59
Can you share it?

##### Kormit 08/03/2020 13:53:38
It appears I don't get the error any more

##### David Mansolino [Cyberbotics] 08/03/2020 13:54:10
OK, let us know if it appears again

##### Kormit 08/03/2020 13:55:29
Will do

##### (,-*-) 08/03/2020 15:13:02
> Is there something like real time synchronization?

##### Olivier Michel [Cyberbotics] 08/03/2020 15:13:47
Yes, if you press the "run real-time" button (a single forward arrow), then, your simulation will be in sync with real time.

##### Alex Nie 08/03/2020 15:44:15
How could robots communicate with each other?

##### Simon Steinmann [Moderator] 08/03/2020 15:45:45
`@Olivier Michel` does the 'run realtime' try to keep the R factor at 1, or does it actually try to synchronize with system time? Meaning: does it speed up a little if there was a little hitch and it fell behind

##### Olivier Michel [Cyberbotics] 08/03/2020 15:57:33
`run real-time` tries to keep the speedometer value as close as possible to 1, based on system time and the recent history of time steps. It may hence speed-up or slow down depending on its evaluation of the amount of time needed to sleep.


`@Alex Nie`: with Emitter and a Receiver devices.

##### alxy 08/03/2020 17:30:53
Hello, I am having problems adapting this example of a robotic arm ([https://cyberbotics.com/doc/guide/irb4600-40](https://cyberbotics.com/doc/guide/irb4600-40)) to a custom arm, namely the Mirobot by Wlkata ([https://www.wlkata.com/](https://www.wlkata.com/)). I created a proto file of the arm and that all worked nicely, but I am unable to get the integration with the inverse kinematics library working. The arm does move, however it is far from a position a would assume him to be. Is there anything I need to take care of if I go from world coordinates to the required joint angles? Here is my test world and the controller I use which is heavily based on the example: [https://drive.google.com/file/d/13HEgJ4vUrTgMWW1TyhGchBVH3JkzkNPz/view?usp=sharing](https://drive.google.com/file/d/13HEgJ4vUrTgMWW1TyhGchBVH3JkzkNPz/view?usp=sharing)

##### Alex Nie 08/04/2020 01:24:56
> `run real-time` tries to keep the speedometer value as close as possible to 1, based on system time and the recent history of time steps. It may hence speed-up or slow down depending on its evaluation of the amount of time needed to sleep.

`@Olivier Michel` Thanks a lot

##### David Mansolino [Cyberbotics] 08/04/2020 05:42:43
Hi `@alxy`, we are currently improving this sample to take advantage of the new version R2020b of Webots: [https://github.com/cyberbotics/webots/pull/2062/files](https://github.com/cyberbotics/webots/pull/2062/files)

I would recommend to start from this version of the controller as it is way more generic.


> After updating to 2020b, I'm getting an error

> `FILE_NAME.proto': error: Template engine error: luaL_dostring error : ...m Files/Webots-2020-b/resources/lua/liluat/liluat.lua:520: attempt to perform arithmetic on local 'line_number' (a nil value).`

> I'm not sure what the issue is.

`@Kormit` I just tried your PROTO file and seems to work perfectly for me, maybe you don't have space anymore on your hard drive or Webots does not have write access in the temporary directory.

##### Robsicky 08/04/2020 09:07:25
Hi! Have you guys managed to fix this?😮 [https://github.com/cyberbotics/webots/pull/2063](https://github.com/cyberbotics/webots/pull/2063)

##### Stefania Pedrazzi [Cyberbotics] 08/04/2020 09:08:54
Hi `@Robsicky`, yes the problem with the Tinkerbots parts translation is fixed in [https://github.com/cyberbotics/webots/pull/2063](https://github.com/cyberbotics/webots/pull/2063). It will probably be available tomorrow in the latest nightly build.

##### Robsicky 08/04/2020 09:14:17
Fantastic!😀 Was it a PROTOs problem, and not Tinkerbots specific? Hope it solves my problem as well.

##### Stefania Pedrazzi [Cyberbotics] 08/04/2020 09:14:50
Yes, it was a generic nested PROTO issue.

##### saditya 08/04/2020 10:08:37
Could I implement something like this on WEBOTS? The axe gate is a rotating axe that periodically blocks the

passage of 2 gates. This is more like and obstacle for a robot to pass from while the circular gate moves with a door in the background.
%figure
![gate.png](https://cdn.discordapp.com/attachments/565154703139405824/740149188054220851/gate.png)
%end

##### Olivier Michel [Cyberbotics] 08/04/2020 10:10:20
Sure.


What is the problem?

##### saditya 08/04/2020 10:14:36
> Sure.

`@Olivier Michel` Could you guide me a bit with the structure of it? The shape implementation of the axe gate? and the background door could be just a solid?

##### Olivier Michel [Cyberbotics] 08/04/2020 10:18:16
Yes, the gate Solid without Physics (so that it is attached to the static world) should be connect to the axe Solid using a HingeJoint allowing the rotation. Then, you should add a motor in the HingeJoint to control it.

##### (,-*-) 08/04/2020 10:30:19
Hi, may I ask you to check where could be a problem that my simulation never go past 2.176 second? Program in there is very simple, just send from one robots emitter to the other robots receiver desired joint angles - which executes.

I thought that my problem might be within bounding boxes that I use same shape as I imported as visualized, so I tried to use boxes and cylinders but outcome was the same
> **Attachment**: [DP\_Webots.zip](https://cdn.discordapp.com/attachments/565154703139405824/740154646412394496/DP_Webots.zip)

##### saditya 08/04/2020 10:33:44
> Yes, the gate Solid without Physics (so that it is attached to the static world) should be connect to the axe Solid using a HingeJoint allowing the rotation. Then, you should add a motor in the HingeJoint to control it.

`@Olivier Michel` Can we design these modified shapes on WEBOTS? Like the axe gate? Or do I need to use some designing software and import it to WEBOTS?

##### David Mansolino [Cyberbotics] 08/04/2020 10:40:37
> Hi, may I ask you to check where could be a problem that my simulation never go past 2.176 second? Program in there is very simple, just send from one robots emitter to the other robots receiver desired joint angles - which executes.

> I thought that my problem might be within bounding boxes that I use same shape as I imported as visualized, so I tried to use boxes and cylinders but outcome was the same

`@(,-*-)` instead of encapsulating the call to `robot_receiver.nextPacket()` in a `try`, you should rather use this kind of structure:

```python
while robot_receiver.getQueueLength(self) > 0:
  msg = robot_receiver.getData()
  joint_positions = struct.unpack("ddddd",msg)
  robot_receiver.nextPacket()
```


> `@Olivier Michel` Can we design these modified shapes on WEBOTS? Like the axe gate? Or do I need to use some designing software and import it to WEBOTS?

`@saditya` it is probably simpler to design the shape in an external 3D modelling software such as Blender


> `@Kormit` I just tried your PROTO file and seems to work perfectly for me, maybe you don't have space anymore on your hard drive or Webots does not have write access in the temporary directory.

`@David Mansolino` second thought, on Windows 10 I can reproduce the problem

##### Kormit 08/04/2020 10:46:44
`@David Mansolino` Does this mean its a bug within webots?

##### David Mansolino [Cyberbotics] 08/04/2020 10:48:54
Probbaly, I am still investigating

##### Kormit 08/04/2020 10:50:17
Thanks

##### David Mansolino [Cyberbotics] 08/04/2020 10:57:28
It is indeed related to Webots, I can reproduce it in several worlds and PROTOs of the latest release on Windows

##### baby\_droid\_yoda 08/04/2020 11:02:37
Hello friends, I have converted the BCND Moveo robot arm to the protofile with urdf2webots library, but I couldn't fix it. I don't know much about proto files.
%figure
![urdf2webots_error.PNG](https://cdn.discordapp.com/attachments/565154703139405824/740162778655883265/urdf2webots_error.PNG)
%end

##### Kormit 08/04/2020 11:06:41
`@David Mansolino` Would you recommend me using the old version?

##### David Mansolino [Cyberbotics] 08/04/2020 11:07:16
Yes, we will fix it soon, in the meantime you can use the old version.


Or wait, I may have a quick fix


Can you try adding this file in 'WEBOTS\_HOME\msys64\mingw64\bin' ?
> **Attachment**: [imagequant.dll](https://cdn.discordapp.com/attachments/565154703139405824/740164526338605066/imagequant.dll)


> Hello friends, I have converted the BCND Moveo robot arm to the protofile with urdf2webots library, but I couldn't fix it. I don't know much about proto files.

`@baby_droid_yoda` can you please share the generated PROTO file

##### baby\_droid\_yoda 08/04/2020 11:14:44
I shared the moveo robot arm proto file on github [https://github.com/harunlakodla/BCN3D\_Moveo\_Robot\_Arm\_Webots\_Proto/blob/master/MoveoUrdf.proto](https://github.com/harunlakodla/BCN3D_Moveo_Robot_Arm_Webots_Proto/blob/master/MoveoUrdf.proto) 

> `@baby_droid_yoda` can you please share the generated PROTO file

`@David Mansolino`

##### Kormit 08/04/2020 11:26:45
Yes that seemed to work `@David Mansolino`

##### David Mansolino [Cyberbotics] 08/04/2020 11:26:50
> I shared the moveo robot arm proto file on github [https://github.com/harunlakodla/BCN3D\_Moveo\_Robot\_Arm\_Webots\_Proto/blob/master/MoveoUrdf.proto](https://github.com/harunlakodla/BCN3D_Moveo_Robot_Arm_Webots_Proto/blob/master/MoveoUrdf.proto) 

> `@David Mansolino`

`@baby_droid_yoda` can you please try with the latest version of the importer?


> Yes that seemed to work `@David Mansolino`

`@Kormit` perfect, thank you for the feedback

##### Sanket Khadse 08/04/2020 12:05:57
Wanted to confirm that, is it possible to use an external header file in controller code? I put the c header file at include/controller/c/webots.

##### David Mansolino [Cyberbotics] 08/04/2020 12:06:44
Yes it is possible, but no need to pu it into `include/controller/c/webots`


You can simply put it in your controller folder

##### Sanket Khadse 08/04/2020 12:08:49
Thank you. But my way works too, right? Or should I move it?

##### Olivier Michel [Cyberbotics] 08/04/2020 12:09:34
It works, but it's a bad practice.

##### saditya 08/04/2020 12:57:49
> Yes, the gate Solid without Physics (so that it is attached to the static world) should be connect to the axe Solid using a HingeJoint allowing the rotation. Then, you should add a motor in the HingeJoint to control it.

`@Olivier Michel` How should I simulate the hinge joint to move the axe solid? Part of controller code?

##### Olivier Michel [Cyberbotics] 08/04/2020 12:59:15
The hinge joint is simulated by the HingeJoint node in your model. Then, it should include a RotationalMotor node which you will be able to control from a controller program.

##### saditya 08/04/2020 13:02:26
> The hinge joint is simulated by the HingeJoint node in your model. Then, it should include a RotationalMotor node which you will be able to control from a controller program.

`@Olivier Michel` Thanks a lot! 🙂

##### baby\_droid\_yoda 08/04/2020 13:06:18
> `@baby_droid_yoda` can you please try with the latest version of the importer? 

`@David Mansolino` Same mistake,2020b I use

##### David Mansolino [Cyberbotics] 08/04/2020 13:08:12
Can you shared the PROTO generated with the latest version of the importer?

##### baby\_droid\_yoda 08/04/2020 13:22:08
> Can you shared the PROTO generated with the latest version of the importer?

`@David Mansolino` urdf2webots 1.0.3 it is necessary

##### David Mansolino [Cyberbotics] 08/04/2020 13:22:56
Latest version is 1.0.4: [https://pypi.org/project/urdf2webots/](https://pypi.org/project/urdf2webots/)

##### Simon Steinmann [Moderator] 08/04/2020 13:26:14
I'm still running a nightly build from before the release. What is the best way of updating?  I'm curious in general, as I create PRs etc, I wanna have the newest builds to test out features and bugfixes. What is the best procedure to update?

##### David Mansolino [Cyberbotics] 08/04/2020 13:27:18
In that case you can simply get the new nightly of R2021a if you want to be the most up to date as possible

##### Simon Steinmann [Moderator] 08/04/2020 13:27:40
it uses the latest release as its base?

##### David Mansolino [Cyberbotics] 08/04/2020 13:27:48
yes sure

##### Simon Steinmann [Moderator] 08/04/2020 13:28:04
is it possible to update, or do I have to do a fresh install every time?

##### David Mansolino [Cyberbotics] 08/04/2020 13:28:30
It depends, how did you installed Webots?

##### Simon Steinmann [Moderator] 08/04/2020 13:28:55
downloaded the deb and installed it


can the nightly build be installed with apt?

##### David Mansolino [Cyberbotics] 08/04/2020 13:30:32
Ok, in that case yes you need to re-install, note that using the tar.gz is probably simpler for your setup so that you can even have several versions installed at the same time and just need to change the WEBOTS\_HOME environment variable.


> can the nightly build be installed with apt?

`@Simon Steinmann` no, you need to download the package.

##### Simon Steinmann [Moderator] 08/04/2020 13:31:39
okay, so I can download the tar.gz lets say to home/webots/version-xyz/ adjust the home variable and i'm done?


and when I get a new one, I extract it there too and change the variable again

##### David Mansolino [Cyberbotics] 08/04/2020 13:33:21
Yes exactly


you may also have to install a few packages: [https://cyberbotics.com/doc/guide/installation-procedure#installing-the-tarball-package](https://cyberbotics.com/doc/guide/installation-procedure#installing-the-tarball-package)

##### Simon Steinmann [Moderator] 08/04/2020 13:34:42
thank you 🙂

##### David Mansolino [Cyberbotics] 08/04/2020 13:34:53
You're welcome

##### Olivier Michel [Cyberbotics] 08/04/2020 13:35:32
To stay on the bleeding edge, I would recommend you to compile Webots from the sources. Any update is easy: `git pull` will download only the files which changed and you simply have to recompile to use the latest version. Also, you will be able to easily switch between branches: `master` currently corresponds to `R2020b-rev1` and  `develop` currently corresponds to `R2021a`. Instructions to compile from the sources are provided here: [https://github.com/cyberbotics/webots/wiki](https://github.com/cyberbotics/webots/wiki). It is easier than it looks 😉 .

##### Simon Steinmann [Moderator] 08/04/2020 13:35:50
One little thing, Im updating now, because worlds created with the new release cannot be opened with an old version. For people with a regular install, webots gets updated automatically?


I think the gravity notation change causes the issue

##### Olivier Michel [Cyberbotics] 08/04/2020 13:37:07
Webots R2020b should be able to open worlds created with R2020a and automatically update the gravity.

##### David Mansolino [Cyberbotics] 08/04/2020 13:37:36
What was the value of the gravity you were using in R2020a ?

##### Simon Steinmann [Moderator] 08/04/2020 13:37:38
yes, but not the other way around. So if someone is running a old version and tries to open a file from a collegue, it doesnt work

##### Olivier Michel [Cyberbotics] 08/04/2020 13:37:48
(that may not work if the world was created with a nightly build of R2020b).

##### Simon Steinmann [Moderator] 08/04/2020 13:38:24
I'm on 2020b and cannot open 2020a world


gravity 0 0 -9.81  vs gravity 9.81

##### Olivier Michel [Cyberbotics] 08/04/2020 13:38:52
As a quick fix, you can simply change the header (first line) of your world/proto file and write R2020a instead of R2020b.


Then Webots R2020b should be able to open/convert it.

##### Simon Steinmann [Moderator] 08/04/2020 13:39:29
i'm just wanna make sure that people who use a normal install of webots dont run into that problem

##### Olivier Michel [Cyberbotics] 08/04/2020 13:39:57
In that case, I would recommend you to open and save your world with R2020b and require your users to use R2020b.

##### Vaibhav 08/04/2020 13:40:06
Hey im trying to make a world with a road but the vehicles fall through the road what cab i do?

##### David Mansolino [Cyberbotics] 08/04/2020 13:41:01
`@Vaibhav` can you post a printscreen of the problem?

##### Vaibhav 08/04/2020 13:42:52

%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/740203106020884500/unknown.png)
%end

##### David Mansolino [Cyberbotics] 08/04/2020 13:43:53
You probably just need to set the contact properties between he wheel and the road.

Here is an example: [https://github.com/cyberbotics/webots/blob/master/projects/vehicles/worlds/city.wbt#L14-L74](https://github.com/cyberbotics/webots/blob/master/projects/vehicles/worlds/city.wbt#L14-L74)

##### Vaibhav 08/04/2020 13:45:20
Okayy thanks I'm new to the software

##### David Mansolino [Cyberbotics] 08/04/2020 13:45:35
You're welcome


They key point to solve the problem is to set the 'softCFM' of the contact properties to something around '1e-05' to make the ground less soft.

##### Vaibhav 08/04/2020 13:46:52
Okayy ill try that

##### Simon Steinmann [Moderator] 08/04/2020 13:56:54
how do I launch webots isntalled with tarball?

##### Olivier Michel [Cyberbotics] 08/04/2020 13:57:35
Go to the `webots` folder and type `./webots`.

##### Simon Steinmann [Moderator] 08/04/2020 13:59:20
thx


How is gravity direction defined now?


can we change what is 'up'

##### Olivier Michel [Cyberbotics] 08/04/2020 14:08:14
By the "coordinateSystem" field of WorldInfo.


You can choose between "ENU" (X: east, Y: north, Z: Up) and "NUE" (X: north, Y: up and Z: east).

##### Simon Steinmann [Moderator] 08/04/2020 14:12:19
I think it shoud say that where you can select it (what you said in bracket)


many people wont know what that is


should I open an issue on github?


I cannot import the controller in python since the tarball isntall



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/740214171034976366/unknown.png)
%end


nvm, found the issue

##### David Mansolino [Cyberbotics] 08/04/2020 14:27:46
Did you set the PYTHONPATH?

IT seems you are using anaconda, did you recompile the PYthon API for anaconda?

##### Simon Steinmann [Moderator] 08/04/2020 14:27:57
export WEBOTS\_HOME='/home/simon/webots/webots'   missed the extra webots 😄


now I have the anaconda error though:


> import controller

> Traceback (most recent call last):

>   File "<stdin>", line 1, in <module>

>   File "/home/simon/webots/webots/lib/controller/python27/controller.py", line 42, in <module>

>     \_controller = swig\_import\_helper()

>   File "/home/simon/webots/webots/lib/controller/python27/controller.py", line 38, in swig\_import\_helper

>     \_mod = imp.load\_module('\_controller', fp, pathname, description)

>   File "/home/simon/anaconda3/lib/python3.7/imp.py", line 242, in load\_module

>     return load\_dynamic(name, filename, file)

>   File "/home/simon/anaconda3/lib/python3.7/imp.py", line 342, in load\_dynamic

>     return \_load(spec)

> ImportError: /home/simon/webots/webots/lib/controller/python27/\_controller.so: undefined symbol: PyClass\_Type

##### Olivier Michel [Cyberbotics] 08/04/2020 14:30:38
It is explained on this documentation page: [https://cyberbotics.com/doc/reference/worldinfo](https://cyberbotics.com/doc/reference/worldinfo). Where else would you like to see it explained?

##### Simon Steinmann [Moderator] 08/04/2020 14:31:48
`@Olivier Michel` I think changing the dropdown options in the webots gui to 

"ENU" (X: east, Y: north, Z: Up)  

"NUE" (X: north, Y: up ,  Z: east)

would be nice


instead of just enu and nue

##### David Mansolino [Cyberbotics] 08/04/2020 14:33:21
About your error, it seems there are somme issue with PYTHON 2.7 VS 3.7

You are using 3.7 and you PYTHONPATH contains probably the path to the Webots Python 2.7 API

##### Simon Steinmann [Moderator] 08/04/2020 14:34:14
my .bashrc
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/740216031427166208/unknown.png)
%end

##### David Mansolino [Cyberbotics] 08/04/2020 14:34:50
PYTHONPATH should contain only one of the '/lib/controller/pythonXY'


otherewise there might be some confusions.

##### Simon Steinmann [Moderator] 08/04/2020 14:35:02
it worked before with the nightly build installed in  /usr/local

##### Olivier Michel [Cyberbotics] 08/04/2020 14:36:18
`@Simon Steinmann`: that is not easy to implement without making a special case for this. Anyhow, if you right click on `coordinateSystem` in the scene tree, you can get the Help menu that goes to the documentation page.

##### Simon Steinmann [Moderator] 08/04/2020 14:37:53
how about change it to EastNorthUp and NorthUpEast


I'm thinking about newcomers to robotics and webots itself. It's just an extra thing that can be confusing

##### Olivier Michel [Cyberbotics] 08/04/2020 14:38:58
ENU is a well known convention. See [https://en.wikipedia.org/wiki/Axes\_conventions](https://en.wikipedia.org/wiki/Axes_conventions)

##### Simon Steinmann [Moderator] 08/04/2020 14:40:43
I studied aerospace engineering and was not familiar with the term. I think there are a significant amount of people who aren't either. It can be easy to forget how daunting something new can be, when we've worked in an area for a while. I just started last year with robotics and simulation... so I still remember 😄


just a little suggestion for newcomer friendliness

##### Olivier Michel [Cyberbotics] 08/04/2020 14:43:11
Yes, I understand. I will be thinking to find a good solution to make it easier newcomers.

##### Simon Steinmann [Moderator] 08/04/2020 14:43:52
`@David Mansolino` only adding the actual python version used to the PYTHONPATH works


hmm why did it work in the past though? allowed for quick switching between python2 and 3

##### David Mansolino [Cyberbotics] 08/04/2020 14:44:56
Maybe you were using python2 by default before?

##### Simon Steinmann [Moderator] 08/04/2020 14:45:58
`@Olivier Michel` Tooltips in general could be a great idea. Perhaps in the area where we can edit fields, there could be a tooltip tab (bottom left of image)
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/740218984330297505/unknown.png)
%end


`@David Mansolino` it didnt matter which conda environment I was in, and whether it used python2 or 3 by default

##### David Mansolino [Cyberbotics] 08/04/2020 14:47:19
Ok, in that case it is indeed strange that it was working, but generally speaking it is safer to add the path to only one of the version

##### Simon Steinmann [Moderator] 08/04/2020 14:48:29
okay,  thanks for the help 🙂

##### David Mansolino [Cyberbotics] 08/04/2020 14:48:47
You're welcome

##### Simon Steinmann [Moderator] 08/04/2020 14:48:59
`@Olivier Michel` do you want me to open a feature suggestion?

##### Olivier Michel [Cyberbotics] 08/04/2020 14:49:38
Yes, please.

##### Simon Steinmann [Moderator] 08/04/2020 14:50:03
Through the gitlab issues right?


ah, got it

##### Olivier Michel [Cyberbotics] 08/04/2020 14:50:19
GitHub, yes.

##### Robsicky 08/04/2020 14:54:43
Hi! If I got:

```
field = parent.getField("children")
```

Is there a way to get a handle to the parent from  the variable "field"?


I often pass ".getField("children")" as argument in my methods, so the parent is not present in that scope

##### Olivier Michel [Cyberbotics] 08/04/2020 14:57:10
It's possible but a bit complicated...

##### Robsicky 08/04/2020 14:57:52
Oki, so maybe better to just include the parent as arg?

##### Olivier Michel [Cyberbotics] 08/04/2020 14:58:10
You can use `wb_supervisor_node_get_parent_node()` [https://cyberbotics.com/doc/reference/supervisor#wb\_supervisor\_node\_get\_parent\_node](https://cyberbotics.com/doc/reference/supervisor#wb_supervisor_node_get_parent_node)


Yes, I believe it's better.

##### Robsicky 08/04/2020 15:02:38
But `wb_supervisor_node_get_parent_node()` is a node method? Tried it, and did not work with the field handle

##### Olivier Michel [Cyberbotics] 08/04/2020 15:03:14
Of course, you need to get the nodes from the children field, this is why I said it's complicated.

##### Simon Steinmann [Moderator] 08/04/2020 15:12:20
can I change what simulation mode webots runs in through supervisor or launch parameters? (realtime, fast-ap, fast-ap-no graphics)


or adding something to the world file

##### Stefania Pedrazzi [Cyberbotics] 08/04/2020 15:13:51
[https://www.cyberbotics.com/doc/guide/starting-webots#command-line-arguments](https://www.cyberbotics.com/doc/guide/starting-webots#command-line-arguments)

[https://www.cyberbotics.com/doc/reference/supervisor#wb\_supervisor\_simulation\_set\_mode](https://www.cyberbotics.com/doc/reference/supervisor#wb_supervisor_simulation_set_mode)

##### Simon Steinmann [Moderator] 08/04/2020 15:14:35
thanks 🙂

##### Stefania Pedrazzi [Cyberbotics] 08/04/2020 15:37:18
You're welcome

##### alxy 08/04/2020 16:09:47
Mh, let me see if I can get it working by taking the urdf definition directly from the supervisor. Do I absolutely need 2020b or is 2020a also fine?

##### Olivier Michel [Cyberbotics] 08/04/2020 16:10:27
You need R2020b to get the URDF from a supervisor.

##### alxy 08/04/2020 16:11:03
yes, just realized it from my very first test 😄


I also see that there have been some changes to the source files in this PR ( [https://github.com/cyberbotics/webots/pull/2062/files](https://github.com/cyberbotics/webots/pull/2062/files) ) which probably have not yet made it to the installer package. Is this an issue?

##### Olivier Michel [Cyberbotics] 08/04/2020 16:16:16
It could be. If something doesn't work with R2020b, I would advise to check the next nightly build...

##### alxy 08/04/2020 17:05:39
One more question regarding the inverse kinemticas example: If I rotate my robot arm or even translate it, I need to do the same transformations to my world x,y,z coordinates right? As the inverse kinematics chain will always be relative the arms base I assume (it doesnt know about rotations/translations with regards to the outer world)


I have tried to apply the following transform to my coorinates, but still my arm is behaving very weird. It moves, but not to the coorinates I specify:

> miro\_rot = np.array(mirobot.getOrientation())

> miro\_rot = miro\_rot.reshape(3, 3)

> \# Transform coords to Mirobot-CoordinateSystem

> coords\_trans = np.dot(miro\_rot, [x, y, z])

> 

> \# Call "ikpy" to compute the inverse kinematics of the arm.

> ikResults = armChain.inverse\_kinematics(coords\_trans)

##### Simon Steinmann [Moderator] 08/04/2020 17:29:08
Take a look at this and read the example code  I made of how to get relative positions

[https://cyberbotics.com/doc/reference/supervisor?tab-language=python#wb\_supervisor\_node\_get\_position](https://cyberbotics.com/doc/reference/supervisor?tab-language=python#wb_supervisor_node_get_position)


code should be easily adaptable to your needs

##### alxy 08/04/2020 17:30:34
I have seen and used that already, Im just unsure if I need that, as the example does not use any transofmration on the coords ( [https://github.com/cyberbotics/webots/blob/master/projects/robots/abb/irb/controllers/inverse\_kinematics/inverse\_kinematics.py#L62-L67](https://github.com/cyberbotics/webots/blob/master/projects/robots/abb/irb/controllers/inverse_kinematics/inverse_kinematics.py#L62-L67) )


And I just checked, the arm itself is also rotated and translated, i.e not in the world origin

##### Simon Steinmann [Moderator] 08/04/2020 17:35:19
I think you forgot this step: rot\_ur10e = np.transpose(rot\_ur10e)


you wanna get from the robot to your position, not from your position to your robot


miro\_rot = np.array(mirobot.getOrientation())

miro\_rot = miro\_rot.reshape(3, 3)

miro\_rot = np.transpose(miro\_rot)

\# Transform coords to Mirobot-CoordinateSystem

coords\_trans = np.dot(miro\_rot, [x, y, z])



\# Call "ikpy" to compute the inverse kinematics of the arm.

ikResults = armChain.inverse\_kinematics(coords\_trans)



\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_

This should be your code I think


`@alxy` does this work?

##### alxy 08/04/2020 17:47:51
I have tried that as well without luck 😦 I mean it kind of works, on some axes I have the feeling the arm is moving correctly, but on others its completely wrong


anyway, thanks for your help. Its really a quite active channel here 🙂

##### Simon Steinmann [Moderator] 08/04/2020 17:50:18
ohh, you're missing another line


miro\_pos = np.array(mirobot.getPosition())

pos = np.subtract([x, y, z], miro\_pos)

coords\_trans = np.dot(miro\_rot, pos)


you forgot to translate the position 😄


that should work

##### alxy 08/04/2020 17:58:18
no, the base is located in the origin at [0, 0, 0]

##### Simon Steinmann [Moderator] 08/04/2020 18:00:09
then it is strange indeed


ohhhh wait


you're using your own urdf arent you?


converted it with urdf2proto

##### alxy 08/04/2020 18:00:30
right

##### Simon Steinmann [Moderator] 08/04/2020 18:00:48
that's a bug with that software. Some joints will be flipped


try loading the urdf into rviz and check which way the robot rotates when increasing each joint. load the protos in webots with a void controller, doubleclick on the bot and increase the same motor. Make sure that it rotates the same way


if it is t he wrong way, change the rotation axis in the proto file from -1 to 1 or vice versa

##### alxy 08/04/2020 18:08:43
ok, thats a good hint 😄

##### Simon Steinmann [Moderator] 08/04/2020 18:08:56
That one took me a while 😄


had the exact same issue when converting the kinova gen3 arm


Would be cool if you could add the robot here once you figure it out :

[https://github.com/cyberbotics/community-projects](https://github.com/cyberbotics/community-projects)

##### alxy 08/04/2020 18:10:50
Ok, I hope I can figure it, and if it works I will do it


Just to make sure, its this lib which has the bug: [https://github.com/cyberbotics/urdf2webots](https://github.com/cyberbotics/urdf2webots) ?


cause thats the one I was using


and is there an alternative to rviz, it appears to be hard to install on windows and is rather large

##### Simon Steinmann [Moderator] 08/04/2020 18:20:54
yes, that's the one


I could have a look if you send me the urdf


do they have a ros implementation?


[https://github.com/wlkata/RosForMirobot-master](https://github.com/wlkata/RosForMirobot-master) is it this one?

##### alxy 08/04/2020 19:32:42
`@Simon Steinmann` yes, that it is. I can also upload the webots project



> **Attachment**: [my\_first\_simulation.zip](https://cdn.discordapp.com/attachments/565154703139405824/740291534783774771/my_first_simulation.zip)


mirobot\_test is the world with the mirobot

##### Simon Steinmann [Moderator] 08/04/2020 19:46:25
I'll take a look tomorrow

##### alxy 08/04/2020 19:46:45
thanks

##### Alex Nie 08/04/2020 22:43:59
When using an external controller to control the robot, why does the robot still move even if the external controller is stopped? 😨

##### David Mansolino [Cyberbotics] 08/05/2020 05:26:10
`@Alex Nie` the latest speed command you sent will keep running, you need to stop the motor before exiting the controller, the same happen when usign non-extern controller

##### chungshan 08/05/2020 05:27:11
Hello, I upgrade webots to R2020b. I want to import this 3D model directly. When I import, 3D model doesn't show up. Do I miss any steps? or the file is a wrong format
> **Attachment**: [Waterproof\_Male.stl](https://cdn.discordapp.com/attachments/565154703139405824/740440748138430484/Waterproof_Male.stl)

##### David Mansolino [Cyberbotics] 08/05/2020 05:27:33
let me try


It is actually correctly imported, but the unit are probably wrong (not meters) as it is big, this is the reason why you don't see it, you have to zoom out
%figure
![test.png](https://cdn.discordapp.com/attachments/565154703139405824/740441874610782208/test.png)
%end

##### chungshan 08/05/2020 05:33:42
ok, thanks!

##### David Mansolino [Cyberbotics] 08/05/2020 05:33:50
You're welcome

##### Alex Nie 08/05/2020 06:15:47
> `@Alex Nie` the latest speed command you sent will keep running, you need to stop the motor before exiting the controller, the same happen when usign non-extern controller

`@David Mansolino` Thanks!

##### David Mansolino [Cyberbotics] 08/05/2020 06:16:05
You're welcome

##### Alex Nie 08/05/2020 06:23:10
`@David Mansolino` How can I stop the motor? I can't find the relevant interface on the api of motor

##### Sanket Khadse 08/05/2020 06:24:39
> Wanted to confirm that, is it possible to use an external header file in controller code? I put the c header file at include/controller/c/webots.

`@Sanket Khadse` 



Related to my previous issue, I put the file in the controller folder. But after building the project, it gives error, that no such file found.

##### David Mansolino [Cyberbotics] 08/05/2020 06:25:22
[https://cyberbotics.com/doc/guide/using-webots-makefiles?tab-language=ros#adding-an-external-library-ccp](https://cyberbotics.com/doc/guide/using-webots-makefiles?tab-language=ros#adding-an-external-library-ccp)


> `@David Mansolino` How can I stop the motor? I can't find the relevant interface on the api of motor

`@Alex Nie` simply call the `wb_motor_set_velocity` ([https://cyberbotics.com/doc/reference/motor#wb\_motor\_set\_velocity](https://cyberbotics.com/doc/reference/motor#wb_motor_set_velocity)) with an argument of 0 for the velocity.

##### Alex Nie 08/05/2020 06:27:38
Thanks, it dose work!

##### Robsicky 08/05/2020 07:17:51
Hi.  The latest build is called R2021a, is this correct?

##### David Mansolino [Cyberbotics] 08/05/2020 07:21:22
The latest nightly yes. The latest stable is R2020b

##### Robsicky 08/05/2020 09:26:58
Is there any known problems with the TouchSensor? When I import a pallet (with boundingObject [without works]) into my robot, its TouchSensor seem to break

##### David Mansolino [Cyberbotics] 08/05/2020 09:27:42
What do you mean by break?

##### Robsicky 08/05/2020 09:27:55
No longer detect collision


Then, if I import the same pallet elsewhere, it works again

##### saditya 08/05/2020 09:28:29
I am trying to implement a see-saw behavior. The behavior is pretty simple, it has a mass 0.2kg on one side, so it should bend on one side as the other side has no mass. But on running the simulation the mass block(in red) also falls down. Going wrong somewhere?
%figure
![seesaw.png](https://cdn.discordapp.com/attachments/565154703139405824/740501475456712754/seesaw.png)
%end

##### Robsicky 08/05/2020 09:28:49
In the same run


No wait, I doesn't


It stops detecting collision when I add a child with boundingObject to my robot

##### David Mansolino [Cyberbotics] 08/05/2020 09:33:33
> I am trying to implement a see-saw behavior. The behavior is pretty simple, it has a mass 0.2kg on one side, so it should bend on one side as the other side has no mass. But on running the simulation the mass block(in red) also falls down. Going wrong somewhere?

`@saditya` some part ar probably missing bounding objects and/or physics node.


`@Robsicky`, ok that may be a bug, can you please report this here (including a simple worlf + controller reproducing the issue): [https://github.com/cyberbotics/webots/issues/new?template=bug\_report.md](https://github.com/cyberbotics/webots/issues/new?template=bug_report.md)

##### saditya 08/05/2020 09:35:25
> `@saditya` some part ar probably missing bounding objects and/or physics node.

`@David Mansolino` Thanks a lot. It has a mass of 0.2kg, physics node and a bounding object.


> `@David Mansolino` Thanks a lot. It has a mass of 0.2kg, physics node and a bounding object.

`@saditya` But it still happens to fall down.

##### David Mansolino [Cyberbotics] 08/05/2020 09:49:59
Yes, the red mass, but did you check that all the solid nodes of the structure have some?

##### Robsicky 08/05/2020 10:16:14
Does TouchSensor check collision with all boundingObjects every step, or is there some search tree or algorithm?

##### David Mansolino [Cyberbotics] 08/05/2020 10:20:16
Usually with every step.

##### Robsicky 08/05/2020 10:21:28
With all boundings in the entire sim, and/or is there some optimization for search?

##### David Mansolino [Cyberbotics] 08/05/2020 10:22:21
ODE is responsible for collision detection, it will check collision with all the dynamic object not in sleep mode.

##### saditya 08/05/2020 10:36:18
> Yes, the red mass, but did you check that all the solid nodes of the structure have some?

`@David Mansolino` This is what happens when I simulate it, all the objects have mass, physics, and bounding object. I want the 0.2kg to take the side up just as it happens in a see-saw. Am I doing something wrong?
> **Attachment**: [seesaw.mp4](https://cdn.discordapp.com/attachments/565154703139405824/740518542243397642/seesaw.mp4)


> `@David Mansolino`  `@Olivier Michel` This is what happens when I simulate it, all the objects have mass, physics, and bounding object. I want the 0.2kg to take the side up just as it happens in a see-saw. Am I doing something wrong?

`@saditya`

##### David Mansolino [Cyberbotics] 08/05/2020 10:46:50
Is the red box a children of the structure or is it independant?

##### Olivier Michel [Cyberbotics] 08/05/2020 10:48:37
It is strange that the box goes through the board. Can you put it at a better location (on the board instead of inside the board)?

##### Simon Steinmann [Moderator] 08/05/2020 10:50:21

> **Attachment**: [Mirobot.urdf](https://cdn.discordapp.com/attachments/565154703139405824/740522075583807538/Mirobot.urdf)


urdf2proto really screws up the joints. Seems related to this issue: [https://github.com/cyberbotics/urdf2webots/issues/42](https://github.com/cyberbotics/urdf2webots/issues/42)
> **Attachment**: [Mirobot.proto](https://cdn.discordapp.com/attachments/565154703139405824/740522078050189332/Mirobot.proto)


Had same issue with kinova Gen3, there however, axis were only flipped. Here they are completely bokers

##### David Mansolino [Cyberbotics] 08/05/2020 10:51:41
> urdf2proto really screws up the joints. Seems related to this issue: [https://github.com/cyberbotics/urdf2webots/issues/42](https://github.com/cyberbotics/urdf2webots/issues/42)

`@Simon Steinmann` probably yes, can you add a comment on this issue including the urdf files so that when we fix it we have several test files to make sure the fix is correct.

##### saditya 08/05/2020 10:52:12
> It is strange that the box goes through the board. Can you put it at a better location (on the board instead of inside the board)?

`@Olivier Michel` Thanks for your reply.  I have to keep this design constraint  in mind- The normal position of the seesaw is horizontal and it is supported by the ramp. This means that the seesaw will remain horizontal when a vehicle moves from the ramp to the seesaw until the vehicle passes the support point. It will

require approx. 200 g of impact 20 cm from the support point before the seesaw tilts.--- So i moved it 0,2m in the direction.

##### Olivier Michel [Cyberbotics] 08/05/2020 10:56:47
Yes, but I meant for testing purposes. The first thing you should achieve is probably to run a simple seesaw. Then you could extend it to your use case.

##### saditya 08/05/2020 10:57:47
> Is the red box a children of the structure or is it independant?

`@David Mansolino` That is where the red box is.
%figure
![SS1.png](https://cdn.discordapp.com/attachments/565154703139405824/740523949653229608/SS1.png)
%end

##### David Mansolino [Cyberbotics] 08/05/2020 10:58:58
You have many Solid nodes, why so ?

##### saditya 08/05/2020 11:02:07
> You have many Solid nodes, why so ?

`@David Mansolino` I just needed it for three different solids. The base, see saw, and the box.


> Yes, but I meant for testing purposes. The first thing you should achieve is probably to run a simple seesaw. Then you could extend it to your use case.

`@Olivier Michel` That is how it behaves when i keep the 0.2 kg above the board and run the simulation. Do you think it exhibits the right behavior? I want the this red box to be fixed on the seesaw somehow.
> **Attachment**: [trialseesaw-1.mp4](https://cdn.discordapp.com/attachments/565154703139405824/740525926189629510/trialseesaw-1.mp4)

##### Simon Steinmann [Moderator] 08/05/2020 11:18:46
OMG I think I found the issue with the urdf creation. The issue arises when a joint in the urdf has an orientation (not just translation)

##### Sukrati Chaturvedi 08/05/2020 12:04:36
hi..i want to simulate Nao robot. For this purpose, which version of Webots will be better option, Webots 8.x.x or webots latest version or any other version that you can suggest.

##### Olivier Michel [Cyberbotics] 08/05/2020 12:28:30
`@Sukrati Chaturvedi`: the most recent version of Webots is the best.


`@saditya`: You should merge the red box with the board by creating a compound object. See tutorial here: [https://cyberbotics.com/doc/guide/tutorial-5-compound-solid-and-physics-attributes](https://cyberbotics.com/doc/guide/tutorial-5-compound-solid-and-physics-attributes)

##### David Mansolino [Cyberbotics] 08/05/2020 12:32:10
> OMG I think I found the issue with the urdf creation. The issue arises when a joint in the urdf has an orientation (not just translation)

`@Simon Steinmann` Very good news! that will for sure help fixing the issue!


Can you please add this information to the issue?

If you want to try fixing it, the problem is them probably around here: [https://github.com/cyberbotics/urdf2webots/blob/e312833c7bcbbdbee86b7220b6b8f1ce99259ea4/urdf2webots/parserURDF.py#L783](https://github.com/cyberbotics/urdf2webots/blob/e312833c7bcbbdbee86b7220b6b8f1ce99259ea4/urdf2webots/parserURDF.py#L783)

The node orientation need to be taken into account.

##### Simon Steinmann [Moderator] 08/05/2020 12:45:28
`@David Mansolino`  I fixed the issue. Wrong matrix multiplication in the math\_util


created a PR

##### David Mansolino [Cyberbotics] 08/05/2020 12:48:39
Perfect !

##### Simon Steinmann [Moderator] 08/05/2020 12:50:37
can you @ me here when it's ready to merge? I often dont get notifications for PRs


What is the best way to edit large protos? all my IDEs and text editors are really unresponsive due to the massive mesh information

##### David Mansolino [Cyberbotics] 08/05/2020 12:56:37
One simple solution is to put the mesh in a dedicated file (i.e. another PROTO).

##### Simon Steinmann [Moderator] 08/05/2020 12:57:02
how does one do that? and can that be automated with the urdf2proto?

##### Olivier Michel [Cyberbotics] 08/05/2020 13:01:03
Or use the `Mesh` primitive to store mesh data in separate native 3D files.


The latest version of urdf2proto has an option for storing meshes in separate proto files.

##### David Mansolino [Cyberbotics] 08/05/2020 13:01:58
> can you @ me here when it's ready to merge? I often dont get notifications for PRs

`@Simon Steinmann` I checked your PR and it seems all fine, I will just make test on several URDF file a bit later before accepting it.

##### Olivier Michel [Cyberbotics] 08/05/2020 13:03:07
It's called `--multi-file`, see [https://github.com/cyberbotics/urdf2webots/pull/53](https://github.com/cyberbotics/urdf2webots/pull/53)

##### Simon Steinmann [Moderator] 08/05/2020 13:03:45
awesome, will check it out 🙂

##### Sukrati Chaturvedi 08/05/2020 13:13:44
Would i be able to interface webots R2020 version with choregraphe(software to implement Nao)?

##### David Mansolino [Cyberbotics] 08/05/2020 13:13:56
No

##### Olivier Michel [Cyberbotics] 08/05/2020 13:15:29
`@Sukrati Chaturvedi`: not sure. The Webots to Choregraphe interface is not officially unsupported. However, some users reported it works partially. See [https://github.com/cyberbotics/naoqisim](https://github.com/cyberbotics/naoqisim) for details and help from the community.

##### Sukrati Chaturvedi 08/05/2020 13:24:15
Thanks `@David Mansolino` `@Olivier Michel`.

##### Simon Steinmann [Moderator] 08/05/2020 13:31:16
It would be nice if the urdf2webots readme included all the parseable arguments

##### Olivier Michel [Cyberbotics] 08/05/2020 13:33:08
Yes... Could you open a PR for that? I would be happy to review it.

##### Simon Steinmann [Moderator] 08/05/2020 13:36:29
added Mirobot.proto to the community-projects


I can open an Issue 😉

##### Alex Nie 08/05/2020 13:46:15
What is the difference between Supervisor and Robot? Does Supervisor have higher authority?

##### Olivier Michel [Cyberbotics] 08/05/2020 13:58:45
Supervisor are a special kind of "super-Robot" which can do all what a Robot can do, plus some extra things. A supervisor should be considered as an external actor which can observe and influence the simulation in many ways. A sort of "God" or human operator supervising a robotics experiment.

##### Alex Nie 08/05/2020 14:01:56
Thanks for answering 😃

##### David Mansolino [Cyberbotics] 08/05/2020 14:42:12
> `@Simon Steinmann` I checked your PR and it seems all fine, I will just make test on several URDF file a bit later before accepting it.

`@David Mansolino` it is now approved, feel free to merge 🙂

##### Simon Steinmann [Moderator] 08/05/2020 14:43:00
done 🙂


converting urdfs will be so much less headache inducing now 😄

##### David Mansolino [Cyberbotics] 08/05/2020 14:46:50
`@Simon Steinmann` just for info, I just open a new PR to document the script arguments: [https://github.com/cyberbotics/urdf2webots/pull/56](https://github.com/cyberbotics/urdf2webots/pull/56)

##### Simon Steinmann [Moderator] 08/05/2020 14:48:08
just saw. But can't guarantee that I will commit. That whole urdf2webots thing today was a complete sidetrack to my work 😅


ah nvm, there is already a commit

##### Robsicky 08/05/2020 14:49:24
With a handle to a TouchSensor, is it possible to get a handle to the node?

##### David Mansolino [Cyberbotics] 08/05/2020 14:50:01
> With a handle to a TouchSensor, is it possible to get a handle to the node?

`@Robsicky` not yet, but we are currently introducing this feature here: [https://github.com/cyberbotics/webots/pull/2074](https://github.com/cyberbotics/webots/pull/2074)

##### Robsicky 08/05/2020 14:51:57
Ah, very nice!👌

##### Simon Steinmann [Moderator] 08/05/2020 14:54:41
In robotics and especialy computer vision, the intel realsense cameras are very popular and frequently used. Have you guys tried implementing those yet?

##### David Mansolino [Cyberbotics] 08/05/2020 14:55:16
Not yet, but we have a kinect model which is close.

##### Simon Steinmann [Moderator] 08/05/2020 14:55:41
is it on the developer branch?

##### David Mansolino [Cyberbotics] 08/05/2020 14:56:12
On master too: 

 - [https://www.cyberbotics.com/doc/guide/sensors#rangefinder-sensors](https://www.cyberbotics.com/doc/guide/sensors#rangefinder-sensors)

 - [https://www.cyberbotics.com/doc/guide/range-finder-sensors#microsoft-kinect](https://www.cyberbotics.com/doc/guide/range-finder-sensors#microsoft-kinect)

##### Simon Steinmann [Moderator] 08/05/2020 14:56:51
thx I'll have a look

##### David Mansolino [Cyberbotics] 08/05/2020 14:56:57
You're welcome

##### Simon Steinmann [Moderator] 08/05/2020 14:58:23
You might wanna look into adding the realsense cameras too. Having read countless robotics / Machine and Reinforcement Learing Papers, these are most commonly used. Integration would make webots very attractive for those sort of applications.


on a similar note, are you familiar with domain randomization?

##### David Mansolino [Cyberbotics] 08/05/2020 15:00:23
Not really

##### Simon Steinmann [Moderator] 08/05/2020 15:01:37
Domain randomization, a simple technique for training models on simulated images that transfer to real images by randomizing rendering in the simulator. With enough variability in the simulator, the real world may appear to the model as just another variation

##### David Mansolino [Cyberbotics] 08/05/2020 15:02:38
Ok, sounds interesting

##### Simon Steinmann [Moderator] 08/05/2020 15:04:25
I dont know how much of a focus and priority AI / Reinforcement Learning / Machine Learing is  with you guys, but I highly recommend you look into this field in general. It is rapidly growing and robotics moves more and more into this direction.


Webots is already great with it's native support for multiple languages, but I havent seen many examples or implementations of AI related things yet


just food for thought 🙂

##### David Mansolino [Cyberbotics] 08/05/2020 15:07:11
That sounds indeed very interesting, unfortunately we are currently having quite a lot of work developing and improving the tool so that we don't have much time to invest into developing such examples.

##### Simon Steinmann [Moderator] 08/05/2020 15:10:19
I sent you a friend request for pm if you dont mind 🙂

##### Albens Gladius 08/05/2020 17:54:18
hi, does anyone know how to import an Inventor robot model into webots? I tried following this video [https://www.youtube.com/watch?v=L0FVsFD2rS4](https://www.youtube.com/watch?v=L0FVsFD2rS4), which tells me to import it into blender (2.79) and then export it as a .wrl, but blender dosnt let me export it as an .wrl



Any ideas???

##### Simon Steinmann [Moderator] 08/05/2020 19:51:16
3D Studio mesh, Blender, Biovision Hierarchy, Collada, Filmbox, STL, Wavefront, X3D  are now all supported. Can you export it as one of these files?

##### Albens Gladius 08/05/2020 19:53:19
Ok Thanks.


will try

##### EPIC 08/06/2020 08:40:42
Hi! Is there a way to perform an action in the next/following timestep, instead of the current? Like putting an action into a queue?

##### David Mansolino [Cyberbotics] 08/06/2020 08:41:15
No, but you should simply run a step in your controller and then perform the action

##### EPIC 08/06/2020 08:43:07
I get some problems when I try to both enable bounding object on a box, and delete it, and import a new one in the same timestep.. webots crash when I try. But if I split up the actions in two (enable bounding object in one timestep, and delete+import in the next one) then it works just fine

##### jinu061353 08/06/2020 09:19:39
I have an additional question in your previous reply.

{the rho parameter is unfortunately not set it therefore keeps the default value (0 or very close to). IF you need this parameters and want us to add it, please open a feature request here to explain why this parameter is important and we will add it:}



Does the simulation assume that the robot has stopped at each sampling time and calculate the next movement with static friction coefficient?



If not, how does the robot stop when the dynamic friction coefficient is zero?

##### Simon Steinmann [Moderator] 08/06/2020 10:32:37
what does the radius variable specify in PointLight?

##### David Mansolino [Cyberbotics] 08/06/2020 10:36:58
It is the maximum distance to which the light illuminate objects


keeping it low allows for better performances

##### watchdogs132 08/06/2020 10:37:57
What exactly does the value in coulomb friction mean ? . Is it the coefficient of friction between material 1 and 2?

##### David Mansolino [Cyberbotics] 08/06/2020 10:38:12
> What exactly does the value in coulomb friction mean ? . Is it the coefficient of friction between material 1 and 2?

`@watchdogs132` yes exactly.

##### Simon Steinmann [Moderator] 08/06/2020 10:39:01
`@David Mansolino` thanks, good to know. This is done purely on gpu though right? So it wouldnt affect physics simulation much

##### David Mansolino [Cyberbotics] 08/06/2020 10:40:16
> I have an additional question in your previous reply.

> {the rho parameter is unfortunately not set it therefore keeps the default value (0 or very close to). IF you need this parameters and want us to add it, please open a feature request here to explain why this parameter is important and we will add it:}

> 

> Does the simulation assume that the robot has stopped at each sampling time and calculate the next movement with static friction coefficient?

> 

> If not, how does the robot stop when the dynamic friction coefficient is zero?

`@jinu061353` no, mu is used for dynamic friction too: [http://ode.org/wiki/index.php?title=Manual#Contact](http://ode.org/wiki/index.php?title=Manual#Contact)


> `@David Mansolino` thanks, good to know. This is done purely on gpu though right? So it wouldnt affect physics simulation much

`@Simon Steinmann` yes, this is only for rendering and sensors (such as light sensors) simulation.

##### Simon Steinmann [Moderator] 08/06/2020 10:49:13
mu is static friction and rho dynamic right? I looked into this a while back, and back then it didnt seem possible to have proper dynamic friction. It would be great if mu is added to contactProperties

##### David Mansolino [Cyberbotics] 08/06/2020 10:50:21
mu, is actually the ``coulombFriction`` field.

##### Simon Steinmann [Moderator] 08/06/2020 10:50:41
oh, I meant adding rho


the dynamic friction


usually mu > rho. And in many application such as sliding objects or slip conditions for wheels, it would be very helpful to have this


Should I open a FeatureRequest or is someone already doing it?

##### David Mansolino [Cyberbotics] 08/06/2020 10:52:57
Yes please open a FeatureRequest, I indeed think this is important.

##### Simon Steinmann [Moderator] 08/06/2020 11:03:41
hmm looking at  [http://ode.org/wiki/index.php?title=Manual#Contact](http://ode.org/wiki/index.php?title=Manual#Contact), the exact parameter to add would be rhoN right?


I havent fully understood how the directions work

##### David Mansolino [Cyberbotics] 08/06/2020 11:05:08
Probably the 3 rho should be added.

##### Simon Steinmann [Moderator] 08/06/2020 11:05:31
then the mu2 should be added too

##### David Mansolino [Cyberbotics] 08/06/2020 11:05:59
It is already, the coulombFriction field can take more than one value.

##### Simon Steinmann [Moderator] 08/06/2020 11:06:05
ohhh right


created request

##### David Mansolino [Cyberbotics] 08/06/2020 11:07:29
Thank you

##### Gautier 08/06/2020 11:36:37
Hey !


Is it possible to retrieve the state of a connector (locked/unlocked) through a robot having that connector (and not a supervisor) ?

##### David Mansolino [Cyberbotics] 08/06/2020 11:37:56
No, but you can check if another connector is present in front of the connector: [https://cyberbotics.com/doc/reference/connector#wb\_connector\_get\_presence\_sampling\_period](https://cyberbotics.com/doc/reference/connector#wb_connector_get_presence_sampling_period)

##### Gautier 08/06/2020 11:40:46
Ok, thank you !

##### Jeremy Jiang 08/06/2020 13:21:07
Hello, I have a question. I'm using the ElevationGrid node to simulate the uneven ground. However, there are two warnings "cannot compute inertia for ElevationGrid objects" and "Mass is invalid because 'boundingObject' is not defined". Besides, when I hold a robot on the ground and run the simulation, the robot will  bounce up. Could you have any ideas?

##### David Mansolino [Cyberbotics] 08/06/2020 13:22:27
You should not put any 'Physics' node to the ground, it is a static object

##### Jeremy Jiang 08/06/2020 13:23:56
Oh, I got it. Thank you very much!

##### David Mansolino [Cyberbotics] 08/06/2020 13:24:17
You're welcome

##### Simon Steinmann [Moderator] 08/06/2020 14:11:13
Kuka lbr iiwa  converted. Will add to community projects
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/740935013331370060/unknown.png)
%end

##### David Mansolino [Cyberbotics] 08/06/2020 14:11:28
Very nice !

##### Simon Steinmann [Moderator] 08/06/2020 14:14:50
[https://github.com/cyberbotics/community-projects/pull/7](https://github.com/cyberbotics/community-projects/pull/7) added PR

##### Marko G 08/06/2020 14:47:19
hey, i followed the instructions but i got the following result
%figure
![importing_arm_status.png](https://cdn.discordapp.com/attachments/565154703139405824/740944100974526504/importing_arm_status.png)
%end


catkin\_make and urdf2webots finished without errors or warnings


i'm using webots 2020b version and i used the newly updated urdf2webots

any help is appreciated :)



just to clarify a bit, the idea is to convert the KUKA LBR iiwa arm from urdf to a webots PROTO file

##### Simon Steinmann [Moderator] 08/06/2020 14:50:49
added info: He also tried the file I converted and that works without issues for me. It's not the proto, but something with his system,  webots install, settings or set variables

##### David Mansolino [Cyberbotics] 08/06/2020 14:52:07
It looks like the ``KukaLbrIiwa14R820\_meshes``folder was not copied.


`@Marko G` do you have a folder `/home/gospodar/testiranja(wbtsarms/protos/KukaLbrIiwa14R820_meshesfolder` folder?

##### Marko G 08/06/2020 14:53:55

%figure
![folder_screenshot.png](https://cdn.discordapp.com/attachments/565154703139405824/740945758471061629/folder_screenshot.png)
%end


this is in the protos folder
%figure
![meshes.png](https://cdn.discordapp.com/attachments/565154703139405824/740945759377162361/meshes.png)
%end

##### David Mansolino [Cyberbotics] 08/06/2020 14:54:47
ok, strange, I will try too in that case

##### Simon Steinmann [Moderator] 08/06/2020 14:55:15
Same files as the new PR in community projects

##### Marko G 08/06/2020 15:00:57
i have another computer on my hands so i also tried there, also with ubuntu 18.04 and webots 2020b and i've got the same result

##### David Mansolino [Cyberbotics] 08/06/2020 15:01:36
I can reproduce the issue too, I think I found the cause, I am creating a PR to fix this

##### Marko G 08/06/2020 15:02:21
nice, thanks 🙂

##### David Mansolino [Cyberbotics] 08/06/2020 15:02:52
This is fixed here: [https://github.com/cyberbotics/community-projects/pull/8](https://github.com/cyberbotics/community-projects/pull/8)

🙂

##### Simon Steinmann [Moderator] 08/06/2020 15:03:27
just found that too, trying to add the extra repo


the mirobot in WLkata needs it too


you gonna change it directly?

##### David Mansolino [Cyberbotics] 08/06/2020 15:04:21
You're right, I am fixing it too

##### Simon Steinmann [Moderator] 08/06/2020 15:07:05
the meshes should not get listed here should they?
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/740949074081218660/unknown.png)
%end


i mean they are proto as well

##### David Mansolino [Cyberbotics] 08/06/2020 15:07:52
hum... they should have a 'hidden' tag to not be displayed.


They are listed in the submodule

##### Simon Steinmann [Moderator] 08/06/2020 15:08:40
--multi-file 

should probably automatically set that tag


what does that tag look like?

##### David Mansolino [Cyberbotics] 08/06/2020 15:10:32
Yes exactly, I just open a issue about this: [https://github.com/cyberbotics/urdf2webots/issues/60](https://github.com/cyberbotics/urdf2webots/issues/60)

##### Simon Steinmann [Moderator] 08/06/2020 15:11:27
Once that is implemented, I can convert it again, so we dont have to manually set the tags

##### David Mansolino [Cyberbotics] 08/06/2020 15:11:38
Yes that sounds good!

##### Marko G 08/06/2020 15:15:16
great! 😄

##### David Mansolino [Cyberbotics] 08/07/2020 07:06:28
> Once that is implemented, I can convert it again, so we dont have to manually set the tags

`@Simon Steinmann` this is now done and released ([https://pypi.org/project/urdf2webots/#history](https://pypi.org/project/urdf2webots/#history)) as well as some of the new fields ([https://github.com/cyberbotics/urdf2webots/issues/57](https://github.com/cyberbotics/urdf2webots/issues/57)).

##### Simon Steinmann [Moderator] 08/07/2020 08:52:09
`@David Mansolino` awesome. will convert it


[https://github.com/cyberbotics/webots/pull/2089](https://github.com/cyberbotics/webots/pull/2089) `@Olivier Michel` changes are commited


`@David Mansolino` How much work would it be to add a option '--robotic-arm' to urdf2webots. Adding in the static base and ToolSlot? IF that were to be added, I could convert the whole KUKA repo


Awesome, I think this will be a great addition. Hopefully people will add more now 🙂

##### Olivier Michel [Cyberbotics] 08/07/2020 09:06:39
Yes, that would be nice.

##### Simon Steinmann [Moderator] 08/07/2020 10:56:18
I also figured out how to add the toolSlot (finally, was tricky)


should I create a new PR or integrate it into the current one?

##### David Mansolino [Cyberbotics] 08/07/2020 10:57:20
Very good news, it is probably better to create a new PR just to split the diff.

##### Simon Steinmann [Moderator] 08/07/2020 10:57:45
okay


I now also got the error, where it can't find the multi-files meshes


what was the solution yesterday?


this is my folder structure. This should be correct right?
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/741251509253308466/unknown.png)
%end


okay, restarting webots fixed the issue

##### saditya 08/07/2020 11:24:02
Maybe something very basic, I want to increase the length of the slope platform but the height should be max or less than the box. When I try to inc the length of the slope, the height also increases. Missing something here?
%figure
![slopee.png](https://cdn.discordapp.com/attachments/565154703139405824/741255330155200593/slopee.png)
%end

##### Simon Steinmann [Moderator] 08/07/2020 11:31:14
`@David Mansolino` [https://github.com/cyberbotics/urdf2webots/pull/65](https://github.com/cyberbotics/urdf2webots/pull/65) this PR contains both changes. It's not much code, so perhaps dont bother with the other one and go straight to this

##### David Mansolino [Cyberbotics] 08/07/2020 12:03:33
> Maybe something very basic, I want to increase the length of the slope platform but the height should be max or less than the box. When I try to inc the length of the slope, the height also increases. Missing something here?

`@saditya` how did you define the slope ?

##### tomvdb 08/07/2020 12:06:05
Hi All, I'm a possible new user for webots, but have some questions. I would like to try and simulate a trike like robot, but the single front wheel both drives the robot and is steerable. the two backwheels are essentially caster wheels. is something like that possible to simulate using webots ?

##### David Mansolino [Cyberbotics] 08/07/2020 12:08:16
Yes sure, I would start by the tutorial, this one in particular explains how to create a non-steerable 4wheel vehicle: [https://cyberbotics.com/doc/guide/tutorial-6-4-wheels-robot](https://cyberbotics.com/doc/guide/tutorial-6-4-wheels-robot)

This could be a good basis to do what you need.

##### tomvdb 08/07/2020 12:12:09
cool, I'll start with that then. so in theory after getting that to work, I would be able to then just make a single front steerable wheel ?

##### Simon Steinmann [Moderator] 08/07/2020 12:15:48
should not be too hard then, yes 🙂

##### tomvdb 08/07/2020 12:16:19
cool, thank you. I'll work through that and probably be back with more questions. Excited to play with it, thank you 🙂

##### Laojiang 08/07/2020 12:16:23
How to keep my model from sinking？

##### Simon Steinmann [Moderator] 08/07/2020 12:17:44
I found a weird issue. the urdf2webots converter turns this .dae file into 3 mesh files, even though there are only 2 materials in there. The link\_4\_0Mesh.proto is a empty undefined one. This throws an error in webots. I have no clue where this problem comes from. All the other .dae files get converted correctly
> **Attachment**: [dae\_conversion\_issue.zip](https://cdn.discordapp.com/attachments/565154703139405824/741268840171831447/dae_conversion_issue.zip)


`@Laojiang` how is it sinking?

##### Laojiang 08/07/2020 12:18:28
My model always sink in floor.

##### David Mansolino [Cyberbotics] 08/07/2020 12:18:41
> `@David Mansolino` [https://github.com/cyberbotics/urdf2webots/pull/65](https://github.com/cyberbotics/urdf2webots/pull/65) this PR contains both changes. It's not much code, so perhaps dont bother with the other one and go straight to this

`@Simon Steinmann` this is now done and approved 😄

##### Simon Steinmann [Moderator] 08/07/2020 12:18:54
awesome!

##### David Mansolino [Cyberbotics] 08/07/2020 12:19:16
> My model always sink in floor.

`@Laojiang` what is the weight of your robot?


> I found a weird issue. the urdf2webots converter turns this .dae file into 3 mesh files, even though there are only 2 materials in there. The link\_4\_0Mesh.proto is a empty undefined one. This throws an error in webots. I have no clue where this problem comes from. All the other .dae files get converted correctly

`@Simon Steinmann` even if they are 2 materialy, it is possible that the DAE defines 3 different parts.

##### Laojiang 08/07/2020 12:19:58
I set the mass is 500


I just don't want the model to sink into the floor. What parameters can I set?

##### David Mansolino [Cyberbotics] 08/07/2020 12:21:20
Ok, in that case you should probably try defining a contact property and settting the `softCFM` to around  1e-05

##### Simon Steinmann [Moderator] 08/07/2020 12:24:27
From what I can tell, there are only 2 parts defined

##### Laojiang 08/07/2020 12:25:49
I just find contactMaterial property. So how can I define a contact property and settting the softCFM to around  1e-05?

##### David Mansolino [Cyberbotics] 08/07/2020 12:28:54
Here is the documentation about contact properties: [https://www.cyberbotics.com/doc/reference/contactproperties](https://www.cyberbotics.com/doc/reference/contactproperties)

and an example similar to what you are trying to do:

[https://github.com/cyberbotics/webots/blob/master/projects/vehicles/worlds/city.wbt#L14-L23](https://github.com/cyberbotics/webots/blob/master/projects/vehicles/worlds/city.wbt#L14-L23)

##### Laojiang 08/07/2020 12:29:14
ok,thank you

##### David Mansolino [Cyberbotics] 08/07/2020 12:29:23
You're welcome

##### Simon Steinmann [Moderator] 08/07/2020 12:30:04
`@David Mansolino` it's merged, perhaps you can update for pip.

##### Vaibhav 08/07/2020 12:49:01
Whenever i change checkered to something else the app crashes, what can i do?
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/741276717099778048/unknown.png)
%end

##### Laojiang 08/07/2020 12:50:08
How to display the coordinate mark of the model？The red, green and blue arrows are not displayed

##### David Mansolino [Cyberbotics] 08/07/2020 12:50:33
> `@David Mansolino` it's merged, perhaps you can update for pip.

`@Simon Steinmann` this is now done: [https://pypi.org/project/urdf2webots/#history](https://pypi.org/project/urdf2webots/#history)

##### Olivier Michel [Cyberbotics] 08/07/2020 12:50:45
`@Vaibhav`: This is a known bug of Webots R2020b. It was already fixed in the nightly build.


To work around the bug, you can edit the world file in a text editor.

##### Vaibhav 08/07/2020 12:51:22
Okay


> `@Vaibhav`: This is a known bug of Webots R2020b. It was already fixed in the nightly build.

`@Olivier Michel` How can i get the nightly build?

##### David Mansolino [Cyberbotics] 08/07/2020 12:52:06
> How to display the coordinate mark of the model？The red, green and blue arrows are not displayed

`@Laojiang` did you select it? Is it a PROTO or open node?

##### Olivier Michel [Cyberbotics] 08/07/2020 12:52:28
Google search "webots nightly build" should help you.

##### Vaibhav 08/07/2020 12:52:43
> Google search "webots nightly build" should help you.

`@Olivier Michel` Aight thanks 🤣

##### saditya 08/07/2020 14:25:12
> `@saditya` how did you define the slope ?

`@David Mansolino` 

> `@saditya` how did you define the slope ?

`@David Mansolino` As you can see it should be 3.63m long and 0.6m wide. But when i try to adjust with the height of the solid i connect to it just decreases because the rest of the solid(box) goes below the map to make the surface inclined.
%figure
![Slopetrial.png](https://cdn.discordapp.com/attachments/565154703139405824/741300919890739210/Slopetrial.png)
%end

##### David Mansolino [Cyberbotics] 08/07/2020 14:25:44
Then you can simply increase the size of the box and rotate it.

##### saditya 08/07/2020 14:30:40
> Then you can simply increase the size of the box and rotate it.

`@David Mansolino` It is of the right size I want now, but it just goes below the map even on rotating it?

##### Alex Nie 08/07/2020 14:30:41
Could we directly control the linear velocity and angular velocity of the robot? E.g. pioneer3dx.

##### David Mansolino [Cyberbotics] 08/07/2020 14:31:35
No, but with some basic trigonometry you should be able to compute the required motor command.

##### Alex Nie 08/07/2020 14:32:24
Thanks for answering


😃

##### Simon Steinmann [Moderator] 08/07/2020 15:02:27
what is TexturedBackgroundLight, and why does it make the floor of the RectangleArena glow?
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/741310297956155403/unknown.png)
%end

##### David Mansolino [Cyberbotics] 08/07/2020 15:03:14
It simply a directionnal light, whose direction and intensity mathes the background from 'texturedBackground'

##### Simon Steinmann [Moderator] 08/07/2020 15:04:24
is luminosity the same as intensity in the directionLight?

##### David Mansolino [Cyberbotics] 08/07/2020 15:05:30
Yes, it is linked to the DirectionalLight.intensity field.

##### Simon Steinmann [Moderator] 08/07/2020 15:06:20
but it doesnt seem to be exacgtly the same, adding a directional light and having it shine straight down, with intensity = 1, is quite a bit darker than the luminosity = 1

##### David Mansolino [Cyberbotics] 08/07/2020 15:17:53
Yes, there is a multiplication factor depending on the texture: [https://github.com/cyberbotics/webots/blob/master/projects/objects/backgrounds/protos/TexturedBackgroundLight.proto#L114](https://github.com/cyberbotics/webots/blob/master/projects/objects/backgrounds/protos/TexturedBackgroundLight.proto#L114)

##### Simon Steinmann [Moderator] 08/07/2020 15:17:56
I want to use webots to create training data for machine learning. I already implemented random position, orientation and lighting conditions. What I can't figure out though, is how to randomly change the floor appearance
> **Attachment**: [Domain\_Randomization\_1.mp4](https://cdn.discordapp.com/attachments/565154703139405824/741314190563737670/Domain_Randomization_1.mp4)

##### David Mansolino [Cyberbotics] 08/07/2020 15:18:38
You have to change the `floorAppearance` field.

##### Simon Steinmann [Moderator] 08/07/2020 15:20:03
it is a SFNode. Is there a collection of these appearances somewhere?

##### David Mansolino [Cyberbotics] 08/07/2020 15:20:36
Yes: [https://www.cyberbotics.com/doc/guide/appearances](https://www.cyberbotics.com/doc/guide/appearances)

##### Simon Steinmann [Moderator] 08/07/2020 15:22:00
thx 🙂  gonna try to implement that


How do I load these into my python code to address them?


robot.getFromDef('arena').getField('floorAppearance').setSFNode(BrushedAluminium {} )


this obviously does not work

##### Olivier Michel [Cyberbotics] 08/07/2020 15:32:52
you should use importSFNodeFromString("BrushedAluminium {}") instead.

##### Simon Steinmann [Moderator] 08/07/2020 15:35:32
appearance = robot.importSFNodeFromString("BrushedAluminium {}") 

throws an error



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/741318833696014346/unknown.png)
%end

##### Olivier Michel [Cyberbotics] 08/07/2020 15:36:26
No, it is a field method.

##### Simon Steinmann [Moderator] 08/07/2020 15:36:36
ohh

##### Olivier Michel [Cyberbotics] 08/07/2020 15:36:53
`robot.getFromDef('arena').getField('floorAppearance').importSFNodeFromString("BrushedAluminium {}")`

##### Simon Steinmann [Moderator] 08/07/2020 15:38:03
nice it works, but it gives me this error every time:

Error: wb\_supervisor\_field\_import\_sf\_node\_from\_string() called with a non-empty field.


guessing because it overwrites?

##### Olivier Michel [Cyberbotics] 08/07/2020 15:39:01
Yes. You should clear it before importing to get rid of the warning.

##### Simon Steinmann [Moderator] 08/07/2020 15:40:00
how do I do that? set it = None?

##### Olivier Michel [Cyberbotics] 08/07/2020 15:40:54
call the `removeSF()` method on the field.


[https://www.cyberbotics.com/doc/reference/supervisor?tab-language=python#wb\_supervisor\_field\_remove\_sf](https://www.cyberbotics.com/doc/reference/supervisor?tab-language=python#wb_supervisor_field_remove_sf)

##### Simon Steinmann [Moderator] 08/07/2020 15:47:31
robot.getFromDef('arena').getField('floorAppearance').removeSF() 

Now I get these two errors:

Warning wb\_supervisor\_field\_get/set\_mf\_*() called with index out of range.

Error: wb\_supervisor\_field\_import\_sf\_node\_from\_string() called with a non-empty field.

##### Olivier Michel [Cyberbotics] 08/07/2020 15:50:49
I am afraid you bumped into a bug...

##### Simon Steinmann [Moderator] 08/07/2020 15:51:02
🥳

##### Olivier Michel [Cyberbotics] 08/07/2020 15:52:07
If you can live with the first warning, that's probably the way to go... And open a bug report about removeSF()...

##### Simon Steinmann [Moderator] 08/07/2020 15:52:50
okay


hmm okay, changing the appearance only works once

##### FrostPhoenix 08/07/2020 17:04:56
Hi guys, any ideas on what is causing this error when trying to compile a controller: 



Makefile:72: Files/Webots /resources/Makefile.include: No such file or directory

make: *** No rule to make target 'Files/Webots /resources/Makefile.include'.  Stop.

##### David Mansolino [Cyberbotics] 08/07/2020 17:25:44
`@Simon Steinmann` you may also try with the Node.remove() method


`@FrostPhoenix` you have to update your makefile, if you didn't manually edit it, the simplest is Juste to delete it, Webots will recreate one for you.

##### FrostPhoenix 08/08/2020 04:41:09
`@David Mansolino` Thanks so much David that works.

##### Simon Steinmann [Moderator] 08/08/2020 10:43:18
I gave up and just converted the arena to base nodes and am changing the texture urls. That at least works nicely 🙂


on my laptop that runs up to 12x realtime 😄 (video is 1x)
> **Attachment**: [Domain\_Randomization\_2.mp4](https://cdn.discordapp.com/attachments/565154703139405824/741607778333884476/Domain_Randomization_2.mp4)

##### hero 08/08/2020 13:20:39
Hi, Does the complex environment like as complete apartment affect the controller speed with respect to a simple rectangular area?

##### Simon Steinmann [Moderator] 08/08/2020 13:37:39
Generally, the complexer the scene, the more your GPU has to work to render it. That should not be a problem on most computers, unless you make it very complex. What is usually the limiting factor is the physics simulation. If you have mostly static objects in a large scene and what your are simulating is limited to a few objects, it should still be very fast.


The simulation and controller are also 2 different things. You can have a very complex controller, doing some compicated calculations, taking longer than the actual simulation step and vice versa

##### hero 08/08/2020 17:21:21
Thanks so much Simon

##### Samir Hosny Mohamed 08/09/2020 04:26:57
Hello, I need help to use the web simulation, after run the scripts "simulation\_server.py" and "session\_server.py" and open the index.html to connect it hangs on "Connecting to Webots instance..."

What should i do to run the simulation ?

##### FrostPhoenix 08/09/2020 15:59:27
Hi again, whenever I try to use a SolidReference to create a closed loop kinematic chain Webots crashes as I add the solidName. Is there anything I can do to get this to work?

##### Jeremy Jiang 08/10/2020 01:06:03
Hello, I have a problem when I use Webots to simulate the robot Darwin-op. When I want to show the robot window to debug the robot, there is an error related to "robot window initialization failed" and "cannot load robotis-op2-window.dll robot window library". So I cannot open the robot window.But in fact I can find this .dll file in my computer. Could you give me some suggestions?
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/742186974818992189/unknown.png)
%end

##### jinu061353 08/10/2020 03:21:31
Is it possible to extract the uploaded code? plz..

##### David Mansolino [Cyberbotics] 08/10/2020 05:42:15
> Is it possible to extract the uploaded code? plz..

`@jinu061353` what do you mean by uploaded code? The controller code? If yes, then this is possible, the source code is available next to the executable, you can view it by selecting the `controller` field of the robot and pressing on the 'edit controller' button.


> Hello, I have a problem when I use Webots to simulate the robot Darwin-op. When I want to show the robot window to debug the robot, there is an error related to "robot window initialization failed" and "cannot load robotis-op2-window.dll robot window library". So I cannot open the robot window.But in fact I can find this .dll file in my computer. Could you give me some suggestions?

`@Jeremy Jiang` there is probably a library in your path that is causing conflicts with the dll of the robot-window. Which version of Webots are you using and with which OS?


> Hi again, whenever I try to use a SolidReference to create a closed loop kinematic chain Webots crashes as I add the solidName. Is there anything I can do to get this to work?

`@FrostPhoenix` can you please report this here (with a procedure explaining how to reproduce it): [https://github.com/cyberbotics/webots/issues/new?template=bug\_report.md](https://github.com/cyberbotics/webots/issues/new?template=bug_report.md)


> I gave up and just converted the arena to base nodes and am changing the texture urls. That at least works nicely 🙂

`@Simon Steinmann` that's indeed another solution (probably more efficient indeed).

##### Alex Nie 08/10/2020 06:02:33
`@David Mansolino` I found a problem when using an external controller.
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/742261590539239454/unknown.png)
%end

##### David Mansolino [Cyberbotics] 08/10/2020 06:03:31
What is the problem?

##### Alex Nie 08/10/2020 06:03:39
I have four external controllers and started them in multiple processes

##### David Mansolino [Cyberbotics] 08/10/2020 06:04:01
It seems the controller of the fourth robot is not started

##### Alex Nie 08/10/2020 06:04:22
Yes

##### David Mansolino [Cyberbotics] 08/10/2020 06:04:36
Ar you sure you are starting it?


is there some error message in the console where you start it?

##### Alex Nie 08/10/2020 06:05:40
I started them in a for loop, they are sometimes normal, that is, all four robots can move


If I cannot start all of them, then an error will be reported：
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/742262548094517308/unknown.png)
%end

##### David Mansolino [Cyberbotics] 08/10/2020 06:07:19
It seems you are starting two controllers in the same process

##### Alex Nie 08/10/2020 06:08:05

%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/742262981097816074/unknown.png)
%end



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/742263056561602671/unknown.png)
%end

##### David Mansolino [Cyberbotics] 08/10/2020 06:08:54
Ok that looks correct, can you please reprot this here: [https://github.com/cyberbotics/webots/issues/new?template=bug\_report.md](https://github.com/cyberbotics/webots/issues/new?template=bug_report.md)

And include these part of the controller.

##### Alex Nie 08/10/2020 06:08:54
This error will appear when I increase the simulation speed


OK！


thanks

##### Olivier Michel [Cyberbotics] 08/10/2020 08:59:13
> Hello, I need help to use the web simulation, after run the scripts "simulation\_server.py" and "session\_server.py" and open the index.html to connect it hangs on "Connecting to Webots instance..."

> What should i do to run the simulation ?

`@Samir Hosny Mohamed`: which index.html did you use? The one from the WEBOTS\_HOME/resources/web/streaming\_viewer/index.html? This one is actually to connect to a Webots instance without the session and simulation servers.


You need to write your own web page (index.html) that will initialize `webots.js` so that it uses the session and simulation servers you are running.


An example of this is provided here: [https://github.com/cyberbotics/simgait/blob/master/html/js/simulation.js](https://github.com/cyberbotics/simgait/blob/master/html/js/simulation.js)

##### Lukulus 08/10/2020 09:21:25
Hello, I need some help with a robot.

I am trying to build one which contions like two trains.

One is relative to the ground and the other should move on top of the train. So a robot on top of a robot (I hope you can understand me^^).

But the spinning wheels of the upper train, don't move the upper robot...

If I make two seperate robots, it works perfectly.

##### Olivier Michel [Cyberbotics] 08/10/2020 09:22:43
You should probably use a `LinearMotor` to move the top part from the bottom one.

##### Lukulus 08/10/2020 09:24:43
so I have to use a SliderJoint?

##### Olivier Michel [Cyberbotics] 08/10/2020 09:28:37
Yes.


(or make two separate robots).

##### saditya 08/10/2020 11:32:33
Need a bit help for the simulation! I have the simulating Seesaw ready, I need to attach it to the slope structure as seen in the picture. How do I make the slope rest on the surface? Should i add a box with physics and make it rest on it? With physics node? `@David Mansolino`
%figure
![SS.png](https://cdn.discordapp.com/attachments/565154703139405824/742344634641940520/SS.png)
%end

##### Olivier Michel [Cyberbotics] 08/10/2020 11:35:08
You can make the slope with a Box primitive that you will slightly rotate, but without Physics as I guess you want it to be static (not moveable).

##### saditya 08/10/2020 11:36:43
> You can make the slope with a Box primitive that you will slightly rotate, but without Physics as I guess you want it to be static (not moveable).

`@Olivier Michel` Thanks, can you guide me a bit? I have the slope and see-saw ready? I just need to add a supporting structure to the base so that it is flat, and once the robot moves on top of it it act as a seesaw.

##### Olivier Michel [Cyberbotics] 08/10/2020 11:38:06
Can you post a screenshot of what you have and what you want to achieve?

##### saditya 08/10/2020 11:42:39
> Can you post a screenshot of what you have and what you want to achieve?

`@Olivier Michel` Right now the the see saw is on the floor. I want it to connect it to the green structure(slope). It needs to rest as the way I sent you the previous picture. When the simulation runs it should be resting flat, and when the robot moves on the top and move for some distance it will act as a see saw. `@Olivier Michel`
%figure
![ss_trial.png](https://cdn.discordapp.com/attachments/565154703139405824/742347179775229972/ss_trial.png)
%end

##### Olivier Michel [Cyberbotics] 08/10/2020 11:45:18
In that case simply attaching the seesaw base to the static environment (no Physics) and the slope to the static environment as well should make the two parts unmovable. That should be sufficient.

##### saditya 08/10/2020 11:49:09
> In that case simply attaching the seesaw base to the static environment (no Physics) and the slope to the static environment as well should make the two parts unmovable. That should be sufficient.

`@Olivier Michel` Alright, sounds good. But i am still a bit confused. Can I add a solid node to the the slope and make the the see saw rest on it? DO you think that is a good idea?

##### Olivier Michel [Cyberbotics] 08/10/2020 11:49:57
There is no need for that.

##### saditya 08/10/2020 11:51:28
> There is no need for that.

`@Olivier Michel` Can you tell me in a few steps what should i do next? I have the structure ready. The see saw has 0.2kg structure below it to make it tilt as well.

##### Olivier Michel [Cyberbotics] 08/10/2020 11:52:56
Simply positioning the slope next to the seesaw should be sufficient.

##### saditya 08/10/2020 12:04:05
> Simply positioning the slope next to the seesaw should be sufficient.

`@Olivier Michel` This is the static world. I want this entire structure to be flat, but when I will run the simulation the see saw will fall down because it has mass and physics. Lol my bad. I don't understand this. I want the see saw at a certain height above the ground.
%figure
![ss2.png](https://cdn.discordapp.com/attachments/565154703139405824/742352570751909888/ss2.png)
%end

##### Olivier Michel [Cyberbotics] 08/10/2020 12:15:24
If it is attached to the static world, the seesaw shouldn't fall.

##### saditya 08/10/2020 12:16:10
> If it is attached to the static world, the seesaw shouldn't fall.

`@Olivier Michel` Can I raise the height of the base , of the seesaw? To make it above from the grounD?

##### Olivier Michel [Cyberbotics] 08/10/2020 12:16:24
Sure.

##### saditya 08/10/2020 12:29:38
> Simply positioning the slope next to the seesaw should be sufficient.

`@Olivier Michel` i DID THAT does not work , it doesnt remain flat.

##### Olivier Michel [Cyberbotics] 08/10/2020 12:36:01
Sorry, but it's difficult to further help you without having a look at your simulation. I will be able to do that if you subscribe to a Premier service, see [https://www.cyberbotics.com/#plans](https://www.cyberbotics.com/#plans).

##### saditya 08/10/2020 13:29:42
> Sure.

`@Olivier Michel` I tried this way, the behavior and everything is fine. But I don't want the other side of the seesaw to completely hit the ground. Should I increase the size of the box(base) or the translation of the box(base)?
> **Attachment**: [trial.mp4](https://cdn.discordapp.com/attachments/565154703139405824/742374117474566164/trial.mp4)

##### Olivier Michel [Cyberbotics] 08/10/2020 13:34:29
Yes, probably.


Both solutions should work.

##### Samir Hosny Mohamed 08/10/2020 13:45:14
> You need to write your own web page (index.html) that will initialize `webots.js` so that it uses the session and simulation servers you are running.

`@Olivier Michel` Ok, i will try that, thanks ❤


`@Olivier Michel` i tried the code but simulation\_server.py give an error "The system cannot find the path specified: '@UserDir/AppData/Local/Temp/webots/instances/1637901311944'"


another question,, when i use the wwi socket it works only in the first time,, then it fails and give a "device not found" warning !
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/742490775153279066/unknown.png)
%end


> another question,, when i use the wwi socket it works only in the first time,, then it fails and give a "device not found" warning !

`@Samir Hosny Mohamed` this happens because using the function getPosition() in the supervisor mode !

##### Olivier Michel [Cyberbotics] 08/11/2020 05:39:41
Which version of Webots are you using?

##### Samir Hosny Mohamed 08/11/2020 08:03:49
R2020a

##### Olivier Michel [Cyberbotics] 08/11/2020 08:04:33
I would strongly recommend you to upgrade to R2020b which fixes several issues with respect to simulation server.

##### Samir Hosny Mohamed 08/11/2020 08:13:08
Ok, i will do that as soon as i can, Thanks very much ❤️

##### Kormit 08/11/2020 14:46:29
Is there a maximum range for distance sensors? No matter how big my lookup table is it always seems to max out at the max lookup table value at the same distance every time.

##### David Mansolino [Cyberbotics] 08/11/2020 14:47:18
The maximum distance is indeed the last value of the lookup table.

##### Kormit 08/11/2020 14:48:01
This doesn't seem to help as no matter the value over a specific point the max distance seems to stay the same.

##### Olivier Michel [Cyberbotics] 08/11/2020 14:49:19
Did you try to save and revert after changing the lookupTable?

##### Kormit 08/11/2020 14:49:33
Yes

##### Olivier Michel [Cyberbotics] 08/11/2020 14:50:01
What is the maximum distance value you get?

##### Kormit 08/11/2020 14:50:56
It goes from a read value of 0.16 instantly up to my maximum lookup table value of 10.

##### Olivier Michel [Cyberbotics] 08/11/2020 14:51:33
Can you copy/paste your lookupTable here?

##### Kormit 08/11/2020 14:54:10
It's just 0 0 then 10 10 with no noise

##### Olivier Michel [Cyberbotics] 08/11/2020 14:56:02
So, it's `[ 0 0 0, 10 10 0 ]`, correct?

##### Kormit 08/11/2020 14:56:31
yes

##### Olivier Michel [Cyberbotics] 08/11/2020 14:59:02
And when you set it to `[ 0 0 0, 100 100, 0]` the range doesn't change?

##### Kormit 08/11/2020 14:59:52
No it does the same 0.16 to 100 issue.

##### David Mansolino [Cyberbotics] 08/11/2020 15:01:49
It is probable that the problem is rather related to the environment rather to the sensor


did you tried with severa kind of obstacles?

##### Kormit 08/11/2020 15:03:48
It is a flat wall and the environment is a maze so only has flat walls.

##### Olivier Michel [Cyberbotics] 08/11/2020 15:06:41
It could be some part of your robot occluding the sensor ray for a few time steps. Can you activate the distance sensor ray visualization in the View menu and run the simulation step-by-step?

##### Kormit 08/11/2020 15:08:00
I'm using the e-puck robot and customising it and I've been using the visualisation and the length of the rays increase with the increasing lookup table max value however the colour goes red at the same distance every time.

##### Olivier Michel [Cyberbotics] 08/11/2020 15:09:06
Can you revert to a non-customized e-puck robot for which you would change only the lookupTable?

##### Kormit 08/11/2020 15:10:02
That is mostly the only thing I am changing about the e-puck


Do you have any idea what the solution might be?

##### Olivier Michel [Cyberbotics] 08/11/2020 16:05:01
Sorry, no.

##### Kormit 08/11/2020 16:05:50
So there is no way to increase the distance sensor range?

##### Olivier Michel [Cyberbotics] 08/11/2020 16:07:11
Yes, it should work. I don't know why it doesn't for you. Do you have an active Premier service for user support?

##### Kormit 08/11/2020 16:07:38
No I do not

##### Olivier Michel [Cyberbotics] 08/11/2020 16:13:58
Sorry, we can't better help you.

##### Jhon mathew 08/11/2020 16:52:42

%figure
![Screenshot_2020-08-11-22-21-54-819_com.android.chrome.jpg](https://cdn.discordapp.com/attachments/565154703139405824/742787592059355196/Screenshot_2020-08-11-22-21-54-819_com.android.chrome.jpg)
%end


Guys I made my robot with recognition but I need to object tracking. So I need X,Y, height, width of the recognised object. can anyone help me with that.


Atleast anyone tell me. how to print X,Y,height, width of the recognised object.



%figure
![Screenshot_2020-08-12-08-29-10-651_com.mxtech.videoplayer.pro.jpg](https://cdn.discordapp.com/attachments/565154703139405824/742940389547311164/Screenshot_2020-08-12-08-29-10-651_com.mxtech.videoplayer.pro.jpg)
%end

##### David Mansolino [Cyberbotics] 08/12/2020 05:59:47
`@Jhon mathew` here is an example controller showing how to do this: [https://github.com/cyberbotics/webots/blob/master/projects/samples/devices/controllers/camera\_recognition/camera\_recognition.c#L54](https://github.com/cyberbotics/webots/blob/master/projects/samples/devices/controllers/camera_recognition/camera_recognition.c#L54)

##### Jhon mathew 08/12/2020 06:21:40
thank you soo much this is what I am searching for 🤩

##### David Mansolino [Cyberbotics] 08/12/2020 06:21:49
You're welcome 🙂

##### Diglet 08/12/2020 08:26:15
Hi ! I'm trying to create a hand gesture controller with OpenCV and Nao Robot on Webots. I've created a CNN hand gesture model working in real time. Im trying to use it in Nao simulation but I dont know how to start. Is there something in User Guide that can help me ?


Im trying to do something like this : [https://www.youtube.com/watch?v=U3qiZ6ZUWQE](https://www.youtube.com/watch?v=U3qiZ6ZUWQE)

##### Olivier Michel [Cyberbotics] 08/12/2020 08:31:41
Hi, yes, you should probably follow the tutorials in the user guide to get started with robot programming.

##### saditya 08/12/2020 08:44:47
I want a plain wooden floor for my environment and not the chequed style design. Can i change it within WEBOTS? Or do I need to have another texture or something?
%figure
![floor.png](https://cdn.discordapp.com/attachments/565154703139405824/743027193134710824/floor.png)
%end

##### David Mansolino [Cyberbotics] 08/12/2020 08:46:44
Yes sure, you simply need to use the one of the wood appearances, such as this one: [https://cyberbotics.com/doc/guide/appearances#roughpine](https://cyberbotics.com/doc/guide/appearances#roughpine)


If you are using the RectangeArena PROTO node, you simply need to remove the node in the `floorAppearance` field and replace it by one of the wood apperance

##### saditya 08/12/2020 08:53:19
> If you are using the RectangeArena PROTO node, you simply need to remove the node in the `floorAppearance` field and replace it by one of the wood apperance

`@David Mansolino` I dont need the walls around so I am trying to use In Nodes- floors- Floor Solid(Configurable standard flat floor). Can i change the appearance for this as well?

##### David Mansolino [Cyberbotics] 08/12/2020 09:00:50
Yes sure, in that case it is the `appearance` field instead of `floorAppearance`.

##### saditya 08/12/2020 09:03:03
> If you are using the RectangeArena PROTO node, you simply need to remove the node in the `floorAppearance` field and replace it by one of the wood apperance

`@David Mansolino` It;s a bit small, but I want to create something like that. A big map ( In brown floor) in which some part of it is covered in black on which we have white lines for line following. How would you suggest me to deal with it? Should I add texture to the floor or how?
%figure
![fieldview.jpeg](https://cdn.discordapp.com/attachments/565154703139405824/743031787894341662/fieldview.jpeg)
%end

##### David Mansolino [Cyberbotics] 08/12/2020 09:03:44
Yes the simplest solution is to create your own texture.

##### saditya 08/12/2020 09:08:50
> Yes the simplest solution is to create your own texture.

`@David Mansolino` Do you recommend to use a third party software to create or I could use the floor from the objects and then have a very thin black solid part.

##### David Mansolino [Cyberbotics] 08/12/2020 09:09:22
You can add a plane shape slightly on top of the floor.

##### Diglet 08/12/2020 09:16:34
`@Olivier Michel` Thanks for replying. Can you tell me which of the tutorials should i real to know how to use third party software like OpenCV to use hand gesture controlling on Nao Robot in Webots. Do I have to create a new controller or there is an example how I can achieve it. Using nao-demo i could just change controlling robot with keybord on controlling with camera gesture. I am right ?

##### Olivier Michel [Cyberbotics] 08/12/2020 09:17:26
Yes, I would recommend tutorials 1 to 6 to get a good understanding on how Webots works in general.

##### saditya 08/12/2020 09:17:36
> You can add a plane shape slightly on top of the floor.

`@David Mansolino` Alright thanks a lot! I will try it out now. For the white lines i should add texture on the plane floor now?

##### David Mansolino [Cyberbotics] 08/12/2020 09:19:19
yes

##### Diglet 08/12/2020 09:24:36
`@Olivier Michel` Ok, thank you so much 🙂

##### saditya 08/12/2020 09:43:58
> yes

`@David Mansolino` I tried to add this line, to the black plane structure. But it does not appear on the plane.  Going wrong somewhere?
%figure
![rsz_screenshot_from_2020-08-12_11-37-31.png](https://cdn.discordapp.com/attachments/565154703139405824/743042087666319450/rsz_screenshot_from_2020-08-12_11-37-31.png)
%end

##### David Mansolino [Cyberbotics] 08/12/2020 09:44:46
I would recommend following this tutorial to understand how appearances work: [https://cyberbotics.com/doc/guide/tutorial-3-appearance](https://cyberbotics.com/doc/guide/tutorial-3-appearance)

##### Jhon mathew 08/12/2020 13:06:24
guys I have used texture quality medium but my webots is always crashing. other apps are running fine only webots is crashing like this..



processor - i5 intel

graphics - nvidia 150mx

##### Simon Steinmann [Moderator] 08/12/2020 13:07:20
Is it crashing in your own world, or also in a sample world?

##### Olivier Michel [Cyberbotics] 08/12/2020 13:07:27
Did you try the safe mode?


[https://www.cyberbotics.com/doc/guide/starting-webots#safe-mode](https://www.cyberbotics.com/doc/guide/starting-webots#safe-mode)

##### Jhon mathew 08/12/2020 13:09:03

%figure
![InShot_20200812_183640018.jpg](https://cdn.discordapp.com/attachments/565154703139405824/743093696396001419/InShot_20200812_183640018.jpg)
%end


cpu 100%


> Did you try the safe mode?

`@Olivier Michel` 



will it work ?  for my problem

##### Olivier Michel [Cyberbotics] 08/12/2020 13:09:51
Maybe.

##### Jhon mathew 08/12/2020 13:10:25
CPU usage 100% is it normal on webots ? 😢

##### Olivier Michel [Cyberbotics] 08/12/2020 13:10:58
Depending on your simulation, this may be possible.

##### Simon Steinmann [Moderator] 08/12/2020 13:11:46
you probably have a laptop dual or quad core. So it may very well be at 100%


try updating your nvidia drivers


[https://answers.microsoft.com/en-us/windows/forum/windows\_10-performance/help-with-blue-screen-driver-power-state-failure/3a7427d5-8965-47d4-858d-b34601496f65](https://answers.microsoft.com/en-us/windows/forum/windows_10-performance/help-with-blue-screen-driver-power-state-failure/3a7427d5-8965-47d4-858d-b34601496f65)


check out this link


for your bluescreen

##### Jhon mathew 08/12/2020 13:14:38
> you probably have a laptop dual or quad core. So it may very well be at 100%

`@Simon Steinmann` 



yeah I have done its upto date. 💯 anyway thanks for the help guys 😊

##### Simon Steinmann [Moderator] 08/12/2020 13:15:10
check the link and go through the troubleshooting steps. Especially the poweroptions might help

##### Jhon mathew 08/12/2020 13:16:24
`@Simon Steinmann` thanks dude

##### Kormit 08/12/2020 14:22:24
Is it possible to block light from a PointLight going through walls? Am I making walls incorrectly? Thanks

##### Olivier Michel [Cyberbotics] 08/12/2020 14:23:00
No, it's not possible.

##### saditya 08/12/2020 14:23:13
> I would recommend following this tutorial to understand how appearances work: [https://cyberbotics.com/doc/guide/tutorial-3-appearance](https://cyberbotics.com/doc/guide/tutorial-3-appearance)

`@David Mansolino` Can I add polygons with minimum thickness and add a appearance to them? Or will I have to design the map in some third party and add as a texture?

##### Olivier Michel [ROS 2 Meeting-Cyberbotics] 08/12/2020 14:24:06
`@Kormit`: You can however enable shadows.


`@Kormit`: or you can use SpotLight and ensure the spot cuts the light before the wall.

##### Kormit 08/12/2020 14:32:20
Thanks I'll take a look

##### David Mansolino [Cyberbotics] 08/12/2020 14:37:32
> `@David Mansolino` Can I add polygons with minimum thickness and add a appearance to them? Or will I have to design the map in some third party and add as a texture?

`@saditya` as you prefeer, both solution should work, but I would recommend drawing the lines directly in the textures, this is the simplest solution.

##### saditya 08/12/2020 15:01:47
> `@saditya` as you prefeer, both solution should work, but I would recommend drawing the lines directly in the textures, this is the simplest solution.

`@David Mansolino` I tried having white lines with a black background and i tried to have that texture on my solid, but seems like it's not white. Idk if i am doing something wrong here.

##### David Mansolino [Cyberbotics] 08/12/2020 15:05:17
You should be carreful abou tthe roughness and metalness values of the appearance

##### saditya 08/12/2020 15:42:15
> You should be carreful abou tthe roughness and metalness values of the appearance

`@David Mansolino` Thanks! I will have a look at it 🙂

##### KelvinYang0320 08/13/2020 00:52:07
I've come across a problem while using getVelocity() for a Solid node.

And it seems that my code work fine on webots 2020a revision 1, yet I get nan on webots 2020b.

Can you give me a hand?



%figure
![deepbots_err.PNG](https://cdn.discordapp.com/attachments/565154703139405824/743270763338924062/deepbots_err.PNG)
%end



%figure
![67c19513a6307127.PNG](https://cdn.discordapp.com/attachments/565154703139405824/743270800517234748/67c19513a6307127.PNG)
%end

##### David Mansolino [Cyberbotics] 08/13/2020 05:15:30
`@KelvinYang0320` can you share your world + controller? It is difficult to understand what is hapennign without them.

##### KelvinYang0320 08/13/2020 05:22:51
I simply follow this deepbots tutorial.

[https://github.com/aidudezzz/deepbots-tutorials](https://github.com/aidudezzz/deepbots-tutorials)

Thanks

> `@KelvinYang0320` can you share your world + controller? It is difficult to understand what is hapennign without them.

`@David Mansolino`

##### David Mansolino [Cyberbotics] 08/13/2020 05:26:07
perfect, thank you. You are from the OpenDR project right?

##### KelvinYang0320 08/13/2020 05:30:51
No, I'm doing a project about reinforcement learning in NTHU.😀

##### David Mansolino [Cyberbotics] 08/13/2020 05:33:27
I will have a look this morning and let you know

##### KelvinYang0320 08/13/2020 05:34:15
Ok, thank you!


The error comes from 

endpointVelocity = normalizeToRange(self.poleEndpoint.getVelocity()[3], -1.5, 1.5, -1.0, 1.0, clip=True)

in supervisorController.py

##### Alex Nie 08/13/2020 07:21:33
Why can't I use Supervisor on the internal controller? 😥
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/743368631525834792/unknown.png)
%end

##### Simon Steinmann [Moderator] 08/13/2020 07:22:04
you have to set the supervisor to TRUE (left side in the robot options)

##### Alex Nie 08/13/2020 07:23:02
Thanks

##### saditya 08/13/2020 08:46:56
> You should be carreful abou tthe roughness and metalness values of the appearance

`@David Mansolino` Do you think this line should be noted well as a white line? Its actually not a line but a solid with very less thickness and then the color on top of it. This is just for trial. Do yo think this would work well with the line sensor?
%figure
![Selection_038.png](https://cdn.discordapp.com/attachments/565154703139405824/743390119725236264/Selection_038.png)
%end

##### Olivier Michel [Cyberbotics] 08/13/2020 08:48:04
I think so, can you try it?

##### Stefania Pedrazzi [Cyberbotics] 08/13/2020 11:01:39
`@KelvinYang0320` I'm inspecting the bug you reported and will be fixed in the next version of Webots R2020b revision 1 that we will be released soon.

For the moment I can suggest you a workaround that simply consists in explicitly deleting the `POLE_ENDPOINT` node before deleting the `ROBOT` node:

```
def respawnRobot(self):
        if self.robot is not None:
            # Despawn existing robot
            self.poleEndpoint.remove()  # NEW INSTRUCTION
            self.robot.remove()
                ...
```

This will reset the internal cache for the `POLE_ENDPOINT` DEF name so that the newly imported is found.

##### KelvinYang0320 08/13/2020 11:13:09
`@Stefania Pedrazzi` 

Thanks 👍

I will try it.

##### Kormit 08/13/2020 11:14:27
Hi, I'm having issues with distance sensors where if they are at a specific angle to a wall, the reading will be always max no matter the distance away. At other angles it works perfectly.

##### David Mansolino [Cyberbotics] 08/13/2020 11:15:42
Is the distance sensor type 'sonar'?

If yes, this probably explains what you are experiencing: [https://cyberbotics.com/doc/reference/distancesensor#sonar-sensors](https://cyberbotics.com/doc/reference/distancesensor#sonar-sensors)

##### Kormit 08/13/2020 11:21:12
Okay thanks

##### David Mansolino [Cyberbotics] 08/13/2020 11:21:29
You're welcome

##### saditya 08/13/2020 12:54:42
> I think so, can you try it?

`@Olivier Michel` I did try but does not work well. I have distance sensors to be precise, however I am trying to have a line following behavior. Before I run any mission, i need to calibrate my sensors for edge detection. I move the robot on the white line and calibrate sensors , and i get certain values. When I need to calibrate it for the black environment, I get same values of Reflection from the reflections from the black surface. Am i doing something wrong here? `@Darko Lukić` if you could help?

##### David Mansolino [Cyberbotics] 08/13/2020 14:02:51
Did you set the type of the distance-sensor to 'infra-red' ?

##### saditya 08/13/2020 14:27:59
> Did you set the type of the distance-sensor to 'infra-red' ?

`@David Mansolino` Yes I did for all the sensors here.
%figure
![infra.png](https://cdn.discordapp.com/attachments/565154703139405824/743475950330708168/infra.png)
%end

##### David Mansolino [Cyberbotics] 08/13/2020 14:28:35
And you can't measure any difference between the black and white part?

##### saditya 08/13/2020 14:31:51
> And you can't measure any difference between the black and white part?

`@David Mansolino` This is an interface which is normal conditions should spit out values which have different values (tested before on different experiments) not on WEBOTS. They should have different values. But it doesn't.


This is an interface which is normal conditions should spit out values which have different values (tested before on different experiments) not on WEBOTS. They should have different values. But it doesn't.
%figure
![sensors.png](https://cdn.discordapp.com/attachments/565154703139405824/743477045610414080/sensors.png)
%end


> And you can't measure any difference between the black and white part?

`@David Mansolino` That is how I implemented in the code.
%figure
![implement.png](https://cdn.discordapp.com/attachments/565154703139405824/743477507344564224/implement.png)
%end

##### David Mansolino [Cyberbotics] 08/13/2020 14:35:13
That looks correct


Maybe just to identify if the problem is at the world modelling level, you can try with your robot and your controller in this world: [https://www.cyberbotics.com/doc/guide/epuck#e-puck\_line-wbt](https://www.cyberbotics.com/doc/guide/epuck#e-puck_line-wbt)

##### saditya 08/13/2020 14:52:43
> That looks correct

`@David Mansolino` Alright! It doesn't let me modify the world though. How should I use in my robot and controller? in the same world

##### David Mansolino [Cyberbotics] 08/13/2020 15:08:32
When you try to save it Webots will ask you if you want to relacote the simulation, just say yes

##### MarioAndres7 08/13/2020 16:21:20
hello do you know how can i change the speed of movement of kuka youbot in c ?

##### areiban 08/13/2020 17:02:33
Hello 

Is it normal for Webots to be slow in animations, and produce strange sound?

##### Simon Steinmann [Moderator] 08/13/2020 17:25:59
Not really. Is it just in your custom world, or does it happen in sample-worlds too?

##### areiban 08/13/2020 17:33:00
I was testing it with the examples that it brings by default

##### Simon Steinmann [Moderator] 08/13/2020 17:39:36
then it is not normal

##### MarioAndres7 08/13/2020 21:20:19
hello can i control only one wheel of youbot ?

##### Peide Huang 08/14/2020 04:30:59
Hi all, I am trying out 2020b version. When I use legacy NUE coordinateSystem, everything works normally. However, after I change it to the new ENU system, I found the gravity direction is incorrect (still in the -y axis), therefore any object with weight will fly horizontally. I am not sure if I missed anything or it is a bug. Could someone help me with this? Thanks!

##### David Mansolino [Cyberbotics] 08/14/2020 05:51:03
> Hello 

> Is it normal for Webots to be slow in animations, and produce strange sound?

`@areiban` the strange sounds are contact sounds (which I have to admit are not calibrated for most of the simulation), but you can easily disable sound from the toolbar.


About the animation speed, you should try reducing the advanced rendering feature from the OpenGL tab of the preferences: [https://cyberbotics.com/doc/guide/preferences#opengl](https://cyberbotics.com/doc/guide/preferences#opengl)


> hello can i control only one wheel of youbot ?

`@MarioAndres7` Yes sure, for this you have to use low level control of the wheel. You can check how to do this in the sources of the youbot library: [https://github.com/cyberbotics/webots/blob/master/projects/robots/kuka/youbot/libraries/youbot\_control/src/base.c](https://github.com/cyberbotics/webots/blob/master/projects/robots/kuka/youbot/libraries/youbot_control/src/base.c)

But I would recommend following this tutorial (it works the smae way for the youbot): [https://www.cyberbotics.com/doc/guide/tutorial-4-more-about-controllers](https://www.cyberbotics.com/doc/guide/tutorial-4-more-about-controllers)


> Hi all, I am trying out 2020b version. When I use legacy NUE coordinateSystem, everything works normally. However, after I change it to the new ENU system, I found the gravity direction is incorrect (still in the -y axis), therefore any object with weight will fly horizontally. I am not sure if I missed anything or it is a bug. Could someone help me with this? Thanks!

`@Peide Huang` have you tried saving and reverting the world after changing the coordinate system?

##### yash 08/14/2020 06:46:33
Hello ! How can I add flexure hinge based/compliant joint mechanisms in Webots .?

##### Olivier Michel [Cyberbotics] 08/14/2020 06:49:04
You should probably add a hinge joint and tune the spring and damping parameters.

##### yash 08/14/2020 06:50:19
Oh okay , and if I want to add a soft or flexible link .?


That is instead of a rigid body link

##### Olivier Michel [Cyberbotics] 08/14/2020 06:51:34
This may not be easy as Webots relies on a rigid body physics engine (ODE). But you can approximate soft bodies by building a series of small rigid bodies connected to each other with joints.


See for example [https://cyberbotics.com/doc/guide/samples-howto#rope-wbt](https://cyberbotics.com/doc/guide/samples-howto#rope-wbt).

##### yash 08/14/2020 06:53:52
Okay thanks a lot !

##### Laojiang 08/14/2020 08:37:37
I have add GPS in my robot node ,why there is Warning: "Gps" device not found when I run the program?



%figure
![N1WPWGCJYNETW3I7D.png](https://cdn.discordapp.com/attachments/565154703139405824/743750552038408232/N1WPWGCJYNETW3I7D.png)
%end

##### David Mansolino [Cyberbotics] 08/14/2020 08:39:35
Did you save and revert the simulation?

##### Laojiang 08/14/2020 08:42:30
I reload the simulation and it's ok . thank you

##### saditya 08/14/2020 10:19:47
Trying to replicate line following behavior, used plane as solid to make the straight line. Need to make some arc now with the same plane. I can have multiple planes and add transform nodes to make an arc. But how I make them curve. IT will be dependent on the rotation and translation? If i am not wrong. Could you guide a bit.( You can see the arcs in the texture, that is how I need it)
%figure
![curve.png](https://cdn.discordapp.com/attachments/565154703139405824/743775873798373466/curve.png)
%end

##### David Mansolino [Cyberbotics] 08/14/2020 10:22:32
You probably want to use another software (such as Blender) to design more complex 3D shapes.

##### Peide Huang 08/14/2020 12:33:24
> `@Peide Huang` have you tried saving and reverting the world after changing the coordinate system?

`@David Mansolino` Yes, I have saved and even reloaded the world. I also tried creating a new world from scratch and it still have the same issue

##### David Mansolino [Cyberbotics] 08/14/2020 12:35:52
Can you share your simulation (world file)?

##### Peide Huang 08/14/2020 13:20:22
I just created a new world file to reproduce this
> **Attachment**: [reproduce\_ENU\_error.wbt](https://cdn.discordapp.com/attachments/565154703139405824/743821319732330606/reproduce_ENU_error.wbt)


This is under NUE
> **Attachment**: [reproduce\_ENU\_error.mp4](https://cdn.discordapp.com/attachments/565154703139405824/743821567351586866/reproduce_ENU_error.mp4)


This is under ENU
> **Attachment**: [reproduce\_ENU\_error\_1.mp4](https://cdn.discordapp.com/attachments/565154703139405824/743821783312105522/reproduce_ENU_error_1.mp4)

##### Olivier Michel [Cyberbotics] 08/14/2020 13:27:54
Changing `WorldInfo.coordinateSystem` to `"ENU"` is not sufficient, you also need to rotate and position objects in the Z-vertical environment. Here is a properly rotated world file:


ENU rotated world file
> **Attachment**: [reproduce\_ENU\_error.wbt](https://cdn.discordapp.com/attachments/565154703139405824/743823336555020378/reproduce_ENU_error.wbt)

##### saditya 08/14/2020 13:37:48
> You probably want to use another software (such as Blender) to design more complex 3D shapes.

`@David Mansolino` Alright! Is it easy to export it from there to WEBOTS? Also can we use AUTOCAD?

##### Peide Huang 08/14/2020 13:39:07
> Changing `WorldInfo.coordinateSystem` to `"ENU"` is not sufficient, you also need to rotate and position objects in the Z-vertical environment. Here is a properly rotated world file:

`@Olivier Michel` Got it. Thank you!

##### David Mansolino [Cyberbotics] 08/14/2020 13:48:25
> `@David Mansolino` Alright! Is it easy to export it from there to WEBOTS? Also can we use AUTOCAD?

`@saditya` here are the supported format for importation (see 'Import 3D Model...'): [https://cyberbotics.com/doc/guide/the-user-interface#file-menu](https://cyberbotics.com/doc/guide/the-user-interface#file-menu)

##### Kamil Kaya 08/14/2020 15:35:13
Hello guys. I am converting the c code of stewart platform to cpp code. But my actuator doesn't move. I can't even move the actuators in generic motor windows. My controllers run and also ends succesfully but actuators dont move. The source code
> **Attachment**: [bouncer.cpp](https://cdn.discordapp.com/attachments/565154703139405824/743855257989283961/bouncer.cpp)

##### Olivier Michel [Cyberbotics] 08/14/2020 15:42:22
Does it help  to remove these lines which are not present in the original C controller?

```C++
    pistons[i]->setPosition(INFINITY);
    pistons[i]->setVelocity(0.0);
```

##### Kamil Kaya 08/14/2020 15:43:31
Actually it did


T

> Does it help  to remove these lines which are not present in the original C controller?

> 
```C++
>     pistons[i]->setPosition(INFINITY);
>     pistons[i]->setVelocity(0.0);
> 
```

`@Olivier Michel` Thank You so much

##### Olivier Michel [Cyberbotics] 08/14/2020 15:43:49
Also you should print the position value you are sending, e.g., `AMPL * sin(phase)` and compare it to the one sent by the original C controller.

##### Kamil Kaya 08/14/2020 15:46:08
> Also you should print the position value you are sending, e.g., `AMPL * sin(phase)` and compare it to the one sent by the original C controller.

`@Olivier Michel` Ok. Thx for helping.

##### saditya 08/14/2020 16:18:27
How can I import a .stl file to WEBOTS? DO i need to convert it to VRML 97 format? How can we do it?

##### Simon Steinmann [Moderator] 08/14/2020 16:18:52
make sure you have the newest version of webots


then you can just go File > Import 3D model

##### saditya 08/14/2020 16:20:15
> make sure you have the newest version of webots

`@Simon Steinmann` I am currently on 2020a, and I cant; update because of some issues with my internal configurations requirement. IS there any other way?

##### Simon Steinmann [Moderator] 08/14/2020 16:20:59
that is by far the easiest. I'd highly recommend updating though


what OS are you on, and what configurations stop you?

##### saditya 08/14/2020 16:34:57
I imported this object, but seems it's huge compared to the actual world. Can you help me fix it?
%figure
![rotor.png](https://cdn.discordapp.com/attachments/565154703139405824/743870290580471870/rotor.png)
%end

##### Simon Steinmann [Moderator] 08/14/2020 16:35:29
it looks to be a bridge. That should be huge

##### saditya 08/14/2020 16:35:43
Should be actually this size?
%figure
![photo_2020-08-14_18-28-31.jpg](https://cdn.discordapp.com/attachments/565154703139405824/743870482432131142/photo_2020-08-14_18-28-31.jpg)
%end


> Should be actually this size?

`@saditya` Can I have a rotational motor attached to this to make the black part moving with a certain speed? `@Simon Steinmann`

##### Simon Steinmann [Moderator] 08/14/2020 16:48:08
make sure the units are correct in the .stl file. Webots uses meters as units

##### saditya 08/14/2020 16:48:58
> make sure the units are correct in the .stl file. Webots uses meters as units

`@Simon Steinmann` Yeah my bad. What do you think about the rotation part? Can i add a motor?

##### Simon Steinmann [Moderator] 08/14/2020 16:51:35
I'm not sure if you can have a motor inside of a single model. You would probably have to split the part up, into the black and the golden part

##### saditya 08/14/2020 17:34:44
> I'm not sure if you can have a motor inside of a single model. You would probably have to split the part up, into the black and the golden part

`@Simon Steinmann` Alright I will have a look. Thanks! 🙂

##### areiban 08/14/2020 20:35:18
Hello I'm working on path planning problems using Webots, but I have thought to create more complex environment adding objects to scene procedurally; my question is, is it posible to generate procedural environments in Webots ?

##### Simon Steinmann [Moderator] 08/14/2020 22:19:03
you can add and load things from code, so you can definitely do it manually.

##### Sanket Khadse 08/15/2020 06:08:42
> I imported this object, but seems it's huge compared to the actual world. Can you help me fix it?

`@saditya` There's an option, size in the scene tree, which is set to 1,1,1. You can reduce the size accordingly then.

##### Marko G 08/15/2020 09:53:38
hey

i'm using kuka lbr iiwa from the community repozitory and i'm having a problem with controlling it.



the problem is that the robot is highly dragged down by gravity. everything works as expected when i set gravity to 0, but not otherwise. when i import the robot it says:

WARNING: KukaLbrIiwa14R820 (PROTO) > HingeJoint > Solid > HingeJoint > Solid > HingeJoint > Solid > HingeJoint > Solid > HingeJoint > Solid > HingeJoint > Solid > HingeJoint > Solid > Solid: Undefined inertia matrix: using the identity matrix. Please specify 'boundingObject' or 'inertiaMatrix' values.

WARNING: KukaLbrIiwa14R820 (PROTO) > Solid: Undefined inertia matrix: using the identity matrix. Please specify 'boundingObject' or 'inertiaMatrix' values.



do i have to change the masses or define the intertia matrix?

the same happens when i compile the robot from the urdf source

##### Lukulus 08/15/2020 11:51:56
Is there a good solution for build a cable winch e.g. for a crane?

And if yes, how it would be realized?

##### Simon Steinmann [Moderator] 08/15/2020 13:08:20
`@Marko G` did you download the newest version? They changes yesterday


fixed exactly those 2 issues

##### Marko G 08/15/2020 13:55:38
i did not

great, thanks a lot 😄

##### Kamil Kaya 08/15/2020 14:30:04
Hello. I have to use opencv in my controller but it is compiling but not linking it say something like "undefined reference to...". (Note that linking error is only occuring during calling one of the opencv functions otherwise no error during building,). Also I use opencv version 4.4. My makefile is
> **Attachment**: [Makefile](https://cdn.discordapp.com/attachments/565154703139405824/744201247917342740/Makefile)

##### alxy 08/15/2020 15:20:08
Is it possible to change the size of a proto node? I tried to use this gripper ( [https://github.com/cyberbotics/community-projects/tree/master/devices/robotiq/protos](https://github.com/cyberbotics/community-projects/tree/master/devices/robotiq/protos) ) with my robot arm, but it is far too big for my rather small arm, so ideally I want to scale it sonehow. Unfortunatly, the original gripper for my arm is not yet available as urdf file or similar.

##### Simon Steinmann [Moderator] 08/15/2020 15:24:15
there should be a scale property

##### alxy 08/15/2020 15:26:09
this proto file only defines translation, rotation and controller als porperties


I dont see a scale option, and if I read the documentation correctly it appears this is on purpose:

> In PROTO nodes that correspond to real world objects, it is not recommend to add fields such as mass or scale. This is because in real life, you cannot change the mass or the size of an object. And we don't want to encourage users of the PROTO nodes to do so, as it may lead to non-realistic models and numerical instabilities. Some exceptions however exist. For example, it may be convenient to add a size field to a Matryoshka doll PROTO. Nevertheless, such a size field should be limited to a minimal and a maximal size or to a limited range of integer values. Therefore it could be either a floating point or an integer value.


Ok, I was able to put it into a transform node which has the scale property indeed. Just unsure if this is the best option....

##### Simon Steinmann [Moderator] 08/15/2020 15:34:21
I'm not an expert in this matter. Next week the devs can help I'm sure:)

##### alxy 08/15/2020 15:34:54
at least visually it looks like the real robot now 😄



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/744217667082125373/unknown.png)
%end


And maybe another question: Now that I have added the gripper, I have two Robot nodes in my world, however, if I doubble click on the gripper to open the robot menu with the joints to be controlled manually, I only see the joints of the original arm, not the freshly added gripper


Alright, I just clicked at the wrong part, ity perfectly possible to see two robot menus side by side


Is it possible to control the gripper and the arm from the same controller?

##### Marko G 08/15/2020 15:58:15
> Is it possible to control the gripper and the arm from the same controller?

`@alxy` If they're a part of the same Robot node  then you just have to instantiate all the motors and other devices properly (you have to use the correct names of the motors and so on). You can find the names of devices in the world info window left of the simulation with the rest of the robot properties. If you don't see them then you're using the PROTO node and not the Robot node. To convert, just right click on the Robot in the world info window and the click conver to Base node(s)

##### alxy 08/15/2020 16:06:17
they are not part of the same robot node


So genereally it works with separate controllers

##### Simon Steinmann [Moderator] 08/15/2020 16:08:05
it's good practice to add a toolslot to your robot. This allows you to easily atttach other grippers


and easily control them with the same controller

##### alxy 08/15/2020 16:10:01
I have done that (actually you have done it), but still for the gripper I need to specify a separate controller script?

##### Simon Steinmann [Moderator] 08/15/2020 16:15:40
you can address the motors in the same script if you want. You just have to initialize them


I usually have a object for all arm motors, and another for all gripper motors

##### Marko G 08/15/2020 16:17:31
I want to draw a circle which would denote a trajectory to be followed by my robot. So far I've used the Display node, but I only managed to draw the circle on the plane Shape and that also draws the     rectangular plane. I want only the circle to be visible and not the sorounding rectangle (the Shape plane).

  If I change the transparecny of the Display, then both the circle and the plane are transparent which defeats the point

##### Kamil Kaya 08/15/2020 16:20:59
[https://discordapp.com/channels/565154702715518986/565154703139405824/744201248097435678](https://discordapp.com/channels/565154702715518986/565154703139405824/744201248097435678)

##### Simon Steinmann [Moderator] 08/15/2020 16:21:42
you might wanna use external controllers. Can be easier when you use custom packages

##### alxy 08/15/2020 16:23:51
How can I address the motors of the gripper from the arm controller? Was only able to get it working in the two different scripts. Simply calling `supervisor.getMotor(motorName)` only works for the arm motors when I am in the arm controller

##### Simon Steinmann [Moderator] 08/15/2020 16:35:13
if your gripper is a robot node, then it probably wont work


most grippers are solids though. Adding any of the official ones should work

##### alxy 08/15/2020 16:47:51
It is a robot Node indeed ( [https://github.com/cyberbotics/community-projects/tree/master/devices/robotiq/protos](https://github.com/cyberbotics/community-projects/tree/master/devices/robotiq/protos) ). Shouldnt I theoreitcally be able to DEF label the mtoros and then get them from a supervisor controller?

##### Simon Steinmann [Moderator] 08/15/2020 16:56:14
just initialize the gripper-robot seperately

##### alxy 08/15/2020 17:00:50
Yeah i did that and it perfectly works from the separate script, but I really want to open/close the gripper from the same script as the robot arm and that doesnt work for me 😦

##### Kamil Kaya 08/15/2020 17:13:36
Can You guys give me a hint how to use opencv in webots?

##### alxy 08/15/2020 17:16:45
I had no issues using external opackages when using a python controller

##### Simon Steinmann [Moderator] 08/15/2020 17:37:57
when working with multiple virtual environments and especially ROS, it can be a pain. Thankfully, external controllers work flawlessly


The new standard ROS-workflow is now external anyways. much easier 🙂

##### alxy 08/15/2020 17:41:29
`@Simon Steinmann` Is there any example controller I can look at that uses a robot with another robot/gripper in the toolSlot ?


Ok, was able to fix this by converting the gripper to base nodes and then convterting the robot to solid node. Like this, all motors can be controlled from a single controller script



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/744275044854661291/unknown.png)
%end


Now I really srart to get this somehow working, however the box and the gripper do not seem to play nicely together (it appears the gripper does not obey to the bounding box of the wooden box). Is there any configuration option I might be missing to fix this?

##### Simon Steinmann [Moderator] 08/15/2020 19:25:58
if the force is too high, it can go through. The default torques are 100 Nm, which is huge in such a small gripper


you could enable force feedback, and only grip with a certain force


or set the maximum torque of the motors lower

##### alxy 08/15/2020 19:26:44
let me try that

##### Simon Steinmann [Moderator] 08/15/2020 19:27:10
also try to only close them as much as they need to, in order to grab the box

##### alxy 08/15/2020 19:28:39
yeah that would be optimal, however the real robot also only knows "open" and "close" for the valve, no matter the object it grips


Th default toque fr this gripper was 1000

##### Simon Steinmann [Moderator] 08/15/2020 19:31:20
but the real robot has appropiate gripping force

##### alxy 08/15/2020 19:32:00
yeah, reducing all motor to 10Nm works


thanks!

##### Simon Steinmann [Moderator] 08/15/2020 19:32:22
you're welcome 🙂

##### alxy 08/15/2020 19:33:08
Im really curious how close it will be compared to reality

##### Simon Steinmann [Moderator] 08/15/2020 19:37:52
really depends on the hardware, the hardware controller, the software controller and how well the simulated model reflects reality. If you put some work into it, it should be pretty damn accurate

##### alxy 08/15/2020 19:42:25
Looks alright so far, theoretically I have the ROS controller for the mirobot as well, but that looked extremely complex to setup. And as I really just need a way to quickly test python code we write using this library fro the mirobot ( [https://github.com/rirze/mirobot-py](https://github.com/rirze/mirobot-py) ), I decided to exchange the serial itnerface with an ip based interface where the webots controller is the server side and just executes the commands send by that lib. And it works so far 🙂 Just kind of tedious to reimplement all the gcodes that it sends.


Another question: The Mirobot.proto generated by the urdf converter always displays an error `ERROR: 'F:/Code/my_first_simulation/protos/Mirobot.proto':11:20: error: Type mismatch between 'controllerArgs' PROTO parameter and field 'controllerArgs'.`


I think it is because the documentation says it must be MFString controllerArgs  []       # any string, where the proto files contains field SFString   controllerArgs  ""

##### Simon Steinmann [Moderator] 08/15/2020 19:55:33
yeah, change the proto file


I'll have a look at the code tomorrow and check, perhaps that needs changing in the tool


btw, would be awesome if you can upload it to the community projects 🙂


[https://github.com/cyberbotics/urdf2webots/blob/master/urdf2webots/writeProto.py](https://github.com/cyberbotics/urdf2webots/blob/master/urdf2webots/writeProto.py) line 61. looks correct


make sure you install the newest version of the converter. The devs and I made many changes the past week


more features, but also bug fixes


pip install --no-cache-dir --upgrade urdf2webots


to upgrade

##### alxy 08/15/2020 19:59:27
if I change the proto file, and reload the worls, does webots recognize the changes?

##### Simon Steinmann [Moderator] 08/15/2020 19:59:39
yes it does

##### alxy 08/15/2020 20:00:54
mh, because I still get the error


Nope, I updates the wrong file 😄

##### Krithish 08/16/2020 00:35:49
Can anyone help me out with solving this error..


attribute error
%figure
![errorgps.png](https://cdn.discordapp.com/attachments/565154703139405824/744353821047652423/errorgps.png)
%end


ive got three robot nodes , out of which two has gps and i have named the gps devices as well


but this error keeps coming

##### Simon Steinmann [Moderator] 08/16/2020 08:08:03
you havent properly defined gps1


devices and nodes are different. Can you post the line, where you define the Sensor?

##### Lukulus 08/16/2020 08:51:02
Hello, i am trying to realize a cable winch for a crane.

has anyone an idea how to build one?

##### Simon Steinmann [Moderator] 08/16/2020 09:01:40
That will be difficult, Webots is a rigid body simulation. Cables can be build by linking many small solids, but I doubt doing that in a winch will be easy


But you might wanna wait until tomorrow and ask the devs

##### Lukulus 08/16/2020 09:02:47
ok, thank you!

##### Simon Steinmann [Moderator] 08/16/2020 09:04:08
I could imagine, having the length of the cable links be variable. So you could shorten or lengthen the cable.

##### Weiyi 08/16/2020 11:13:07
hello, I wonder how can I make robot darwin-op2 go upstairs and downstairs😀

##### Krithish 08/16/2020 14:54:08
this is the line of code for the gps
%figure
![error.png](https://cdn.discordapp.com/attachments/565154703139405824/744569692399861811/error.png)
%end

##### Kamil Kaya 08/16/2020 16:48:36
Hello, when I add ping pong ball as a child node in the robot node, ping pong ball doesn't fall. How can I fix this?

##### Simon Steinmann [Moderator] 08/16/2020 17:12:20
dont put it in the robot node


and you have to add a physics node to it

##### Kamil Kaya 08/16/2020 17:28:28
> and you have to add a physics node to it

`@Simon Steinmann` I already added physics node. So there is no way that I can make it fall inside the robot node?

##### Simon Steinmann [Moderator] 08/16/2020 17:50:03
why would you have it in the robot node?


not sure it is meant for something like that

##### Kamil Kaya 08/16/2020 21:28:03
Because I want to attach gps to ping pong ball but it has its unique controller for that if I create seperate node for ping pong ball then I cant use the gps data in robot controller. So if I create inside the robot node then I can use gps coordinates in robot controller.

##### koyal 08/16/2020 23:31:17
I want to use Supervisor API with ROS. However none of my rosservice calls on any of the supervisor services is working. A help in this direction would be very helpful.


My aim is to control a robot's position based on the position of another robot. Hence using Supervisor to "Track" the position of Robot 1 to "Set" the position of Robot 2. I am trying to achieve this using ROS.


To check the functionality of the services through the terminal, I am using rosservice call /topic\_name args


However if the value of my arg is 0, I get this error: ERROR: service [/robot\_226208\_koyal/supervisor/field/set\_string] responded with an error: b''


For any other value of the arg I get the error: ERROR: transport error completing service call: unable to receive data from sender, check sender's logs for details


And this happens for all the Supervisor related services

##### tangdan 08/17/2020 02:55:35
Is there anyone can answer our question?


please ,i need help

##### David Mansolino [Cyberbotics] 08/17/2020 06:12:12
> Is there anyone can answer our question?

`@tangdan` here I am 😉


`@koyal`, the first things to check is did you set the `supervisor` field of the robot node to `TRUE` ?


`@Kamil Kaya` if you pu tthe ball in the children field of the robot, then it is physically linked to the robot and therefore doesn't fall. A simpler solution is to let the ball independent from the robot but rather use the Supervisor API to track the position of the ball, here are some examples: [https://cyberbotics.com/doc/guide/supervisor-programming](https://cyberbotics.com/doc/guide/supervisor-programming)


> Hello, i am trying to realize a cable winch for a crane.

> has anyone an idea how to build one?

`@Lukulus` I don't have any better solution than the one proposed by `@Simon Steinmann`, I can just add that an example is available in Webots: [https://cyberbotics.com/doc/guide/samples-howto#rope-wbt](https://cyberbotics.com/doc/guide/samples-howto#rope-wbt)


> I want to draw a circle which would denote a trajectory to be followed by my robot. So far I've used the Display node, but I only managed to draw the circle on the plane Shape and that also draws the     rectangular plane. I want only the circle to be visible and not the sorounding rectangle (the Shape plane).

>   If I change the transparecny of the Display, then both the circle and the plane are transparent which defeats the point

`@Marko G` did you checked this sample [https://cyberbotics.com/doc/guide/samples-devices#display-wbt](https://cyberbotics.com/doc/guide/samples-devices#display-wbt) ?


> Hello. I have to use opencv in my controller but it is compiling but not linking it say something like "undefined reference to...". (Note that linking error is only occuring during calling one of the opencv functions otherwise no error during building,). Also I use opencv version 4.4. My makefile is

`@Kamil Kaya` is it you that posted this question here [https://stackoverflow.com/questions/63428401/how-to-solve-linker-error-when-using-opencv-in-webots](https://stackoverflow.com/questions/63428401/how-to-solve-linker-error-when-using-opencv-in-webots) ?


> Hello I'm working on path planning problems using Webots, but I have thought to create more complex environment adding objects to scene procedurally; my question is, is it posible to generate procedural environments in Webots ?

`@areiban` as `@Simon Steinmann` said, you can use a Supervisor controller to add/remove/change/move things in the environment at the first step: [https://www.cyberbotics.com/doc/reference/supervisor](https://www.cyberbotics.com/doc/reference/supervisor)

You can also write a procedural PROTO node to generate the environment: [https://cyberbotics.com/doc/reference/procedural-proto-nodes](https://cyberbotics.com/doc/reference/procedural-proto-nodes)

##### yash 08/17/2020 07:18:56
Hello ! Is it possible to model underactuated grasping mechanisms using cable-pulley system .!?

##### tangdan 08/17/2020 07:24:03
I am learning  "Interfacing Webots to Third Party Software with TCP/IP",but I don't know how to use the client.c, and I don't konw what is the function of the document. do you have any suggestion? 3Q

##### Stefania Pedrazzi [Cyberbotics] 08/17/2020 07:48:55
`@tangdan` 

> I am learning  "Interfacing Webots to Third Party Software with TCP/IP",but I don't know how to use the client.c

`@tangdan` to use the client simply open a terminal, navigate to the `WEBOTS_HOME/projects/robots/k-team/khepera1/controllers/tcpip/` directory and type `./client`.

Then if Webots is already started and the `khepera1_tcpip` simulation is running, you should get the `Enter command:` message in the terminal where you can write the commands to send to the khepera1 robot. Command instructions can be find the `tcpip.c` file

##### Kamil Kaya 08/17/2020 07:49:10
> `@Kamil Kaya` is it you that posted this question here [https://stackoverflow.com/questions/63428401/how-to-solve-linker-error-when-using-opencv-in-webots](https://stackoverflow.com/questions/63428401/how-to-solve-linker-error-when-using-opencv-in-webots) ?

`@David Mansolino` yes

##### tangdan 08/17/2020 07:51:07
`@Stefania Pedrazzi` thanks,I'll try

##### David Mansolino [Cyberbotics] 08/17/2020 07:58:24
> Hello ! Is it possible to model underactuated grasping mechanisms using cable-pulley system .!?

`@yash` unfortunately this is not yet possible, but we are working on the principle of linked-joints which will allows you to actuate only one motor to move all the different joint of the finger for example: [https://github.com/cyberbotics/webots/pull/2054](https://github.com/cyberbotics/webots/pull/2054)


> `@David Mansolino` yes

`@Kamil Kaya` in that case please see the comments below your question

##### FrostPhoenix 08/17/2020 08:54:32
Hi Guys, is it possible to use external custom C libraries, and if so how do I add a new .h file

##### David Mansolino [Cyberbotics] 08/17/2020 08:55:25
Yes sure, you simply need to modify the Makefile: [https://cyberbotics.com/doc/guide/using-webots-makefiles?tab-language=ros#adding-an-external-library-ccp](https://cyberbotics.com/doc/guide/using-webots-makefiles?tab-language=ros#adding-an-external-library-ccp)

##### FrostPhoenix 08/17/2020 08:56:00
Awesome thanks for the quick response 🙂

##### David Mansolino [Cyberbotics] 08/17/2020 08:56:18
You're welcome

##### yash 08/17/2020 09:00:33
> `@yash` unfortunately this is not yet possible, but we are working on the principle of linked-joints which will allows you to actuate only one motor to move all the different joint of the finger for example: [https://github.com/cyberbotics/webots/pull/2054](https://github.com/cyberbotics/webots/pull/2054)

`@David Mansolino`  alright , thank you !

##### David Mansolino [Cyberbotics] 08/17/2020 09:00:51
You're welcome

##### Lukulus 08/17/2020 10:46:01
Hello, i am trying to realize a cable winch for a crane.

has anyone an idea how to build one?

##### David Mansolino [Cyberbotics] 08/17/2020 10:46:22
[https://cyberbotics.com/doc/guide/samples-howto#rope-wbt](https://cyberbotics.com/doc/guide/samples-howto#rope-wbt)

##### Lukulus 08/17/2020 10:47:04
thank you for quick answer

##### David Mansolino [Cyberbotics] 08/17/2020 10:47:17
You're welcome

##### Simon Steinmann [Moderator] 08/17/2020 11:09:23
is it possible to generate a proto from base nodes?

##### David Mansolino [Cyberbotics] 08/17/2020 11:11:08
Unfortunately, this should be done manually.

##### Simon Steinmann [Moderator] 08/17/2020 11:11:39
thinking about a 'rope-creation-wizard'


would be a usefull feature

##### owongcho 08/17/2020 14:37:01
Hello! I attached a gripper (robot node) to the hand slot of the Irb 4600 robot arm and I am trying to control the gripper using the robot arm's controller. The following command are used to get the motor and position sensor: gripper\_motor1 = supervisor.getMotor('finger1') and 

ps1 = supervisor.getPositionSensor('finger1sensor'), respectively. However, I am getting the following warning: Warning: "finger1" device not found.

Warning: "finger1sensor" device not found. could someone please help to achieve this?

##### David Mansolino [Cyberbotics] 08/17/2020 14:37:54
If the gripper is a robot node it has its own controller and therefore its devices are not available to the parent controller

##### owongcho 08/17/2020 14:47:01
I am converted the gripper to a solid node and I am getting the same warnings. Am I missing some intermediate commands before getting the motor [gripper\_motor1 = supervisor.getMotor('finger1')]?


Now is working. I changed the slot node type to solid to match the node type of my gripper.

##### koyal 08/17/2020 17:46:07
`@David Mansolino` Yes, my Supervisor field is set to TRUE; I guess that's how the services related to Supervisor are listed in rosservice list

##### David Mansolino [Cyberbotics] 08/18/2020 06:04:46
`@koyal` which argument are you using ?

##### koyal 08/18/2020 06:35:43
`@David Mansolino` I am giving the arguments to the rosservice call as required by the service.


I have also opened an issue about this as suggested by Olivier. Here's the link to the same: [https://github.com/cyberbotics/webots/issues/2131](https://github.com/cyberbotics/webots/issues/2131)

##### David Mansolino [Cyberbotics] 08/18/2020 06:37:18
Ok thank you, we will have a look at the issue and try to reproduce it as soon as we have the time.

##### koyal 08/18/2020 06:39:59
Yes, thank you very much. I hope reproducing it does not take a lot of your time. I can provide any other required details. Actually you can even check it with roscore and a world file with the robot connected to ROS, instead of making an actual repo, whichever works for your team.


Do you think it's a bug that'll be needed to get fixed from your end, or am I missing out on something. I hope it's the latter.

##### David Mansolino [Cyberbotics] 08/18/2020 06:43:06
It is more likely to be on our end.

##### koyal 08/18/2020 06:45:24
Oh. By any chance do you have a rough estimate on how long it might take to figure out the fix. Thank you again for your help.

##### David Mansolino [Cyberbotics] 08/18/2020 07:03:55
No, I am sorry but I am already currently fixing issues with the ros controller, there is a possibility that this is related.

##### koyal 08/18/2020 13:57:28
Oh, okay. Hope it works out soon. 🙂

##### tangdan 08/19/2020 01:36:57
In the part "Interfacing Webots to Third Party Software with TCP/IP", I enter commond like this, but it didn't work right.  as the  picture shows,  it should printf "set led 0 to 1".



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/745457296427188324/unknown.png)
%end


is there something wrong when I enter the commad?


In the part "Interfacing Webots to Third Party Software with TCP/IP", I enter commond like this, but it didn't work right.  as the  picture shows,  it should printf "set led 0 to 1".



is there something wrong when I enter the commad?



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/745516982014836737/unknown.png)
%end

##### David Mansolino [Cyberbotics] 08/19/2020 06:14:37
Hi `@tangdan` I am currently looking at this


The command you sent is wrong, instead it should be:

```
L,0,1
```

##### tangdan 08/19/2020 06:18:13
thank you very much,it works

##### David Mansolino [Cyberbotics] 08/19/2020 06:22:50
You're welcome

##### Luiz Felipe 08/19/2020 06:36:40
Hello `@David Mansolino` , I am testing webots inside a docker image running on the cloud. When I start webots using "webots --stream="mode=x3d" -- batch" it works fine. But when i use "webots --stream="mode=mjpeg" -- batch" I receive "ERROR: Streaming server: Unsupported message: x3dom". I am testing that because I think my VRML97 file has fields that are not recorded in the animation file.

##### Stefania Pedrazzi [Cyberbotics] 08/19/2020 06:38:27
`@Luiz Felipe`   did you change the mode in webots.js to "mjpeg"?


This is a parameter that needs to be passed to the `webots.View.open` function

##### Luiz Felipe 08/19/2020 06:40:14
Got it


In my index.html I am importing from [https://www.cyberbotics.com/wwi/R2019a/webots.js](https://www.cyberbotics.com/wwi/R2019a/webots.js)


So I should download and edit this file and change the mode from 'x3dom' to 'mjpeg' right?

##### Stefania Pedrazzi [Cyberbotics] 08/19/2020 06:41:43
The `mjpeg` streaming mode is available only from R2020b.


It is not needed to edit it, you can change the mode directly from your `index.html` as it is done here: [https://github.com/cyberbotics/webots/blob/master/resources/web/streaming\_viewer/setup\_viewer.js#L39](https://github.com/cyberbotics/webots/blob/master/resources/web/streaming_viewer/setup_viewer.js#L39)


At line 39

##### Luiz Felipe 08/19/2020 06:44:21
Got it. I am using the R2020b in my docker image but I think I am using an old version of the setup\_viewer.js that I copied long time ago

##### Stefania Pedrazzi [Cyberbotics] 08/19/2020 06:46:10
Ok, the latest streaming viewer has a combo box to easily change from `x3d` to `mjpeg` mode

##### Luiz Felipe 08/19/2020 06:50:07
Wow. It works perfectly. This feature is amazing.


Before I think I changed something on the javascript and I could control the simulation from the browser. But now the buttons are disabled...

##### Stefania Pedrazzi [Cyberbotics] 08/19/2020 07:00:01
Yes, beacause the streaming\_viewer is an example for broadcasting. You simply have to set the `view.broadcast` value to false in the `setup_viewer.js`


[https://github.com/cyberbotics/webots/blob/master/resources/web/streaming\_viewer/setup\_viewer.js#L36](https://github.com/cyberbotics/webots/blob/master/resources/web/streaming_viewer/setup_viewer.js#L36)

##### Luiz Felipe 08/19/2020 07:32:06
`@Stefania Pedrazzi` I think would be nice to add the line view.timeout below the view.broadcast line in setup\_viewer.js for the next version. Because the view.timeout pauses the simulation automatically after some time and people don't know why it stops

##### Stefania Pedrazzi [Cyberbotics] 08/19/2020 07:39:50
Ok, thank you for the suggestion. I will check.

Just note that the `streaming_viewer` is meant as a very simple example for bradcasting and if used as-is doesn't have any timeout set, so users doesn't have to care about it.

Then, for more advanced use there is the documentation here: [https://www.cyberbotics.com/doc/guide/web-simulation#how-to-embed-a-web-scene-in-your-website](https://www.cyberbotics.com/doc/guide/web-simulation#how-to-embed-a-web-scene-in-your-website).

##### Dave 08/19/2020 08:29:00
Hello everyone,

I am new to webots sorry for disturbing about my issue but I would need help please.



Unfortunately I get a warning and crash when I start to run the controller (see image below) under python3 (3.7)



Is it possible to have a small tip to fix it please ?

I am running under MACOS Catalina 10.15.16
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/745559936326434866/unknown.png)
%end


here is my code : 

```
from controller import Robot

print('Hello World')
```


and my python settings



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/745560504109498418/unknown.png)
%end


My idea is that it cannot import the Robot properly

##### Stefania Pedrazzi [Cyberbotics] 08/19/2020 08:44:23
Hi `@Dave`, which version of Webots are you using?


How did you install python?

##### Dave 08/19/2020 08:45:31
Hi `@Stefania Pedrazzi` thank you for your message !


I am using R2020b


I am not sure how I installed pyhon3, it was a long time ago, but I can maybe reinstall it ?

##### Stefania Pedrazzi [Cyberbotics] 08/19/2020 08:46:42
another option is to try the nightly build of R2020b revision 1 [https://github.com/cyberbotics/webots/releases/download/nightly\_17\_8\_2020/webots-R2020b-rev1.dmg](https://github.com/cyberbotics/webots/releases/download/nightly_17_8_2020/webots-R2020b-rev1.dmg)

It should now support python installed from brew

##### Dave 08/19/2020 08:46:58
okay thank you so much, I keep you in touch

##### Stefania Pedrazzi [Cyberbotics] 08/19/2020 08:50:10
you're welcome

if with the nightly build the issue is still not fixed, then it could be better to try to reinstall python:

[https://www.cyberbotics.com/doc/guide/using-python?version=master#macos-installation](https://www.cyberbotics.com/doc/guide/using-python?version=master#macos-installation) (for webots R2020b rev1)

[https://www.cyberbotics.com/doc/guide/using-python#macos-installation](https://www.cyberbotics.com/doc/guide/using-python#macos-installation) (for R2020b)

##### Dave 08/19/2020 08:51:47
thank you 😁

##### David Mansolino [Cyberbotics] 08/19/2020 08:57:41
Hi `@Dave`, just as a side not, I had issues on macOS too with python version, the simplest solution to make sure to use the correct version of Python is to set in the preferences the absolute path to the python executable (as mentionned in the note here: [https://www.cyberbotics.com/doc/guide/using-python#macos-installation](https://www.cyberbotics.com/doc/guide/using-python#macos-installation))

##### Dave 08/19/2020 09:01:45
HI `@David Mansolino`  I did indeed tried this. I inserted in the Python command input  : `/usr/local/bin/python3`



But I will try again with the new version that Stefania sent me if it's not working.

Thank you !


Amazing it works !

So I did indeed added the path /usr/local/bin/python3 on the new version R2020b rev1


thank you so much for your help !

Should I create a thread or something such that other users can see what was the solution ?

##### saditya 08/19/2020 09:31:57
Hey! In my world map? Can I have two instance of same robot running in a world map with same controller?

##### David Mansolino [Cyberbotics] 08/19/2020 09:32:38
> thank you so much for your help !

> Should I create a thread or something such that other users can see what was the solution ?

`@Dave` they should be able to see it in the archive of the discussion


> Hey! In my world map? Can I have two instance of same robot running in a world map with same controller?

`@saditya` Yes sure. Here is an example: [https://github.com/cyberbotics/webots/blob/master/projects/languages/cpp/worlds/example.wbt](https://github.com/cyberbotics/webots/blob/master/projects/languages/cpp/worlds/example.wbt)

##### Dave 08/19/2020 09:34:29
`@David Mansolino` ok thanks ! Have a nice day

##### David Mansolino [Cyberbotics] 08/19/2020 09:34:39
Thank you, you too!

##### Vidicon 08/19/2020 14:08:29
Hey, Does Webots have an option to use gpu (ray tracing) for the Lidar? We have a simulation with a 3d lidar, but it runs very slow with it enabled but fast without the lidar enabled. We do have a Nvidia RTX2060 GPU in that laptop.

##### Simon Steinmann [Moderator] 08/19/2020 14:09:16
double check, whether you are using the dedicated gpu and not the integrated one

##### Vidicon 08/19/2020 14:12:22
The default GPU on that laptop is Nvidia where can we check what GPU Webots uses?

##### David Mansolino [Cyberbotics] 08/19/2020 14:44:33
You can use the '--sysinfo' argument when launching Webots.

##### Kamil Kaya 08/19/2020 16:48:03
Hey, How can I capture the vision of camera with opencv in webots? I want to apply hough circle transform the picture in the camera.

##### Simon Steinmann [Moderator] 08/19/2020 16:57:34
[https://www.cyberbotics.com/doc/reference/camera?tab-language=python](https://www.cyberbotics.com/doc/reference/camera?tab-language=python)


this should help 🙂

##### culurciello 08/19/2020 19:35:01
Hi, I need to mark a point in space in the GUI to debug. How can I do that?

Thanks a lot@

E

##### Toledo 08/19/2020 20:54:30
Hi,  Can i transfer the results of the simulations for my real robot?

##### David Mansolino [Cyberbotics] 08/20/2020 05:30:37
`@Toledo` it depends, which real robot? Which programming language are you using?


> Hi, I need to mark a point in space in the GUI to debug. How can I do that?

> Thanks a lot@

> E

`@culurciello` the simplest solution is to create a shape (e.g. a small sphere) at the location you want to mark.

##### Luiz Felipe 08/20/2020 07:04:01
Hi, I am running my simulation in a headless server (supercomputer) using docker and checking the simulation via webots stream. In relation to the simulation speed, is it possible to check it via console? How much speed up can I expect running my simulation in a computer with a more powerful GPU and processor? (I think the simulation speed is going to be also bounded by the physics engine right?)

##### David Mansolino [Cyberbotics] 08/20/2020 07:07:21
Unfortunately, it is not possible out of th ebox to get the simulation speed, but you can estimate it from your controller using the wb\_robot\_get\_time function and comparing it with elapsed real time. You are right, a better GPU will help if you are simulating cameras, range-finder or lidars, but for the physics the bottlneck is the CPU.

##### Luiz Felipe 08/20/2020 07:17:37
Ok. So actually using the supercomputer does not help much. It would be better to simplify the world design and try to use the powerful gpu to parallelize multiple instances of the simulator and gather data from these multiple instances......

##### David Mansolino [Cyberbotics] 08/20/2020 07:22:59
Yes, that is indeed often more performant to parallelize multiple instances of Webots.

##### alxy 08/20/2020 08:38:46
Is there a very simply gripper available for Webots with only two joints/motors? Im looking for a gripper for my Mirobot, as the original gripper is not mode available by them. This is how the original gripper looks:
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/745924782637187072/unknown.png)
%end

##### David Mansolino [Cyberbotics] 08/20/2020 08:39:56
Yes, this one for example: [https://cyberbotics.com/doc/guide/p-rob3#gripper](https://cyberbotics.com/doc/guide/p-rob3#gripper)

##### alxy 08/20/2020 08:45:23
Thanks, interesting motor names 😄

##### David Mansolino [Cyberbotics] 08/20/2020 08:46:09
You're welcome

##### alxy 08/20/2020 08:48:17
Regarding scaling of such a gripper (as the arm in question much smaller than standard arms), is it best practics to just wrap the tool in a transfrom node with scale properties set to adjust the sizes?

##### David Mansolino [Cyberbotics] 08/20/2020 08:48:47
you can try, but stability is not guaranteed in this case

##### alxy 08/20/2020 08:49:26
Ok, I hope the creators will eventually provide the urdf/STL files for the gripper as well


Is it possible to mount a camera device outside of a robot? or do I need a seaprat robot node if I need a kind of external camera?

##### David Mansolino [Cyberbotics] 08/20/2020 09:28:00
No, a camera node has to have a Robot node as ancestor

##### alxy 08/20/2020 11:55:54
On which scale are the x,y,z-coordinates when using an inverse kinematics controller? They dont appear to match the webots wolrd coordinates scale...

##### David Mansolino [Cyberbotics] 08/20/2020 12:05:50
They should match the Webots scale, what let you think it is not the case?

##### Toledo 08/20/2020 12:07:31
> `@Toledo` it depends, which real robot? Which programming language are you using?

`@David Mansolino` A robot with Arduino, C/C++

##### alxy 08/20/2020 12:09:18
actually I guess its more a problem with my robot model, they dont match with the real robots coordinate system, need to look into this fruther


Is the default coordinate system in webots in meters?


ok, my bad, its actually indicated everywhere 😄

##### culurciello 08/20/2020 12:21:48
Thansk a lot guys, am trying to mark a point in space for a Ur-5 robot to reach to. We use python code. I used a small cube before, but was hoping for a more elegant solution to mark a point. If any. No prob otherwise. Thansk a lot for your kind help!

##### creative 08/20/2020 12:52:13
`@David Mansolino` hi! I use ros control 10 epucks in webots, how do I set time\_step?thanks!

##### alxy 08/20/2020 13:05:01
`@culurciello` Not sure if that is exactly what you are looking fro, but there is an example where a robotic arm follows a target balll like object. You can drag and drop the target in the arm follows: [https://github.com/cyberbotics/webots/tree/master/projects/robots/abb/irb](https://github.com/cyberbotics/webots/tree/master/projects/robots/abb/irb)

##### Simon Steinmann [Moderator] 08/20/2020 13:35:12
`@alxy` I just created a universal IK controller. It is not yet merged, but you can check it out here: [https://github.com/cyberbotics/community-projects/tree/Simon-Steinmann-IK](https://github.com/cyberbotics/community-projects/tree/Simon-Steinmann-IK)

##### alxy 08/20/2020 13:35:25
Yeah, Ive seen it already

##### Simon Steinmann [Moderator] 08/20/2020 13:35:48
you should be able to just load the controller, make your robotic arm a supervisor and you're done


let me know if it throws any errors

##### alxy 08/20/2020 13:39:51
I have written a lot of custom code, but I have just found a bit about the orientation in your code which looks very promising to me


as orientation really does not work at all


It kinda looks like the situation when all the joints where messed up 😄

##### Simon Steinmann [Moderator] 08/20/2020 13:40:18
I split the code into modules, which should be very easy to implement


orientation is tricky with ikpy, that took me a while

##### alxy 08/20/2020 13:42:53
From the wiki page it looks easy ( [https://github.com/Phylliade/ikpy/wiki/Orientation#orientation-on-a-single-axis](https://github.com/Phylliade/ikpy/wiki/Orientation#orientation-on-a-single-axis) ), but didnt work as expected. For my robot, I thought Id just need to align the global z axis with the last joint z axis to get a straight position for grabbing objects, but of course it didnt work 😄


I'll try to understand your code now

##### Simon Steinmann [Moderator] 08/20/2020 13:45:04
the ik\_module.py is where the magic happens

##### alxy 08/20/2020 13:46:25
Havent tested it yet, but there might be an issue if there are motors in your robot that dont belong to the arm chain, like a gripper?

##### Simon Steinmann [Moderator] 08/20/2020 13:46:46
yeah, robots with grippers have an issue

##### alxy 08/20/2020 13:46:48
ah no you check for the name first

##### Simon Steinmann [Moderator] 08/20/2020 13:47:17
if the gripper is integrated in the robot arm, it can cause issues. but should work with the miro bot


at line 70 of ik\_module.py you could insert 

print(self.armChain) 

to see more of what is going on

##### alxy 08/20/2020 13:53:33
Can you describe why that processing for the orientation is required?

##### Simon Steinmann [Moderator] 08/20/2020 13:53:59
it automatically figures out which axis to use


you could manually set it to either "X" "Y" or "Z"


and the really important part is line:105


here we take either the first, second or 3rd column of our target rotation matrix


this is what we parse to ikpy as our orientation

##### alxy 08/20/2020 13:59:11
and to your get\_ik() method I now need to pass a 3x3 rotation matrix right? And that rotations matrix specifies the orientation of the tool axis (last joint in chain) wrt to the base coodinate system of the robot?

##### Simon Steinmann [Moderator] 08/20/2020 14:00:00
that is the target orientation we want the endeffector to be in


ah yes, exactly


the get\_relative\_position.py module shows you how to get relative positions. You can parse it any DEF, and it give position and rotation relative to your supervisor robot's base

##### alxy 08/20/2020 14:01:58
Not yet interested in relative positions 😄 I dont have them in the real world...

##### Simon Steinmann [Moderator] 08/20/2020 14:02:22
well you need relative positions for ikpy

##### alxy 08/20/2020 14:02:52
relative to the robot arm base?

##### Simon Steinmann [Moderator] 08/20/2020 14:02:55
but you can look at the code and easily change it, so you can parse a position and orientation, and it converts it to the robots frame

##### David Mansolino [Cyberbotics] 08/20/2020 14:02:59
> `@David Mansolino` hi! I use ros control 10 epucks in webots, how do I set time\_step?thanks!

`@creative` You simply need to call the ../robot/time\_step service from each robot

##### Simon Steinmann [Moderator] 08/20/2020 14:07:54
All this IK stuff requires some linear algebra, hope you paid attention at university 😅

##### alxy 08/20/2020 14:10:58
I had a very basic course about robotics, but cannot really remember a lot of it


So your code error out for me as it includes the gripper motors in the chain indeed

##### Simon Steinmann [Moderator] 08/20/2020 14:12:55
You could manually remove the armchain links of the gripper

##### alxy 08/20/2020 14:14:17
And my bounds are None, so that is another issue. try to solve them now

##### Simon Steinmann [Moderator] 08/20/2020 14:14:24
Next two days I have other work with higher priority, but eventually I want the controller to autodetect that issue and prompt the user for manual input


No bounds can be fine


But the code might be throwing an error. Good point

##### alxy 08/20/2020 14:15:35
Well the python errors as None + float

##### Simon Steinmann [Moderator] 08/20/2020 14:15:56
Can you leave a comment about that on the pull request?

##### alxy 08/20/2020 14:16:17
sure

##### Simon Steinmann [Moderator] 08/20/2020 14:16:23
Thx


But that while bound portion you can skip, it's just a workaround when there are bounds

##### alxy 08/20/2020 14:19:56
I wonder *why* there are no bounds


as the PROTO contains bounbds

##### Simon Steinmann [Moderator] 08/20/2020 14:20:21
the base node never has bounds


which mirobot are you using? the one from the community repo?

##### alxy 08/20/2020 14:20:57
Yeah, Ive done minor modifications


[https://github.com/cyberbotics/community-projects/pull/13](https://github.com/cyberbotics/community-projects/pull/13)


It includes bounds


However, my chain is based on the sensors, not the motors for some reason: ``Kinematic chain name=chain links=[Link name=Base link bounds=(None, None), Link name=joint1\_sensor bounds=(None, None), Link name=joint2\_sensor bounds=(None, None), Link name=joint3\_sensor bounds=(None, None), Link name=joint4\_sensor bounds=(None, None), Link name=joint5\_sensor bounds=(None, None), Link name=joint6\_sensor bounds=(None, None)] active\_links=[ True  True  True  True  True  True  True  True  True]``

##### Simon Steinmann [Moderator] 08/20/2020 14:22:13
this is strange indeed


what version of webots are you running?

##### alxy 08/20/2020 14:22:32
R2020b

##### Simon Steinmann [Moderator] 08/20/2020 14:22:44
recent nighitly=

##### alxy 08/20/2020 14:22:46
installed using the installer, not built

##### Simon Steinmann [Moderator] 08/20/2020 14:22:47
?

##### alxy 08/20/2020 14:22:57
probably not

##### Simon Steinmann [Moderator] 08/20/2020 14:23:02
on linux?

##### alxy 08/20/2020 14:23:24
No, on windows

##### Simon Steinmann [Moderator] 08/20/2020 14:23:32
ah okay, no idea then ^:p

##### alxy 08/20/2020 14:23:36
Where can I get the exact version?

##### Simon Steinmann [Moderator] 08/20/2020 14:23:48
not sure that works under windows


[https://github.com/cyberbotics/webots/releases/](https://github.com/cyberbotics/webots/releases/)


but that might not fix it. I can have a look later, but I'm on windows right now, my developing setup is on linux

##### alxy 08/20/2020 14:26:14
But I think it was already a good finding that the chain includes these additional motors


I can imagine that the orientation is completely fucked up then


as the last joint is some random joint of the gripper

##### Simon Steinmann [Moderator] 08/20/2020 14:27:45
my plan for addressing it, is to have the user define the number of DOF, and manually add a last link translation (+ orientation)


the chain then only takes the base node + n-DOF links, discarrds the rest and adds the last inactive link

##### alxy 08/20/2020 14:28:41
yeah, that might be a good solution

##### Simon Steinmann [Moderator] 08/20/2020 14:30:22
[https://ikpy.readthedocs.io/en/latest/urdf/URDF.html](https://ikpy.readthedocs.io/en/latest/urdf/URDF.html)


you can use the parameter function here


weirdly, it is THIS function that returns a link list. the first method does not work. That took me quite a while to figure out


then you can create the armChain directly with the links (after perhaps editing that linklist)

##### alxy 08/20/2020 14:43:14
Creating the chain and simply removing the last links does not work for some reason, so I need to create a new chain from the links?

##### Simon Steinmann [Moderator] 08/20/2020 14:44:07
check the link above I sent you

##### alxy 08/20/2020 14:44:20
Ah, base\_elements

##### Simon Steinmann [Moderator] 08/20/2020 14:44:30
the parameter function should return a link list, which you can use for the normal chain method

##### alxy 08/20/2020 14:47:10
ah, okay, now I understand. And then I just pass the cleaned list of links to the construvtor of Chain?

##### Simon Steinmann [Moderator] 08/20/2020 14:54:43
yeah, that would be my approach


let me know if it works. and please share your code, so I can take them as a starting point for the updated controller 🙂

##### alxy 08/20/2020 14:56:41
\# armChain = Chain.from\_urdf\_file(filename)

        all\_links = get\_urdf\_parameters(filename)

        armChain = Chain(all\_links[:7])


That doesnt work

##### Simon Steinmann [Moderator] 08/20/2020 14:57:14
ikpy.chain.Chain(links=...)


use that one


and use your edited linklilst, you got from the urdf-parameter function

##### alxy 08/20/2020 14:58:06
No its an issue on ikpy end, but I can fix it: [https://ikpy.readthedocs.io/en/latest/\_modules/ikpy/urdf/URDF.html#get\_urdf\_parameters](https://ikpy.readthedocs.io/en/latest/_modules/ikpy/urdf/URDF.html#get_urdf_parameters)


base\_elements = list(base\_elements)

TypeError: 'NoneType' object is not iterable


That is not how they intended it to work, but I will just pass ['base\_link now]

##### Simon Steinmann [Moderator] 08/20/2020 14:59:11
you have to pass the name as string


I think that should be 'Base'


if you look at the chain you posted earlier

##### alxy 08/20/2020 15:01:34
you are right


Mh, now my chain is empty once I set the correct base element. Very itneresting

##### Simon Steinmann [Moderator] 08/20/2020 15:04:34
that should return a link list, not a chain

##### alxy 08/20/2020 15:05:05
yeah, I have directly passed it to the Chain again, but the list is indeed also empty


all\_links = get\_urdf\_parameters(filename, base\_elements=["Base"]) returns []

##### Simon Steinmann [Moderator] 08/20/2020 15:07:03
hmm

##### alxy 08/20/2020 15:07:47
ah the name is "Base link" I think

##### Simon Steinmann [Moderator] 08/20/2020 15:08:25
you can save the urdf file and have a look, or just print(filename)

##### alxy 08/20/2020 15:08:32
but I was also able to slice the links from the full chain and create a new chain from the sliced list


That works as well

##### Simon Steinmann [Moderator] 08/20/2020 15:09:29
so you took armchain.links and sliced it, and created a new armChain from that?

##### alxy 08/20/2020 15:09:36
correct

##### Simon Steinmann [Moderator] 08/20/2020 15:09:47
that is probably easier 🙂


good approach!

##### alxy 08/20/2020 15:10:09
I just need to check if the inverse kinematic now works 😄

##### Simon Steinmann [Moderator] 08/20/2020 15:10:13
ikpy documentation is very lacking, and the whole links vs joints gets very confusing


can you post your armChain print?

##### alxy 08/20/2020 15:10:49
``Kinematic chain name=chain links=[Link name=Base link bounds=(None, None), Link name=joint1\_sensor bounds=(None, None), Link name=joint2\_sensor bounds=(None, None), Link name=joint3\_sensor bounds=(None, None), Link name=joint4\_sensor bounds=(None, None), Link name=joint5\_sensor bounds=(None, None), Link name=joint6\_sensor bounds=(None, None)] active\_links=[ True  True  True  True  True  True  True]``

##### Simon Steinmann [Moderator] 08/20/2020 15:11:28
you might want to add a manual last link, as the IK will now solve for the last joint


but that should work now

##### alxy 08/20/2020 15:13:06
yeah!!!! nice thanks!


orientations works, it is goind weird trajectories, but I can maybe fix this when I add the proper bounds

##### Simon Steinmann [Moderator] 08/20/2020 15:13:50
no, that is due to the last link missing

##### alxy 08/20/2020 15:14:29
Ok, will look into that tomorrow

##### Simon Steinmann [Moderator] 08/20/2020 15:14:33
in line 97 of ik\_module, add


print(self.toolSlot\_axis)


to see which axis it takes.


or convert the robot to base nodes, and add a transform to the endpoint Solid of the joint 6. Translate it so that it is exactly where you want the endeffector to be


if you only translate along one axis, this is the only thing you will have to add to the last link. The ik\_module should do the rest

##### alxy 08/20/2020 15:16:47
I have not used your module in the end I have to say :p

##### Simon Steinmann [Moderator] 08/20/2020 15:17:16
but you have used the functional bits

##### alxy 08/20/2020 15:18:09
I'll upload the code to github

##### Simon Steinmann [Moderator] 08/20/2020 15:18:11
if you have suggestions on how to make it easier to use and implement, please upload things, or send them to me


the reason I split it into modules, is for people to be able to easily implement them


but it's not fully there yet, and outside feedback and suggestions are always welcome

##### alxy 08/20/2020 15:22:35
I will go on tomorrow to check how I can integrate it, for now I have just tried to somehow get it working via copy&paste

##### Simon Steinmann [Moderator] 08/20/2020 15:22:59
understandable :p

##### alxy 08/20/2020 15:27:41
[https://github.com/alxy/webots-mirobot/blob/master/controllers/mirobot\_default\_controller/ip\_controller.py#L69-L71](https://github.com/alxy/webots-mirobot/blob/master/controllers/mirobot_default_controller/ip_controller.py#L69-L71)

##### Simon Steinmann [Moderator] 08/20/2020 15:28:33
thx, I'll have a look later


`@alxy` can you merge the changes in your pull request?

##### alxy 08/20/2020 16:28:50
the maintainers must merge the PRs?

##### Simon Steinmann [Moderator] 08/20/2020 16:29:01
nope, they approve it, then you merge it


ohhhhh


wait


so with the version I uploaded before, the ik controller worked, with your version it does not out of the box

##### alxy 08/20/2020 16:30:00
I didnt change much that could affect the controller I would assume

##### Simon Steinmann [Moderator] 08/20/2020 16:30:04
let me investigate before you merge

##### Toledo 08/20/2020 16:31:00
> `@David Mansolino` A robot with Arduino, C/C++

`@Toledo` .

##### alxy 08/20/2020 16:33:27
So I can just merge my own PRs after they have been approved?


[https://github.com/cyberbotics/webots/pull/2137](https://github.com/cyberbotics/webots/pull/2137) like that one?

##### Simon Steinmann [Moderator] 08/20/2020 16:37:11
yes, but wait before you do, I will push. I'm converting it again, with the hugely upgraded tool now. The mesh files will be extra, making the proto editing 100x faster


oh yeah, that one you can merge 😄


i meant the mirobot one


but good to see you creating PRs 🙂

##### culurciello 08/20/2020 18:06:31
> `@culurciello` Not sure if that is exactly what you are looking fro, but there is an example where a robotic arm follows a target balll like object. You can drag and drop the target in the arm follows: [https://github.com/cyberbotics/webots/tree/master/projects/robots/abb/irb](https://github.com/cyberbotics/webots/tree/master/projects/robots/abb/irb)

`@alxy` thanks a lot, yes that is one good way to do it

##### Miller 08/21/2020 02:32:49
`@Simon Steinmann` `@David Mansolino` Hello both, I'm trying to control epuck robots via ROS and found the issue that I could not control multiple robots at the same time using a single controller. The way I'm doing it at this moment is that: For loop over each of the epucks and send wheel speed to webot published services and call .../robot/time\_step each time in order to update the motor status. Am I doing it the wrong way or is there anything I was missing? Is there any example or tutorials that I could follow? Thanks!


`@Simon Steinmann` Also when I tried to compile makefile under /usr/local/webots/projects/default/controllers/ros it says 'Makefile:32: /resources/Makefile.os.include: No such file or directory, Makefile:102: /resources/Makefile.include: No such file or directory. make: *** No rule to make target '/usr/local/webots/resources/resources/Makefile.include'.  Stop.' This problem persists when I use absolute path '/usr/local/webots/resources/resources/Makefile.include'. Thanks!

##### David Mansolino [Cyberbotics] 08/21/2020 05:55:04
> `@Simon Steinmann` Also when I tried to compile makefile under /usr/local/webots/projects/default/controllers/ros it says 'Makefile:32: /resources/Makefile.os.include: No such file or directory, Makefile:102: /resources/Makefile.include: No such file or directory. make: *** No rule to make target '/usr/local/webots/resources/resources/Makefile.include'.  Stop.' This problem persists when I use absolute path '/usr/local/webots/resources/resources/Makefile.include'. Thanks!

`@Miller` you have to export the 'WEBOTS\_HOME' environment variable.


Here is an example (but with only one e-puck): [https://github.com/cyberbotics/webots/blob/master/projects/languages/ros/webots\_ros/src/e\_puck\_line.cpp](https://github.com/cyberbotics/webots/blob/master/projects/languages/ros/webots_ros/src/e_puck_line.cpp)


> `@Toledo` .

`@Toledo` unfortunately Webots does not support transfer to arduino out of the box, however, since arduino also uses C as Webots, it should be quite straightforward to 'convert' it.

##### creative 08/21/2020 06:06:59
thanks, we study the  e\_puck\_line.cpp, but we don't control 10 epucks at the same time in a cpp file via ROS. For loop over each of the epucks and send wheel speed to webot published services and call .../robot/time\_step each time in order to update the motor status.
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/746248969746907186/unknown.png)
%end


`@David Mansolino` the picture is our code. Am I doing it the wrong way? thanks

##### koyal 08/21/2020 06:15:09
Hi `@David Mansolino`, in reference to the issue [https://github.com/cyberbotics/webots/issues/2131](https://github.com/cyberbotics/webots/issues/2131), seems like my Webots version is right and I have the ros-noetic-webots-ros pkgs installed.

##### David Mansolino [Cyberbotics] 08/21/2020 06:18:42
Hi `@koyal`, I saw, that's strange. Can you check the definition of the 'get\_field' service?


`@creative` you are trying to control several e-pucks from the same ros node right?

##### creative 08/21/2020 06:21:28
yes


How do I control several e-pucks in webots via ROS? I am a beginner about webots. Thanks!

##### David Mansolino [Cyberbotics] 08/21/2020 06:25:58
The normal way is to have 1 control node per robo, but your solution should work fine too.

##### koyal 08/21/2020 06:28:05
Yes, the definition of the node\_get\_field.srv is as follows:


uint64 node

string fieldName

---

uint64 field

##### David Mansolino [Cyberbotics] 08/21/2020 06:29:11
Your definition is not up to date, the 'bool proto' field is missing: [http://docs.ros.org/noetic/api/webots\_ros/html/srv/node\_get\_field.html](http://docs.ros.org/noetic/api/webots_ros/html/srv/node_get_field.html)


> How do I control several e-pucks in webots via ROS? I am a beginner about webots. Thanks!

`@creative` what you do looks good, have you tried first with only one robot to see if it works?

##### creative 08/21/2020 06:33:02
only one robot, it works. it cannot work in several robots.

##### David Mansolino [Cyberbotics] 08/21/2020 06:33:24
With two robot it already doesn't work?

##### creative 08/21/2020 06:34:42
two robots cannot work.


only  one work.

##### David Mansolino [Cyberbotics] 08/21/2020 06:40:29
`@creative` ok, what you are doing looks correct, can you please report this here: [https://github.com/cyberbotics/webots/issues/new?template=bug\_report.md](https://github.com/cyberbotics/webots/issues/new?template=bug_report.md)

Including a simple example reproducing the problem.

##### koyal 08/21/2020 06:40:57
Yes you are right `@David Mansolino` , inside my repo, the srv folder still has the older definitions. I thought the package update would have updated inside my repo too. It's okay, I'll manually clone the latest srv folder from the webots github repo, build it in my repo, and will check and let you know if it works. Thank you.

##### alxy 08/21/2020 06:41:21
Mh, I had converted my gripper to base nodes and now wanted to export it back to a proto (did that manually), however, if I do that my main robot controller cannot access teh devices in the Gripper (The grippers base node is Solid). Is that expected?

##### David Mansolino [Cyberbotics] 08/21/2020 06:41:40
If you have the webots\_ros package installed, you probably don't need to copy the srv file in your local project.


> Mh, I had converted my gripper to base nodes and now wanted to export it back to a proto (did that manually), however, if I do that my main robot controller cannot access teh devices in the Gripper (The grippers base node is Solid). Is that expected?

`@alxy` no, if the gripper is a solid node and not a Robot node, its parent node should be able to access its devices, did you save and revert?

##### alxy 08/21/2020 06:43:23
let me try that


thanks, after reloading the world it worked

##### David Mansolino [Cyberbotics] 08/21/2020 06:44:40
Perfect, you're welcome 🙂

##### creative 08/21/2020 06:45:33
`@David Mansolino` ok, How long do you solve the bug? our project has time requirements. thanks!

##### David Mansolino [Cyberbotics] 08/21/2020 06:47:18
Currently we are quite busy, but if you need professional help Cyberbotics provide professional consulting and can fix the bug 'quickly': [https://www.cyberbotics.com/#plans](https://www.cyberbotics.com/#plans)

##### creative 08/21/2020 06:49:00
ok, thanks!

##### David Mansolino [Cyberbotics] 08/21/2020 06:49:05
You're welcome

##### koyal 08/21/2020 07:29:16
Hi `@David Mansolino` , yes, I removed the local repo copies of both the msg and srv folders and from my CmakeList, and used the /usr/local/webots... copy instead. And yes, I guess it works. I think I had made the local copies of the folders for my webots\_ros repo when I did not find the apt-get package install feature last year.


Thank you soo much.  😀  Sorry for all the trouble.

##### David Mansolino [Cyberbotics] 08/21/2020 07:30:12
You're welcome 🙂

##### alxy 08/21/2020 07:33:06
`@Simon Steinmann` What was your idea why the robot is going these weird trajectorties sometimes? Orientation now works fine, the gripper is always perpendicular to the ground as I expect it to be


I have a behavior that for example if I only increae the x axis by some cm, not changing the height, the gripper first touches the ground and then goes to the desired position


This is how it looks
> **Attachment**: [trajectory.mp4](https://cdn.discordapp.com/attachments/565154703139405824/746273773438763008/trajectory.mp4)

##### Simon Steinmann [Moderator] 08/21/2020 09:47:33
`@alxy` check if you only send one new motor positions, or if several are sent. It could be due to the different max velocities of joints

##### alxy 08/21/2020 11:00:07
What do you mean? I pass all the positions as retruned by the inverse kinematics lib?

##### Simon Steinmann [Moderator] 08/21/2020 11:00:52
but it is only done once, So you give the motors a new position ONCE, and they move like that?


then it's not the IK, but the max velocities of the motors being different

##### alxy 08/21/2020 11:01:43
ah yeah I set the velocities (see my PR)


and they are different indeed for the different motors


What I really want is to move the TCP as constant speed

##### Simon Steinmann [Moderator] 08/21/2020 11:02:15
yeah, I used your changes too


TCP?

##### alxy 08/21/2020 11:02:40
tool center point (that is what I recall from the robotcs course 😄 )


but I think if I need that it would require some more complex code

##### Simon Steinmann [Moderator] 08/21/2020 11:03:25
you could calculate the maximum time for the move-execution


by dividing each joint delta by the max velocity


then split it up in let's say 10 intervals, moving each joint 1/10th of their delta each time


that should smooth it out

##### alxy 08/21/2020 11:05:12
and another question: Ive seen that I can pass the current position to the inverse kineamtics call: Does that help the algorithm in any wayß

##### Simon Steinmann [Moderator] 08/21/2020 11:05:32
I have no idea 😄


feel free to try and figure it out and let me know 😉

##### Kamil Kaya 08/21/2020 11:07:40
Hi, How can I use display node? When I add it to the child node of camera controller crashes.


Also when I want to process the images taken from camera using opencv it crashes when I use getframe and Mat functions.

##### alxy 08/21/2020 11:10:45
when working with the camera, I found this method usefull: ``cam.getImageArray()``


that returns an RGB array that you can use directly with opencv


(I have to say I use python as controller scropting language, not sure if it is different for others)


`@Simon Steinmann` yeah, it was really the motor speed beeing the issue. Once I set a fixed value for all motors it looks much better


Formerly, I just set them to their respective max velocity

##### Simon Steinmann [Moderator] 08/21/2020 11:18:57
well the PID controllers try to reach the position you set as quickly as they can within their torque and velocity limits

##### alxy 08/21/2020 11:19:27
yeah, the simulated robot is definetly moving much faster than the real one I have to say, even with the velocity constraints.


Will have to see if I can find a value to make it realistic

##### Simon Steinmann [Moderator] 08/21/2020 11:19:57
you can change maxVelocity from code


set all to the same

##### alxy 08/21/2020 11:21:33
I have now set the actual velocities (SetVelocity()), I guess as long as its lower as the max its ok


In the webots example they just set them two 1.0 for all motors, and I was erroneously thinking that is some kind of a percentage, but its really in rad/s

##### Simon Steinmann [Moderator] 08/21/2020 11:22:24
no you have to change maxVelocity

##### alxy 08/21/2020 11:22:54
why? I initialize my motors with one setVelocity call for each motor and fix the velocity

##### Simon Steinmann [Moderator] 08/21/2020 11:22:57
nope, units are rads/s  and m/s


oh nvm, you are correct

##### alxy 08/21/2020 11:23:34
of course I cannot set a larger velocity as the maximum, but that is only realistic

##### Simon Steinmann [Moderator] 08/21/2020 11:23:44
[https://www.cyberbotics.com/doc/reference/motor?tab-language=python](https://www.cyberbotics.com/doc/reference/motor?tab-language=python) the table a bit down really helps

##### alxy 08/21/2020 11:24:15
yeah as said, I discvered the units yesterday 😄

##### David Mansolino [Cyberbotics] 08/21/2020 11:33:46
> Hi, How can I use display node? When I add it to the child node of camera controller crashes.

`@Kamil Kaya` Hi, you should have a look at the examples provided within Webots, e.g. [https://cyberbotics.com/doc/guide/samples-devices#display-wbt](https://cyberbotics.com/doc/guide/samples-devices#display-wbt)

##### melb 08/21/2020 16:36:10
Hi, I'm trying to run an old Webots version (6.3.1) to gather additional data from old simulations for a research paper. How can I pass the license check?


The website mentions the "webots" magic password, but when starting this webots version, I just get an error dialog saying: "Your license of Webots has expired on 01-01-2011.

You can renew it free of charge from

[http://www.cyberbotics.com/registration/](http://www.cyberbotics.com/registration/)"

##### Adriana 08/23/2020 09:48:53
`@David Mansolino` Hello, I am using the Darwin-OP robot in the webots. And I want to use the motion editor to make my own actions. But it's too hard, so I want to see how the actions in the software are written.  Could you please tell me where I can find these motion files?

##### Simon Steinmann [Moderator] 08/23/2020 11:15:46
`@Adriana` select the controller in the scene tree, and click on edit. That should open the controller folder. Here you can see the entire controller structure and all files
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/747051456183402516/unknown.png)
%end


/webots/webots/projects/robots/robotis/darwin-op/controllers/motion\_player/


that's the path

##### Adriana 08/23/2020 11:48:43
`@Simon Steinmann` Thank you~ I have found the hand\_high motion file in the path you show me (picture 1), but where can I find other motion files (picture 2)?



%figure
![1.png](https://cdn.discordapp.com/attachments/565154703139405824/747059828605845564/1.png)
%end



%figure
![2.png](https://cdn.discordapp.com/attachments/565154703139405824/747059857240358982/2.png)
%end

##### Simon Steinmann [Moderator] 08/23/2020 11:58:50
`@Adriana` [https://github.com/cyberbotics/webots/blob/master/projects/robots/robotis/darwin-op/controllers/soccer/Soccer.cpp#L143](https://github.com/cyberbotics/webots/blob/master/projects/robots/robotis/darwin-op/controllers/soccer/Soccer.cpp#L143)

this line in the soccer controller might help you

##### fowzan 08/23/2020 12:02:29
hello team

##### Simon Steinmann [Moderator] 08/23/2020 12:05:00
`@fowzan` Hi 🙂

##### DavidFrederick 08/24/2020 00:19:03
robotbenchmark


I am working to establish my own copy of RobotBenchmark to support distant learning of my high school students.  

I have established a LAMP server (Ubuntu 20) with Webots and RobotBenchMark.  I have a number of the simple PHP files working but have not got the simulation working.      The simulation.php file fails when attempting to access the MySQL database.  MySQL database is empty.  Is there any documentation as to what tables and contents are needed to support the simulation?

Thank you,   

Dave Frederick, Manassas, Virginia



Mr. David Frederick

OHS – Career and Technology Education – Robotics, Cybersecurity, Programming, and Digital Electronics

FIRST Robotics Team 1895

B.S. Electrical Engineering, CISSP, CompTIA A+ and Network+

Osbourn High School, Manassas, VA

My Web site:   [https://www.mcpsva.org/Domain/1302](https://www.mcpsva.org/Domain/1302)

##### relat1v3 08/24/2020 02:14:16
Hi, I'm a newcomer to robots and webots. I know basic Python and I hope to learn much more

##### misericordia 08/24/2020 03:34:22
Hello, is there a way to redirect the stdout of an external program to the Webots console?


Additionally, is there a way to print things to the webots console without needing a timestep?

##### David Mansolino [Cyberbotics] 08/24/2020 05:53:13
> The website mentions the "webots" magic password, but when starting this webots version, I just get an error dialog saying: "Your license of Webots has expired on 01-01-2011.

> You can renew it free of charge from

> [http://www.cyberbotics.com/registration/](http://www.cyberbotics.com/registration/)"

`@melb` did you in the past logged-in on this computer with this version of Webots with another account?


> Hello, is there a way to redirect the stdout of an external program to the Webots console?

`@misericordia` unforunately, I don't see any solution to do this.

One possible (dirty) workaround would be to redirect the output of our program to a file and use a dummy controller to read this fil and print its content.


> Additionally, is there a way to print things to the webots console without needing a timestep?

`@misericordia` the controller and Webots are 'synchronized' at the time step only, so you have to wait for the time stpe for the print to be actually printed in the console. However, you may try with the `void wb_console_print(const char *text, int stream)` function.


> Hi, I'm a newcomer to robots and webots. I know basic Python and I hope to learn much more

`@relat1v3` Hi, welcome !


> I am working to establish my own copy of RobotBenchmark to support distant learning of my high school students.  

> I have established a LAMP server (Ubuntu 20) with Webots and RobotBenchMark.  I have a number of the simple PHP files working but have not got the simulation working.      The simulation.php file fails when attempting to access the MySQL database.  MySQL database is empty.  Is there any documentation as to what tables and contents are needed to support the simulation?

> Thank you,   

> Dave Frederick, Manassas, Virginia

> 

> Mr. David Frederick

> OHS – Career and Technology Education – Robotics, Cybersecurity, Programming, and Digital Electronics

> FIRST Robotics Team 1895

> B.S. Electrical Engineering, CISSP, CompTIA A+ and Network+

> Osbourn High School, Manassas, VA

> My Web site:   [https://www.mcpsva.org/Domain/1302](https://www.mcpsva.org/Domain/1302)

`@DavidFrederick` unfortunately I am afraid that this is not documented yet, but I will leave my colleague `@Olivier Michel` answer you later as he is more aware of the subject than me.

##### Olivier Michel [Cyberbotics] 08/24/2020 06:27:37
`@DavidFrederick`: unfortunately, there is no such documentation, but I can provide you with a dump of the database structure.


Done: I have added the database structure in the downloadable ZIP file at [https://robotbenchmark.net/robotbenchmark.zip](https://robotbenchmark.net/robotbenchmark.zip) in the `robotbenchmark/database/structure.sql` file. Let me know if you have any question about it.

##### Kamil Kaya 08/24/2020 09:43:23
I get this error with moving the linear actuators:WARNING: DEF STEWART\_PLATFORM Robot > DEF LOWER\_HINGE2\_0 Hinge2Joint > DEF LOWER\_PISTON\_0 Solid > DEF UPPER\_PISTON\_SLIDER\_0 SliderJoint > LinearMotor: too big requested position: 0.428763 > 0.4


Why am I getting this and how to solve it?

##### Olivier Michel [Cyberbotics] 08/24/2020 09:45:16
It could be that the position command sent to the motor is beyond the limit (max position) of the motor, which appears to be 0.4 m.

##### Kamil Kaya 08/24/2020 10:01:04
> It could be that the position command sent to the motor is beyond the limit (max position) of the motor, which appears to be 0.4 m.

`@Olivier Michel`  Thank you so much. I shouldn't change the amplitude, only frequency if needed.

##### Olivier Michel [Cyberbotics] 08/24/2020 10:01:41
Probably.

##### DavidFrederick 08/25/2020 00:23:35
Olivier, Thank you.    I'm looking forward to getting RobotBenchmark working but tonight I have to focus on getting ready for Online Teaching.  My students arrive on Monday.

##### saditya 08/25/2020 12:39:44
I am currently aiming at the line following behavior(white), while with calibration it works well for the part on brown floor part, but not on the black part ( possibly because the data is not good). The black part (base) is a solid with very less thickness, would you suggest anything else to use to try. Should or Can i use a plane instead of it? Will it help?
%figure
![issue.png](https://cdn.discordapp.com/attachments/565154703139405824/747797361442684988/issue.png)
%end

##### Olivier Michel [Cyberbotics] 08/25/2020 12:48:48
Yes, you can use a Plane, but I would recommend you to use a textured plane which has the white lines on the black background.

##### saditya 08/25/2020 12:51:50
> Yes, you can use a Plane, but I would recommend you to use a textured plane which has the white lines on the black background.

`@Olivier Michel` Alright. How can I have that? Just add a plane node and add the line structure? The white lines are Imported as 3D model from CAD file.

##### Olivier Michel [Cyberbotics] 08/25/2020 12:53:09
You should convert them into an image.

##### saditya 08/25/2020 12:54:49
> You should convert them into an image.

`@Olivier Michel` It has been a challenge to follow the lines when its a texture.

##### Olivier Michel [Cyberbotics] 08/25/2020 12:58:46
Why? It works nicely here: [https://www.youtube.com/watch?v=tn9hHYVfqvQ](https://www.youtube.com/watch?v=tn9hHYVfqvQ)

##### saditya 08/25/2020 13:00:44
> Why? It works nicely here: [https://www.youtube.com/watch?v=tn9hHYVfqvQ](https://www.youtube.com/watch?v=tn9hHYVfqvQ)

`@Olivier Michel` Alright I will have a look. What about objects? The objects also need to have a white tape line on it. How should I do that?

##### Olivier Michel [Cyberbotics] 08/25/2020 13:02:08
It's is less critical for objects as you won't make line following on them, right?

##### saditya 08/25/2020 13:04:27
> It's is less critical for objects as you won't make line following on them, right?

`@Olivier Michel` My objects also have a line on them, and the base is black.
%figure
![Selection_047.png](https://cdn.discordapp.com/attachments/565154703139405824/747803581364568094/Selection_047.png)
%end

##### Olivier Michel [Cyberbotics] 08/25/2020 13:05:20
I see. In that case, I would recommend you to use a texture on the objects as well.

##### saditya 08/25/2020 13:06:19
> I see. In that case, I would recommend you to use a texture on the objects as well.

`@Olivier Michel` Alright. Thanks, I will  try it out! 🙂


Hello, how can I have a bounding object for a solid I imported using .stl format? My robot seems to pass within the object `@Simon Steinmann`

##### Simon Steinmann [Moderator] 08/25/2020 19:33:51
go to the imported solid, and copy the 'shape' node


then select the bounding object node, and hit ctrl+v


or you give the shape a DEF


and doubleclick on the boundingObject, a window should come up, and under 'USE' you should see the DEF shape

##### saditya 08/25/2020 19:42:52
> go to the imported solid, and copy the 'shape' node

`@Simon Steinmann` That's how the bounding object looks, since it's from stl file, its meshes are triangle.
%figure
![bounding.png](https://cdn.discordapp.com/attachments/565154703139405824/747903844603789412/bounding.png)
%end

##### Simon Steinmann [Moderator] 08/25/2020 19:43:32
when importing, you can check the box to use it as boundingObject as well


and it looks lite it did (the white outlines are the collision box)

##### saditya 08/25/2020 19:45:35
> go to the imported solid, and copy the 'shape' node

`@Simon Steinmann` This is what happpens.
> **Attachment**: [slope\_vqx7TjiS.compressed.mp4](https://cdn.discordapp.com/attachments/565154703139405824/747904529231642694/slope_vqx7TjiS.compressed.mp4)

##### Simon Steinmann [Moderator] 08/25/2020 19:46:32
so it works in the first iteration and then it doesnt?

##### saditya 08/25/2020 19:51:26
> so it works in the first iteration and then it doesnt?

`@Simon Steinmann` There was mistake in the first iteration. I started it again, set the bounding object as the shape.

##### Simon Steinmann [Moderator] 08/25/2020 19:51:53
make sure you save the world before you run it


on reset, changes often get deleted

##### saditya 08/25/2020 19:52:19
> so it works in the first iteration and then it doesnt?

`@Simon Steinmann` The object is a .stl object and it seems like it has triangles as bounding objects.

##### Simon Steinmann [Moderator] 08/25/2020 19:52:43
yes, that's how meshes usually are

##### David Mansolino [Cyberbotics] 08/26/2020 05:24:25
`@saditya` for boudning object it is recommended not to use meshes, but rather to use a set of basic geometries (boxes, spheres, cylinders, etc.)

##### saditya 08/26/2020 08:37:47
> `@saditya` for boudning object it is recommended not to use meshes, but rather to use a set of basic geometries (boxes, spheres, cylinders, etc.)

`@David Mansolino` The object is imported as .stl file, so should i have the bounding object just a box instead of the shape of the object? Because it is one object.

##### Olivier Michel [Cyberbotics] 08/26/2020 08:40:14
You should actually not use the bounding object coming from the STL file. You should replace it with a primitive-based bounding object (probably a simple Box).

##### saditya 08/26/2020 08:40:36
It work fine till the point it runs, and suddenly get stuck at the top of the box or falls down(robot). Is it because of the structure?
> **Attachment**: [error\_bOk8CTH8.compressed.mp4](https://cdn.discordapp.com/attachments/565154703139405824/748099569346281574/error_bOk8CTH8.compressed.mp4)

##### Olivier Michel [Cyberbotics] 08/26/2020 08:41:33
It is very likely because your bounding objects are not boxes...

##### Simon Steinmann [Moderator] 08/26/2020 08:44:07
Just curious, how does one simulate traction on uneven terrain? Requiring perfect bounding geometries seems like a major limitation for a range of usecases

##### Olivier Michel [Cyberbotics] 08/26/2020 08:44:59
The ElevationGrid object is the way to go to model uneven terrains.

##### saditya 08/26/2020 08:45:21
> It is very likely because your bounding objects are not boxes...

`@Olivier Michel` Could you guide me a bit? Because all of that is one object so should i just add a box as bounding object?

##### Olivier Michel [Cyberbotics] 08/26/2020 08:45:21
Not the IndexedFaceSet.


No, should add a compound bounding object made of several boxes. See this tutorial: [https://cyberbotics.com/doc/guide/tutorial-5-compound-solid-and-physics-attributes](https://cyberbotics.com/doc/guide/tutorial-5-compound-solid-and-physics-attributes)

##### Simon Steinmann [Moderator] 08/26/2020 08:46:33
Can a mesh model be converted into uneven terrain?

##### Olivier Michel [Cyberbotics] 08/26/2020 08:47:27
Depending on the mesh, yes. It has to fit on an ElevationGrid.

##### Simon Steinmann [Moderator] 08/26/2020 08:47:47
can it be vertical?

##### Olivier Michel [Cyberbotics] 08/26/2020 08:48:28
No...

##### Simon Steinmann [Moderator] 08/26/2020 08:48:57
almost guessed so, probably has to be a continous function

##### saditya 08/26/2020 08:52:18
> `@Olivier Michel` Could you guide me a bit? Because all of that is one object so should i just add a box as bounding object?

`@saditya` 

> It is very likely because your bounding objects are not boxes...

`@Olivier Michel` Is this the wrong way to do it? I had a DEF name to shape, and then i used the same for bounding object. If not how should i add a bounding object for a complex object since its geometry if off from a box
%figure
![Selection_049.png](https://cdn.discordapp.com/attachments/565154703139405824/748102515303645244/Selection_049.png)
%end

##### Olivier Michel [Cyberbotics] 08/26/2020 08:53:45
That's indeed the wrong way. Please follow the tutorial I pointed to you and you will understand how to proceed.

##### Simon Steinmann [Moderator] 08/26/2020 09:05:30
Out of curiosity, would it be conceivable to handle collision calculations for FaceSets similar to how ElevationGrid is handled? Using a thickness. This would be a extremely useful feature for any wheeled robot / rover etc. Things like stairs or sidewalk bumps are very common obstacles

##### Olivier Michel [Cyberbotics] 08/26/2020 09:09:33
Why not. The main problem is that the meshes (IndexedFaceSet) don't generate good contact points for collision detection causing instabilities. This should be fixed in ODE and it's not trivial. On the other hand, you can combine an ElevationGrid (for an uneven terrain) with other primitives (Boxes, Spheres, Capsules, Cylinders) for common obstacles.

##### saditya 08/26/2020 09:15:48
> That's indeed the wrong way. Please follow the tutorial I pointed to you and you will understand how to proceed.

`@Olivier Michel` So i need a elevation grid node to my solid shape? I am sorry please correct me if I am wrong.

##### Olivier Michel [Cyberbotics] 08/26/2020 09:16:42
No, you need a combination of boxes for your solid shape. The ElevationGrid is not needed in your case.

##### Simon Steinmann [Moderator] 08/26/2020 09:17:00
Is the ElevationGrid a ODE feature, or Webots?

##### Olivier Michel [Cyberbotics] 08/26/2020 09:17:32
Both, in ODE it is called height map if I remember well.

##### Simon Steinmann [Moderator] 08/26/2020 09:18:15
from what I understand, it allows certain 'penetration' of the 'ground' to calculate a sort of average contact

##### David Mansolino [Cyberbotics] 08/26/2020 09:18:20
> Both, in ODE it is called height map if I remember well.

`@Olivier Michel` almost, 'Heightfield'.

##### Olivier Michel [Cyberbotics] 08/26/2020 09:20:37
See [http://ode.org/wiki/index.php?title=Manual#Heightfield\_Class](http://ode.org/wiki/index.php?title=Manual#Heightfield_Class)

##### Simon Steinmann [Moderator] 08/26/2020 09:20:40
Could it be possible to use this same kind of 'penetration contact' when interacting with other boundingobjects?

##### Olivier Michel [Cyberbotics] 08/26/2020 09:20:54
I don't know...

##### Simon Steinmann [Moderator] 08/26/2020 09:22:06
'soft grippers' are another fastly growing area, where this would be applicable


might be worth looking into. That would certainly be a feature to set Webots apart.

##### saditya 08/26/2020 09:40:34
> No, you need a combination of boxes for your solid shape. The ElevationGrid is not needed in your case.

`@Olivier Michel` Alright, I am sorry to ask again because I understand the concept of bounding object, but here my object is just one object all of it. So if i add a bounding object it comes out only on one shape. Guess another mistake on my end.
%figure
![bounding.png](https://cdn.discordapp.com/attachments/565154703139405824/748114658363310172/bounding.png)
%end

##### Olivier Michel [Cyberbotics] 08/26/2020 09:42:23
Did you follow the tutorial?

##### saditya 08/26/2020 09:46:00
> Did you follow the tutorial?

`@Olivier Michel` Yeah I did, but i guess my case is a bit different?

##### Olivier Michel [Cyberbotics] 08/26/2020 09:47:13
No, instead of composing a Cylinder with two Spheres, you should compose several boxes together.


From the picture you send, it should be simply 7 boxes.

##### Simon Steinmann [Moderator] 08/26/2020 09:49:09
Question. Is a box handled differently than a Faceset with the exact same 8 corner points?


Or is the important thing, that a surface has no 'lines' running through it

##### Olivier Michel [Cyberbotics] 08/26/2020 09:52:10
Yes, it is handled differently.

##### Simon Steinmann [Moderator] 08/26/2020 09:52:42
So having a standard 'wedge' shape would not work as well as a box?

##### Olivier Michel [Cyberbotics] 08/26/2020 09:52:56
Nope.

##### Simon Steinmann [Moderator] 08/26/2020 09:53:09
😦

##### Olivier Michel [Cyberbotics] 08/26/2020 09:53:56
But in the above example the wedge shape could be a box inclined and partly sinking into the floor.

##### Simon Steinmann [Moderator] 08/26/2020 09:54:50
the issue is, when you might need good contact properties, but the space around it has to be collision free


for let's say a gripper finger. Where using a box would create a good contact property for where it's gripping, but a clunky collision box behind it, making it impossible to fit the fingers into limited spaces

##### Olivier Michel [Cyberbotics] 08/26/2020 09:58:00
Depending on the number of primitives you compose (boxes, cylinders, capsules, spheres), you can achieve an arbitrary accurate shape, at the cost high calculation...

##### Simon Steinmann [Moderator] 08/26/2020 10:08:46
Looking at a cylinder, it seems to be a n-tagon, where you can choose the n subdivisions. Does that reall perorm well? Or is it actually taking a cylinder for the calculation?

##### Olivier Michel [Cyberbotics] 08/26/2020 10:13:00
No, it's taking a perfect cylinder for collision detection. The number of subdivision is only for 3D rendering.

##### Simon Steinmann [Moderator] 08/26/2020 10:13:58
ohh okay, good to know. That is not very clear from the gui.

##### Olivier Michel [Cyberbotics] 08/26/2020 10:15:38
That's because it's difficult to represent a perfect cylinder in wireframe 😉

##### Simon Steinmann [Moderator] 08/26/2020 10:15:42
I actually wrote an addition to the converter that calculates a collision cylinder, and uses it instead of the collision box, if the volume is smaller. But I discarded it, when I looked at the imports and the cylinders just looked like n-tagons and the robot model becomes very ugly to look at, with all those collision lines being 'webbed' around the visual model


I also did a 'per-primitive' collision box/cylinder calculation. But again, it doesnt look as nice in Webots, as the collision wireframe becomes more busy


But perhaps this approach wouldnt be that bad actually, representing a good tradeoff


Question: is performance largely impacted, when there is high detailed boundingObjects, but they are not colliding? Or is the impact mostly important for when it comes to actualy collisions

##### Olivier Michel [Cyberbotics] 08/26/2020 10:20:42
Complex bounding objects are fit into AABBs (axis aligned bounding boxes), which makes that when two complex bounding objects are far for each other, the performance is very good. However, when their AABB collide, then, the performance drops, especially if they are very complex.

##### Simon Steinmann [Moderator] 08/26/2020 10:21:37
Ah that makes sense


If we use a boundingObject Group, does the whole group get a box, or each member of the group?

##### Olivier Michel [Cyberbotics] 08/26/2020 10:22:53
I am not sure. But I guess each member gets its own AABB.


Yes, I think so. And in addition to this the group also get its own AABB.

##### Simon Steinmann [Moderator] 08/26/2020 10:23:42
because that could be quite beneficial, for larger  multi-primitive models


I might revisit the whole per-primitive collision generation


Can the rendering of bounding objects be changed in the bounding object node? It seems the convention is to use only boxes, but when using for example the collision stl files most robot repos have, you almost can't see the robot anymore

##### Olivier Michel [Cyberbotics] 08/26/2020 11:26:06
No, it can't be changed, but if you see so many edges, this probably means that your bounding object is too complex and inefficient...

##### mint 08/26/2020 14:15:54
Hello, now I am trying to shoot a ball into a certain position on the field in the webot simulator. I have used a mathematical equation to model its parabolic motion in 3D, and calculated the ball's initial velocity and angle. However, the ball falls before reaching the target position. All hyperparameters seem okay. g is 9.81m, and Damping is NULL. Is there any possible cause of this issue, like hidden air resistance?

##### Simon Steinmann [Moderator] 08/26/2020 14:16:58
There is Atmospheric calculations (air drag)

##### mint 08/26/2020 14:17:25
Thank you!


um

##### Simon Steinmann [Moderator] 08/26/2020 14:17:37
but perhaps wait for a dev's answer

##### mint 08/26/2020 14:17:41
Could you tell me any material I could find about it?


Ah


Thank you

##### Simon Steinmann [Moderator] 08/26/2020 14:20:37
hmm by default Fluid simulations should be off


how are you 'shooting' the ball?


most likely the momentum transfer is different from what you calulated in your parabolic motion

##### mint 08/26/2020 14:21:04
It is shot by artificially setting  the ball's velocity


by set\_velocity function on the supervisor

##### Simon Steinmann [Moderator] 08/26/2020 14:22:14
it behave like expected, just performs a smaller parabola?

##### mint 08/26/2020 14:23:23
yes. slightly small so that it falls on the ground earlier

##### Simon Steinmann [Moderator] 08/26/2020 14:24:37
have you considered the center of mass in your calculation? Because that is above ground level

##### Olivier Michel [Cyberbotics] 08/26/2020 14:25:12
I confirm there is no air friction by default.


But there may be some damping.

##### mint 08/26/2020 14:26:00
`@Simon Steinmann` center of mass is considered

##### Olivier Michel [Cyberbotics] 08/26/2020 14:27:58
Did you set `WorldInfo { defaultDamping Damping { linear 0 angular 0 } }`?


Default values are 0.2 and 0.2. See [https://cyberbotics.com/doc/reference/damping](https://cyberbotics.com/doc/reference/damping)

##### mint 08/26/2020 14:28:44
I'll go and try right now

##### Olivier Michel [Cyberbotics] 08/26/2020 14:30:16
(assuming you didn't defined any Damping node in the Physics nodes of your world file)

##### mint 08/26/2020 14:31:47
It works perfect. I thought defaultDamping is set to NULL by default. Now everything's okay. Thank you `@Simon Steinmann` and `@Olivier Michel` !

##### Vyshak 08/26/2020 15:06:48
Hi , I am a new comer tp webots and robotics. Have knowledge on c/c++. Hope to learn much more as i am starting with creating a simulator for a robot vaccum cleaner and finally integrate it with the android application and validate this application workinh with the help of the simulator (iot application). Can this be done using webot ?? If yes, how can i start it with?

##### David Mansolino [Cyberbotics] 08/26/2020 15:09:12
Yes sure this can be done!

First, I strongly recommend to start by following the tutorials (at least 1 to 6):   [https://www.cyberbotics.com/doc/guide/tutorials](https://www.cyberbotics.com/doc/guide/tutorials)

Then you should probably have a look at this vacum cleaner example: [https://cyberbotics.com/doc/guide/create](https://cyberbotics.com/doc/guide/create)

Finally, to interface Webots with your android application, you will need to write a controller that control the robot and communicate with your application: [https://cyberbotics.com/doc/guide/interfacing-webots-to-third-party-software-with-tcp-ip](https://cyberbotics.com/doc/guide/interfacing-webots-to-third-party-software-with-tcp-ip)

##### Vyshak 08/26/2020 15:23:09
Thank you `@David Mansolino`  , will refer these .

##### Deleted User 08/26/2020 20:52:08
I am new to webots and trying to get my first world loading. I am using 2020a-rev1. The world I have was created by someone else. When I try to load the world I get the following error message: "error: Skipped unknown 'MultiSenseS21' node or PROTO."


i checked and there is a MultiSense21.proto file at /Applications/Webots.app/projects/devices/multisense/protos/MultiSenseS21.proto


any idea why webots can't find it?

##### Simon Steinmann [Moderator] 08/26/2020 20:54:55
you should probably update to 2020b


there have been many important updates

##### Deleted User 08/26/2020 20:56:28
Unfortuantely i am told i must use 2020a-rev1 for some custom protos that have not been updated.

##### Simon Steinmann [Moderator] 08/26/2020 20:56:48
they should be forward compatible


you can try to manually copy the proto file into your project


in the protos/ folder

##### Deleted User 08/26/2020 20:58:47
Figuring out the search path has been one of my questions. 🙂 where would the protos folder be relative to the wbt file?


i currently have no project, just the world i opened.

##### Simon Steinmann [Moderator] 08/26/2020 21:00:24
make a 'protos' folder next to the 'worlds' and 'controllers' folder


you might wanna create a new project


that might be your problem

##### Deleted User 08/26/2020 21:07:47
OK, if i have an existing directory with those directories, how do i open it as a project?


I found the "New project directory…" under wizards menu but don't see how to open a project.

##### Simon Steinmann [Moderator] 08/26/2020 21:17:11
create a new one, then put the world file in


or create that structure yourself

##### Kamil Kaya 08/27/2020 06:57:59
Hi.  I am getting this error for visual studio debug mode. Severity    Code    Description    Project    File    Line    Suppression State

Error    LNK2019    unresolved external symbol wb\_robot\_get\_controller\_arguments referenced in function "public: class std::basic\_string<char,struct std::char\_traits<char>,class std::allocator<char> > \_\_cdecl webots::Robot::getControllerArguments(void)const " (?getControllerArguments@Robot@webots@@QEBA?AV?$basic\_string@DU?$char\_traits@D@std@@V?$allocator@D@2@@std@@XZ)    OpenCVtest    C:\Users\kamil\source\repos\OpenCVtest\Robot.obj    1


It is okay for release mode and I have the same configurations with debug mode. Why is this occuring?

##### David Mansolino [Cyberbotics] 08/27/2020 07:00:48
It seems you are somehow missing to link with the 'libController' (to which belong 'wb\_robot\_get\_controller\_arguments').

##### Kamil Kaya 08/27/2020 07:09:07
So which libraries should I add? Since It is different from release mode libraries.

##### David Mansolino [Cyberbotics] 08/27/2020 07:09:49
Usually the same should be fine :-/

Can you make sure that you are linking with libcontroller in debug mode too?

##### alxy 08/27/2020 08:36:00
I Have another logic question question regarding orientation of my gripper. The ikpy works like this ( [https://github.com/Phylliade/ikpy/wiki/Orientation#orientation-on-a-single-axis](https://github.com/Phylliade/ikpy/wiki/Orientation#orientation-on-a-single-axis) ), meaning the orierntation is specified by aligning/parallelizing two vectors if I get that correctly. And if I just want to ensure an orientation perpendicular to the ground I just align the global Z axis with the last joints z axis: [https://github.com/alxy/webots-mirobot/blob/master/controllers/mirobot\_default\_controller/ip\_controller.py#L190-L193](https://github.com/alxy/webots-mirobot/blob/master/controllers/mirobot_default_controller/ip_controller.py#L190-L193)

However, as problem arises if I want to rotate exactly around this z axis. So the gripper is still perpendicular to the ground, but rotatet at its wrist. How do I do that?

##### David Mansolino [Cyberbotics] 08/27/2020 08:38:30
I am not sure to perfectly understand your question, can you maybe add images to your question?

Not also that in my experience ikpy does not support well target orientation.

##### alxy 08/27/2020 08:39:57
Sure, let me capture some


So, with the current code (see my github repository), I fix the orientation. And basically what I'm telling the ikpy lib is: I want the global z axis (z axis of base) to be parallel to the last joint axis (Z) of the arm. It looks like this:
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/748462564308025394/unknown.png)
%end


Now consider I want to rotate the gripper like this:
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/748463169571389450/unknown.png)
%end


Note still the two z axis are parallel, its just rotated exactly around this axis


I will probably need the orientation on full referential is my best guess


as two vectors willnever be enough to describe an orientation in 3d space

##### David Mansolino [Cyberbotics] 08/27/2020 08:51:19
But can't you simply 'force' the rotation of the last joint that rotates around Z ?

##### alxy 08/27/2020 08:53:18
sure, I could do that. However it would be easier if the lib would handle that as well, especially if I need more complex orientations in the future 😄


Right now In just need to pick rotated cubes, so that is rather easy

##### David Mansolino [Cyberbotics] 08/27/2020 08:54:58
Oh ok, I understand, in that case yes you probably need a complete 3d orientation definition of your gripper.

##### alxy 08/27/2020 08:55:35
yeah, and I want the robot to be as similar as possible to the real robot 🙂


Mh, surprisingly, setting a different orientation using the full 3x3 matrix also changes the entire position of the arm. Very weird...

##### David Mansolino [Cyberbotics] 08/27/2020 09:13:38
From my experience setting the full orientation doesn't works perfectly with ikpy

##### alxy 08/27/2020 09:14:27
with an eye matrix everything seems fine


also the rotation is correct


however now the position is not correct


If I just rotate around z, and stick the position, why is it moving any othher joint than the last one 😄


it looks like it does half of the rotation using the base, and half using the last joint, so for a 90° rotation 45+45, which results in the correct rotation


but obviously a completely wrong position, as the  base joint moved the entire arm

##### David Mansolino [Cyberbotics] 08/27/2020 09:23:58
Sorry, I am not an inverse kinematic expert, I don't understand it too.

##### alxy 08/27/2020 09:24:36
Will need to wati for `@Simon Steinmann` , I guess he has spent quite some time with this lib. Maybe he has some insights

##### Simon Steinmann [Moderator] 08/27/2020 09:50:17
`@alxy` The controller and modules I wrote dont just align the axis, but do the full rotation. You can either use my code, or do it manually. For the z-axis this would entail getting the rotation matrix of you desired orientation, and taking the 3rd column as the rotation vector you pass to ikpy.  R(3x3) * (0, 0, 1). When you use the getOrientation() function of Webots, it returns 1-dim, len(9) list. So your rotation vector for ikpy is

R[2,5,8]


[https://github.com/cyberbotics/community-projects/blob/Simon-Steinmann-IK/default/controllers/generic\_inverse\_kinematic/ik\_module.py#L105](https://github.com/cyberbotics/community-projects/blob/Simon-Steinmann-IK/default/controllers/generic_inverse_kinematic/ik_module.py#L105)


with rot\_index being 2 for the z-axis


line 108 then calls ikpy with that rotation

##### alxy 08/27/2020 09:54:24
Yeah, I have used your code as a reference


However, I think your code doesnt do the full rotation

##### Simon Steinmann [Moderator] 08/27/2020 09:55:17
it does


how are you defining the rotation vector you are parsing to ikpy?

##### alxy 08/27/2020 09:56:27
Consider orientation\_mode is "Z", how do you do a rotation around this axis by only passing one additioal vector (target\_orientation)


I mean orientation with regards to the other two axis is possible

##### Simon Steinmann [Moderator] 08/27/2020 09:58:01
hmmm

##### alxy 08/27/2020 09:58:05
and it perfectly works with ikpy (I tested it)

##### Simon Steinmann [Moderator] 08/27/2020 09:58:29
let me switch to lilnux 😉

##### alxy 08/27/2020 10:02:01
I try to create a more minimal example. as my code is really heavy now and has lots of dependencies

##### Simon Steinmann [Moderator] 08/27/2020 10:04:15
you are right, tested it. I remembered rotating axis and it working, but that was always rotation the other 2 axis. Makes sense, that you couldnt solve 4 variables (direction and rotation), given a 3-dim vector

##### alxy 08/27/2020 10:05:22
I did the following now

##### Simon Steinmann [Moderator] 08/27/2020 10:05:23
My approach would be to calculate the rotation seperately. ikpy doesnt support xyz orientation


the last joint only does rotation and is aligned with the same axis

##### alxy 08/27/2020 10:05:47
```
orientation = R.from_euler('xyz', [0, 0, 90], degrees=True).as_matrix()
ikResults = self.armChain.inverse\_kinematics(translation, orientation, orientation\_mode="all")
```

##### Simon Steinmann [Moderator] 08/27/2020 10:06:26
that works? I thought the wiki said it is not implemented

##### alxy 08/27/2020 10:06:35
yeah, have seen that as well


but looking at the code it works 😄

##### Simon Steinmann [Moderator] 08/27/2020 10:06:44
that works? 😮

##### alxy 08/27/2020 10:06:51
yeah, the orientation works

##### Simon Steinmann [Moderator] 08/27/2020 10:06:54
xD damn that outdated documentation


omg, the code will be so much simpler then

##### alxy 08/27/2020 10:07:11
however, it somehow kills the translation

##### Simon Steinmann [Moderator] 08/27/2020 10:07:23
ah okay, then it doesnt work

##### alxy 08/27/2020 10:07:32
as I said, the orientation woprks 😄

##### Simon Steinmann [Moderator] 08/27/2020 10:07:41
that's probably why they said it's not implemented

##### alxy 08/27/2020 10:08:36
[https://github.com/Phylliade/ikpy/commit/691c86f5ccf6a316428509e975e3e218baf26ed9](https://github.com/Phylliade/ikpy/commit/691c86f5ccf6a316428509e975e3e218baf26ed9)


According to their tests it all works


I am on my way creating a simple example with the mirobot chain to test


lol, this is what bad testing looks like: [https://github.com/Phylliade/ikpy/commit/691c86f5ccf6a316428509e975e3e218baf26ed9#diff-a656ba05b54787c68ede6d639bfa71bbR25](https://github.com/Phylliade/ikpy/commit/691c86f5ccf6a316428509e975e3e218baf26ed9#diff-a656ba05b54787c68ede6d639bfa71bbR25)


They only have one test using np.eye() as orientation

##### Simon Steinmann [Moderator] 08/27/2020 10:15:28
[https://tenor.com/view/blank-stare-really-idontbelieveyou-side-gif-6151149](https://tenor.com/view/blank-stare-really-idontbelieveyou-side-gif-6151149)

##### alxy 08/27/2020 10:17:10
I bet we see the same issue if using a different orientation

##### Simon Steinmann [Moderator] 08/27/2020 10:20:09
does forward kinematics work for you?


I always get errors

##### alxy 08/27/2020 10:20:37
never tested


I just try to figure how to run theses tests

##### Simon Steinmann [Moderator] 08/27/2020 10:21:32
oh wait, it works


my brain is not in full gear yet... linear algebra urgh


okay, so you get the end transformation matrix with this:

self.armChain.forward\_kinematics(ikResults)


it's a 4x4 matris, with the upper left 3x3 being the rotation matrix and the right column being the translation vector (the first 3 values, 4th is always 1)


should be possible to calculate how much we have to rotate around the z-axis, to reach our target rot

##### alxy 08/27/2020 10:31:41
yeah its this wuaternion rotation/translation matrix right? which does both in one matrix vector caclulation


I just ran the tests, and even in it current form the est\_orientation\_full\_frame fails

##### Simon Steinmann [Moderator] 08/27/2020 10:32:46
lol

##### alxy 08/27/2020 10:33:41
But its due to numerics, I just dont get the required precision up to 5 digits


``E       Mismatched elements: 3 / 3 (100%)

E       Max absolute difference: 0.00041896

E       Max relative difference: 0.00292389

E        x: array([ 0.10029,  0.39958, -0.09998])

E        y: array([ 0.1,  0.4, -0.1])``


In general that appears to work with the eye amtrix


Decreasing that to 3 decimals fixes that

##### Simon Steinmann [Moderator] 08/27/2020 10:36:14
fixes what exactly?

##### alxy 08/27/2020 10:38:33
Mh, now, that is weird now, using their arm chain I can also use other orientations, it seems to work


Ok, it depends which axis I am rotating


No idea whats going on there

##### Simon Steinmann [Moderator] 08/27/2020 10:43:27
can you find where the acutal IK calculations are done? I dont see it in their code

##### alxy 08/27/2020 10:44:02
[https://github.com/Phylliade/ikpy/blob/87509bb371034b819d082f5a6cf0e7fbccf4e7e4/src/ikpy/inverse\_kinematics.py#L134](https://github.com/Phylliade/ikpy/blob/87509bb371034b819d082f5a6cf0e7fbccf4e7e4/src/ikpy/inverse_kinematics.py#L134)


What does actual calculation mean?


It a minimization problem

##### Simon Steinmann [Moderator] 08/27/2020 10:44:38
where in the code they turn the target frame into joint angles


ohh

##### alxy 08/27/2020 10:45:32
the angles are the parameters with respect to them the function is optimized

##### Simon Steinmann [Moderator] 08/27/2020 10:57:29
so did you get it to work?

##### alxy 08/27/2020 11:24:09
No, was having lunch :p But managed to add a failing test

##### Simon Steinmann [Moderator] 08/27/2020 11:24:26
and then what? 😄

##### alxy 08/27/2020 11:25:08
No idea, but a failing test is the first step towards a solution


for the baxter arm I reailized a start to get wrong results once I do a rotation along more than one axis

##### Simon Steinmann [Moderator] 08/27/2020 11:26:55
using the 'all' rotation always gives me the correct rotation, but rarely the right translation


code seems to be broken

##### alxy 08/27/2020 11:27:31
yes, I have the same behavior when using the mirobot chain


using the baxter chain, the orientation fials


[https://github.com/Phylliade/ikpy/pull/93](https://github.com/Phylliade/ikpy/pull/93)

##### Simon Steinmann [Moderator] 08/27/2020 11:32:32
I'm onto something


manual workaround, but close to figuring it out

##### alxy 08/27/2020 11:33:14
nice


The orientation examples are completely overloaded, dont get why they not just simply only plot the left arm, as this is the only one beein oriented

##### Simon Steinmann [Moderator] 08/27/2020 11:51:21
I figured it out, but sometimes it is very slightly of, but within like 2 degrees or something


the error comes from when the z-axis is not perfectly aligned with the target z-axis

##### alxy 08/27/2020 11:55:34
and why does it cripple the position then?

##### Simon Steinmann [Moderator] 08/27/2020 11:55:50
oh no, I made my own solution 😄


fk = self.armChain.forward\_kinematics(ikResults)

            R\_fk = fk[:3,:3]

            R\_new = np.dot(target\_rot, R\_fk)

            r = R.from\_matrix(R\_new)

            euler = r.as\_euler('xyz', False)

            print(np.round(R\_new, 3), euler)

            ikResults[6] = ikResults[6] + euler[2]


\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_

all should be on the same indent, after calculating ikResults


and you need:

from scipy.spatial.transform import Rotation as R


basically I get the rotation matrix from the ikResult, and do the dot product with the target rotation matrix, So we get the 'difference' or 'error' in rotation between the ik and target. Then we turn this into euler angles, and add the z-angle to the 6th motor


does that make somewhat sense?

##### alxy 08/27/2020 11:59:45
If it works, probably 😄

##### Simon Steinmann [Moderator] 08/27/2020 12:00:31
works pretty well. you wanna try it? Not that many lines to add


code is on the bottom of this
> **Attachment**: [ik\_module.py](https://cdn.discordapp.com/attachments/565154703139405824/748512630041346059/ik_module.py)

##### alxy 08/27/2020 12:02:02
yeah definetly will, Im just super curious why it behaves like that. It is dependant on position and rotation, sometimes one ios wrong, sometimes the other


[https://github.com/Phylliade/ikpy/blob/master/src/ikpy/inverse\_kinematics.py#L99](https://github.com/Phylliade/ikpy/blob/master/src/ikpy/inverse_kinematics.py#L99) this comment does exactly describe what we are seeing I think

##### Simon Steinmann [Moderator] 08/27/2020 12:09:38
yeah


if you could figure this out and do a PR for ikpy, that would be amazing

##### adaptive 08/27/2020 12:11:19
I have a problem getting the Matlab-Demo-World running.. [https://bpa.st/JB3A](https://bpa.st/JB3A)

##### alxy 08/27/2020 12:11:30
I wonder why it still fails if I do it in two calls, first to get the position right and second to get the orientation

##### adaptive 08/27/2020 12:11:34
it says "could not find allincludes.h"


as on [https://www.cyberbotics.com/doc/guide/using-matlab](https://www.cyberbotics.com/doc/guide/using-matlab) mentioned.. perl/gcc is installed.. im running an 64bit System with 64bit webots/matlab

##### David Mansolino [Cyberbotics] 08/27/2020 12:13:55
Which version of Webots are you using?

##### adaptive 08/27/2020 12:14:12
R2020a

##### David Mansolino [Cyberbotics] 08/27/2020 12:14:39
Please try with R2020b, we fixed many related issues in this new version.

##### adaptive 08/27/2020 12:14:59
ok

##### alxy 08/27/2020 12:21:07
`@Simon Steinmann` Do you know how I can easily edit the source files of this lib to do some testing?

##### Simon Steinmann [Moderator] 08/27/2020 12:21:41
pull the repo, create a branch and go nuts 😄

##### alxy 08/27/2020 12:22:07
ya, but if I run the tests for example it falls back to use the files from the pip isntalled version

##### Simon Steinmann [Moderator] 08/27/2020 12:23:42
you can import the modules directly, if it's in your directory


[https://pypi.org/project/ikpy/](https://pypi.org/project/ikpy/)


you can install from source


make sure you uninstall the current pip version first

##### adaptive 08/27/2020 12:27:22
> Please try with R2020b, we fixed many related issues in this new version.

`@David Mansolino` thanks it works! "/usr/local/bin/matlab: Zeile 1209: /usr/local/webots/lib/controller: is a directory" why is that error popping up in terminal when running sample-language controller?

##### alxy 08/27/2020 12:28:18
I have cloned the git repo, so no problem and already editing files there, I just need to ensure my imports now point to src/ikpy somehow

##### Simon Steinmann [Moderator] 08/27/2020 12:29:26
install from source as described in the link

##### alxy 08/27/2020 12:32:18
ok, and then it will use the source files from, the directory where I cloned?

##### Simon Steinmann [Moderator] 08/27/2020 12:32:52
From source - first download and extract the archive, then run:



    pip install ./



    NB: You must have the proper rights to execute this command

##### alxy 08/27/2020 12:33:16
did that

##### Simon Steinmann [Moderator] 08/27/2020 12:33:28
then you should be able to use it as before


but it points to your code

##### alxy 08/27/2020 12:33:47
yeah works, thanks 🙂

##### Simon Steinmann [Moderator] 08/27/2020 12:33:51
np 🙂


it's in python so needs no compiling, which is nice

##### David Mansolino [Cyberbotics] 08/27/2020 12:35:08
> `@David Mansolino` thanks it works! "/usr/local/bin/matlab: Zeile 1209: /usr/local/webots/lib/controller: is a directory" why is that error popping up in terminal when running sample-language controller?

`@adaptive` because `/usr/local/webots/lib/controller` is actually a directory. In which terminal is this error popping up?

##### adaptive 08/27/2020 12:35:40
in the internal webots terminal which executes matlab i think


in the same terminal some controller-specific Messages are routed

##### alxy 08/27/2020 12:37:09
didnt expect this to be such a difficult problem

##### David Mansolino [Cyberbotics] 08/27/2020 12:37:47
And is the controller running?

##### adaptive 08/27/2020 12:37:58
yes

##### David Mansolino [Cyberbotics] 08/27/2020 12:38:17
Ok, in that case you can probably just ignore this message 😉

##### alxy 08/27/2020 12:39:19
woha, do I need to always call pip install again when I make any change?

##### Simon Steinmann [Moderator] 08/27/2020 12:39:45
probably, as it installs it into your python directory

##### alxy 08/27/2020 12:44:15
but really it isnt an easy problem, as sometimes if you change orientation, you need to change the entire chain to fix the endpoint at that specific location


however that is not the case when rotating around the z axis, not sure why it fails so hard

##### Simon Steinmann [Moderator] 08/27/2020 12:45:41
while most arms are set up in a way, where the last joint rotates the final axis, that is not ALWAYS the case. When it is not, you have to calculate a whole new ik solution

##### alxy 08/27/2020 12:45:54
If I just want the wrist position to be correct, I think in the second inverse\_kinematics call I could just do target\_position=None, that will only optimize for orientation, see here: [https://github.com/Phylliade/ikpy/blob/master/src/ikpy/inverse\_kinematics.py#L107](https://github.com/Phylliade/ikpy/blob/master/src/ikpy/inverse_kinematics.py#L107)

##### Simon Steinmann [Moderator] 08/27/2020 12:47:24
I tried that, used 'inverse\_kinematics\_frame' with the first ikResult (correct position) as the starting position


it completely calculated a new solution that was completely different

##### alxy 08/27/2020 12:48:15
yeah, If I think about it it makes sense, as there are no contraints on the positions, it just tries to reach orientation *somehow*

##### Simon Steinmann [Moderator] 08/27/2020 12:48:38
My workaround works very well now, for any robot, were the last motor rotates th wrist

##### alxy 08/27/2020 12:49:09
but it makes sense that the orientation has more weight for the optimization than the position


since one is a 3 value vector, the other a 9 value matrix

##### Simon Steinmann [Moderator] 08/27/2020 12:50:02
IK is complex, their approach is a very simple solution

##### alxy 08/27/2020 12:51:10
does you solition only work if I want to rotate around the wrist or for other orientations as well?


Actually I dont get why they are not only optimizing for the 4x4 matrix, but somehow manually split it up

##### Simon Steinmann [Moderator] 08/27/2020 12:55:21
it does now exactly what you expect. matches the target orientation exactly

##### saditya 08/27/2020 12:55:29
Hey! I have some difficulty in obtaining a line following behavior , although they are distance sensors, I need to calibrate the sensors with another UI , the values seem to be not really good in order to differentiate black and white. The black part is a texture on a solid plate. Is it something wrong with the reflection from the black surface or something else? It works really well with white line on a brown floor than a black one.
%figure
![Selection_051.png](https://cdn.discordapp.com/attachments/565154703139405824/748526099100860416/Selection_051.png)
%end

##### Simon Steinmann [Moderator] 08/27/2020 12:55:32
(besides a very tiny error that sometimes exists)

##### David Mansolino [Cyberbotics] 08/27/2020 12:56:21
> Hey! I have some difficulty in obtaining a line following behavior , although they are distance sensors, I need to calibrate the sensors with another UI , the values seem to be not really good in order to differentiate black and white. The black part is a texture on a solid plate. Is it something wrong with the reflection from the black surface or something else? It works really well with white line on a brown floor than a black one.

`@saditya` ideally you should not change only the color but also the 'roughness' of the different parts

##### alxy 08/27/2020 12:56:24
Ok, will definetly test it later, need to do some other work now unfortunatly 😦


Another thing I might try is this regularization option, which appears to penalize if the angles are far from the initial angles: [https://github.com/Phylliade/ikpy/blob/master/src/ikpy/inverse\_kinematics.py#L118-L119](https://github.com/Phylliade/ikpy/blob/master/src/ikpy/inverse_kinematics.py#L118-L119)

##### Simon Steinmann [Moderator] 08/27/2020 12:57:23
`@alxy` put that into your project and try it out. It'll automatically spawn a target if you dont have one
> **Attachment**: [generic\_inverse\_kinematic.zip](https://cdn.discordapp.com/attachments/565154703139405824/748526580543913985/generic_inverse_kinematic.zip)

##### saditya 08/27/2020 12:57:33
> `@saditya` ideally you should not change only the color but also the 'roughness' of the different parts

`@David Mansolino` Thanks for your reply. I changed that as well. Do you have some black textures that I could try or that already exist in WEBOTS?

##### David Mansolino [Cyberbotics] 08/27/2020 12:59:52
You should try with the textures already used for line following in Webots (e.g. the on of the line following demo of the e-puck robot)

##### saditya 08/27/2020 13:28:30
> You should try with the textures already used for line following in Webots (e.g. the on of the line following demo of the e-puck robot)

`@David Mansolino` Can i download the texture from Github?

##### Simon Steinmann [Moderator] 08/27/2020 13:59:10
all the resources are already in the install direcotry

##### David Mansolino [Cyberbotics] 08/27/2020 14:11:26
> `@David Mansolino` Can i download the texture from Github?

`@saditya`: `@Simon Steinmann` is right you can find them in your installation folder of Webots. But if you really want to get them on Github, here they are: [https://github.com/cyberbotics/webots/tree/master/projects/robots/gctronic/e-puck/worlds/textures](https://github.com/cyberbotics/webots/tree/master/projects/robots/gctronic/e-puck/worlds/textures)

##### Simon Steinmann [Moderator] 08/27/2020 14:34:12
`@saditya` what exactly is not working if I may ask?


you could just draw your own texture, in paint even

##### saditya 08/27/2020 15:33:04
> `@saditya` what exactly is not working if I may ask?

`@Simon Steinmann` So when I calibrate the sensors with my GUI, for this surface it works decently well. As soon as I have a black surface with lines over it, it tends to completely lose track of the lines. Maybe it's because of the reflective surface?
> **Attachment**: [linetrial\_PD85zNiQ.compressed.mp4](https://cdn.discordapp.com/attachments/565154703139405824/748565756089860208/linetrial_PD85zNiQ.compressed.mp4)

##### Simon Steinmann [Moderator] 08/27/2020 15:33:56
[https://cyberbotics.com/doc/reference/distancesensor#infra-red-sensors](https://cyberbotics.com/doc/reference/distancesensor#infra-red-sensors) here is some exact detail. That formula is important to keep in mind

##### saditya 08/27/2020 15:36:16
> [https://cyberbotics.com/doc/reference/distancesensor#infra-red-sensors](https://cyberbotics.com/doc/reference/distancesensor#infra-red-sensors) here is some exact detail. That formula is important to keep in mind

`@Simon Steinmann` Alright I will have a read, this thing works really well with the wooden floor and not with the black surface with the right calibration. Thankyou so much anyway! 🙂

##### Simon Steinmann [Moderator] 08/27/2020 15:36:56
do you have the lines as a different object, or all in the same texture?


you want high contrast between background and line. Making a line red or white, turning roughness and occlusion to 0 will result in a high value,

##### saditya 08/27/2020 15:39:03
> do you have the lines as a different object, or all in the same texture?

`@Simon Steinmann` The lines are .stl file. In the video above I just import it and place it on the surface. I have to draw a lot of curves, so i avoid using paint.

##### Simon Steinmann [Moderator] 08/27/2020 15:39:48
can I see your worldfile? or screenshot of your background material and the line material?

##### saditya 08/27/2020 15:40:42
> can I see your worldfile? or screenshot of your background material and the line material?

`@Simon Steinmann` Can i share it here or how? The world file. I really need to make this working, sorry for a lot of questions.

##### Simon Steinmann [Moderator] 08/27/2020 15:41:17
yeah, just drag n drop

##### saditya 08/27/2020 15:45:46
> yeah, just drag n drop

`@Simon Steinmann` It's a very heavy file apparently.

##### Simon Steinmann [Moderator] 08/27/2020 15:46:01
just the world file


or you use google drive or something

##### Adriaan 08/27/2020 18:17:17
Hi can I ask for some assistance with IprHdm90 arm.

##### Simon Steinmann [Moderator] 08/27/2020 18:17:53
what's your issue?

##### Adriaan 08/27/2020 18:23:25
How do I change the acceleration of the arm between the grab position and the drop position. And can I also change the moving path that the arm takes between the grab and drop position?

##### Simon Steinmann [Moderator] 08/27/2020 18:24:58
are you using a sample world? or your own controller


generally, motors try to reach their set position as quickly as they can within their limits (max velocity, max torque)

##### Adriaan 08/27/2020 18:26:01
I used the sample worlds controller from the IPR factory

##### Simon Steinmann [Moderator] 08/27/2020 18:26:25
to get it faster, you'd have to increase the limits. To get it slower, either reduce the limits or send incremental commands

##### Adriaan 08/27/2020 18:30:23
I have built an assembly between 3 parts base with shaft and lid, but when moving the completed unit to the conveyor the lid is thrown off. Do I set the limit in the PROTO Source file

##### Simon Steinmann [Moderator] 08/27/2020 18:32:15
yes you can set it there. However there is just a torque limit, but that might be the reason


RotationalMotor {

                                          name "right\_gripper"

                                          maxVelocity 2.20894

                                          maxPosition 1.22171

                                          maxTorque 20

                                        }



These you have to change


`@Adriaan` [https://github.com/cyberbotics/webots/blob/master/projects/robots/neuronics/ipr/libraries/ipr/IPR.cpp](https://github.com/cyberbotics/webots/blob/master/projects/robots/neuronics/ipr/libraries/ipr/IPR.cpp)

This is the actual controller, where the execution is defined. As far as I can tell there is no timing there. So raising the maxTorque values should do the trick

##### YCL 08/27/2020 21:38:20
David MansolinoToday at 1:23 AM

Hello, in my simulation, I used position control. And It turned out thant the Position Sensor tab shows the current position is smaller than The RotationalMotor tab shows the target position. Then, I try to change the PID parameter, then the current position is almost the same as the current position. Is this a right direction.


I mean if this is a right solution?


Also, could you please tell me how to get the Energy Consumption of the whole robot. I look up this link. [https://cyberbotics.com/doc/reference/motor#energy-consumption](https://cyberbotics.com/doc/reference/motor#energy-consumption) I uses 18 rotational motors on my robot. Does that mean I need to caculate the energy consumption based on The power consumption for a rotational motor (electrical\_input\_power) is computed according to the following equation:



electrical\_input\_power = output\_torque * consumptionFactor


Thank you!

##### John520 08/28/2020 01:07:40
Hi guys, I successfully conducted simulations in Webots on controlling the trucks to follow a given path. The map I used was imported from the open street map. Now I would like to extend my research to path planning that includes global and local planning. My question is: whether the imported map supports path planning? For example, for global planning, by given a start and a goal position, the map would contain lane information so that the path planning algorithm could find the path. The lane information may include the number of lanes on a road and the directions of the lanes. By the way, I use ROS. I would appreciate your kind advice and help.

##### David Mansolino [Cyberbotics] 08/28/2020 05:54:57
Hi `@John520`, yes sure this is feasible, the worls file includes all the information required to generate a local map, for example the 'Road' PROTO ([https://cyberbotics.com/doc/guide/object-road#road-proto](https://cyberbotics.com/doc/guide/object-road#road-proto)), contains an id o the road, as well as an id of the start and end intersection. it contains also the width of the road, the number of lanes and even the speed limit. Then for intersections, the 'Crossroad' PROTO ([https://cyberbotics.com/doc/guide/object-road#crossroad](https://cyberbotics.com/doc/guide/object-road#crossroad)) contains information about the intersection id, as well as all the connected road IS.


From a Supevisor controller ([https://cyberbotics.com/doc/reference/supervisor](https://cyberbotics.com/doc/reference/supervisor)) you can parse the scene-tree and retrieve all these informations, I have already done this in the past, I will check if I can share some part of my code and let you know.


> David MansolinoToday at 1:23 AM

> Hello, in my simulation, I used position control. And It turned out thant the Position Sensor tab shows the current position is smaller than The RotationalMotor tab shows the target position. Then, I try to change the PID parameter, then the current position is almost the same as the current position. Is this a right direction.

`@YCL` that sounds good indeed, make also sure that the available torque of the motor is high enough.


> Also, could you please tell me how to get the Energy Consumption of the whole robot. I look up this link. [https://cyberbotics.com/doc/reference/motor#energy-consumption](https://cyberbotics.com/doc/reference/motor#energy-consumption) I uses 18 rotational motors on my robot. Does that mean I need to caculate the energy consumption based on The power consumption for a rotational motor (electrical\_input\_power) is computed according to the following equation:

> 

> electrical\_input\_power = output\_torque * consumptionFactor

`@YCL` the Robot node has a battery field (empty by default): [https://cyberbotics.com/doc/reference/robot](https://cyberbotics.com/doc/reference/robot), that you can use to enable energy consumption: [https://cyberbotics.com/doc/reference/robot](https://cyberbotics.com/doc/reference/robot)#field-summary

You can then use this API to retrieve the state of the battery over time: [https://cyberbotics.com/doc/reference/robot#wb\_robot\_battery\_sensor\_enable](https://cyberbotics.com/doc/reference/robot#wb_robot_battery_sensor_enable)

##### Domenico Ardito 08/28/2020 07:28:18
I have a problem with e-puck for Maze Simulation. Following the second online lesson, I added the following instructions to activate the camera:


camera=robot.getCamera("camera")    camera.enable(timeStep),  but the console gave me these informations: INFO: MainSupervisor: Starting controller: python.exe -u "MainSupervisor.py" 

INFO: robot0Controller: Starting controller: python.exe -u "robot0Controller.py" 

INFO: 'robot0Controller' controller exited successfully.

[MainSupervisor] Robot 0 exited a checkpoint

INFO: robot0Controller: Starting controller: python.exe -u "robot0Controller.py" 

[robot0Controller] Warning: "camera" device not found.

[robot0Controller] Traceback (most recent call last):

[robot0Controller]   File "robot0Controller.py", line 23, in <module>

[robot0Controller]     camera.enable(timeStep)

[robot0Controller] AttributeError: 'NoneType' object has no attribute 'enable'

WARNING: Il programma di controllo 'robot0Controller' è terminato con lo stato: 1.

##### David Mansolino [Cyberbotics] 08/28/2020 08:17:58
The robot in the 'maze' simulation is not an e-puck, but a thymio2, this robot doesn't have any camera: [https://www.cyberbotics.com/doc/guide/thymio2](https://www.cyberbotics.com/doc/guide/thymio2)

##### Domenico Ardito 08/28/2020 08:21:58
thanks for your explanation.  I had referred to  the course held in June, that anyway has been referred in the offcial competition


In fact, for  Rescue Maze Release 6 (the last official platform for the September challenge) the proto refers to e-puck, that should include camera
%figure
![Rescue_Maze_Releas_6_proto_e-puck.jpg](https://cdn.discordapp.com/attachments/565154703139405824/748826374680215632/Rescue_Maze_Releas_6_proto_e-puck.jpg)
%end

##### David Mansolino [Cyberbotics] 08/28/2020 08:50:10
I am sorry, but where did you get these files?

This does not reflect the one distributed within Webots ([https://github.com/cyberbotics/webots/tree/master/projects/samples/robotbenchmark/maze\_runner](https://github.com/cyberbotics/webots/tree/master/projects/samples/robotbenchmark/maze_runner)).

##### Domenico Ardito 08/28/2020 08:57:21
from erebus #announcements from Alfred Roberts on Augut 18 he gave us this link for oficial competition : [https://github.com/Shadow149/RescueMaze/releases/tag/v1.2.2](https://github.com/Shadow149/RescueMaze/releases/tag/v1.2.2)

##### David Mansolino [Cyberbotics] 08/28/2020 08:59:48
Ok, I didn't knew about this contest, I just checked the simulation files and it seems the name of the camera is 'colour\_sensor'.


So you should change `camera=robot.getCamera("camera")` into `camera=robot.getCamera("colour_sensor")`.

##### Domenico Ardito 08/28/2020 09:00:53
ok thanks, I'm going to try.

##### David Mansolino [Cyberbotics] 08/28/2020 09:01:15
You're welcome

##### Domenico Ardito 08/28/2020 09:05:17
thanks, it worked! 👍

##### Simon Steinmann [Moderator] 08/28/2020 12:39:40
how do I parse controllerArgs?

##### David Mansolino [Cyberbotics] 08/28/2020 12:40:31
It depends on the language you are using, but in any case the arguments are sent to the controller like any regular program argument.

##### Simon Steinmann [Moderator] 08/28/2020 12:40:44
python


you got an example you can point me to?

##### David Mansolino [Cyberbotics] 08/28/2020 12:41:34
In python, optparse/argparse is a good solution: [https://github.com/cyberbotics/webots/blob/master/projects/default/controllers/sumo\_supervisor/sumo\_supervisor.py#L68-L117](https://github.com/cyberbotics/webots/blob/master/projects/default/controllers/sumo_supervisor/sumo_supervisor.py#L68-L117)

##### Simon Steinmann [Moderator] 08/28/2020 12:41:56
thx

##### David Mansolino [Cyberbotics] 08/28/2020 12:43:09
You're welcome

##### alxy 08/28/2020 14:32:30
`@Simon Steinmann`  I just went through your code, but I am unusre what this line does: ikResults[6] = ikResults[-2] + euler[self.rot\_index]


it sets the angle for the last joint

##### Simon Steinmann [Moderator] 08/28/2020 14:33:09
yes


pull the newest version [https://github.com/cyberbotics/community-projects/pull/12](https://github.com/cyberbotics/community-projects/pull/12)

##### alxy 08/28/2020 14:34:11
yes, but what does the rest mean

##### Simon Steinmann [Moderator] 08/28/2020 14:35:11
so we take the rotation of our desired pose, and the one that we get from applying the ikResult to forwadkinematics (what orientation we would have, executing the ikResults)


we calculate the difference between the two, turn it into an euler angle, and rotate the last joint by that amount


the new version I pushed has many fixes in it, making it applicable to 'all' robots

##### alxy 08/28/2020 14:38:38
need to think about it

##### John520 08/28/2020 14:39:19
> Hi `@John520`, yes sure this is feasible, the worls file includes all the information required to generate a local map, for example the 'Road' PROTO ([https://cyberbotics.com/doc/guide/object-road#road-proto](https://cyberbotics.com/doc/guide/object-road#road-proto)), contains an id o the road, as well as an id of the start and end intersection. it contains also the width of the road, the number of lanes and even the speed limit. Then for intersections, the 'Crossroad' PROTO ([https://cyberbotics.com/doc/guide/object-road#crossroad](https://cyberbotics.com/doc/guide/object-road#crossroad)) contains information about the intersection id, as well as all the connected road IS.

`@David Mansolino` Thank you, David, for your help. I would like to ask a question about simulations of autonomous vehicles. In a simulation, my program would control several vehicles at the same time. To have a realistic simulation, is it possible to add more vehicles or pedestrians to the world and they will be controlled by the Webots simulator (not by my program)?

##### Simon Steinmann [Moderator] 08/28/2020 14:40:10
we can zoom if you want me to explain it

##### alxy 08/28/2020 14:40:15
ah, kk, I missed the part that you are still using the orientation on one axis. So its only the rotation around that axis which is missing

##### Simon Steinmann [Moderator] 08/28/2020 14:40:49
exactly

##### alxy 08/28/2020 14:41:11
I was wondering how you fix the position and oriebntation by just setting the last joint

##### Simon Steinmann [Moderator] 08/28/2020 14:41:14
this is where the tiny error sometimes comes from

##### alxy 08/28/2020 14:41:23
because the behavior I was seeing couldnt be fixed by that 😄

##### Simon Steinmann [Moderator] 08/28/2020 14:41:40
when the axis are not perfectly aligned

##### alxy 08/28/2020 14:41:59
may be something numeric

##### David Mansolino [Cyberbotics] 08/28/2020 14:42:33
> `@David Mansolino` Thank you, David, for your help. I would like to ask a question about simulations of autonomous vehicles. In a simulation, my program would control several vehicles at the same time. To have a realistic simulation, is it possible to add more vehicles or pedestrians to the world and they will be controlled by the Webots simulator (not by my program)?

`@John520` yes, you probably want to use the SUMO interface: 

  - [https://cyberbotics.com/doc/automobile/sumo-interface](https://cyberbotics.com/doc/automobile/sumo-interface)

  - [https://cyberbotics.com/doc/automobile/sumo-interface-example](https://cyberbotics.com/doc/automobile/sumo-interface-example)

  - [https://cyberbotics.com/doc/automobile/village-center](https://cyberbotics.com/doc/automobile/village-center)

##### Simon Steinmann [Moderator] 08/28/2020 14:42:38
IK solving is very complex. ikpy takes an easy method. And this is an 'easy' fix for its shortcomings


ikpy is super easy to implement, which makes it great. but it doesnt even come close to MoveIt with proper solvers


that requires ROS though, and is not out for noetic, so you need python2, and ROS melodic (ubuntu 18.04).... yeah. ugly

##### alxy 08/28/2020 14:45:49
[https://github.com/cyberbotics/community-projects/pull/12/files#diff-e8f64de93979acb8a20fffa3ac330715R150](https://github.com/cyberbotics/community-projects/pull/12/files#diff-e8f64de93979acb8a20fffa3ac330715R150) I think that coild be simplified to target\_rot[:,self.rot\_index]

##### Simon Steinmann [Moderator] 08/28/2020 14:47:50
I think you're right

##### John520 08/28/2020 14:53:36
Thank you `@David Mansolino`  very much. The SUMO interface would be really useful. I will look into it. 🙏

##### alxy 08/28/2020 14:57:01
lol, was wondering why my arm wasnt moving at all. Turns out I was still using the library with my changes which actually made the whole process break 😄

##### Simon Steinmann [Moderator] 08/28/2020 14:57:43
use my latest stuff


and I recommend leaving the ik\_module and importing it


if it doesnt work, we have to change it anyways

##### alxy 08/28/2020 14:58:56
yeah I just ned some major rework, maybe I can do it this weekend


the problem is I have the gripper attached as well


not sure if you lib handles that well with the addtional motors

##### Simon Steinmann [Moderator] 08/28/2020 14:59:32
well let me know 😉


perhaps we have to add a motor-list we parse


and it only uses those joints

##### alxy 08/28/2020 15:00:27
but I should be able to just override the armChain

##### Simon Steinmann [Moderator] 08/28/2020 15:00:35
I recommend splitting your code into modules for the different areas. Like one for IK, one for controlling the gripper etc


much easier to reuse code

##### alxy 08/28/2020 15:01:07
The gripper controller is your module already, so that is extracted


but you are right of course

##### Cloud Salazar 08/28/2020 20:53:36
Hello there! 

I'm trying to integrate an arduino with a simulation in WeBots. Is there a way to send data from arduino to WeBots and vise versa?


I want to use real life switches and sensors connected to the arduino to control the robot in simulation. One example would be for the robot to keep moving forward in the simulation until an obstacle is detected by the arduino as I wave my hand in front of it.

##### John520 08/29/2020 05:00:25
Hi `@David Mansolino` , I am trying to convert an osm map from open street map to wbt map by following your tutorial. But I am having this issue:



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/749131344382263336/unknown.png)
%end


Could you advise me on how to solve this problem? Thank you very much.


Please ignore the above picture. Should be this one:



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/749132271688220672/unknown.png)
%end

##### Cloud Salazar 08/29/2020 08:27:57
anyone?

##### Simon Steinmann [Moderator] 08/29/2020 08:54:24
`@Cloud Salazar` wevits natively supports c, cpp, python, Java. Use any of those to communicate with your arduino and webots at the same time


Using external controllers can be useful. Check the Dokumentation for that


`@John520` the error says the index is out of range, you could insert some print function before that line to check the length of those lists. Perhaps there is a check missing or you import something empty

##### Cloud Salazar 08/29/2020 09:01:29
`@Simon Steinmann` Could you please elaborate on how to go by it? I already had an idea that I'll need to use external controllers, but I have no idea how. Can you suggest a way I could go by achieving this?

##### Simon Steinmann [Moderator] 08/29/2020 13:57:03
[https://cyberbotics.com/doc/guide/running-extern-robot-controllers](https://cyberbotics.com/doc/guide/running-extern-robot-controllers)

##### adaptive 08/30/2020 16:10:16
hello, i want to implement an image-based line-following algorithm in Matlab (according to the curriculum).. since I have my image stored in "  rgb = wb\_camera\_get\_image(camera);"  I have problems getting the RGB-Code from third column extracted.. as in [https://cyberbotics.com/doc/reference/camera?tab-language=matlab#wb\_camera\_get\_image](https://cyberbotics.com/doc/reference/camera?tab-language=matlab#wb_camera_get_image) mentioned, first column in rgb should be width, second the height, and third rgb

##### alxy 08/30/2020 16:24:41
`@adaptive` you mention the wb\_camera\_get\_height (notive the height at the end). I am not sure that is the correct function

##### adaptive 08/30/2020 16:25:19
I think one problem is that my "camera\_width" (640) and "camera\_height" (480) -Node in epuck is not present in the simulation..   disp(wb\_camera\_get\_width(camera))  shows "40" instead of 640..


> `@adaptive` you mention the wb\_camera\_get\_height (notive the height at the end). I am not sure that is the correct function

`@alxy` was an Typo, thanks

##### alxy 08/30/2020 16:27:27
yeah that is weird. Are you sure you are referencing the correct camera node, if there are multiple

##### Simon Steinmann [Moderator] 08/30/2020 16:29:04
what exactly is it that you want to do?


there is multiple ways to grab an image


what information do you actually need?

##### adaptive 08/30/2020 16:29:56
I want to extract the RGB-Values for some range from my image

##### Simon Steinmann [Moderator] 08/30/2020 16:30:27
Note [MATLAB]: The wb\_camera\_get\_image function returns a 3-dimensional array of uint(8). The first two dimensions of the array are the width and the height of camera's image, the third being the RGB code: 1 for red, 2 for blue and 3 for green. The wb\_camera\_get\_range\_image function returns a 2-dimensional array of float('single'). The dimensions of the array are the width and the length of camera's image and the float values are the metric distance values deduced from the OpenGL z-buffer.

##### adaptive 08/30/2020 16:30:42
yes i read that already


but the indexing is wrong because of "wb\_camera\_get\_height" is equal to 1


I set my camera\_width, height in the epuck-node to 640x480

##### Simon Steinmann [Moderator] 08/30/2020 16:31:41
what is the width?


I bet that is 480*640

##### adaptive 08/30/2020 16:31:58
but reading out the height/width is showing other values

##### Simon Steinmann [Moderator] 08/30/2020 16:32:09
what is the value for width?

##### adaptive 08/30/2020 16:32:15
640

##### Simon Steinmann [Moderator] 08/30/2020 16:32:27
which sensor are you using?

##### adaptive 08/30/2020 16:32:38
epuck internal camera


[https://bpa.st/E4ZQ](https://bpa.st/E4ZQ) thats my code


pretty basic

##### Simon Steinmann [Moderator] 08/30/2020 16:34:14
can I see your world?

##### adaptive 08/30/2020 16:35:41
[https://www.pastefile.com/mty9mh](https://www.pastefile.com/mty9mh)

##### Simon Steinmann [Moderator] 08/30/2020 16:35:43
because in the proto model, you can define the camera depening on what you put in the properties

##### adaptive 08/30/2020 16:36:28
its a copy of the beginner\_linear\_camera world from the curriculum

##### Simon Steinmann [Moderator] 08/30/2020 16:41:42
and the height realls is 1?


and what curriculum?

##### adaptive 08/30/2020 16:42:37
[https://upload.wikimedia.org/wikipedia/commons/3/3d/Cyberbotics%27\_Robot\_Curriculum.pdf](https://upload.wikimedia.org/wikipedia/commons/3/3d/Cyberbotics%27_Robot_Curriculum.pdf) Page 48


yes

##### Simon Steinmann [Moderator] 08/30/2020 16:44:02
where can you download the world files? dont wanna search through the manual

##### adaptive 08/30/2020 16:44:49
File -> Open Sample World -> samples -> curriculum -> beginner\_linear\_camera.wbt

##### Simon Steinmann [Moderator] 08/30/2020 16:44:57
ahh found it 🙂


this has a height of 1 set as default

##### adaptive 08/30/2020 16:46:07
> Note [MATLAB]: The wb\_camera\_get\_image function returns a 3-dimensional array of uint(8). The first two dimensions of the array are the width and the height of camera's image, the third being the RGB code: 1 for red, 2 for blue and 3 for green. The wb\_camera\_get\_range\_image function returns a 2-dimensional array of float('single'). The dimensions of the array are the width and the length of camera's image and the float values are the metric distance values deduced from the OpenGL z-buffer.

`@Simon Steinmann` the sourcecode example in "[https://cyberbotics.com/doc/reference/camera?tab-language=matlab#wb\_camera\_get\_image](https://cyberbotics.com/doc/reference/camera?tab-language=matlab#wb_camera_get_image)" for Matlab is not running anyway.. some typos and keywords-errors

##### Simon Steinmann [Moderator] 08/30/2020 16:46:49
where exaclty do you get an error?

##### adaptive 08/30/2020 16:46:50
> ahh found it 🙂

`@Simon Steinmann` yes, in the node of epuck was an 1. I wanted to increase that to get access to the matrix

##### Simon Steinmann [Moderator] 08/30/2020 16:47:19
for line following, that just creates much more data

##### adaptive 08/30/2020 16:47:40
> where exaclty do you get an error?

`@Simon Steinmann` image() is an function in matlab.. no good idea to call an variable like that.. typo is "height" in the red\_middle\_point var init.


> for line following, that just creates much more data

`@Simon Steinmann` hm ok.. i dont know. Im discovering^^

##### Simon Steinmann [Moderator] 08/30/2020 16:48:23
ohh yeah, there is a type!


I would not change the default values

##### adaptive 08/30/2020 16:48:57
that was the first idea came to my mind how I would set up the algorithm.. but anyway.. how do i access the rgb values for the matrix?

##### Simon Steinmann [Moderator] 08/30/2020 16:49:27
image = wb\_camera\_get\_image(camera);


image(width, height, rgb\_index)


so (20, 1, 1) would give you the red value at pixel 20 in row 1

##### alxy 08/30/2020 16:52:30
amazing, this pdf is 11 years old and the apis didnt change since then so it ca still be used?

##### Simon Steinmann [Moderator] 08/30/2020 16:52:31
if you're just following a line, it makes sense to just use one row and compare the left and right half of the row


Webots devs generally follow the rule, that updates can't break old stuff

##### alxy 08/30/2020 16:53:49
They seem to make a very good job 😄

##### Simon Steinmann [Moderator] 08/30/2020 16:54:08
I'm actually quite impressed too

##### adaptive 08/30/2020 16:54:18
> if you're just following a line, it makes sense to just use one row and compare the left and right half of the row

`@Simon Steinmann` do you gut some lectures for so simple techniques?

##### alxy 08/30/2020 16:54:32
I ususally do web development and there is no chance you can run a 3 year old application without any breaking changes

##### Simon Steinmann [Moderator] 08/30/2020 16:55:06
I studied aerospace engineering, just started a year ago with python, ROS, robotics, AI and all that


So I just learned by doing and reading tutorials etc.

##### adaptive 08/30/2020 16:55:56
nice! I applied to an Robotics Master and want to practice a little bit before it starts^^

##### Simon Steinmann [Moderator] 08/30/2020 16:56:18
very good! This is certainly good practice

##### adaptive 08/30/2020 16:56:47
hopefully

##### Simon Steinmann [Moderator] 08/30/2020 16:57:21
I'm not sure about the use of mathlab, but it might very well be, what your university may use


Generally, ROS, Python and cpp is where it's at

##### adaptive 08/30/2020 16:57:48
I already asked an PhD.. faculty uses Matlab with Ros

##### Simon Steinmann [Moderator] 08/30/2020 16:58:04
then yes, definitely get into those 2

##### adaptive 08/30/2020 16:58:10
so i thought I can practice my Matlab skills (as you can see, I have to practice more :D)

##### Simon Steinmann [Moderator] 08/30/2020 16:58:16
ROS is great. Takes a while to get used to though


but you only learn it by actually doing and using it

##### adaptive 08/30/2020 16:59:12
yes sure.. i never did anything in ROS but I think of it like RTOS (which i worked with).. its just an OS providing handles and architecture to program an system

##### Simon Steinmann [Moderator] 08/30/2020 16:59:53
ROS is not real time, ROS2 is though


ROS is not a OS in the classical sense though


it's more of a middleware


think of it as a communication web, where you have individual nodes that run code and talk to one another over ROS-topics (messages)

##### adaptive 08/30/2020 17:01:23
like networked agents?

##### Simon Steinmann [Moderator] 08/30/2020 17:02:04
I guess. But of course there is more to it. And it includes many tools, that make controlling robots relatively easy


watch some youtube videos on it :p

##### adaptive 08/30/2020 17:02:24
Yes sure.. im wondering which ROS they will teach

##### Simon Steinmann [Moderator] 08/30/2020 17:02:49
and if you're serious about learning ROS, I recommend this: [https://www.theconstructsim.com/](https://www.theconstructsim.com/)


not free, but how I learned ROS, after trying to learn it on my own, using online tutorials for 3 month


100% can recommend

##### adaptive 08/30/2020 17:03:19
> watch some youtube videos on it :p

`@Simon Steinmann` I will! But first of all i want to get used to image processing and kinematics.. without knowledge about manipulating robots.. ROS dont help^^


> 100% can recommend

`@Simon Steinmann` besides study?


how much time did you spend on the course?

##### Simon Steinmann [Moderator] 08/30/2020 17:04:21
If you do it full time, then you can really get a good grasp and knowledge about ROS in one month. 3 weeks if you're fast

##### alxy 08/30/2020 17:04:40
Hoe do you like MATLAB programming? I mean its a quite impressive sofware in terms of toolboxes and algorithms included, but I really dont like this M language

##### Simon Steinmann [Moderator] 08/30/2020 17:05:04
I never used mathlab much. I like python 🙂

##### adaptive 08/30/2020 17:05:26
> If you do it full time, then you can really get a good grasp and knowledge about ROS in one month. 3 weeks if you're fast

`@Simon Steinmann` ok!

##### Simon Steinmann [Moderator] 08/30/2020 17:05:29
but mathlab is big at universities. Although most AI researchers use Python


And ROS is natively python or c++


not sure how mathlab handles that

##### alxy 08/30/2020 17:05:58
yeah foe signal processing and modling of physical systems there is no way around matlab

##### adaptive 08/30/2020 17:06:19
> Hoe do you like MATLAB programming? I mean its a quite impressive sofware in terms of toolboxes and algorithms included, but I really dont like this M language

`@alxy` Its quite ok. I asked if Python were OK, too but some Practice are using some toolbox-specific functions for control-systems (like MPC, etc)


that isnt implemented in Python libs yet.. sure you can program everything on your own, but besides courses you dont have time for

##### alxy 08/30/2020 17:07:59
at which university did you apply if I may ask?

##### Simon Steinmann [Moderator] 08/30/2020 17:08:05
better ask your profs or engineers at uni, what you could learn to improve and practice. I know python and ROS 😄

##### adaptive 08/30/2020 17:08:35
> at which university did you apply if I may ask?

`@alxy` in Eastgermany

##### Simon Steinmann [Moderator] 08/30/2020 17:09:03
lol we are Germans too :p

##### adaptive 08/30/2020 17:09:29
Saw that on your name^^

##### Simon Steinmann [Moderator] 08/30/2020 17:12:05
little tipp: with ctrl + F9  you can show the camera's field of view

##### adaptive 08/30/2020 17:14:51
yes thats useful!

##### David Mansolino [Cyberbotics] 08/31/2020 06:01:25
> I want to use real life switches and sensors connected to the arduino to control the robot in simulation. One example would be for the robot to keep moving forward in the simulation until an obstacle is detected by the arduino as I wave my hand in front of it.

`@Cloud Salazar` you can use the serial port of the arduino to communicate between your controller and the arduino connected through USB to the computer.


You don't really need to use extern controller (but you can if you want).


`@John520`, please make sure to use the latest version of the importer (i.e. from the latest version of Webots), if this still doesn't solve the issue, please report this here (including the OSM file): [https://github.com/cyberbotics/webots/issues/new?template=bug\_report.md](https://github.com/cyberbotics/webots/issues/new?template=bug_report.md)

##### Kamil Kaya 08/31/2020 08:45:39
is there any easy way to find stable pid control coefficients?

##### David Mansolino [Cyberbotics] 08/31/2020 08:46:10
Here is an example: [https://cyberbotics.com/doc/guide/samples-howto#ziegler\_nichols-wbt](https://cyberbotics.com/doc/guide/samples-howto#ziegler_nichols-wbt)

##### Kamil Kaya 08/31/2020 11:26:16
> Here is an example: [https://cyberbotics.com/doc/guide/samples-howto#ziegler\_nichols-wbt](https://cyberbotics.com/doc/guide/samples-howto#ziegler_nichols-wbt)

`@David Mansolino` That is useful. But can I use it for stewart platform in order to balance the ball?


Also Do I really need to use position sensors while using PID control?

##### David Mansolino [Cyberbotics] 08/31/2020 11:48:07
> `@David Mansolino` That is useful. But can I use it for stewart platform in order to balance the ball?

`@Kamil Kaya` yes, in that case You probably need to monitor (Supervisors API, overhead camera, etc.) the position of the ball for the calibration.


> Also Do I really need to use position sensors while using PID control?

`@Kamil Kaya` no, if you are not interested in the position, the Webots internal PID will do the job for you.

## September

##### Kamil Kaya 09/01/2020 07:51:17
`@David Mansolino` thank you.

##### David Mansolino [Cyberbotics] 09/01/2020 07:59:20
You're welcome

##### dimple.bhuta 09/01/2020 10:12:24
Hello there are few errors that I am getting and I am not sure what is causing it


ERROR: '/home/dimpleb/static\_ws/src/vehicle\_data/protos/abstract/Car.proto':16:20: error: Type mismatch between 'controllerArgs' PROTO parameter and field 'controllerArgs'.

ERROR: '/home/dimpleb/static\_ws/src/vehicle\_data/protos/tesla/TeslaModel3.proto':17:24: error: Type mismatch between 'controllerArgs' PROTO parameter and field 'controllerArgs'.

ERROR: '/home/dimpleb/static\_ws/src/vehicle\_data/protos/abstract/Car.proto':16:20: error: Type mismatch between 'controllerArgs' PROTO parameter and field 'controllerArgs'.

ERROR: '/home/dimpleb/static\_ws/src/vehicle\_data/protos/bmw/BmwX5.proto':18:22: error: Type mismatch between 'controllerArgs' PROTO parameter and field 'controllerArgs'.

WARNING: TeslaModel3 (PROTO): The robot window library has not been found.

WARNING: BmwX5 (PROTO): The robot window library has not been found.


Do I need to update files as all of this particular code was working fine few months back

##### Olivier Michel [Cyberbotics] 09/01/2020 10:13:57
Yes, the `controllerArgs` data type changed from `SFString` to `MFString`, and this is why you are getting these warnings.


You should copy the new proto files from the new version of Webots in your project.

##### dimple.bhuta 09/01/2020 10:15:16
how do i do this ?


do i need to update webots?

##### Olivier Michel [Cyberbotics] 09/01/2020 10:15:45
e.g., `Car.proto`, `TeslaModel3.proto` and `BmwX5.proto`.

##### dimple.bhuta 09/01/2020 10:15:46
and than copy the changed files

##### Olivier Michel [Cyberbotics] 09/01/2020 10:15:55
Yes, exactly.

##### dimple.bhuta 09/01/2020 11:40:54
i still get all these warning


WARNING: TeslaModel3 (PROTO): Robot.controllerArgs data type changed from SFString to MFString in Webots R2020b. Splitting arguments at space boundaries.

WARNING: TeslaModel3 (PROTO): The robot window library has not been found.

WARNING: BmwX5 (PROTO): The robot window library has not been found.

INFO: ros\_automobile: Starting controller: /home/dimpleb/static\_ws/src/vehicle\_data/controllers/ros\_automobile/ros\_automobile --name=agent\_0 --clock --use-sim-time

INFO: void: Starting controller: /usr/local/webots/resources/projects/controllers/void/void

WARNING: ros\_automobile: The process crashed some time after starting successfully.

[ INFO] [1598960383.975866551]: Robot's unique name is agent\_0.

[ INFO] [1598960383.980380803]: The controller is now connected to the ROS master.

WARNING: 'ros\_automobile' controller crashed.


I downloaded the new ros\_automobile controller


Is there any other changes that I am suppose to make


I am adding following arguments in the wbt file for vehicle


name "agent\_0"

  controller "ros\_automobile"

  controllerArgs "--name=agent\_0 --clock --use-sim-time"


does the controller Args parameter change for MFString

##### Olivier Michel [Cyberbotics] 09/01/2020 11:49:52
Yes, in Webots R2020b, you should write `controllerArgs [ "--name=agent_0" "--clock" "--use-sim-time"]` instead.

##### dimple.bhuta 09/01/2020 11:51:51
thank you for your reply


the ros\_automobile controller is still crashing


WARNING: TeslaModel3 (PROTO): The robot window library has not been found.

WARNING: BmwX5 (PROTO): The robot window library has not been found.

INFO: ros\_automobile: Starting controller: /home/dimpleb/static\_ws/src/vehicle\_data/controllers/ros\_automobile/ros\_automobile --name=agent\_0 --clock --use-sim-time

INFO: void: Starting controller: /usr/local/webots/resources/projects/controllers/void/void

WARNING: ros\_automobile: The process crashed some time after starting successfully.

[ INFO] [1598961088.255928425]: Robot's unique name is agent\_0.

[ INFO] [1598961088.261187690]: The controller is now connected to the ROS master.

WARNING: 'ros\_automobile' controller crashed.


the problem is robot window library. I am not really sure what it is being used for

##### Olivier Michel [Cyberbotics] 09/01/2020 11:53:59
Does your local project have a plugins folder which contains copies of robot windows?


If so, you should copy the original robot windows from Webots R2020b.

##### dimple.bhuta 09/01/2020 11:54:31
ok yeah I will look at it thank you


It worked thank you sir


i had one other question,  we used rosparam set use\_sim\_time true


to sync ros timing and used it for our controller that controls the vehicle using ros\_automobile with these arguments


however it not working well


Is use\_sim\_time flag no longer valid? what is the alternative to it


i have downloaded the recent webots\_ros interface


[https://github.com/cyberbotics/webots\_ros](https://github.com/cyberbotics/webots_ros)

##### David Mansolino [Cyberbotics] 09/01/2020 13:31:15
> Is use\_sim\_time flag no longer valid? what is the alternative to it

`@dimple.bhuta` it is still available as far as I know, what is not working well?

##### dimple.bhuta 09/01/2020 13:31:40
my controller is no longer working well with the ros\_automobile controller


i am trying to figure out what could have gone wrong

##### David Mansolino [Cyberbotics] 09/01/2020 13:32:32
You should probably try minimizing your controller to check which part is causing the issue.

##### dimple.bhuta 09/01/2020 13:32:35
the topic /model\_name is publishing well


ok thank you

##### David Mansolino [Cyberbotics] 09/01/2020 13:32:53
You're welcome

##### Simon Steinmann [Moderator] 09/01/2020 18:13:56
what could cause these collision points? They dont seem to touch in any way
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/750418179175612456/unknown.png)
%end

##### alxy 09/01/2020 18:52:00
`@Simon Steinmann` Doing robotics all day long? 😄

##### Simon Steinmann [Moderator] 09/01/2020 18:52:16
yes ^^

##### Olivier Michel [Cyberbotics] 09/02/2020 05:45:09
Difficult to say from this screenshot... Did you enabled `Robot.selfCollision`?

##### Simon Steinmann [Moderator] 09/02/2020 07:38:42
yes I did


I enabled the contact point rendering if you look closely

##### Olivier Michel [Cyberbotics] 09/02/2020 07:39:50
If you disable `Robot.selfCollision`, do you get the same collisions?

##### Simon Steinmann [Moderator] 09/02/2020 07:40:09
no, then it's fine


But it should be possible to run it with selfCollision on

##### Olivier Michel [Cyberbotics] 09/02/2020 07:40:34
Sure.


selfCollision will enable collision only for non-consecutive joints.


It could be that some non-consecutive joints are too close to each other, causing these collisions.

##### Simon Steinmann [Moderator] 09/02/2020 07:42:16
but as you can see, they aren't touching each other even remotely


it's also only in certain positions, like this. not all the time. But this position should be valid

##### Olivier Michel [Cyberbotics] 09/02/2020 07:43:13
What primitives are you using for bounding objects? Cylinders or meshes?

##### Simon Steinmann [Moderator] 09/02/2020 07:43:49
using the official ur10e model. So it is using your cylinder + capsule bounding objects

##### Olivier Michel [Cyberbotics] 09/02/2020 07:44:13
Okay... And which version of Webots are you using?

##### Simon Steinmann [Moderator] 09/02/2020 07:44:23
2020b

##### Olivier Michel [Cyberbotics] 09/02/2020 07:45:12
OK, so that looks like a bug... Can you open an issue about it, including the exact procedure allowing us to reproduce the collision problem?

##### Simon Steinmann [Moderator] 09/02/2020 07:45:39
sure will do. But got a meeting first

##### Olivier Michel [Cyberbotics] 09/02/2020 07:46:18
And also, are you sure these two cylinders are not colliding with some other object (instead of colliding with each other)?

##### Simon Steinmann [Moderator] 09/02/2020 07:46:38
yes, i'm sure


Buttery smooth velocity control through ikfast. IK calculation EVERY single timestep, and still runs 40x realtime factor
> **Attachment**: [ur10e\_ik\_velocity\_control.mp4](https://cdn.discordapp.com/attachments/565154703139405824/750623450208665600/ur10e_ik_velocity_control.mp4)

##### saditya 09/02/2020 12:03:38
How can I have image/texture only one face of this solid? I need a goal type image on the face towards us.
%figure
![Selection_056.png](https://cdn.discordapp.com/attachments/565154703139405824/750687379869663332/Selection_056.png)
%end

##### David Mansolino [Cyberbotics] 09/02/2020 12:04:15
The simplest solution is to add a slightly offseted plane shape.


(but of course other solutions exists)

##### saditya 09/02/2020 12:07:22
> The simplest solution is to add a slightly offseted plane shape.

`@David Mansolino` How do you add the offset?

##### David Mansolino [Cyberbotics] 09/02/2020 12:07:54
Simply put it in Transform node.

##### saditya 09/02/2020 12:59:37
Also how could I simulate this? The gates and the blade are separate solids!
%figure
![Selection_057.png](https://cdn.discordapp.com/attachments/565154703139405824/750701467496611910/Selection_057.png)
%end

##### Simon Steinmann [Moderator] 09/02/2020 13:00:06
are you building a battlebot? 😮

##### saditya 09/02/2020 13:01:29
> are 

> are you building a battlebot? 😮

> `@Simon Steinmann` you building a battlebot? 😮

`@Simon Steinmann` Haha, no. Far away from that. We have this event every year. And a lot of obstacles are too comlpex

##### Simon Steinmann [Moderator] 09/02/2020 13:02:01
ohhh... and no i'm not... but I fantasized about it a lot 😄


very expensive though

##### saditya 09/02/2020 13:03:35
> ohhh... and no i'm not... but I fantasized about it a lot 😄

`@Simon Steinmann` Probably a lot of fun to play around it. But we students aren't allowed to play around with expensive robots.


> Also how could I simulate this? The gates and the blade are separate solids!

`@saditya` Anyone who could guide a bit?

##### Stefania Pedrazzi [Cyberbotics] 09/02/2020 13:48:31
> `@saditya` Also how could I simulate this? The gates and the blade are separate solids!

You can model and simulate them as separate solids in Webots as well.

the blade should rotate? Then add a joint as the parent of the blade solid.

##### saditya 09/02/2020 14:01:48
> You can model and simulate them as separate solids in Webots as well.

> the blade should rotate? Then add a joint as the parent of the blade solid.

`@Stefania Pedrazzi` Yeah only the blade should rotate


> You can model and simulate them as separate solids in Webots as well.

> the blade should rotate? Then add a joint as the parent of the blade solid.

`@Stefania Pedrazzi` Is this the right way?
%figure
![Selection_058.png](https://cdn.discordapp.com/attachments/565154703139405824/750718070724755537/Selection_058.png)
%end

##### Stefania Pedrazzi [Cyberbotics] 09/02/2020 14:11:14
You have to add the blade Solid in the joint `endPoint` field if you want to make it move.

Please have a look at our tutorials to better understand how to build models using joints:

[https://www.cyberbotics.com/doc/guide/tutorial-6-4-wheels-robot](https://www.cyberbotics.com/doc/guide/tutorial-6-4-wheels-robot)

The same structure applies also for obstacles and not only for robots

##### Dendrik Rendar 09/02/2020 18:59:24
Hi All, I'm having trouble importing a VRML2.0 file into my simulation. Its a fairly large (120Mb) file of a CNC machine tool, and I am getting this error several times when it imports: `ERROR: '~/Desktop/Haas Lathe ST10-15_1.wrl':3166555:1: error: Skipped unknown 'Separator' node or PROTO.` Any help would be much appreciated!


I guess I could also try the 2020b developer version as well, I just wanted to see if it was something dumb I was doing first 😄

##### Simon Steinmann [Moderator] 09/02/2020 20:58:19
As the Error says, there is a 'Separator' node in there, that webots doesnt know what it is. You might wanna edit the file and remove it

##### dimple.bhuta 09/03/2020 12:30:19
Hello,

I need help regarding what to look into for debugging following the webots update

Before the update: [https://youtu.be/Wdj-BNEZcpc](https://youtu.be/Wdj-BNEZcpc)

After the update: [https://youtu.be/oFaf4fxlMnc](https://youtu.be/oFaf4fxlMnc)



We use ros\_automobile controller in webots and we have PID controller and reference trajectory planner that outputs time, position and orientation for a vehicle, I am not very sure what changed that causing vehicle to go beyound the stop point. I will really appreciate any help. Thank you.


the time\_step in the new update I am not sure whether it is causing a problem


Also the north direction is replaced


northDirection  0 0 1

##### Stefania Pedrazzi [Cyberbotics] 09/03/2020 12:44:30
what did you update?

##### dimple.bhuta 09/03/2020 12:44:32
i mean its no longer valid


so what to use instead of this


I had a chat they before yesterday


and there is a change ros\_automobile


within webots


I am asking about that

##### Stefania Pedrazzi [Cyberbotics] 09/03/2020 12:46:48
if you are using the latest webots\_ros packages, then you should probably also upgrade Webots to the latest version R2020b rev1


northDirection field has been removed in Webots R2020b

##### dimple.bhuta 09/03/2020 12:52:50
ok i will try that


so the northDirection is it not relevant anymore?

##### Stefania Pedrazzi [Cyberbotics] 09/03/2020 12:54:52
no, in R2020b it has been replaced by the `WorldInfo.coordinateSystem` field. You should just check this field is correctly set.


[https://www.cyberbotics.com/doc/reference/worldinfo](https://www.cyberbotics.com/doc/reference/worldinfo)

##### dimple.bhuta 09/03/2020 13:01:09
ok thank you

##### Stefania Pedrazzi [Cyberbotics] 09/03/2020 13:02:06
you're welcome

##### culurciello 09/03/2020 16:45:55
hi guys does any of you have a model of a lathe where you can insert a rod into?

##### dimple.bhuta 09/04/2020 05:33:03
`@Stefania Pedrazzi` thank you by installing the lastest version of webots and making some modifications. I am able to reproduce the controller/ velocity planner properly.


However I have one warning (its not affecting in anyway but just for understanding)



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/751314340740857856/unknown.png)
%end


WARNING: EgoInterface (PROTO): Robot.controllerArgs data type changed from SFString to MFString in Webots R2020b. Splitting arguments at space boundaries.


This is the warning


and following is the proto file that I have written


VRML\_SIM R2020a utf8

\# license: Copyright Cyberbotics Ltd. Licensed for use only with Webots.

\# license url: [https://cyberbotics.com/webots\_assets\_license](https://cyberbotics.com/webots_assets_license)

\# tags: static

\# documentation url: [https://www.cyberbotics.com/doc/automobile/sumo-interface](https://www.cyberbotics.com/doc/automobile/sumo-interface)

\# Supervisor interfacing SUMO with Webots



PROTO EgoInterface [

  field SFString  name                  "ego interface"

  field SFBool    enableEgo             TRUE

  field MFNode    children              []

]

{

  %{

    -- tracks check

    local arguments = ""

    if fields.enableEgo.value == true then

      arguments = arguments .. "--no-enableEgo "

    end

  }%



  Robot {

    name IS name

    model "Ego vehicle"

    controller "ego\_vehicle"

    controllerArgs %{= '"' .. arguments ..'"' }%

    supervisor TRUE

    synchronization IS synchronization

    children [

      Group {

        children IS children

      }

    ]

  }



}


What should I change to get rid of this warning

##### David Mansolino [Cyberbotics] 09/04/2020 06:00:38
> hi guys does any of you have a model of a lathe where you can insert a rod into?

`@culurciello` unfortunately we don't have it, but you can of course create your own model


`@dimple.bhuta`, the 'controllerArgs' field is now a MFString (multiple string field), you should therefore change your PROTO like this to avoid this warning (untested):

```
VRML_SIM R2020b utf8
# license: Copyright Cyberbotics Ltd. Licensed for use only with Webots.
# license url: https://cyberbotics.com/webots_assets_license
# tags: static
# documentation url: https://www.cyberbotics.com/doc/automobile/sumo-interface
# Supervisor interfacing SUMO with Webots

PROTO EgoInterface [
  field SFString  name                  "ego interface"
  field SFBool    enableEgo             TRUE
  field MFNode    children              []
]
{
  %{
    local arguments = {}
    if fields.enableEgo.value == true then
      table.insert(arguments, "--no-enableEgo")
    end
  }%

  Robot {
    name IS name
    model "Ego vehicle"
    controller "ego_vehicle"
    controllerArgs [
      %{ for index, value in ipairs(arguments) do }%
      %{= '"' .. value .. '"\n' }%
      %{ end }%
    ]
    supervisor TRUE
    synchronization IS synchronization
    children [
      Group {
        children IS children
      }
    ]
  }
}
```

##### dimple.bhuta 09/04/2020 06:25:56
Thank you it works

##### David Mansolino [Cyberbotics] 09/04/2020 06:29:16
You're welcome

##### saditya 09/04/2020 07:20:28
Is the height of the base box or the joint position that the base comes out of the solid?
> **Attachment**: [seesawfinal.mp4](https://cdn.discordapp.com/attachments/565154703139405824/751340893767860294/seesawfinal.mp4)

##### Olivier Michel [Cyberbotics] 09/04/2020 07:25:55
You should set a vertical offset to the joint to avoid having the box appearing on the seesaw. Also, the base box would look better if created with a composite object including a horizontal cylinder on the top of the box.

##### saditya 09/04/2020 07:27:13
> You should set a vertical offset to the joint to avoid having the box appearing on the seesaw. Also, the base box would look better if created with a composite object including a horizontal cylinder on the top of the box.

`@Olivier Michel` Vertical offset how?


> You should set a vertical offset to the joint to avoid having the box appearing on the seesaw. Also, the base box would look better if created with a composite object including a horizontal cylinder on the top of the box.

`@Olivier Michel` That's how it is right now. What about the horizontal cylinder thing you mentioned?
%figure
![Selection_059.png](https://cdn.discordapp.com/attachments/565154703139405824/751346313093709864/Selection_059.png)
%end

##### Olivier Michel [Cyberbotics] 09/04/2020 07:42:37
It's a matter of moving the anchor up.


The horizontal cylinder is just for cosmetics.

##### saditya 09/04/2020 08:01:45
> It's a matter of moving the anchor up.

`@Olivier Michel` Alright Thanks! 🙂

##### Bkarso 09/04/2020 09:44:58
hello,I use webots with ros,when I run the example(roslaunch webots\_ros pioneer3at.launch),it run success,but when I rosrun rviz,there are some problem (the transform between laser and odom ).please tell me how can i do?

##### David Mansolino [Cyberbotics] 09/04/2020 09:46:37
Did you follow the instruction in [http://wiki.ros.org/webots\_ros/Tutorials/Sample%20Simulations#Simulation\_Pionneer\_3\_AT](http://wiki.ros.org/webots_ros/Tutorials/Sample%20Simulations#Simulation_Pionneer_3_AT) ?

##### Bkarso 09/04/2020 09:51:36
> Did you follow the instruction in [http://wiki.ros.org/webots\_ros/Tutorials/Sample%20Simulations#Simulation\_Pionneer\_3\_AT](http://wiki.ros.org/webots_ros/Tutorials/Sample%20Simulations#Simulation_Pionneer_3_AT) ?

`@David Mansolino` i can't map ,because the time of baselink\_to\_laser is wrong


> Did you follow the instruction in [http://wiki.ros.org/webots\_ros/Tutorials/Sample%20Simulations#Simulation\_Pionneer\_3\_AT](http://wiki.ros.org/webots_ros/Tutorials/Sample%20Simulations#Simulation_Pionneer_3_AT) ?

`@David Mansolino`
%figure
![6e224832878c5d674f56e4e1c6e9239.jpg](https://cdn.discordapp.com/attachments/565154703139405824/751379352935071744/6e224832878c5d674f56e4e1c6e9239.jpg)
%end

##### David Mansolino [Cyberbotics] 09/04/2020 09:53:22
did you enabled the 'use\_sim\_time' parameter?

##### Bkarso 09/04/2020 09:53:54
yes


but I must use the sim\_time? I want to use ros time the best

##### David Mansolino [Cyberbotics] 09/04/2020 09:56:42
ok, in that case you should make sure that both are using the ros wall time, and there is no mismatch between the one use by the simulation and the one used by rviz

##### Bkarso 09/04/2020 09:59:10
how can i make sure the simulation lidarmessage use ros wall time ?

##### David Mansolino [Cyberbotics] 09/04/2020 09:59:58
[https://cyberbotics.com/doc/guide/using-ros#standard-ros-controller](https://cyberbotics.com/doc/guide/using-ros#standard-ros-controller)

Make sure the 'use\_sim\_time' is not set, and the controller argument does not incldue '--clock' and '--use-sim-time'.

##### Bkarso 09/04/2020 10:01:27
yes,i not set the use\_sim\_time and the arg also not include '--clock' and '--use-sim-time'

##### David Mansolino [Cyberbotics] 09/04/2020 10:02:20
Ok, let me try...

##### Bkarso 09/04/2020 10:04:11

%figure
![5a12e57320be2dc281fb4c27af1411d.jpg](https://cdn.discordapp.com/attachments/565154703139405824/751382096202694716/5a12e57320be2dc281fb4c27af1411d.jpg)
%end



%figure
![657feb6b9ee22056a3bef5509412759.jpg](https://cdn.discordapp.com/attachments/565154703139405824/751382113164591124/657feb6b9ee22056a3bef5509412759.jpg)
%end


I use R2020b

##### David Mansolino [Cyberbotics] 09/04/2020 10:07:25
I just tried and it works perfectly for me, here are the steps:

1. roslaunch webots\_ros pioneer3at.launch

2. rosrun gmapping slam\_gmapping scan:=/pioneer3at/Sick\_LMS\_291/laser\_scan/layer0 \_xmax:=30 \_xmin:=-30 \_ymax:=30 \_ymin:=-30 \_delta:=0.2

3. rosrun rviz rviz

4. in rviz add the 'LaserScan' visualization and then set the topic to '/pioneer3at/Sick\_LMS\_291/laser\_scan/layer0' and then set the 'Size' to 0.1
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/751382909138501672/unknown.png)
%end


I use R2020b-rev1 with ROS kinetic.


If it still doesn't work with this procedure, can you try updating to Webots R2020b-rev1 as we fixed several ROS related issues in this new version of Webots.

##### Bkarso 09/04/2020 10:21:06
no ok .so I update to R2020-REVL first.
%figure
![0e1938b0e2356787c5d49947e4f5ece.jpg](https://cdn.discordapp.com/attachments/565154703139405824/751386352070950932/0e1938b0e2356787c5d49947e4f5ece.jpg)
%end

##### Lance 09/04/2020 11:07:13
Hi, I'm migrating the problem I asked in general channel here. I am using a ros controller but could like to use the functionality in the extern controller, to be specific, just the "Robot" class(the line of code that gives my error is "from controller import Robot"). How can I do this? Thank you !

##### David Mansolino [Cyberbotics] 09/04/2020 12:00:20
Hi `@Lance` to use an extern controller in Python, you need set a few environement variables: [https://cyberbotics.com/doc/guide/running-extern-robot-controllers?tab-os=linux&tab-language=python#environment-variables](https://cyberbotics.com/doc/guide/running-extern-robot-controllers?tab-os=linux&tab-language=python#environment-variables)

##### Lance 09/04/2020 13:11:33
this is my runtime.ini file
%figure
![Screenshot_from_2020-09-04_09-10-13.png](https://cdn.discordapp.com/attachments/565154703139405824/751429246228103248/Screenshot_from_2020-09-04_09-10-13.png)
%end


this is the output from webots console
%figure
![Screenshot_from_2020-09-04_09-10-34.png](https://cdn.discordapp.com/attachments/565154703139405824/751429333792456714/Screenshot_from_2020-09-04_09-10-34.png)
%end


I have set the environment variables, but the still receiving the error

##### Olivier Michel [Cyberbotics] 09/04/2020 13:20:37
The environment variables shouldn't be set in your `runtime.ini` file, but in your system environment.

##### Lance 09/04/2020 14:04:38
I also added those lines to bashrc file and it produces the same result.

##### Olivier Michel [Cyberbotics] 09/04/2020 14:12:08
Are you sure it is set in your environment? From the Terminal where you launch the controller, can you type `printenv` to check it correct? Also, note that Python Anaconda may not be supported. I would recommend you to use the official Python (from python.org) at least to test.

##### Lance 09/04/2020 14:58:42
Thank you! I think I have solved the problem now. But here is a new one: when I tried to initialize a ros node in the base controller, it throws an error of "rospkg.common.ResourceNotFound: rosgraph"



%figure
![Screenshot_from_2020-09-04_10-59-05.png](https://cdn.discordapp.com/attachments/565154703139405824/751456381936074793/Screenshot_from_2020-09-04_10-59-05.png)
%end

##### David Mansolino [Cyberbotics] 09/04/2020 15:00:48
Maybe you need to try installing rosgraph: [http://wiki.ros.org/rosgraph](http://wiki.ros.org/rosgraph)


Or add it to your PYTHONPATH

##### Lance 09/04/2020 15:12:29
I have tried in the runtime.ini file adding: PYTHONPATH=$PYTHONPATH:/opt/ros/melodic:/opt/ros/melodic/lib. But it didn't work out, is the correct? thank you!

##### David Mansolino [Cyberbotics] 09/04/2020 15:13:34
Which version of Webots are you using?

##### Simon Steinmann [Moderator] 09/04/2020 15:13:47
export WEBOTS\_HOME='/home/simon/webots/webots'

export LD\_LIBRARY\_PATH="${LD\_LIBRARY\_PATH}:${WEBOTS\_HOME}/lib/controller"

export PYTHONPATH="${PYTHONPATH}:${WEBOTS\_HOME}/lib/controller/python27"


this in .bashrc


or in your ini file

##### Lance 09/04/2020 15:14:36
2020b

##### Simon Steinmann [Moderator] 09/04/2020 15:14:50
with this line you gotta be careful:

PYTHONPATH="${PYTHONPATH}:${WEBOTS\_HOME}/lib/controller/python27"



as it now will use python 2.7 for all external controllers


gotta switch it back to 

export PYTHONPATH="${WEBOTS\_HOME}/lib/controller/python37:${PYTHONPATH}"

for python 3.7


and just have 

source /opt/ros/melodic/setup.bash

below for your ROS setup

##### Lance 09/04/2020 15:16:10
this is my current ini file
%figure
![Screenshot_from_2020-09-04_11-15-20.png](https://cdn.discordapp.com/attachments/565154703139405824/751460607189975120/Screenshot_from_2020-09-04_11-15-20.png)
%end

##### Simon Steinmann [Moderator] 09/04/2020 15:17:48
did you edit your .bashrc?

##### Lance 09/04/2020 15:22:02
Nope. I am trying to run "rospy.init\_node("scout")" in the base controller, not in the terminal

##### David Mansolino [Cyberbotics] 09/04/2020 15:23:24
I am sorry to as the question again, but are you using regular or extern controller (i.e. are you launching the controller yourself from the terminal or is Webots launching the controller itself)?

##### Lance 09/04/2020 15:24:51
regular controller, webots launching the controller

##### David Mansolino [Cyberbotics] 09/04/2020 15:26:18
Ok, in that case the runtime.ini makes sense

##### Zuxin 09/04/2020 15:27:35
Should we add PYTHONPATH under the [environment variables] tab or the [environment variables with paths] tab?

##### David Mansolino [Cyberbotics] 09/04/2020 15:28:20
the problem may also be the fact that you are using python3 and ros melodic is using python2.


'environment variables with paths' should be fine

##### Lance 09/04/2020 15:30:37
That sounds right.. I have met a lot of issues with ros being in python 2. Is there a solution to this?

##### Olivier Michel [Cyberbotics] 09/04/2020 15:32:49
You should either use Python 2 with melodic or switch to noetic and use Python 3...

##### Lance 09/04/2020 15:49:32
Okay, thanks for the help!!

##### bondolo 09/04/2020 17:01:10
I am converting some R2020a-rev1 and earlier webots worlds to R2020b. Is it sufficient to just text replace 'northDirection 0 0 1' with 'coordinateSystem "NEU"'?

##### Bkarso 09/05/2020 03:42:07
hello,help me please!      I find that the actual direction is inconsistent with that in rviz. It is mirrored. so how can i change the tf ?             I use 2020b rev1 -kinetic
%figure
![bbb29a09b336945529cdda63b494b05.png](https://cdn.discordapp.com/attachments/565154703139405824/751648332241174548/bbb29a09b336945529cdda63b494b05.png)
%end


> hello,help me please!      I find that the actual direction is inconsistent with that in rviz. It is mirrored. so how can i change the tf ?             I use 2020b rev1 -kinetic

`@Bkarso` It's also mirrored after mapping.
%figure
![b5167517f34f8aeb318d26ba0574d3b.jpg](https://cdn.discordapp.com/attachments/565154703139405824/751683771413299220/b5167517f34f8aeb318d26ba0574d3b.jpg)
%end

##### Sanket Khadse 09/05/2020 07:38:56
I wanted the two moving rods to get attached with the top part.  I tried clubbing them together using `transform`, but could not figure out. The problem here is the two rods are already transform nodes of `endpoints` of two separate `HingeJoints`. Also, after this is done, where should I use `BallJoint` so that the top will be able to move, being ball-jointly attached with the central rod? Please any workaround??
> **Attachment**: [newtable.mp4](https://cdn.discordapp.com/attachments/565154703139405824/751707931170439248/newtable.mp4)

##### Simon Steinmann [Moderator] 09/05/2020 10:43:26
`@Bkarso` it really depends on your reference frame and which frames you are publishing. Try setting to base-frame to your robot base and see if that matches.


alyo from your screenshot, it looks to be correct if you look from the other side (below). There might be just an axis flip


`@Sanket Khadse` You definetely need joints for a connection.  Am I correct in the assumption, that you want the top 'table' to turn clockwise and anticlockwise (when looking at it from above)?.  If so, you have to keep in mind, that the top and bottom part would not stay parallel, as the two rods have a fixed length. Generally you want each solid part  to be a 'Solid' node (which can be be multiple parts, but moving as one). And then connect them with joints. Joints already give you a enpoint Solid. Simply put all parts of that solid, into its children, and then add another joint to its children. Also, for a part to stay attached, it needs a physics node

##### Sanket Khadse 09/05/2020 12:44:46
`@Simon Steinmann` , thanks for your reply.

I understand what you said about joints, but I could not do so, because I have already declared the top part to be endpoint of a BallJoint node.

I don't see how should I club together different joints.

By the way, I want the top to move like a sea surface, not clockwise technically.

##### Simon Steinmann [Moderator] 09/05/2020 12:46:59
having multiple joint endpoints attached to the same part is difficult. Not sure that is supported. That is a problem in rigid body simulations in general. They calculate kinematic chains, but you close the chain into a loop, if that makes sense


I have dealt with this in grippers before, like this one: [https://assets.robotiq.com/website-assets/products/page\_image/bb0e4c86fdb1e8ebee6795cf452773880729b0fed8981fcc65e1a2a5789491bb.png](https://assets.robotiq.com/website-assets/products/page_image/bb0e4c86fdb1e8ebee6795cf452773880729b0fed8981fcc65e1a2a5789491bb.png)


the way I made it work, was to have only the inner links actually connected, and to have the others just move in tandem, so it looks right

##### Sanket Khadse 09/05/2020 12:48:58
Basically what I want to make is a two DOF table. You might have got it. Do you have any resources for an already made one please?

##### Simon Steinmann [Moderator] 09/05/2020 12:49:22
I dont


however, what you could try is to do it backwards. have the table surface as your base solid, and to have the 3 rods connect to static solids on the ground


that might work

##### Sanket Khadse 09/05/2020 12:51:04
Sure, thanks for your help. Let me try that out.

##### Simon Steinmann [Moderator] 09/05/2020 12:51:56
otherwise, only have the middle one connected and use [https://cyberbotics.com/doc/reference/hinge2joint?tab-language=python](https://cyberbotics.com/doc/reference/hinge2joint?tab-language=python)

this with motors. You would have to calculate how everything has to move, but should be fairly simple trigonometry

##### Nakamura 09/05/2020 15:53:35
I am trying to run the sample used MATLAB scripts as robot controller, but when Webots called the MATLAB .m function, the Matlab Command Window is not responding. I have installed MinGW-w64 C/C++ Compiler to MATLAB, and added MATLAB's bin directories to the path environment variable. Could someone help a bit? Thanks.
%figure
![20200905231336.png](https://cdn.discordapp.com/attachments/565154703139405824/751832411859320862/20200905231336.png)
%end

##### David Mansolino [Cyberbotics] 09/07/2020 05:49:54
> I am converting some R2020a-rev1 and earlier webots worlds to R2020b. Is it sufficient to just text replace 'northDirection 0 0 1' with 'coordinateSystem "NEU"'?

`@bondolo` yes fo r a simple compatibility, but this might change the direction of the north (which is going to be '1 0 0') and this will have impact on the inertial unit, gps and compass.


If you really want to 'convert' your wourld, you have to rotate the world completely, we have created a script for doing this: [https://github.com/cyberbotics/webots/pull/2204](https://github.com/cyberbotics/webots/pull/2204)


> hello,help me please!      I find that the actual direction is inconsistent with that in rviz. It is mirrored. so how can i change the tf ?             I use 2020b rev1 -kinetic

`@Bkarso` the problem is actually due to the fact that the Webots and RVIZ coordinate systems are not equivalent.

The Webots X-axis becomes -Y in RVIZ.

The Webots Y-axis becomes Z in RVIZ.

The Webots Z-axis becomes -X in RVIZ.


`@Sanket Khadse`, what you are looking for is the SolidReference node ([https://cyberbotics.com/doc/reference/solidreference](https://cyberbotics.com/doc/reference/solidreference)) which allows you to create closed loops.


> I am trying to run the sample used MATLAB scripts as robot controller, but when Webots called the MATLAB .m function, the Matlab Command Window is not responding. I have installed MinGW-w64 C/C++ Compiler to MATLAB, and added MATLAB's bin directories to the path environment variable. Could someone help a bit? Thanks.

`@Nakamura`  which version of Webots and Matlab are you using? Are you experiencing this with the sample simulation distributed within Webots? And if yes, which ones?

##### Nakamura 09/07/2020 07:37:57
`@David Mansolino` Thanks for your reply. Webots version is R2020a revision 1 and MATLAB R2018 a. The first time the program can be run correctly,  but then it became like this.

##### Olivier Michel [Cyberbotics] 09/07/2020 07:59:47
`@Nakamura`: I would recommend you to upgrade to R2020b revision 1 as several MATLAB related bugs have been fixed since Webots R2020a revision 1.

##### teo nik 09/07/2020 12:19:00
i write i wb\_receiver\_enable(receiver, 64) /is special id  of robot . when i debug says invalid tag..i was wrong with tag ?must set before something?

##### Stefania Pedrazzi [Cyberbotics] 09/07/2020 12:21:37
`@teo nik` `receiver` variable should contain the tag of the Receiver device, i.e. you should get it using the `wb_robot_get_device("your device name")` command

##### teo nik 09/07/2020 12:25:53
i did it .maybe i must set something before or nomatter

##### Stefania Pedrazzi [Cyberbotics] 09/07/2020 12:28:37
The only instruction that it is required before is to execute `wb_robot_init` (as shown in this tutorial [https://www.cyberbotics.com/doc/guide/tutorial-4-more-about-controllers#program-a-controller](https://www.cyberbotics.com/doc/guide/tutorial-4-more-about-controllers#program-a-controller))

##### teo nik 09/07/2020 12:29:12
thank you

##### Justin Fisher 09/08/2020 02:37:22
I've been having trouble getting Python controllers to import any library written by me except for ones I put in the very same folder as the controller itself.  The only example I could find in Webots samples of a Python controller importing local libraries is the sumo controller, which also does it the only way I've managed to get it to work, by putting all the things you want to import right there in the same folder as the controller itself.  The controller documentation suggests that we should be able to locate shared libraries in a libraries folder of the project, but it can't seem to find it there (even with me putting \_\_init\_\_.py files in the folders, which python sometimes wants).  It also doesn't seem able to use relative pathing to path back up from the controller's own folder to find sibling (or cousin) folders.  Is there a way to get shared libraries to work in Python, ideally one that won't be really complicated to walk all my students through too?  (They'll be programming 4 different controllers for 4 different objectives, and it would obviously be suboptimal to have to keep track of 4 duplicate copies of the libraries the 4 controllers will all use.)

##### Bkarso 09/08/2020 03:16:28
hello,I use 2020b-rev1 with ros(16.04),I want to change the RosInertialUnit.cpp,so i need to build? or is it working after changing?

##### David Mansolino [Cyberbotics] 09/08/2020 05:34:56
> hello,I use 2020b-rev1 with ros(16.04),I want to change the RosInertialUnit.cpp,so i need to build? or is it working after changing?

`@Bkarso` the ros controller is written in C++, so yes you need to compile it.


> I've been having trouble getting Python controllers to import any library written by me except for ones I put in the very same folder as the controller itself.  The only example I could find in Webots samples of a Python controller importing local libraries is the sumo controller, which also does it the only way I've managed to get it to work, by putting all the things you want to import right there in the same folder as the controller itself.  The controller documentation suggests that we should be able to locate shared libraries in a libraries folder of the project, but it can't seem to find it there (even with me putting \_\_init\_\_.py files in the folders, which python sometimes wants).  It also doesn't seem able to use relative pathing to path back up from the controller's own folder to find sibling (or cousin) folders.  Is there a way to get shared libraries to work in Python, ideally one that won't be really complicated to walk all my students through too?  (They'll be programming 4 different controllers for 4 different objectives, and it would obviously be suboptimal to have to keep track of 4 duplicate copies of the libraries the 4 controllers will all use.)

`@Justin Fisher` have you tried setting the 'PYTHONPATH' environment variable from a runtime.ini file in the controller folder ([https://cyberbotics.com/doc/guide/controller-programming#environment-variables](https://cyberbotics.com/doc/guide/controller-programming#environment-variables))?

##### Miller 09/08/2020 07:09:32
`@David Mansolino` Hello David, I have an error as following: Error: wb\_motor\_set\_velocity() called with negative 'velocity' argument in position control mode (0). Do you have any idea what might be causing this issue?

##### David Mansolino [Cyberbotics] 09/08/2020 07:10:08
Hi, are you using a negative velocity?

##### Miller 09/08/2020 07:12:27
Yes, my intention of using a negative velocity is to make the differential wheel spin counterclockwise


I'm using epuck2 model, this happens when I have 10 epucks in the world, however I don't have the issue with 3 epucks

##### Bkarso 09/08/2020 07:13:49
> `@Bkarso` the ros controller is written in C++, so yes you need to compile it.

`@David Mansolino` hello ,I try to build the current project ,but it warn This operation is not permitted.


> `@David Mansolino` hello ,I try to build the current project ,but it warn This operation is not permitted.

`@Bkarso`
%figure
![5b6d15187234f9bbb76cddda4b0f21e.jpg](https://cdn.discordapp.com/attachments/565154703139405824/752789172036698132/5b6d15187234f9bbb76cddda4b0f21e.jpg)
%end

##### David Mansolino [Cyberbotics] 09/08/2020 07:15:54
`@Miller` did you set the target position to infinity?

##### Miller 09/08/2020 07:16:13
yes

##### David Mansolino [Cyberbotics] 09/08/2020 07:16:54
that's strange, because this warning mention that you are using the position control (i.e. position is not set to infinity)

##### Miller 09/08/2020 07:17:53

%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/752789794135998505/unknown.png)
%end

##### David Mansolino [Cyberbotics] 09/08/2020 07:18:13
I just tried with 10 epucks and it works fine for me.

##### Miller 09/08/2020 07:18:18
This is the piece of code I used to set it to infinity

##### David Mansolino [Cyberbotics] 09/08/2020 07:18:34
Maybe this service fails for some of the robot

##### Miller 09/08/2020 07:19:01
Is there any work around to the issue?

##### David Mansolino [Cyberbotics] 09/08/2020 07:19:32
You should proably check the returned value of the service call and make sure it is 'true'

##### Miller 09/08/2020 07:20:47
Thanks! Will check

##### David Mansolino [Cyberbotics] 09/08/2020 07:21:10
`@Bkarso` you are not allowed to modify the files in the Webots installation folder, you hav first to copy paste the folder of this controller in your local project.


`@Miller` you're welcome

##### Bkarso 09/08/2020 07:44:35
hello ,I copy paste the fold(controller)  in my local project,but when i try to build the current project ,it can't success compile
%figure
![bb76efa61bf37d7a74e13c00d1cb835.jpg](https://cdn.discordapp.com/attachments/565154703139405824/752796515994435634/bb76efa61bf37d7a74e13c00d1cb835.jpg)
%end

##### David Mansolino [Cyberbotics] 09/08/2020 07:49:54
You need to have ROS installed on your computer and to have the 'ROS\_DISTRO' environmental varibale set to compile this controller

##### Bkarso 09/08/2020 07:51:39
how can i set the environment?

##### David Mansolino [Cyberbotics] 09/08/2020 07:52:04
[https://www.cyberciti.biz/faq/set-environment-variable-linux/](https://www.cyberciti.biz/faq/set-environment-variable-linux/)


Or you can define it directly in the Makefile

##### Bkarso 09/08/2020 07:55:02
if I want to define it in the Makefile ,how can Ido ?

##### David Mansolino [Cyberbotics] 09/08/2020 07:55:26
[https://ftp.gnu.org/old-gnu/Manuals/make-3.79.1/html\_chapter/make\_6.html](https://ftp.gnu.org/old-gnu/Manuals/make-3.79.1/html_chapter/make_6.html)

##### creative 09/08/2020 12:23:26
`@David Mansolino` hi, David, I set epuck2 supervisor TRUE with an error as following:Error: wb\_motor\_set\_velocity() called with negative 'velocity' argument in position control mode (0). and I set epuck2 supervisor FALSE, no error, but i want to use supervisor. Do you have any idea what might be causing this issue?

##### David Mansolino [Cyberbotics] 09/08/2020 12:24:42
Is this reproducible? The supervisor field should have strigly no impact on this.

##### creative 09/08/2020 12:31:54
I just discovered this problem, and if 10 robots are copied and do not change their positions, there will be no problem. Once I move 10 robots to the position I want, this problem occurs after restarting Error: wb\_motor\_set\_velocity() called with negative 'velocity' argument in position control mode (0).

##### David Mansolino [Cyberbotics] 09/08/2020 12:32:55
Restarting? The simulation of just the control node?

##### creative 09/08/2020 12:33:30
yes, I use ros control.

##### anathema 09/08/2020 12:57:20
hello everyone, i am trying to use he vehicle proto ,when i try to write a controller and include "#include <webots/driver.h> " it gives me error saying file not found. if anyone can tell me where to find it and where to include it . thank you

##### David Mansolino [Cyberbotics] 09/08/2020 12:59:01
The include is the following:

```
#include <webots/vehicle/driver.h>
```

##### anathema 09/08/2020 12:59:54
`@David Mansolino` thank you ill try and let you know.

##### David Mansolino [Cyberbotics] 09/08/2020 13:00:02
You're welcome


I just saw that the doc is wrong about this, I am fixing it right now

##### anathema 09/08/2020 13:02:08
`@David Mansolino`  that worked thanks, what is for the  car library

##### David Mansolino [Cyberbotics] 09/08/2020 13:03:20
it is the same for the car:

```
#include <webots/vehicle/car.h>
```

##### anathema 09/08/2020 13:06:00
`@David Mansolino`  i tried to include a distance sensor in the vehicle  slot of one of the vehicle,but the distance sensor just gives the max value as set in the lookup table. I tried putting the sensor in a robot and i worked so may i know if there is something  i am doing wrong

##### David Mansolino [Cyberbotics] 09/08/2020 13:08:12
Did you change the lookup table of the distance sensor to make sure the range is long enough? Make also sure that the sensor ray does not collide with the car itself

##### anathema 09/08/2020 13:12:08
ok ill study the look up table again, i think i have not properly understood.. thanks again.


can you find if anything is wrong  with the scene tree basically the lookup table values
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/752879163014250577/unknown.png)
%end

##### David Mansolino [Cyberbotics] 09/08/2020 13:15:07
Yes something is wrong, you set the maxRange to 0.1 meters


as a simple test, try setting the second line to '5e03 5e03 0'

##### anathema 09/08/2020 13:17:54
`@David Mansolino`  thanks now the values are changing, can yo please explain me

##### David Mansolino [Cyberbotics] 09/08/2020 13:27:51
Here is the lookup table description: [https://cyberbotics.com/doc/reference/distancesensor#lookup-table](https://cyberbotics.com/doc/reference/distancesensor#lookup-table)

Let me know if after reading this something is still not clear

##### anathema 09/08/2020 13:28:35
sure thanks again

##### David Mansolino [Cyberbotics] 09/08/2020 13:28:41
You're welcome

##### owongcho 09/08/2020 14:34:26
Hello, I am relative new in Webots and need some help with an issue.  I used the ABB IBR 4600 robot from the included inverse\_kinematics example and added an parallel gripper to its hand slot.  So, when I added the x dimension length to the last link of the ikpy module URDFLink (see below) and run it, I don't get an accurate movement to the target location as compared to without the added tool length. Is something else, I need to modify such as the anchor and joint in the proto? URDFLink(

        name="F motor",

        bounds=[-6.98132, 6.98132],

        translation\_vector=[0.125+*0.205*, 0, 0],

        orientation=[0, 0, 0],

        rotation=[1, 0, 0]

##### David Mansolino [Cyberbotics] 09/08/2020 14:35:37
Hi, welcome


Which version of Webots are you using?

##### owongcho 09/08/2020 14:38:04
I am using the R2020b and today I just updated to R2020b revision 1

##### David Mansolino [Cyberbotics] 09/08/2020 14:39:26
Ok, I would recommend trying with the new version of the 'inverse\_kinematic' controller of R2020b-rev1 as this one is creating the kinematic chain automatically from the Webots robot definition

##### owongcho 09/08/2020 14:40:36
ok. I will try it and will let know. thanks

##### David Mansolino [Cyberbotics] 09/08/2020 14:41:00
You're welcome

##### owongcho 09/08/2020 15:29:04
Hello David. I am using the new version of the 'inverse\_kinematic' controller (R2020b-rev1) and I would like to know if automated kinematic chain function also consider any end effector attached to the robot? Also, I run I am getting this error (even with the default demo):      

Traceback (most recent call last):

  File "inverse\_kinematics.py", line 71, in <module>

    motors[i].setPosition(ikResults[i + 1])

IndexError: list index out of range

WARNING: 'inverse\_kinematics' controller exited with status: 1.

##### David Mansolino [Cyberbotics] 09/08/2020 15:30:57
Yes, it does take the end effector into account, but the 'name' field of the end-effector has to include the 'motor' keyword, or you will need to adapt this condition: [https://github.com/cyberbotics/webots/blob/master/projects/robots/abb/irb/controllers/inverse\_kinematics/inverse\_kinematics.py#L47](https://github.com/cyberbotics/webots/blob/master/projects/robots/abb/irb/controllers/inverse_kinematics/inverse_kinematics.py#L47)

##### owongcho 09/08/2020 15:54:54
Could you please verify if the new provided ibr example is correct? because I using and it does not run.  I print the motors variable after the "Initialize the arm motors"  and I am getting an empty list.

##### Simon Steinmann [Moderator] 09/08/2020 15:57:35
is lbr officially included?

##### owongcho 09/08/2020 15:59:48
yes
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/752921140887814204/unknown.png)
%end

##### Simon Steinmann [Moderator] 09/08/2020 16:00:23
ohh that one. I can give you my solver for it if you want. Or do you want it for a different robot?

##### owongcho 09/08/2020 16:01:34
I am using the same robot.

##### Simon Steinmann [Moderator] 09/08/2020 16:01:52
what operating system are you using?

##### owongcho 09/08/2020 16:02:02
I am using Windows 10

##### Simon Steinmann [Moderator] 09/08/2020 16:04:50
I think it's not merged into the community projects yet, but try this



> **Attachment**: [generic\_inverse\_kinematic.zip](https://cdn.discordapp.com/attachments/565154703139405824/752922422310731887/generic_inverse_kinematic.zip)


your robot has to be a supervisor, other than that, you just have to enable the controller and it should work


if you are interested, I also made a solver using ikfast, which is 100s to 1000s times faster than this. But you would have to compile something for it. I'm not sure how confident you are with that

##### owongcho 09/08/2020 16:17:49
Thank you. so, to run use it. I just need to assign the "ik\_module" to the robot, right? I am not familiar with ikfast, so is ikfast better than ikpy?

##### Simon Steinmann [Moderator] 09/08/2020 16:18:19
do you have a project directory?

##### owongcho 09/08/2020 16:18:41
Yes, I created one

##### Simon Steinmann [Moderator] 09/08/2020 16:18:51
there should be a controllers folder


open that folder and extract my .zip there


then any robot in your project can use that controller


'generic\_inverse\_kinematics'


there is still a few bugs, with robots that have a gripper, but it should work with most robotic arms


and yes, ikfast is MUCH faster than ikpy

##### owongcho 09/08/2020 16:25:36
ok. I did that. Now, if I want to write a script to do some operations, show I use the "ik\_module"?

##### Simon Steinmann [Moderator] 09/08/2020 16:25:46
yes

##### owongcho 09/08/2020 16:25:50
I will check ikfast as well


thank you

##### Simon Steinmann [Moderator] 09/08/2020 16:26:13
ikfast is very complicated. it is a solver that you have to compile for each robot specifically


And to use it, you have to compile a wrapper

##### owongcho 09/08/2020 16:29:40
I see. Then for now, I will use the ikpy since I dont have good undestanding of those concepts to make ikfast work

##### Simon Steinmann [Moderator] 09/08/2020 16:30:04
try to unpack this
> **Attachment**: [ikfastpy.zip](https://cdn.discordapp.com/attachments/565154703139405824/752928759081992282/ikfastpy.zip)


you will need the python packages numpy and Cython


if you have those, run 

'python setup.py build\_ext --inplace'

in that directory to compile it. I placed the correct solver in there already for you


if that works, I can show you the controller for ikfast

##### David Mansolino [Cyberbotics] 09/08/2020 16:39:12
> Could you please verify if the new provided ibr example is correct? because I using and it does not run.  I print the motors variable after the "Initialize the arm motors"  and I am getting an empty list.

`@owongcho` you are right, sorry I forgot about it, but it is indeed broken in the latest release, please use the latest code from the master branch: [https://github.com/cyberbotics/webots/blob/master/projects/robots/abb/irb/controllers/inverse\_kinematics/inverse\_kinematics.py](https://github.com/cyberbotics/webots/blob/master/projects/robots/abb/irb/controllers/inverse_kinematics/inverse_kinematics.py)

##### owongcho 09/08/2020 16:45:52
> 

> if you have those, run 

> 'python setup.py build\_ext --inplace'

> in that directory to compile it. I placed the correct solver in there already for you

> `@Simon Steinmann` I followed the instructions:
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/752932734099390657/unknown.png)
%end

##### Simon Steinmann [Moderator] 09/08/2020 16:47:12
did you execute the setup file with those arguments?

##### owongcho 09/08/2020 16:47:27
yes

##### Simon Steinmann [Moderator] 09/08/2020 16:48:00
i'm not sure how it works on windows.


in what did you enter the command?


pip install  numpy Cython


did you install those?

##### owongcho 09/08/2020 16:50:51
> pip install  numpy Cython

`@Simon Steinmann` yes


so, after I copy the ikfastpy folder to my controller folder, I run the "setup.py"

##### Simon Steinmann [Moderator] 09/08/2020 16:51:26
no, that has nothing to do with the controller


it's a repository, to create a python wrapper for the ikfast solver


ikfast61.cpp  

That is the solver for the irb robot. But in order to use it in the controller, you have to compile the python wrapper for it


python -m pip install --upgrade setuptools


try this

##### owongcho 09/08/2020 16:54:26
> done

##### Simon Steinmann [Moderator] 09/08/2020 16:54:37
maybe try:

python setup.py install

##### owongcho 09/08/2020 16:55:33
I got this: (null): can't open file 'setup.py': [Errno 2] No such file or directory

##### Simon Steinmann [Moderator] 09/08/2020 16:55:50
then you are in the wrong directory


you have to 'cd' into it

##### owongcho 09/08/2020 16:57:48
I am now in C:\ and still get the error

##### Simon Steinmann [Moderator] 09/08/2020 16:58:04
you have to be in the ikfastpy directory


wherever you put it

##### owongcho 09/08/2020 17:00:27
I think now I am in the correct directory: running install

running build

running build\_ext

skipping 'ikfastpy.cpp' Cython extension (up-to-date)

building 'ikfastpy' extension

error: Unable to find vcvarsall.bat

##### Simon Steinmann [Moderator] 09/08/2020 17:01:26
python setup.py build\_ext --inplace


try that command


if you have errors, google them, I dont really know anything about that

##### owongcho 09/08/2020 17:02:19
ok I am getting: running build\_ext

skipping 'ikfastpy.cpp' Cython extension (up-to-date)

building 'ikfastpy' extension

error: Unable to find vcvarsall.bat


> if you have errors, google them, I dont really know anything about that

`@Simon Steinmann` ok. thanks

##### Simon Steinmann [Moderator] 09/08/2020 17:03:22
[https://devblogs.microsoft.com/python/unable-to-find-vcvarsall-bat/](https://devblogs.microsoft.com/python/unable-to-find-vcvarsall-bat/)

##### owongcho 09/08/2020 17:32:46
could not make it work, I will try to fix this error later.


> `@owongcho` you are right, sorry I forgot about it, but it is indeed broken in the latest release, please use the latest code from the master branch: [https://github.com/cyberbotics/webots/blob/master/projects/robots/abb/irb/controllers/inverse\_kinematics/inverse\_kinematics.py](https://github.com/cyberbotics/webots/blob/master/projects/robots/abb/irb/controllers/inverse_kinematics/inverse_kinematics.py)

`@David Mansolino` 👍

##### Simon Steinmann [Moderator] 09/08/2020 17:34:09
sure thing, until then, just use the other controller. How you use both controllers is the same, both include an ik\_module, which you parse the position and rotation of your desired position, and it returns the joint angles

##### owongcho 09/08/2020 17:34:34
for now, I am going try understand the solver you provided (ikpy) and try to write my own rutine

##### Simon Steinmann [Moderator] 09/08/2020 17:35:48
the ik\_module you should not have to change, but the high level controller you can change, so it does what you do. The example with the target sphere is just to visualize, how it works

##### owongcho 09/08/2020 17:47:27
> the ik\_module you should not have to change, but the high level controller you can change, so it does what you do. The example with the target sphere is just to visualize, how it works

`@Simon Steinmann` 👍


thank you

##### Simon Steinmann [Moderator] 09/08/2020 17:48:05
you're welcome

##### LeonardoH 09/08/2020 18:59:40
hi, i am new to webots2020, how to show up coordinates in pioneer3dx to console?

##### Simon Steinmann [Moderator] 09/08/2020 20:07:20
can you rephrase your question? I'm not quite sure what you mean

##### David Mansolino [Cyberbotics] 09/09/2020 05:50:50
> hi, i am new to webots2020, how to show up coordinates in pioneer3dx to console?

`@LeonardoH` Are you speaking about printing the gps X-Y-Z position in the console?

##### Justin Fisher 09/09/2020 07:52:53
> `@Justin Fisher` have you tried setting the 'PYTHONPATH' environment variable from a runtime.ini file in the controller folder ([https://cyberbotics.com/doc/guide/controller-programming#environment-variables](https://cyberbotics.com/doc/guide/controller-programming#environment-variables))?

`@David Mansolino` I tried adding WEBOTS\_LIBRARY\_PATH, PYTHONPATH and PYTHON\_PATH to runtime.ini, but none seemed to do anything.  E.g., requesting sys.path from within the Python controller still revealed only the controller's own directory, not anything like $(WEBOTS\_PROJECT)/libraries, as I'd been trying to add, and as the controller documentation says should be available.

> `@Justin Fisher`  This seems like a solution that only works in certain cases

`@Simon Steinmann` Do you mean only in the case where you want to have your self-written modules be in the "libraries" folder of your project?  Yes, that's right, but that is where Webots docs say you should put them (and Webots requires that controllers be two levels down from top in controllers/controllername/ so that relative path should always be right).  Of course, if you did want to put your Python modules someplace different, it'd be easy enough to change runtime.ini to point there.  Or is there some other sort of case you're worried about?

##### David Mansolino [Cyberbotics] 09/09/2020 07:57:35
In that case you should probably take inspiration from this controller that is doing something very similar: [https://github.com/cyberbotics/webots/tree/master/projects/samples/robotbenchmark/humanoid\_marathon/controllers/marathon](https://github.com/cyberbotics/webots/tree/master/projects/samples/robotbenchmark/humanoid_marathon/controllers/marathon)

Here are the key parts:

[https://github.com/cyberbotics/webots/blob/master/projects/samples/robotbenchmark/humanoid\_marathon/controllers/marathon/runtime.ini#L4](https://github.com/cyberbotics/webots/blob/master/projects/samples/robotbenchmark/humanoid_marathon/controllers/marathon/runtime.ini#L4)

[https://github.com/cyberbotics/webots/blob/master/projects/samples/robotbenchmark/humanoid\_marathon/controllers/marathon/marathon.py#L9-L18](https://github.com/cyberbotics/webots/blob/master/projects/samples/robotbenchmark/humanoid_marathon/controllers/marathon/marathon.py#L9-L18)

##### Justin Fisher 09/09/2020 07:59:14
I did eventually find a kludgy way to make it work, by adding the path to sys.path from within Python.  I'll post it here in case it is helpful to anyone, or in case you can foresee a problem with doing it this way.



```import sys, os.path
sys.path.append(os.path.normpath( sys.path[0]+'/../../libraries' ))
```

This seems to work fine, though it does rely upon the controller's own directory being the first entry in sys.path.

##### David Mansolino [Cyberbotics] 09/09/2020 08:01:52
It is indeed very similar to what is done in the controller I pointed out.


> This seems to work fine, though it does rely upon the controller's own directory being the first entry in sys.path.

`@Justin Fisher` to make it a bit more robust, you can get the path of the current file with `os.path.abspath(__file__)`.


It should then looks something like this:

```Python
sys.path.append(os.path.dirname(os.path.dirname(os.path.abspath(__file__))))
```

##### Justin Fisher 09/09/2020 08:04:52
Examples like the one you linked all use paths that place things relative to the Webots installation, whereas I don't think I can be confident that my students will store their projects in any particular place.  Making reference to `__file__` does sound like a good way to get a handle on the local path, so that I can then go relative from there.


Any idea why we can't just add this from the runtime ini?  Or why it doesn't just default to being included as the controller documentation seems to suggest it would be?

##### David Mansolino [Cyberbotics] 09/09/2020 08:07:01
No, this looks like a bug, if you can reproduce this in a very simple setup and report it here, we will have a look and try to fix this: [https://github.com/cyberbotics/webots/issues/new?template=bug\_report.md](https://github.com/cyberbotics/webots/issues/new?template=bug_report.md)

##### Justin Fisher 09/09/2020 08:33:32
In the Robotis example you linked, it seems like the runtime.ini part probably wasn't doing everything we'd hope it to do either, right? 

 Because if it was working, why would that Python code itself need to add something to sys.path?  I thought the point of specifying the path to the libraries in runtime.ini was that so when Webots started the Python controller it would put a path to the libraries directory into Python's sys.path, e.g., by setting PYTHONPATH appropriately just before starting the controller.   (I also expected from the controller docs that it would do this automatically without you even needing to specify it in runtime.ini.)

##### David Mansolino [Cyberbotics] 09/09/2020 08:34:35
Actually this example is a bit more complexe because in addition to the python files, it also need to load a compiled library. But in your case the runtime.ini file is indeed useless

##### Justin Fisher 09/09/2020 08:35:13
And its uselessness is not a bug?

##### David Mansolino [Cyberbotics] 09/09/2020 08:36:10
I am not sure to understand, in the humanoid\_marathon, it is usefull to load the compiled library

##### Justin Fisher 09/09/2020 08:38:07
I guess it doesn't matter -- I've got a solution that works fine, so no big deal whether it's a sys.path modification at the top of the Python controller rather than in runtime.ini    .  I guess if this needs to be done at the top of the Python controller, it'd be good to make the docs say that.


But in case it sounds like I'm complaining, I wanted to say that Webots is awesome, and that it's awesome that you're so helpful!

##### David Mansolino [Cyberbotics] 09/09/2020 08:39:07
> But in case it sounds like I'm complaining, I wanted to say that Webots is awesome, and that it's awesome that you're so helpful!

`@Justin Fisher` thank you 🙂

##### Justin Fisher 09/09/2020 08:40:02
In fiddling around with this to set up activities for my students, I've made a number of things that might be of interest to more Webots users.


E.g., I rewrote the extrusion proto to give more/better options for controlling orientations of cross-sections along the extrusion.


And I figured out pretty good ways to use normal maps and some trickery to make water actually look a lot more like water, rather than just looking like semi-transparent boxes like it does in the water demos I saw (e.g., ones with the salamander)


Is this the sort of stuff that other people might want?  If so would it make sense to just put pull requests in github, or something else?

##### David Mansolino [Cyberbotics] 09/09/2020 08:43:07
That looks very good, do not hesitate to create a pull-request to integrate this directly into Webots (one the PR is open we will guide you how to integrate your changes if needed), here is for the extrusion for example: [https://github.com/cyberbotics/webots/edit/master/projects/objects/geometries/protos/Extrusion.proto](https://github.com/cyberbotics/webots/edit/master/projects/objects/geometries/protos/Extrusion.proto)

##### Justin Fisher 09/09/2020 08:44:27
I'll make a mental note to do that sometime then, though now I'm rushing for other deadlines, like getting this Webots project ready for my students!  Thanks again for all your help!


Ok, I'm an idiot!  I figured out why the runtime.ini wasn't working for me.  I have two controllers running in the world and I had put runtime.ini in the wrong controller's folder.  Copying it over to the right one's folder works fine, even without my kludgy solution.  Amazing how much time we (or I anyway) end up wasting over the tiniest little mistakes!

##### David Mansolino [Cyberbotics] 09/09/2020 08:56:06
You are re-assuring me, because I was currently trying and for me the runtime.ini file was working perfectly 😅

##### Justin Fisher 09/09/2020 08:57:07
Oh sorry to have wasted your time.  Thanks again for the help!

##### David Mansolino [Cyberbotics] 09/09/2020 08:57:20
No problem, you're welcome

##### Justin Fisher 09/09/2020 09:05:01
So, in case anyone stumbles across this later, it looks like the easy key to be able to get a Python controller to be able to import self-written python modules from the Webots project libraries folder is to put `PYTHONPATH = $(PYTHONPATH):../../libraries` in the `[environmental variables with paths]` section of `runtime.ini` in that controller's own folder.

I think I would suggest having Webots do this automatically, or at least making the wizard that creates a dummy Python controller do this automatically.  That would better fit with the documentation.

##### Simon Steinmann [Moderator] 09/09/2020 09:57:48
> `PYTHONPATH = $(PYTHONPATH):../../libraries` 

`@Justin Fisher`  This seems like a solution that only works in certain cases

##### anathema 09/09/2020 09:58:14
hi, i have a simple question. i just closed the camera view, how can i get it back

##### David Mansolino [Cyberbotics] 09/09/2020 09:58:52
From the 'Overlays' menu

##### anathema 09/09/2020 09:59:12
thanks as always

##### LeonardoH 09/09/2020 10:21:28
> `@LeonardoH` Are you speaking about printing the gps X-Y-Z position in the console?

`@David Mansolino` yes, can you help me with that?

##### David Mansolino [Cyberbotics] 09/09/2020 10:22:54
You need to add a gps node in the `extensionSlot` field of the robot, then you can enable it and get the value like with any other sensors


If not already done, i woudl recommend following at least tutorials 1 to 4: [https://cyberbotics.com/doc/guide/tutorials](https://cyberbotics.com/doc/guide/tutorials)

##### Simon Steinmann [Moderator] 09/09/2020 11:44:59
can hidden positions be implemented directly into the proto file? Setting the position field in the HingJoint node, does not actually do anything

##### Çağrı Kaymak 09/09/2020 11:47:15
Hey everyone, I have a Robotis-Op2. When I upload the Walk.cpp controller to the robot, the robot can walk stably. However, when I create my own controller using Python, the robot cannot walk stably and falls. Both controllers use GaitManager. What kind of problem could it be, Anyone have any ideas? Thanks in advance.

##### Justin Fisher 09/09/2020 12:09:06
> `@Justin Fisher`  This seems like a solution that only works in certain cases

`@Simon Steinmann` What sort of cases are you worried about?  Webots docs say you should put shared libraries for your controllers in a libraries folder at the top level of the project, and this relative path from controllers/controllername/ should always get there, right?

##### Simon Steinmann [Moderator] 09/09/2020 12:10:36
Sorry, I did not read the whole thread. I thought it was about connecting extern controllers to webots

##### Justin Fisher 09/09/2020 12:12:37
Just a tiny question:  does anyone know why my distance sensor rays disappear whenever I hit "reset simulation" even though their checkbox still shows as being checked in the view menu?  They show up again if I reload world, or turn them off and on again in the view menu or by hitting CTRL-F10 twice.


And another tiny question:  is it "web bots" or "wee bots"?

##### Olivier Michel [Cyberbotics] 09/09/2020 12:15:15
`@Çağrı Kaymak`: please have a look at `webots/projects/samples/robotbenchmark/humanoid_marathon/controllers/marathon/marathon.py`([https://github.com/cyberbotics/webots/blob/master/projects/samples/robotbenchmark/humanoid\_marathon/controllers/marathon/marathon.py](https://github.com/cyberbotics/webots/blob/master/projects/samples/robotbenchmark/humanoid_marathon/controllers/marathon/marathon.py)) and associated `runtime.ini`([https://github.com/cyberbotics/webots/blob/master/projects/samples/robotbenchmark/humanoid\_marathon/controllers/marathon/runtime.ini](https://github.com/cyberbotics/webots/blob/master/projects/samples/robotbenchmark/humanoid_marathon/controllers/marathon/runtime.ini)) for an example of working Robotis-op2 walking using GaitManager in Python.


It could be that the GaitMananger library was not compiled or not properly compiled on your real robot.

##### Çağrı Kaymak 09/09/2020 12:24:26
Many thanks 👍

##### David Mansolino [Cyberbotics] 09/09/2020 12:24:36
> can hidden positions be implemented directly into the proto file? Setting the position field in the HingJoint node, does not actually do anything

`@Simon Steinmann` yes this is possible.

##### Simon Steinmann [Moderator] 09/09/2020 12:25:26
how? because I think I came across a more fundamental bug when converting from urdf

##### David Mansolino [Cyberbotics] 09/09/2020 12:26:00
> Just a tiny question:  does anyone know why my distance sensor rays disappear whenever I hit "reset simulation" even though their checkbox still shows as being checked in the view menu?  They show up again if I reload world, or turn them off and on again in the view menu or by hitting CTRL-F10 twice.

`@Justin Fisher` that's a bug (well spotted) we will fix this for the next version of Webots.

##### Olivier Michel [Cyberbotics] 09/09/2020 12:31:30
`@Justin Fisher`: the original name was based on "web bots" as the plan was to deploy robot simulations in a web of 3D environments (connected to each other with hyper gates, similar to hyper links). But since the release of the "I, Robot" movie, "we, bots" also became interesting... So, it's really the way you prefer.

##### David Mansolino [Cyberbotics] 09/09/2020 12:32:19
> that's a bug (well spotted) we will fix this for the next version of Webots.



`@Justin Fisher`  I created a bug report about this, you can check the progress here: [https://github.com/cyberbotics/webots/issues/2221](https://github.com/cyberbotics/webots/issues/2221)

##### Simon Steinmann [Moderator] 09/09/2020 12:33:22
`@David Mansolino` how can i implement the hidden positions into the proto? Basically I want to set the init position of a robot.

##### David Mansolino [Cyberbotics] 09/09/2020 12:33:59
I think you can use them like any other regular field.

##### Simon Steinmann [Moderator] 09/09/2020 12:34:16
ah okay, lemme try


where exactly do I place this field in the proto?

##### David Mansolino [Cyberbotics] 09/09/2020 12:42:06
I would say that it should be at the same location than the one in the world file

##### Simon Steinmann [Moderator] 09/09/2020 12:43:53

%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/753234223913238568/unknown.png)
%end


it just looks like this


I think I rather add a '--init-pos' feature to the converter

##### David Mansolino [Cyberbotics] 09/09/2020 12:54:18
Yes that's probably simpler indeed

##### anathema 09/09/2020 13:42:44
i am using the tractor from vehicle , there is only one sensor slot, is there a  way to add extra sensor slot

##### David Mansolino [Cyberbotics] 09/09/2020 13:43:19
Not without modifying the PROTO, but you can but several sensors in the same slot, and use transform to move them in the slot

##### anathema 09/09/2020 13:47:27
can you explain me the transform part

##### David Mansolino [Cyberbotics] 09/09/2020 13:49:16
First add a 'Transform' node, and then put your device in the 'children' field of your transform, you can then change the translation and rotation of the 'Transform' node to move all its children. I would recommend following tutorials 1 to 6 here: [https://cyberbotics.com/doc/guide/tutorials](https://cyberbotics.com/doc/guide/tutorials)

##### anathema 09/09/2020 13:50:12
thanks

##### Animesh22 09/09/2020 14:42:26
Hello, I am creating a world of a solar farm in which I will simulate my Solar Panel Cleaning robot. Please can I get help to add some dust over the panels, which can be cleaned by the Robot...

##### Olivier Michel [Cyberbotics] 09/09/2020 14:51:03
Hello, you should take inspiration of the `webots/projects/robots/irobot/create/worlds/create.wbt` demo to implement dust on your solar panels.


We can also do it for you if needed. Would you like to receive a quotation for this?

##### Animesh22 09/09/2020 14:53:59
> Hello, you should take inspiration of the `webots/projects/robots/irobot/create/worlds/create.wbt` demo to implement dust on your solar panels.

`@Olivier Michel` I will try first, Thanks for this information😀

##### Justin Fisher 09/10/2020 01:23:38
This is either a request for a way to do something, or more likely a feature suggestion for a future version of Webots.  I like how, in PBRAppearances, you can use baseColor as a multiplier with baseColorMap to recolor an image.  Intuitively, it seems like there should be the same relation between emissiveColor and emissiveColorMap, so e.g., you could colorize the emissiveColorMap of something by setting an emissiveColor to multiply with it.  E.g., this would be nice for making a paper-lantern proto whose emissiveColorMap has dark non-emissive parts and glowing tissue paper that it would be nice to be able to colorize to allow an easy choice for color of glow.  Or this would be nice for making a multi-color LED indicator with some dark writing on it.  Unfortunately, it doesn't seem like Webots currently works in this intuitive way, and instead just ignores emissiveColor when you specify an emissiveColorMap.  Is there a straightforward way of doing this sort of thing (short of just creating alternative emissive map textures for all the different colors of glow you might want)?

##### Ostii 09/10/2020 02:27:40
Anyone got an idea how to create a 2d drawing from webots. Just like one does on from AutoCAD?

##### Justin Fisher 09/10/2020 02:29:36
Under view you can choose orthographic projection and/or wireframe, but it may not be as pretty as you hope!

##### Ostii 09/10/2020 02:30:29
Let me check it out... 🙏🙏🙏🙏

##### Bkarso 09/10/2020 03:51:16
hello，I loaded my model (a wheel The format is stl), but it became very large. After I scaled it down, but I don’t know its actual size. What should I do?


How can I make sure that the diameter of my wheel is 75mm?

##### Justin Fisher 09/10/2020 05:26:51
There may be a better way, but one way that would work is to create a shape>box, set its length to .075 meters and move it beside your wheel, then rescale your wheel til it matches the ruler you made.

##### Bkarso 09/10/2020 06:34:18
hello ，I load a car frame and two wheels ,but i don't know how to make that the frame with a children include two wheels,help me please.

##### David Mansolino [Cyberbotics] 09/10/2020 06:35:41
> This is either a request for a way to do something, or more likely a feature suggestion for a future version of Webots.  I like how, in PBRAppearances, you can use baseColor as a multiplier with baseColorMap to recolor an image.  Intuitively, it seems like there should be the same relation between emissiveColor and emissiveColorMap, so e.g., you could colorize the emissiveColorMap of something by setting an emissiveColor to multiply with it.  E.g., this would be nice for making a paper-lantern proto whose emissiveColorMap has dark non-emissive parts and glowing tissue paper that it would be nice to be able to colorize to allow an easy choice for color of glow.  Or this would be nice for making a multi-color LED indicator with some dark writing on it.  Unfortunately, it doesn't seem like Webots currently works in this intuitive way, and instead just ignores emissiveColor when you specify an emissiveColorMap.  Is there a straightforward way of doing this sort of thing (short of just creating alternative emissive map textures for all the different colors of glow you might want)?

`@Justin Fisher` this is indeed not possible now, but if you have some knowledge abotu shader, you should be able to achieve this by modifying these shaders (no need to recompile anything): [https://github.com/cyberbotics/webots/tree/master/resources/wren/shaders](https://github.com/cyberbotics/webots/tree/master/resources/wren/shaders)


In particular, changing this line:

[https://github.com/cyberbotics/webots/blob/master/resources/wren/shaders/pbr.frag#L385](https://github.com/cyberbotics/webots/blob/master/resources/wren/shaders/pbr.frag#L385)

And this one:

[https://github.com/cyberbotics/webots/blob/master/resources/wren/shaders/pbr\_stencil\_ambient\_emissive.frag#L178](https://github.com/cyberbotics/webots/blob/master/resources/wren/shaders/pbr_stencil_ambient_emissive.frag#L178)

Into:

```
    emissive = texture(inputTextures[6], texUv).rgb * emissive;
```


> hello ，I load a car frame and two wheels ,but i don't know how to make that the frame with a children include two wheels,help me please.

`@Bkarso` You should use the `Car` PROTO as root node: [https://cyberbotics.com/doc/automobile/car](https://cyberbotics.com/doc/automobile/car)

##### Justin Fisher 09/10/2020 07:56:04
I'm trying to make a solid A with a complex boundingobject.  A has a child that is a transform B, which itself has a large child shape C that I would like to include in A's boundingobject.  If I just USE shape C in A's bounding object, it ends up in the wrong place, of course, because there's nothing transforming it. Intuitively, it seems like what I want to do is to have A's bounding object somehow USE the transform B.  However, the scene tree won't let me use *that* transform (or any other transform that is a direct child of A), even though it will let me use other transforms in A's bounding object, including more distant descendants of A.  Why can't I use B?  



I see that an option could be to make a group G that contains B and C, but B also has an insignificant descendant D that I wouldn't want to include in A's bounding object, but I think I'd automatically be stuck including it with this USE-a-group approach.



I could also make a copy B* of B to put in A's bounding box, rather than "USE"-ing B, but that'll end up being annoying as whenever I change B, I'll need to remember to make duplicate changes to B*.  So what should I do?

##### David Mansolino [Cyberbotics] 09/10/2020 07:57:36
There is a limit in the hierarchy level of transforms you can but in a boundign object, that probably why you can't use this DEF.

##### Justin Fisher 09/10/2020 08:16:09
Is there a *good* reason for it not to let me USE transform B in A's boundingObject, even though it would let me USE a transform that is a child of B?  Couldn't I just trivially get around that by inserting some other trivial zero transform Z between A and B, thereby making A's boundingObject be able to USE B after all?  How could that possibly be any better than just letting me USE B?



(It looks like this USE a 3rd-generation-transform approach sticks me with all the descendants of that grandchild transform in the bounding object, which has the same problem for me as the USE-a-group approach: including minor descendants in the boundingObject that it'd be better to leave out.  So I guess it doesn't matter for me right now, but still it seems odd and like it's probably not working the best way...)

##### David Mansolino [Cyberbotics] 09/10/2020 08:24:05
The problem is that (for internal stability reasons) you are not allowed to add a Transform in a Transform in a bounding object (regardless of the fact that it is a USE or not).

##### Justin Fisher 09/10/2020 08:34:13
Ok, that makes a bit more sense, and you're right that my B itself does have a child that's a transform, which could be what's disqualifying it, rather than its proximity to A.  I opted to put a copy B* into A's boundingobject, and it seems to be working fine, though I'm sure I'll eventually move just B and then wonder why its collisions don't seem right any more...


Actually, I'm setting my supervisor controller to move B* to keep up with B, so I won't have to worry about them ever mismatching.  Seems like this should be something that Webots should be able to just take care of itself though, because it's got to be a common issue wanting to get a transformed shape into a bounding box, while also wanting to use that same transform to help position other stuff...

##### David Mansolino [Cyberbotics] 09/10/2020 08:49:42
We are indeed aware of the issue, and it is on our TODO list, but this is not so easy to support and we are currently all very busy with other improvment/bug fix, but if you want to contribute your are welcome: [https://github.com/cyberbotics/webots/blob/master/CONTRIBUTING.md](https://github.com/cyberbotics/webots/blob/master/CONTRIBUTING.md)

##### Justin Fisher 09/10/2020 09:07:00
I totally understand about long TODO lists, and I can see how this one would be tricky.  My first thought about how to implement this is that you'd probably want a different USE-like functionality, perhaps called SHADOW, where any solid's boundingobject's children can SHADOW any firmly-connected descendant shape of the solid (i.e., no intervening joints), and a boundingobject SHADOWing a DEF is equivalent to adding a transform to the children of that boundingobject which captures the relative position of that DEF with respect to the solid, and then having a child of this transform USE the shadowed shape.  In other words, SHADOW would be like USE-BOTH-DEF-AND-ITS-TRANSFORM, but would be usable only in boundingobjects.  (Since this would always put a copy of a shape in the very same location as the original, you'd almost never want that aside from the case of boundingobjects anyway.)

##### Olivier Michel [Cyberbotics] 09/10/2020 09:20:37
If you want to go ahead with this idea, please open an issue on GitHub, explaining the problem in details and proposing a solution. We will continue the discussion there and once we all agree on the design, you could proceed with the implementation.

##### Ostii 09/10/2020 10:18:09
how to make PID work with the IMU's Yaw angle?

##### David Mansolino [Cyberbotics] 09/10/2020 10:19:14
PID, is for controlling the speed of the motor according to its position. If you want to control the PID according to any other input, you have to write your own PID controller (which should not be so difficult).


Here is a simple sample simulation controlling motors depending on a position sensor input using a PID controller: [https://robotbenchmark.net/benchmark/inverted\_pendulum/simulation.php](https://robotbenchmark.net/benchmark/inverted_pendulum/simulation.php)

##### Ostii 09/10/2020 10:21:19
alright let me check it out


This is the actual robot to code for using C
%figure
![webotrobot.png](https://cdn.discordapp.com/attachments/565154703139405824/753562232347951144/webotrobot.png)
%end


robot should start from the green field and go to the table with boxes... from there it must place the boxes on the three separate tables on opposite side
%figure
![webotstopview_LI.jpg](https://cdn.discordapp.com/attachments/565154703139405824/753562418155880488/webotstopview_LI.jpg)
%end



%figure
![webotstopview2.png](https://cdn.discordapp.com/attachments/565154703139405824/753562419887997048/webotstopview2.png)
%end

##### David Mansolino [Cyberbotics] 09/10/2020 10:28:33
That looks like a nice challenge

##### Ostii 09/10/2020 10:29:07
the robot must be able to travel from the green point and avoid collision with the walls.


I actually need help with it


setting out the PID and IMU to move around

##### David Mansolino [Cyberbotics] 09/10/2020 10:31:27
I am sorry but this is more a robot-control issue rather than a Webots specific issue. You should probabyl ask this on a robot control forum (such as [https://robotics.stackexchange.com/](https://robotics.stackexchange.com/)). Or if you want Cyberbotics provides professional consulting to help you with this: [https://www.cyberbotics.com/#plans](https://www.cyberbotics.com/#plans)

##### Ostii 09/10/2020 10:32:14
alright... thank you very much `@David Mansolino`

##### David Mansolino [Cyberbotics] 09/10/2020 10:32:25
You're welcome

##### culurciello 09/10/2020 13:25:41
Hi, I have added a gripper to the UR5 and wanted to modify the arm chain with the gripper so that IK would work. But I am not sure how to add the new link to the arm chain. Is there a doc that can help me? Thanks a lot
> **Attachment**: [ur5\_grip.wbt](https://cdn.discordapp.com/attachments/565154703139405824/753607130237370400/ur5_grip.wbt)

##### David Mansolino [Cyberbotics] 09/10/2020 13:46:34
when you say 'modify the arm chain' ? Which IK are you using? Are you refeering the the ikpy chain module?

##### Simon Steinmann [Moderator] 09/10/2020 13:47:06
`@culurciello` are you runnng linux?

##### culurciello 09/10/2020 13:54:31
Mac OS X


I am using this arm chain and simple controller to test
> **Attachment**: [ur\_ik\_test.py](https://cdn.discordapp.com/attachments/565154703139405824/753614536774254659/ur_ik_test.py)


But I have added a gripper and am not sure how to easily change the armChain


yes the ikpy Chain

##### David Mansolino [Cyberbotics] 09/10/2020 13:57:48
In that case, I would recommend checking this example which use ikpy too and compute the armchain dynamically from the robot definition: [https://github.com/cyberbotics/webots/blob/master/projects/robots/abb/irb/controllers/inverse\_kinematics/inverse\_kinematics.py](https://github.com/cyberbotics/webots/blob/master/projects/robots/abb/irb/controllers/inverse_kinematics/inverse_kinematics.py)

##### culurciello 09/10/2020 14:01:28
Thank you `@David Mansolino` I have looked at taht. Maybe a better question is How can in troduce an offset at the end of the arm chain?

##### David Mansolino [Cyberbotics] 09/10/2020 14:05:11
If you check the doc of the 'from\_urdf\_file' function ([https://ikpy.readthedocs.io/en/latest/chain.html?highlight=from\_urdf\_file#ikpy.chain.Chain.from\_urdf\_file](https://ikpy.readthedocs.io/en/latest/chain.html?highlight=from_urdf_file#ikpy.chain.Chain.from_urdf_file)) you can see that there is a 'last\_link\_vector' argument that is made exactly for this.

##### Simon Steinmann [Moderator] 09/10/2020 14:08:38
you can use this controller
> **Attachment**: [generic\_inverse\_kinematic.zip](https://cdn.discordapp.com/attachments/565154703139405824/753617939290390659/generic_inverse_kinematic.zip)


I already added the correct last\_link\_vector for the robot. For other robots, you might wanna reset it to 'None'

##### culurciello 09/10/2020 14:46:34
wow, thank you `@David Mansolino` `@Simon Steinmann` you guys are the best!

##### David Mansolino [Cyberbotics] 09/10/2020 14:46:45
You're welcome 😉

##### Simon Steinmann [Moderator] 09/10/2020 14:47:15
[https://tenor.com/view/wink-and-point-finger-guns-wink-supernatural-dean-gif-12682706](https://tenor.com/view/wink-and-point-finger-guns-wink-supernatural-dean-gif-12682706)

##### culurciello 09/10/2020 14:48:20
I have to say I found Webots technical help one of the best: fast response, very precise,  and most responsive


`@Simon Steinmann` the automatic IK scipt you made are a life saver

##### Simon Steinmann [Moderator] 09/10/2020 14:53:46
😄  thx, happy someone can have some use out of it


it really took me  a while to understand all that. I know how it can be getting into it

##### Justin Fisher 09/11/2020 00:23:04
If I use a supervisor controller to move (by changing translation field) a part of a robot, and then hit reset, sometimes that part stays in place (relative to the rest of the robot) and sometimes it doesn't.  I think maybe the difference is that "solids" that are firmly connected (no intervening movable joints) to the main robot revert their position upon reset, whereas shapes that are firmly connected don't?  Does this seem right?  Is there a straightforward way to get firmly connected solids to not revert?  I know I can have the supervisor force things back in place as soon as it starts running, but it's strange to have a paused not-yet-running simulation with the robot having just mangled itself onscreen.

##### David Mansolino [Cyberbotics] 09/11/2020 05:47:31
Hi `@Justin Fisher`, that looks indeed like something not supported by the reset functionality (restoring position of 'fixed' Solids), it would be nice if you can provide a minal example reproducing this and report it here: [https://github.com/cyberbotics/webots/issues/new?template=bug\_report.md](https://github.com/cyberbotics/webots/issues/new?template=bug_report.md)

We will then investigate and fix this.

##### Justin Fisher 09/11/2020 08:28:16
I guess I'm not sure which is the "correct" functionality and which is "incorrect".  Suppose I have a robot R with two children:  A is a transformation leading to a shape A+ and B is a touch sensor solid also leading to a shape B+.  Have the supervisor modify both A and B's translation fields, so that shapes A+ and B+ both move.  Now hit reset.  Based on my experience with more complex examples, I think the solid B will revert back to its original translation, whereas the translation A will keep the translation the controller gave it.  Which of those is "correct" and which is "incorrect"?



For my purposes, I like having them keep acquired translations, like A does, since I'm using the supervisor to configure parts without adding a bunch of extra motors and joints that would complexify the simulation, and for my purposes I'm happy having the configurations stick around after I hit reset.  But I could easily imagine other use cases where people would instead prefer to have both A and B revert.

##### David Mansolino [Cyberbotics] 09/11/2020 08:30:07
The expected behavior is indeed that both A and B get reverted.

##### Justin Fisher 09/11/2020 08:34:34
That was what I originally expected too, and was happily surprised that it didn't work that way with translated shapes.  It also doesn't work that way with supervisor-imposed changes to the spines of extrusion Protos, for whatever that's worth.  For my purposes, I was happy all those things kept the configurations my supervisor gave them, and then it was an unpleasant surprise when a touch sensor kept forgetting where my supervisor told it to be when everything else remembered.  But anyway, it sounds like a lot of stuff doesn't give the behavior you expect.  Not that I really want you to "fix" that... 🙂

##### David Mansolino [Cyberbotics] 09/11/2020 08:36:16
The reset functionality is quite new, and it is indeed possible that not all the use case have been tested yet.

##### Justin Fisher 09/11/2020 08:41:25
So is the ideal you're aiming for that hitting reset would revert the simulation back to exactly the state it would be in if you had just reloaded?  (Just with less processing than a full reload would require?)  Or are there some things that reset isn't supposed to revert?

##### David Mansolino [Cyberbotics] 09/11/2020 08:43:04
Yes exactly that the ideal case. The only difference is when called from the supervisor API (wb\_supervisor\_simulation\_reset) the controller are not restarted.


You can find here the exact list of things the reset is supposed to do: [https://cyberbotics.com/doc/guide/the-user-interface#file-menu](https://cyberbotics.com/doc/guide/the-user-interface#file-menu)

##### Justin Fisher 09/11/2020 09:03:23
So here's the list of things that I've noticed not reverting, though again I myself am perfectly happy that they don't revert:  (a) transformations altered by supervisor, (b) geometries altered by supervisor like dimensions of box shapes or spines of extrusion protos, (c) appearance properties, like baseColor, altered by supervisor.  If your ideal really is to revert everything, those would need to be reverted too.



Another bug in this ballpark:  hitting reset also doesn't seem to do what the docs you link say regarding LED's.  Example:  create a RGB LED (gradual = true, no list of color options).  Give it a child shape with a PBR appearance with an emissive color matching the glow you'd like that LED to have as its default at start of simulation, say white (1,1,1).  That color will show up fine.  Save the world, run the simulation, and hit reset.  Now that Emissive Color will have been replaced by black (0,0,0), which is *not* its original value, counter to the docs you linked.


I would encourage you consider that maybe your ideal *shouldn't* be to revert absolutely everything.  Instead I'd suggest that the ideal should be to revert everything that happened due to non-supervisor-API controller actions and the Physics engine (so pretty much all the things on the list you linked, like absolute locations, joint angles, velocities, LED/displays, but not much more).  As for things that only *supervisors* can do (like the things I listed above) -- if supervisors made a point of *doing* it, then I'd say leave it up to them to *undo* it if they want, and not if they don't.



If you decide to view the ideal that way, then a child solid like a touch sensor that is firmly attached (i.e., not by a movable joint) to its parent should *not* have its translation field reverted, since the physics engine treats firmly attached solids as being fully bound together and so changes in this child solid's translation field can arise only by the intentional action of a supervisor, not from ordinary physics.  So I think you should leave it up to the supervisor to revert, if it wants.

##### David Mansolino [Cyberbotics] 09/11/2020 09:36:04
Yes you are right, the goal of the revert is to be able to remove any modification made by the simulation run (both from physics and controllers) and not changes done by the user in the scene-tree, the Supervisor controller is indeed in the middle of these two cases it changes the scene-tree like a user would do manually but is a controller and therefore for now changes made by the supervisor controller are not reset. But I agree this is not perfectly clear from the doc, we will try to improve this.

##### Justin Fisher 09/11/2020 09:47:00
You're right that lots of changes made by supervisors aren't reset (like colors, geometries, changes to transform fields), but other changes *are *currently reset, like added nodes or changes to translation and rotation fields of bound solids, even though these changes can be brought about only by supervisor-API or the scene tree interface.  So they probably *shouldn't* be reset.



Incidentally, one of my biggest rip-out-my-own-hair frustrations with Webots is making changes to the scene tree, going to save them, having the warning pop up that the simulation had already been run so I probably shouldn't save the current state, and therefore losing all those changes when I hit reset.  This is probably another case where the current "reset" functionality is overzealous in reverting changes that it would have been better for it not to have reverted, especially nodes added by the user.


(or maybe you should pop up the warning right when the user starts making scene tree alterations when the simulation has been run, rather than waiting until they're trying to save all the work they wasted time doing)

##### David Mansolino [Cyberbotics] 09/11/2020 09:56:41
> You're right that lots of changes made by supervisors aren't reset (like colors, geometries, changes to transform fields), but other changes *are *currently reset, like added nodes or changes to translation and rotation fields of bound solids, even though these changes can be brought about only by supervisor-API or the scene tree interface.  So they probably shouldn't be reset.

You're right, however, currently it is difficult to know when resettign if the field have been changed by the supervisor too or by the phsyics only



About the pop-up window I agree, this window is annoying (it annoys me to belieave me), but it is very important that user know when they saved a run world (it has some serious consequences on the stability of the simulation) and on the other hand adding this pop-up window as soon as the user change the scene-tree is probably over-killed and will annoy the user even more (I am for example often making runtime changes to test something without wanting at all to save later).

##### Justin Fisher 09/11/2020 10:13:37
I'd suggest having the default be to warn people right when they start altering the scene-tree on an already run simulation, with a check-box preference for whether you want to continue receiving warnings like this.  Then experienced people like you can uncheck this box when they find the warning annoying, whereas newer users won't end up getting nearly so frustrated.



As for what to revert, I agree that it can be tricky to draw the line.  But it does seem like there are some easy-to-detect cases (like added nodes and changes to  translation/rotation fields in bound solids) that can arise only due to supervisors/scene-tree-interface, but currently are needlessly and sometimes even frustratingly reverted.  Even if you can't get *everything* on the right side of the line, you at least could get *this stuff* on the right side of it.

##### Awith 09/11/2020 21:24:31
If I have a IndexedFaceSet geometry that is roughly similar to a cube (it's important that it's not a cube), how can I tile a texture to every side of the cube? Using an appearance node or PBRapperance node results in textures on two sides rather than all 6

##### Justin Fisher 09/12/2020 00:08:41
> If I have a IndexedFaceSet geometry that is roughly similar to a cube (it's important that it's not a cube), how can I tile a texture to every side of the cube? Using an appearance node or PBRapperance node results in textures on two sides rather than all 6

`@Awith` In Webots the triangles that make up polygons are often (always?) one sided, which is why if you drag the camera below the floor you can see up through the floor to the bottom of your robot.  Is there a risk that some of your triangles are facing the wrong direction -- e.g., if you swing your camera around to the other side (and close enough to not have your view blocked by other things, including other faces of your quasi-cube), do they then become visible?  At any rate that has often been the explanation when I formed geometries that seemed to be missing faces.  If that is what's happening, the solution is probably just to reorder some of your vertices, so you consistently go clockwise (or counter-clockwise, depending on how you set the CCW flag) around each face.


And I have some questions of my own, involving reading keystrokes.  Webots keyboard docs give instructions for how to detect the user pressing CONTROL+B.  However, CONTROL+B is apparently a Webots keyboard shortcut for toggling whether or not the 3D simulation window is displayed.  It looks like Webots intercepts all such shortcuts for its own interface and doesn't pass them to robot controllers.  Is there a way to override that behavior, e.g., for me to make CONTROL+B get processed by my controller rather than having it hide away the simulation (which is *not* what I want!)?  If not, is there at least a list of all the key-combinations that will get intercepted this way, and what they do?  And I guess the docs should probably be changed to an example that actually works? 



(Just to be clear, I can successfully detect lots of keypresses, including CONTROL+key combinations that aren't Webots interface shortcuts, so I doubt I'm missing anything obvious.  If I have it print every value that robot.keyboard.getKey() returns, it prints values for other keys and key-combinations, but prints nothing at all when I press interface keyboard shortcuts like CONTROL+B.)

##### Awith 09/12/2020 01:22:43
> `@Awith`  Is there a risk that some of your triangles are facing the wrong direction 

`@Justin Fisher` 

I'm certain that this is not the issue as the other sides have very long lines instead of textures, thanks for the suggestion though

##### Justin Fisher 09/12/2020 01:39:55
If it is successfully rendering all the faces, just with undesired textures, then I'd probably start messing with the texCoordIndex to try to be sure to map each vertex to an appropriate part of the texture I was using, and you may need a special texture that surrounds the point that each vertex maps to with appropriately oriented copies of all the images that you want to have appear on the faces surrounding that vertex.  Kind of a headache to do all that manually...


Depending on just how much different from a cube you need your quasi-cube to be, you might find that the textured parallelipiped proto can give you the geometry you need, together with more/easier options for how the faces will be textured.  Or perhaps delving into its source-code will give you ideas for how to make your own quasi-cube work.


> Webots keyboard docs give instructions for how to detect the user pressing CONTROL+B.  However, CONTROL+B is apparently a Webots keyboard shortcut for toggling whether or not the 3D simulation window is displayed.  It looks like Webots intercepts all such shortcuts for its own interface and doesn't pass them to robot controllers.  [...] And I guess the docs should probably be changed to an example that actually works? 

`@Justin Fisher`

I guess it'd also be good to for the docs to document another oddity with keyboard (or perhaps for you to fix this oddity).  The shifted versions of ordinary letter keys (e.g., shift A) return SHIFT plus the same value they return when unshifted (the ord of the capital letter printed on the key).  In contrast, contrary to the current documentation, shifted versions of ordinary number keys (e.g., shift 1) do NOT return SHIFT + the same thing they return when unshifted (the ord of the numeral printed on the key).  Instead, they return SHIFT+ the ord of the punctuation mark printed on that key: e.g., shift 1 returns SHIFT+ord('!').  I would understand if hitting shift 1 returned SHIFT+ord('1'), and I'd also understand if it returned ord('!'), but it was surprising that it returned SHIFT+ord('!').   It's probably not terrible to have this sort of inconsistency between how letter-keys and number-keys are treated, but it would be good if it was documented, rather than leaving people like me to sort it out on my own.

##### R\_ 09/13/2020 08:44:15
Is it better to start coding Webots in C or C++?

There seems to be more support for C, but I do not have much experience in either language......😬

`@Simon Steinmann`

##### Simon Steinmann [Moderator] 09/13/2020 08:46:08
Robot may be programmed in C, C++, Python, Java, MATLAB or ROS with a simple API covering all the basic robotics needs.


every function is fully covered in any language


[https://cyberbotics.com/doc/reference/nodes-and-api-functions](https://cyberbotics.com/doc/reference/nodes-and-api-functions)


the documentation is excellent, and for every function, you have the command in every programming language

##### R\_ 09/13/2020 08:48:08
Thank you `@Simon Steinmann` I didn't find this page earlier.😊

##### Simon Steinmann [Moderator] 09/13/2020 08:49:13
that tab is constantly open for me. Very useful. You can also rightclick in webots on any node, and get a link to the appropriate documentation

##### Justin Fisher 09/13/2020 08:52:24
Simon, since you're on, do you know what sorts of inputs a controller can have access to while simulation is paused (either by putting it in mode pause, or just refusing to call robot.step with a positive timestep)?  I wrestled a little bit with this, but hadn't gotten it to work the way I wanted yet.  Do the keyboard and mouse functions require simulation time to pass in order for them to capture more user inputs?

##### Simon Steinmann [Moderator] 09/13/2020 08:53:51
it has access to everything. You dont have to put the robot.step inside of a loop. you can call it specifically and at different places


there is no "pause" in webots. You execute simulation steps by explicitly calling the robot.step function.


when you dont do that, the simulation is paused basically

##### Justin Fisher 09/13/2020 08:55:31
There is also a supervisor function that you can use to set the simulation mode to pause, which I think is basically equivalent to hitting the pause button.


But when I call that, I then don't seem to be able to get any more keyboard inputs, e.g., the ones I'd hoped to use to unpause it again.

##### Simon Steinmann [Moderator] 09/13/2020 08:56:49
I never needed to use that function

##### Justin Fisher 09/13/2020 08:58:06
So why do the keyboard and mouse functions require you to specify a timestep when you initialize them, if they'll capture inputs even when timesteps aren't passing?

##### Simon Steinmann [Moderator] 09/13/2020 08:58:09
you can have your main loop, calling robot.step regularly. Then you can imbed other functions, that start a new while loop for example. Effectively pausing the simulation until you stop that second loop


With keyboard and mouse I don't really have experience. I suggest you carefully read the api documentation. Remaining questions you can ask the devs tomorrow

##### Justin Fisher 09/13/2020 09:06:29
So if I "pause" a synchronized simulation by never calling robot.step with a positive value, the user won't be able to unpause it by hitting the play button, right?  Instead, it seems like they'll have to use whatever other interface I give them (presuming I can get it to read new inputs at all).  I worry that that will confuse some of my students.  



It would be nice if supervisors could, in an appropriate circumstance, temporarily freeze the physics of the world, enable the play button to start it going again, but also keep the controller running and responding to inputs, e.g., if you want to let the user click on things in the paused simulation to get the controller to spit out information about them.  But I haven't managed to get that to work.  (I've only tried to detect keystrokes so far, but it seems like detecting mouseclicks will probably be about the same.)

##### Simon Steinmann [Moderator] 09/13/2020 09:08:47
From my understanding, the 'pause' button freezes the robot.step command. You could manually implement a ''pause' by using this api: [https://cyberbotics.com/doc/reference/keyboard](https://cyberbotics.com/doc/reference/keyboard) and setting it to spacebar for example

##### Justin Fisher 09/13/2020 09:09:33
Yes, that's exactly what I did, with spacebar as the trigger.  The problem is that, once I set the simulation to mode pause, I can't detect any more keystrokes to unpause it.

##### Simon Steinmann [Moderator] 09/13/2020 09:09:54
just could toggle a variable between True and False and put a condition before the robot.step

##### Justin Fisher 09/13/2020 09:10:08
That's also exactly what I did


but it never gets any more keystrokes

##### Simon Steinmann [Moderator] 09/13/2020 09:10:38
dont put the simulation to pause mode


that will always pause everything


just stop the main loop from executing steps when in your own 'pause mode'

##### Justin Fisher 09/13/2020 09:12:12
that alternative is what led me to express the worry that my students would get confused if there are two different ways that the simulation can come to look paused (hitting pause versus hitting space) each requiring its own method to restart it (hitting play versus hitting space again)

##### Simon Steinmann [Moderator] 09/13/2020 09:12:46
teaching moment 😉

##### Justin Fisher 09/13/2020 09:13:25
maybe the way to avoid confusion is to display a text label on screen for the space pause reminding them what they need to do to resume (and perhaps also of what else they can do while it's paused)


but this will be mostly moot if I can't detect inputs during the pause, which it seems like I won't be able to, since you enable keyboard and mouse specifying a timestep for how frequently you'd like to retrieve readings, and if I'm pausing it by refusing to let it advance, that timestep won't have passed


(but I haven't really tried it yet without setting it to mode pause, so maybe it'll work, in which case the puzzle would just be why you need to specify a timestep for these in the first place)

##### Simon Steinmann [Moderator] 09/13/2020 09:17:12
It's just the polling frequency, it should work without the timesteps


without the robot.steps*

##### Justin Fisher 09/13/2020 09:18:18
oh so it's frequency in real time, not in simulated time?  confusing that it looks so much like other references to timestep that clearly mean simulated time

##### Simon Steinmann [Moderator] 09/13/2020 09:20:01
i'm not 100% sure. Again, I dont have much experience with user input

##### Justin Fisher 09/13/2020 09:22:36
Or actually maybe that's my bad.  It does say samplingPeriod, rather than timestep, so maybe I shouldn't have assumed it meant simulated time, the way that passing a timestep when initializing robot sensors does.  

I guess the short answer is that I need to experiment more, "pausing" the simulation by merely refusing to call robot.step with a positive value, and just give up on my hope that I could have the play button "unpause" this sort of pause.

##### Simon Steinmann [Moderator] 09/13/2020 09:24:56
I think that's the right approach 🙂

##### Justin Fisher 09/13/2020 09:34:15
Well my experimentation uncovered another way to consistently crash webots.... yay?

##### Simon Steinmann [Moderator] 09/13/2020 09:40:20
you could create a bug report here: [https://github.com/cyberbotics/webots/issues](https://github.com/cyberbotics/webots/issues)


I'm not a dev, so  I'd probably be of limited use for this sort of problem

##### Justin Fisher 09/13/2020 09:44:58
I think my controller's basically entering into an infinite loop because it keeps checking keyboard.getKey() for an escape condition, which its never getting because it seems like that won't register new keys without passage of simulation time.   Unfortunately, it looks like the Webots console won't print things in this loop either (maybe it only prints during robot.step's?)

##### Simon Steinmann [Moderator] 09/13/2020 09:45:37
what language are you using?

##### Justin Fisher 09/13/2020 09:45:42
python

##### Simon Steinmann [Moderator] 09/13/2020 09:45:55
just print the keyfunction every time


that should show up

##### Justin Fisher 09/13/2020 09:46:30
i've been trying to, but nothing appears in console

##### Simon Steinmann [Moderator] 09/13/2020 09:46:59
can you share your main loop code?

##### Justin Fisher 09/13/2020 09:47:44
it'll take a moment since i'm on discord on my laptop, and on webots on my desktop

##### Simon Steinmann [Moderator] 09/13/2020 09:48:13
you can use discord directly in the browser too

##### Justin Fisher 09/13/2020 09:53:13
wow discord's web interface does not give you any obvious place to log in!


Here's the relevant code:

```    key = keyboard.getKey()  #read first new keystroke
    while key != -1:  # -1 means no more new keystrokes to process
        if key==ord(" "):  # space key pauses simulation
            print("Freezing the simulation (not to be confused with pausing)")
            key = keyboard.getKey()
            while key != 1:
               print("Flushing key: ", key)
               key = keyboard.getKey()
            print ("now looping to remain frozen, waiting for a keystroke")
            time_to_exit = False
            trials = 0
            while trials < 1000 and not time_to_exit:
                trials += 1
                print("Trial #",trials)
                key = keyboard.getKey()
                while key != -1 and robot.step(0) != -1:
                   if key == ord(" "):
                       print("Saw another space, so unfreezing.")
                       time_to_exit=True
                   else:
                       print("Flushing key: ", key)
                   key = keyboard.getKey()
```


When I hit space, the console prints nothing, not even the first "Freezing the sim..." line


it must be either the first queue-flushing or else robot.step(0) that's locking it up


or actually maybe it doesn't have a good exit condition for the outermost loop

##### Simon Steinmann [Moderator] 09/13/2020 10:00:55
your loop looks very weird tbh. Why dont you start with something simple:

while True:

    print(key)

    robot.step(timestep)


then you can probably expand it to 

is\_paused = False

while True:

    print(key)

    if key ==ord(" "):

        is\_paused = not is\_paused

    if not is\_paused:

        robot.step(timestep)

##### Justin Fisher 09/13/2020 10:03:07
well, the goal here is to get something that's *frozen*.  calling robot.step(timestep) would not be freezing it

##### Simon Steinmann [Moderator] 09/13/2020 10:04:44
edited my 2nd example in case you didn't see

##### Justin Fisher 09/13/2020 10:07:00
what you wrote doesn't read new keys in the loop

##### Simon Steinmann [Moderator] 09/13/2020 10:07:27
you defined

key = keyboard.getKey()

=


probably have to add that at the top of the loop


having lunch now

##### Justin Fisher 09/13/2020 10:20:12
With that added, your loop crashes too (or rather the controller enters into an infinite loop, and then Webots crashes when I hit reset).  When i hit space, it sets is\_paused to true, which prevents it from ever calling robot.timestep again, which prevents keyboard.getKey from ever detecting any additional keystrokes.  (Or that's what I think is happening anyway.)

##### Simon Steinmann [Moderator] 09/13/2020 11:02:10
okay, it seems that the keyboard function is tied to the timestep


you could use another python library, that is not tied to webots


why do you need that functionality anyways?

##### Justin Fisher 09/13/2020 11:06:33
Ok, I've fiddled with this a bit more.  It's tricky because no matter how quickly I press the key, getGey returns multiple instances of that key, usually an even number of total instances, so your code usually just toggles pause off/on an even number of times (which you can confirm by having it print something with each toggling).  So one change I ended up making was using *release* of the spacebar as the trigger for toggling is\_paused, so that that would happen just once per keystroke.

If, when paused, you never call robot.step, then you'll never detect any more keys, and if detecting more keys was the only way to break out of your loop, then Webots crashes when you hit reset.

If, when "paused", you keep trying to check the keyboard, but count your trials and every million trials you call robot.step(timestep), then any print commands you issue between the multiples-of-a-million trials will not display until robot.step finally gets called, and any keystrokes you tap during the interim seem not to be registered, but any key you're holding down at the time of the millionth trial will be registered.

If when paused, you keep calling robot.step(0), that seems to actually detect the keypresses and will escape right away when you tap-and-release space.  So that seems to work.  However, whatever messages you printed to console won't appear until you call robot.step with a positive value again (which I had it do after counting to a million, which incidentally is quite slow because robot.step(0) is apparently quite slow).


Why do I want it?  I'd been hoping to let my students pause the simulation, use the keyboard or mouse to trigger the controller to display some information for them about the internal state of the controller at that moment while it was paused.  It looks like I won't be able to display that info using print, which would have been the easiest option.

##### Simon Steinmann [Moderator] 09/13/2020 11:08:45
why do you need this functionality? what do you want to do while paused?

##### Justin Fisher 09/13/2020 11:09:45
Probably the "right" way to do this is by setting up an html robot window for them to interact with, but I haven't figured out how to do all that stuff yet.

##### Simon Steinmann [Moderator] 09/13/2020 11:09:54
like what info? You can get so much info already. Or you just print it all the time, when paused, you can see the last entry


double clicking on the robot, shows you all sensors, motors and other devices

##### Justin Fisher 09/13/2020 11:10:41
Much of the info would just be in the controller, not in the scene tree anywhere.

##### Simon Steinmann [Moderator] 09/13/2020 11:10:43
you can see all values in the scene tree to the left


what info?

##### Justin Fisher 09/13/2020 11:11:51
Info about the neural net that the controller is using to process sensor inputs to determine how fast to run the motors

##### Simon Steinmann [Moderator] 09/13/2020 11:12:15
[https://stackoverflow.com/questions/26584003/output-to-the-same-line-overwriting-previous/26584483](https://stackoverflow.com/questions/26584003/output-to-the-same-line-overwriting-previous/26584483)


that might help


what robot are you using if I may ask, and what ML / RL are you using for what purpose?

##### Justin Fisher 09/13/2020 11:15:30
Why were you thinking that would help?  The problem I was worried about is that if I have them use the mouse/keyboard to request different information about the net, that information won't display in the console until the simulation starts running again.  What you linked seems to be a way to effectively backspace through previous print statements, which isn't really what I need, I think

##### Simon Steinmann [Moderator] 09/13/2020 11:16:51
then some html stuff is probably the best bet. Or independent python keyboard libraries

##### Justin Fisher 09/13/2020 11:17:00
The robot is one I built myself.  The class is a cognitive science class where many of the students don't have much computer background, so we're just doing really simple stuff with neural nets, partly just seeing how they work, and a little backprop

##### Simon Steinmann [Moderator] 09/13/2020 11:18:05
so some ml algorithms on the sensor output?


btw, if you need help with inverse kinematics, I made lots of progress in that regard recently

##### Justin Fisher 09/13/2020 11:20:22
the students won't have to do anything with that, but probably some of the stuff I was wrestling with as I set up the code for customizing their robots might have benefited


since many don't have much computer background, I didn't want to throw them in the deep end trying to modify things through the scene tree, but I did want them to have a fair number of options for customizing their robot


and i was worried that using a lot of motors and joints for all the custumization options would make the simulation complex, slow, and/or unstable


so i wrote a supervisor controller that basically morphs the robot to match the specifications their code requests for it


and some inverse kinematics probably could have helped with figuring out how to morph some of the parts

##### Simon Steinmann [Moderator] 09/13/2020 11:23:23
what do you mean by morphing? and can I see the robot?

##### Justin Fisher 09/13/2020 11:23:49
noob question:  can i paste images into discord?

##### Simon Steinmann [Moderator] 09/13/2020 11:23:57
yes


just copy paste


you can also share files up to 8MB

##### Justin Fisher 09/13/2020 11:25:28
cool, will post in a moment -- gotta comment out that pause loop I stuck atop a controller


alternatively, changing "while True" to "while False" has the same effect and is much easier! 😄   Incidentally, one of the things I miss when I use Webots text editor is a keyboard shortcut to comment out a bunch of lines at once.  Is there one?

##### Simon Steinmann [Moderator] 09/13/2020 11:27:34
in python use """  lines of code """


triple quotation marks

##### Justin Fisher 09/13/2020 11:28:43
yeah that works, though for whatever reasons I like #'s.  Pycharm lets you hit a key to #-comment a bunch of lines at once, but out of solidarity with my students, I've been doing Webots editing in the Webots built-in editor

##### Simon Steinmann [Moderator] 09/13/2020 11:29:15
just use extern controllers and use the IDE of your choice


webots may have it, I have no idea. I dont use the included editor besides for small changes

##### Justin Fisher 09/13/2020 11:31:51
Here's a robot.  The "morphing" that can happen involves changing wheelbase, length to the skid roller in back, and  clearance above ground.  And repainting it.
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/754665647589556244/unknown.png)
%end

##### Simon Steinmann [Moderator] 09/13/2020 11:33:03
so the students adjust parameters like wheelbase? And you then change the model with the controller?

##### Justin Fisher 09/13/2020 11:35:30
Yes.  Here's another one with narrower wheel base, less length and height, and different colors of course.
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/754666564909006878/unknown.png)
%end

##### Simon Steinmann [Moderator] 09/13/2020 11:36:00
ahh that's quite cool


If you want, you can pm me and share your code, I can experiment a bit and try to implement a information panel


sounds like something that I should learn to do, and learning by doing is the best method 😄

##### Justin Fisher 09/13/2020 11:37:30
before the pandemic, I taught this class with Lego Mindstorms robots, and the students really enjoyed putting personal touches on the robots.  I've been trying to give them similar options here

##### Simon Steinmann [Moderator] 09/13/2020 11:37:46
what age if I may ask?

##### Justin Fisher 09/13/2020 11:37:58
college juniors, give or take

##### Simon Steinmann [Moderator] 09/13/2020 11:38:10
juniors is 2nd year?

##### Justin Fisher 09/13/2020 11:38:14
3rd year

##### Simon Steinmann [Moderator] 09/13/2020 11:38:30
ah okay. for bachelors in mechanical engineering?

##### Justin Fisher 09/13/2020 11:39:18
the students come from a variety of backgrounds, mostly some sort of cognitive science:  psych/neuro/philosophy/computers

##### Simon Steinmann [Moderator] 09/13/2020 11:39:48
ohh okay. that's interesting

##### Justin Fisher 09/13/2020 11:39:49
the class is listed as a philosophy of cognitive science class


though it's pretty interdisciplinary

##### Simon Steinmann [Moderator] 09/13/2020 11:40:06
so it's more about the neural networks and how it relates to bioligy?

##### Justin Fisher 09/13/2020 11:40:33
that's part of it, yes

##### Simon Steinmann [Moderator] 09/13/2020 11:41:59
that's interesting. If you want we can collaborate a bit. I studied Aerrospace engineering and since last year am pivoting to robotics, Reinforcement learning and connecting simulation with the real world. But I'm always keen to expanding my horizon

##### Justin Fisher 09/13/2020 11:43:35
in class we've talked about simple neural networks, they've designed some simple ones by hand (e.g., for vertical edge detection), and we've talked about hebbian learning and backpropagation


this lab activity uses Braitenburg's vehicles as a launching point, which are easily construed as a very simple neural net


for one of their objectives i'm having them show some understanding of backpropagation


where the simplest option for them is just to do it manually (and imprecisely, since many don't have enough calculus to get the details quite right) trying the robot in various locations, comparing what it does to what they think it ideally would have done there, and tweaking connection weights so it'd do better.  Repeat.


with Lego mindstorms, that was about as much as I could have them do, as their processors aren't capable of handling much more

##### Simon Steinmann [Moderator] 09/13/2020 11:47:07
That sounds fantastic though.

##### Justin Fisher 09/13/2020 11:47:17
with Webots, I have a lot more options, though i haven't figured out which is the best way to go


but anyway, the longer answer to your earlier question about why i wanted them to be able to get info when they paused is that I'd like them to be able to see activations of the various nodes in their net, so they could think about which direction backprop should tweak their connection weights and why


One option I've been considering is just to model a copy of their net in the Webots simulation, perhaps hovering over their robot's head.


If I did it that way, then your idea of having them just use the scene tree to gather info could work -- e.g., node activation could correspond to the emissive color field of the nodes in the scene tree

##### Simon Steinmann [Moderator] 09/13/2020 11:50:39
I wrote you a private message 🙂

##### Justin Fisher 09/13/2020 11:51:10
but i've been trying to keep them from needing to use the scene tree much since i don't want to overwhelm the ones who are computer-shy


so anyway, my most pressing thing for the class is figuring out what sort of sample code I want to give them to help guide them on that neural net activity

##### Simon Steinmann [Moderator] 09/13/2020 11:55:16
that should be possible. Did you see what I wrote you privately?

##### Justin Fisher 09/13/2020 11:57:21
heh, just figuring out discord, sadly

##### Simon Steinmann [Moderator] 09/13/2020 11:57:40
on the top left, you should have a message


it shows all private conversations


`@soheil` please post in the technical-questions channel for questions 🙂

##### David Mansolino [Cyberbotics] 09/14/2020 06:07:38
> And I have some questions of my own, involving reading keystrokes.  Webots keyboard docs give instructions for how to detect the user pressing CONTROL+B.  However, CONTROL+B is apparently a Webots keyboard shortcut for toggling whether or not the 3D simulation window is displayed.  It looks like Webots intercepts all such shortcuts for its own interface and doesn't pass them to robot controllers.  Is there a way to override that behavior, e.g., for me to make CONTROL+B get processed by my controller rather than having it hide away the simulation (which is *not* what I want!)?  If not, is there at least a list of all the key-combinations that will get intercepted this way, and what they do?  And I guess the docs should probably be changed to an example that actually works? 

> 

> (Just to be clear, I can successfully detect lots of keypresses, including CONTROL+key combinations that aren't Webots interface shortcuts, so I doubt I'm missing anything obvious.  If I have it print every value that robot.keyboard.getKey() returns, it prints values for other keys and key-combinations, but prints nothing at all when I press interface keyboard shortcuts like CONTROL+B.)

`@Justin Fisher` The list of shortcut is indeed unfortunately not documented yet. But you're right, we need to codument it.



> Is it better to start coding Webots in C or C++?

> There seems to be more support for C, but I do not have much experience in either language......😬

> `@Simon Steinmann`


`@R_` You should use the language you feel more confortable with.

> Simon, since you're on, do you know what sorts of inputs a controller can have access to while simulation is paused (either by putting it in mode pause, or just refusing to call robot.step with a positive timestep)?  I wrestled a little bit with this, but hadn't gotten it to work the way I wanted yet.  Do the keyboard and mouse functions require simulation time to pass in order for them to capture more user inputs?

`@Justin Fisher` maybe you want to use this function: [https://cyberbotics.com/doc/reference/robot#wb\_robot\_wait\_for\_user\_input\_event](https://cyberbotics.com/doc/reference/robot#wb_robot_wait_for_user_input_event)

##### R\_ 09/14/2020 07:28:58
Thank you! `@David Mansolino`

##### David Mansolino [Cyberbotics] 09/14/2020 07:41:59
You're welcome

##### Justin Fisher 09/14/2020 07:44:28
Awesome, thanks for pointing out wait\_for\_user\_input\_event -- it does indeed sound like just what I was looking for.


Relatedly, do you have a recommendation regarding the best way of detecting single keytaps with the keyboard device?  Even when I tap a key as quickly as I can, that key still usually generates multiple instances from keyboard.getKey(), and sometimes these arrive in the same timestep or sometimes they spill over into subsequent timesteps.   This is fine in cases where extra instances are redundant (e.g., a key to turn a light on), but not in cases where additional presses should do extra/different things -- (like make a motor go even faster, or toggle the lights back off).  It seems like this is a problem that must arise quite often, so maybe there's an easier solution than the jerry-rigged ones I've been cobbling together?

##### David Mansolino [Cyberbotics] 09/14/2020 07:56:44
From the same time step, you should not receive twice the same key if I am not wrong, but yes from two consecutive time step it is highly probable (since step are really short it is hard to press and release a key faster than a few ms), the simple solution is to check only difference (i.e. save the state of the previous step and check only for difference)

##### Justin Fisher 09/14/2020 08:09:58
Maybe I was mistaken about whether the multiples arrived same time step versus different ones.  And yes, checking for differences was one of the jerry-rigged solutions I came up with.  I had worried that this might treat a double-tap as a single long press, but googling a bit, it looks like our fingers move slowly enough that this is very unlikely, at least if you set the sampling period in the ballpark of 16ms.  



I wonder if it would make sense for you to somehow offer that detection-of-change functionality from the keyboard API?  E.g., you could easily implement keyboard.pressed() and keyboard.released() which return only the keys that changed in the relevant direction this timestep.  I guess for now, I'll probably just write a general implementation of that controller-side so I won't have to keep jerry-rigging something new to handle multiple instances for different keys.

##### Bkarso 09/14/2020 08:35:34
hello,I import my 3d model to the webots as a chileren in a robot ,but it is huge，so I make the scale(0.001 0.001 0.001),but when I make boundingObject of robot with my model shape,I also huge ,so how can i do ?hep me please.

##### Justin Fisher 09/14/2020 08:36:56
i would suggest making your boundingObject child be a transform, with the scaling you want, and then have that transform USE your model as its child

##### Bkarso 09/14/2020 08:38:29
make my model as a tf?

##### Simon Steinmann [Moderator] 09/14/2020 08:38:58
can't you export your model with meters as units?

##### Bkarso 09/14/2020 08:41:26
I import a .stl and it is huge , and i export a .wbo,i can not change the units


i use catia  to export my model ,you mean i change in catia?

##### Simon Steinmann [Moderator] 09/14/2020 08:45:47
yes


from mm to meter

##### Bkarso 09/14/2020 08:46:21
ok ,i try it .thank you very muck

##### Justin Fisher 09/14/2020 11:30:25
> I wonder if it would make sense for you to somehow offer that detection-of-change functionality from the keyboard API?  E.g., you could easily implement keyboard.pressed() and keyboard.released() which return only the keys that changed in the relevant direction this timestep.  I guess for now, I'll probably just write a general implementation of that controller-side...

`@Justin Fisher` 

In case any other Python coders would benefit from it, here's some Python code that stores currentKeys, pressedKeys, and releasedKeys as attributes of a "BetterKeyboard" object, updating them whenever you call keyboard.processKeys().


``
> **Attachment**: [message.txt](https://cdn.discordapp.com/attachments/565154703139405824/755027722530717727/message.txt)

##### Vyshak 09/14/2020 16:06:17
hi, 

Is there a way where i can send commands from keyboard inorder to move the robot left or right ??

##### Simon Steinmann [Moderator] 09/14/2020 16:06:50
literally the message.txt file above 😉


or you have a look here [https://cyberbotics.com/doc/reference/keyboard?tab-language=c++](https://cyberbotics.com/doc/reference/keyboard?tab-language=c++)

##### Justin Fisher 09/14/2020 20:50:44
`@Vyshak` A simple example of setting up a remote control is in the 4-wheels robot tutorial.  The message I posted above could help if you're frustrated that each time you tap a key, Webots registers that as multiple instances of you hitting that key.  That's usually not bad for a remote control where you hold down an arrow key to keep the robot turning left, since you probably are happy having it turn left for however many milliseconds the key happens to be down, and not just turn left for a single frame right when they press the key.  So I'd start with the tutorial, and only worry about something fancier if you want to detect individual key-presses (e.g., if you give your robot headlight LEDs and want a single key to toggle whether they're off or on, then you'll need something akin to the code I posted, or else each time you depress the key, the lights will repeatedly flicker between off and on for however many milliseconds your finger happens to hold down the key, with it being unpredictable which state they'll end up in).

##### dimple.bhuta 09/15/2020 06:45:54
Hello, 

I have a vehicle in simulation, I have its defName. I remember we can use ([https://www.cyberbotics.com/doc/reference/supervisor?tab-language=python#wb\_supervisor\_node\_get\_field](https://www.cyberbotics.com/doc/reference/supervisor?tab-language=python#wb_supervisor_node_get_field)) to get and change position and orientation. However I am not sure about how to access these variables in python. Please let me know if there are any examples available

##### David Mansolino [Cyberbotics] 09/15/2020 06:47:48
Hi, the same way as in c, the difference is that Node and Feld are classes, here is an example available in all the languages: [https://cyberbotics.com/doc/guide/supervisor-programming?tab-language=python](https://cyberbotics.com/doc/guide/supervisor-programming?tab-language=python)

##### dimple.bhuta 09/15/2020 06:52:00
thank you it worked

##### David Mansolino [Cyberbotics] 09/15/2020 06:53:19
You're welcome

##### dimple.bhuta 09/15/2020 07:07:09
Hi sorry i cant find in documentation about angle. I can set and get the orientation of the vehicle by getSFRotation and setSFRotation.


But how do i get and set the angle.

##### David Mansolino [Cyberbotics] 09/15/2020 07:07:42
Which angle?

##### dimple.bhuta 09/15/2020 07:09:03
so in case of rotation field there is 3 values of yaw pitch and roll and angle


so its rotation type, x, y,z and angle

##### David Mansolino [Cyberbotics] 09/15/2020 07:09:54
In Webots the rotation is expressed in axis-angle representation: [https://en.wikipedia.org/wiki/Axis%E2%80%93angle\_representation](https://en.wikipedia.org/wiki/Axis%E2%80%93angle_representation)


So the angle is the last value returned by getSFRotation

##### dimple.bhuta 09/15/2020 07:11:53
ok sorry i missed printing the last value. Thank you for your help

##### David Mansolino [Cyberbotics] 09/15/2020 07:12:04
No problem, you're welcome

##### Lukulus 09/15/2020 09:15:13
Hello,

I am trying to display images on a Display on my robot in my simulation. But I can only see the the images on the seperate Window on top left.

Is it possible to see also the images on the Display in the simulation?

##### David Mansolino [Cyberbotics] 09/15/2020 09:17:39
Hello, see this example where what you want to do is done with a display on the ground: [https://cyberbotics.com/doc/guide/samples-devices#display-wbt](https://cyberbotics.com/doc/guide/samples-devices#display-wbt)

##### Lukulus 09/15/2020 09:54:24
thank you, this helped me

##### David Mansolino [Cyberbotics] 09/15/2020 09:56:51
You're welcome

##### Bkarso 09/16/2020 07:05:08
hello,If I want to make a device like HokuyoUtm30lx,so how can I do ? there are some manual？

##### Olivier Michel [Cyberbotics] 09/16/2020 07:16:47
You should probably follow the Webots tutorials until tutorial 7 at least to understand how to create a PROTO file.


Then, you should take inspiration from the existing Hokuyo proto files to create yours.


They are located in `webots/projects/devices/hokuyo/protos/`.

##### Çağrı Kaymak 09/16/2020 11:17:16
Hey everyone. I placed the FSR sensors on the feet of Robotis Op2 in Webots and real system. In the Webots environment, I can get force and ZMP information both in the console and in the robot window. However, when I upload the controller to the robot, I cannot get any FSR data both in the console and in the robot window. FSRs' IDs on the robot are 111 (right) and 112 (left). What kind of problem could it be, Anyone have any ideas? Thanks in advance.

##### David Mansolino [Cyberbotics] 09/16/2020 11:47:23
HI, unfortuntately, the Webots transfer functionnality for the rootis-op2 does not support the FSR.

##### Simon Steinmann [Moderator] 09/16/2020 11:50:43
IndexedFaceSet: Cannot create IndexedFaceSet because: "The triangle mesh has no valid quad and no valid triangle.".


what does that mean?

##### David Mansolino [Cyberbotics] 09/16/2020 11:52:40
This means that the indexes are not creating valid triangles.

##### Simon Steinmann [Moderator] 09/16/2020 11:54:54
ohhhh I suspect I know the problem. in the .obj file, vertices indices defined under faces, link to line numbers... should be fixable 🙂


am I correct to assume, that coordIndex in webots starts with 0, opposed to .obj, where it starts with 1?


hence this:

coordIndex.append(int(indices[0]) - 1)  # vertex coordinates

##### Olivier Michel [Cyberbotics] 09/16/2020 12:03:50
Yes, this is correct, coordIndex starts with 0 in Webots.

##### Çağrı Kaymak 09/16/2020 12:04:32
Ok, I understood. Many thanks

##### David Mansolino [Cyberbotics] 09/16/2020 12:04:47
> Ok, I understood. Many thanks

`@Çağrı Kaymak` You're wlecome

##### Simon Steinmann [Moderator] 09/16/2020 12:05:18
is webots throwing out unused vertices when creating a trimesh?


say we define 100 vertices (coord points), but the faces only use 50 of them (coordindex).


will the unused points get thrown out?

##### Olivier Michel [Cyberbotics] 09/16/2020 12:07:06
What do mean by throwing out? It loads them all on the GPU and the GPU ignore them if they are not indexed.

##### Simon Steinmann [Moderator] 09/16/2020 12:07:22
when converted to proto

##### Olivier Michel [Cyberbotics] 09/16/2020 12:08:10
When converting to proto, I guess it will keep them all (I don't believe that we check if they are used and drop them if not).

##### Simon Steinmann [Moderator] 09/16/2020 12:08:17
v-hacd algorithm creates .obj files like this. Multiple geometries, and the faces only use the points defined under that object. But i dont know if that is a general .obj rule
> **Attachment**: [link\_1.obj](https://cdn.discordapp.com/attachments/565154703139405824/755761981570416730/link_1.obj)


theoretically, a second object could use a vertex index of another object if I'm not mistaken

##### Olivier Michel [Cyberbotics] 09/16/2020 12:09:16
I don't know either...

##### Simon Steinmann [Moderator] 09/16/2020 12:09:53
.obj files are edge cases anyways, I'll write it for the v-hacd structure

##### saditya 09/16/2020 13:56:35
I have this rotational blade with the following values. I need to rotate this in a circular fashion.
%figure
![Selection_076.png](https://cdn.discordapp.com/attachments/565154703139405824/755789233884496062/Selection_076.png)
%end


> I have this rotational blade with the following values. I need to rotate this in a circular fashion.

`@saditya` #include <webots/Robot.hpp>

\#include <webots/Motor.hpp>



int main(int argc, char **argv) {

  // create the Robot instance.

  Robot *robot = new Robot();



  // get the time step of the current world.

  int timeStep = (int)robot->getBasicTimeStep();





   Motor *motor = robot->getMotor("motor2");



  while (robot->step(timeStep) != -1) {



motor->setPosition(INFINITY);

motor->setVelocity(6.28);





  // Enter here exit cleanup code.



  delete robot;

  return 0;

}


Wrote a small piece of code to simualate it but the blade doesnt seem to rotate. Could you help me out?


That is how it is.
%figure
![Selection_079.png](https://cdn.discordapp.com/attachments/565154703139405824/755789750891315363/Selection_079.png)
%end

##### David Mansolino [Cyberbotics] 09/16/2020 13:59:06
maybe the maxtorque of 10Nm is not enough to make it rotate

##### saditya 09/16/2020 13:59:19
I added the hinge joint, motor and the end point solid(blade)


I

> maybe the maxtorque of 10Nm is not enough to make it rotate

`@David Mansolino` Is there something wrong with my controller or my hinge joint axis?

##### David Mansolino [Cyberbotics] 09/16/2020 14:02:58
In the RotationalMotor node, try increasing the value of the 'maxTorque' field.

##### saditya 09/16/2020 14:06:51
When i try to change the position for hinge joint this is what happens. Is this normal?
> **Attachment**: [finale53.mp4](https://cdn.discordapp.com/attachments/565154703139405824/755791816363737088/finale53.mp4)


> In the RotationalMotor node, try increasing the value of the  DIid'maxTorque' field.

`@David Mansolino` Did but nothing changes

##### David Mansolino [Cyberbotics] 09/16/2020 14:09:05
this probably indicate that the axis is wrong if the solid is moving along the wrong axis

##### saditya 09/16/2020 14:09:11
I need it rotate clockwise around the gates


to rotate in a circular fashion


IT moves in the right axis now

##### David Mansolino [Cyberbotics] 09/16/2020 14:11:21
then change the axis direction

##### saditya 09/16/2020 14:11:48
But i have to continously make it move that doesnt happen still

##### David Mansolino [Cyberbotics] 09/16/2020 14:11:49
if you need to inverse the direction you can either invert the axis aither invert the target position in the controller

##### saditya 09/16/2020 14:12:46
> if you need to inverse the direction you can either invert the axis aither invert the target position in the controller

`@David Mansolino` It rotates well now. But i need it be continously moving. Is that not possible?


Also set the torque to 30

##### David Mansolino [Cyberbotics] 09/16/2020 14:13:29
that what it is supposed to do, maybe you need to decrease the velocity

##### saditya 09/16/2020 14:14:23
> that what it is supposed to do, maybe you need to decrease the velocity

`@David Mansolino` It just like a static solid. I need the axe to continoulsy move

##### David Mansolino [Cyberbotics] 09/16/2020 14:15:11
On the video you showed it is moving no?

##### saditya 09/16/2020 14:18:53
> On the video you showed it is moving no?

`@David Mansolino`  I am changing the poisition in the hinge joint. I want is when i open the world file it should start running until i close the file. Shoulnd'nt stop rotating in the circular fashion.
> **Attachment**: [finale53\_1.mp4](https://cdn.discordapp.com/attachments/565154703139405824/755794847914393760/finale53_1.mp4)

##### David Mansolino [Cyberbotics] 09/16/2020 14:20:58
did you assign the controller to the robot?

##### saditya 09/16/2020 14:21:08
When i increase or decrease the position value it moves along the axis. I want it to move forever in that way. NON STOP. TIll the user exits the simulation
%figure
![Selection_080.png](https://cdn.discordapp.com/attachments/565154703139405824/755795412862107729/Selection_080.png)
%end

##### David Mansolino [Cyberbotics] 09/16/2020 14:21:57
> did you assign the controller to the robot?

##### saditya 09/16/2020 14:30:42
`@David Mansolino` Thanks a ton! Works great now! 🙂

##### David Mansolino [Cyberbotics] 09/16/2020 14:31:49
You're welcome 🙂

##### soheil 09/16/2020 23:58:46
hello everyone. I am trying to simulate a robot with 2 wheels in the front for moving it and one caster joint in the rear for rotating it. My question is about those wheels for moving. I want to have one motor connected to both of them and I want them to be diferential wheels. How can I do it? I couldn't find differential wheels in Webots. Just one deprecated one. Thanks

##### Justin Fisher 09/17/2020 04:41:52
`@soheil`:  I'd start here:  [https://www.cyberbotics.com/doc/reference/differentialwheels](https://www.cyberbotics.com/doc/reference/differentialwheels)


`@soheil` But I'd also suggest not using the old "differential wheels" implementation in Webots, and instead just building the robot with the two front wheels each driven by its own motor (e.g. starting with the 4-wheel robot tutorial and deleting the back two wheels.)  For the rear caster, I've had pretty good luck putting another wheel spinning forwards on a hinge there (a cylinder worked, but I ended up liking a spinning sphere better), setting its `contactMaterial` property to be something new (I called mine `"skid"`) and then in WorldInfo > contactProperties add an entry specifying that `"skid"` should have its interaction with `"default"` material involve very little friction (I used `coulombFriction 0.1`).   This lets it spin forwards as your robot drives along, but also to easily slide sideways across the ground as the robot turns.

##### Çağrı Kaymak 09/17/2020 13:31:44
Hey everyone, I cannot open Robotis Op2's robot window on Windows 10. I get the following error: Error: robot window initialization failed

Error: Cannot load the "C: /Users/Mechatronics/AppData/Local/Programs/Webots/projects/robots/robotis/darwin-op/plugins/robot\_windows/robotis-op2\_window/robotis-op2\_window.dll" robot window library. So I had to work on Ubuntu for a while, is there a solution for Windows 10?


Thanks in advance


By the way, I am using Webots 2020b revision1 version.

##### David Mansolino [Cyberbotics] 09/17/2020 13:35:53
You probably have a conflicting library in your PATH, you should check in particular for libsh and libzip

##### Çağrı Kaymak 09/17/2020 13:38:43
I get this error when the controller on the robot has a python extension.

##### David Mansolino [Cyberbotics] 09/17/2020 13:39:16
You mean the controller of the robot window is written in PYthon?

##### Çağrı Kaymak 09/17/2020 13:42:12
No. When I want to upload to Robotis OP 2 a controller that is written in Python, I get this error. If controller is written in C++, there is no problem.


Everything is ok in Ubuntu, I only have this problem in Windows 10.

##### David Mansolino [Cyberbotics] 09/17/2020 13:46:32
There is probably something conflicting between the Python (which version are you using?) libraries on Windows and this robot-window.

##### Simon Steinmann [Moderator] 09/17/2020 13:48:40
I'm somewhat at an end here. This .dae file of the kuka kr120 specifies unit as meter, but the vertices are clearly millimeter values (in the hundreds). Yet on import, it seems correct. The scale is automatically set to 0.001
> **Attachment**: [base\_link.dae](https://cdn.discordapp.com/attachments/565154703139405824/756149629443113030/base_link.dae)

##### Çağrı Kaymak 09/17/2020 13:48:58
> There is probably something conflicting between the Python (which version are you using?) libraries on Windows and this robot-window.

`@David Mansolino` 3.7.3

##### Simon Steinmann [Moderator] 09/17/2020 13:49:24

%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/756149813174599751/unknown.png)
%end

##### David Mansolino [Cyberbotics] 09/17/2020 13:51:04
> `@David Mansolino` 3.7.3

`@Çağrı Kaymak` ok,can you please report this here so that we can try to reproduce and fix this (I am not currently on Windows): [https://github.com/cyberbotics/webots/issues/new?template=bug\_report.md](https://github.com/cyberbotics/webots/issues/new?template=bug_report.md)

##### Çağrı Kaymak 09/17/2020 13:51:56
of course `@David Mansolino` . Many thanks

##### David Mansolino [Cyberbotics] 09/17/2020 13:52:28
> I'm somewhat at an end here. This .dae file of the kuka kr120 specifies unit as meter, but the vertices are clearly millimeter values (in the hundreds). Yet on import, it seems correct. The scale is automatically set to 0.001

`@Simon Steinmann` it is possible that one of the urdf element has a scale value, at the end the scale is correct in Webots right?

##### Simon Steinmann [Moderator] 09/17/2020 13:53:07
nothing in urdf, and this is directly imported in webots from the .dae file

##### David Mansolino [Cyberbotics] 09/17/2020 13:53:47
Oh ok, then the dae probably speify the scale directly.

##### Simon Steinmann [Moderator] 09/17/2020 13:53:54
nope


says meter=1

##### David Mansolino [Cyberbotics] 09/17/2020 13:56:27
You're right, however, in the dae file I can see some transformation:

```
<matrix sid="transform">9.99987e-4 0 0 0 0 9.99987e-4 0 0 0 0 9.99987e-4 0 0 0 0 1</matrix>
```

This looks like a scaling of ~0.001

##### Simon Steinmann [Moderator] 09/17/2020 13:56:34
just found that too


uuuurgh... that complicates my v-hacd stuff... trimesh library doesnt take this into account I think


[https://tenor.com/view/lilo-and-stitch-stitch-why-mad-upset-gif-3393236](https://tenor.com/view/lilo-and-stitch-stitch-why-mad-upset-gif-3393236)

##### David Mansolino [Cyberbotics] 09/17/2020 13:57:58
We are using inside Webots libassimp, this library helps a lot to read various 3D file formats in a homogeneous way, maybe that can help?

##### Simon Steinmann [Moderator] 09/17/2020 13:58:38
thx, I'll have a look at it

##### David Mansolino [Cyberbotics] 09/17/2020 13:58:46
> of course `@David Mansolino` . Many thanks

`@Çağrı Kaymak` thank you, I will try tomorrow

##### Simon Steinmann [Moderator] 09/17/2020 14:01:28
can you use that library in python?

##### David Mansolino [Cyberbotics] 09/17/2020 14:02:27
Yes, there are port for many languages: [https://github.com/assimp/assimp/blob/master/port/PyAssimp/README.md](https://github.com/assimp/assimp/blob/master/port/PyAssimp/README.md)

##### Simon Steinmann [Moderator] 09/17/2020 14:03:23
thx

##### David Mansolino [Cyberbotics] 09/17/2020 14:05:16
By the way, are you planning to finalize [https://github.com/cyberbotics/webots/pull/2226](https://github.com/cyberbotics/webots/pull/2226)

(I think it is almost done)?


And [https://github.com/cyberbotics/urdf2webots/pull/82](https://github.com/cyberbotics/urdf2webots/pull/82) is accepted 😉

##### Simon Steinmann [Moderator] 09/17/2020 14:08:51
do you want me to change it so it just blindly copies the first 3 lines of the header? This could cause problems, if you guys should decide to change the proto header in the future


merged 🙂


but if you dont change it, it will be cleaner. Your call

##### David Mansolino [Cyberbotics] 09/17/2020 14:10:11
I was speaking about this comment: 

[https://github.com/cyberbotics/webots/pull/2226#discussion\_r488743749](https://github.com/cyberbotics/webots/pull/2226#discussion_r488743749)

And this one:

[https://github.com/cyberbotics/webots/pull/2226/files/9c9ad07338c289272ff50184587af3a2c0d69771#diff-4ee7ac96bb36e11e44db9174386bb646](https://github.com/cyberbotics/webots/pull/2226/files/9c9ad07338c289272ff50184587af3a2c0d69771#diff-4ee7ac96bb36e11e44db9174386bb646)



I can check for the header part.

##### Simon Steinmann [Moderator] 09/17/2020 14:11:50
what do you mean with the second one? the exit\_ok? I dont quite know what you mean there

##### David Mansolino [Cyberbotics] 09/17/2020 14:16:55
IF you call `os.makedirs(directory, exist_ok=True)` it wil not throw an error even if the directory already exists.


With this you can simplify a lot this part of the code

##### Simon Steinmann [Moderator] 09/17/2020 14:21:32
so I dont need that function? I just put it directly in the code?

##### David Mansolino [Cyberbotics] 09/17/2020 14:21:43
exactly 🙂

##### Simon Steinmann [Moderator] 09/17/2020 14:21:49
copied it from your importer.py 😉

##### David Mansolino [Cyberbotics] 09/17/2020 14:22:10
hahaha, we learn each day 😉

##### Simon Steinmann [Moderator] 09/17/2020 14:22:25
but thanks for the tip. almost done


what about the header? any final ideas there?

##### David Mansolino [Cyberbotics] 09/17/2020 14:26:41
I think it is quite safe to keep only these lines, were are most probably not going to change them (for compatibility) and in the worse case it will be easy to update in the script:

```
#VRML_SIM *
# license: *
# license url: *
# documentation url: *
```

##### Simon Steinmann [Moderator] 09/17/2020 14:27:01
alright.


also, tags will never need to get parsed? the mesh protos only need the hidden tag?

##### David Mansolino [Cyberbotics] 09/17/2020 14:27:45
yes, there is no point for the static one as the mesh protos are not procedural.


so forcing tag to hidden in all the cases seems safe


The only case which should be handle is if one or more of these lines are missing (except the first one they are not mandatory).

##### Simon Steinmann [Moderator] 09/17/2020 14:29:41
hmmm


so I add default header, and if it doesnt find the line it uses the default line?

##### David Mansolino [Cyberbotics] 09/17/2020 14:32:12
Sounds good or even if it doesn't find it we can skip it too in the generated file.

##### Simon Steinmann [Moderator] 09/17/2020 14:33:25
okay, I'll just hardcopy the first 4 lines. There is a exception if it has no header at all


`@David Mansolino` alright, I'm done. You can take a final look

##### David Mansolino [Cyberbotics] 09/17/2020 15:10:23
Perfect thank you

##### saditya 09/17/2020 15:35:17
What is the difference between a Synchronous & Asynchronous controller?

##### Simon Steinmann [Moderator] 09/17/2020 15:40:29
[https://cyberbotics.com/doc/reference/robot?tab-language=python#synchronous-versus-asynchronous-controllers](https://cyberbotics.com/doc/reference/robot?tab-language=python#synchronous-versus-asynchronous-controllers)

##### saditya 09/17/2020 15:41:32
> [https://cyberbotics.com/doc/reference/robot?tab-language=python#synchronous-versus-asynchronous-controllers](https://cyberbotics.com/doc/reference/robot?tab-language=python#synchronous-versus-asynchronous-controllers)

`@Simon Steinmann` Thanks! 🙂

##### Justin Fisher 09/17/2020 22:14:02
I'm having trouble squashing a bug.  I think it might have been caused by using a supervisor to change the supervisor field of another robot, to bestow supervisor powers upon it, before loading a new controller for it.  Similarly, I'd like to be able to revoke supervisor powers from it as I switch it to a different controller.  Should that sort of thing be able to work, or is it bound to cause problems?


Nevermind, the bug was elsewhere.  Apparently one supervisor can indeed bestow and revoke supervisor powers from a robot.

##### David Mansolino [Cyberbotics] 09/18/2020 06:11:54
> Nevermind, the bug was elsewhere.  Apparently one supervisor can indeed bestow and revoke supervisor powers from a robot.

`@Justin Fisher` thank you for the ffedback 😉

##### saditya 09/18/2020 08:55:53
I need to attach a small solid so that it acts as a door for this box. On adding a hinge joint and endpoint solid as the door it does not appear. Doing something wrong?
%figure
![Selection_081.png](https://cdn.discordapp.com/attachments/565154703139405824/756438338269085767/Selection_081.png)
%end

##### Olivier Michel [Cyberbotics] 09/18/2020 08:58:12
Did you have a look at the provided `Door.proto` and `DoorLever.proto` files? They are located in `webots/projects/objects/apartment_structure/protos/`.

##### saditya 09/18/2020 09:00:01
> Did you have a look at the provided `Door.proto` and `DoorLever.proto` files? They are located in `webots/projects/objects/apartment_structure/protos/`.

`@Olivier Michel` Yes, I did but I am replicating something from the real world so it has to be this way. It just has to be a simple long door on both sides for the robot to get in and out.


> Did you have a look at the provided `Door.proto` and `DoorLever.proto` files? They are located in `webots/projects/objects/apartment_structure/protos/`.

`@Olivier Michel` Looks weird but that is what I want to make. 🙂
%figure
![Screenshot_2020-09-18_banebeskrivelse-2020-uk_pdf.png](https://cdn.discordapp.com/attachments/565154703139405824/756440062379687957/Screenshot_2020-09-18_banebeskrivelse-2020-uk_pdf.png)
%end

##### Olivier Michel [Cyberbotics] 09/18/2020 09:04:33
I see. So, it should work with a HingeJoint in the very same way as with the Door proto (you can ignore the DoorLever).

##### saditya 09/18/2020 09:05:59
> I see. So, it should work with a HingeJoint in the very same way as with the Door proto (you can ignore the DoorLever).

`@Olivier Michel` So the end point solid could be the door proto?

##### Olivier Michel [Cyberbotics] 09/18/2020 09:06:57
Yes, see the apartment example and study how the Door works. What you want to do is exactly that.

##### owongcho 09/19/2020 00:00:39
Hello. I have a question. I am trying to use a single controller for two robots (robot1 and robot2) and I am using this statement  robot2 = Robot('robot2')  for each robot.  However, I am getting this error: "TypeError: \_\_init\_\_() takes 1 positional argument but 2 were given" Could please help?

##### Simon Steinmann [Moderator] 09/19/2020 11:17:48
`@owongcho` Hi, you might wanna give this a read: [https://www.cyberbotics.com/doc/guide/running-extern-robot-controllers#single-simulation-and-multiple-extern-robot-controllers](https://www.cyberbotics.com/doc/guide/running-extern-robot-controllers#single-simulation-and-multiple-extern-robot-controllers)


but generally, you have one controller for each robot. It can be the same controller, but it has to be started on both robots.

##### owongcho 09/20/2020 02:14:53
`@Simon Steinmann` Thanks for the information. I am not using an external robot controller. I found this example emitter\_receiver.wbt ([https://www.cyberbotics.com/doc/guide/samples-devices#emitter\_receiver-wbt](https://www.cyberbotics.com/doc/guide/samples-devices#emitter_receiver-wbt)), in which an emitter and receiver robots were controlled using the same controller.  I am trying to apply it in my simulation, however, I am having difficulties to implement it using python.

##### Justin Fisher 09/20/2020 03:06:28
It sure would be handy if there were a more convenient way to copy the text definition of an object in the scene tree into the clipboard, so you could paste that definition into a file you're working on (e.g., a world file, a proto, or a supervisor controller that you're setting up to import a node like that from a string).  



You'd think that simply hitting copy on the node in the scene tree would do it, but that apparently copies only the first line of the definition.



You'd also think that an option like this might be available in the context menu you get when right-clicking on an object in the scene tree (e.g., something like "Copy text definition to clipboard").  However, the only option I can find that works sort of like this is "export", which saves the text definition for that node to a file.  Of course, I can do that, choose some temp name for the file, then go open that file, then select everything in it, then copy it to clipboard, and then close and delete the file.  But I find myself going through that whole rigmarole often enough that I wish Webots let me do it in a simpler way!  Or am I missing something?


Also, is there any good way to adjust the volume just of Webots motor sounds?  Motor sounds completely drown out Webots speaker-device sounds, to the point of making the speaker device practically useless.   For the most part, I just set Webots' volume slider at like 1/10th its max volume to keep motor noise reasonably balanced against other sounds my computer plays, but of course that won't work if I want to be able to hear Webots speaker sounds.  



My only idea right now is just to find a sound-editing program and scale down the volumes on all the default Webots motor noises to be about a tenth of what they start as.  But there's gotta be a better solution than that, right?  (I would suggest a motor volume multiplier alongside the place where we choose which soundfile the motor plays, much like there is a volume multiplier for sounds played through Webots speakers.)  How do other people handle this problem?



(I wonder how much this depends upon the scale of the models.  I can tell sounds get quieter as I pull the camera away, so the default motor volumes might well be perfectly fine if my model were scaled 10 times larger or something, though they'd probably still be pretty annoying if I accidentally moved the camera close to a motor.  So maybe worldinfo should include a sort of volume multiplier for all motors to help out smaller-scale models?)


Ok, after a bit more exploration, it looks like the problem has as much to do with the collision (bump/roll/slide) sounds as the motor sounds themselves.  I reduced all of these sound files by 20 decibels, and things work much more to my liking.  Setting the Webots sound-slider to full volume, sounds from the speaker-devices now are roughly comparable to other sounds on my computer (though quieter if the camera is further away from the virtual speaker), and the motor/collision noises are quiet enough to not be too annoying and to let me hear the speaker-device.  



It seems like this really should be something that could be controlled in Webots preferences, e.g.,  with volume sliders for motors and collisions that are separate from other sounds, esp. the speakers, rather than making me go edit half-a-dozen sound files and go find all the places where my world refers to them.

##### Sanket Khadse 09/20/2020 11:45:20
Hello, I have cool question. I have hosted webots simulation on an interactive 3D html page. I was wondering if it is possible to modify the environment in real time, (using sliders or buttons, doesn't matter)? By modify I mean change the position of objects, or delete objects.

##### Simon Steinmann [Moderator] 09/20/2020 17:00:22
is it possible to NOT reset the viewpoint on simulation reset?

##### Quadae 09/20/2020 20:49:20
Hey everyone, I'm just learning Webots for a School Project, but my prof hasn't really given us too much information so I'm just stuck figuring it out on my own, I have to do a few different things with anh e-puck, such as make it travel X inches in Y seconds, rotate X degrees in Y seconds, and a few other things


I can't seem to figure out a good way to stop the robot at the appropriate time/position in those two scenarios

##### Simon Steinmann [Moderator] 09/20/2020 20:57:03
[https://www.cyberbotics.com/doc/reference/robot?tab-language=python#wb\_robot\_get\_time](https://www.cyberbotics.com/doc/reference/robot?tab-language=python#wb_robot_get_time)


with this you can get the simulation time.


for distance you can either use sensors of the robot, or calculate it based on wheel size and rotations

##### Quadae 09/20/2020 20:58:43
and getTime gives time in Seconds


?

##### Simon Steinmann [Moderator] 09/20/2020 20:58:50
yes

##### Quadae 09/20/2020 20:58:58
alright I'll try that


hmm, the problem I keep running into is that it will stop after the fact, but if I want it to stop at the exact amount of time it doesn't

##### Simon Steinmann [Moderator] 09/20/2020 21:09:53
breaking takes time


you have to take that into account


or for do a custom, controller breaking maneuver, over the course of lets say 1 second

##### Quadae 09/20/2020 21:20:31
do you mind just explaining to me how you would go about handling this problem



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/757350516731674624/unknown.png)
%end


you don't have to go too in depth, just curious what the best way would be to go about it

##### Simon Steinmann [Moderator] 09/20/2020 21:23:53
if we assume quick acceleration and breaking, then the velocity is X/Y (inches/s)


so you move that speed for Y seconds, to travel X inches

##### Quadae 09/20/2020 21:25:00
Would I have to convert units to m/s when applying it to the motor velocity?

##### Simon Steinmann [Moderator] 09/20/2020 21:25:23
a rotational motor is in rad/s


so a motor speed of 2*pi is one revolution per second


with the wheel radius, you can calculate what distance that is

##### Quadae 09/20/2020 21:26:43
[https://www.cyberbotics.com/doc/guide/epuck#overview-of-the-robot](https://www.cyberbotics.com/doc/guide/epuck#overview-of-the-robot)


and I find that here right?

##### Simon Steinmann [Moderator] 09/20/2020 21:27:22
Wheel radius     20.5 mm


so radius * motor\_speed = linear velocity


if I'm not mistaken

##### leen1 09/20/2020 21:31:58
Guys, I need someone's help


I don't know how to connect my cs50 ide with WEBOTS

##### Quadae 09/20/2020 21:32:34
so in order to travel at a linear speed of X/Y the motors would have to have a speed of  radius/linear velocity

##### leen1 09/20/2020 21:32:51
I'm new to this, and I have no idea

##### Simon Steinmann [Moderator] 09/20/2020 21:32:55
`@leen1` [https://www.cyberbotics.com/doc/guide/using-your-ide](https://www.cyberbotics.com/doc/guide/using-your-ide)

##### leen1 09/20/2020 21:33:35
I read it but I didn't understand the lines that I should write exactly as they wrote

##### Simon Steinmann [Moderator] 09/20/2020 21:33:40
lin\_vel/radius

##### leen1 09/20/2020 21:33:42
are they directeries?


directories*

##### Quadae 09/20/2020 21:34:07
should lin\_vel be in m/s or in/s?

##### Simon Steinmann [Moderator] 09/20/2020 21:34:42
depends on what you put your radius as. the units have to be the same


radius had to be inches for inch/s, meter for meter/s, mm for mm/s


when writing formulas, write the units too. The units have to be the same on both sides of the equation


`@leen1` wait for the developers tomorrow, they might be able to help you more

##### leen1 09/20/2020 21:37:39
Thank you `@Simon Steinmann`

##### Quadae 09/20/2020 21:37:56

%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/757354889197387831/unknown.png)
%end


does this make sense?


then in the loop the left and right motors are set to lw and rw


maybe I should change the while condition

##### Simon Steinmann [Moderator] 09/20/2020 21:39:50
that should work

##### Quadae 09/20/2020 21:40:35
it just doesn't exit when I have robot.getTime() == endTime

##### Simon Steinmann [Moderator] 09/20/2020 21:40:35
but you forgot to set the motors to their speed, at the start of the loop


simulation time is not continuous, it is calculated in steps, defined as timestep in ms

##### Quadae 09/20/2020 21:45:27
I figured it had something to do with that


but I wasn't sure how to make it work


Its only like .1 seconds or so off, maybe it won't be a big issue

##### Simon Steinmann [Moderator] 09/20/2020 21:56:23
that is probably due to the acceleration and braking. You can always pick smaller timesteps. But I doubt that that kind of accuracy is expected, since the task is described with "constant velocity"

##### Quadae 09/20/2020 21:56:46
ya I guess they just expect it to be slightly off

##### Sanket Khadse 09/21/2020 05:09:53
> Hello, I have cool question. I have hosted webots simulation on an interactive 3D html page. I was wondering if it is possible to modify the environment in real time, (using sliders or buttons, doesn't matter)? By modify I mean change the position of objects, or delete objects.

`@Sanket Khadse` .

##### Justin Fisher 09/21/2020 05:15:40
`@Sanket Khadse`  I think your question probably isn't clear regarding how exactly you're hosting the simulation, as Webots have several different functionalities that are sort of like this, ranging from ones where you basically end up with a glorified video of the simulation with options for changing viewing angles (which probably won't let you modify the environment in the ways you want), to ones like those on [https://robotbenchmark.net/](https://robotbenchmark.net/) , which I think might let you set up some of these options if you're hosting it yourself.  I don't have much experience with this, and the likeliest people to know seem to be on here moslty just during European workweek hours.

##### Stefania Pedrazzi [Cyberbotics] 09/21/2020 06:11:44
> Hello. I have a question. I am trying to use a single controller for two robots (robot1 and robot2) and I am using this statement  robot2 = Robot('robot2')  for each robot.  However, I am getting this error: "TypeError: \_\_init\_\_() takes 1 positional argument but 2 were given" Could please help?

`@owongcho` Hi, to use the same controller for multiple robots you don't need to pass anything in the Robot constructor. Instead you should use the same method as in the  example emitter\_receiver.wbt ([https://www.cyberbotics.com/doc/guide/samples-devices#emitter\_receiver-wbt](https://www.cyberbotics.com/doc/guide/samples-devices#emitter_receiver-wbt)) and determine the robot using on the Robot.getName method ([https://www.cyberbotics.com/doc/reference/robot?tab-language=python#wb\_robot\_get\_name](https://www.cyberbotics.com/doc/reference/robot?tab-language=python#wb_robot_get_name)). Based on this you can select which instructions to run.

If you want to use different constructions and classes for each robot, then you should build your own robot class that inherit from the Webots `Robot` class.


`@Justin Fisher` if you have any suggestion about how to improve Webots, please open a feature request on GitHub [https://github.com/cyberbotics/webots/issues/new/choose](https://github.com/cyberbotics/webots/issues/new/choose).

It will be easier to discuss on the issue page.

But a priori it seems a good approach to be able to control separately the volume of speaker, motors and collisions.


> Hello, I have cool question. I have hosted webots simulation on an interactive 3D html page. I was wondering if it is possible to modify the environment in real time, (using sliders or buttons, doesn't matter)? By modify I mean change the position of objects, or delete objects.

`@Sanket Khadse` Hi, we plan to fully support modifying a simulation from the web interface, but currently this functionality is not yet fully available. If you stream your simulation using the `mjpeg` mode, then you can use the handles, that appears in the image when you select an objet, to move them but it is not possible to delete objects.

But you could develop a custom robot window where you will add the buttons to remove nodes (for example entering the name in a field) using the Supervisor API.


> Guys, I need someone's help

`@leen1` Hi, as `@Simon Steinmann` already pointer out, the documentation to develop a Webots controller in your IDE can be found here: [https://www.cyberbotics.com/doc/guide/using-your-ide](https://www.cyberbotics.com/doc/guide/using-your-ide)



> are they directeries?

`@leen1` the configuration depends on the programming languages you are using. But in generally you should link to some directories where the Webots controller library is stored and set some environment variables needed during the Webots controller compilation (as explained in the documentation).

A good starting point for you, would be to understand how custom libraries can be used in your IDE.

##### Justin Fisher 09/21/2020 09:28:35
Is there a good way to include anything besides text in/with the labels that supervisers can overlay on top of the display window?  I want something that maintains its position onscreen even as the viewpoint moves, but not in a separate overlay window.  E.g., I was hoping that the Viewpoint node would have a children field where I could put shapes that would maintain their position relative to the viewpoint, even as the viewpoint moves around, but alas, there doesn't seem to be any such field.

##### Stefania Pedrazzi [Cyberbotics] 09/21/2020 09:33:41
With the supervisor label you can display text and numbers but not draw shapes.

I would suggest you to use the Display node to draw your shapes, and then attach it to a Camera that records the scene and that will be used as Display background texture.

[https://www.cyberbotics.com/doc/reference/display#wb\_display\_attach\_camera](https://www.cyberbotics.com/doc/reference/display#wb_display_attach_camera)

here you can find an example: [https://www.cyberbotics.com/doc/guide/samples-devices#display-wbt](https://www.cyberbotics.com/doc/guide/samples-devices#display-wbt)

##### Justin Fisher 09/21/2020 10:07:37
With the approach you're suggesting, you wouldn't be able to move the viewpoint with the mouse right, because what looks like objects on your screen that you could drag to rotate around will actually just be closed-circuit display images of objects?  That's not what I was aiming for.  Or am I not understanding?

##### Simon Steinmann [Moderator] 09/21/2020 10:10:19
is it possible to NOT reset the viewpoint on simulation reset?

##### Stefania Pedrazzi [Cyberbotics] 09/21/2020 10:10:45
No, currently this is not possible.

##### Justin Fisher 09/21/2020 10:12:01
`@Simon Steinmann`  If you order the simulation reset with a supervisor, you could probably store the position of the viewpoint just prior to the reset, order the reset with robot.step(0), and then immediately move the viewpoint back to where it was

##### Stefania Pedrazzi [Cyberbotics] 09/21/2020 10:13:20
> With the approach you're suggesting, you wouldn't be able to move the viewpoint with the mouse right, because what looks like objects on your screen that you could drag to rotate around will actually just be closed-circuit display images of objects?  That's not what I was aiming for.  Or am I not understanding?

`@Justin Fisher` Yes, of course with this approach you won't be able to move the camera using the mouse interactions used to move the viewpoint. But you could use the handles to move the top robot containing the camera and this will update the image.

##### Simon Steinmann [Moderator] 09/21/2020 10:56:01
`@Justin Fisher` Thanks for the suggestion. Looking at the webots source code, it indeed does not seem trivial to add a new feature, that does not reset the viewpoint. Gonna go with your idea 🙂

##### Asger Printz 09/21/2020 11:54:21
Hello community! I'm am trying to develop a reinforcement learning algorithm within Webots. I'm using the Supervisor functionality to send actions to the robot and get Lidar readings. However it seems that the supervisor is delayed one timestop compared to the simulation world. When I drag the robot to a different location and then run one timestep in the simulation, I still get e.g. the old Lidar readins, when I try to print them out. Am I correct in this, and is there a way to make them run synchronously?

##### Simon Steinmann [Moderator] 09/21/2020 11:55:48
always get your sensor values AFTER a timestep. if you change something, and dont do a timestep, it is not updated


are you using the openai-gym structure?

##### Asger Printz 09/21/2020 11:57:21
yes

##### Simon Steinmann [Moderator] 09/21/2020 11:57:51
put all sensor readings into get\_obs()

##### Asger Printz 09/21/2020 11:57:57
def step(self, action):

       

        self.supervisor.step(32)

        self.\_getState() # Observe new state

        self.state = np.asarray([self.dist, self.direction] + self.lidarRanges)

        self.prevAction = self.action[:] # Set previous action     

        self.action = action # Take action

        self.\_take\_action(action)

        self.counter += 1

        #   Get State(dist from obstacle + lidar) and convert to numpyarray

        print(self.lidarRanges[0])

        #self.state = [self.dist, self.direction] + self.lidarRanges # Set State

        self.reward = self.\_calculateReward() #   get Reward

        self.done, extraReward = self.\_isDone() 

        self.reward += extraReward

        self.totalreward += self.reward

        return [self.state, self.reward, self.done, {}]

##### Simon Steinmann [Moderator] 09/21/2020 11:57:59
and call that after the actions

##### Asger Printz 09/21/2020 11:58:03
This is my step function

##### Simon Steinmann [Moderator] 09/21/2020 11:58:52
supervisor.step() you should call AFTER you defined the actions


and BEFORE getting any values from sensors


this runs your simulation

##### Asger Printz 09/21/2020 12:01:46
I have tried this.. Doesn't seem to help. I have no idea with I'm doing wrong


If I have it after  self.\_take\_action(action) it takes 3 time steps in the simulation to get new values.


I might have messed some other stuff up, very likely

##### Simon Steinmann [Moderator] 09/21/2020 12:04:12
self.\_take\_action(action)


what is in this function?

##### Asger Printz 09/21/2020 12:05:26
def \_take\_action(self, action):

   

        convertedVelocity = self.setVelocities(action[0], action[1])

        self.motors[0].setVelocity(float(convertedVelocity[0]))

        self.motors[1].setVelocity(float(convertedVelocity[1]))

##### Stefania Pedrazzi [Cyberbotics] 09/21/2020 12:05:47
`@Asger Printz` you should also make sure that the time step you use in your controller matches the `WorldInfo.basicTimeStep`. If it is bigger, then it is normal that it takes more than one simulation time step to get the updated values

##### Asger Printz 09/21/2020 12:07:37
Yes, I have made sure. If it is bigger then it takes more than one timestep to get any reading. I'm just confused why I get the some reading delayed. If i move the robot very close to an object, and run a timestep, then I get the old lidar readins from when it was far away

##### Simon Steinmann [Moderator] 09/21/2020 12:07:50
self.action = action # Take action

self.\_take\_action(action)



put these two functions at the very top, before the step.


set\_actions()

supervisor.step()

get\_state()

get\_reward()

is\_done()

return


this is should be your structure

##### Asger Printz 09/21/2020 12:11:06
still delayed by one it seems..

##### Simon Steinmann [Moderator] 09/21/2020 12:11:31
I have a meeting now, but you can also pm me, if you wanna cooperate in creating more general RL structures for webots

##### Asger Printz 09/21/2020 12:12:10
Sounds cool. I would very much like that. I can send you my code if you want

##### leen1 09/21/2020 13:07:48
`@Stefania Pedrazzi` Excuse me but what does this me? "The build rules are:



The target executable file should have the same name as the controller directory, and follow strictly this path: $WEBOTS\_PROJECT/controllers/$(CONTROLLER\_NAME)/$(CONTROLLER\_NAME)$(EXE\_EXTENSION)."


Does this mean that I should create a directory called WEBOTS\_PROJECT, then inside it is another directory called controllers , and so on?


or I will be writing this in the terminl window ?


and what does the $ mean here 🙂

##### Stefania Pedrazzi [Cyberbotics] 09/21/2020 13:10:21
First nore that from the Webots Wizards menu there is an option to automatically create a project directly that creates all the required directories.


The `$` is commonly used to depict environment variables.


So `$WEBOTS_PROJECT` and `$CONTROLLER_NAME` are values that you can customize and set as you want (just replace in the path)

##### leen1 09/21/2020 13:12:39
Yes I created a porject from Webots Wizard , but what I get is this error:" WARNING: "python.exe" 64 bit was not found, but the 32 bit version was found.

Webots requires Python version 3.8, 3.7 or 2.7 (64 bit) from python.org in your current PATH.

To fix the problem, you should:

1. Check the Python command set in the Webots preferences.

2. Check the COMMAND set in the [python] section of the runtime.ini file of your controller program if any.

3. Fix your PATH environment variable to use the required Python 64 bit version (if available).

4. Install the required Python 64 bit version and ensure your PATH environment variable points to it."

##### Stefania Pedrazzi [Cyberbotics] 09/21/2020 13:12:43
Same for the `$(EXE_EXTENSION)` that should be `py` for Python controller, `.exe` for C/C++ on Windows, nothing for C/C++ on Linux, etc


Webots doesn't support 32-bit Python. You should follow the instructions and install the 64-bit Python version or adjust the PATH if you already have it.


Even if you create manually the project, your python controller won't work

##### leen1 09/21/2020 13:14:19
How to adjust the PATH? Where could I find it?

##### Stefania Pedrazzi [Cyberbotics] 09/21/2020 13:14:46
PATH is global environmental variable of Windows

##### leen1 09/21/2020 13:15:27
So here I should change the PATH of my laptop itself and not the program right?

##### Stefania Pedrazzi [Cyberbotics] 09/21/2020 13:16:07
Yes, your laptop PATH should point to the 64 bit version of Python


here are the instructions to install and correctly setup Python:

[https://www.cyberbotics.com/doc/guide/using-python#windows-installation](https://www.cyberbotics.com/doc/guide/using-python#windows-installation)

##### owongcho 09/21/2020 14:15:45
> `@owongcho` Hi, to use the same controller for multiple robots you don't need to pass anything in the Robot constructor. Instead you should use the same method as in the  example emitter\_receiver.wbt ([https://www.cyberbotics.com/doc/guide/samples-devices#emitter\_receiver-wbt](https://www.cyberbotics.com/doc/guide/samples-devices#emitter_receiver-wbt)) and determine the robot using on the Robot.getName method ([https://www.cyberbotics.com/doc/reference/robot?tab-language=python#wb\_robot\_get\_name](https://www.cyberbotics.com/doc/reference/robot?tab-language=python#wb_robot_get_name)). Based on this you can select which instructions to run.

> If you want to use different constructions and classes for each robot, then you should build your own robot class that inherit from the Webots `Robot` class.

`@Stefania Pedrazzi` Thank you!

##### Stefania Pedrazzi [Cyberbotics] 09/21/2020 14:17:26
You're welcome

##### jakasembung 09/22/2020 06:59:10
could webots live streamming ?

##### Darko Lukić [Cyberbotics] 09/22/2020 07:00:12
> could webots live streamming ?

`@jakasembung` Yes, you check the following link [https://www.cyberbotics.com/doc/guide/web-streaming](https://www.cyberbotics.com/doc/guide/web-streaming)

##### Bkarso 09/22/2020 09:38:00
hello,I use webots with ros,I use 'get\_velocity' service ,but the value is totally same with my input.If I must use the position\_sensor to  get the Velocity?

##### Olivier Michel [Cyberbotics] 09/22/2020 09:38:42
Yes.


Or GPS.

##### Bkarso 09/22/2020 09:44:46
but I use position sensor service ,and I have △t = current\_time - last\_time,  but the value △t is  Not fixed，and my result have error of 0.1-0.2m/s, there are too much error

##### Olivier Michel [Cyberbotics] 09/22/2020 09:45:39
Why is △t not fixed?

##### Bkarso 09/22/2020 09:47:46
I count in ROS,have 0.02-0.03 s

##### Olivier Michel [Cyberbotics] 09/22/2020 09:48:21
I see...


A native Webots controller wouldn't have this problem.


Maybe you can try with the GPS device?


Does your ROS controller use simulation time or real time?

##### Bkarso 09/22/2020 09:50:11
I used GPS,but I want to be closer to the real data of Odometry


no use simulation time


I want to simulate cumulative error of Odometry ,so I need this step

##### Olivier Michel [Cyberbotics] 09/22/2020 09:59:44
OK, so in that case, I would recommend you to extend the ROS interface in Webots and add a new service that will be dedicated to computing and publishing the velocity based on the position information.

##### Bkarso 09/22/2020 10:02:13
ok, i try first，thank you

##### Darko Lukić [Cyberbotics] 09/22/2020 10:09:24
Also, maybe you can use `--synchronize` flag:

[https://www.cyberbotics.com/doc/guide/using-ros#using-the-standard-ros-controller](https://www.cyberbotics.com/doc/guide/using-ros#using-the-standard-ros-controller)



That way you can update the odometry on every time step, effectively emulating a hard real-time loop

##### Simon Steinmann [Moderator] 09/22/2020 11:37:09
you can also use a supervisor controller to get position and rotation. Might be easier


`@Olivier Michel` is there an easy / established way, on how to launch webots from  within python?


For parallel reinforcement learing, the gym environment will have to be able to launch its own instance of webots

##### Olivier Michel [Cyberbotics] 09/22/2020 11:40:55
No, you can simply launch Webots as you would launch any other executable file.

##### Simon Steinmann [Moderator] 09/22/2020 11:41:22
just thought I asked, before going down that route. Thx 🙂


you got experience with that? any pointers?

##### Olivier Michel [Cyberbotics] 09/22/2020 11:42:08
Yes, our test suite is a python script that launches webots instances.

##### Simon Steinmann [Moderator] 09/22/2020 11:42:25
may I have a link? 😄

##### Olivier Michel [Cyberbotics] 09/22/2020 11:42:33
Check it in the webots/tests folder

##### Simon Steinmann [Moderator] 09/22/2020 11:42:39
okay thx 🙂


I have an issue. When setting a webots PID variable, webots can't find it. The issue is, that it tries to do this:

Cannot open file: /tmp/webots-20244/WEBOTS\_SERVER (retrying in 1 second)



while the tmp files generated, have an extra string:
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/757960887272472706/unknown.png)
%end


(I know it's not the same PID, i closed the process already. but with the correct PID, the issue is there as well)


[https://github.com/cyberbotics/webots/blob/master/src/Controller/api/system.c#L173](https://github.com/cyberbotics/webots/blob/master/src/Controller/api/system.c#L173) I think the issue should be somewhere here

##### Olivier Michel [Cyberbotics] 09/22/2020 13:55:15
Probably...

##### Simon Steinmann [Moderator] 09/22/2020 13:55:50
the code seems to take into effect the random part, no idea why it doesnt work


perhaps something change in the structure of the tmp file naming convention

##### Olivier Michel [Cyberbotics] 09/22/2020 13:58:30
It seem that the `random_part` is set to an empty string... Can you try to debug it by printing variable values there?

##### Simon Steinmann [Moderator] 09/22/2020 13:59:18
oh boy, I'd have to compile the whole thing again right? I'm really not that good with c

##### Olivier Michel [Cyberbotics] 09/22/2020 14:00:10
I will have a look...

##### Simon Steinmann [Moderator] 09/22/2020 14:00:32
thank you 🙂


if it helps, this is where it printed me the error message: [https://github.com/cyberbotics/webots/blob/master/src/Controller/api/robot.c#L1001](https://github.com/cyberbotics/webots/blob/master/src/Controller/api/robot.c#L1001)


with the random part of the string missing

##### Olivier Michel [Cyberbotics] 09/22/2020 14:17:44
I cannot reproduce the error in Windows... Switching to Linux...

##### Simon Steinmann [Moderator] 09/22/2020 14:20:28
I'm running develper branch, just fyi

##### Olivier Michel [Cyberbotics] 09/22/2020 14:27:57
Okay, it may take a while as I need to checkout and recompile the whole thing out of the develop branch on my new VM.

##### Simon Steinmann [Moderator] 09/22/2020 14:29:22
my c skills are low, so I  might not read the code correctly, but it seems like we never actually extract the "random\_part" from the tmp/webots-<pid>-random\_part folder

##### Olivier Michel [Cyberbotics] 09/22/2020 14:35:18
How did you install Webots? From the snap, deb, tarball, other?

##### Simon Steinmann [Moderator] 09/22/2020 14:35:31
compiled the developer branch

##### Olivier Michel [Cyberbotics] 09/22/2020 14:35:43
Ok.

##### Simon Steinmann [Moderator] 09/22/2020 14:39:16
tested with nightly build 2021a from 11/9, installed with tarball. Same problem


ooookay, huge revelation. The issue seems, that I initialized the robot too quickly. I ẃait for 15 sevonds, then it works


it seems, that it has to get far enough, for the WEBOTS\_SERVER to spawn

##### Olivier Michel [Cyberbotics] 09/22/2020 14:44:37
Good.


Is your world heavy to load?

##### Simon Steinmann [Moderator] 09/22/2020 14:45:07
no


but webots-bin always has 1,1 GB


that is something I want to investigate as well.

##### Olivier Michel [Cyberbotics] 09/22/2020 14:45:44
Does it take 15 seconds to startup?

##### Simon Steinmann [Moderator] 09/22/2020 14:45:56
15 seconds was an arbitrary number


I think in the robot.c, where it tries to connect, it should call the system.c function every time


do you know what I mean?

##### Olivier Michel [Cyberbotics] 09/22/2020 14:47:30
Well, I tried at increasingly long intervals.


Maybe this is causing troubles.

##### Simon Steinmann [Moderator] 09/22/2020 14:48:15
I think the issue is, that WEBOTS\_TMP\_PATH is only created once. If the webots\_server is not fully constructed yet, it is not correct


but it keeps retrying to use that string


oh wait, it is inside of the loop.... hmmm

##### Olivier Michel [Cyberbotics] 09/22/2020 14:50:08
Yes, that seems right to me.

##### Simon Steinmann [Moderator] 09/22/2020 14:50:16
then no idea


is there any way I can check whether webots is ready?


I start the subprocess with Popen, now I have to figure out, when it is ready, so I can initialize my controller

##### Olivier Michel [Cyberbotics] 09/22/2020 14:51:13
When the WEBOTS\_SERVER file is created, that means Webots is ready to accept extern controllers.

##### Simon Steinmann [Moderator] 09/22/2020 14:51:40
how can I test that?


manually with os.path.exists?

##### Olivier Michel [Cyberbotics] 09/22/2020 14:52:15
Yes, but anyhow the controller launcher will do that for you, e.g., wait until Webots is ready.

##### Simon Steinmann [Moderator] 09/22/2020 14:53:00
no, the issue is, that it does not. If I initialize it too soon, it does keep retrying, but the random\_part is missing from the string

##### Olivier Michel [Cyberbotics] 09/22/2020 14:54:15
OK, I see, then there is likely a bug...

##### Simon Steinmann [Moderator] 09/22/2020 15:03:26
time.sleep(0.1)

seems to be enough

##### David Mansolino [Cyberbotics] 09/22/2020 15:09:38
FYI, in our ROS2 interface we are doing something very similar:

A python script is starting Webots: 

[https://github.com/cyberbotics/webots\_ros2/blob/master/webots\_ros2\_core/webots\_ros2\_core/webots\_launcher.py](https://github.com/cyberbotics/webots_ros2/blob/master/webots_ros2_core/webots_ros2_core/webots_launcher.py)

And then starts an extern controller:

[https://github.com/cyberbotics/webots\_ros2/blob/master/webots\_ros2\_core/webots\_ros2\_core/webots\_node.py](https://github.com/cyberbotics/webots_ros2/blob/master/webots_ros2_core/webots_ros2_core/webots_node.py)

##### Olivier Michel [Cyberbotics] 09/22/2020 15:16:43
I see. The controllers are started before Webots actually created the temporary folder... So, the `time.sleep(0.1)` workaround does the trick. However, it's not very clean to add random waiting times. I will think about a better solution...


I believe I fixed the problem here: [https://github.com/cyberbotics/webots/pull/2260/files](https://github.com/cyberbotics/webots/pull/2260/files)


Can you apply the patch on your local file, recompile libController and confirm it fixes the problem for you?

##### Simon Steinmann [Moderator] 09/22/2020 15:57:05
hold on, let me try


*cough* for future use, how do I compile a single target? I thought it would only compile changes, but I'm currently recompiling everything :p

##### Olivier Michel [Cyberbotics] 09/22/2020 16:00:35
`cd webots/src/Controller ; make -j 8 release`

##### Simon Steinmann [Moderator] 09/22/2020 16:00:48
thx


perfect, that works!

##### Olivier Michel [Cyberbotics] 09/22/2020 16:02:11
🥳

##### Simon Steinmann [Moderator] 09/22/2020 16:02:43
[https://tenor.com/view/dancing-dance-happy-dance-carlton-the-carlton-gif-5314808](https://tenor.com/view/dancing-dance-happy-dance-carlton-the-carlton-gif-5314808)


hmm, is there a way to increase the waiting time? It is feasible, that on slower machines, it could take longer to load the world, than 10  seconds

##### Olivier Michel [Cyberbotics] 09/22/2020 16:03:34
The maximum loading time is more than 10 seconds.


It's actually 1 + 2 + 3 + 4 + 5 ... + 10 seconds.


Which should be sufficient for most cases.

##### Simon Steinmann [Moderator] 09/22/2020 16:04:36
ohh okay


good 🙂


making great progress with the webots reinforcement learning. I made a openai-gym environment, that automatically opens the correct world and starts the training. Multiple instances can be run

##### Olivier Michel [Cyberbotics] 09/22/2020 16:06:36
That sounds great... Do you have it on some github repo?

##### Justin Fisher 09/23/2020 06:59:36
On PC, webots keyboard can detect CTRL+SHIFT+1 as keyboard.CONTROL + keyboard.SHIFT + ord("!").  My students on Macs can't seem to get that combo to work on Macs, using either their control key or their command key.  Anybody know how to get something like this to work on a Mac?  (I don't have a Mac myself, so I can't test this in any direct way, though I did try keyboard.CONTROL+keyboard.SHIFT+ord('1') and that doesn't seem to work either.)

##### Bkarso 09/23/2020 09:14:32
hello，I want to output position\_sensor graphs about time in real time in webots. What should I do?

##### Olivier Michel [Cyberbotics] 09/23/2020 09:20:51
`@Bkarso`: you should probably create a HTML robot window for your robot and display these graphs there using some JS graph library.


`@Justin Fisher`: that combo should work on Mac too. If not, you should open a bug report on GitHub about it.

##### Justin Fisher 09/23/2020 09:52:52
Would anyone here with a Mac and Python be willing to do a quick test to help diagnose why some keyboard shortcuts in my simulation haven't been working for my students using Macs?  Put the following code in a Python controller for a robot, run the controller, click in the 3D simulation window so it'll send keystrokes to the controller, hit control-shift-1 and then command-shift-1, and report back what numbers (if any) it prints in your console?  (For each keytap it'll probably print the same number a handful of times unless your fingers are super-fast.  On my PC, CTRL-SHIFT-1 yields 196641, but I don't think that's what you'll get on Mac.)



```from controller import Robot
robot = Robot()
timestep = int(robot.getBasicTimeStep())
keyboard = robot.getKeyboard()
keyboard.enable(timestep)
print("keyboard.CONTROL = ",keyboard.CONTROL)
print("keyboard.SHIFT = ",keyboard.SHIFT)
while robot.step(timestep) != -1:
    key = keyboard.getKey() # read first new key
    while key != -1: # -1 means no more keys this timestep
       print( "Detected keypress:",key)
       key = keyboard.getKey() # read next new key
```

##### Olivier Michel [Cyberbotics] 09/23/2020 10:20:18
I just tested and it seems the `Ctrl` key is not detected at all on Mac.


If you press `Ctrl` with any other key, you will get `-1`.

##### Simon Steinmann [Moderator] 09/23/2020 10:21:11
with mac the ctrl-super-alt keys are different

##### Olivier Michel [Cyberbotics] 09/23/2020 10:21:23
`Shift` works and if I press `Shift` + `1`, I get 65579.

##### Justin Fisher 09/23/2020 10:22:31
(For some reason, I couldn't find the emote that means thanks for testing -- too bad it doesn't work, so I picked that one.)

##### Olivier Michel [Cyberbotics] 09/23/2020 10:23:35
`Alt` seems to work also.

##### Justin Fisher 09/23/2020 10:24:23
Does the Mac command key register as anything?

##### Olivier Michel [Cyberbotics] 09/23/2020 10:25:44
No, it doesn't seem to work either...

##### Justin Fisher 09/23/2020 10:30:57
Ok, for my purposes, I can just use SHIFT-1, SHIFT-2, etc...    These were just keyboard shortcuts I gave them to easily shift to using the controller for a different objective in their assignment so SHIFT-CONTROL-1 seemed like a nice mnemonic for "SHIFT to the CONTROLer for objective 1", but I'm not actually using SHIFT-1 for anything, and there isn't much risk they'll hit it accidentally, so that should work fine too.


Thanks for testing!  (Glad to have someone test who knows what they're doing.  With my students I always worry that they might have just forgotten to click in the 3D window or something.)

##### Olivier Michel [Cyberbotics] 09/23/2020 10:32:04
All right. I will nevertheless investigate why we don't get these `Ctrl` events on Mac...

##### Simon Steinmann [Moderator] 09/23/2020 10:34:54
is there a sample world with an extern controller?

##### Olivier Michel [Cyberbotics] 09/23/2020 10:36:41
No. It would nice to add one indeed.


But you can turn any example into an extern controller very easily.


Simply change the controller to `<extern>` and you are done.


Then, you can launch the controller (which you replaced by `<extern>`) from the console.

##### Simon Steinmann [Moderator] 09/23/2020 10:38:40
I wanted to make this example simpler for you to run, now you have to change line to a world path, containing an extern controller. There is an issue, that initializing a second robot throws an error, even though a different PID is specified
> **Attachment**: [launch\_webots\_world.py](https://cdn.discordapp.com/attachments/565154703139405824/758276140204163112/launch_webots_world.py)


line 45*


Either I'm missing something or this is a bug. I really need this to work, for a training script to be able to make multiple gym environments and run them.


`@Olivier Michel`  could you have a look at that?


I noticed that it works, if I call the Supervisor() function from different threads, but within the same python script, it throws the 'only one instance of Robot class' error

##### Olivier Michel [Cyberbotics] 09/23/2020 12:41:11
Yes, there should be only one Robot() or Supervisor() per controller process. Instead of creating a new thread for running a Supervisor(), you should create a new process.


This is as simple as launching a new executable (that will be python script).

##### Simon Steinmann [Moderator] 09/23/2020 12:43:02
I'm just wondering what the best process is. the training scripts create an environment class calling gym.make('env-id').


ideally, this should create everything in a new process, but the training script still needs to interact with it

##### Olivier Michel [Cyberbotics] 09/23/2020 13:10:25
`@Justin Fisher`: I patched the mac OS version of Webots and now I get 196651 when I press CTRL-SHIFT-CLICK (and not 196641 as you reported). Is that correct?

##### Justin Fisher 09/23/2020 13:14:23
CTRL-SHIFT-1 does give 196641 on my laptop as well as my desktop


that's what you'd predict from keyboard.CONTROL=131072 + keyboard.SHIFT = 65536 + ord('!')=33


The number you reported sounds like CONTROL SHIFT '+' to me


does your keyboard happen to have '+' as what you get when you hit shift-1?   (American keyboards don't, but maybe yours does?)


indeed, when I google image search swiss mac keyboards, it does show that you have + as the punctuation you get when you hit shift-1


so that probably explains the difference


that does have the unfortunate effect that if you ever want to write a webots program that detects SHIFT+numberkey combinations, it probably won't work internationally across different keyboards


(in case it wasn't clear, American keyboards have '!' as the punctuation we get as SHIFT-1)

##### Olivier Michel [Cyberbotics] 09/23/2020 13:39:17
Yes, you are correct...


Not sure how to handle this properly...

##### Justin Fisher 09/23/2020 14:25:42
I'm not sure if you're kind of locked into a particular way of doing it now, if you want to retain backwards-compatibility.  If that's not a concern, I'd consider doing it the same way you do letter keys.  E.g., hitting N gives ord('N') and hitting SHIFT-N gives keyboard.SHIFT + ord('N') -- same ord() in both cases, and it matches the primary symbol printed on the key.  By analogy, it'd make sense if hitting 1 gives ord('1') -- it does -- and hitting SHIFT-1 gives keyboard.SHIFT + ord('1') rather than keyboard.SHIFT plus the ord of whatever punctuation mark happens to be printed on that key like it currently does.  



But there are also probably circumstances where someone might want to detect '+' across international keyboards, and not have to worry about the fact that Swiss keyboards use SHIFT-1 to make '+' whereas Americans use SHIFT-'=' to make '+'.  For that purpose, the way you have it is probably better.  I don't know which would be more common: people wanting to detect particular punctuation marks (regardless of which keys made them), or people wanting to detect shift-key-combinations with certain keys (regardless of which punctuation marks happen to be printed atop them).  I guess maybe the ideal would be for you to make available *both* something that indicates which actual keys were pressed, (e.g., 'N' or SHIFT and 1) and also something that indicates what characters the local keyboard interprets those keys as meaning (e.g., 'n' and '+').  



Another thing you might consider is whether you really want it to return keyboard.SHIFT + ord('+') rather than just returning ord('+').   The SHIFT part seems redundant.  If you follow the suggestion at the end of the last paragraph, you'd make available the information that they simultaneously held the keys SHIFT and '1',  and you'd separately make available the information that they produced the character '+', but you wouldn't report SHIFT and '+' together.

##### Olivier Michel [Cyberbotics] 09/23/2020 15:13:09
Thank you for the interesting suggestions. We are unfortunately stuck to preserving backwards compatibility (at least until we release Webots  R2021a), so we will work out some compromise solution meanwhile. Here the PR fixing the problem: [https://github.com/cyberbotics/webots/pull/2265](https://github.com/cyberbotics/webots/pull/2265)

##### Justin Fisher 09/23/2020 16:01:46
Another benefit of splitting keypress detection from character-input detection is that this could open the door to detecting presses of keys like CONTROL all by itself.  I guess I've used enough games and other programs over the years where SHIFT, CONTROL, and ALT are just more keys that you can bind to functionality that I was a bit surprised that you couldn't do the same with a Webots controller.

##### Olivier Michel [Cyberbotics] 09/23/2020 16:02:39
Yes, that something we should explore.

##### Westin 09/23/2020 17:49:57
<#565154703139405824> I'm trying to pull a UR16e into Webots from the robot tree and I'm having a weird issue. The first three joints work with motors and sensors, but I get no movement after those segments. I have tried moving it with both the robot window in Webots and an external Python controller. I rebuilt the robot from scratch and had the same results. I then decided to start with the last three joints instead of the first and now the last three work, so it seems like its just not letting me do more than 3. Does anyone know why this might happen? I've been fighting with it all morning.

##### Simon Steinmann [Moderator] 09/23/2020 17:52:47
where did you get the ur16e model from?

##### Westin 09/23/2020 17:54:14
I think it came from the UR website. I got it a while back and I don't see it now, so I'm assuming they took it down. I converted it to a VRML in solidworks.

##### Simon Steinmann [Moderator] 09/23/2020 17:54:29
do you happen to have it as an urdf?

##### Westin 09/23/2020 17:54:42
No


I hoped to find one from the ROS people, but I didn't find one.

##### Simon Steinmann [Moderator] 09/23/2020 17:55:40
I can take a look, maybe I'll see something glaringly obvious

##### Westin 09/23/2020 17:56:40
Do you want me to send the broken .wbo file?

##### Simon Steinmann [Moderator] 09/23/2020 17:57:28
yes

##### Westin 09/23/2020 17:58:41
I just reopened the file to make sure it was the right one and the upper joints are working. This is odd because I tried closing the file and reopening the wbo and it didn't work earlier. Let me keep playing with it and I'll get back with you if it has more issues.


Thanks.

##### Simon Steinmann [Moderator] 09/23/2020 17:59:42
take a look the UR10e proto file, for a guide on how to structure it

##### Westin 09/23/2020 18:00:19
I've poked around in it a bit and I think I understand how it should work.



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/758391035113766982/unknown.png)
%end


What can cause the shadow to not work on a single segment?

##### Simon Steinmann [Moderator] 09/23/2020 18:16:06
check the shapes, there is a "cast\_shadow" parameter somewhere

##### Westin 09/23/2020 18:17:54
It is set to true. Toggling off then on did nothing.

##### Simon Steinmann [Moderator] 09/23/2020 18:18:15
then I dont know

##### Westin 09/23/2020 18:18:22
Okay.


I ran into the issue again where I couldn't move the motor. Exporting the robot, deleting the robot, and importing the robot seemed to fix it. Weird.

##### Simon Steinmann [Moderator] 09/23/2020 18:39:17
when you make changes, you have to reload the world

##### Westin 09/23/2020 18:40:10
I pause the simulation and press the rewind button. Does that reload the world?


I make sure the timer is on 0:00 before I make changes.

##### Olivier Michel [Cyberbotics] 09/23/2020 18:43:01
About the missing shadow, it's probably due to the appearance (material) of the object which may be semi-transparent, like a png texture with an alpha channel.


Changing it to a jpeg image is likely to fix the problem.


No rewind does not reload the world.

##### Westin 09/23/2020 18:45:07
Changing it to a grass texture didn't make a shadow.
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/758398561892171826/unknown.png)
%end


Also pressing the reload world button didn't fix the shadow.


All of my joints are currently working, so I cannot test to see if that was the issue. I'll try it in the future if I run into it again.


grass is a jpg file

##### Olivier Michel [Cyberbotics] 09/23/2020 18:51:13
Can you try to use the exact same appearance as another joint?

##### Westin 09/23/2020 18:51:49
It was the default along with nearly all the other joints before I set it to the grass texture.


Also it acted the same with the PBRAppearance.

##### Olivier Michel [Cyberbotics] 09/23/2020 18:53:52
Very strange. Could you share this world file?

##### Westin 09/23/2020 18:55:39
Its 8.7MB and Discord is telling me larger than 8 is too big. Is there another good way to share it?

##### Olivier Michel [Cyberbotics] 09/23/2020 18:56:37
Oh yes, there is no shadow because your mesh is too heavy.

##### Westin 09/23/2020 18:57:19
Okay, I wondered about that. When I converted to an STL, it warned me about too many polys, but no warning with the VRML.


I thought maybe it handled big VRMLs better than bit STLs.

##### Olivier Michel [Cyberbotics] 09/23/2020 18:57:40
You should try to simplify the meshes (decimation) to reduce the number of triangles.

##### Westin 09/23/2020 18:58:14
Okay, thanks.

##### Diego Rojas 09/23/2020 22:37:42
I am trying to develop a webots-ros2 simulation of a ur5 robot. I am using Ubuntu 20.04LTS and ROS2 Foxy. I installed the webots software and webots\_ros2 packages from package manager and can run the webots\_ros2\_universal\_robots examples just fine. However, when I installed the webots\_ros2 packages from source into a ros2 workspace, I cannot run the same universal robot demo examples. 



The complete issue and error message can be found on the github [https://github.com/cyberbotics/webots\_ros2/issues/145](https://github.com/cyberbotics/webots_ros2/issues/145)



I am still learning webots ( transitioning from Gazebo ) and I suspect I am not setting up the webots environment in the ros\_workspace correctly. I don't see why the webots\_ros2 packages installed from APT would work and the same packages installed from source wouldn't work other than the environment not being properly set up.  



I have tried 

export WEBOTS\_HOME=/urs/local/webots 

Though that did not change anything. 



Any help on setting up a workspace to use the webots\_ros2 packages would be very much appreciated.

##### Olivier Michel [Cyberbotics] 09/24/2020 05:39:26
I assume you meant `export WEBOTS_HOME=/usr/local/webots` (`usr` instead of `urs`).

##### Diego Rojas 09/24/2020 05:40:06
yes, exactly. My apologies, that was a typo


I am now getting a consistent error


" Can't mix string and bytes in path components" 



Which looks to be a new discovered issue with webots\_ros2 version 1.0.1 found here [https://github.com/cyberbotics/webots\_ros2/issues/144](https://github.com/cyberbotics/webots_ros2/issues/144)



Any Ideas would be great

##### Olivier Michel [Cyberbotics] 09/24/2020 05:45:07
We will investigate this and revert back to you (most likely on GitHub).

##### Diego Rojas 09/24/2020 05:45:27
Sounds great, thank you very much!

##### aozdemir 09/24/2020 13:21:52
Hi guys, this is a newbie question but bugging me for days. I have a copy of myBot and modifying certain properties of it (camera, body to box). Whilst sometimes I can make it actually "move forward", sometimes all of sudden it just do not move at all using the same controller. I can see the wheels are rotating but the body do not move. Any idea on why this is happening?

##### jj2244/mejo/alex 09/24/2020 13:44:32
`@aozdemir` 

It was a long time ago, i used Webots. Check if the body is rotating or only the grafics, as i recall these are seperate things.

Gl.

##### Westin 09/24/2020 16:05:28
I'm trying to record video and I'm having  an issue. The video acceleration won't let me change it from inf. I then get an error when it tries to save. Unable to parse option value "inf" as video rate.

##### saditya 09/25/2020 07:53:31
Hello, due to a heavy world file maybe my simulation was running a bit slow. I need to run the simulation in real-time, where the reaction time in real-world is 1ms. What is the ideal value of WorldInfoFPS that I should havein order to have a good quality simulation?

##### Olivier Michel [Cyberbotics] 09/25/2020 08:04:45
`@Westin`: That's odd. What is the value of your `WorldInfo.basicTimeStep`  in the scene tree?


`@saditya`: it really depends on your simulation (complexity, stability, etc.), you should try different values until you get something satisfying... I would recommend however to choose it as a multiple of the basic time step. If your `WebotsInfo.basicTimeStep` is 1 ms, then a FPS of 1000 will allow you to see every single simulation step, but it will run very slowly. A FPS of 100 will allow you to see 1 out of 10 simulation steps, but will be faster. A FPS of 10 will be even faster but more saccadic...

##### saditya 09/25/2020 08:13:31
> `@saditya`: it really depends on your simulation (complexity, stability, etc.), you should try different values until you get something satisfying... I would recommend however to choose it as a multiple of the basic time step. If your `WebotsInfo.basicTimeStep` is 1 ms, then a FPS of 1000 will allow you to see every single simulation step, but it will run very slowly. A FPS of 100 will allow you to see 1 out of 10 simulation steps, but will be faster. A FPS of 10 will be even faster but more saccadic...

`@Olivier Michel` 

> `@saditya`: it really depends on your simulation (complexity, stability, etc.), you should try different values until you get something satisfying... I would recommend however to choose it as a multiple of the basic time step. If your `WebotsInfo.basicTimeStep` is 1 ms, then a FPS of 1000 will allow you to see every single simulation step, but it will run very slowly. A FPS of 100 will allow you to see 1 out of 10 simulation steps, but will be faster. A FPS of 10 will be even faster but more saccadic...

`@Olivier Michel` Thanks, simulation is a bit complex. But thanks a lot 🙂

##### Olivier Michel [Cyberbotics] 09/25/2020 10:12:02
`@Westin`: It turns out this was a reproducible bug. If the `WorldInfo.basicTimeStep` of your world file is greater than 40 (which I strongly suspect), then you get this `inf` bug. To quickly work around the bug, I would recommend to repeatedly divide the `WorldInfo.basicTimeStep` value by 2 until it is lower than 40. (For example if you have 100, you should set it to 25 (25 = (100/2)/2). Then, you will be able to record your movie. Meanwhile we fixed the bug here: [https://github.com/cyberbotics/webots/pull/2268](https://github.com/cyberbotics/webots/pull/2268).

##### Westin 09/25/2020 12:14:39
`@Olivier Michel` I think it was at 60. I have it at 20 and it is working. Thanks getting to this so quickly.

##### Olivier Michel [Cyberbotics] 09/25/2020 12:15:10
OK, 30 should work as well.

##### Westin 09/25/2020 12:16:37
Okay, thanks.

##### Weiyi 09/26/2020 16:24:34
Hello, how can I active the supervisor of a robot by python command?



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/759450388456931369/unknown.png)
%end

##### Justin Fisher 09/26/2020 23:21:57
`@Weiyi` There is a special sort of robot known as a supervisor, which has available various superpowers that aren't available to regular robots (including the ability to create or delete parts of the world, or telekinetically move things around).  Checking the supervisor checkbox in the scene tree gives the robot permission to use these superpowers.  In the controller for a supervisor robot, you'll need to import supervisor commands, not just robot commands (e.g., in Python, you would use `from controller import Supervisor`) and you'll need to have the controller initialize its robot as a Supervisor, rather than as a mere Robot.  E.g., in Python, you would do that with `robot = Supervisor()` rather than `robot = Robot()`.   This would give your robot all the usual robot powers, e.g., to read its sensors and move its motors, plus all the superpowers.  A list of superpowers available to supervisors is available here:  [https://www.cyberbotics.com/doc/reference/supervisor](https://www.cyberbotics.com/doc/reference/supervisor)



(Incidentally, you may want to create a different robot to be your supervisor, though this robot needn't have any interesting parts or anything.  If so, you would give the supervisor robot its own controller program, separate from the program you use to control your ordinary robot.)

##### DrakerDG 09/27/2020 13:09:51
Greetings to all, I have made my first robot in Webots, I know that I still have a lot to learn and I consider that for this reason I ran into a small problem with the hinge joints used for the motors and with the balls casters.  I will be grateful if someone can guide me and thus avoid the deviations that I show in the following video from minute 3:25.



Hinge Joint Issues



In curves there is a displacement of the axis with respect to the anchor point.  Consequently, the wheels and the encoder change their relative position, as well as the front and rear balls caster.  This alters the position and height of the robot at any given time.  If the height relative to the ground is not correct, submergence and strange movements of the robot are generated, losing control of movement.



[https://youtu.be/PcCipP1IfKc](https://youtu.be/PcCipP1IfKc)

##### Simon Steinmann [Moderator] 09/27/2020 14:51:15
Hey `@DrakerDG` , With hingejoints, make sure that the anchor and endPoint Solid translation are exactly the same. Is this the case for you?


Perhaps you can share a screenshot of your scene tree, with the 

1. hingejoint

2. hingejoint parameters

3. endPoint Solid

expanded

##### DrakerDG 09/27/2020 15:46:00

%figure
![LFR-001.png](https://cdn.discordapp.com/attachments/565154703139405824/759803035298955324/LFR-001.png)
%end
%figure
![LFR-002.png](https://cdn.discordapp.com/attachments/565154703139405824/759803036154462268/LFR-002.png)
%end
%figure
![LFR-003.png](https://cdn.discordapp.com/attachments/565154703139405824/759803036641263667/LFR-003.png)
%end

##### Simon Steinmann [Moderator] 09/27/2020 15:48:04
I can already see, that your anchor and translation are 2mm off. You could share your project files (pm if you want) and I can take a look

##### DrakerDG 09/27/2020 15:49:09
[https://github.com/DrakerDG/Webotz/blob/master/Line%20Follower%20Robot%20V4.rar](https://github.com/DrakerDG/Webotz/blob/master/Line%20Follower%20Robot%20V4.rar)

##### Simon Steinmann [Moderator] 09/27/2020 15:50:05
cant open it


can you zip it pls?


nvm got it

##### DrakerDG 09/27/2020 15:51:36
[https://1drv.ms/u/s](https://1drv.ms/u/s)!AsrVsIc6NV0EhqIxgAWRGIWFfY83YA


Tray this please!

##### Simon Steinmann [Moderator] 09/27/2020 15:52:10
had to install unrar software, I'm on linux. works now 🙂

##### DrakerDG 09/27/2020 15:54:39
At the beginning I have configured it at exactly the same point the origin of the wheel with the anchor, but during the journey there happens that strange shift that when stopping the robot the change is evident


Shifting only happens when the robot turns around curves, as if mechanical stress is pulling the wheel off its axis.  The same happens in the caster balls

##### Simon Steinmann [Moderator] 09/27/2020 15:58:25
let me investigate

##### DrakerDG 09/27/2020 15:58:48
Thanks in advance

##### Simon Steinmann [Moderator] 09/27/2020 16:02:18
is it 66 mm or 68 mm offset from the center? You have different values for left and right


I'm a bit confused. Your hingejoints have limits, arent they supposed to be coninuous motors?


nvm the last question, but what are the encoders?

##### DrakerDG 09/27/2020 16:17:00
Shifting only happens when the robot turns around curves, as if mechanical stress is pulling the wheel off its axis.  The same happens in the caster balls


> nvm the last question, but what are the encoders?

`@Simon Steinmann` The encoders are only simulated, actually decorative, they just rotate like the physical robot I have



%figure
![Screenshot_20200927_101816.jpg](https://cdn.discordapp.com/attachments/565154703139405824/759811548021129236/Screenshot_20200927_101816.jpg)
%end

##### Simon Steinmann [Moderator] 09/27/2020 16:20:11
hold on, I have to figure out how to build the controller first. I work in python, not c

##### DrakerDG 09/27/2020 16:20:44
`@Simon Steinmann` ok


[https://www.instagram.com/tv/CFpZJ8aHnF6/?igshid=odmxyndohvmj](https://www.instagram.com/tv/CFpZJ8aHnF6/?igshid=odmxyndohvmj)


In the video you can see that the wheel axis deviates with respect to the anchor only in curves, on the other hand, when it moves in a straight line, this deviation does not occur

##### Simon Steinmann [Moderator] 09/27/2020 16:54:05
still digging, behavior is indeed werid


How large is the deviation?


tbh, i'm at a loss too. very strange

##### DrakerDG 09/27/2020 17:09:33
Yes, me too.

It is small, a few millimeters, it seems an elastic effect due to the outward torque that the wheel experiences when the robot rotates.  Something like that I understand

##### Justin Fisher 09/28/2020 00:16:33
`@DrakerDG` I sometimes have wheels get cock-eyed too.  The two biggest culprits seem to be (1) repeated collisions especially ones where solids end up overlapping a fair amount, so e.g. you might check whether your robot is unusually dense/massive, and you might try messing with world physics settings adjusting how much softness you want to allow when solids overlap, and (2) using supervisor functions to telekinetically move robots or parts of robots -- often that seems to end up slightly displacing some joints.  It seems like both these effects are small, perhaps like a rounding error difference that gradually accumulates.  For me the best cure has been to have a supervisor controller just force joints back into centered position periodically.


Actually, if I had to guess, my guess would be that when the physics engine discovers that things are somehow out of whack, e.g., solids are overlapping more than they should, or one part of a robot gets teleported with respect to things it's supposed to be attached to, then the physics engine probably somehow "splits the difference" to reconcile things, mostly by moving parts around, but also partly by adjusting lasting joint settings, effectively producing a slight deformity in the robot, as compared to the original relative positions of its parts.  This is a bit frustrating because I'd *rather* have my robot remember its design specs, and automatically bring its parts back into calibration.  But it doesn't seem to do that on its own, so I resorted to having a supervisor controller do it periodically.  

Probably another pretty good solution would be to reload your world often, and to have reloaded it quite recently before you make any changes that'll lead you to save the world again.  Deformations of joints persist across hitting reset, but not across reloading of world, so, as long as you take care never to save a world with big joint deformities in it, then you'll always be able to undeform them by hitting reload world.

##### DrakerDG 09/28/2020 00:46:42
`@Justin Fisher` I have done the correction manually.  The option of a supervisor is fine with me.  Just saving the world without deformations is how I have managed to make the robot work without problems, I use it as a reference for any changes and avoid strange movements.



I will continue learning and I will tell you about the advances or doubts that arise along the way.



Thanks a lot 😁👍🏼

##### Lukulus 09/28/2020 11:09:31
Hey, is there a possibility to recognize a Pedestrian with a Radar? I cannot find a radarCrossSection value, so it means it is not possible?

##### Simon Steinmann [Moderator] 09/28/2020 11:10:56
[https://www.cyberbotics.com/doc/reference/radar?tab-language=python](https://www.cyberbotics.com/doc/reference/radar?tab-language=python)

##### Stefania Pedrazzi [Cyberbotics] 09/28/2020 11:11:11
`@Lukulus` yes you can recognize a Pedestrian with the Radar device. The `radarCrossSection` value is defined in the `Pedestrain.proto` file definition

[https://github.com/cyberbotics/webots/blob/master/projects/humans/pedestrian/protos/Pedestrian.proto](https://github.com/cyberbotics/webots/blob/master/projects/humans/pedestrian/protos/Pedestrian.proto)

##### Simon Steinmann [Moderator] 09/28/2020 11:11:13
There is,

##### Lukulus 09/28/2020 11:13:52
I see, thank you! 🙂

##### Justin Fisher 09/28/2020 13:33:45
Quick question:  one of the field types listed in Webots supervisor docs is simply MF, with no hint as to what sort of items might be listed in this field, unlike something like MFFLOAT, which clearly indicates that this field will contain a multi-item indexed list of floats.  What type is MF all by itself?   (I've been working on an improved Python API using Python's "magic methods" to provide easier ways for supervisor-controllers to get and set different fields but I'm not sure how to deal with this field type that I've never seen.)

##### Stefania Pedrazzi [Cyberbotics] 09/28/2020 13:35:54
Usually when MF is used without type it refers to any MF field (MFFloat, MFBool, MFNode, etc.).

Is there a particular occurrence you are referring to?

##### Justin Fisher 09/28/2020 13:37:47
Ok, that was one of my guesses.  Thanks!  (Odd that there wasn't a corresponding SF type listed, though.  I was looking at the docs for supervisor field.getType: [https://www.cyberbotics.com/doc/reference/supervisor?tab-language=python#wb\_supervisor\_field\_get\_type](https://www.cyberbotics.com/doc/reference/supervisor?tab-language=python#wb_supervisor_field_get_type) )

##### Stefania Pedrazzi [Cyberbotics] 09/28/2020 13:38:42
In this case it seems a typo. It should probably be `MF_BOOL` instead of `MF`.


I'm checking and fixing it

##### Justin Fisher 09/28/2020 13:38:56
Ah good, that makes sense too, thanks!

##### Stefania Pedrazzi [Cyberbotics] 09/28/2020 13:43:39
So, `WB_MF` exists and it is used to detect if a type contains single or multiple items


But in the documentaton some `MF_<type>` items are missing

##### Justin Fisher 09/28/2020 14:11:00
Out of curiosity, I've been working on this mostly just for my own ease of usage, but maybe it's something that others would want too?  I'm setting it up so that if N is a Python node object representing a node in a scene tree, then, for arbitrary fieldnames, N.fieldname will automatically return the value that you could have gotten by N.getField(fieldname).getSFxxx(), but with caching of the getField results and of values retrieved this timestep to avoid repeated lookups or retrievals.  Similarly, N.fieldname = newval does the equivalent of N.getField(fieldname).setSFxxx(newval).  Similarly, this allows reading and changing MF fields with standard Python indexing e.g., N.MFfieldname[1] = newvalue, and this also allows for easy retrieval of descendant nodes and their fields, e.g., N.leftMotor.position.  



Is this the sort of thing that you might want to someday include in Webots itself?  It certainly is a *lot* more convenient for supervisor coding than the vanilla Webots Python API is (since you don't have to explicitly locate nodes and fields, and since you don't have to explicitly specify which datatype you'll be getSF'ing).  But, on the other hand, this couldn't have analogs in most of the other languages you support, so it wouldn't fit with the near-perfect symmetry you've been maintaining for various languages.  (This doesn't remove or alter any of the vanilla Python API, it just provides alternative handles for doing things in a much easier way in Python.)

##### Stefania Pedrazzi [Cyberbotics] 09/28/2020 14:20:14
Yes, we could evaluate improving the Python API by adding some specific methods to make it easier to use.

If you open a PR and we will look at it.

We are already caching values at the base C API level, does it really make some performance difference caching them also in the Python API?

##### Simon Steinmann [Moderator] 09/28/2020 14:21:00
[https://github.com/cyberbotics/webots/issues/2269](https://github.com/cyberbotics/webots/issues/2269) this is somewhat related


although we opted for only doing poses (position + orientation)


but my original idea was to be able to define a custom list of fields, and be able to get and set all values at once

##### Justin Fisher 09/28/2020 14:23:38
I haven't tried to do time assessments yet.  If you do already cache values in C, that'll probably be faster than my reduplicating it in Python.  Do you cache getNodeFromDef?  And getSFxxx, for the various xxx each timestep?

##### Simon Steinmann [Moderator] 09/28/2020 14:25:05
there is a larger issue, with getting field values through the supervisor api. Read my initial description in the linked issue

##### Stefania Pedrazzi [Cyberbotics] 09/28/2020 14:26:50
oops, I'm wrong. We are not caching values because they could be outdated by subsequent Supervisor API requests.

But if the caching will be implemented then it should be at the C API level not at the Python API one

##### Justin Fisher 09/28/2020 14:36:49
`@Simon Steinmann` I agree that it would be nice to make commonly-made supervisor retrievals go faster, and I can see that one simple way of doing this would be to require supervisors to declare in advance which fields they'd like quick access to, though I think it would be better still if the Webots C-code could just watch what retrieval requests it has been getting, and automatically pre-cache results for the requests it anticipates as likely to come each timestep, rather than forcing the controller to explicitly make such declarations.  (E.g., a simple approach is to just keep a list of what fields the supervisor read this timestep, and pre-cache all of those fields for the next timestep.)  



To a large extent, this is a separate issue from the question I've been addressing of what notation Python controllers can use to find particular nodes/fields and to get/set their values (though I do recognize that the idea you mentioned of setting up recurring dataservice could provide another handle for getting, and perhaps even setting, a select number of field values too).


`@Stefania Pedrazzi`  I thought the current recommended way for supervisor coders to do things was to do their getNode's and getField's once outside their main loop, so that they wouldn't have to repeat these relatively slow calls during the main loop.  This is equivalent to caching the values that these return.  And it is currently done on the Python (or whatever language) side, not at the C API level.  



Similarly, I thought that the current recommendation was, for each field, do field.getSFxxx() on that field at most once each iteration of the main loop, storing a local copy of the value if you'll want to look at it multiple times.  Again, this is equivalent to caching the returned value, and again it is currently done on the Python side, not the C-side.



Since what I'm aiming to do is to give Python coders like me a much less long-winded way of doing all this stuff, and since this sort of caching is currently left to Python coders to do, doesn't that suggest that I should be setting up my more streamlined system to also do this sort of caching, rather than just wishing that the C API would do it for me (which would be *great*, but not something I'll hold my breath for!).

##### Stefania Pedrazzi [Cyberbotics] 09/28/2020 15:01:23
You should distinguish between the Webots API and the user controller.

It is fine and recommended to cache as much values as possible in your Python controller because you should know what you are doing and you are respondible for the sequence of commands and this is the best and easier place where to implement it.

Note that this is recommended for all the controllers and not only for Python ones.



But the Webots API (C and Python) should be robust to any sequence of commands because we don't know what users are doing. So if we implement a robust caching system then it is worth adding it directly in the C API because it doesn't make much sense to do it in the Python API that is basically only a wrapper and we aim at having equivalent behavior for all the APIs.

##### Justin Fisher 09/28/2020 15:24:42
I'm not sure where to think of the stuff I'm doing in terms of that distinction.  In one sense, I'm just doing more Python stuff which will somehow get imported and called by the user controller, so you could think of it as part of the user controller.  



But you also suggested that I submit this for inclusion in the Python API, which sounds like it belongs more on the "Webots API" side of the divide you proposed.  And indeed, one of the "best" way of implementing this stuff might be to incorporate it straight into the Node and Field classes in the Webots Python API.  (Currently, I'm doing it in container-classes that fully mimic those classes without actually altering them.)  



I'm perfectly comfortable setting up Python code to effectively cache this information behind the scenes, to automatically do the equivalent of what it's already recommended that Python coders do.  And if this did get included in the Webots Python API, that would end up being a sort of caching implemented in Python in the Webots API.  In contrast, I wouldn't even know where to start trying to adjust the Webots C-code to do this sort of caching.  Do you really think I shouldn't be doing this on the Python side?

##### Simon Steinmann [Moderator] 09/28/2020 15:26:18
I think what could be very helpful, is to have a collection of scripts, functions, utilities and tools.


Things like my 'relative\_positions' script and 'ik\_module' I use constantly

##### Stefania Pedrazzi [Cyberbotics] 09/28/2020 15:34:42
> I'm perfectly comfortable setting up Python code to effectively cache this information behind the scenes, to automatically do the equivalent of what it's already recommended that Python coders do.  And if this did get included in the Webots Python API, that would end up being a sort of caching implemented in Python in the Webots API.  In contrast, I wouldn't even know where to start trying to adjust the Webots C-code to do this sort of caching.  Do you really think I shouldn't be doing this on the Python side?

`@Justin Fisher` Unfortunately, for the way the Webots APIs are built, it is not useful to have a caching method in the Python API. So even if you would propose it we won't integrate it in Webots. And moreover it is more complicated to implement it in the Python API (that is automatically built using swing) than in the C API.

I would suggest you to propose to submit for inclusion just methods that will be specific to Python or that replace existing methods in a more "pythonic" way.

Because otherwise new functionalities should be applied to all the APIs

##### Simon Steinmann [Moderator] 09/28/2020 15:58:29
`@Justin Fisher` In case you're curious, the following are timings for several supervisor api functions. Each has been executed 100k times, and the calltime is averaged.

---------------------------

getFromDef:           1373.8  ns

node.getPosition:     18177.4  ns

node.getOrientation:  18672.2  ns

node.getTypeName:     387.5  ns

node.getParentNode:   1079.1  ns

node.getField:        1177.5  ns

node.getSFVec3f:      18562.2  ns

node.setSFVec3f:      363.1  ns

motor.setPosition:    343.1  ns


As you can see, getting any values from Fields is very slow. however, setting them is fast.

##### Justin Fisher 09/28/2020 16:32:25
I don't see any plausible way of doing what I'm doing without effectively including a fair amount of caching.  Suppose `bot` is a Node object referring to some robot node in the scene tree.  I would like my supervisor to be able to use expressions like `bot.LEFTAXLE.position = new_pos` to do the equivalent of 

```field=getNodeFromDef( bot.getDef()+".LEFTAXLE" ).getField("position")
setFunction=getattr(field,"set"+field.typeName())
setFunction(field, new\_pos )
```   

However, I'm quite sure that doing the entirety of that repeatedly would end up being prohibitively slow -- that's why best practices suggest moving all but the final line (which exectutes `setSFFloat`) up out of the main loop.    To avoid such slowness, I only look up LEFTAXLE once and store a container with this node as the `.LEFTAXLE` attribute of bot, and I only `getField('position')` once and store a container with this field as the `.position` attribute of that node, and I cache the appropriate get and set functions to use for that field's data-type (e.g. getSFFloat rather than getSFString).  Thereafter, reading and writing of `bot.LEFTAXLE.position` goes just about as fast as it possibly could go, because I've effectively cached that subnode, that field, and the relevant functions for getting and setting it.  



Now, you're right that this won't be robust against certain unusual circumstances, like ones where a supervisor deletes and replaces the LEFTAXLE node, hence making cached reference to that node obsolete.  I might be able to auto-detect some such circumstances and re-look up the relevant items.  Even if I can't auto-detect all of them, I'd be fine with clearly documenting the limitation and letting coders fall back on more tedious vanilla notation in such cases, while still having the much more streamlined notation to use in the vast majority of cases.


> In case you're curious, the following are timings for several supervisor api functions. 

`@Simon Steinmann` 

Thanks for this info Simon.  The only things I'm really surprised by are (1) getFromDef is faster than I expected, though maybe this depends on how deeply hidden in the scene tree the node you're looking for was?  Or maybe they have some sort of hashing scheme to be able to look up nodes without needing to traverse the tree and do a bunch of string-comparisons?  At any rate, I'm happy to see this was relatively fast, and only a tad slower than getParentNode which requires no traversal at all so intuitively should have been much faster!  (2) I wasn't too surprised by getPosition and getOrientation being slow, since, for descendant nodes, these might well require computations translating local relative coordinates through various frames of reference to return global coordinates (or perhaps these had already been pre-computed and stored for each node each time step for some reason), but I *was* surprised that getSF was just as slow as these, even though it seems like it should just be simple retrieval.



It probably shouldn't be surprising that set commands showed up as being fast, since they aren't actually executed in real time -- instead they're just queued to be processed during the next robot.step(timestep), and that processing likely wasn't included in your tally?

##### eeeloisee 09/29/2020 02:35:43
Hi, I'm new to webots. I am working on modelling a vehicle/robot with 2 forward drive wheels and two free rear wheels. What would be the best way to model/represent the free rear wheels? I am using rotational motors for the drive wheels. Thank you!

##### Veverest 09/29/2020 04:06:19
Hey everyone. I am trying to implement a supervisor controller in webots. The first example [here]([https://cyberbotics.com/doc/guide/supervisor-programming?tab-language=python](https://cyberbotics.com/doc/guide/supervisor-programming?tab-language=python)) gives me an error "AttributeError: 'NoneType' object has no attribute 'getField'" for the trans\_field object. Am I making a mistake in getting the name of the robot? My Webots version is R2020b Rev 1, if that is relevant.

##### Olivier Michel [Cyberbotics] 09/29/2020 06:22:38
`@Veverest`: it is very likely that your `robot_node` object is `None` because the corresponding `DEF` name was not found (e.g., there is no node named `MY_ROBOT` in your world file). You should test if is it not `None` before calling the `getField` method.

##### Darko Lukić [Cyberbotics] 09/29/2020 06:50:00
> Hi, I'm new to webots. I am working on modelling a vehicle/robot with 2 forward drive wheels and two free rear wheels. What would be the best way to model/represent the free rear wheels? I am using rotational motors for the drive wheels. Thank you!

`@eeeloisee` I suppose you want to add a caster wheel, here is an example:

[https://github.com/cyberbotics/webots/blob/f7bf0cb385842478c5635e29db8e25689d3d0c65/projects/robots/adept/pioneer3/protos/Pioneer3dx.proto#L420](https://github.com/cyberbotics/webots/blob/f7bf0cb385842478c5635e29db8e25689d3d0c65/projects/robots/adept/pioneer3/protos/Pioneer3dx.proto#L420)



Robot: Adept's Pioneer 3-DX ([https://www.cyberbotics.com/doc/guide/pioneer-3dx](https://www.cyberbotics.com/doc/guide/pioneer-3dx))

##### Olivier Michel [Cyberbotics] 09/29/2020 06:56:37
`@Justin Fisher` & `@Simon Steinmann`: the main reason for the bad performance of the field getters (getSFVec3f, getPosition, getOrientation) is that they fire some communication process between the libController and Webots whereas in the other function benchmarked by `@Simon Steinmann`, the values are cached on the libController side and don't require to send a request to Webots and wait for the answer.

##### chungshan 09/29/2020 08:12:41
Hi, I got warning "Warning: wb\_range\_finder\_get\_range\_image: image could not be retrieved." when I call getRangeImage() in python. What does this mean?

##### Justin Fisher 09/29/2020 08:17:19
getRangeImage() is the right thing to call it in Python.  Did you enable the device beforehand, by calling its .enable(samplingPeriod) function?

##### chungshan 09/29/2020 08:19:24
Yes, I already enable it

##### Justin Fisher 09/29/2020 08:22:13
I haven't worked with rangefinders specifically, but the most common cause for error messages like that for me is that I either forgot to enable the device, or I haven't waited for the samplingperiod to elapse yet since I enabled the device, so it hasn't yet prepared a reading for me to retrieve.

##### Olivier Michel [Cyberbotics] 09/29/2020 08:22:50
Is your controller synchronous? (e.g., Robot.synchronization is set to TRUE)

##### chungshan 09/29/2020 08:27:34
`@Olivier Michel` , After setting synchronization to TRUE, it works! I set synchronization to FALSE originally because simulation went very slow when setting synchronization to TRUE.



Is there any way to set synchronization to FALSE to get a faster simulation?


Also, when I set synchronization to FALSE, getImageArray() works good, why?

##### Olivier Michel [Cyberbotics] 09/29/2020 08:31:48
There are other ways to get the simulation running fast, including increasing the WorldInfo.basicTimeStep and/or Robot.step() value.


See [https://www.cyberbotics.com/doc/guide/speed-performance](https://www.cyberbotics.com/doc/guide/speed-performance)


There may be a bug when Robot.synchronization is FALSE with camera rendering...

##### Justin Fisher 09/29/2020 08:48:59
`@chungshan` I think setting synchronization to False should speed up your simulation only in the case where your controller was running too slowly to do its processing as quickly as Webots was ready to move on to the next step, so having synchronization set to True would make Webots hold up advancing the simulation until your controller said it was ready for the next step, whereas setting it to False would speed up the simulation at cost of sometimes making your controller miss out on opportunities where it might have wanted to send additional commands before the next step but didn't do so quickly enough.  If you're trying to do much image processing in Python, it wouldn't surprise me if your controller would struggle to get everything done in one timestep, esp. if your timestep is small.  You might benefit from reading new images less often, and dividing up the work of processing them over multiple timesteps so that your controller never requires more than a timestep of realtime to finish its work.



There isn't any obvious reason why a lagging controller should cause the error message you were getting though.  My best guess is that Webots tries to pass the controller a pointer to the actual image that is constructed, rather than a copy of it (the docs hint at this), so it may be that while your slow controller still has access to that image, this prevents Webots from constructing a new image in the same place to give to you the next timestep.  I'm not sure it should really work this way for *Python* controllers though, since I think they probably are just given a copy of the original, rather than a reference to the same chunk of memory, so I don't think there's any reason why Webots should *need* to wait up for a lagging Python controller wrap up its processing of the image from the last timestep before constructing a new image for the next timestep.

##### chungshan 09/29/2020 08:53:48
`@Justin Fisher` , thanks for thorough explanation!

##### Justin Fisher 09/29/2020 09:02:38
`@Olivier Michel` Here's a related question I've had.  In general the popular Python library NumPy is much faster at dealing with arrays of values than is Python's vanilla way of dealing with arrays of numbers.  Is there a convenient way to get Webots camera/rangefinder images into NumPy arrays?   Among other benefits, it should be straightforward for Webots to pass NumPy a pointer to the very same memory block where the image was stored by Webots C-code, rather than making a copy as is probably (?) needed when you create vanilla Python arrays.

##### Olivier Michel [Cyberbotics] 09/29/2020 09:05:46
There currently only two methods to retrieve a camera image in Python. See [https://www.cyberbotics.com/doc/reference/camera?tab-language=python#wb\_camera\_get\_image](https://www.cyberbotics.com/doc/reference/camera?tab-language=python#wb_camera_get_image).


Probably you can work out something out of the `getImage()` method as it returns a string which is close to the binary data of the image. I am not sure however how to convert this into a numpy array...


If that doesn't work, maybe we could consider adding a third method that would produce something easy to pass to numpy...

##### Justin Fisher 09/29/2020 09:38:44
I think *maybe* the NumPy `frombuffer` function can be used to  quickly convert byte strings to NumPy arrays, and then the NumPy `reshape` method is a lightning-fast way to cause it to start viewing that array as 2D (or 3D if you want to view color as a dimension).



Still, I think adding a third method would probably be best.  At the very least you could save the time spent copying the Webots data into a Python bytestring or list, and it would give new users a clear interface, rather than sticking them with the challenge of figuring out an efficeint way to convert this to NumPy themselves.  



Regardless, it looks like this wouldn't work for rangefinders, since neither of the Python options for those yields a byte-string?  (You can of course convert the Python list of floats to a NumPy array but I'm pretty sure that requires recopying the contents a second time which can be relatively slow, so it would have been better to cut out the middlemen.)  Maybe it would be good to at least offer some sort of bytestring option for rangefinders?



(It'd probably also be good to have the inverse sort of functionality for Webots displays, e.g., a version of display.imageLoad() that takes an array rather than a file as input.)

##### Olivier Michel [Cyberbotics] 09/29/2020 09:41:42
> `@Olivier Michel` , After setting synchronization to TRUE, it works! I set synchronization to FALSE originally because simulation went very slow when setting synchronization to TRUE.

`@chungshan`: I cannot reproduce this problem with synchronization set to FALSE. May I ask you to open an issue on GitHub and upload your simulation that shows this problem so that we can try to reproduce it and eventually fix it. [https://github.com/cyberbotics/webots/issues/new?template=bug\_report.md](https://github.com/cyberbotics/webots/issues/new?template=bug_report.md)

##### Justin Fisher 09/29/2020 13:07:42
Webots setMF docs allow use of negative indices to count backwards from end of list.  Webots getMF docs do not allow for this .  Is there a reason for this asymmetry?

##### Olivier Michel [Cyberbotics] 09/29/2020 13:11:15
🤔 I believe there is no good reason for that...


Can you open an issue about it, so that we will be able to fix it?

##### Justin Fisher 09/29/2020 13:12:48
That would require me finding my old github credentials 🥺

##### Olivier Michel [Cyberbotics] 09/29/2020 13:13:00
🤣


OK, I will do it for you.


In fact, I believe negative indices work in both cases. The documentation is simply not up-to-date.


Did you try? Or did you only refer to the docs?

##### Justin Fisher 09/29/2020 13:18:05
It looked to me like they worked in both cases, but I wasn't sure whether I could rely upon it working, because of the docs


sounds like its just a docs error

##### Olivier Michel [Cyberbotics] 09/29/2020 13:19:12
I double checked the code, and according to it, it should work equally. I will fix the doc.

##### Justin Fisher 09/29/2020 13:21:47
i've been writing python magic methods so that I can have my supervisor controller say things like `node.field[i] = newvalue` as a shorthand for `node.getField("field").setMFxxx( i, newvalue )` and wasn't sure whether I should program in the handling of negative indices myself

##### Olivier Michel [Cyberbotics] 09/29/2020 13:23:48
Nice.

##### Justin Fisher 09/29/2020 13:34:57
This also allows nicely for Python slicing.  E.g. field[start:stop] returns a list of getMFxxx values for indices from start up to stop.  or field[:] returns a list of all the getMFxxx values


I have been puzzling over how to best handle insertion of new entries into MF fields in a "pythonic" way


in Python list[1:1]=newitems inserts newitems into list just before its old element [1].  it's pretty straightforward to let python do the same thing for webots fields


But it gets a bit trickier to handle cases where the new entries are a different size than the old slice that is being replaced, or where the old slice was iterating backwards through the lists, or stuff like that


i guess Python itself forbids some of these cases (like replacing a slice with negative stepsize with a different-length sequence), and the most common case that it does allow  (replace this contiguous sequence of X elements with that new sequence of Y elements) is pretty straightforward for me to handle too

##### Olivier Michel [Cyberbotics] 09/29/2020 13:55:52
I see.


That should be fixed here: [https://github.com/cyberbotics/webots/pull/2277](https://github.com/cyberbotics/webots/pull/2277)

##### Justin Fisher 09/29/2020 14:22:02
Or maybe I've just been overengineering this.  In my experience, I rarely ever want to modify some specified range of MF indices at once, so maybe there's little point in me making it easier for python coders to do so.  I guess the one way I would have used such functionality repeatedly would be to delete all the children of a node, which I've done as `for i in range(childrenfield.getCount()): childrenfield.removeMF(-1)` but which my magic methods let you do with `node.children=[]`

##### Diego Rojas 09/29/2020 19:14:19
I am trying to create a simulation with a robotic arm and a camera or 3-D lidar sensor, and want to use ROS2. At the moment, I have ROS2 and Moveit2 successfully controlling my robot arm in webots. Now I want to include a perception sensor in webots, and publish sensor information from webots to ROS2 so I can apply some object recognition techniques. 



My question is, are there any current nodes or webots controllers than can publish 3-D lidar info or Camera info to ROS2 or RViz? 



If not, is it possible to create a custom controller in webots which creates a ROS topic, attach the controller to the sesnor in the world file, and publish the data from webots? 



Any input would be greatly appreciated, thank you.

##### eeeloisee 09/29/2020 19:47:09
> `@eeeloisee` I suppose you want to add a caster wheel, here is an example:

> [https://github.com/cyberbotics/webots/blob/f7bf0cb385842478c5635e29db8e25689d3d0c65/projects/robots/adept/pioneer3/protos/Pioneer3dx.proto#L420](https://github.com/cyberbotics/webots/blob/f7bf0cb385842478c5635e29db8e25689d3d0c65/projects/robots/adept/pioneer3/protos/Pioneer3dx.proto#L420)

> 

> Robot: Adept's Pioneer 3-DX ([https://www.cyberbotics.com/doc/guide/pioneer-3dx](https://www.cyberbotics.com/doc/guide/pioneer-3dx))

`@Darko Lukić` Thank you for your response, this was helpful! I was able to create two rear caster wheels, however, when trying to drive my robot/vehicle to turn left or right (I then just do opposite signs for the velocities on the 2 front driving wheels), the rear caster wheels don't rotate. It seems like they even act as a brake hindering movement of the entire vehicle when trying to turn. The caster wheels rotate perfectly fine with the motion of the drive wheels in forward and backward motions. Do you maybe know factors that could be the cause of this?

##### Justin Fisher 09/29/2020 20:25:44
`@eeeloisee`  I'll paste in something I wrote in response to someone else's question about casters a while back:  For the rear caster, I've had pretty good luck putting another wheel spinning forwards on a hinge there (a cylinder worked, but I ended up liking a spinning sphere better), setting its contactMaterial property to be something new (I called mine "skid") and then in WorldInfo > contactProperties add an entry specifying that "skid" should have its interaction with "default" material involve very little friction (I used coulombFriction 0.1).   This lets it spin forwards as your robot drives along, but also to easily slide sideways across the ground as the robot turns.

##### eeeloisee 09/29/2020 22:14:00
`@Justin Fisher` Thank you!! I'll try this out.

##### soheil 09/30/2020 01:50:31
`@Justin Fisher` I want to talk about the questions you answered me before about a robot with  differential wheels. What you said about that 4 wheeled robot is not what I want. I want there to be one differential motor to which I send just one velocity command and the velocity is transformed to both wheels considering that if one wheel is blocked or something like that, All the power goes to the other one. Some thing like the structure in the cars. Isn't there something similar to that in webots?


I saw that differential wheel node but it is depricated and I dont know whay.

##### Justin Fisher 09/30/2020 09:35:41
`@soheil`  You're right that the old deprecated differential class does not do this.  In fact, I don't know of any device in Webots that automatically works like a drive train differential, having a single motor be connected to two wheels in such a way that the motor's angular velocity is always equal to the average of the two wheels' angular velocities.  



If I wanted to model that in Webots, I would set up my robot with a motor on each wheel.  Each timestep, I would use the motors' get\_velocity functions to read what their current angular velocity is.  In my controller, I would first compute what I want their average velocity to be (the velocity that you had hoped to send to a single motor).  Then I would compute target angular velocities to send for each wheel.  As a first approximation, this might be something like 



`newLeftSpeed = desiredAverageSpeed * oldLeftSpeed / (abs(oldLeftSpeed) + abs(oldRightSpeed) + someConstant)`



This intuitively attempts to maintain the old ratio between the two wheel speeds, just now with the desired new average.   I put the someConstant there for  two reasons.  First, in the case where both motors are stopped this would otherwise give a division-by-zero error.   Second, this gives the wheels some tendency to "straighten out" and equalize their velocity when there aren't external forces keeping them different.  If someConstant is infinitesimal, its only effect would be to avoid division by zero when both wheels are stopped, and if just one wheel is stopped nothing except external forces would ever get it to start spinning again.  As someConstant approaches infinity, this would instead approach the case where you give exactly the same speed commands to both wheels.  I would experiment with values for someConstant.  This won't be a perfect simulation (nothing ever is!) but it would probably be close enough for lots of purposes.

##### eeeloisee 09/30/2020 09:38:47
Hi, is there a way to get a velocity and/or position motion profile graph for the rotational motors of a robot on Webots?

##### Justin Fisher 09/30/2020 09:41:54
`@eeeloisee` I'm not sure exactly what graph you're hoping for, but I think the default robot window (which you can pull up by double-clicking your robot in the simulation) gives some options that might be in the ballpark of what you want (e.g., graphs of what different values have been over time).  If it doesn't give you quite what you want, you could probably reverse-engineer a solution following that model, but that might turn out to be a big project.


(You could also just gather the readings yourself, and use your favorite graphics library to graph them.)

##### eeeloisee 09/30/2020 09:45:21
`@Justin Fisher` Thanks for responding! yes, I have seen robot window for position sensors I added to the motors... Is there a way to export those graphs or see the whole of it during the simulation?

##### Justin Fisher 09/30/2020 09:46:46
I don't know.  I haven't worked with it much.  My initial, perhaps not very helpful, reactions are (1) hit print-screen, and (2) try to view source on the robot window which is just an html page, and hopefully you can figure out how to extract the data you want

##### eeeloisee 09/30/2020 09:49:00
`@Justin Fisher` Alrighty, thank you!

##### Justin Fisher 09/30/2020 09:51:19
Ultimately, probably the better way to go is to gather the data in your controller, and then use a graphics library (e.g. SciPy if you're using python) to generate graphs.  Doing things in the Webots robot window will probably be much more constrained, since you'll have to do stuff in html+javascript, piping information back and forth from the simulation.

##### eeeloisee 09/30/2020 09:55:55
That makes sense. I'll try to see what I can do about my system then in terms of graphics libraries. I'm using C.

##### Darko Lukić [Cyberbotics] 09/30/2020 10:02:03
`@Diego Rojas` Unfortunatelly, at the moment, there is no module that exposes ROS2 interface from 3D LiDAR (only 2D). Of course, you can add ROS2 interface for 3D LiDAR by creating a custom controller:

[https://github.com/cyberbotics/webots\_ros2/tree/master/webots\_ros2\_core#custom-launcher-file-and-driver](https://github.com/cyberbotics/webots_ros2/tree/master/webots_ros2_core#custom-launcher-file-and-driver)



Camera module exists:

[https://github.com/cyberbotics/webots\_ros2/blob/master/webots\_ros2\_core/webots\_ros2\_core/devices/camera\_device.py](https://github.com/cyberbotics/webots_ros2/blob/master/webots_ros2_core/webots_ros2_core/devices/camera_device.py)



I can give you more concrete instructions, but can you tell me how did you create a ROS2 driver for the robot arm? Did you use this example?

[https://github.com/cyberbotics/webots\_ros2/tree/master/webots\_ros2\_universal\_robot](https://github.com/cyberbotics/webots_ros2/tree/master/webots_ros2_universal_robot)

##### aozdemir 09/30/2020 13:45:05
Hi, when I am running the simulation, the retrieved camera image includes wrong colour overalys (random black rectangles and triangles mostly). Anyone know what may cause this?

##### Olivier Michel [Cyberbotics] 09/30/2020 13:48:38
It could be related with your graphic card configuration. What graphics card do you have?

##### aozdemir 09/30/2020 14:06:03
I have two NVIDIA TITAN RTX, it is a powerful graphic card. Although I don't know if Webots can access/use it

##### Olivier Michel [Cyberbotics] 09/30/2020 14:06:48
It should. Which OS are you running? Windows or Linux?

##### aozdemir 09/30/2020 14:07:15
Ubuntu 20.04 (I have i3 window manager installed, don't know if it makes a difference)

##### Olivier Michel [Cyberbotics] 09/30/2020 14:07:57
What you get when you type "webots --sysinfo"?


Does it display a reference to your graphics card?

##### aozdemir 09/30/2020 14:08:23
System: Linux 5.4.0-45-generic x86\_64

Processor: AMD Ryzen Threadripper 3970X 32-Core Processor

Number of cores: 64

OpenGL vendor: NVIDIA Corporation

OpenGL renderer: TITAN RTX/PCIe/SSE2

OpenGL version: 4.6.0 NVIDIA 440.100

##### Olivier Michel [Cyberbotics] 09/30/2020 14:08:30
That looks fine.


Can you post a screenshot of the rendering problem you have?

##### aozdemir 09/30/2020 14:10:06

%figure
![issue.png](https://cdn.discordapp.com/attachments/565154703139405824/760866066271567954/issue.png)
%end


You can see in the overlayed camera image, black pixels

##### Olivier Michel [Cyberbotics] 09/30/2020 14:10:43
I see. We recently fixed a bug specific to the RTX cards: [https://github.com/cyberbotics/webots/pull/2215](https://github.com/cyberbotics/webots/pull/2215)


Can you try with a nightly build of Webots that includes this patch?


[https://github.com/cyberbotics/webots/releases](https://github.com/cyberbotics/webots/releases)


(get the most recent one)

##### aozdemir 09/30/2020 14:11:33
Sure, installing now


does develop or master matter?

##### Olivier Michel [Cyberbotics] 09/30/2020 14:11:59
master


It should be fixed on both branches, but the patch was applied to master first.

##### aozdemir 09/30/2020 14:36:36
Downloaded and opened up "webots-R2020b-rev2-x86-64\_ubuntu-16.04.tar.bz2". Unfortunately I still see the camera noise



%figure
![issue-2.png](https://cdn.discordapp.com/attachments/565154703139405824/760872774364299324/issue-2.png)
%end


I am downloading "webots\_2020b-rev2\_amd64.deb", will try with that as well

##### Olivier Michel [Cyberbotics] 09/30/2020 14:41:32
I doubt this will be better. May I ask you to write a bug report at [https://github.com/cyberbotics/webots/issues/new?template=bug\_report.md](https://github.com/cyberbotics/webots/issues/new?template=bug_report.md) including a precise procedure so that we can try to reproduce the problem on our RTX machine.

##### DrakerDG 09/30/2020 14:42:01
`@aozdemir` Hello, have you decorated those streets with their trees and details?

##### aozdemir 09/30/2020 14:44:02
`@Olivier Michel` I can do that!


`@DrakerDG` yes, I did. Do you think this is the issue?

##### DrakerDG 09/30/2020 14:48:08
`@aozdemir` To be honest I am new to this, but it seems that it does not resolve the texture that should go in the mesh, similar as when a vector is inverted, the texture is not seen and therefore it looks black

##### aozdemir 09/30/2020 14:50:46
I am also new, I just added trees and buildings from Webots own object database. Maybe it is too many details 🤷‍♂️


Is there anyway to improve the rendering by reducing the physics accuracy? (in the WorldInfo settings, I do not need accurate physics but camera images)

##### Simon Steinmann [Moderator] 09/30/2020 15:20:27
Do you mean increase the speed, at which the simulation is running at?

##### aozdemir 09/30/2020 15:21:11
Yes (also I meant rendering camera images)

##### Olivier Michel [Cyberbotics] 09/30/2020 15:21:51
For camera images, you can setup all the maximum values in the OpenGL preferences. That should produce high quality images.

##### Simon Steinmann [Moderator] 09/30/2020 15:21:55
Usually the simulation is cpu (physics) bottlenecked. So if you increase the basicTimeStep in worldInfo, it will be faster

##### Weebo 09/30/2020 16:06:15
Hello everyone. I'm simulating an e-puck in Webots, specifically trying to use its gyroscope. However, whenever I try to get the device, it keeps giving me the warning "gyro device not found". In the official documentation for the e-puck at the webots page the gyroscope is described with the name "gyro", but it doesn't seem to work.

##### Olivier Michel [Cyberbotics] 09/30/2020 16:13:48
Can you share the source code of your controller?

##### Simon Steinmann [Moderator] 09/30/2020 16:18:45
In case you are using python, you can use this simple code to get a list of all devices, conneted to your robot:



\# Initialize the Webots Supervisor.

supervisor = Supervisor()

timeStep = int(supervisor.getBasicTimeStep())





\# Get list of all devices

n = supervisor.getNumberOfDevices()



for i in range(n):

    device = supervisor.getDeviceByIndex(i)

    print(device.getName(), '   - NodeType:', device.getNodeType())


\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_

Should be easy to translate to other api as well

##### Diego Rojas 09/30/2020 16:20:28
`@Darko Lukić` Thank you very much. Yes if you can give me more concrete instructions as to how to create a custom controller for a perception sensor like a 3D LiDAR sensor that would be great. 



As far as the ROS2 driver for the robot arm, yes I used that example of the universal robots. I created a moveit2 package for the ur5e robot arm which uses ros2\_control. You can follow this moveit2 demo [https://github.com/ros-planning/moveit2/tree/main/moveit\_demo\_nodes/run\_move\_group](https://github.com/ros-planning/moveit2/tree/main/moveit_demo_nodes/run_move_group)

I then utilized the follow\_joint\_trajectory action server and published joint commands from moveit2, to the webots simulated robot.

##### Weebo 09/30/2020 16:22:55
> Can you share the source code of your controller?

`@Olivier Michel` 



from controller import Robot, DistanceSensor, Motor, PositionSensor, Accelerometer, Gyro

import math



\#-------------------------------------------------------

\# Initialize variables



MAX\_SPEED = 6.28

WHEEL\_RADIUS = 0.0205

AXLE\_LENGTH = 0.052

FULL\_ROT = 17.282



speed = 0.5 * MAX\_SPEED

length = 10

sides = 4

right\_ini = 0

left\_ini = 0



\# create the Robot instance.

robot = Robot()



\# get the time step of the current world.

timestep = int(robot.getBasicTimeStep())  # [ms]



\# states

states = ['forward', 'turn']

current\_state = states[0]



\# -------------------------------------------------------

\# Initialize devices



\# Motors

leftMotor = robot.getMotor('left wheel motor')

rightMotor = robot.getMotor('right wheel motor')

leftMotor.setPosition(float('inf'))

rightMotor.setPosition(float('inf'))

leftMotor.setVelocity(0.0)

rightMotor.setVelocity(0.0)



\# Position sensors

leftPosition = robot.getPositionSensor('left wheel sensor')

rightPosition = robot.getPositionSensor('right wheel sensor')

leftPosition.enable(timestep)

rightPosition.enable(timestep)



\# Accelerometer

accelerometer = robot.getAccelerometer('accelerometer')

accelerometer.enable(timestep)



\# Gyroscope

gyroscope = robot.getGyro('gyro')

\# gyroscope.enable(timestep)



\# -------------------------------------------------------

\# Main loop:

\# - perform simulation steps until Webots is stopping the controller

while robot.step(timestep) != -1:



    # Update sensor readings



    leftPositionValue = leftPosition.getValue()

    rightPositionValue = rightPosition.getValue()

    [x\_acc, y\_acc, z\_acc] = accelerometer.getValues()

    print("X:", x\_acc, "Y: ", y\_acc, "Z: ", z\_acc)





    leftMotor.setVelocity(speed)


That's my source. Everything works except for the "gyroscope = robot.getGyro('gyro')", that returns the gyro device not found


> In case you are using python, you can use this simple code to get a list of all devices, conneted to your robot:

> 

> \# Initialize the Webots Supervisor.

> supervisor = Supervisor()

> timeStep = int(supervisor.getBasicTimeStep())

> 

> 

> \# Get list of all devices

> n = supervisor.getNumberOfDevices()

> 

> for i in range(n):

>     device = supervisor.getDeviceByIndex(i)

>     print(device.getName(), '   - NodeType:', device.getNodeType())

`@Simon Steinmann` Let me try this, thanks


> `@Simon Steinmann` Let me try this, thanks

`@Weebo` Just did this, and there´s actually no gyro device inside the e-puck. So I´m guessing it´s not defined in the PROTO, even though it´s listed in the e-puck webpage

##### Simon Steinmann [Moderator] 09/30/2020 16:26:54
this is possible


looking at the E-puck.proto, it does have a gyro


which proto file are you using?

##### Weebo 09/30/2020 16:31:03
Weird. You´re right. Just looked it up on the e-puck inside one of the demo examples and it does have a PROTO, I don't even know why my e-puck PROTO is missing the gyro. In any case, adding it right now and see if it works

##### Simon Steinmann [Moderator] 09/30/2020 16:31:28
where did you get your proto from?


in Webots, if you simply go to add node and search for 'puck' you should find the official model with everything you need

##### Weebo 09/30/2020 16:32:29
I got it from an example I found on internet, with a pre-made world for a line-following algorithm. I guess the PROTO wasn't complete, didn't even consider that could be the case since everything seemed to be working just fine.

##### Simon Steinmann [Moderator] 09/30/2020 16:32:56
just remove their model, and use the official one

##### Weebo 09/30/2020 16:39:26
Working flawlessly now, thanks a lot!

## October

##### Darko Lukić [Cyberbotics] 10/01/2020 08:34:50
`@Diego Rojas` I am glad to hear that Webots works smoothly with MoveIt 2. We should add it to our demos!



About the 3D LiDAR. I have just added support for 3D LiDARs to webots\_ros2 core: [https://github.com/cyberbotics/webots\_ros2/pull/148](https://github.com/cyberbotics/webots_ros2/pull/148)

Let me know if it works for you and if you need any help compiling the branch.

##### Justin Fisher 10/01/2020 10:47:47
Simple somewhat annoying bug:  if you play the simulation for one frame and something crashes, the play-one-frame button grays out (which is fine), but it stays grayed out even after you hit reset (which is not fine!)

##### Stefania Pedrazzi [Cyberbotics] 10/01/2020 10:50:36
`@Justin Fisher` could you please open an issue for this bug?

[https://github.com/cyberbotics/webots/issues/new?template=bug\_report.md](https://github.com/cyberbotics/webots/issues/new?template=bug_report.md)

##### Justin Fisher 10/01/2020 10:51:21
(I'm not sure whether the first graying out is really all that fine either.  It doesn't gray out the other "play" buttons, so why gray out that one?)

##### Stefania Pedrazzi [Cyberbotics] 10/01/2020 10:52:07
Depending from the controller program, a step could take very long


Graying out the button is needed:

1. to notify users that the step is still being processing

2. to avoid to execute a new step before the previous one is over

##### Justin Fisher 10/01/2020 11:06:21
That kind of make sense, though I had intuitively expected a different (and arguably better) setup where you instead just have each click of the play-one-frame button advance a designated pausing-point of the simulation by a time step, so if someone triple-clicks the play-one-frame button they'll get what they expect (3 more frames and then pausing) rather than what it currently gives us (unpredictable because it all depends on whether the simulation runs fast enough to process a full frame between the successive clicks). 

Regardless, it's definitely a bug that it stays gray after hitting reset.  Will post on github.


Another reason your explanation doesn't make sense, though:  when you hit play, the simulation can keep on running, just without the controller that crashed, so it's not like it's stuck waiting for the controller.  If hitting play can advance frames, why can't hitting play-one-frame advance you one frame?

##### Stefania Pedrazzi [Cyberbotics] 10/01/2020 11:12:29
In real-time, run and fast mode the step is started automatically by Webots after the previous is over.

In step mode, the step is started by the user with the click.

Currently there is no system that buffers the users clicks and they are executed immediately.


But it is a bug that the button is not enabled after a controller crashed.

That's why I asked you to report it

##### Justin Fisher 10/01/2020 12:10:14
Tis reported now

##### Stefania Pedrazzi [Cyberbotics] 10/01/2020 12:15:48
Thank you

##### Justin Fisher 10/01/2020 12:22:58
Is there a good way to start up Webots without it auto-running the simulation?  (Especially useful in cases where you've managed to get your simulation set up in a way that crashes Webots!!!)

##### Stefania Pedrazzi [Cyberbotics] 10/01/2020 12:23:25
yes, you should start it with the option `--mode=pause`


you can also set the startup mode in the Webots preferences

##### Justin Fisher 10/01/2020 12:29:22
That partying face emoticon means, THANK YOU! Webots is now not crashing each time I open it!


(Now to fix why it was crashing)

##### Stefania Pedrazzi [Cyberbotics] 10/01/2020 12:30:21
You're welcome! This was an easy issue to solve 😀

##### Justin Fisher 10/01/2020 12:52:57
So, it looks like what's crashing it is having a supervisor insert a new point into the spine field of an extrusion proto.  Is there any reason that *should* cause a full Webots crash-to-desktop?  (I can see that the extrusion briefly takes on the expected new shape before Webots closes itself, so it looks like the Proto is procedurally updating itself as you'd expect.)

##### Stefania Pedrazzi [Cyberbotics] 10/01/2020 12:53:49
No. Even if the resulting geometry is not valid, Webots should not crash.


If it does, then it is a bug

##### Justin Fisher 10/01/2020 13:08:59
Hrmm... it looks like there's some sort of poor interaction between using setMFvec3f to adjust spine points and insertMFvec3f to insert an additional spine point in the same timestep.  I can do either of those on its own, but doing them together crashes to desktop.

##### Stefania Pedrazzi [Cyberbotics] 10/01/2020 13:16:54
if you could provide an example we will inspect the issue as soon as possible

##### Justin Fisher 10/01/2020 13:19:00
Something else that seems weird:  I'd never payed attention to this before, but hitting play-one-step from a reset simulation advances to the point where a control has called robot.step(timestep) *twice*.  I had expected it to pause at the first call of robot.step(timestep).

##### Stefania Pedrazzi [Cyberbotics] 10/01/2020 13:21:24
Yes, this is true. If you press the step button it will execute the first step:

 * the configuration (time step 0) that is done before your call the `robot.step`

* the first step (time step TIME\_STEP) that corresponds to the instructions between the first `robot.step` and the second `robot.step`

##### Justin Fisher 10/01/2020 13:36:30
I don't actually care much about extrusions right now.  I was just trying to test out different ways of using Python "magic methods" to alter, insert or remove MF field values, and an extrusion spine field seemed like a nice MF field to use, since it would provide quick visual confirmation of changes in spine points.  But I can cause crashes using the most vanilla of supervisor changes to extrusion spines, so it's not my "magic method" stuff that's causing this problem.  Can you suggest some other MF field that would be better for me to experiment with (one that can easily accept insertion or removal of arbitrary values and ideally would visually register such changes, though I suppose I could just watch the scene tree)?

##### Stefania Pedrazzi [Cyberbotics] 10/01/2020 13:41:02
There are not many MF fields (expects MFNode fiels) that will give visual confirmation of changes. But you could create your own PROTO that will change its visual appearance based on the fields values or just look at the scene tree.


Maybe you could try the `Background.skyColor` MFColor one

##### Justin Fisher 10/01/2020 14:22:00
So, it looks to me like the following works perfectly fine:

```from controller import Supervisor
robot=Supervisor() 
timestep = int(robot.getBasicTimeStep()) 

robot.step(timestep) # so hitting play-one-frame from beginning will pause at next step

spine = robot.getFromDef("TESTX").getField("spine")
spine.setMFVec3f( 0 , [0,0,0] )
spine.setMFVec3f( 1 , [0,0.5,0.5] )

robot.step(timestep) # will crash if you comment this out

spine.insertMFVec3f( -1 , [0,1,0] )
```

But if I reload world and comment out the second robot.step, so that the setMFVec3f commands would occur in the same step as the insertMFVec3f, then Webots crashes to desktop.  (TESTX is the DEFname for a simple 2-point extrusion (geometry for a shape), with scale shrunk to [0.04,0.04] to make it more noodle-like.  I have other stuff in the world I was testing, but I don't see why it should make a difference.)

##### Simon Steinmann [Moderator] 10/01/2020 14:33:10
The documentation of WorldInfo - CFM would indicate, that it can be set to 0, However Webots does not allow it, and when setting a contact property CFM to 0, Webots crashes

##### Stefania Pedrazzi [Cyberbotics] 10/01/2020 14:42:07
`@Simon Steinmann` yes Webots doesn't accept a CFM value negative or equal to 0 and the brackets in the documentation are wrong. But when changing it from the Webots scene tree I don't get any crash, just a warning in the console.

So please open a bug report on GitHub with an exact description about how to reproduce the crash.

##### Simon Steinmann [Moderator] 10/01/2020 14:42:39
you have to define a contactproperty between two materials


and change softCFM to 0

##### Stefania Pedrazzi [Cyberbotics] 10/01/2020 14:43:32
> So, it looks to me like the following works perfectly fine:

> 
```from controller import Supervisor
> robot=Supervisor() 
> timestep = int(robot.getBasicTimeStep()) 
> 
> robot.step(timestep) # so hitting play-one-frame from beginning will pause at next step
> 
> spine = robot.getFromDef("TESTX").getField("spine")
> spine.setMFVec3f( 0 , [0,0,0] )
> spine.setMFVec3f( 1 , [0,0.5,0.5] )
> 
> robot.step(timestep) # will crash if you comment this out
> 
> spine.insertMFVec3f( -1 , [0,1,0] )
```

> But if I reload world and comment out the second robot.step, so that the setMFVec3f commands would occur in the same step as the insertMFVec3f, then Webots crashes to desktop.  (TESTX is the DEFname for a simple 2-point extrusion (geometry for a shape), with scale shrunk to [0.04,0.04] to make it more noodle-like.  I have other stuff in the world I was testing, but I don't see why it should make a difference.)

`@Justin Fisher` We are quite busy at the moment so we don't have time to look at this issue right now given that it is not a blocking issue. But you should definitevely report it on GitHub.

##### Dendrik Rendar 10/01/2020 16:18:55
Hi All,

I have a question about setting the position of an object. I have a robot with a gripper attached, which I create as an object in python with 

`self.gripper = self.supervisor.getFromDef('GRIPPER')` 

I can call

`self.gripper.getPosition()` and `self.gripper.getOrientation()` and the output from those commands reflect perfectly the position and orientation of the gripper.



I then want to set an object to the same position and orientation, using

```obj_pos = self.object.getField("translation")
obj_ori = self.object.getField("rotation")
obj_pos.setSFVec3f(self.gripper.getPosition())
obj\_pos.setSFRotation(self.gripper.getOrientation())
```



From what I understand, this should work, and **setting the position works fine**. The orientation doesn't throw an error, but doesn't do anything - well, the part does not change its orientation, but it changes position differently, almost as if it is being rotated around a different center. Am I missing something? Thanks!

##### Darko Lukić [Cyberbotics] 10/01/2020 16:29:41
`@Dendrik Rendar` `self.gripper.getOrientation()` returns rotation matrix (3x3) while `obj_pos.setSFRotation` expects axis-angle (vector of size 4)

##### Simon Steinmann [Moderator] 10/01/2020 16:30:41
[https://matthew-brett.github.io/transforms3d/](https://matthew-brett.github.io/transforms3d/) this can help a lot


or you retrieve the rotation field of the gripper, to get the axis angle

##### Dendrik Rendar 10/01/2020 16:32:47
Thanks `@Darko Lukić` , thats what I assumed. But it doesn't throw an error, so I figured it was overloaded to accept a rotation matrix as well. `@Simon Steinmann` I'll take a look!


`@Darko Lukić`  that also makes a lot more sense, because from the documentation it was unclear whether it was axis-angle or a quaternion, which I also tried.

##### Simon Steinmann [Moderator] 10/01/2020 16:36:00
webots basically does not use quaternion. it's axis angles and rotation matrices

##### Dendrik Rendar 10/01/2020 16:36:19
So `@Simon Steinmann` from what you said, I could do:

```field = gripper.getField('rotation')
obj\_ori.setSFRotation(field.getSFRotation())
```

?

##### Darko Lukić [Cyberbotics] 10/01/2020 16:36:34
`@Dendrik Rendar` You can use `wb_supervisor_field_get_sf_rotation` ([https://cyberbotics.com/doc/reference/supervisor?tab-language=c#wb\_supervisor\_field\_get\_sf\_rotation](https://cyberbotics.com/doc/reference/supervisor?tab-language=c#wb_supervisor_field_get_sf_rotation)) to set axis-angle.

##### Dendrik Rendar 10/01/2020 16:40:59
`@Darko Lukić` so I tried using the gripper's rotation field in that manner, but it returns a different rotation, like it's rotation in robot end effector coordinates (so basically [1.0, 0.0, 0.0, -1.5707], which never changes ) instead of its global coordination rotation.

##### Simon Steinmann [Moderator] 10/01/2020 16:41:35
the easiest will be to just use transforms3d

##### Dendrik Rendar 10/01/2020 16:42:05
`@Simon Steinmann` and convert the rotation matrix to the axis angle

##### Simon Steinmann [Moderator] 10/01/2020 16:42:10
yes

##### Dendrik Rendar 10/01/2020 16:42:29
`@Simon Steinmann` ok, I will do that, and get back to you. Thanks so much!

##### Darko Lukić [Cyberbotics] 10/01/2020 16:59:35
I see. I may made a mistake but it should look something like this:

- get rotation matrix for desired orientation of a target (`obj_pos` in your case) `R_{target}`

- `R_{result} = R_{target}^T * R_{parent}` where `R_{parent}` is obtained as `[targets_parent].getOrientation()`

- convert `R_{result}` rotation matrix to angle-axis to get `rotation`

- `[target].setSFRotation(rotation)`

##### Simon Steinmann [Moderator] 10/01/2020 17:02:01
or just:

```
from transforms3d import axangles
rotation = axangles.mat2axangle(gripper.getOrientation())
obj_pos.setSFRotation(rotation)
```


might have to reshape the getOrientation though

##### Dendrik Rendar 10/01/2020 17:17:54
`@Simon Steinmann` You also have to reshape the output from the axangles call. This works, although it sets the part to exactly 90 deg off from where it should be, but then follows the orientation of the gripper.

```            ori = self.gripper.getOrientation()
            ori_mat = np.array([ [ ori[0],ori[1],ori[2] ],
                                 [ ori[3],ori[4],ori[5] ],
                                 [ ori[6],ori[7],ori[8] ] ])
            al, be, ga = mat2euler(ori_mat)
            vec, theta = euler2axangle(al, be, ga)
            axang = [vec[0],vec[1],vec[2],theta]
            print(axang)
            self.object\_rot\_interfaces[self.current\_part].setSFRotation(axang)
```

However this still causes the part to move around. Do I need to multiply my translation by this as well (or its transpose) before calling `setSFVec3f()` to set the position of the part

##### Simon Steinmann [Moderator] 10/01/2020 17:18:41
dont use EULER!!!!

##### Dendrik Rendar 10/01/2020 17:18:42
Sorry for `self.object_rot_interfaces[self.current_part].setSFRotation(axang)` I have an array of parts I am moving

##### Simon Steinmann [Moderator] 10/01/2020 17:18:50
directly convert mat2axangle


in general you should avoid euler angles. they can have singularities and your code breaks. matrices and quaternion are usually the best


what exactly is it, that you are trying to do?

##### Dendrik Rendar 10/01/2020 17:20:38
Sorry, this is what I ment to paste in:

```ori = self.gripper.getOrientation()
ori_mat = np.array([ [ ori[0],ori[1],ori[2] ],
                     [ ori[3],ori[4],ori[5] ],
                     [ ori[6],ori[7],ori[8] ] ])
vec, theta = axangles.mat2axangle(ori_mat)
axang = [vec[0],vec[1],vec[2],theta]
print(axang)
self.object\_rot\_interfaces[self.current\_part].setSFRotation(axang)
```


So essentially, I am driving the joint angles of the robot from a separate script. I have a gripper object, that when it gets close to an object within some specified distance, it "grabs" the object, and I start commanding the object to the gripper pose + whatever the offset was when it was "grabbed" I am doing this to test things out before I spend the time to create a fully functional gripper. I just need to have the parts follow the position and orientation of the gripper when I want them to.


There are multiple parts, hence the array of orientation fields in that last line.

##### Simon Steinmann [Moderator] 10/01/2020 17:24:02
why not attach the gripper to the robot?

##### Dendrik Rendar 10/01/2020 17:24:22
It is attached, its a child of the tool slot

##### Simon Steinmann [Moderator] 10/01/2020 17:24:24
oh you wanna 'virtually' grap the object

##### Dendrik Rendar 10/01/2020 17:24:27
yup


Its a complicated 3-finger gripper and I wanted to get the logic down before I make it physically interactive

##### Simon Steinmann [Moderator] 10/01/2020 17:26:00
if you want a offset from the gripper, it's best to use numpy and linear algebra


R\_gripper * vec\_offset = offset in global coordinates


import numpy as np

R = np.array(ori\_mat)

v\_o = np.array([0, 0, 0.2])

offset\_global = np.dot(R, v\_o)


that global offset you can add to the position of the gripper


v\_o here would be 0.2 m offset in z-axis direction

##### Dendrik Rendar 10/01/2020 17:29:02
That makes perfect sense. Ok, will do

##### Justin Fisher 10/01/2020 17:35:14
Something else you might consider to simulate gripping by using supervisor functions to spawn a new part of your robot to be the "gripped" object, while removing the node from the scenetree that got gripped.  That way you can have your gripped object just be translated relative to your gripper, and you won't have to translate/rotate it in global coordinates.  (If you do the reverse operation to release the object though, then you may need to decide what rotation to have it be at when you release it.)

##### Dendrik Rendar 10/01/2020 17:39:32
Thats an awesome idea `@Justin Fisher` , do you mind pointing me to the code for spawning and removing objects?

##### Justin Fisher 10/01/2020 17:49:57
[https://cyberbotics.com/doc/reference/supervisor?tab-language=python#wb\_supervisor\_field\_import\_mf\_node\_from\_string](https://cyberbotics.com/doc/reference/supervisor?tab-language=python#wb_supervisor_field_import_mf_node_from_string)


It can be a bit tricky to figure out the first time though, so let me paste in a Python example


```    newCoinString = f"""DEF COIN{coinCounter.value} GoldCoin {{
                          translation {pos.x} {pos.y + 0.5} {pos.z}
                          velocity {cVel.x} {cVel.y} {cVel.z}  
                          angularVelocity {cAng.x} {cAng.y} {cAng.z}
                          name "coin{coinCounter.value}"
                        }}"""
    COINS\_field.importMFNodeFromString( -1, newCoinString )
```

This spawns a new instance of a GoldCoin proto that I created separately, and sets various initial properties for it.  You'll obviously need to change this to match whatever you want.  It'll probably help a lot to right-click on the object in your scene tree that you'd like to spawn a copy of, click export, and open up the text file that creates describing your object, and use that as the basis for the string you'll create.  Note that when you preface a python string with f, it lets you use the braces {} to surround values that you want to have be filled in dynamically -- very useful!  (And the double braces {{ convert to single-braces in the output.)

##### Diego Rojas 10/01/2020 17:55:25
`@Darko Lukić` Yes, a Demo on moveit2 and Webots would be great. I am sure it will encourage more individuals from the ROS community to used Webots as their simulator.  Let me know if I can be of help with that. 



Thank you for the support with the 3D LiDAR. I will implement it and report the results!

##### Justin Fisher 10/01/2020 18:03:27
`@Dendrik Rendar` If you don't need to dynamically change any properties of the object you're spawning (you might not if you always want it to appear with a fixed translation and rotation with respect to your gripper), then you could just build a copy of that object as a child of your gripper, hit export to save that as a file, and then use gripper\_children\_field.importMFNode(-1, "exported\_filename.wbo") to spawn it.  Importing from string (as in the example I pasted in above) is often better if you do want to dynamically change some properties of the thing you're spawning.


(In case you're curious, when my students' robots accomplish some objectives, I use the code I pasted in above to flip a spinning celebratory gold coin up in the air, sort of like in Super Mario Brothers.  The coin looks quite a lot like my discord avatar picture, which is also a sort of depiction of their robots.)

##### culurciello 10/01/2020 22:54:58
My ur10 IK code does not work, and I have tried many combinations. Yes tried PROTO and yes tried to generate armChain on the fly. Both do not work on ur10. Anyone knows why?
> **Attachment**: [ur10\_ik\_test.wbt](https://cdn.discordapp.com/attachments/565154703139405824/761360542363287582/ur10_ik_test.wbt)



> **Attachment**: [ur10\_ik\_test.py](https://cdn.discordapp.com/attachments/565154703139405824/761360582665830410/ur10_ik_test.py)

##### Justin Fisher 10/02/2020 01:23:31
It's possible that someone here will know an answer, but my guess is that you'd have more luck if you said more about what's not working, what you hoped it would do, and what it seems to be doing instead.

##### Olivier Michel [Cyberbotics] 10/02/2020 07:04:22
> Hi All,

> I have a question about setting the position of an object. I have a robot with a gripper attached, which I create as an object in python with 

> `self.gripper = self.supervisor.getFromDef('GRIPPER')` 

> I can call

> `self.gripper.getPosition()` and `self.gripper.getOrientation()` and the output from those commands reflect perfectly the position and orientation of the gripper.

> 

> I then want to set an object to the same position and orientation, using

> 
```obj_pos = self.object.getField("translation")
> obj_ori = self.object.getField("rotation")
> obj_pos.setSFVec3f(self.gripper.getPosition())
> obj\_pos.setSFRotation(self.gripper.getOrientation())
```

> 

> From what I understand, this should work, and **setting the position works fine**. The orientation doesn't throw an error, but doesn't do anything - well, the part does not change its orientation, but it changes position differently, almost as if it is being rotated around a different center. Am I missing something? Thanks!

`@Dendrik Rendar`: note that `getOrientation()` returns the global orientation expressed as a 3x3 rotation matrix whereas the rotation field is a local orientation expressed as an axis angle representation.

##### eeeloisee 10/02/2020 09:38:31
Hi everyone. Quick question, is there a specific screen display resolution that Webots prefers? I can't seem to see the simulation timer at the top. Perhaps is there a setting for this? 

Also, just to double check, this timer shows real time, correct? Thank you!

##### Olivier Michel [Cyberbotics] 10/02/2020 09:51:43
Hi, the timer should display at any resolution unless it is extremely low. And no: it's not showing real time, but simulation time, which may differ from real time (be faster or slower) depending on the simulation.

##### eeeloisee 10/02/2020 09:57:52
`@Olivier Michel` Thanks for responding. I see, that's odd. This is what mine looks like no matter the display size or resolution. And thank you for clarifying that it is simulation time.
%figure
![Capture.JPG](https://cdn.discordapp.com/attachments/565154703139405824/761527365124882432/Capture.JPG)
%end

##### Olivier Michel [Cyberbotics] 10/02/2020 09:58:40
Oops. Which operating system are you using?

##### eeeloisee 10/02/2020 09:59:17
I'm using Windows 10

##### Olivier Michel [Cyberbotics] 10/02/2020 09:59:44
Very strange, and which version of Webots is that?

##### eeeloisee 10/02/2020 10:00:32
Yeah, it is. It's the R2020b revision 1

##### Olivier Michel [Cyberbotics] 10/02/2020 10:01:57
OK... It looks like some font got corrupted on your system. Did you modify or install any special fonts or software?

##### eeeloisee 10/02/2020 10:02:58
I see. No I did not. I also just recently installed Webots. About 1 week ago.

##### Olivier Michel [Cyberbotics] 10/02/2020 10:03:48
You may be able to fix it by editing the following file: `C:\Program Files\Webots\resources\webots_classic.qss` (assuming your are using the classic theme).


See lines 103-113 and try to modify font sizes, widths, padding, etc.

##### eeeloisee 10/02/2020 10:05:39
Okay, I will try that out. Hopefully it works. Thank you!

##### Olivier Michel [Cyberbotics] 10/02/2020 10:06:08
Let me know if that helps.

##### eeeloisee 10/02/2020 10:24:53
`@Olivier Michel` Update, yes editing the classic theme file worked! Thank you!

##### Olivier Michel [Cyberbotics] 10/02/2020 10:26:13
Great. Could send your edited file at support@cyberbotics.com so that we can try to understand what was wrong?

##### eeeloisee 10/02/2020 10:28:03
Sure, I'm still playing around with the values in the file to get the best timer sizing for my screen, but I'll go ahead and send it when I'm done.

##### Olivier Michel [Cyberbotics] 10/02/2020 10:28:33
Very good. Thank you.

##### eeeloisee 10/02/2020 10:42:42
`@Olivier Michel` Hi, sorry, a follow up question about the timer - what does the entity " - 0.00x " represent?

##### Olivier Michel [Cyberbotics] 10/02/2020 10:45:27
It's the ratio versus real time. If you get 1.00x, that means your simulation is running in real time, if you get 10.0x that means your simulation is running 10x faster than real time, if you get 0.50x that means your simulation is running 2x slower than real time, etc.

##### eeeloisee 10/02/2020 11:15:08
`@Olivier Michel` Gotcha, thanks! I'm assuming there is no way to actually set this to a constant 1.00x?

##### Simon Steinmann [Moderator] 10/02/2020 11:25:08
if you just put it in the normal "play" mode, it tries to be as close to 1.00x as possible


but of course it cannot be perfect, as each simulation step might be more or less demanding

##### eeeloisee 10/02/2020 13:04:37
`@Simon Steinmann` I see... That makes sense. Thanks!

##### Simon Steinmann [Moderator] 10/02/2020 15:45:36
okay, so I noticed, switching from the ur10e collision via cylinders (provided by cyberbotics) to collision geometry defined in the .stl files, provided by universal robotics, The simulation runs at 60% speed compared to before


self collision is turned off, and it rarely gets into a position, where the bounding boxes would collide with anything. Are there any global settings, that can be adjusted, to speed things up?


Perhaps there is an issue with constant and complex collision checking between the robotic arm and the attached gripper


oh and with self collision turned on, it ddrops down to 20-30% of the original speed

##### Olivier Michel [Cyberbotics] 10/02/2020 15:49:15
Yes, this is simply because mesh collision detection is much more computer expensive than cylinder collision detection...

##### Simon Steinmann [Moderator] 10/02/2020 15:49:55
should it not skip most of them, when nothing is close?

##### Olivier Michel [Cyberbotics] 10/02/2020 15:50:34
Yes, but in this case, these meshes are too close to each other to skip the near callback...

##### Simon Steinmann [Moderator] 10/02/2020 15:50:54
even with self collision turned of?

##### Olivier Michel [Cyberbotics] 10/02/2020 15:51:12
Yes, unfortunately...


It is based on AABB...

##### Simon Steinmann [Moderator] 10/02/2020 15:51:52
okay, i just did a test. turned the controller to void and ran it as fast as possible. deleting the gripper, puts it at basically the same speed


I think the self-collision = false, does not get applied to the gripper


nvm, still much slower


I'm not sure the AABB is working properly then

##### culurciello 10/02/2020 15:56:54
> My ur10 IK code does not work, and I have tried many combinations. Yes tried PROTO and yes tried to generate armChain on the fly. Both do not work on ur10. Anyone knows why?

`@culurciello`
> **Attachment**: [ur10\_ik\_test.py](https://cdn.discordapp.com/attachments/565154703139405824/761617717400698891/ur10_ik_test.py)



> **Attachment**: [ur10\_ik\_test.wbt](https://cdn.discordapp.com/attachments/565154703139405824/761617786292142081/ur10_ik_test.wbt)

##### Simon Steinmann [Moderator] 10/02/2020 15:57:13
I have the robot completely seperated, and it does not change anything with the simulation speed
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/761617800220901386/unknown.png)
%end

##### culurciello 10/02/2020 15:57:31
just fixed it
> **Attachment**: [ur10\_ik\_test.wbt](https://cdn.discordapp.com/attachments/565154703139405824/761617873231151114/ur10_ik_test.wbt)

##### Olivier Michel [Cyberbotics] 10/02/2020 16:02:53
`@Simon Steinmann`: it takes also more time to compute the AABB of a large mesh compared to a cylinder...

##### Simon Steinmann [Moderator] 10/02/2020 16:13:56
is it possible, that webots puts every geometry in the scene into the same collisionspace?


there seems to be something off. When turning off self-collision and being clearly seperated, it should not do complicated collision checking


hmm or perhaps it is computing the AABB for every mesh EVERY timestep? Shouldn't it create an AABB ONCE for a mesh?

##### Olivier Michel [Cyberbotics] 10/02/2020 19:43:55
No because objects are moving, so the AABB are constantly changing...

##### Simon Steinmann [Moderator] 10/03/2020 11:38:51
ohhh... I was thinking of aligned bounding boxes, not AABB. But still, would it not be feasible, to turn each trimesh into a nested collision space first, with a bounding box primitive as the parent. I dont know what exact collision detection methods you use, but it seems, that there is significant optimization potential. Can you tell me what form of collision detection webots is using?


[http://ode.org/wiki/index.php?title=How\_Collision\_Detection\_Works](http://ode.org/wiki/index.php?title=How_Collision_Detection_Works)


is it one of these 4 for the broad-phase?


Can the collision detection method be changed? Different methods are better in certain circumstances, and worse in others.

##### Justin Fisher 10/03/2020 14:35:38
Is there a way for a supervisor controller to tell whether a given proto node in the scene tree is procedural or static?  



(Apparently, having a supervisor change field values in a procedural proto can make it respawn itself and thereby break your old ways of referring to it, whereas static protos won't "misbehave" in this way.  So I'd like to know if there's a way to automatically detect when I'll need to update my ways of referring to a proto node?)

##### valeriamsalasp 10/03/2020 19:27:24
Hello. I'm having trouble adding an ImageTexture to a shape. My image is in a folder called 'textures' in the same folder as the world I'm working on and it's called qr.png. I am using textures/qr.png but it is not recognizing it. What am I missing?

##### Justin Fisher 10/03/2020 19:31:44
That sounds like it should work to me.  I can confirm that I have a similar setup where the url for my baseColorMap ImageTexture is "textures/filename.png" and the file is located in worlds/textures/filename.png    Are you getting an error message?

##### Deleted User 10/03/2020 19:50:10
Hi everyone I have been trying to import a 3D model of a wall (STL file) into webots using the import 3D model feature. I've been trying to get it to work by screwing around but haven't had any luck. I was wondering if there were any tutorials available. The ones I found all seem to be from before the import 3D feature was added.

For context the issue I am having is that the model ends up going all over the place after I add physics to it, as if the bounding box is different from the actual geometry, but I am using solid node which USE the geometry definition of the model. The model itself is a shape child node.
> **Attachment**: [maz\_simply\_connected\_fib\_spiral\_v1.stl](https://cdn.discordapp.com/attachments/565154703139405824/762038809919488070/maz_simply_connected_fib_spiral_v1.stl)

##### valeriamsalasp 10/03/2020 19:54:48
I'm getting this message:


WARNING: DEF cue Solid > Shape > PBRAppearance > ImageTexture: 'textures/qr.png' not found.

A resource file can be defined relatively to the worlds directory of the current project, relatively to the worlds directory of the default project, relatively to its protos directory (if defined in a PROTO), or absolutely.


My bad! The textures folder was actually outside of my 'worlds' folder. I moved it and now it's working. Thank you!!

##### Justin Fisher 10/03/2020 19:56:26
lol, no worries! glad you fixed it

##### eeeloisee 10/04/2020 01:50:51
Hi all, is there a way to get instantaneous acceleration data from a robot? I'm aware that as the simulation runs, you can click on the robot node in the scene tree and see the instantaneous velocity and position there - in which I guess I could divide the velocity by the corresponding time for each instant to get acceleration. But is there perhaps an easier way?

##### Meenakshi Prabhakar 10/04/2020 08:55:38
`@Olivier Michel`  I'm trying to import my solidworks model into webots. I've been struggling for a long time to do that. But I failed. Please help me to do that. It would be great if you can help me sort it out.

##### Sanket Khadse 10/04/2020 12:49:27
I wonder, how should I make my robot model a fully integrated one, just like the professional examples given, like DJI's mavic or KUKA's youbot?

##### Justin Fisher 10/04/2020 12:50:59
by fully integrated, you probably mean how to make it a proto?  [https://cyberbotics.com/doc/guide/tutorial-7-your-first-proto](https://cyberbotics.com/doc/guide/tutorial-7-your-first-proto)

##### Sanket Khadse 10/04/2020 12:52:26
`@Justin Fisher` thank you.

##### Justin Fisher 10/04/2020 13:25:58
Incidentally, once you see how the "fully integrated" protos are made, you'll see that there isn't really anything permanent about their integration.  You can copy the proto (e.g., into your project's protos folder) and change the copy's parts as much as you like in the text file.  And depending on how much procedural scripting the Proto does (most don't do any), it usually isn't that hard to turn a proto back into something that's "built from scratch" in the scene tree, e.g. by right-clicking on a Proto in the scene tree and click Convert to Base Nodes.

##### Hanuman 10/04/2020 19:55:55
Is there a video tutorial to importing blender environment into Webots?

##### Simon Steinmann [Moderator] 10/04/2020 20:11:47
dont know about whole environment, but you can easily import .dae, .stl, and .obj files into webots


make sure the units are correct


oh an vrml works too

##### Hanuman 10/04/2020 20:21:15
What about Blender `@Simon Steinmann`

##### Simon Steinmann [Moderator] 10/04/2020 20:32:01
export your assets as the aforementioned file types


then import them into webots

##### Hanuman 10/05/2020 05:26:37
Okay, simply import right?


I'll try this today and will let you know.


Thanks.

##### Olivier Michel [Cyberbotics] 10/05/2020 06:42:13
`@Simon Steinmann`: Webots uses by default `dSimpleSpace`, but you can easily change this here: [https://github.com/cyberbotics/webots/blob/master/src/webots/ode/WbOdeContext.cpp#L28](https://github.com/cyberbotics/webots/blob/master/src/webots/ode/WbOdeContext.cpp#L28)

##### Rishi 10/05/2020 10:53:24
Hello everyone!



I have a city asset in blender (similar looking to the city.wbt), it is a single mesh with a single texture. Importing the obj doesn't render the texture (I tried relative path in the .mtl, now gave the absolute path in the mtl), 



While importing, when is select the "Use meshes for bounding objects" parameter just the wireframe is visible, when I unselect and import, nothing is visible. The texture is a single 8k image. I tried with other extensions like .x3d and .dae as well, no success.

##### Stefania Pedrazzi [Cyberbotics] 10/05/2020 11:41:29
Hi `@Rishi`, is the scale of the mesh correct when you import with the "for bounding objects" selected?

If you modify the mesh PBRAppearance (or Appearance node) in Webots after the import, remove the texture URL and use a plain color do you see the correct geometry in the Webots scene?

##### Rishi 10/05/2020 11:42:15
> Hi `@Rishi`, is the scale of the mesh correct when you import with the "for bounding objects" selected?

> If you modify the mesh PBRAppearance (or Appearance node) in Webots after the import, remove the texture URL and use a plain color do you see the correct geometry in the Webots scene?

`@Stefania Pedrazzi` Will try this, thanks for the inputs!

##### Xiangxiao Liu 10/05/2020 13:28:48
Hello, I am using the camera with spherical feature. But I found that the spherical effect only presents horizontally (the first figure). There is no effects in vertical axis (see the second figure). Anyone who has ideas to solve this issue? Thank you in advance.



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/762667648026148885/unknown.png)
%end



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/762667693375356958/unknown.png)
%end

##### Stefania Pedrazzi [Cyberbotics] 10/05/2020 13:55:45
`@Xiangxiao Liu` this is how Webots is currently simulating spherical cameras.

The only way to add the vertical spherical effect is to modify the GLSL shader that merges the 6 flat camera images into a single "spherical" image.

##### GeoCSBI 10/05/2020 15:18:10
Hey guys, is there any way to center an object in a bounding box? The geometry of the object is IFS.
%figure
![bounding_box.png](https://cdn.discordapp.com/attachments/565154703139405824/762695135943196672/bounding_box.png)
%end

##### Olivier Michel [Cyberbotics] 10/05/2020 15:20:17
Yes, you should offset the `boundingObject` with a `Transform` node and manually adjust the `Transform.translation` field and `Box.size`.

##### GeoCSBI 10/05/2020 15:34:48
`@Olivier Michel` Thank you worked perfectly!

##### Hanuman 10/05/2020 19:27:25
`@Olivier Michel`  how to import Blender file into webots as a world?

##### Dendrik Rendar 10/05/2020 23:34:53
`@Olivier Michel` `@Justin Fisher` `@Simon Steinmann` `@Darko Lukić` thanks all for the help, it's working now!


Another question... I am trying to get my external controller (python) to start when the simulation is loaded or restarted. I have read this: [https://www.cyberbotics.com/doc/guide/running-extern-robot-controllers?tab-os=linux](https://www.cyberbotics.com/doc/guide/running-extern-robot-controllers?tab-os=linux) which doesn't explicitely discribe this, but I feel like its possible, because in the ABB demo you see a command line call to python to load a "valve\_turner" controller in the Webots console output. Right now I am starting the controller from a seperate terminal, and of course it gets killed when the simulation is reset or reloaded. It would be amazing if it was started again when the sim is started.

##### Olivier Michel [Cyberbotics] 10/06/2020 06:25:05
`@Dendrik Rendar`: In that case, you should a normal controller, not an extern controller and it will be restarted automatically when the simulation restarts. Another option is to have a script that launches repeatedly your extern controller in a loop: as soon as it quits (because of Webots reload), it gets restarted again. Would that suit your need?


`@Hanuman`: you should export it as VRML97 and import it in Webots. See also this: [https://github.com/cyberbotics/blender-webots-exporter](https://github.com/cyberbotics/blender-webots-exporter). Another option is to export the 3D model in another 3D format and import it in Webots as a Mesh node, see [https://cyberbotics.com/doc/reference/mesh](https://cyberbotics.com/doc/reference/mesh) for the supported formats.

##### Rishi 10/06/2020 06:31:10
> `@Hanuman`: you should export it as VRML97 and import it in Webots. See also this: [https://github.com/cyberbotics/blender-webots-exporter](https://github.com/cyberbotics/blender-webots-exporter). Another option is to export the 3D model in another 3D format and import it in Webots as a Mesh node, see [https://cyberbotics.com/doc/reference/mesh](https://cyberbotics.com/doc/reference/mesh) for the supported formats.

`@Olivier Michel` Does this work only for Blender 2.79? I tried this yesterday, successfully installed, but it's only showing the x3d option not the wbt option in the export menu


My version was 2.90.1 BTW sorry for not stating earlier

##### Olivier Michel [Cyberbotics] 10/06/2020 06:33:24
It works only with Blender 2.79. You have to enable the VRML2 export plugin in the user preferences.


If you prefer using 2.90.1, you should export to another 3D format and use the Webots mesh.

##### Rishi 10/06/2020 06:37:01
I had enabled the add-on as stated in the instructions, I will try the mesh route, thanks for your clarifications!

If I were more proficient in bpy, I could help y'all update the plugin maybe, thanks again.


Just for clarification, the mesh when imported from the File menu, imports as a Solid, this is not the route one should take right?


As the Mesh node seems to be different than a Solid

##### Olivier Michel [Cyberbotics] 10/06/2020 06:40:42
Yes, the Mesh node should simply point to a 3D file. It's a shape, so it could be a `children` of a Solid node.

##### Rishi 10/06/2020 06:42:00
Thank you for your clarifications!

##### Simon Steinmann [Moderator] 10/06/2020 07:46:09
> `@Simon Steinmann`: Webots uses by default `dSimpleSpace`, but you can easily change this here: [https://github.com/cyberbotics/webots/blob/master/src/webots/ode/WbOdeContext.cpp#L28](https://github.com/cyberbotics/webots/blob/master/src/webots/ode/WbOdeContext.cpp#L28)

`@Olivier Michel` this looks very promising, haven't had time to test it yet though. Is it possible to address / change this through a physics plugin?

##### Olivier Michel [Cyberbotics] 10/06/2020 07:46:40
I don't think so.

##### Simon Steinmann [Moderator] 10/06/2020 13:52:20
why does the Ball.proto have field MFVec3f    centerOfMass    [0 -0.0001 0]

##### Olivier Michel [Cyberbotics] 10/06/2020 13:52:54
To make it not too perfect and have a complex rolling motion...

##### Simon Steinmann [Moderator] 10/06/2020 13:53:07
ahh okay, thx

##### Olivier Michel [Cyberbotics] 10/06/2020 13:53:21
Which is more realistic.

##### Justin Fisher 10/06/2020 14:48:33
Incidentally, I used a similar trick (ball with displaced center of mass) to greatly simplify the bounding object for the Rubber Ducky proto that was included with Webots.  Of course it's not quite as realistic as using the more complicated bounding object that the proto comes with, but if all you want is something simple that runs a lot faster, and bobs around in water and collides in a way that superficially looks about right, making it a ball with center of mass way down in its body works great!  It also rolls around on land in a way that looks pretty good too.
%figure
![lab1_sandbox2_cropped.png](https://cdn.discordapp.com/attachments/565154703139405824/763050069263646750/lab1_sandbox2_cropped.png)
%end

##### Westin 10/06/2020 19:27:22
How do the device indices get populated? I am wanting to enumerate all the motors and sensors using a for loop where I iterate through all the devices and check to see the type of each. I expected them to be in the order shown in the tree, but I have found that they are not always this way. Is there a good way to do this? Does the order that the motors and sensors were added to the robot matter?

##### Justin Fisher 10/06/2020 19:29:38
My guess is the people who know won't be around for a few hours (tis nighttime in Europe).  If they're not ordered by order in the tree, my next guess would be that they're somehow ordered by type.  Does that fit what you're seeing?

##### Westin 10/06/2020 19:31:23
I have a 6 DOF robot arm and it enumerates the last 3 first then the first 3. All are the same type of joints, although they do have some different parameters. I'm going to change things up on it and see if I can get different results.


Thanks.

##### Justin Fisher 10/06/2020 19:34:49
Maybe it adds the endpoint of a joint and the devices associated with its endpoint before coming back up to associate devices with the joint itself?  That might actually just be tree ordering, if the associated devices get listed after the endpoint.  Where by "tree ordering" I mean the vertical ordering in the scene tree / in the .wbo text file.

##### Westin 10/06/2020 19:36:43
Its not quite backwards. Its 4, 5, 6, 1, 2, 3.


I was mistaken. I have multiple arms in the world and I was looking at two of them. 4,5,6 was from one arm and 1,2,3 were from another. It seems to be the order of the tree.

##### Justin Fisher 10/06/2020 19:39:53
Cool, makes sense!

##### Westin 10/06/2020 19:41:39
Yep, thanks

##### Olivier Michel [Cyberbotics] 10/07/2020 07:05:02
Well, it seems you figured out the answer by yourself.

##### Westin 10/07/2020 13:03:58
Are there any recommendations for the maximum number of vertices when importing 3d models for a robot?

##### David Mansolino [Cyberbotics] 10/07/2020 13:05:42
There is no strict number (it depends on the number of meshes, on your GPU, on the application, etc.), but I would say that in most of the cases you should be able to have a very good quality staying under 10-20k vertices.

##### Westin 10/07/2020 13:06:33
Okay, thank you.

##### David Mansolino [Cyberbotics] 10/07/2020 13:06:55
You're welcome.

##### owongcho 10/08/2020 13:00:30
Hello, I created a gripper proto, which include the motors for the fingers. When I am calling the fingers motors from the robot


I am getting a warning: "finger motor" device not found.


how can I call the fingers that's inside a proto?


*finger motors

##### David Mansolino [Cyberbotics] 10/08/2020 13:02:30
Hi, they should work the same way as in the scene-tree.


What is the base node of you PROTO? Is it by any chance a Robot node?

##### owongcho 10/08/2020 13:02:58
is a solid

##### David Mansolino [Cyberbotics] 10/08/2020 13:03:23
Ok perfect.


After inserting the PROTO, did you made sure to save and revert the simulation?

##### owongcho 10/08/2020 13:04:37
yes, I saved the proto and world files, and reloaded the world

##### David Mansolino [Cyberbotics] 10/08/2020 13:05:13
Stupid question, but are you sure you:

  1. used the correct name?

  2. assign the controller to the correct robot?


Can you check in the robot-window if you see the finger motor in the list of devices?

##### owongcho 10/08/2020 13:06:27
ok, let me check


ok. I double checked, reset the simulation, and reloaded again. Now is working fine. Thank you!

##### David Mansolino [Cyberbotics] 10/08/2020 13:10:54
Good news!

You're welcome

##### Justin Fisher 10/09/2020 01:05:05
I've also often been frustrated by some scene-tree changes, esp. to robot devices, not fully registering and causing difficult-to-diagnose bugs until after a full world reload.  I wonder if there's a good way that Webots could detect when such frustrations are likely to arise and pop up a warning message?  E.g., maybe check when someone hits reset and pop up a warning saying, "Warning: your scene tree has been changed in ways that will not take effect until you reload the world.  Would you like to reload it now?  Click yes or no."

##### SebasRG 10/09/2020 01:52:45
Hi everyone, I'm Sebastian, I have a question about how can I change the axes in a 3d object imported to Webots?. Because when I imported a 3d object, the axes of the object are far from it. I mean, the axes aren't in the object correctly... And it is so difficult at the moment to manage the object. Thanks...

##### Justin Fisher 10/09/2020 01:55:06
(A) You may have a translation field somewhere that is moving parts of the object, or (B) it may be that the vertices of the imported object aren't surrounding the center (0,0,0) of the object.  If (A) just change that translation.  If (B) you may be able to move the vertices in blender or whatever program you used to create the object, or you could just add a translation in webots to offset it the amount you want

##### SebasRG 10/09/2020 01:55:13
It is in this case, the orange object is the imported.
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/763942618106429451/unknown.png)
%end


> (A) You may have a translation field somewhere that is moving parts of the object, or (B) it may be that the vertices of the imported object aren't surrounding the center (0,0,0) of the object.  If (A) just change that translation.  If (B) you may be able to move the vertices in blender or whatever program you used to create the object, or you could just add a translation in webots to offset it the amount you want

`@Justin Fisher` Thanks friend, I don't know very much about how can I use this software...

##### Justin Fisher 10/09/2020 01:58:30
where did you get the object you imported?

##### SebasRG 10/09/2020 01:59:41
From Solidworks

##### Justin Fisher 10/09/2020 02:01:06
so you exported it from solidworks?  If so, I'd probably suggest seeing if you can move it in Solidworks so that it is centered at 0,0,0 and then export it again


alternatively, i think you could create a webots transform node, then copy-paste your object inside of it [as one of its children], and mess with the translation field of that transform node, and with some experimentation, you may be able to center it

##### SebasRG 10/09/2020 02:03:12
Or for example, I can move it from blender too?

##### Justin Fisher 10/09/2020 02:03:30
yes, that'd probly work too


probably it's just a text file, so you probably could go in and manually subtract a certain amount off each of the vertices too if you didn't want to use a program to do it, though that'd be a pain  (can't tell from the pic how many vertices it has)

##### SebasRG 10/09/2020 02:06:16
Thanks friend, I'll try it so

##### DrakerDG 10/09/2020 04:47:32
Greetings to all!  This is my second robot in webots, it still has some mechanical problems, but it manages to follow the line effectively.   Does anyone know what I can do to avoid the shocks that can be seen in the video?



[https://youtu.be/FFjbia-63hQ](https://youtu.be/FFjbia-63hQ)

##### Darko Lukić [Cyberbotics] 10/09/2020 06:00:19
`@DrakerDG` Nice project! It seems you are using `Follow Object`, so the camera follows the robot even when the robot does rapid turns (which causes the shocks).



Maybe you can turn off the object following option or use [https://www.cyberbotics.com/doc/reference/supervisor#wb\_supervisor\_node\_move\_viewpoint](https://www.cyberbotics.com/doc/reference/supervisor#wb_supervisor_node_move_viewpoint) to create your custom robot follower.

##### GaGa 10/09/2020 06:06:13
Hello guys , I'm a beginner and started to build a 4 wheel robot , so I'm encountering a problem while selecting controller stating "some directories or files coould not be created" 



It would be great if someone give a solution 😊



%figure
![20201009_113644.jpg](https://cdn.discordapp.com/attachments/565154703139405824/764005933960790026/20201009_113644.jpg)
%end

##### David Mansolino [Cyberbotics] 10/09/2020 08:29:53
Hi `@GaGa`, do you have write acess in this folder? Can you check which files have been created?

##### DrakerDG 10/09/2020 09:55:13
`@Darko Lukić` Thanks, I will review what you tell me 😁👍🏼

##### DrVoodoo [Moderator] 10/09/2020 10:02:25
I've run into an issue with Lidar sensors when roll/pitch is non-zero.


I'm assuming that it's a manifestation of this bug [https://github.com/cyberbotics/webots/issues/37](https://github.com/cyberbotics/webots/issues/37)


So when I grab point cloud data from a lidar with non-zero roll the point cloud has an extra skew on it.


Fine, the bug notes state that it's related to the spherical camera projection that is used so I should be able to resolve it setting the spherical attribute of the Lidar node to false.


But that then corrupts the point cloud data even further


Now if I grab the rangeimage from a non-spherical lidar I can calculate the intrinsic matrix values for the "camera" and convert that depth image into a pointcloud myself and get the correct data out


basically is this the best/only way to get accurate lidar data out of a pitched/rolled lidar node? or is there a better solution I'm missing

##### David Mansolino [Cyberbotics] 10/09/2020 10:12:03
HI, what do you mean by pitched/rolled lidar? Is it that you set the ``tiltAngle`` field of the lidar node to something else than 0?

##### DrVoodoo [Moderator] 10/09/2020 10:14:15
Hi David, no it's when it's mounted to a vehicle on a non-flat surface. Although at present, I've got it mounted on a simulated static 3-axis gimble so that I could investigate more easily.

##### David Mansolino [Cyberbotics] 10/09/2020 10:15:50
OK, in that case it is probably not related to [https://github.com/cyberbotics/webots/issues/37](https://github.com/cyberbotics/webots/issues/37), as this bug is affecting only lidars with a tilt angle not equal to 0.


Can you share a picture of th eproblem to help us understanding it?

##### DrVoodoo [Moderator] 10/09/2020 10:18:44
Ok, so here's my test setup
%figure
![Screenshot_from_2020-10-09_11-17-39.png](https://cdn.discordapp.com/attachments/565154703139405824/764069333424930816/Screenshot_from_2020-10-09_11-17-39.png)
%end

##### David Mansolino [Cyberbotics] 10/09/2020 10:20:59
Note that you are displaying the ray pathes and not the point-cloud here

##### DrVoodoo [Moderator] 10/09/2020 10:21:42
yup, just to make it easier to see the lidar angle. just getting the other screenshot


when the roll is non-zero the point cloud data has an extra skew on it that in this case is causing the points to look like they are clipping through the floor
%figure
![Screenshot_from_2020-10-09_11-20-48.png](https://cdn.discordapp.com/attachments/565154703139405824/764070365755605012/Screenshot_from_2020-10-09_11-20-48.png)
%end


but its not just a webots overlay/visualisation problem


I get the same skew if its visualised in pcl so its in the point cloud values

##### David Mansolino [Cyberbotics] 10/09/2020 10:25:20
Have you tried increasing the 'near' field ?

##### DrVoodoo [Moderator] 10/09/2020 10:29:11
what sort of value do you suggest? ive now got near=1 and minRange=2 but it's still there

##### David Mansolino [Cyberbotics] 10/09/2020 10:30:06
That should be far enough, the problem is probably not this in that case.


It's difficult to understand where this comes from, can you please report this here including a world reproducting the error: [https://github.com/cyberbotics/webots/issues/new?template=bug\_report.md](https://github.com/cyberbotics/webots/issues/new?template=bug_report.md)

It will be simpler for us if we can reproduce it to understand what is exactly the problem.

##### DrVoodoo [Moderator] 10/09/2020 10:31:26
will do, thanks

##### David Mansolino [Cyberbotics] 10/09/2020 10:31:38
Thank you

##### DrVoodoo [Moderator] 10/09/2020 12:52:41
`@David Mansolino` got delayed but now raised as #2313

##### David Mansolino [Cyberbotics] 10/09/2020 12:58:18
Thank you, we will have a look and let you know directly on the issue.

##### GaGa 10/09/2020 17:23:18
> Hi `@GaGa`, do you have write acess in this folder? Can you check which files have been created?

`@David Mansolino` I don't have access to folder and I can create some controllers in the same path aswell !!

##### Tathagata 10/10/2020 15:30:05
My system is a 32 bit system, I have downloaded and installed the webots 8.2 (x86) version. After installation, when I tried to run it, a prompt popped up and asked for login. As I don't have any account with webots, I tried to register for a new account. Then it redirected to an webpage and it showed 404 error. Is there any way to install Webots in a 32 bit system and use it?

##### Justin Fisher 10/10/2020 18:10:25
`@Tathagata`  The people who really know seem to be around here mostly during European workday hours.  My sense though is that it currently requires 64 bits.  Sorry.



Webots became free and open-source last year.  It sounds like you were trying to use a version from before that.  I doubt it is still supported.

##### Olivier Michel [Cyberbotics] 10/10/2020 18:33:16
I confirm Webots do not support any more 32 bit systems.

##### DrakerDG 10/11/2020 01:35:49
> Greetings to all!  This is my second robot in webots, it still has some mechanical problems, but it manages to follow the line effectively.   Does anyone know what I can do to avoid the shocks that can be seen in the video?

> 

> [https://youtu.be/FFjbia-63hQ](https://youtu.be/FFjbia-63hQ)

`@DrakerDG` In this is a latest version (V2) with better performance.  I set the ERP = 1 (Error Reduction Parameter) to avoid mechanical errors in the joints of the motors and the rolling wheel.  So far I have not used the supervisor API.  I also got the LEDs to work acceptably, using SpotLights directed towards the ground.  In general this version works much better than the previous one, but I would like it to go faster (More than 3500).



[https://youtu.be/6lPtWw9iVak](https://youtu.be/6lPtWw9iVak)

##### Simon Steinmann [Moderator] 10/11/2020 10:36:11
`@DrakerDG` Be careful with setting the ERP that high. I suggest you follow the advice of the documentation and put it to a max of 0.8. Instead, perhaps try raising the cfm slightly. Perhaps something like 1e-4


as for "More than 3500"... what do you mean by that?

##### DrakerDG 10/11/2020 11:13:27
> `@DrakerDG` Be careful with setting the ERP that high. I suggest you follow the advice of the documentation and put it to a max of 0.8. Instead, perhaps try raising the cfm slightly. Perhaps something like 1e-4

`@Simon Steinmann` ok, I previously set the ERP to 0.8 but it didn't work for me, however I hadn't set the CFM.  I am going to set it to 0.8 again and I will put the CFM in the value that you have digested and continue with the tests, thank you very much for the observation


> as for "More than 3500"... what do you mean by that?

`@Simon Steinmann` 3500 is the speed value that I have set before converting it to radiants.  In this case for example: wb\_motor\_set\_velocity (left\_motor, 0.00628 * 3500), the result is 21.98 radiants.  By increasing this speed the robot eventually loses the line.  I must continue testing with the values ​​that I have programmed of PID to improve the control of the robot

##### Simon Steinmann [Moderator] 10/11/2020 12:13:15
at some point you might get a traction problem. Perhaps add a contact property to the worldinfo and increase the friction of the tires

##### DrakerDG 10/11/2020 12:36:00
Ok, thanks a lot 😁👍🏼.  I had not taken friction into account.

##### aalmanso 10/11/2020 14:28:18
Hi,

 I work with epuck robot but I need to add another sensors(ground sensor) to read the gray scale of the area under robot.

Is that possible please?

##### DrakerDG 10/11/2020 15:25:40
`@aalmanso` Is possible, in the children part the sensors you need are added and then you configure them as IR, their sensitivity and other parameters. 



[https://www.cyberbotics.com/doc/reference/distancesensor](https://www.cyberbotics.com/doc/reference/distancesensor)

##### aalmanso 10/11/2020 16:54:17
Thanks

##### ChristopherD 10/12/2020 02:51:04
Hi there, this should be an easy fix but I've already spent too much time trying to find a solution. I simply want to get and set the velocity of a ball, I've created it as a robot and have a MATLAB script that can get the translation using wb\_supervisor\_field\_get\_sf\_vec3f()


so to get the velocity I'm using this: 

velocity = wb\_supervisor\_node\_get\_velocity(node)

wb\_supervisor\_node\_set\_velocity(node, velocity)



but whats returned is a pointer array? how do i simply console print the objects current velocity


my trouble is just with getting the velocity, i can apply a 6x1 vector to the node

##### Luiz Felipe 10/12/2020 05:18:54
Hi, the webots official docker images are only compatible with CUDA >=11 right?

##### divya 10/12/2020 05:40:24
hi! can anyone tell me the significance of bounding box? what it is actually and why do we need it?

##### ChristopherD 10/12/2020 05:43:56
divya, maybe someone can answer this better. but the bounding box is your literal physical form - without it your shape is just a geometry or model that won't interact. Collisions like a ball dropping require a bounding box else it will fall through the ground

##### David Mansolino [Cyberbotics] 10/12/2020 05:48:55
> Hi, the webots official docker images are only compatible with CUDA >=11 right?

`@Luiz Felipe` hi, if you use the 'ubuntu18.04' image it is instead CUDA >= 10.

##### Luiz Felipe 10/12/2020 05:50:03
oh... valuable info `@David Mansolino` ...now I need to find a way do downgrade to CUDA 10.2 again hehehehe

##### divya 10/12/2020 05:54:05
> divya, maybe someone can answer this better. but the bounding box is your literal physical form - without it your shape is just a geometry or model that won't interact. Collisions like a ball dropping require a bounding box else it will fall through the ground

`@ChristopherD` this helps! thanks a lot!!

##### David Mansolino [Cyberbotics] 10/12/2020 06:31:27
> so to get the velocity I'm using this: 

> velocity = wb\_supervisor\_node\_get\_velocity(node)

> wb\_supervisor\_node\_set\_velocity(node, velocity)

> 

> but whats returned is a pointer array? how do i simply console print the objects current velocity

`@ChristopherD` You're right, this method is not optimal in Matlab we will improve it.

In the meantime, you should be able to 'convert' it into an array with something like this:

```
obj = wb_supervisor_node_get_velocity
setdatatype(obj,'doublePtr', 1, 6);
velocity = get(obj, 'Value');
```

##### ChristopherD 10/12/2020 06:43:56
rad thanks david. im not great with pointers so thanks for the help

##### David Mansolino [Cyberbotics] 10/12/2020 06:45:57
We will improve this for the next version of Webots: [https://github.com/cyberbotics/webots/issues/2316](https://github.com/cyberbotics/webots/issues/2316)

##### Justin Fisher 10/12/2020 06:51:43
If I use a supervisor to importSFNode on top of an existing node, what happens to the existing node?  Is it deleted?

##### Stefania Pedrazzi [Cyberbotics] 10/12/2020 06:53:18
> If I use a supervisor to importSFNode on top of an existing node, what happens to the existing node?  Is it deleted?

`@Justin Fisher` Yes. A SFNode field can contain a single node, so the previous value is deleted.

##### Justin Fisher 10/12/2020 06:57:15
Also, is there any way that a supervisor can tell whether a proto node is a procedural proto?  (Apparently procedural protos sometimes respawn themselves when you use a supervisor to change their fields, thereby obsoleting the supervisor's old ways of referring to them, and if you use these obsolete ways of referring to them it can cause a crash, so I'm hoping to find automated ways of detecting and avoiding that problem.)

##### Stefania Pedrazzi [Cyberbotics] 10/12/2020 07:00:26
No, there is no function to retrieve this information because procedural PROTOs should work exactly in the same way as other nodes and we don't want to make any difference between the nodes.

If you didn't reported yet the issue you have with regenerated PROTOs, please report it on the GitHub repo.

##### Justin Fisher 10/12/2020 07:09:59
I did report a crash that I suspect was caused by this (#2287), though perhaps it was caused by something else.  I'm happy to hear you say that procedural PROTOs should work exactly like other nodes, because I had thought that regenerated protos making old references to them obsolete was a known issue, and something controllers were supposed to work around.  The documentation for getFromDef says:

```
Note that in case of procedural PROTO nodes regeneration, nodes retrieved by wb_supervisor_node_get_from_proto_def might become invalid as well as all the descendant nodes and fields. In this case, after triggering the PROTO regeneration, the nodes and fields should be retrieved again using the Supervisor API functions.
```

I'm not sure if this is warning that a reference to the PROTO node itself might become obsolete, or just that references to internal parts of it might?

##### Stefania Pedrazzi [Cyberbotics] 10/12/2020 07:46:55
The "pointers" to the precedural PROTO itself and its visible fields nodes don't change after regeneration. But internal PROTO nodes changes even because dependending on the PROTO header they could be generated or not.

##### Westin 10/12/2020 13:16:07
I'm not sure if this is a Webots question or a Snap question, but is there a way to install additional python modules in Webots for Linux? I have been using it on Windows and took for granted the fact that I could install something like numpy by opening up a command prompt and using pip.

##### Olivier Michel [Cyberbotics] 10/12/2020 13:18:15
If you installed Webots with snap and want to use a different version of Python than the one included in snap or want to install additional python modules, then you have to use extern controllers that will use the python installed on your system.


Otherwise, if you installed Webots from the DEB or tarball package, Webots can run non-extern (but also extern) python controllers using whatever python version and modules installed on your system.

##### Westin 10/12/2020 13:22:24
Okay, thanks. I'm on Fedora, so I figure the Ubuntu packages won't work for me. I'll just avoid using Webots on Linux until I feel up to building it from source.

##### Olivier Michel [Cyberbotics] 10/12/2020 13:23:33
Otherwise, you can use the tarball version. But in any case Webots is very easy to compile from the source on Linux, you should really give it a try 😉 .

##### Westin 10/12/2020 13:23:58
Okay, I might do that. Thanks!


The alternative is turning on the Windows computer (which is much more computationally capable), so its not a big deal either way.


I'm trying VR mode again with the Pimax. Webots doesn't immediately crash as it did before, but I'm just getting a black screen in the headset and the rendered window. Sometimes it shows the xyz triad incorrectly in the headset (incorrectly mapped on to each eye so the image does not converge) and sometimes not at all. When I click in the rendered area, the triad comes back as if I rotated around or something. When I turn on anti-aliasing, the behavior changes. Totally black screen, but when I turn the headset to just the right angle, it becomes red, green, or blue. I suspect I am in the triad. I have changed settings in both the Pimax software and SteamVR and have found no significant changes other than the fact that sometimes it crashes Webots and sometimes it doesn't, although it does neither consistently. This is not a critical issue to me.


I think my issue is actually two different potentially unrelated issues. The crashing only happens when SteamVR is not already running when I start it. If I start SteamVR manually then start Webots, it does not crash. The other issue is that it doesn't render properly for me. When it does crash, it crashes just after I get a SteamVR error popup that says "Could not start SteamVR Home: Another application was already running".

##### JavierGraca97 10/12/2020 23:38:59
Hi, Currently I am trying to simulate some robots to implement neural networks, I am working with webots in the R2020b version in the macOS operating system and my intention is to program in Python. The problem arises when I try to use an external controller, I am using pycharm as IDE and it shows me an error. It says the following: "undefined module \_controller". I already reinstalled the "controller" library in pycharm and the error continues. This error is shown every time I run my program in pycharm. What I can do? It is urgent for me to do simulations for research and I cannot find results.

##### Justin Fisher 10/13/2020 01:08:23
`@JavierGraca97` Did you follow the Webots instructions for setting up PyCharm?  [https://cyberbotics.com/doc/guide/using-your-ide#pycharm](https://cyberbotics.com/doc/guide/using-your-ide#pycharm)  If you can't get that to work, you could just have PyCharm save the controller to the right folder in your project (yourproject/controllers/controllername/controllername.py) and then Webots will start the controller itself when you hit play on the simulation.

##### JavierGraca97 10/13/2020 01:12:58
`@Justin Fisher` sure, I followed the steps to use pycharm. the problem is that it opened a new pycharm window called "controller.py" where it could not find the "\_controller" module.

##### David Mansolino [Cyberbotics] 10/13/2020 05:51:56
`@JavierGraca97` what is the name of your controller?

##### Marcoo 10/13/2020 11:10:21
Hi guys ! I have a question about my Webots installation ; when I try to build I get this error message  "xcrun: error: invalid active developer path (/Library/Developer/CommandLineTools), missing xcrun at: /Library/Developer/CommandLineTools/usr/bin/xcrun"

I'm using MacOs.

I'm at EPFL in classe ENG-366 (I'm supposed to say it ^^)



thanks for your help !

##### David Mansolino [Cyberbotics] 10/13/2020 11:11:26
Hi Marcoo.

When you try to build your controler?

Which version of macOS are you using?


From [https://ma.ttias.be/mac-os-xcrun-error-invalid-active-developer-path-missing-xcrun/](https://ma.ttias.be/mac-os-xcrun-error-invalid-active-developer-path-missing-xcrun/)

It seems you can fix the issue with the following command in the terminal:

```
xcode-select --install
```

##### Marcoo 10/13/2020 11:14:26
I'm on MacOS Catalina 10.15.7, using Webots R2020a rev1, and yes trying to build my controler


I tried the xcode-select --install and its not working as well

##### David Mansolino [Cyberbotics] 10/13/2020 11:16:24
Can you try the other solution of [https://ma.ttias.be/mac-os-xcrun-error-invalid-active-developer-path-missing-xcrun/](https://ma.ttias.be/mac-os-xcrun-error-invalid-active-developer-path-missing-xcrun/) and let us know if it still doesn't work, i.e.:

```
sudo xcode-select --reset
```



If even that fails, go to the Apple developer download section and download Xcode manually: [https://developer.apple.com/download/more/](https://developer.apple.com/download/more/)

##### Marcoo 10/13/2020 11:17:34
Do i have to run it in the laptop terminal ?

##### David Mansolino [Cyberbotics] 10/13/2020 11:17:57
Yes, exactly, just open a terminl in your mac and copy past the command

##### Marcoo 10/13/2020 11:20:09
"impossible to download because it's not available from the server" (xcode-select --install)

##### David Mansolino [Cyberbotics] 10/13/2020 11:20:54
Ok, can you try this one too `sudo xcode-select --reset` ?

##### Marcoo 10/13/2020 11:23:02
nothing happened... I mean it execute but nothing different

##### David Mansolino [Cyberbotics] 10/13/2020 11:24:11
And what about this one ?

```
xcode-select --switch /Library/Developer/CommandLineTools
```

##### Marcoo 10/13/2020 11:25:03
gives me "xcode-select: error: invalid developer directory '/Library/Developer/CommandLineTools'"

##### David Mansolino [Cyberbotics] 10/13/2020 11:25:48
OK, it seems it is indeed not installed, just to make sure can you try:

```
ls /Library/Developer/CommandLineTools
```

##### Marcoo 10/13/2020 11:26:30
gives me "usr"

##### David Mansolino [Cyberbotics] 10/13/2020 11:27:10
OK then you probably have to install XCode manually: [https://apps.apple.com/us/app/xcode/id497799835?mt=12](https://apps.apple.com/us/app/xcode/id497799835?mt=12)

##### Marcoo 10/13/2020 11:28:00
Okay I'll do it. Thank you very much for your help, I'll come back if I'm stuck again 😉 thanks

##### David Mansolino [Cyberbotics] 10/13/2020 11:28:11
You're welcome.

##### gaitt 10/13/2020 14:35:23
Hello, I'm playing with the ROS2 webots tutorial. So far so good. I did have to tweaks launch files. I'm would like now to simulate a rangefinder but somehow I can't find  the corresponding node in the base nodes.

##### David Mansolino [Cyberbotics] 10/13/2020 14:37:28
Hi `@gaitt`, the ROS2 interface is still under development, and therefore not all the devices are yet supported.

Lidar is but not range-finder, however, if you want it should be quite simple to implement it based on the lidar example: [https://github.com/cyberbotics/webots\_ros2/blob/master/webots\_ros2\_core/webots\_ros2\_core/devices/lidar\_device.py](https://github.com/cyberbotics/webots_ros2/blob/master/webots_ros2_core/webots_ros2_core/devices/lidar_device.py)

##### gaitt 10/13/2020 14:41:03
Ok thanks, I will take a look.

##### David Mansolino [Cyberbotics] 10/13/2020 14:41:30
You're welcome

##### gaitt 10/13/2020 14:44:45
Ok a seen now the available device in the ros2 package but how do I add them in the GUI?

##### David Mansolino [Cyberbotics] 10/13/2020 14:46:38
Oh you mean the Webots devices. To get familiar with Webots I would recommend following these tutorials: [https://www.cyberbotics.com/doc/guide/tutorials](https://www.cyberbotics.com/doc/guide/tutorials)

Since you plan to use ROS2, I would recomment tutorials 1-2-3-5-6

##### gaitt 10/13/2020 15:08:50
Well you're right, since I develop in ROS2 I only did ROS2 tutorial. I will do more tutorials and come back if needed. Thanks

##### Quadae 10/13/2020 16:35:18
[https://gyazo.com/3517136de11a51af71be63281db0cdf8](https://gyazo.com/3517136de11a51af71be63281db0cdf8)


can anyone help me make this e-puck go towards the yellow cylinder

##### Darko Lukić [Cyberbotics] 10/13/2020 16:51:17
`@Quadae` You may find this example useful:

[https://github.com/lukicdarkoo/webots-example-visual-tracking](https://github.com/lukicdarkoo/webots-example-visual-tracking)

##### Luthanicus 10/13/2020 19:34:28
Hello! I am on Windows 10 using webots R2020b version 1 and I am trying to run webots from the terminal. Because the world file I am trying to open is located in a directory with spaces in the path (the exact path of the file is `"C:\My Programs\Robot Code\RobotCodeSimulator\Webots\worlds\World.wbt"`), webots throws the following error:

```
webots: too many arguments.
Try 'webots --help' for more information.
webots: too many arguments.
Try 'webots --help' for more information.
```

Is there any way I can run webots from the terminal without needing to move the world file to a path without spaces?

##### Simon Steinmann [Moderator] 10/13/2020 19:52:56
you should be able to put the path inside of quotation marks

##### Luthanicus 10/13/2020 19:54:07
Tried that and and I still have the same error
%figure
![Capture.PNG](https://cdn.discordapp.com/attachments/565154703139405824/765663685112102932/Capture.PNG)
%end

##### Simon Steinmann [Moderator] 10/13/2020 19:55:09
your path is incorrect


you can go to the file properties to see the correct path


or you go into the folder containing it, an press ctrl+L

##### DrakerDG 10/13/2020 19:56:03
`@Luthanicus` you need write cd before your path

##### Simon Steinmann [Moderator] 10/13/2020 19:56:33
no, he is trying to start webots with this file

##### Luthanicus 10/13/2020 19:56:52
I don't want to cd to that directory. This is for a batch file that will start up webots with a specific world and also start up a WPIlib robot simulator

##### Simon Steinmann [Moderator] 10/13/2020 19:57:12
try it with the correct path

##### Luthanicus 10/13/2020 19:57:39
The correct path is identical to what I wrote

##### DrakerDG 10/13/2020 19:57:45
`@Simon Steinmann` ok, is like a line command, 😁

##### Simon Steinmann [Moderator] 10/13/2020 19:58:21
I highly doubt that that path is correct. there is not backslash behind "C:"


have you copied the path, like I described?

##### Luthanicus 10/13/2020 19:59:25
I didn't notice that. The problem still persists even after I copied the path in the file properties
%figure
![Capture.PNG](https://cdn.discordapp.com/attachments/565154703139405824/765665015113449502/Capture.PNG)
%end

##### Simon Steinmann [Moderator] 10/13/2020 20:00:34
I'm not on my linux machine, can you paste your output of "webots --help" ?

##### Luthanicus 10/13/2020 20:01:11
```
webots --help
Usage: webots [options] [worldfile]

Options:

  --help
    Display this help message and exit.

  --version
    Display version information and exit.

  --sysinfo
    Display information about the system and exit.

  --mode=<mode>
    Choose the startup mode, overriding application preferences. The <mode>
    argument must be either pause, realtime, run or fast.

  --fullscreen
    Start Webots in fullscreen.

  --minimize
    Minimize the Webots window on startup.

  --batch
    Prevent Webots from creating blocking pop-up windows.

  --stdout
    Redirect the stdout of the controllers to the terminal.

  --stderr
    Redirect the stderr of the controllers to the terminal.

  --stream[="key[=value];..."]
    Start the Webots streaming server. Parameters may be
    given as an option:
      port=1234          - Start the streaming server on port 1234.
      mode=<x3d|mjpeg>   - Specify the streaming mode: x3d (default) or mjpeg.
      monitorActivity    - Print a dot '.' on stdout every 5 seconds.
      disableTextStreams - Disable the streaming of stdout and stderr.

  --log-performance=<file>[,<steps>]
    Measure the performance of Webots and log it in the file specified in the
    <file> argument. The optional <steps> argument is an integer value that
    specifies how many steps are logged. If the --sysinfo option is used, the
    system information is prepended into the log file.

Please report any bug to https://cyberbotics.com/bug
```

##### Simon Steinmann [Moderator] 10/13/2020 20:04:23
try double quotes around the path

##### Luthanicus 10/13/2020 20:05:36
Like this: `""C:\My Programs\Robot Code\RobotCodeSimulator\Webots\worlds\World.wbt""`?

If so, it doesn't work.

##### Simon Steinmann [Moderator] 10/13/2020 20:06:17
perhaps "webots "c:\.....""

##### Luthanicus 10/13/2020 20:07:24
That doesn't work. I get the error `The filename, directory name, or volume label syntax is incorrect.`

I think it's trying to find a filename with path `"webots "C:\My Programs\Robot Code\RobotCodeSimulator\Webots\worlds\World.wbt""`

##### Simon Steinmann [Moderator] 10/13/2020 20:08:24
then i dont know. Ask the devs tomorrow, or try to figure it out yourself. It seems to be a windows cmd syntax issue, not webots issue


double check that it is finding that file

##### Luthanicus 10/13/2020 20:09:11
For the time being I'll probably just move the world file so that it has a path without spaces in it.


Since `webots Webots\worlds\World.wbt` is successful

##### JavierGraca97 10/13/2020 23:19:05
> `@JavierGraca97` what is the name of your controller?

`@David Mansolino`  the driver used is driver.py. I already managed to run the program from pycharm, now it shows me another error, which restarts python and the controller is not executed in webots, I already did what is necessary by putting the controller in extern.


> `@David Mansolino`  the driver used is driver.py. I already managed to run the program from pycharm, now it shows me another error, which restarts python and the controller is not executed in webots, I already did what is necessary by putting the controller in extern.

`@JavierGraca97`
%figure
![Captura_de_Pantalla_2020-10-13_a_las_18.26.36.png](https://cdn.discordapp.com/attachments/565154703139405824/765717352352055326/Captura_de_Pantalla_2020-10-13_a_las_18.26.36.png)
%end

##### David Mansolino [Cyberbotics] 10/14/2020 06:10:27
`@JavierGraca97` maybe your controller crashes. I would recommend trying to start the same controller within Webots (not external) to check if it crashes there too.

##### Olivier Michel [Cyberbotics] 10/14/2020 07:16:53
`@Luthanicus`: I found a solution which you may find odd, but it works from a DOS console. Use three double quotes: `"C:\Program Files\Webots\msys64\mingw64\bin\webots.exe" """C:\Program Files\Webots\projects\samples\devices\worlds\camera.wbt"""`. Let me know if that works for you too.

##### ClBaze 10/14/2020 08:42:11
Hello, I have this error window when I try to record a video from Webots: "Video generation failed due to an encoding problem". Any idea what it could be ?

##### Stefania Pedrazzi [Cyberbotics] 10/14/2020 09:05:42
Hi `@ClBaze` this means that there were some errors while running ffmpeg to generate the video based on the images recorded by Webots. Do you have ffmpeg installed on your system?

##### ClBaze 10/14/2020 09:14:34
Yes ffmpeg is installed

##### Stefania Pedrazzi [Cyberbotics] 10/14/2020 09:15:00
Did you get any other error message in the Webots console?

##### ClBaze 10/14/2020 09:15:52
No just a window with this message when I enter the name of the file to be saved

##### Stefania Pedrazzi [Cyberbotics] 10/14/2020 09:18:37
Do you also have libx264 vcodec installed?

##### ClBaze 10/14/2020 09:18:39
I succesfully recorded a video, then I had to install VLC to read it. And after that I wasn't able to record another video.

##### Stefania Pedrazzi [Cyberbotics] 10/14/2020 09:19:30
Ok, so then probably installing VLC messed up something with the installation of ffpemd and the video codec. You should probably install them again.


Which OS are you using?

##### ClBaze 10/14/2020 09:20:35
I'm using ubuntu 18.04

##### Stefania Pedrazzi [Cyberbotics] 10/14/2020 09:21:29
is the `ubuntu-restricted-extras` package still installed on your system?

##### ClBaze 10/14/2020 09:23:06
no it wasn't

##### Stefania Pedrazzi [Cyberbotics] 10/14/2020 09:23:36
ok, so then it is probably this package that should be installed again to make the video recording work again

##### ClBaze 10/14/2020 09:25:20
I still have the error


should I try to reinstall ffmpeg ?

##### Stefania Pedrazzi [Cyberbotics] 10/14/2020 09:26:08
yes, it would be worth to do it

##### ClBaze 10/14/2020 09:29:24
didn't worked


 returns `DEV.LS h264                 H.264 / AVC / MPEG-4 AVC / MPEG-4 part 10 (decoders: h264 h264_crystalhd h264_v4l2m2m h264_vdpau h264_cuvid ) (encoders: libx264 libx264rgb h264_nvenc h264_omx h264_v4l2m2m h264_vaapi nvenc nvenc_h264 )`

##### Stefania Pedrazzi [Cyberbotics] 10/14/2020 09:34:03
Ok, here is the script used to generate the video and that doesn't work for you (bitrate and fps depends on your world and movie settings):

```
#!/bin/sh
echo Recording at 25 FPS, 4218750 bit/s.
echo Video encoding stage 1... \(please wait\)
ffmpeg -loglevel warning -y -f image2 -r 25 -i "webotsFrame_10707_%06d.jpg" -b:v 4218750 -vcodec libx264 -pass 1 -g 132 -an -pix_fmt yuvj420p video.mp4
rc=$?
if [ $rc != 0 ] ; then
  exit 1
fi
echo Video encoding stage 2... \(please wait\)
ffmpeg -loglevel warning -y -f image2 -r 25 -i "webotsFrame_10707_%06d.jpg" -b:v 4218750 -vcodec libx264 -pass 2 -g 132 -an -pix_fmt yuvj420p video.mp4
rc=$?
if [ $rc != 0 ] ; then
  exit 1
fi
rm -f *2pass-0.log*
exit 0
echo Video Encoding complete.
```


If you take any jpg images, rename to match the script expected name (for example `webotsFrame_10707_000000.jpg`, `webotsFrame_10707_000001.jpg`)  and try to run the script you may get some more information about the issue

##### ClBaze 10/14/2020 09:36:09
ok thanks I'll try that


the script works


it says `[swscaler @ 0x56167febb960] deprecated pixel format used, make sure you did set range correctly` however

##### Stefania Pedrazzi [Cyberbotics] 10/14/2020 09:50:25
ok i will check this.


In the `/tmp` folder you should have some folders named `webots-xxxxx-xxxxxx`. If you look in the most recent one you should find the `ffmpeg_script.sh` that was generated by Webots.


Could you please check if that script works as well? (the Webots id in `webotsFrame_10707_%06d.jpg` will be different)

##### ClBaze 10/14/2020 09:56:21
I have no folder prefixed by webots in /tmp

##### Stefania Pedrazzi [Cyberbotics] 10/14/2020 10:10:19
did you install Webots using snap? or specify a different path for `WEBOTS_TMPDIR`?

##### ClBaze 10/14/2020 10:14:55
Ok I figured out that it has something to do with the world basictimestep


```INFO: Video creation canceled.
INFO: Video recording starts when you run a simulation...
INFO: Creating video...
Recording at inf FPS, -9223372036854775808 bit/s.
Video encoding stage 1... (please wait)
[image2 demuxer @ 0x55de65c84320] Unable to parse option value "inf" as video rate
[image2 demuxer @ 0x55de65c84320] Error setting option framerate to value inf.
webotsFrame_29704_%06d.jpg: Invalid argument
ERROR: Video generation failed.
```


if it is too high the video rate is set to inf

##### Olivier Michel [Cyberbotics] 10/14/2020 10:15:27
Yes, we recently fixed a bug in Webots with respect to this...


[https://github.com/cyberbotics/webots/pull/2268](https://github.com/cyberbotics/webots/pull/2268)


If you use a recent nightly build, it should work.


[https://github.com/cyberbotics/webots/releases/](https://github.com/cyberbotics/webots/releases/)

##### ClBaze 10/14/2020 10:18:23
I'm using webots 2020b, I already tested one of the latest night build but it slows down my simulation to 0.05x instead of 0.3x


I think I'm gonna patch the version I'm using


Thank you both!


(Concerning the simulation slow down, it looks like an issue with the connector when locking/unlocking)

##### Olivier Michel [Cyberbotics] 10/14/2020 10:24:30
About the simulation slow down, it looks like a regression. Could you open a bug report about it and upload a sample simulation demonstrating this performance drop?


[https://github.com/cyberbotics/webots/issues/new?template=bug\_report.md](https://github.com/cyberbotics/webots/issues/new?template=bug_report.md)

##### eeeloisee 10/14/2020 11:28:02
Hi everyone. Regarding the PID controller for rotational motors in Webots, are these supposed to have an actual affect in the simulation? For some reason, no matter what controllers I add, I still get the same velocity rise/peak times, overshoots, etc.

##### GaGa 10/14/2020 12:06:08
Hi everyone can someone give me a code for getting know the position of my robot using GPS in Python

##### Justin Fisher 10/14/2020 12:07:23
`@GaGa`  You should be able to get most of this here: [https://cyberbotics.com/doc/reference/gps?tab-language=python](https://cyberbotics.com/doc/reference/gps?tab-language=python)


Probably your code will look something like this:

```python
# early in program
GPS = robot.getDevice("gps")
GPS.enable( timestep )

# when you want to read it in the main loop
pos = GPS.getValues() # will return list of X, Y, and Z coords
```

##### David Mansolino [Cyberbotics] 10/14/2020 12:58:04
> Hi everyone. Regarding the PID controller for rotational motors in Webots, are these supposed to have an actual affect in the simulation? For some reason, no matter what controllers I add, I still get the same velocity rise/peak times, overshoots, etc.

`@eeeloisee` Yes they are supposed to, maybe we get stuck by the maximum acceleration of the motor.

##### Simon Steinmann [Moderator] 10/14/2020 13:02:38
`@eeeloisee` Give this a careful read, to understand how controllers are implemented and work internally: [https://cyberbotics.com/doc/reference/motor?tab-language=python](https://cyberbotics.com/doc/reference/motor?tab-language=python)

##### Olivier Michel [Cyberbotics] 10/14/2020 14:53:15
`@Luthanicus`: Having to put three double quotes around command line arguments on Windows was actually a bug which was fixed here: [https://github.com/cyberbotics/webots/pull/2330](https://github.com/cyberbotics/webots/pull/2330) and should be included in the next nightly builds of Webots R2020 revision 2.

##### GaGa 10/14/2020 17:05:39
> Probably your code will look something like this:

> 
```python
> # early in program
> GPS = robot.getDevice("gps")
> GPS.enable( timestep )
> 
> # when you want to read it in the main loop
> pos = GPS.getValues() # will return list of X, Y, and Z coords
> 
```

`@Justin Fisher` thank you so much it worked

##### Justin Fisher 10/14/2020 18:01:25
`@GaGa`  I'm glad it worked.  I think I probably should have told you to use `robot.getGPS` in Python rather than the more generic  `robot.getDevice` that Webots uses in other languages.  Glad you figured it out!

##### Luthanicus 10/14/2020 18:17:50
`@Olivier Michel` That fix works, thank you!

##### Olivier Michel [Cyberbotics] 10/14/2020 18:33:58
Do mean the triple double quote or the patched version of webots.exe?

##### Luthanicus 10/14/2020 18:34:34
The triple double quote works, although it is unusual

##### Olivier Michel [Cyberbotics] 10/14/2020 18:35:38
Yes, the next versions of Webots won't need it any more.

##### Justin Fisher 10/14/2020 18:43:18
I accidentally advised `@GaGa` to use python's `robot.getDevice` rather than `robot.getGPS` and was surprised to see them report that it worked.  Diving into the source code, I see that  `robot.getDevice` actually is defined in the Python API, despite being undocumented.  The Webots docs encourage you to use more specific functions like `robot.getGPS` instead, to ensure that the device you get will be a member of the appropriate subclass.  However, when I look at the actual code for Webots `controller.py`, there is code there (in `def __getOrCreateDevice`) that can automatically detect each device's type and generates a device of the appropriate class, and this code seems to be used by each of the specific functions like `getGPS`, so **I don't think the more specific call should really be necessary.  Is that right?**



However it also looks like `def getDevice(tag)` presumes that tag will be a number (otherwise the comparison to the length of the list of devices would crash) so it looks to me like `robot.getDevice("gps")` probably should crash, and `robot.getDevice(1)` probably would work.  This seems odd when the equivalent `get_device` functions in C and Matlab take a string rather than an integer as their argument.  **Maybe a dev can weigh in on whether this is a bug?**  



(I think I would suggest as a bugfix that Python's `def getDevice(tag)` should be changed to `def getDevice(name)` to retain symmetry with C and Matlab, and should begin with the line `tag = self.__internalGetDeviceTagFromName(name)` just as specific device getters like `getGPS` do.  Or if it were totally up to me, I'd probably make `getDevice` check whether the given argument was a string or an integer, and return a sensible result in either case.   I would then suggest changing the documentation to include `getDevice` as a perfectly legit way to get devices in Python.)

##### SebasRG 10/14/2020 18:54:44
Hi everyone, I have one question


How can I make virtual serial port communication between Webots and Matlab, I need to make them work at the same time, Webots as receiver and Matlab as emitter...


Thanks

##### Justin Fisher 10/14/2020 19:23:37
`@SebasRG` I'm not entirely clear on what you want to do.  Webots does have emitter and receiver devices that allow you to pass serial messages from one controller to another.  So you could have your robot have an emitter that is controlled by your Matlab controller, and have another supervisor robot (perhaps a trivial one without any movable parts) with a receiver to receive such messages, where the supervisor will have lots of super-powers to manipulate the Webots simulation however it likes.  Is that what you want?  (You can also use emitter channel 0 to send messages to a plugin for the physics engine, which maybe is more what you're looking for?)


Note that using emitters/receivers in Webots always has a one-timestep delay between transmission and receipt of messages, so it's not quite "at the same time".

##### SebasRG 10/14/2020 19:35:49
Oh thanks friend


So in my case, actually I'm working in an investigation project, which consists in a truck robot so I need to control this robot with the communication between Webots and Matlab because there is a part of the project that needs to be simulated by Matlab. Besides, I have to send data from Matlab to Webots for moving the robot. I don't know if you can understand my idea jaja. Sorry for the explanation.

##### Justin Fisher 10/14/2020 19:42:00
You can write controllers in Matlab.  It sounds like that's all you'll need.  [https://www.cyberbotics.com/doc/guide/using-matlab](https://www.cyberbotics.com/doc/guide/using-matlab)


Depending on what changes you want your Matlab code to make in the Webots simulation, you may want to give your robot supervisor powers and/or set up a separate supervisor robot.

##### SebasRG 10/14/2020 19:45:31
What is the supervisor robot? What is its function?

##### Justin Fisher 10/14/2020 19:51:31
[https://cyberbotics.com/doc/reference/supervisor](https://cyberbotics.com/doc/reference/supervisor)


Basically, if you set a robot's supervisor field to TRUE, and then have its controller use Supervisor() rather than Robot() at the beginning, this gives the controller access to lots of superpowers, including being able to access information about everything in the simulation, and the ability to move/change things in the simulation, and even to create or destroy parts of the simulation.

##### SeanLuTW 10/15/2020 03:29:26
I imported the mesh file of soft scrub from YCB dataset and found that the simulation was unrealistic after it fall and hit the table. Then I used MeshLab to simplify the triangles of the mesh from 16K to 100 and tried again, it directly pass through the table. How can I solve the problem?

##### Justin Fisher 10/15/2020 04:35:33
`@SeanLuTW` The collision behavior of a solid depends upon what you set as that solid's bounding object.  You *can* use a mesh of triangles as a bounding object.  (Perhaps your new mesh wasn't just triangles, or perhaps you hadn't set it to also serve as the bounding object?)  However, detecting and processing collisions between bounding objects is one of the main things that consumes processor time in the physics simulation.  So I think it's usually advisable instead to create a bounding object out of geometric primitive shapes (like boxes, spheres, and cones) that describe approximately the same shape as the visual mesh you're using, but will be much simpler in the simulation.  As an example, you might look at the included rubber ducky Proto, which uses a mesh to describe the graphical appearance of the ducky, but defines a bounding object for it out of a handful of simpler shapes, as you can see if you hit CTRL-F2 to display bounding objects.  (Even that handful of simple bounding shapes can be taxing on slower computers, and some of my students noted a speed improvement when I replaced that handful of shapes with a simple sphere with roughly the same boundaries as the ducky, with its center of gravity set low to keep the ducky wanting to rest on its bottom.  For our purposes, the speed improvement was worth the slight loss of accuracy.)  [https://github.com/cyberbotics/webots/blob/master/projects/objects/toys/protos/RubberDuck.proto](https://github.com/cyberbotics/webots/blob/master/projects/objects/toys/protos/RubberDuck.proto)

##### Olivier Michel [Cyberbotics] 10/15/2020 06:31:11
`@SeanLuTW`: The collision should be detected even with a mesh as a bounding object (but meshes are indeed causing much more problems than combinations of simple primitives). Can you open a bug report and upload your simulation as a ZIP file there, so that we can investigate whether this is actually a bug in Webots? [https://github.com/cyberbotics/webots/issues/new?template=bug\_report.md](https://github.com/cyberbotics/webots/issues/new?template=bug_report.md)

##### chungshan 10/15/2020 06:57:00
Hi, I want to implement a force-torque sensor to attach to the end effector of UR5e. I know that there is the touch sensor to measure force, but it can't measure torque. Is there any suggestion to implement a force-torque sensor?

##### David Mansolino [Cyberbotics] 10/15/2020 07:09:21
The only soultion to measure torque is to use a joint (balljoint if you need 3 axes torque), you need to add motors with high max torque and use these motors to get the torque feedback.

##### SeanLuTW 10/15/2020 10:59:21
`@Justin Fisher`  I also added rubber duck into my world and I found that the bounding object of the duck was pretty different from the shape it looks. As you suggested, maybe I should use some basic primitives to approximate the object :)

`@Olivier Michel`  Okay. I will report an issue ASAP. Thanks!

##### chungshan 10/16/2020 05:23:09
Hi, How can I measure the end effector's force of a manipulator? For example, I add a gripper to UR5. When the gripper grasps an object, I want to measure the end effector's force at this moment (including gripper and object). 

I know that there is a touch sensor that can measure the force in 3d. However, I add a touch sesor (force-3d) to the  toolSlot of UR5e. When the gripper grasps an object (mass=1kg), the measurement of touch sensor still remains around 0. It seems that the touch sensor requires a direct contact with other object to measure the force.

Is there any good way to measure the end effector's force of a manipulator?

##### David Mansolino [Cyberbotics] 10/16/2020 05:26:36
Hi `@chungshan`, the touchsensor measure the contact force, which means that if it doesn't touches any other object, it will keep returning 0.

You should probably instead use the manipulator motor force/torque feedback utility: [https://cyberbotics.com/doc/reference/motor#wb\_motor\_enable\_force\_feedback](https://cyberbotics.com/doc/reference/motor#wb_motor_enable_force_feedback)

##### nelsondmmg 10/16/2020 13:36:50
Hi, how can I make a tesla model3 a supervisor in the simulation? It does not have the field in the interface.

##### David Mansolino [Cyberbotics] 10/16/2020 13:37:59
Hi, you're right it seems this one is missing the field. But you can add it in the PROTO file directly.

##### nelsondmmg 10/16/2020 13:38:14
Ok, thanks

##### David Mansolino [Cyberbotics] 10/16/2020 13:38:20
You're welcome


I just fixed this in [https://github.com/cyberbotics/webots/pull/2351](https://github.com/cyberbotics/webots/pull/2351)

It will be available in the next nightly build of Webots from tomorrow ([https://github.com/cyberbotics/webots/releases](https://github.com/cyberbotics/webots/releases)).

##### nelsondmmg 10/16/2020 13:49:14
Do I need something more to use the supervisor functions from the controller? Because even after the addition of this field it says that I can't use getFromDef

##### David Mansolino [Cyberbotics] 10/16/2020 13:50:00
You need to import the 'supervisor'.

Here are some examples: [https://cyberbotics.com/doc/guide/supervisor-programming](https://cyberbotics.com/doc/guide/supervisor-programming)

##### nelsondmmg 10/16/2020 13:51:48
I'm already importing it. It says: ignoring illegal call to wb\_supervisor\_node\_get\_from\_def() in a 'Robot' controller

##### David Mansolino [Cyberbotics] 10/16/2020 13:52:16
Then you did something wrong when editing the PROTO file. Try closing and restarting Webots.

##### nelsondmmg 10/16/2020 13:53:23
I just copy the supervisor line from the BMW X5 proto and put it in the Tesla's

##### David Mansolino [Cyberbotics] 10/16/2020 13:54:30
Both lines?

make sure to do exactly linke this:

[https://github.com/cyberbotics/webots/pull/2351/files#diff-ccd8ed6289e12767962c8b93ffb504eeb965d540984edd0eae19341fcb05cd11](https://github.com/cyberbotics/webots/pull/2351/files#diff-ccd8ed6289e12767962c8b93ffb504eeb965d540984edd0eae19341fcb05cd11)

##### nelsondmmg 10/16/2020 13:55:06
Ah, I missed the second line. Thanks.

##### David Mansolino [Cyberbotics] 10/16/2020 13:55:23
You're welcome 😉

##### m0narch 10/16/2020 17:41:29
I have a function to set a robots motor positions and then play an audio file afterwards. When I run the function the audio plays first and then the robot moves. Is there a way for me to sequence it so that the robot moves and then the audio plays or to do both tasks at the same time?

##### Justin Fisher 10/17/2020 01:24:12
The robot will start moving the next time you call robot.step(timestep).  Your two main choices are to start playing the audio file before you call step() or wait until after, during a later iteration of your main loop, which will be a small fraction of a second later.  You could get finer-grained control by altering your audiofile so that it starts with however long of a delay period of quiet you want.


(I was assuming you're playing the audio file directly, not via a webots speaker device.  If you use a webots speaker device, both the speaker and the motors will start when you call robot.step().  Your easiest way to control timing, in multiples of timestep, is just to choose which step you want to tell the speaker to start playing at.  Again, you could get finer-grained control by altering your audio file, e.g., to have a half-timestep delay at the beginning.)

##### GaGa 10/17/2020 11:21:34
How do we enable or add filters to camera like edge detection , gray scale , threshold and other filters

##### Weebo 10/17/2020 15:46:46
Hello everyone. I'm working with the e-puck model for Webots, using the groundSensorsSlot in order to follow a line. However, this module only comes with three sensors. I was wondering if I could be able to edit the PROTO file of this module in order to add two more infra-red sensors further apart in the robot. I've already tried to do that, sucessfully recognizing the two new sensors in my controller, but for some reason the value read from the two new sensors doesn't change no matter what. Which makes me think there's something wrong with the implementation.

##### Simon Steinmann [Moderator] 10/17/2020 17:43:09
you have to enable sensors in your controller first.

##### Weebo 10/17/2020 17:44:58
I'm narrowing down the problem, it's coming from the very definition of the sensors. I don't know why, even tho I'm definying them EXACTLY like the old ones, theyre' coming out in a different geometric position. I'm just changing the x coordinate. See the attached picture



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/767080751971696650/unknown.png)
%end

##### black\_hammer\_67 10/17/2020 17:45:33
i want to make a custom racetrack on webots, so i decided to use the road node and the wayPoint feature, can i create a file with python or matlab containing waypoints and load it somehow into webots ?

##### Simon Steinmann [Moderator] 10/17/2020 17:45:52
you can turn on optional rendering of sensors


shows you where the sensors point

##### Weebo 10/17/2020 17:46:24
```DEF EPUCK_GS2 DistanceSensor {
        translation 0.01 0.003 0
        rotation 0 0 1 -1.57
        children [
          USE EPUCK_GS_SHAPE
        ]
        name "gs2"
        lookupTable [
          0 1000 0.002
          0.016 300 0.004
        ]
        type "infra-red"
      }
      DEF EPUCK_GS3 DistanceSensor {
        translation -0.02 0.003 0
        rotation 0 0 1 -1.57
        children [
          USE EPUCK_GS_SHAPE
        ]
        name "gs3"
        lookupTable [
          0 1000 0.002
          0.016 300 0.004
        ]
        type "infra-red"
      }
```


GS2 is one of the old sensors, GS3 is a new one. As you can see, the only difference is the x coordinate in the translation. I don't get why they're coming out lower in the z value


Got it working, I just modified the translation until it was fine. Still don't know why they were off if the parent was the same as with the old sensors, but it's working nonetheless. Thanks!

##### Kirlin 10/18/2020 04:56:21
Hi there, I'm a brazilian (so srry for my bad english) in mechatronic degree a trainee in a robotic's team of my university, so... the challenge for the trainee's is run a very simple simulation with webots, but with several other requirements in another areas and everything has to be in ROS.

Anyway, I found this server when I was looking for some documentation of ROS-Webots, cause everything else on my project it's just done and I can't do the communication between the other areas and the simulation, i tried everything that I found online and everything I have is a launch for a simulation in ROS.

So anyone here have a good documentation or tutorials about using ROS on Webots or something like that ?

##### Justin Fisher 10/19/2020 00:58:06
`@Kirlin` The people who know most about Webots seem to be around this channel during ordinary business hours in Europe, so hopefully they'll have an answer for you.


And here are a couple of questions about pen devices:  (1) when I set inkdensity to intermediate amounts, it seems to average the pen color with white, rather than with whatever the existing color of the surface is, so it looks bad on surfaces that aren't naturally near-white.  Is this a bug or an intentional decision?  I suppose looking up the existing color, or better yet, the existing color as it appears with whatever current ink it has on it, would be more processor intensive?  



(2) is there any way to erase particular bits of pen writing?  I.e., is there a setting for pen devices to make them work as erasers instead?  The closest analog of an erasable pen I've managed to come up with is to draw and erase things on a display, e.g., in much the way that one of the vacuum robot samples "erases" a layer of dust, but getting this to work on a variety of surfaces ends up basically just "reinventing the wheel" (or in this case, the pen) so it'd be better if there was a way to do this making use of inbuilt-pen devices.

##### David Mansolino [Cyberbotics] 10/19/2020 05:51:46
> Hi there, I'm a brazilian (so srry for my bad english) in mechatronic degree a trainee in a robotic's team of my university, so... the challenge for the trainee's is run a very simple simulation with webots, but with several other requirements in another areas and everything has to be in ROS.

> Anyway, I found this server when I was looking for some documentation of ROS-Webots, cause everything else on my project it's just done and I can't do the communication between the other areas and the simulation, i tried everything that I found online and everything I have is a launch for a simulation in ROS.

> So anyone here have a good documentation or tutorials about using ROS on Webots or something like that ?

`@Kirlin` Here are a few pointers:

[https://www.cyberbotics.com/doc/guide/using-ros](https://www.cyberbotics.com/doc/guide/using-ros)

[https://www.cyberbotics.com/doc/guide/tutorial-8-using-ros](https://www.cyberbotics.com/doc/guide/tutorial-8-using-ros)

[https://www.youtube.com/watch?v=xRvFJDuhx3Y](https://www.youtube.com/watch?v=xRvFJDuhx3Y) (a bit outdated)

And you can find the topic and service description for each device in the reference manual:

[https://www.cyberbotics.com/doc/reference/accelerometer?tab-language=ros](https://www.cyberbotics.com/doc/reference/accelerometer?tab-language=ros)


`@Justin Fisher` 



1) You are completely right, it seems there is somethign wrong, I just repported this here: [https://github.com/cyberbotics/webots/issues/2353](https://github.com/cyberbotics/webots/issues/2353)

We will try to fix this a soon as possible.



2) this is unfortunately not yet possible. However, it should not be too hard to implement. If you have some C++ knowledge, you can try yourself (we will of course help you), otherwise, please feel free to open a feature request: [https://github.com/cyberbotics/webots/issues/new?template=feature\_request.md](https://github.com/cyberbotics/webots/issues/new?template=feature_request.md)

##### Justin Fisher 10/19/2020 06:35:04
Do you know which C++ file it would be in?  Also, what do you think the best API interface would be for setting a pen to erase?  There could be a separate erase boolean, with a separate API function call to alter it.  Or maybe it makes sense to just view inkDensity <= 0 as erasure?  



Anyway, if the changes requires API changes, I haven't gotten anywhere close to wrapping my head around what all that would require.  But if it just involves comparing inkDensity to 0 and if so, changing the alpha-component of created ink pixels, that'd probably be something I could do.  Or if someone else is going to change the inkDensity always averages-with-white bug, it'd probably be trivial for them to also make 0 inkDensity just go back to no ink.

##### David Mansolino [Cyberbotics] 10/19/2020 06:38:08
Here is the CPP file implementign the Pen node in Webots: [https://github.com/cyberbotics/webots/blob/master/src/webots/nodes/WbPen.cpp](https://github.com/cyberbotics/webots/blob/master/src/webots/nodes/WbPen.cpp)

and here is the C file for the API side:

[https://github.com/cyberbotics/webots/blob/master/src/Controller/api/pen.c](https://github.com/cyberbotics/webots/blob/master/src/Controller/api/pen.c)



I would say that the new field + new API function is cleaner (but this is personal opinion), but if you want to create a first prototype with inkDensity <= 0 it is already a good start, and if needed we can continue from then to convert in new API function.


We have by the way a guide for new API function introducing: [https://github.com/cyberbotics/webots/wiki/Adding-New-Node-and-API-Function#adding-a-new-api-function](https://github.com/cyberbotics/webots/wiki/Adding-New-Node-and-API-Function#adding-a-new-api-function)

##### Justin Fisher 10/19/2020 06:49:05
The docs say 0 is an allowable value for inkDensity, but it should have no effect in current implementation, so probably a good starting point is just to change it to erase old ink, and not just add 0 new ink.  Alternatively, you could extend the allowable inkDensity range to  [-1,1] and have negative densities remove that fraction of existing ink.



Anyway, it looks like the real action is performed by `mLastPaintTexture->paint`   Do you know where that would be?

##### David Mansolino [Cyberbotics] 10/19/2020 06:51:45
> The docs say 0 is an allowable value for inkDensity, but it should have no effect in current implementation, so probably a good starting point is just to change it to erase old ink, and not just add 0 new ink.  Alternatively, you could extend the allowable inkDensity range to  [-1,1] and have negative densities remove that fraction of existing ink.



`@Justin Fisher` yes using 0, is already a good and simple first step.



> Anyway, it looks like the real action is performed by `mLastPaintTexture->paint`   Do you know where that would be?

well spotted, here is the definition of this function:

[https://github.com/cyberbotics/webots/blob/d019ad4906e44a34a94fbea4e110d71af7172c07/src/webots/nodes/utils/WbPaintTexture.cpp#L198](https://github.com/cyberbotics/webots/blob/d019ad4906e44a34a94fbea4e110d71af7172c07/src/webots/nodes/utils/WbPaintTexture.cpp#L198)


Here is in particular the interesting part: [https://github.com/cyberbotics/webots/blob/d019ad4906e44a34a94fbea4e110d71af7172c07/src/webots/nodes/utils/WbPaintTexture.cpp#L239-L265](https://github.com/cyberbotics/webots/blob/d019ad4906e44a34a94fbea4e110d71af7172c07/src/webots/nodes/utils/WbPaintTexture.cpp#L239-L265)

##### Justin Fisher 10/19/2020 07:01:56
So it looks like line 254 sets the alpha channel to paint with to be 1 (opaque).  So probably all we'd need to do to erase is to check if density == 0 and if so change this alpha to 0 (transparent)?



It seems like the averaging with white bug should be somewhere around here too.  ~~In this code (lines 242, 251-253), I see half of what I would expect a weighted average computation to look like, but I don't see it actually combining the other half anywhere.  So looking at that code, I'd expect it to effectively be doing a weighted average with black (0,0,0) rather than white.~~  But I don't know what the calls to `wr_drawable_texture_set_color` and `wr_drawable_texture_draw_pixel` do in lines 259-260, so perhaps they somehow take care of that.  I guess the next step would be to track those down.


(I found the file with those in it, so don't feel obligated to point me to it. 🙂 )


Ok, think I got it all figured out.


It looks like there are several places (lines 91-97, and lines 131-137) that "clear"  a paintable texture by making it be transparent white (1,1,1,0).  My guess is that one of these is where the white in the "average with white" bug is coming from.  



Lines 251-254 compute a weighted RGB average between the new ink that should be added and some existing mData, and sets opacity to 1 (opaque).  I haven't been able to decipher yet whether that existing mData is supposed to be the coloration of the underlying texture or the coloration of the paint/ink that has already been put on that texture.  Intuitively, it seems like *both* of those should be taken into account -- e.g., in the case where there is no ink yet, you'd need to look at the underlying coloration to determine what color will be produced by adding partial-density ink over it, whereas if there is already some color of ink on top, then intuitively you should take its color into account too.  I *think* it is just looking at the existing *ink*, which defaults to being transparent white (1,1,1,0), so a weighted average between the new ink RGB and that old "transparent white" ink RGB is what produces the "averaging with white" effect.  



Changing the default color from transparent white to some other color would just change the bug to be the "averages with that new color" bug.  On average, transparent neutral grey (0.5,0.5,0.5, 0) would probably be the least bad color to average with, so that could be a stopgap.



Another stopgap might be to copy the underlying image into the paint layer, but that'd probably screw up the resolution of all the unpainted portions.



So I think the best way of solving this is to actually make use of the alpha channel of your paint layer, rather than always setting it to 0 or 1 like you currently do.  Is there any reason you can't just make half-density blue ink in the paint layer be full blue with half-alpha:  (0,0,1,.5) ?

##### David Mansolino [Cyberbotics] 10/19/2020 07:49:55
sorry for the late answer, I was having a meeting.


> It looks like there are several places (lines 91-97, and lines 131-137) that "clear"  a paintable texture by making it be transparent white (1,1,1,0).  My guess is that one of these is where the white in the "average with white" bug is coming from.  

Yes exactly, this part should conern both the new feature and the 'white bug'.

`@Justin Fisher`


This `mData` is actually the color of the texture that is applied on top of the original texture (the one of the object without any ink on it).


> So I think the best way of solving this is to actually make use of the alpha channel of your paint layer, rather than always setting it to 0 or 1 like you currently do.  Is there any reason you can't just make half-density blue ink in the paint layer be full blue with half-alpha:  (0,0,1,.5) ?



I don't see any, this is indeed probably wrong, the alpha layer should be able to take intermediate values.

##### Justin Fisher 10/19/2020 07:55:52
> This `mData` is actually the color of the texture that is applied on top of the original texture (the one of the object without any ink on it).

`@David Mansolino` 

Sorry, didn't understand this.  Can you say this again in different words?  Say I've used a pen to paint just one black pixel on a big red triangle.  Will the mData (A) be mostly red with a black pixel?  Or will it (B) be mostly transparent white with a black pixel?


(I think the answer must be B, because (1) that explains the "averaging with white" bug, and (2) that explains why pen-drawn-ink seems to show up with lousy resolution over a higher-resolution underlying texture.)

##### David Mansolino [Cyberbotics] 10/19/2020 08:02:00
You're right, it will be mostly transparent with a black pixel.

##### Justin Fisher 10/19/2020 08:05:03
Is there a way to also access the color at the corresponding point of the underlying texture?  Is so, then you could factor it in and make completely opaque ink like you currently do.



But I still think the better way to go, if you can, is just to make low-density ink be semi-transparent so that the underlying layer will automatically show through without your needing to explicitly compute the mix here.

##### David Mansolino [Cyberbotics] 10/19/2020 08:06:57
> Is there a way to also access the color at the corresponding point of the underlying texture?  Is so, then you could factor it in and make completely opaque ink like you currently do.

> 

This is for sure doable, but a bit more complex.



> But I still think the better way to go, if you can, is just to make low-density ink be semi-transparent so that the underlying layer will automatically show through without your needing to explicitly compute the mix here.

`@Justin Fisher` yes, that's indeed the idea, and should work if the alpha component of the `mData` is set, then semi-transparent parts will be blended with the underlying texture.

##### Justin Fisher 10/19/2020 08:11:25
So in the simple case where the current ink is fully transparent, the new pixel should just be the ink's RGB with density as the alpha (rather than averaging with the current "transparent white" ink color the way it currently does).  In the simple cases where there is already fully opaque ink there, the current calculation does a fine job of mixing the new low-density ink atop that old ink.  The trickier cases are all the inbetween cases.  E.g., what should happen if you paint over half-transparent red with half-transparent blue?


Maybe let's assume that we're spraying tiny droplets of paint that randomly land on tiny subpixels too small to see, and whenever a new droplet covers an old one it hides the old one, and the alpha channel indicates what percentage of the surface actually gets hit with droplets.  Given those assumptions half-transparent blue (0,0,1,0.5) sprayed atop half-transparent red (1,0,0,0.5) should end up having sprayed 3/4 of the underlying surface, so the alpha would need to be 0.75, and 2/3 of that 3/4 will be blue, and only 1/3 will be red (with the remaining red having been covered by blue).  So the right new ink color, given these assumptions, should be (1/3,  0,  2/3,  3/4)

##### David Mansolino [Cyberbotics] 10/19/2020 08:29:58
That looks good!

##### Justin Fisher 10/19/2020 08:35:46
Or putting this in general form, the combinedInkOpacity should be newInkOpacity + oldInkOpacity * ( 1 - newInkOpacity).   



And the RGB components should be newInkColor * newInkOpacity / combinedInkOpacity + oldInkColor * oldInkOpacity * (1 - newInkOpacity) / combinedInkOpacity.


If you want to set it up to have density==0 erase, you would just make overwrite the alpha (combinedInkOpacity) with 0 in that case.


Or if you want to set it up that negative densities erase that fraction of existing ink (regardless of what the newInkColor is), you would keep the oldInkColor's RGB components, but change the new combinedInkOpacity to be oldInkOpacity * (1 + newInkDensity)

##### David Mansolino [Cyberbotics] 10/19/2020 08:39:32
Yes that would be a special case, but this is indeed a good solution at least for testing the feasibility.

##### Justin Fisher 10/19/2020 08:40:19
Do you know if it enforces that inkDensity must be in [0,1]?

##### David Mansolino [Cyberbotics] 10/19/2020 08:40:36
Most probably yes.

##### Justin Fisher 10/19/2020 08:41:13
So I guess my suggestion would be to change that to allow [-1,1], and make the changes I outlined above.


(I think it's probably better to offer a low-density-eraser to complement low-density-ink, and negative density seems like a perfectly natural way to conceive of the removal of some fraction of ink)


I can make a stab at that after I get past a pressing deadline on Tuesday, though (a) I'm not sure how to extend the allowable range to go down to [-1,1] and (b) I haven't tried to compile Webots source myself, so I'd have to figure out quite a lot of that to be able to test it.  So it would (of course) be easier for me to write code that probably gets pretty close to working, and shuffle off the job of testing it to someone else?

##### David Mansolino [Cyberbotics] 10/19/2020 09:03:24
Yes sure, feel free to open a PR on the repository and let us know when you want us to test / continue it: [https://github.com/cyberbotics/webots](https://github.com/cyberbotics/webots)

##### Justin Fisher 10/19/2020 09:05:15
If we can get erasers to work, I'll actually use it in the lab I'm setting up for my students, so that'll be good.


Separate question:  Is there a good way to delete a "label" that a supervisor creates?  I can set it to display "", which makes it disappear but probably doesn't delete it.   If I repeatedly create new labels with new ID's, then set them to display "", would they somehow accumulate and slow things down?

##### David Mansolino [Cyberbotics] 10/19/2020 10:11:37
This is not yet possible from the API, but why not reusing previous labels after setting them to `""`?

##### Justin Fisher 10/19/2020 10:36:40
There are different things I wanted to switch between displaying, with some of the labels lingering much longer than others, and the solution that initially occurred to me was just to create a new label with ID one higher than the last label I'd created to ensure I wouldn't overwrite one I wanted to keep -- seemed easier than engineering my own garbage collection system for no-longer-used label ID's.  But I think you're right that the particular task I was trying to do can be done in a way that re-uses ID's without worry of collision.



More generally though, I have a fair number of different labels that I sometimes want to display in different combinations, so my lazy solution has been just to give them unique ID's, even though many of them will be set to "" at each given moment, so I wondered whether that was a bad practice?  If I had a way to completely turn off a label so Webots wouldn't any waste time trying to display empty text, I'd probably do that instead.  (But maybe processing some empty labels doesn't really take that much time compared to all the other things Webots does. dunno...) 



Since labels annoyingly seem to have no useful memory at all of things like font and color, it seems like once a supervisor sets a label to "", Webots may as well just delete that label entirely rather than have it linger around consuming resources.  (Alternatively, you could give labels useful memory of prior settings, so, e.g., I wouldn't have to keep re-specifying locations and fonts with every single call to setLabel even when I don't want them to change!  If you did that, then you probably wouldn't want setting a label to "" to completely kill it.)

##### David Mansolino [Cyberbotics] 10/19/2020 10:41:15
Honestly, as long as your number of labels remains reasonable you should not see any differences as empty labels are almost costless (both in terms of memory and CPU/GPU consumption), if you have 1000+ more labels then it is indeed time to think more about this, but otherwise you should be able to safetly ignore this.

##### Justin Fisher 10/19/2020 10:41:39
ok, i'll sleep easy tonight then 🙂


I actually wrote my own python label-handling classes to automate things like remembering earlier parameters, so I can update labels with simple calls like `timer.update()` or `counter.update( color=[1,0,0] )`, rather than the monstrous re-listing of all parameters in a mandatory order that vanilla Webots requires.  It wouldn't be that hard for me to set that class up also to do automatic garbage collection on ID's, but your assurances tell me I needn't bother with that (yet, or probably ever).

##### Strauss 10/19/2020 14:34:16
Anyone can point to some resources on how to make the base of a manipulator floating in ROS?

I've simulated the open\_manioulator robot and my custom urdf but I want to attach its base to a moving platform attached to ceiling. Like when no force is applied to motors, the whole thing should collapse under its weight

##### David Mansolino [Cyberbotics] 10/19/2020 14:45:53
Hi `@Strauss` you simply have to put the manipulator as a children of your moving platform.

##### Strauss 10/19/2020 14:47:30
`@David Mansolino` the moving platform is actually a floating base with controllable pose (which could be above earth level).

I need to attach the base of my manipulator to that floating base.

Is it possible in ROS or urdf ?


And how to code this concept of floating base? Another robot?

##### David Mansolino [Cyberbotics] 10/19/2020 14:50:47
Webots does not use URDF directly, but another format, but yes it is possible to put a Robot node inside the children field of another Robot node in Webots.

##### Strauss 10/19/2020 14:51:30
`@David Mansolino` SDF?

##### David Mansolino [Cyberbotics] 10/19/2020 14:52:04
[https://cyberbotics.com/doc/reference/generalities](https://cyberbotics.com/doc/reference/generalities)

[https://cyberbotics.com/doc/reference/proto-definition](https://cyberbotics.com/doc/reference/proto-definition)


I would recommend following our tutorial to get familiar with robot/world creation in Webots: [https://cyberbotics.com/doc/guide/tutorials](https://cyberbotics.com/doc/guide/tutorials)

##### Strauss 10/19/2020 14:53:28
Just to be sure, suppose two simple rods with a joint in between: 

------x------

------|------

-----/-------

---ground---



I want to move x abruptly and actually see the oscillations of the links. Is it possible?

##### David Mansolino [Cyberbotics] 10/19/2020 14:55:00
Yes, you need to put a maximum acceleration, speed and force/torque high enough. And you may also need to increase the PID.

##### Strauss 10/19/2020 14:58:22
`@David Mansolino` yeah I want to mess with the controller of the robot by moving the base abruptly :D

Thanks for you suggestions.

I only know basic URDF and Xacro in ROS. Should I study its wiki more and then look into Webots?

##### David Mansolino [Cyberbotics] 10/19/2020 15:08:59
You're welcome.


No no need, if you plan to use Webots, you don't need any URDF and Xacro knowledge, you can do everything directly in the Webots Graphical User Interface. I would advise starting directly with the Webots tutorials

##### black\_hammer\_67 10/19/2020 22:54:32
Hello to all of u, I am building an RL framework for Webots and I use "robot\_node.getNumberOfContactPoints()" to detect collisions in code and terminate the episode. As is seams it works well for the robot but not for its wheels, when I have a wheel collision it doesn't return any contact point. As a result my robot learns to exploit this bug and touching all the time the walls with its roads to avoid collisions. Is there any way to fix this ? or to check the collisions of the wheels to ? 

I am using a pioneer 3dx proto node for my robot 

Below there is a screenshot of what i am describing.

If anyone could help me I would be gracefull.



%figure
![Screenshot_from_2020-10-20_01-47-44.png](https://cdn.discordapp.com/attachments/565154703139405824/767883477500428328/Screenshot_from_2020-10-20_01-47-44.png)
%end

##### SeanLuTW 10/20/2020 01:14:08
Hello, I added a node in "toolSlot" of UR5e at my tool canter point, and used DEF to name it as "tcp". In my supervisor node, I tried to use "supervisor.getFromDef("tcp").getPosition()" to get the position of my TCP, but "supervisor.getFromDef("tcp")" just returned None. After I renamed it to, such as "tool" and it worked. I am not sure if it was a reserved keyword?


By the way, it is possible to build the intrinsic matrix from the attributes in "Camera" and "RangeFinder"?

##### Justin Fisher 10/20/2020 02:22:04
So, I hadn't tried out the TexturedBox proto before.  It turns out that it's much more useful than its documentation page would suggest, e.g., giving you full control over what all 6 faces of the box will look like.  Nothing in the documentation page actually says it would be useful for this.  The image shows just one face with a texture and the others solid, and the two options that give you control over more faces aren't actually described in words -- instead there's just a path to a a .jpg that someone could maybe try to go find hiding in their webots installation, but with no words describing why doing so might be worth their while.  I'd suggest making the words actually explain what these two  options do, and probably changing the image to one that does better to illustrate the full power of this, e.g., showing one of those linked jpegs wrapped around a cube.


And/or including those jpg's on the documentation page itself, rather than just obscure links to them.

##### David Mansolino [Cyberbotics] 10/20/2020 06:13:00
`@black_hammer_67`, If you call `robot_node.getNumberOfContactPoints()` you will get the contact points of the robot only, not of the descendant nodes of the robot (e.g. the wheels), you need to call this function fo the wheel nodes too.


> Hello, I added a node in "toolSlot" of UR5e at my tool canter point, and used DEF to name it as "tcp". In my supervisor node, I tried to use "supervisor.getFromDef("tcp").getPosition()" to get the position of my TCP, but "supervisor.getFromDef("tcp")" just returned None. After I renamed it to, such as "tool" and it worked. I am not sure if it was a reserved keyword?

`@SeanLuTW` `tcp` is not a reserved keyword, but it is possible, can you share a simple world file reproducing the problem?


> By the way, it is possible to build the intrinsic matrix from the attributes in "Camera" and "RangeFinder"?

`@SeanLuTW` using the camera API you can get many parameters that can help you building this matrix (min range, max range, field of view, etc.): [https://www.cyberbotics.com/doc/reference/camera#wb\_camera\_get\_fov](https://www.cyberbotics.com/doc/reference/camera#wb_camera_get_fov)


`@Justin Fisher` thank you for the feedback, this documentation is actually auto-generated from the PROTO itself, but it should be possible to improve/extend the description in the PROTO file directly: [https://github.com/cyberbotics/webots/blob/master/projects/objects/geometries/protos/TexturedBox.proto#L1-L13](https://github.com/cyberbotics/webots/blob/master/projects/objects/geometries/protos/TexturedBox.proto#L1-L13)

##### June 10/20/2020 07:58:18
i have a different problem. drivers are the latest, but installer said no graphics and turned off


are there any ryzen users?

##### Olivier Michel [Cyberbotics] 10/20/2020 07:59:21
What is your operating system? What is your graphics card?

##### June 10/20/2020 08:21:03
windows10 / nvidia 2070 super


cpu is ryzen 3700x

##### Olivier Michel [Cyberbotics] 10/20/2020 08:21:45
Webots should work on such a machine. What is exactly the error you get? Can you send a screenshot?

##### June 10/20/2020 08:34:04
are there any other manual? i have only this link [https://www.cyberbotics.com/doc/guide/installation-procedure#installation-on-windows](https://www.cyberbotics.com/doc/guide/installation-procedure#installation-on-windows)

i hope a manual for window10 & ryzen 3700x & nvidia 2070 without integrated graphics


No, i cant. computer owner is not me. my colleague is not  here

##### David Mansolino [Cyberbotics] 10/20/2020 09:02:39
In that case it is probably simpler to ask your colleague to come here when he is available.

##### black\_hammer\_67 10/20/2020 11:55:59
`@David Mansolino`  how can i call this function for the wheels of a proto node as pioneer3dx ?

##### David Mansolino [Cyberbotics] 10/20/2020 12:03:30
Yes, you can retrieve internal node handle of the pioneer3dx with the `wb_supervisor_node_get_from_proto_def` function:

[https://www.cyberbotics.com/doc/reference/supervisor#wb\_supervisor\_node\_get\_from\_proto\_def](https://www.cyberbotics.com/doc/reference/supervisor#wb_supervisor_node_get_from_proto_def)

You may need to edit the ``pioneer3dx `` PROTO to add DEF names to the wheels.

Or otherwise you can convert the PROTO node into base nodes (right click on the pioneer3dx  node in the scene tree), this way you can add and retrieve DEF names directly at the wheels level.

##### black\_hammer\_67 10/20/2020 12:04:17
ok I'll try it thank you

##### David Mansolino [Cyberbotics] 10/20/2020 12:04:33
You're welcome

##### GaGa 10/20/2020 12:12:56
Hello all , I'm building a robot with a camera , so is there any possibilities like a if I see a sign and detect and it has to go in a some way like a warehouse robot


> Hello all , I'm building a robot with a camera , so is there any possibilities like a if I see a sign and detect and it has to go in a some way like a warehouse robot

`@GaGa` can someone help me build am beginner

##### David Mansolino [Cyberbotics] 10/20/2020 12:14:53
You might find some related examples and explanations here: [https://en.wikibooks.org/wiki/Cyberbotics%27\_Robot\_Curriculum/Advanced\_Programming\_Exercises#Pattern\_Recognition\_using\_the\_Backpropagation\_Algorithm\_](https://en.wikibooks.org/wiki/Cyberbotics%27_Robot_Curriculum/Advanced_Programming_Exercises#Pattern_Recognition_using_the_Backpropagation_Algorithm_)[Advanced]

##### GaGa 10/20/2020 12:19:39
Tysm but I think it's lil advanced 😂can I get a similar one


Easier one**

##### David Mansolino [Cyberbotics] 10/20/2020 12:20:24
Here is the summary, you will find all kind of level examples: [https://en.wikibooks.org/wiki/Cyberbotics%27\_Robot\_Curriculum](https://en.wikibooks.org/wiki/Cyberbotics%27_Robot_Curriculum)

##### GaGa 10/20/2020 12:20:31
Tysm

##### David Mansolino [Cyberbotics] 10/20/2020 12:20:37
You're welcome

##### Chronoj 10/20/2020 13:32:51
Hello to all of you, i am trying to move a robot from a starting point to a randomly selected point on the floor. I am using the adept pioneer 3-dx robot. I have found how to track the robot's position, using supervisor API , getting the translation field variables( i tried to add a gps node at first, but i could not find how to install it in a "webots-generated" robot). Now i need to get the robot's orientation, but all the related functions  require a node attached to the robot, in order to return orientation. Any suggestions on how can i get the orientation, or how can i attach a node to the robot to use the supervisor function or a compass to get directly the orientation?

##### David Mansolino [Cyberbotics] 10/20/2020 13:34:42
The robot itself is a node, so you can use the supervisor API too to get it's orientation with the `wb_supervisor_node_get_orientation` function: [https://www.cyberbotics.com/doc/reference/supervisor#wb\_supervisor\_node\_get\_orientation](https://www.cyberbotics.com/doc/reference/supervisor#wb_supervisor_node_get_orientation)

##### Chronoj 10/20/2020 13:57:56
Seems it works, thank you so much!

##### David Mansolino [Cyberbotics] 10/20/2020 13:59:33
You're welcome

##### Justin Fisher 10/20/2020 14:46:07
Any idea why an IR distance sensor would work fine on one surface and not on an extremely similar surface?  The surfaces are both textured boxes with very similar image maps, same roughness setting, no ambient occlusion maps, no transparency.  On many such surfaces, the IR detects blue as maximally distant, and detects red and yellow as being much closer (even when those colors are all the same distance away).  However, on this one surface, blue gives the same close readings as red and yellow do.

##### David Mansolino [Cyberbotics] 10/20/2020 15:00:57
The IR sensors are influenced by ([https://www.cyberbotics.com/doc/reference/distancesensor#infra-red-sensors](https://www.cyberbotics.com/doc/reference/distancesensor#infra-red-sensors)):

  - the red\_level  (both baseColor or base color texture)

  - the roughness (both roughness or roughness texture)

  - the occlusion (both occlusion or occlusion texture)

Make sure they are all the tree exactly the same.

##### Justin Fisher 10/20/2020 15:06:40
They are.  Or at least the RGB is as close to the same as my eye can tell, and definitely there is a huge difference between the red component of the blue and the red component of red.  They have occlusion map NULL, but both do have the default occlusion strength of 1, but I don't think that does anything without an occlusion map and regardless it's the same in both cases.  (I think transparency maybe should also be on your list, but it's the same too, 0.)


It looks like jpeg compression makes there be slight alterations in blue hues, but even where the red component is 0, it still is seeing the blue as no different from red.

##### David Mansolino [Cyberbotics] 10/20/2020 15:17:31
Have you tried to use a non-infrared distance sensor to see if you can reproduce this?

##### Justin Fisher 10/20/2020 15:25:59
It looks like a generic distance sensor gives basically the same readings as the IR one when faced with yellow or red or with the blues on the problematic surface.  The only difference is that the generic one sees blues as close on most surfaces, whereas the IR one sees those blues as far.


The IR sensor is the one pointed at the blue ground on our right (the robot's left).  On this surface it sees blue just fine.
> **Attachment**: [lab2\_theater\_sees\_blue.png.lnk](https://cdn.discordapp.com/attachments/565154703139405824/768135334667092018/lab2_theater_sees_blue.png.lnk)


But on this surface it instead gets the same close readings from the blue that it usually gets from yellow and red.
> **Attachment**: [lab2\_theater\_does\_not\_see\_blue.png.lnk](https://cdn.discordapp.com/attachments/565154703139405824/768135540633501756/lab2_theater_does_not_see_blue.png.lnk)



%figure
![lab2_theater_sees_blue.png](https://cdn.discordapp.com/attachments/565154703139405824/768135741729144862/lab2_theater_sees_blue.png)
%end



%figure
![lab2_theater_does_not_see_blue.png](https://cdn.discordapp.com/attachments/565154703139405824/768135809454440469/lab2_theater_does_not_see_blue.png)
%end

##### Olivier Michel [Cyberbotics] 10/20/2020 16:01:01
Could you please open a bug report including a ZIP file of your world files, so that we can try to reproduce the problem?

##### Luiz Felipe 10/22/2020 07:04:10
Hello, I have some doubts (more like discussion) about using Webots, especially the new webots official docker images, to train RL algorithms in a distributed/parallelized manner. Now I am able to run multiple webots instances via docker containers and communicate directly with my centralized server for training. It works fine =). But now I am doing tests to know the maximum number of instances that I can run in each server (more parallelization can be slower depending on the server specifications, the number of instances run, the supervisor i run)


I am trying to defining this 'optimal' number of instances per server


In my understanding I have 4 factors related to webots that I should take into consideration: the memory used by the gpu, the % of the CPU my webots-bin process use, the % of the memory my webots-bin process use, my supervisor characteristics


I am testing 2 supervisors/worlds: 1) takes 100% of a cpu core, 1gb ram, 400mb of gpu (checking with top command and nvidia-smi command), 2) takes 60% of a cpu core, 500gb ram, 90mb of gpu...

##### Kirlin 10/22/2020 07:09:25
Hello, can anybody help me about how can I read the "pages" ? 

I'm using Robotis OP3 for a simulation and I want that page for kicking, but I don't know how to read what is done when, in the standard controller (op3\_motion\_player),  playPage execs, can somebody help me to read the playPage or to print in screen the values of the motors ?

##### Luiz Felipe 10/22/2020 07:09:25
The simplest one i can run more than 10 instances at 1x speed. While the other one with 2 instances my simulation speed is already low 0.4-0.5x or less... Is this related to my supervisor characteristics? If I need to define the number of instances that I can set as the maximum at a server, is there a better way to estimate this number? Thanks!

##### David Mansolino [Cyberbotics] 10/22/2020 07:12:20
> Hello, can anybody help me about how can I read the "pages" ? 

> I'm using Robotis OP3 for a simulation and I want that page for kicking, but I don't know how to read what is done when, in the standard controller (op3\_motion\_player),  playPage execs, can somebody help me to read the playPage or to print in screen the values of the motors ?

`@Kirlin` you can use the Motor.getTargetPosition to print the current target position of each motor: [https://cyberbotics.com/doc/reference/motor?tab-language=c++#wb\_motor\_get\_target\_position](https://cyberbotics.com/doc/reference/motor?tab-language=c++#wb_motor_get_target_position)

##### Olivier Michel [Cyberbotics] 10/22/2020 07:12:48
`@Luiz Felipe`: I believe there is no better way, as it depends on the complexity of your simulation (world file, textures, controller files, etc.). You should really test case-by-case to determine the optimal count.

##### Kirlin 10/22/2020 07:14:10
> `@Kirlin` you can use the Motor.getTargetPosition to print the current target position of each motor: [https://cyberbotics.com/doc/reference/motor?tab-language=c++#wb\_motor\_get\_target\_position](https://cyberbotics.com/doc/reference/motor?tab-language=c++#wb_motor_get_target_position)

`@David Mansolino` I don't understood so well the aplication for this... do you have any funcional examples ?

##### Olivier Michel [Cyberbotics] 10/22/2020 07:14:21
`@Luiz Felipe`: Maybe you could try to implement an automatic load balancing system that will detect when a node is saturated (e.g., nearing 100% CPU or 100% GPU capacity) and refuse to start new simulations until the load decreases.

##### Luiz Felipe 10/22/2020 07:16:25
`@Olivier Michel` What I am thinking is that, for example, i have to plot a function of the number of instances by the speed of the simulation in fastmode (even the speed in realtime can be important also)


With the load balancing I can set the maximum number of instances I can run for my server specifications, but maybe running in really low speed


for example, i can run 10 instances at 0.2x speed or 5 instances at 1x speed


I just can think about getting this data testing case-by-case... hm...

##### David Mansolino [Cyberbotics] 10/22/2020 07:19:10
> `@David Mansolino` I don't understood so well the aplication for this... do you have any funcional examples ?

`@Kirlin` the robotis-op3 `void playPage(int id);` function is actually sending commands to the motors of the robot. With the `getTargetPosition` you can retrieve the latest command sent to a motor, doing this for each motor you can retrieve all the position sent by the `void playPage(int id);` function.

##### Olivier Michel [Cyberbotics] 10/22/2020 07:22:04
`@Luiz Felipe`: When a simulation is not running at full speed, e.g., at 0.2, but the CPU & GPU are not saturated, this means that running another simulation on the same node should not slow down the first simulation because it will load other cores of the CPU.

##### Kirlin 10/22/2020 07:25:50
> `@Kirlin` the robotis-op3 `void playPage(int id);` function is actually sending commands to the motors of the robot. With the `getTargetPosition` you can retrieve the latest command sent to a motor, doing this for each motor you can retrieve all the position sent by the `void playPage(int id);` function.

`@David Mansolino` ok excuse my dumb ass, but, how should I write this ? I can't compile it at all
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/768736860867919904/unknown.png)
%end

##### ChristopherD 10/22/2020 07:27:52
hey there. just to be clear: a device tag is the devices name field. I am getting an invalid device tag error, this is part of a serial chain robot, the name hasn't been used anywhere else. (I've already tried searching through the discord sorry)
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/768737371940192286/unknown.png)
%end

##### David Mansolino [Cyberbotics] 10/22/2020 07:27:59
> `@David Mansolino` ok excuse my dumb ass, but, how should I write this ? I can't compile it at all

`@Kirlin` let me write you a simple example

##### Luiz Felipe 10/22/2020 07:28:37
`@Olivier Michel` Based on what you said: starting from the assumption that the GPU is not the bottleneck here (what i think it is true for now) and the CPU is the bottleneck. If I am using a docker container, I have the possibility to set the number of cores of the cpu the container can use, and also the memory that the container can use. If I find the minimum value for the cpu/ram that I need to run at the desired speed, I can hard set these as contraints to run the docker containers and calculate the number of containers I can run based on my server specifications. In this making sense based on what you said?

##### Olivier Michel [Cyberbotics] 10/22/2020 07:29:41
Yes, that seems to be a good approach.

##### Luiz Felipe 10/22/2020 07:29:52
If I simulation is not running at full speed and the CPU & GPU are not saturated so there is something in my controller/supervisor responsible to slow down right?

##### Olivier Michel [Cyberbotics] 10/22/2020 07:31:59
No, you have to determine which is the bottleneck between Webots and your controllers (use top to determine who is consuming the most of CPU). If the bottleneck is Webots, then you cannot do much to improve the situation. If the bottleneck is your controllers, then you can try to parallelize (multi-threading) some computation in your controllers, but this might be tricky.

##### Luiz Felipe 10/22/2020 07:32:56
based on my top output in the complex simulation webots-bin process is using 100% while in the simples simulation webots-bin process is using 50%


however the difference in simulation speed between them is really significant


in a non-linear relation of slow down

##### Stefania Pedrazzi [Cyberbotics] 10/22/2020 07:38:12
> hey there. just to be clear: a device tag is the devices name field. I am getting an invalid device tag error, this is part of a serial chain robot, the name hasn't been used anywhere else. (I've already tried searching through the discord sorry)

`@ChristopherD` the `device tag` is the device object. Usually this error means that no device with the given name is found and in your controller code `joint1_sensor` is probably 0 (or null).

The device name seems correct.

Is the controller set for the correct Robot node?

Do you have multiple Robot nodes in your world?

##### David Mansolino [Cyberbotics] 10/22/2020 07:39:13
> `@Kirlin` let me write you a simple example

Here is a simple example that print the motor target position at each step (untested) based on the Op3MotionPlayer controller:

[https://gist.github.com/DavidMansolino/0bcf65fbdad8665a3408cb3c25e5dc15](https://gist.github.com/DavidMansolino/0bcf65fbdad8665a3408cb3c25e5dc15)

##### Stefania Pedrazzi [Cyberbotics] 10/22/2020 07:39:40
`@ChristopherD` sorry the problem is simply that you are using a DistanceSensor API function with a PositionSensor device

you should call `wb_position_sensor_enable` instead of `wb_distance_sensor_enable`

##### Olivier Michel [Cyberbotics] 10/22/2020 07:43:27
`@Luiz Felipe`: OK, so in case Webots uses 100% of one core and the controllers use less than 100% of a core, you shouldn't allocate more than 2 cores per simulation.


This shall give you an idea on the optimal number of simulations per node.

##### Luiz Felipe 10/22/2020 07:45:00
`@Olivier Michel` Yups. Will try to set hard contraints for each container and check how it influences the simulation speed!

##### ChristopherD 10/22/2020 07:49:43
100% Correct `@Stefania Pedrazzi` sorry for the rookie error. 



If in my robot controller script, i ask it to refer to another matlab script (in the same folder) thats very slow. Will this slow down my robot and not the physics/world? Are they synchronous? The context is that I need to make a ball catching robot, so I've made a script that anticipates trajectory of a ball (supervisor), commands waypoints & forwards dynamics things

##### Stefania Pedrazzi [Cyberbotics] 10/22/2020 07:52:04
If you set the `Robot.synchronization` field to TRUE, then the simulation will wait for the controller and they will be run synchronously.

##### ChristopherD 10/22/2020 07:52:54
incredible


many thanks

##### Stefania Pedrazzi [Cyberbotics] 10/22/2020 07:53:19
you're welcome

##### Kirlin 10/22/2020 07:54:12
> Here is a simple example that print the motor target position at each step (untested) based on the Op3MotionPlayer controller:

> [https://gist.github.com/DavidMansolino/0bcf65fbdad8665a3408cb3c25e5dc15](https://gist.github.com/DavidMansolino/0bcf65fbdad8665a3408cb3c25e5dc15)

`@David Mansolino` Oh thank you, it really gonna help me

##### David Mansolino [Cyberbotics] 10/22/2020 07:54:30
`@Kirlin` you're welcome

##### Justin Fisher 10/22/2020 07:57:14
`@David Mansolino` I finally figured out that weird bug with IR sensors working with some textures and not others.  The deciding factor is whether I have some other object in the scene using that same texture -- in that case, both appear correctly visually, but only one is visible to IR.  Simply copying the texture file and setting one object to use the copy makes IR then work with both.  That seems like a bug to me...

##### David Mansolino [Cyberbotics] 10/22/2020 07:57:51
`@Justin Fisher` I just saw your new post on the issue, I will try this new procedure and let you know directly on the issue.

##### Justin Fisher 10/22/2020 07:58:51
thanks for looking into it.  Now that I know what causes it, I can work around it easily enough.  But it'd probably be good to at least  document it, or fix it so it won't trip other people up.

##### David Mansolino [Cyberbotics] 10/22/2020 07:59:22
Yes exactly, if we can fix it that would be better indeed.

##### Luiz Felipe 10/22/2020 08:27:45
`@Olivier Michel` strange, I set to each docker container to use 1.5 cores (the cpu number seems the bottleneck to the simulation speed) and 1.2gb of memory. If i run one instance it seems fine the speed. If I ran 4 instances, each one with the same constraints, the simulation speed is much reduced in each of them... like from 0.8x with 1 isntance to 0.2x with 4 instances... but the cores does not seem saturated, the memory is not saturated and the gpu not saturated...

##### David Mansolino [Cyberbotics] 10/22/2020 08:34:52
That looks strange, I am not an expert of docker, but are you sure they are not somehow using the same CPU cores?

##### Luiz Felipe 10/22/2020 08:56:04
I set different cores for each instance to use manually using the --cpuset-cpus flag in docker run and the same problem happens


using htop i can see that they are using different cpu cores but the simulation speed is reduced anyway

##### Olivier Michel [Cyberbotics] 10/22/2020 09:08:54
Sorry, I have no idea on where the problem may come from... 🤔

##### Ravencus 10/22/2020 13:14:57
Hey guys, I'm new here and tring to use the build-in Robotis-op2 to try out some functions.

But it seems that I need to know the exact 'WbDeviceTag' to call the get\_device() function, otherwise I shall get a "Error: wb\_robot\_get\_device() called with NULL or empty argument."

 Is there a document on whether all these tags can be customized when calling Robot() or do they came with the model of the robot? And in what file exactly can I check or set all the labels for the sensors?

I'm using windows 10 currently.

Many thanks!

##### David Mansolino [Cyberbotics] 10/22/2020 13:18:24
Hi `@Ravencus`, welcome!

Basically, when you want to get a device you need to now it's name, here is an example with an accelerometer: 

```cpp
robot = Robot();
acc = robot.getAccelerometer("accelerometer");
```

I would strongly adive following our tutorials, in particular this one about controllers: [https://www.cyberbotics.com/doc/guide/tutorial-4-more-about-controllers?tab-language=c++](https://www.cyberbotics.com/doc/guide/tutorial-4-more-about-controllers?tab-language=c++)

##### Ravencus 10/22/2020 13:20:29
`@David Mansolino` thanks for the instruction! I'll look into it right away

##### David Mansolino [Cyberbotics] 10/22/2020 13:21:10
You're welcome

##### Götz 10/22/2020 16:45:48
Hi all, I want to give users access to a simulation via web stream for viewing and an API controller I‘m building only. This is all working fine so far using the Webots container version, the only missing piece is: I obviously need to give them a way to pause/end/reset the simulation. Is there a way to do this w/o the main GUI, using the web player or maybe even from the controller code?

##### Simon Steinmann [Moderator] 10/22/2020 16:47:28
[https://cyberbotics.com/doc/reference/supervisor?tab-language=python](https://cyberbotics.com/doc/reference/supervisor?tab-language=python)


specifically the functions from here and below: [https://cyberbotics.com/doc/reference/supervisor?tab-language=python#wb\_supervisor\_simulation\_set\_mode](https://cyberbotics.com/doc/reference/supervisor?tab-language=python#wb_supervisor_simulation_set_mode)

##### Götz 10/22/2020 17:11:30
Ah okay, I didn‘t really understand the supervisor option. So in my case I would enable it and then incorporate the calls into my controller?

##### Simon Steinmann [Moderator] 10/22/2020 17:13:26
yes


from controller import Supervisor


robot = Supervisor()


all the robot functions work exactly the same


but you can do things like:

`robot.simulationReset()`


you have to enable the robot to be a supervisor though, by either editing the proto file, or clicking the checkbox, when selecting the robot in webots

##### Götz 10/22/2020 17:18:01
Awesome software, great community! Thanks!


Just so I go it right: Instead of ˋimport Robotˋ and ˋrobot = Robot()ˋ I use ˋSupervisorˋ and get the supervisor functions „on top“?

##### Simon Steinmann [Moderator] 10/22/2020 17:30:03
yes

##### Götz 10/22/2020 17:30:11
👍

##### Adivote 10/22/2020 21:02:15
Hey, we're just getting prepared to start our next competition cycle using Webots, one issue we came across pretty frequently was issues with the rigid body physics 'exploding' during our matches, for example: [https://youtu.be/xBPVqsb\_Ydk?t=2062](https://youtu.be/xBPVqsb_Ydk?t=2062) (time code in link) I was wondering if any of you can think up some mitigations to reduce/stop these situations?

##### Simon Steinmann [Moderator] 10/22/2020 21:05:57
if you share the project directory (models + world files) I can take a look.

##### Adivote 10/22/2020 21:06:06
[https://github.com/srobo/competition-simulator/](https://github.com/srobo/competition-simulator/)


Thanks for offering to help out, Simon! [https://github.com/srobo/competition-simulator/blob/master/protos/Robot\_Echo/SRRobot.proto](https://github.com/srobo/competition-simulator/blob/master/protos/Robot_Echo/SRRobot.proto) is the robot itself

##### Simon Steinmann [Moderator] 10/22/2020 21:08:57
I'm not on my linux machine atm, I can take a more detailed look tomorrow. One thing that I notice from looking at the code, is that "self\_collision" is not specified and thus most likely turned on. I would recommend turning that off for the robots

##### Adivote 10/22/2020 21:09:29
Thanks! there's no rush on this, we'll be shipping the first 'version' of our simulator in about a month

##### Simon Steinmann [Moderator] 10/22/2020 21:10:17
you might also want to consider running the simulation at 16 or 8 ms timesteps

##### Adivote 10/22/2020 21:12:32
Hmm, ok I'll get one of the team to try these out, and we'll see how it goes


ah apparently we already discovered dropping the timestep to 16ms, it reduced 'explosions', but didn't fix them

##### Simon Steinmann [Moderator] 10/22/2020 21:14:24
turning self collision off should do a lot


another thing you could try is setting CFM to something like 1e-4

##### Adivote 10/22/2020 21:15:49
hm ok, I'll keep you posted!

##### JavierGraca97 10/22/2020 23:02:49
hello, how can i create new moves? In the reference manual it says that you can use the motion editor shown in the user guide, but I can't find that section.

##### David Mansolino [Cyberbotics] 10/23/2020 05:57:02
`@Adivote` I didn't checked your files yet, but make also sure to have very simple bounding objects and if possible not too thin.


> hello, how can i create new moves? In the reference manual it says that you can use the motion editor shown in the user guide, but I can't find that section.

`@JavierGraca97` hi, the motion editor is available only with the old robot-window, if you want to use the old robot-window, you need to set the 'window' field of the robot to 'generic\_window'.

##### Justin Fisher 10/23/2020 06:29:44
Webots docs say that each solid should have a unique `name` , but this doesn't actually seem to matter -- e.g., I've violated this constraint many times with no notable ill effect.  How important is this?

##### David Mansolino [Cyberbotics] 10/23/2020 06:32:28
Some features refer to the name of the solid (for example when you want the viewpoint to follow a solid), if one of these features is used with a solid whose name is duplicated, the behavior might not be the desired one (e.g. in the viewpoint case, you might follow the wrong one)

##### Justin Fisher 10/23/2020 06:35:55
Oh, I usually feel like the in-built viewpoint following is more annoying than useful, so I wrote my own routines for automated camera movement that work better for keeping relevant things in view for my simulations.  If I'm not going to  using the in-built viewpoint following for a solid, do I not need to worry about giving it a unique `name`?


(Obviously, devices in a robot need unique-within-that-robot names for their controller to gain access to them)

##### David Mansolino [Cyberbotics] 10/23/2020 06:37:43
If I remember well, there are other feature using this uniqueness, but you might indeed not use them (from a purely simulation point of view uniqueness of solid names is useless), so you might indeed ignore it.

##### Justin Fisher 10/23/2020 06:40:12
Also, I see you told Adivote to avoid thin bounding objects.  Can you say more about why that matters?   (I've been having a supervisor spawning coins that fly in the air and spin around, kind of like the coins that Super Mario knocks up out of blocks, and they sometimes have weird physics -- I wonder if that's because they're quite thin?)

##### David Mansolino [Cyberbotics] 10/23/2020 06:47:00
The problem with thin objects is the following, since the simulation time increases with steps, if the step is not small enough and the thin object (or the object it is colliding) is moving fast, it is possible that at step T-1 the object does not collide and at step T the thin object is completely 'inside' the other, in that case ODE (our physics engine) might not know on which side to push back the thin object and this might resolve in big instabilities.

As an analogy, you can think about a bullet shotted at a wall, if the simulation step is not small enough, it is completely possible that the bullet goes through the wall without even 'noticing' it (at T-1 it is on one side of the wall and at T it is already in the other side, so no step is producing a collision)

##### Justin Fisher 10/23/2020 06:48:16
That makes complete sense -- thanks!  It also doesn't explain the weird physics issues I had with the coins, but I suspect they were due to a problem that y'all recently fixed involving cylinder collision.


Back on the topic of solids having unique names, this seems like a *bad* constraint for you to impose.  E.g., I want to have multiple copies of pretty much the same robot in a simulation.  If each of these robots really did have to have different names for all its solid parts, that would (a) make it a real pain to create the clones in the first place, and (b) would make it a real pain for each robot's controller to figure out what names to use when it was getting devices.  So I'm *glad* this constraint isn't actually enforced, and would suggest that it probably shouldn't even be a constraint at all!



Instead, if you ever want to pick things out by a unique nomiker of some sort, I think your DEF-name pathing (e.g., `ROBOT1.BUMPER`) is probably the best mechanism you currently have for doing that, so it'd probably be better to make your automated camera use something like that, rather than `name`.  (In fact, I think a good long-run goal would be to generalize the various `getDevice` functions so that they can use DEF-names rather than just `name`s, and then to deprecate the `name` field entirely, since it's mostly redundant with DEF-names.)

##### zzzhai Xian 10/23/2020 07:50:47
Hello everyone. This window poped out when I am trying to render my current world as a video. Anyone have idea what is happening?
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/769105530115194910/unknown.png)
%end


The error from webots console
%figure
![error2.png](https://cdn.discordapp.com/attachments/565154703139405824/769108223160352778/error2.png)
%end

##### David Mansolino [Cyberbotics] 10/23/2020 08:32:31
> Back on the topic of solids having unique names, this seems like a *bad* constraint for you to impose.  E.g., I want to have multiple copies of pretty much the same robot in a simulation.  If each of these robots really did have to have different names for all its solid parts, that would (a) make it a real pain to create the clones in the first place, and (b) would make it a real pain for each robot's controller to figure out what names to use when it was getting devices.  So I'm *glad* this constraint isn't actually enforced, and would suggest that it probably shouldn't even be a constraint at all!

> 

> Instead, if you ever want to pick things out by a unique nomiker of some sort, I think your DEF-name pathing (e.g., `ROBOT1.BUMPER`) is probably the best mechanism you currently have for doing that, so it'd probably be better to make your automated camera use something like that, rather than `name`.  (In fact, I think a good long-run goal would be to generalize the various `getDevice` functions so that they can use DEF-names rather than just `name`s, and then to deprecate the `name` field entirely, since it's mostly redundant with DEF-names.)

`@Justin Fisher` you don't really need to have different names for each Solid nodes, it is for solid nodes at the same level, in your case, yeah Robot should have a different name, but the internal solid can have same names between different robot (sorry for late answer, I am having a meeting).


`@zzzhai Xian` which version of webots are you using?

##### zzzhai Xian 10/23/2020 08:34:09
Hi,`@David Mansolino` . I am using R2020b-rev1

##### David Mansolino [Cyberbotics] 10/23/2020 08:34:57
On windows I suppose, right?

##### Simon Steinmann [Moderator] 10/23/2020 08:35:19
had the same on linux, I think when recording 720p or higher

##### zzzhai Xian 10/23/2020 08:35:22
yeah. you are right. In windows

##### David Mansolino [Cyberbotics] 10/23/2020 08:35:33
Make sure tu run the simulation in real-time or run mode (avoid fast mode).


> had the same on linux, I think when recording 720p or higher

`@Simon Steinmann` interesting, did you manage to find a solution?

##### zzzhai Xian 10/23/2020 08:36:05
ya. I am running it in a realtime mode.

##### David Mansolino [Cyberbotics] 10/23/2020 08:36:37
Ok, can you try as `@Simon Steinmann` suggested with a lower resolution?


Can you also checked in your temporary foder if you see the frame images been generated?

##### zzzhai Xian 10/23/2020 08:38:28
I actually tried to record it in lower resolution, but it still give me the same error.

##### David Mansolino [Cyberbotics] 10/23/2020 08:41:06
> Can you also checked in your temporary foder if you see the frame images been generated?

##### zzzhai Xian 10/23/2020 08:45:34
I checked. this is the list of file I can see from the webots folder in temp.
%figure
![image_2.png](https://cdn.discordapp.com/attachments/565154703139405824/769119317199290368/image_2.png)
%end

##### David Mansolino [Cyberbotics] 10/23/2020 08:46:01
while you are recoding the video?

##### zzzhai Xian 10/23/2020 08:47:35
It is 4.46pm in my local time, I guess some of the files got updated when I try to do the recording like 10 minutes ago.

##### David Mansolino [Cyberbotics] 10/23/2020 09:01:25
What is the value of the WorldInfo.basicTimeStep?

##### zzzhai Xian 10/23/2020 09:10:02
64, but I do tried with 32 too. Still make no different

##### David Mansolino [Cyberbotics] 10/23/2020 09:10:35
Can you try with a nightly build of Webots R2020b-rev2?

[https://github.com/cyberbotics/webots/releases](https://github.com/cyberbotics/webots/releases)

##### zzzhai Xian 10/23/2020 09:11:43
ok. I will try then give you feedback on this. Thanks David.

##### David Mansolino [Cyberbotics] 10/23/2020 09:12:18
You're welcome, thank you for the feedback

##### Simon Steinmann [Moderator] 10/23/2020 09:32:26
`@David Mansolino`
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/769131110252544010/unknown.png)
%end

##### David Mansolino [Cyberbotics] 10/23/2020 09:36:13
Is this with the nightly?

##### Simon Steinmann [Moderator] 10/23/2020 09:36:35
yes

##### David Mansolino [Cyberbotics] 10/23/2020 09:36:45
the one of tonight?

##### Simon Steinmann [Moderator] 10/23/2020 09:36:50
no


how can I test it again?


what it is


I think I compiled this one

##### David Mansolino [Cyberbotics] 10/23/2020 09:37:59
You can download and compile them from here: [https://github.com/cyberbotics/webots/releases](https://github.com/cyberbotics/webots/releases)

##### Simon Steinmann [Moderator] 10/23/2020 09:38:20
dont have time for that atm sadly


on  a crunch today


tomorrow I can look into it

##### David Mansolino [Cyberbotics] 10/23/2020 09:38:43
But maybe you just miss some ubuntu dependencies (see note here: [https://www.cyberbotics.com/doc/guide/installation-procedure#installing-the-tarball-package](https://www.cyberbotics.com/doc/guide/installation-procedure#installing-the-tarball-package))

##### Olivier Michel [Cyberbotics] 10/23/2020 09:39:05
Yes, I believe the problem is more with your mjpeg installation (you are missing an encoding library).

##### Simon Steinmann [Moderator] 10/23/2020 09:39:40

%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/769132930189885450/unknown.png)
%end


do you have the link to install from source?

##### David Mansolino [Cyberbotics] 10/23/2020 09:42:49
No, but it looks like th eproblem is not ffmpeg, but the codec that is missing


is the `libfdk-aac1` package installed?

##### Simon Steinmann [Moderator] 10/23/2020 09:48:26
still same issue after installing it


do you have a install instruction for the dependencies?. want to follow it eactly

##### David Mansolino [Cyberbotics] 10/23/2020 09:51:21
We have a script: [https://github.com/cyberbotics/webots/blob/master/scripts/install/linux\_runtime\_dependencies.sh](https://github.com/cyberbotics/webots/blob/master/scripts/install/linux_runtime_dependencies.sh)

##### Simon Steinmann [Moderator] 10/23/2020 09:52:38
all up to date...

##### David Mansolino [Cyberbotics] 10/23/2020 09:54:22
Which version of Ubuntu are you using?

##### Simon Steinmann [Moderator] 10/23/2020 09:54:29
18.04


is there a reason, the latest nightly does not have tar version of 2021?

##### David Mansolino [Cyberbotics] 10/23/2020 09:58:19
Yes, there was a failure in the build machine (this is just temporary and should work for the tomorrow build)

##### Simon Steinmann [Moderator] 10/23/2020 09:59:00
pulling the lastest develop branch and building it, should be the same right?

##### David Mansolino [Cyberbotics] 10/23/2020 09:59:52
yes.

##### Simon Steinmann [Moderator] 10/23/2020 10:25:38
wait, develop is not 2021a?

##### David Mansolino [Cyberbotics] 10/23/2020 10:26:11
Yes it is:

master: R2020b-rev2

develop: R2021a


why?

##### Simon Steinmann [Moderator] 10/23/2020 10:27:27
[https://tenor.com/view/facepalm-the-huxtables-raven-simone-the-cosby-show-gif-9140688](https://tenor.com/view/facepalm-the-huxtables-raven-simone-the-cosby-show-gif-9140688)


I compiled master... thought I pulled develpü


I figured out the issue. ffmpeg was installed in conda as well, where libx264 was disabled

##### David Mansolino [Cyberbotics] 10/23/2020 10:46:34
Oh that makes sense, well spotted!

##### Simon Steinmann [Moderator] 10/23/2020 11:04:33
[https://github.com/cyberbotics/webots/pull/2382](https://github.com/cyberbotics/webots/pull/2382)


created a PR with documentation update


the formatting is bad, as the mmpeg stuff was mentioned in a note before

##### Götz 10/23/2020 14:44:00
> but you can do things like:

> `robot.simulationReset()`

`@Simon Steinmann` So I start the simulation, can let the robot turn or move forward. When I then call simulationReset() the robot is reset to the initial position. But after this it gets strange, e.g. when I issue a turn command (one motor full forward, the other full back) again, only one motor starts moving. Do I have to do more to reset the simulation to start using supervisor?


This is what I call to reset. 
```class ResetHandler(tornado.web.RequestHandler):
    def get(self):
        robot.simulationReset()
```

##### David Mansolino [Cyberbotics] 10/23/2020 15:07:23
Maybe you want to restart the controller of your robot too?

##### Götz 10/23/2020 15:11:05
Can I do this from the controller?


I guess my understanding of what reset/restart means is still limited...

##### David Mansolino [Cyberbotics] 10/23/2020 15:14:20
Yes from a supervisor: [https://www.cyberbotics.com/doc/reference/supervisor?version=develop&tab-language=python#wb\_supervisor\_node\_restart\_controller](https://www.cyberbotics.com/doc/reference/supervisor?version=develop&tab-language=python#wb_supervisor_node_restart_controller)

##### Götz 10/23/2020 15:36:06
Thanks! And it's all there... excuse all the newbie questions. Just have to understand how to call it from the Tornado class...

##### Huey 10/24/2020 04:29:42
Hi cyberbotics team, I am playing with the sample scene for universal robots. I have created a new controller and the code are more of less the same with the provided sample script, for some reason, the webots application seems to just hang there after I try to 'Run' it after new 'Build', I had to force close and restart the application in order to run the simulation properly. Any idea what might be wrong there?

##### Zezette, Betclik, Kaïna 10/24/2020 05:04:16
Hello, I have homework due for Sunday and I'm stuck, I'm going around in circles can you help me it's an anti collision e-puck project and follow up follow Ball thank you or just tell me where my mistakes are that I correct this I'm new to webots and sorry for my long post


My code python Is

##### Justin Fisher 10/24/2020 05:09:48
`@Huey`  On my computer my antivirus software (AVG) always insists on doing a "quick 15 second scan" on any Webots controller compiled from C or C++ before letting it run, and Webots crashes before that scan is finished, much like you described.  When I restart Webots, the controller then runs fine.  I haven't found a good solution to that problem, other than just living with it.  Fortunately, this doesn't happen with Python controllers, which works fine for me because I like Python better anyway 🙂

##### Zezette, Betclik, Kaïna 10/24/2020 05:10:52
"""Epuck\_Controller\_Python controller.



Contrôle d'un robot Epuck

    - Controle manuel par clavier

    - Evitement d'obstacle

    - Odométrie

    - Detection balle verte







"""





\# You may need to import some classes of the controller module. Ex:

\#  from controller import Robot, Motor, DistanceSensor

import math

import numpy as np



from controller import Robot, DistanceSensor, Motor, Camera, Keyboard

\#from controller import 





\# create the Robot instance.

robot = Robot()

keyboard=Keyboard()



\# get the time step of the current world.

timestep = int(robot.getBasicTimeStep())


I have a problem with the import control and name of the robot which is epuck

##### Justin Fisher 10/24/2020 05:15:36
`@Zezette, Betclik, Kaïna` You'll probably need to be more specific regarding the problem you're having.  The code you pasted looks fine to me.  What error is it giving you?


Depending on what exactly your program does later, you probably only need to import Robot from controller -- the other things you list after that probably don't need to be imported (though doing so shouldn't hurt anything)

##### Zezette, Betclik, Kaïna 10/24/2020 05:18:01
2 min I turn my pc back on to sleep my head will explode

##### Justin Fisher 10/24/2020 05:18:08
lol

##### Zezette, Betclik, Kaïna 10/24/2020 05:20:42

%figure
![20201024_072025.jpg](https://cdn.discordapp.com/attachments/565154703139405824/769430145475280906/20201024_072025.jpg)
%end

##### Justin Fisher 10/24/2020 05:22:02
are you running the controller from Webots, e.g., by locating it in the controllers folder of your project and hitting play on the simulation in Webots?  or are you trying to run it externally?

##### Zezette, Betclik, Kaïna 10/24/2020 05:23:34
For the moment externally on jupyterlab anaconda

##### Justin Fisher 10/24/2020 05:25:31
I don't have much experience with that.  My guess is that you'll probably need to ensure that your path includes the relevant location on your harddrive for the Webots controller module.  (When you run things from Webots, it takes care of ensuring that Python starts running the controller with that location in its path.)  You may find answers here:  [https://www.cyberbotics.com/doc/guide/running-extern-robot-controllers](https://www.cyberbotics.com/doc/guide/running-extern-robot-controllers)

##### Zezette, Betclik, Kaïna 10/24/2020 05:26:38
I was going to watch thank you Justin


Merci cela m'a aider

Ou je peut trouver un exemple pour que mon epuck suive balle couleur en python


Sorry


Thank you that help me Or I can find an example for my epuck to follow color ball in python

##### Huey 10/24/2020 06:04:10
`@Justin Fisher` yeah, sounds like it could be my antivirus getting in the way too, although webots has been added to the exception's list. Anyway, Thanks mate!

##### Zezette, Betclik, Kaïna 10/24/2020 06:36:33
Please help me find a tutorial to follow a Ball of color in python for an epuck robot, thank you I will rest I will come back to see your answers in 5h I hope I really need it and thank you again for your help `@Justin Fisher`

##### Justin Fisher 10/24/2020 07:34:26
I don't know if there is such a tutorial.  Many of the samples included with Webots are written in C, not Python.  The closest thing that leaps to my mind is this video:  [https://www.youtube.com/watch?v=aDOLrPk5ItI](https://www.youtube.com/watch?v=aDOLrPk5ItI)


Note that those guys have a whole series of Webots tutorial videos, so you may want to start earlier in the series, but this video is the one that specifically talks about something akin to what you wanted.

##### Zezette, Betclik, Kaïna 10/24/2020 14:43:14
Okay yes it's true that in python it's difficult to find otherwise well I import and or tell python to execute a command in c


Thank you for the link and the research I will look into it in 2 hours

##### ChristopherD 10/24/2020 18:42:59
hey there, some trouble shooting advice would be appreciated. Is this a bounding box issue or could it be that i've setup robot physics/heirachy wrong?



so the setup: robot -> children -> link0 solid (physics + bounding object -> children -> hinge joint -> solid ect..

i've applied link masses and physics to every link. The robot itself has physics but mass =-1, has no bounding box (defined in each object). I've offset the robot by 0.001 to make sure its not intersecting with the floor plane
> **Attachment**: [TimPayneV6-gravityTest.mp4](https://cdn.discordapp.com/attachments/565154703139405824/769632047865921636/TimPayneV6-gravityTest.mp4)


i'm a tad bit confused about how to pin the robots base as well (w/o setting mass to be very high). It breaks the physics change if i set link0 solid to null physics, and the robot requires physics to be set to work too. I've read the documentation for reference/physics mentioning how to define a static base. do i need to have a heirachy like this:  root (physics) -> 'staticBase' Solid (physics null) -> link0 (the base, physics) -> ect


thanks for the help!

##### Zezette, Betclik, Kaïna 10/24/2020 18:55:41
Please can you tell me where the error is



%figure
![20201024_205600.jpg](https://cdn.discordapp.com/attachments/565154703139405824/769635434153246730/20201024_205600.jpg)
%end

##### ChristopherD 10/24/2020 19:13:03
ah i see  (and i read back in the discord) group member did sneaky cad. Is this something we need to correct the reimport into webots (meaning resetup model) or can i edit a parameter? Isn't it weird how its not respecting the bases bounding object



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/769639621709135872/unknown.png)
%end


> Please can you tell me where the error is

`@Zezette, Betclik, Kaïna` looks like a programming error in your code - check where you have defined the variable hist, and ensure that it is accessible where you call it. you may have defined it in a function - thus its local - and your calling it outside of that function? [https://www.programiz.com/python-programming/global-local-nonlocal-variables#:~:text=In%20Python%2C%20a%20variable%20declared,or%20outside%20of%20the%20function](https://www.programiz.com/python-programming/global-local-nonlocal-variables#:~:text=In%20Python%2C%20a%20variable%20declared,or%20outside%20of%20the%20function).

##### Justin Fisher 10/24/2020 20:32:13
`@ChristopherD` If you want parts of your robot to be mounted to the floor, i think you will need (1) that these parts not be descendants of the movable parts in your scene tree, (2) that these parts and your Robot node not have physics enabled themselves.  Having physics enabled indicates to Webots that you want something to be capable of moving with respect to anything that it isn't firmly attached to.  Starting at your first joint, each endPoint should have physics enabled.  This is explained here: [https://cyberbotics.com/doc/reference/physics](https://cyberbotics.com/doc/reference/physics)


> do i need to have a heirachy like this:  root (physics) -> 'staticBase' Solid (physics null) -> link0 (the base, physics) -> ect

`@ChristopherD` 

I doubt root has physics enabled. If it did, the whole world would freefall in gravity with respect to some larger frame of reference.  Otherwise your hierarchy looks right except you also need the whole Robot to have physics Null too, I think.


> Isn't it weird how its not respecting the bases bounding object

`@ChristopherD` 

It looks like your parts are quite massive so are exerting enough downwards force on your base to rival the amount of upwards force the physics engine administers to try to resolve the base's collision with the ground.  So Webots ends up allowing the overlap to continue for awhile.  You could adjust some of this by adjusting the "softness" parameter (called something like CFM) in your world settings, to make your objects work harder to not stay overlapped, though I probably wouldn't suggest it (makes the simulation less stable).

Once you affix your base to the ground (by setting it and your robot's Physics to Null) then your base will no longer move at all with respect to the ground, and your first joint's degrees of freedom and motors will probably/hopefully automatically absorb the force from all the weight it's supporting.

If it still wants to topple after affixing your base, you may want to reconsider the mass you have (effectively) assigned to each of the upper parts and/or give your motors more torque to help them be able to counteract the pull of gravity.

##### ChristopherD 10/25/2020 07:51:14
thanks a lot justin - i understand the heirachy chain now. it was also the fact that i didn't realize the link COM was relative to the base solid that tripped me up/gave erratic motion. it is all working now



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/769830431968329728/unknown.png)
%end

##### soheil 10/25/2020 10:41:21
Hello there, I have problem with my robot in Webots. It weighs about 300 kilograms and it penetrates into the floor. I have reduced the CFM as much as possible but the problem is still there. Do you have any ideas about it?

##### DrakerDG 10/25/2020 12:05:41
`@soheil` Hello. A query.  Have you made the collision boundingObject for your robot?

##### Justin Fisher 10/25/2020 12:21:28
`@soheil` My guess is that you may need either to decrease the mass and/or increase the footprint of your robot.  Compare, if you tried to make a 300KG real-world robot stand on a narrow stilt, it would press into the dirt too.


Can anyone help me figure out why my conveyer belt isn't working.  I can't see any texture animation, and regardless of which way I set the linear motor to move, the conveyer seems to pull things the same direction.  Here's the conveyer:


Track {

  translation -0.7499980505312245 1.4182193047718246 -2.599999999991869

  rotation 0.4766105333933617 0.8791145542297062 1.6711075042015303e-08 3.141590046104821

  children [

    Shape {

      appearance PBRAppearance {

        baseColorMap ImageTexture {

          url [

            "textures/stair\_image.jpg"

          ]

        }

        normalMap ImageTexture {

          url [

            "textures/stair\_normals.jpg"

          ]

        }

        normalMapFactor 0.5

        textureTransform TextureTransform {

        }

      }

      geometry TexturedBox {

        size 0.15 1.89 0.799

        mapping "cube"

        left FALSE

        top FALSE

        bottom FALSE

      }

    }

  ]

  boundingObject Box {

    size 0.15 1.89 0.799

  }

  physics Physics {

  }

  device [

    LinearMotor {

      name "escalator motor"

      sound ""

    }

  ]

  textureAnimation 0 1

  linearVelocity -3.2643884044531474e-08 5.012981282308108e-08 -1.268801249143911e-13

  angularVelocity -8.843852747475536e-10 -5.760371970854108e-10 -5.2005855436601914e-08

}

##### Chronoj 10/25/2020 14:50:06
Hi there. Any ideas, why this code does not run properly? Makes one iterration, lags at timestep 32. No results, even the printed stuff. But, when i remove the velocity functions part,  printf works fine.
> **Attachment**: [error\_in\_timestep.txt](https://cdn.discordapp.com/attachments/565154703139405824/769935830617292850/error_in_timestep.txt)

##### Justin Fisher 10/25/2020 23:42:15
`@Chronoj`  I use Python a lot more than C so I'm not the best person to answer, but I do see that you passed a string argument to wb\_supervisor\_node\_get\_self(), but the docs say that it's not supposed to have an argument.  That function is just supposed to get the Robot node that this supervisor is controlling, so it doesn't need an argument to help narrow down what node it's getting.  Could that be what's causing your problem?


Also, it looks like you have a while loop that is set to continue for as long as angle\_error != 0.0.  But (a) nothing in that loop would change angle\_error, since you're waiting for the get\_sf\_rotation call to deliver a different result and it will never deliver a different result until you let the simulation advance by calling wb\_robot\_step(TIME\_STEP).  Also (b) when the numbers you're dealing with are floating point numbers, as I'm presuming these angles are, floating point imprecision sometimes makes floats never be exactly equal to some target you're waiting for, so it's usually better just to check whether a value has gotten within a very small margin of your target e.g., with abs(angle\_error) > 0.001 .



Similarly, you have another while loop later that sets velocities, but doesn't call the robot\_step function to give those velocity changes a chance to play out in the simulation.  



You may want to make both those inner while loops be if statements, so they'll just update things once, then you can loop back up to the top of your main while loop to call robot\_step and let those changes have an effect, so that you can then check if you've gotten closer to your targets.


(Minor style point:  my own style preferences are to always indent the contents of loops.  That'll make it a lot easier for readers to see your nested while loops, and for you and them to question why those loops are there, and whether their exit conditions will ever be met.)


> Can anyone help me figure out why my conveyer belt isn't working.  I can't see any texture animation, and regardless of which way I set the linear motor to move, the conveyer seems to pull things the same direction.  Here's the conveyer:

`@Justin Fisher` 

The texture animation was fixed by reloading the world.  But it still doesn't seem to interact right with other objects.  The conveyer repels objects from its bounding box fine, but it behaves as though there is zero traction friction on the conveyer belt regardless of which direction the conveyer is turning.  This conveyer is at an angle.  If you drive a robot onto it from the top, it slides down like on a slide at a children's playground.  If you drive a robot onto it from the bottom, as soon as the wheels get onto the conveyer, they just spin in place, like they're not getting any traction, perhaps like a baby with slick clothes trying to crawl up a playground slide.  Again, this is all true regardless of which direction I have the conveyer moving.


The main difference I can notice between my conveyer and the Webots ConveyerPlatform proto is that that proto gives its robot itself a physics node, whereas if I put a physics node on the robot containing my conveyer then the conveyer tumbles down in free fall, so I have not been putting a physics node on the containing robot...

##### Stefania Pedrazzi [Cyberbotics] 10/26/2020 07:17:59
> Hello there, I have problem with my robot in Webots. It weighs about 300 kilograms and it penetrates into the floor. I have reduced the CFM as much as possible but the problem is still there. Do you have any ideas about it?

`@soheil` To solve this issue you have to add a ContactProperties node in the `WorldInfo.contactProperties field` and set the `softCFM` value.

For example for cars (2000 kg in `projects/vehicles/worlds/city.wbt`) we use a `softCFM` value of `1e-05`.

[https://www.cyberbotics.com/doc/reference/contactproperties](https://www.cyberbotics.com/doc/reference/contactproperties)

##### derek 10/26/2020 09:15:15
hello, this link is invalid: [https://discord.com/channels/565154702715518986/565154703139405824/615838998455386122](https://discord.com/channels/565154702715518986/565154703139405824/615838998455386122)


> This robot for example is using the Track node: [https://cyberbotics.com/doc/guide/telemax-pro](https://cyberbotics.com/doc/guide/telemax-pro)

`@Fabien Rohrer` hello, this link is invalid

##### Stefania Pedrazzi [Cyberbotics] 10/26/2020 09:16:50
`@derek` Telemax robot is no longer available in Webots.

##### derek 10/26/2020 09:17:02
Are there some example for gear and belt using in webots?

##### Stefania Pedrazzi [Cyberbotics] 10/26/2020 09:18:05
Here is simple example using tracks and belts:

[https://cyberbotics.com/doc/guide/samples-devices#track-wbt](https://cyberbotics.com/doc/guide/samples-devices#track-wbt)

##### derek 10/26/2020 09:19:50
thank you.

##### Stefania Pedrazzi [Cyberbotics] 10/26/2020 09:20:28
You're welcome

##### Justin Fisher 10/26/2020 09:46:48
Should tracks be able to work on a diagonal conveyer built to ramp things upward?  Because I've really been struggling to get that to work.

##### Stefania Pedrazzi [Cyberbotics] 10/26/2020 09:49:49
I'm not sure we ever tested this case. But I can check and let you know.


I just tested changing the orientation of the Track node of the CONVEYOR\_BELT in the sample `track.wbt` world and it works. The cubes go up with the belt.


`@Justin Fisher` is this what you are trying to do?
> **Attachment**: [track.mp4](https://cdn.discordapp.com/attachments/565154703139405824/770224225109409792/track.mp4)

##### Justin Fisher 10/26/2020 09:57:15
It seems to me like robot wheels get a whole lot less traction on a track than they do when the same surface was just a box


Is there a reason that should be?


E.g., if things work the same way for you as they do for me, there is probably a steep angle where your blocks would sit stationary on a stationary ramp of that angle, but would slide down your conveyer, even if it was trying to pull them up.


I've been testing with a wheeled robot rather than blocks, but what I described is exactly what happens for me.  It could drive up a ramp of that angle, but turning the ramp to a conveyer makes me get hardly any traction, even when the conveyer is set to speed zero, so it can't be some difference between static friction and skidding friction

##### Stefania Pedrazzi [Cyberbotics] 10/26/2020 10:01:45
Did you try to change the ContactProperties and modify the coulombFriction?

##### Justin Fisher 10/26/2020 10:02:29
No, I didn't try that.  I figured I'd probably just set up the conveyer wrong or something.  But I can't figure out what I did wrong.


Do you know how the conveyer is implemented?  E.g., does it just notice collisions and add a force to the things that collided with it?

##### Stefania Pedrazzi [Cyberbotics] 10/26/2020 10:05:33
Yes, in the callback function called for the geometry contact the track surface velocity is added to the ODE body.

This slightly differs from other motorized contacts for performance reasons.

##### Justin Fisher 10/26/2020 10:06:51
Does it add force when the track velocity is zero?  (E.g., if it pushed upward in that case, that could conceivably cause the reduction of traction that I'm seeing)


Also, is there a straightforward way to compute what I should set the textureAnimation field to to make it match the "actual" velocity of the track?  (I'm having a hard time assessing what the actual velocity of the track is because I get so little traction that I often slide down it even when it's quickly moving upwards)

##### Stefania Pedrazzi [Cyberbotics] 10/26/2020 10:14:38
> Does it add force when the track velocity is zero?  (E.g., if it pushed upward in that case, that could conceivably cause the reduction of traction that I'm seeing)

`@Justin Fisher` The Track node is not adding force but setting the surface velocity of one objects with respect to the other.

If the track velocity is zero, then it sets the surface velocity to 0. So it should not reduce the traction (but not tested)


> Also, is there a straightforward way to compute what I should set the textureAnimation field to to make it match the "actual" velocity of the track?  (I'm having a hard time assessing what the actual velocity of the track is because I get so little traction that I often slide down it even when it's quickly moving upwards)

`@Justin Fisher` the `textureAnimation` value depends also on the texture mapping. Usually the animation velocity is already updated based on the track velocity and the `textureAnimation` value.


The problem in your case doesn't seem to adapt the textureAnimation value, but rather fix the contact properties and the slipping behavior

##### Justin Fisher 10/26/2020 10:20:22
So it looks to me like the speed of the texture animation is probably the product of the textureAnimation field and the track's velocity.  E.g., doubling either seems to double the apparent speed of animation.  But I don't know what value to set the textureAnimation to.  



You're right that the real problem is the slippage.  If I knew what to set the animation to, I'd have an easier time telling what sort of slippage should occur.


In this one, the robot's motors are stationary.
> **Attachment**: [robot\_with\_wheels\_still.mp4](https://cdn.discordapp.com/attachments/565154703139405824/770230970455949332/robot_with_wheels_still.mp4)

##### Stefania Pedrazzi [Cyberbotics] 10/26/2020 10:23:26
> So it looks to me like the speed of the texture animation is probably the product of the textureAnimation field and the track's velocity.  E.g., doubling either seems to double the apparent speed of animation.  But I don't know what value to set the textureAnimation to.  

> 

> You're right that the real problem is the slippage.  If I knew what to set the animation to, I'd have an easier time telling what sort of slippage should occur.

`@Justin Fisher` yes, the textureAnimation is just a factor that determines the relation of the texture move with respect to the velocity. It cannot be automatically computed just because it depends on the texture mapping.


What I would suggest you to find the `textureAnimation` value that is correct for your Track and texture mapping is to change the orientation of the Track to test and try with a simple box.

##### Justin Fisher 10/26/2020 10:25:59
Well, I tried it with a stopped robot, and it gave me the video above.  Obviously that doesn't really tell me which is the correct textureAnimation setting because it could be anything from gradually upward to gradually downward.


Ah, I see changing the orientation might fix the slippage problem and allow correct determination of textureanim value

##### Stefania Pedrazzi [Cyberbotics] 10/26/2020 10:27:03
Yes, what I meant is to make the belt flat to compute the correct textureAnimation value.


Then, this won't change even when you move the belt back to the original orientation


alternatively you can add one `animatedGeometries` element to have a reference of the exact movement of the belt

##### Justin Fisher 10/26/2020 10:29:52
This time the track is stopped and the robot's wheels move at constant forwards velocity.  If this were just an ordinary surface, it would climb it without problem.
> **Attachment**: [robot\_moving\_on\_stopped\_track.mp4](https://cdn.discordapp.com/attachments/565154703139405824/770232726674341918/robot_moving_on_stopped_track.mp4)

##### Stefania Pedrazzi [Cyberbotics] 10/26/2020 10:31:29
Yes, this could be due to the fact that the surface velocity is set to 0 if the belt doesn't move.

We can check to improve the behavior if the track velocity is 0.

##### Justin Fisher 10/26/2020 10:37:34
So, I would have thought that when a robot is stationary with respect to the track, then its subsequent motions with respect to the track should be exactly the same as they would be with respect to an ordinary ramp with the same surface properties.  Just like climbing the escalator stairs moves you just as fast with respect to the escalator regardless of whether the escalator is moving or not, and just as fast as it would on stationary stairs with the same structure.  But that's not at all what I'm getting, in either the case where the track is stationary or moving.

##### Stefania Pedrazzi [Cyberbotics] 10/26/2020 10:38:48
You should try to play with the ContactProperties. Because it works fine with simple boxes.


When I will have some time I will also test moving robots on belts

##### Justin Fisher 10/26/2020 10:43:34
Doubling the Cooloumb friction seems to make it work much more like I expected.


So it definitely is a slippage problem.

##### Stefania Pedrazzi [Cyberbotics] 10/26/2020 10:45:35
good! In simulation sometimes we need some additional tricks to make something work as expected. For getting realistic physics behavior it is very often needed to adapt the ContactProperties.

##### Justin Fisher 10/26/2020 10:47:50
I suspect that there's something off about the conveyer implementation because I don't see a reason why it should cause more slippage than an ordinary ramp at the same angle would.  But at least it works now! 🙂  Thanks for your help.

##### Stefania Pedrazzi [Cyberbotics] 10/26/2020 10:51:15
You're welcome

##### Justin Fisher 10/26/2020 12:14:24
Is there a way to get object recognition camera recognition boxes to actually go around the view of the recognized object?  (Perhaps the problem is that I widened the field of view?)


the recognition box should go around the green cone.  instead it seems systematically to be too far from center-view
%figure
![misplaced_recognition_box.png](https://cdn.discordapp.com/attachments/565154703139405824/770261545568698368/misplaced_recognition_box.png)
%end


I guess the closest corner and the box size are plausibly right, it's just making the box go in the wrong directions?

##### Stefania Pedrazzi [Cyberbotics] 10/26/2020 12:26:32
There is probably a bug that arise with the field of view you are using.

If you open an issue and send us your simulation we will look at it and try to fix the problem.


Is the sampling period for the recognition the same as the camera sampling period?

##### Justin Fisher 10/26/2020 12:27:45
no it's not


does it need to be

##### Stefania Pedrazzi [Cyberbotics] 10/26/2020 12:28:31
No you can use different sampling period, but then it is possible that the green boxes in the overlay don't match the object

##### Justin Fisher 10/26/2020 12:28:56
this happens even when the robot is stationary, so its not just a timelag issue


still has same problem with default field of view


seems like the problem isn't just putting the green box in the wrong place, it simply doesn't see the object when it is on camera unless the green box is on camera also (which is hard to do on narrow default field of view when the green box tries to be off to the side)


is it normal for a camera to look backwards out the Z-axis?  (I was guessing that the box was behaving as though something was backwards, and then noticed the Z-axis was backwards from what i'd expect too.  I oriented it by viewing the fustrum and rotating it so the fustrum pointed forward, not paying attention to axis)

##### Stefania Pedrazzi [Cyberbotics] 10/26/2020 12:38:01
> is it normal for a camera to look backwards out the Z-axis?  (I was guessing that the box was behaving as though something was backwards, and then noticed the Z-axis was backwards from what i'd expect too.  I oriented it by viewing the fustrum and rotating it so the fustrum pointed forward, not paying attention to axis)

`@Justin Fisher` Yes. If you enable the `Show Camera Frustum` from the `View > Optional Rendering` menu you will see where the camera is looking at in the 3D view.

##### Justin Fisher 10/26/2020 12:39:32
so i guess the backwards seeming Z-axis doesn't explain it then... hrm...


still get the same problem with camera and recognition node both on default settings, with sampling period set same for both

##### Stefania Pedrazzi [Cyberbotics] 10/26/2020 12:49:19
Does the `camera_recognition.wbt` sample simulation work correctly for you?


If yes, this could be a starting point to inspect the issue and find what is differnt in your simulation.

##### Justin Fisher 10/26/2020 12:50:32
Loading it now.  Tis annoying that webots crashes whenever my antivirus scans a new .exe controller


yes that sample does put the boxes in the right places.  I'll see if I can figure out what's different.

##### Stefania Pedrazzi [Cyberbotics] 10/26/2020 12:51:39
That's new. Nobody else reported this issue with the antivirus until now.

##### Justin Fisher 10/26/2020 12:52:43
I googled it back when I was starting out.  It seems like this guy was having the same problem:  [https://support.avg.com/answers?id=9060N000000gW7BQAU](https://support.avg.com/answers?id=9060N000000gW7BQAU)

##### Stefania Pedrazzi [Cyberbotics] 10/26/2020 12:53:20
ok, thank you for the link

##### Justin Fisher 10/26/2020 12:53:23
Fortunately it doesn't hit Python controllers (since they don't compile to .exe probably) and I use Python, so it only affects me when I try to load a C controller, so I hadn't bothered trying to fix


Think I figured it out


I have a scale transform to make my camera appear right, and I think it is also somehow having the effect of transforming the locations of the recognition boxes


Yep, moving the camera outside the scale transform fixed it right up!  I never would have guessed that a scale transform would affect a camera like that!

##### Stefania Pedrazzi [Cyberbotics] 10/26/2020 13:13:42
Thank you for identifying this bug. We will fix it when we will have some time.

##### Justin Fisher 10/26/2020 13:16:18
You might view it as a "feature" rather than a "bug".  Squishing my camera 50% along its major axis squished out the object recognition boxes by that amount too!  I guess you could have squished out the image that much too.

##### Stefania Pedrazzi [Cyberbotics] 10/26/2020 13:17:01
In any case we should at least print a warning in the console in this case.

##### Olivier Michel [Cyberbotics] 10/26/2020 13:17:35
About AVG, can't you tell AVG (in the settings) to not scan binaries in some specific folders?


I personally never use any other anti-virus than the one provided with Windows 10, which is known to be sufficient...

##### Justin Fisher 10/26/2020 13:19:23
I probably could.  Just never got around to it.  It scans the file once, and Webots crashes while waiting for the scan.  But then when you reload Webots it works fine for that controller thereafter.  And I don't load that many C controllers since I use mostly Python.


Incidentally somebody else on discord did complain about this problem too, a few days back.


> Hi cyberbotics team, I am playing with the sample scene for universal robots. I have created a new controller and the code are more of less the same with the provided sample script, for some reason, the webots application seems to just hang there after I try to 'Run' it after new 'Build', I had to force close and restart the application in order to run the simulation properly. Any idea what might be wrong there?

`@Huey`


> `@Justin Fisher` yeah, sounds like it could be my antivirus getting in the way too, although webots has been added to the exception's list. Anyway, Thanks mate!

`@Huey`


Or maybe it was same problem.  Dunno.  At any rate the symptoms were the same.

##### Olivier Michel [Cyberbotics] 10/26/2020 13:23:28
I believe you should not only add Webots to the exception's list, but also your controllers programs...

##### Justin Fisher 10/26/2020 13:47:45
So... another issue with the track... it disappears after awhile.  In the scene tree, i can see its rotation axis has become nan nan nan.  If I manually change its rotation back to a valid number in the scene tree, it reappears.  Any idea why that would happen?


This seems to be triggered by my robot having been on the track.  I can consistently trigger it by barely touching the track with my robot, then stepping away and waiting a little bit, whereas I can let the simulation run indefinitely with the robot off the track or moving elsewhere and it doesn't disappear.



> **Attachment**: [disappearing\_track.mp4](https://cdn.discordapp.com/attachments/565154703139405824/770285436214968350/disappearing_track.mp4)


it disappears at 30 second mark

##### Stefania Pedrazzi [Cyberbotics] 10/26/2020 14:06:26
This is usually a consequence of some instabilities in the world. Does it help increasing/decreasing the mass of the track object?

##### Justin Fisher 10/26/2020 14:10:05
I had used the default mass computed from the default density, but Webots popped up a warning saying this was much more massive than the smallest thing in the simulation (some robot part).  So I manually assigned it a lower mass, 10.  What mass would you suggest?  Also, since it is supposed to be mounted to the world, why does its mass matter?


Increasing its mass to 100 didn't seem to fix it, but increasing to 500 maybe has fixed it -- at any rate it's lasted a lot longer than it did before.  Glad I asked because that fix never would have occurred to me.  Thanks!

##### Stefania Pedrazzi [Cyberbotics] 10/26/2020 14:32:29
> What mass would you suggest?  Also, since it is supposed to be mounted to the world, why does its mass matter?

`@Justin Fisher` any solid object with physics can cause instabilities Especially if it collides with another solid that is much bigger or smaller. This is why usually for these kind of static structures it is recommended to not define the `Physics` node. A big mass, as the one you set, could help turning it in  a sort of static part given that collisions would not generate enough forces to move it.

##### Justin Fisher 10/26/2020 14:34:26
Normally I wouldn't enable physics at all on something that I wanted to be an unmoving part of the environment.  But my understanding is that you have to define the physics node on a track, right?

##### Stefania Pedrazzi [Cyberbotics] 10/26/2020 14:34:36
Yes, exactly

##### Chronoj 10/26/2020 15:12:42
`@Justin Fisher` sorry for interrupting your upper conversation, i just wanted to thank you for your help, your suggestions were too valuable, my programm finally works! Thanks a lot!

##### Justin Fisher 10/26/2020 15:40:59
You're welcome!

##### SeanLuTW 10/27/2020 08:39:53
I wrote  a robot controller that not only manipulated the world but also advertised a  ROS service. I called the service in a bash, and the callback started to process after about four seconds, which is really long. Is there any solution?


Since I used `rospy.spin()` to keep the controller running instead of `robot.step(timestep)`, I set the `synchronization` of the controller to false.

##### David Mansolino [Cyberbotics] 10/27/2020 08:40:51
Hi, are still somehow calling robot.step() in your controller?


How do you know that the callback is called only after 4 seconds? Because you see the effect only after 4 seconds or did you add a print at the start of your callback?

##### SeanLuTW 10/27/2020 08:42:51
Yes, there are four controllers in my world, and for those controllers `synchronization` set to True I used a while loop to call robot.step()


In the first line of callback, I used `rospy.loginfo()` to lookup the wall time

##### David Mansolino [Cyberbotics] 10/27/2020 08:51:10
Ok, but those 4 controllers are not the one communicating with this ros service right?

All your controller should call the step function (even if synchronization is set to False), is it the case?

##### SeanLuTW 10/27/2020 09:03:47
Yes, all controllers called robot.step() somewhere


I'm not sure the function of `step`  and `synchronization` in the robot node

##### David Mansolino [Cyberbotics] 10/27/2020 09:05:49
Ok, in that case it probably means that your controller with the callback is busy doing something else when the service is called, but I can't help you much more without looking at the actual code.


You should probably try simplifying your controller as much as possible to isolate what is causing this delay.

##### SeanLuTW 10/27/2020 09:10:41
Ok, thanks a lot!

##### David Mansolino [Cyberbotics] 10/27/2020 09:10:49
You're welcome, I hope it helps

##### WooMBaT 10/27/2020 09:20:28
Hallo, we are a group thats is using Webots for simulating a ship a hull cleaner 🙂 We were woundering if it is possible to load different hull during run time for automation of our testing ?

##### Darko Lukić [Cyberbotics] 10/27/2020 09:23:55
`@WooMBaT` Hi, you can use Supervisor node to dynamically change a hull of your ship model:

[https://www.cyberbotics.com/doc/reference/supervisor](https://www.cyberbotics.com/doc/reference/supervisor)

##### WooMBaT 10/27/2020 09:30:50
Thank You I will have a look at this 😄

##### ChristopherD 10/27/2020 17:31:03

> **Attachment**: [TimPayneV6-torqueControl-failure2.mp4](https://cdn.discordapp.com/attachments/565154703139405824/770701110675243029/TimPayneV6-torqueControl-failure2.mp4)



%figure
![39ec343f48.png](https://cdn.discordapp.com/attachments/565154703139405824/770701162235166720/39ec343f48.png)
%end


so for our serial chain ball catching robot we have an output for the inverse dynamics, to program the joint torques but when we simulate it in webots it accellerates and doesn't decellerate with retarding torque enough, so it kind of ends up flinging itself to the position


we know that our kinematics is correct - using motor\_set\_position works well, however programming torque is a minefield


do you have any advice why we're not getting what we expect?

##### valeriamsalasp 10/27/2020 18:03:32
Hi all, I am working with an inertial unit but I want to get my degree values from 0 to 360 instead of from -pi to pi, how can I do this?

##### ChristopherD 10/27/2020 18:23:31
> Hi all, I am working with an inertial unit but I want to get my degree values from 0 to 360 instead of from -pi to pi, how can I do this?

`@valeriamsalasp`  not sure if i understand but why not code a function to convert the output rad -> deg. 

`double degrees = radians * 180.0 / M_PI; where M_PI is defined by math.h`

##### valeriamsalasp 10/27/2020 18:31:26
Thank you!

##### aplong 10/28/2020 04:36:35
Hi everyone, I created a chain model like this leaf chain to simulate a pulley system.

When I extend it to a certain length I encounter this warning. 

So, I tried to simplify the shapes using the primitive geometries and scale up the size and reduced basic timestep. But still the same warning is encountered. 

Do you have advice how to fix this warning? Or are there any alternatives for a pulley system?
%figure
![webots_discord.png](https://cdn.discordapp.com/attachments/565154703139405824/770868595844579338/webots_discord.png)
%end

##### David Mansolino [Cyberbotics] 10/28/2020 06:41:01
Hi `@aplong` how many joint do you have in total?


Can you share your world file?

##### Justin Fisher 10/28/2020 06:43:41
If you're using your pulley to lift things, you may be able to simulate it well enough with a slider joint.  You could still use a chain texture on your image of the connector if you want it to look like a chain.

##### David Mansolino [Cyberbotics] 10/28/2020 06:44:12
> do you have any advice why we're not getting what we expect?

`@ChristopherD` maybe to make it decelerate faster, you should increase the friction of the joints, i.e. JointParameters.dampingConstant and JointParameters.staticFriction

##### Justin Fisher 10/28/2020 06:47:02
Is there a way to make a webots conveyer belt (track device) be mounted to the world?  It seems like to get the track to run it needs to have physics enabled, and that seems to then make it mobile and a source for instabilities in the simulation.

##### David Mansolino [Cyberbotics] 10/28/2020 06:48:54
Did you already had a look at the Conveyorbelt PROTO node? [https://www.cyberbotics.com/doc/guide/object-factory#conveyorbelt](https://www.cyberbotics.com/doc/guide/object-factory#conveyorbelt)

The track itself has a Physics node indeed, but not the root node: [https://github.com/cyberbotics/webots/blob/master/projects/objects/factory/conveyors/protos/ConveyorBelt.proto](https://github.com/cyberbotics/webots/blob/master/projects/objects/factory/conveyors/protos/ConveyorBelt.proto)

##### Justin Fisher 10/28/2020 06:50:53
Yes, that's the structure I have:  Robot without physics node containing track with Physics node.


The result is that the track is movable.  E.g. if I pull it upward with the mouse, it falls back down to settle into place.  Probably because it is movable and constantly colliding with its supports, occasionally the simulation becomes unstable, the track's rotation field changes to nan nan nan, and the track disappears.


The place I have it located makes it partly overlap with immobile solids that kind of wedge it into place.  I wonder if that contributes to the instability?  I guess I could make some of those solids be part of the same "robot" where its self-collisions wouldn't matter, but I worry that I'd have to enable physics on those other parts too to keep them attached to the track, and that would end up making an even heavier object resting on the ground, which doesn't seem likely to improve things.

##### David Mansolino [Cyberbotics] 10/28/2020 07:04:02
> The result is that the track is movable.  E.g. if I pull it upward with the mouse, it falls back down to settle into place.  Probably because it is movable and constantly colliding with its supports, occasionally the simulation becomes unstable, the track's rotation field changes to nan nan nan, and the track disappears.

`@Justin Fisher`, I see what you mean, I had similar issues previously, until now I always managed to find a solution to make it stable enough by changing the time step, the CFM, ERP and mass of the track.


> The place I have it located makes it partly overlap with immobile solids that kind of wedge it into place.  I wonder if that contributes to the instability?  I guess I could make some of those solids be part of the same "robot" where its self-collisions wouldn't matter, but I worry that I'd have to enable physics on those other parts too to keep them attached to the track, and that would end up making an even heavier object resting on the ground, which doesn't seem likely to improve things.

`@Justin Fisher` I would indeed try at least quickly to remove these other solid just to check if it improves the stability.

##### Justin Fisher 10/28/2020 07:05:35
Increasing the mass did make it a lot more stable, at the cost of Webots popping up a warning about massive disparties in mass between it and tiny robot-parts, but maybe those warnings don't really matter.  Still it occasionally disappears.

##### David Mansolino [Cyberbotics] 10/28/2020 07:06:33
> Increasing the mass did make it a lot more stable, at the cost of Webots popping up a warning about massive disparties in mass between it and tiny robot-parts, but maybe those warnings don't really matter.  Still it occasionally disappears.

`@Justin Fisher` As long as those two part does not inter in contact, you can probably ignore it indeed.

##### Justin Fisher 10/28/2020 07:08:49
They might enter into contact, if a robot falls on the conveyer.  But since the conveyer usually has no momentum (aside from the simulated movement of its belt) I don't think it shoud ever impart absurd amounts of momentum onto a tiny part, if that's what the warning is about?

##### David Mansolino [Cyberbotics] 10/28/2020 07:10:02
Yes, this is what it is about, in any case if something goes wrong because of this, you will quickly see it (generally causing some explosion of a solid).

##### Justin Fisher 10/28/2020 07:11:02
So what is the ideal way to hold a conveyer up?  To give it a flat bottom resting on a plane, and no overlap with any other immobile solids?


I guess it seems odd that conveyers have to have physics enabled.  For most intents and purposes, (when using the track as a conveyer belt) you just want them to be another immobile part of the environment with special collision properties that provide a sort of friction force in the direction of belt movement -- it doesn't seem like that should have to go hand in hand with making the coneveyer itself be an object with mass that can move and needs to be supported by other things.

##### David Mansolino [Cyberbotics] 10/28/2020 07:26:36
I am not sure (but didn't checked in the code) that ODE (our physics engine) allows to simulate surface velocity (which is used for track simulation) for kinematic solid (i.e. solid without physics).

##### Justin Fisher 10/28/2020 07:30:56
I wonder if using a supervisor to periodically reset the inertia of a conveyer would increase its stability?  It seems like the instability is caused by something touching the conveyer, but takes a while after that (often 30 seconds or so) to lead to the conveyer disappearing, so if there was a way to stop whatever resonation was building up during that time, that could be another fix...

##### David Mansolino [Cyberbotics] 10/28/2020 07:33:22
Yes, it is a good idea to try to reset the physics of the track node from a supervisor controller.

##### Justin Fisher 10/28/2020 07:35:54
Or maybe a high damping setting would have the same effect?  Probably there's no reason not to set damping really high.

##### David Mansolino [Cyberbotics] 10/28/2020 07:39:21
I am not sure about damping indeed, since the motion of the track is probably slow, the effect of damping will be extremely small.

##### Justin Fisher 10/28/2020 07:42:53
I guess I don't know how exactly the instability gradually progresses, but I imagine Webots as somehow trying repeatedly to resolve a collision in a way that ends up overcompensating and making things a bit worse, repeated many times, until things eventually build up to something absurd.  If that's what's happening then damping could help to keep the escalation from happening, assuming velocity is part of the escalation cycle (but maybe it isn't).

##### David Mansolino [Cyberbotics] 10/28/2020 07:49:27
It is possible, but I am not sure it will help, but in any case that shouldn't take to much time so it is probably worth trying anyway

##### Justin Fisher 10/28/2020 07:51:07
will do.  increasing the mass changed the instability from happening predictably every time 30 seconds after robot touched conveyer, to now happening maybe 1 time in 20, which unfortunately makes it harder to know when I've fixed it.

##### Tahir [Moderator] 10/28/2020 09:25:04
Hello everyone,

I am trying to get a URDF model from Webots robot, but unfortunately no success so far. 

I have opened P3AT robot world, changed its controller to ros and called the service get\_urdf


Which resulted in an error



%figure
![20201028_102637.jpg](https://cdn.discordapp.com/attachments/565154703139405824/770941628680503356/20201028_102637.jpg)
%end

##### ChristopherD 10/28/2020 12:08:21
hey whats the difference between` set_available_torque` and `motor_set_torque` - is available torque the max? doesn't webots limit the torque to max regardless

##### David Mansolino [Cyberbotics] 10/28/2020 13:03:56
> hey whats the difference between` set_available_torque` and `motor_set_torque` - is available torque the max? doesn't webots limit the torque to max regardless

`@ChristopherD` `motor_set_torque` apply the torque directly to the motor and discard position/velocity control, but `set_available_torque` defines the maximum torque used to reach the target position/velocity.

##### ChristopherD 10/28/2020 13:10:18
i see, so its just a single parameter that you set for the motor. It will limit the torques when your actuating it via `wb_motor_set_position()`


appreciate the response

##### David Mansolino [Cyberbotics] 10/28/2020 13:10:59
You're welcome

##### ChristopherD 10/28/2020 13:14:34
i'm still experiencing a lot of troubles with our inverseDynamics - the robot appears to just collapse. we've doubled back to use the inverseDynamics code written in the modern robots textbook (if your familiar) to ensure its not our code, but the robot still just can't seem to provide enough torque & not explode


i think if we program it to the waypoint using` motor set position`, and record the `set_available_torque's` we'll be able to trouble shoot what torques are actually required


cheers david

##### David Mansolino [Cyberbotics] 10/28/2020 13:20:24
That sounds good indeed.

##### Darko Lukić [Cyberbotics] 10/28/2020 14:10:03
> Hello everyone,

> I am trying to get a URDF model from Webots robot, but unfortunately no success so far. 

> I have opened P3AT robot world, changed its controller to ros and called the service get\_urdf

Hello `@Tahir`, I tried to reproduce your error but it works fine for me. Can you tell me which version of Webots do you use, which OS and whether you sourced `webots_ros` package before calling `rosservice ...`?

##### Tahir [Moderator] 10/28/2020 14:11:52
R2020b for Webots version

webots\_ros I installed from binaries so installed systemwide


Ubuntu 18.04

ros Melodic


So the error was with genpy update


I got this resolved by upgrading

##### Darko Lukić [Cyberbotics] 10/28/2020 14:23:06
Perfect, I am glad you managed to resolve the error!

##### Götz 10/28/2020 14:26:25
Hi all, looks like I can't get my head around this... so my robot has supervisor enabled and I would like to develop a function to restart the simulation from the beginning. This is what I tried:

```robot = Supervisor()
robot\_node = robot.getSelf
```

and then

```class ResetHandler(tornado.web.RequestHandler):
    def get(self):
        robot.simulationSetMode(Supervisor.SIMULATION_MODE_PAUSE)
        robot.simulationReset()
        robot\_node.restartController()
```

Gives `AttributeError: 'function' object has no attribute 'restartController'`. I tried a couple of things but am obviously missing something.

##### David Mansolino [Cyberbotics] 10/28/2020 14:28:01
Hi `@Götz`,

`robot_node = robot.getSelf` => `robot_node = robot.getSelf()`

##### Götz 10/28/2020 14:28:34
Argh...

##### ChristopherD 10/28/2020 14:29:50
hey, i tried googling this. How can i set the background to a blank white canvas / have no background?

##### Götz 10/28/2020 14:33:41
> Hi `@Götz`,

> `robot_node = robot.getSelf` => `robot_node = robot.getSelf()`

`@David Mansolino` 

Thanks... isn't there a "blush" emoji? 😉


Hm, do I actually need `robot.simulationSetMode(Supervisor.SIMULATION_MODE_PAUSE)`?


Works only when I comment the line out...

##### David Mansolino [Cyberbotics] 10/28/2020 14:35:13
No, unless you want to pause after restarting the simulation

##### Götz 10/28/2020 14:35:50
Ah okay, no. it's actually an API just waiting for calls...

##### Pedro Gonçalves 10/28/2020 15:03:35
HI i am trying to implement a differential drive 4 wheeled robot in webots. I used the tutorial available online to create the robot adding a gyro and accelorometer sensor. I am using a extern controller using Matlab to send the torque inputs to the motors on the wheels of the robot and to check sensor information. So far if i give the same torque  in both sides of the robot it will move forward as expected with a contant acceleration but when i try to make it rotate around its own axis by having oppoite torque on which side the robot rotates but the angular velocity values are not increasing linearly how they are suposed to. Can you give me some help? Thank you


i can post the pictures of the angular velocity if it is allowed and you think it can help

##### David Mansolino [Cyberbotics] 10/28/2020 15:10:47
> i can post the pictures of the angular velocity if it is allowed and you think it can help

`@Pedro Gonçalves` sure it is allowed.


My first guess is that there is some isues with friction between tires and ground, you might need to configure the contact properties between tire and ground: [https://www.cyberbotics.com/doc/reference/contactproperties](https://www.cyberbotics.com/doc/reference/contactproperties)

##### Pedro Gonçalves 10/28/2020 15:13:09
i defined the contact properties with a 0.8 coloumbfriction coefficient but maybe i need to use assymetric friction.

##### David Mansolino [Cyberbotics] 10/28/2020 15:14:06
Exactly, that would indeed be my first guess, you can simply to this by adding a second coloumbfriction coefficient.

##### Pedro Gonçalves 10/28/2020 15:14:50

%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/771029215524421662/unknown.png)
%end


Can you please explain better how the assymetric friction works? For what i understand each value in coloumbfriction specifies the friction in one direction according to the objects used but how does it handle the friction between this 2 directions?

##### David Mansolino [Cyberbotics] 10/28/2020 15:21:42
You probably want to use 3 values:

> With three values, the first solid (corresponding to material1) uses asymmetric coefficients (first two values) and the other solid (corresponding to material2) uses a symmetric coefficient (last value)

Which means asymetric friction for the wheels and symetric part for the ground (very low for ground).


If you need the exact details, here is how it is implemented in Webots core: [https://github.com/cyberbotics/webots/blob/d019ad4906e44a34a94fbea4e110d71af7172c07/src/webots/engine/WbSimulationCluster.cpp#L282-L294](https://github.com/cyberbotics/webots/blob/d019ad4906e44a34a94fbea4e110d71af7172c07/src/webots/engine/WbSimulationCluster.cpp#L282-L294)

##### Pedro Gonçalves 10/28/2020 15:24:15
Ok i will give it a try. Thank you

##### David Mansolino [Cyberbotics] 10/28/2020 15:25:09
You're welcome

##### GrundlePepper 10/28/2020 16:54:27
Hi, im currently having an issue initialising a bump touch sensor. The attached image contains my current hierarchy, my function to enable it and the error i get when i run it. Obviously i've got something wrong, but i cant figure out what to change to make it work
%figure
![MATLAB_WLqh43FcXO.png](https://cdn.discordapp.com/attachments/565154703139405824/771054287820029952/MATLAB_WLqh43FcXO.png)
%end

##### Olivier Michel [Cyberbotics] 10/28/2020 16:55:58
You should not pass a string to this function, but a handler to the touch sensor device.


You will get this handler from the `wb_robot_get_device()` function.

##### GrundlePepper 10/28/2020 17:04:01
I now receive this warning when using either the name i assigned to the touch sensor or its DEF  

Warning: "EEGripper\_touch\_sensor" device not found.

Error: wb\_touch\_sensor\_enable(): invalid device tag.



`touchSensor = wb\_robot\_get\_device('EEGripper\_touch\_sensor');

wb\_touch\_sensor\_enable(touchSensor, TIME\_STEP);`

##### Olivier Michel [Cyberbotics] 10/28/2020 17:05:38
Normally, this should work...


Not with the DEF, but with the name field.

##### hero 10/29/2020 06:43:00
.


How can I obtain (x,y,z) 3d force and torque information of the foot motors of darwin robot. I use getmotor in python and obtain one dimension . Is it possible for 3d? Is it of one dimension

##### David Mansolino [Cyberbotics] 10/29/2020 06:58:38
You should add touchsensors under the feet of the robot: [https://cyberbotics.com/doc/reference/touchsensor](https://cyberbotics.com/doc/reference/touchsensor)

##### Luiz Felipe 10/29/2020 07:07:11
I am trying to run the headless server mode in the webots docker image with the command 'xvfb-run webots --stream --batch --mode=fast /world.wbt'... when i check my 'htop' command i see multiple instances of webots like:



%figure
![Screenshot_from_2020-10-29_16-07-33.png](https://cdn.discordapp.com/attachments/565154703139405824/771269244896935946/Screenshot_from_2020-10-29_16-07-33.png)
%end


There is multiple processes related to webots in this case... is this the expected behavior?


I am just starting one container and running the xvfb-run webots command inside the container....

##### Olivier Michel [Cyberbotics] 10/29/2020 07:10:25
No, there should be only one `webots-bin` instance if you only started one instance of Webots.

##### Luiz Felipe 10/29/2020 07:13:56
Yes... it is strange because it is happening even for sample world files


Ah, I understood...


It happens when webots-bin is using multiple cores...

##### hero 10/29/2020 07:20:01
> You should add touchsensors under the feet of the robot: [https://cyberbotics.com/doc/reference/touchsensor](https://cyberbotics.com/doc/reference/touchsensor)

`@David Mansolino` I will use the code for real robot. I think in that case  touch sensor doesnot work. is it correct

##### David Mansolino [Cyberbotics] 10/29/2020 07:30:19
I know some other users already used touchesensors under the feet of the darwin-op robot to simulate its FSR sensors, so for sure this is feasible.

##### hero 10/29/2020 07:31:50
Did they use on real robot?  Did they transfer ro real the simulation code?

##### David Mansolino [Cyberbotics] 10/29/2020 07:38:47
I think some yes, but this requires to extend yourself the transfer feature.

##### hero 10/29/2020 07:41:47
For extension, Should I focus on only the files in Webots? or Should I change the files in the robot?

##### David Mansolino [Cyberbotics] 10/29/2020 07:42:32
Only in Webots is maybe sufficient as Webots does automatically upload them on the robot when transfering the controller to the robot.

##### hero 10/29/2020 07:44:36
final question. which folder/files in webots should I focus on ?

##### David Mansolino [Cyberbotics] 10/29/2020 07:48:51
Here are the files handeling the transfer functionality: [https://github.com/cyberbotics/webots/tree/master/projects/robots/robotis/darwin-op/transfer](https://github.com/cyberbotics/webots/tree/master/projects/robots/robotis/darwin-op/transfer)

##### hero 10/29/2020 07:51:23
Good. I will try thansk

##### eeeloisee 10/29/2020 11:57:57
Hi all, I am hoping to ask if there is a way to simulate a robot with a nozzle or sprayer system and/or to set it to have a changing mass over time? The changing mass part would be the primary goal for my simulation though. Thanks!

##### David Mansolino [Cyberbotics] 10/29/2020 12:01:04
Hi `@eeeloisee` 

About the sprayer system, you might check the PEN device: [https://www.cyberbotics.com/doc/reference/pen](https://www.cyberbotics.com/doc/reference/pen)

About the changing mass, yes this is for sure possible, but you will need to use the Supervisor programming (simplest and most efficient solution) to change the mass field of your robot: [https://www.cyberbotics.com/doc/reference/supervisor](https://www.cyberbotics.com/doc/reference/supervisor)

##### eeeloisee 10/29/2020 12:07:12
`@David Mansolino` Hi! Thank you very much! I'll look into these.

I haven't used supervisor programming yet, but briefly looking into the link you sent, would changing the mass field be tied to one of the functions? I'm probably missing something, but I currently only see wb\_supervisor\_node\_get\_center\_of\_mass as a mass related function.

##### David Mansolino [Cyberbotics] 10/29/2020 12:10:27
You're welcome.

Yes, basically, you have to get the 'Physics' node, and its mass field and change its value.

You should probably have a look at this sample available in Webots where the Supervisor API is used to change the location of a Light (which is very similar to what you want to do): [https://www.cyberbotics.com/doc/guide/samples-devices#supervisor-wbt](https://www.cyberbotics.com/doc/guide/samples-devices#supervisor-wbt)

##### Justin Fisher 10/29/2020 12:12:09
So the function you'll be looking for is probably something like setSFFloat, used to set a new value for a mass field

##### eeeloisee 10/29/2020 12:16:21
`@David Mansolino` I see, that makes sense. I'll look into this sample. Thanks again!

`@Justin Fisher` Alrighty, I'll keep that in mind. Thank you as well!

##### Pedro Gonçalves 10/29/2020 13:38:35
Hi thank you for your tip about using assymetric friction the angular velocity of the robot is now working as intended for the most part. The only problem i still get is that the angular acceleration tends to have an oscilatory behavior and tends to decrease without me changing the torques on the motors for bigger values of angular velocity. I got better results by increasing the CFM in the contact properties. Do you know why this is the case or what others changes i can make to decrease this behavior. Thank you

##### David Mansolino [Cyberbotics] 10/29/2020 13:41:37
Hi again, thank you for the feedback! Unfortunately, I can't help you much more without seeing the simulation, would you agree sharing it?

If yes, please open an issue here (including the simulation) :

[https://github.com/cyberbotics/webots/issues/new?template=bug\_report.md](https://github.com/cyberbotics/webots/issues/new?template=bug_report.md)

##### Pedro Gonçalves 10/29/2020 13:42:31
Yes i dont mind at all i will send right away. Thank you

##### David Mansolino [Cyberbotics] 10/29/2020 13:50:37
You're welcome


We juste received your issue, we will check it and let you know as soon as we find something, directly on the issue

##### Pedro Gonçalves 10/29/2020 14:16:46
Thank you very much

##### eeeloisee 10/30/2020 04:04:37
`@David Mansolino` or `@Justin Fisher` Hi! I've been looking into what you both suggested for the changing mass over time with supervisor controller. But I'm having some trouble with understanding how to call the physics node within the robot node. Would I have to use "wb\_supervisor\_field\_get\_mf\_node" twice or something? Thanks!

##### Justin Fisher 10/30/2020 04:13:44
`@eeeloisee`  Usually it helps to give a unique DEF name to the node containing the field you want a supervisor to change, so you can look that node up directly rather than needing to traverse the scene tree to get to it.  So, e.g., if you give your Physics node the DEF name TANK\_PHYSICS\_NODE, then you can use the supervisor get\_from\_DEF function to get that physics node, the get\_field function to get its mass field, and the set\_SF\_float function to write the new value to that field.  



The exact names of those functions will depend on the language you're using.  E.g., in Python I would use something like the following.



```python
tank_physics_node = robot.getFromDef("TANK_PHYSICS_NODE")
mass_field = tank_physics_node.getField("mass")
mass_field.setSFFloat( 7.0 )
```

You'd get a slight speed increase by putting the first two of those commands up outside the main loop of your program, so that it won't have to keep searching the scene tree for the node and field you want during the main loop.


[I also can't resist making the shameless plug that I've been working on a Proxy Scene Tree utility to streamline supervisor operations Python, so the way I'd *actually* do that in Python is with something much more like:

```python
ROOT.TANK_PHYSICS_NODE.mass = 7.0
```

At some point I'll likely make that Python utility available to the Webots community.  Sadly, if you're using a less flexible language than Python, you'll likely be stuck doing this stuff the longer way.]

##### eeeloisee 10/30/2020 04:31:16
`@Justin Fisher` That makes sense!! Sorry, I didn't realize it was as simple as organizing it this way. And thanks for the example - these really help! It looks like I will be doing it the long way since I'm just using C haha

##### culurciello 10/30/2020 17:14:20
How can you move or rotate a bounding object?

##### Justin Fisher 10/30/2020 17:14:39
put it inside a transform node

##### culurciello 10/30/2020 17:15:14
thanks a lot,

##### Justin Fisher 10/30/2020 17:15:23
(by which I mean, making the boundingObject field contain a transform node which itself contains the shape(s) that you needed to move/rotate)

##### culurciello 10/30/2020 17:20:37
Thank you -

##### Justin Fisher 10/30/2020 18:06:18
Any idea why two of my students on Macs often (but not always) have everything onscreen except the simulation window show up as all black?


They also have an issue where the scene tree window won't scroll all the way down.  It looks like it miscomputes what the height of the window should be.

##### dimple.bhuta 10/31/2020 05:08:13
Hello, 

I am working on path planning maneuver and generating sample points for a U-turn by fitting a curve between the entry exit points on the junction. I wanted to enquire what curvature values for the fitted curve is feasible in webots. I went through the documentation,  for the wheels  curvatureFactor   of  0.35 is specified, and for curvedroadsegment its set to 10. However, I wanted to ask what is the limit set for roads generated by your code.

##### Justin Fisher 10/31/2020 14:22:58
`@dimple.bhuta` The people who are most likely to know an answer to your question seem to be around mostly during European work hours.  Not having worked with the roads at all, my first inclination would be just to try different values and see what works.


And a question of my own:  anybody have a guess as to why Webots has started crashing about half the time when I hit the reset button?

## November


On the bright side, the crashing seemed to resolve itself with a computer restart.  Yay.

##### Darko Lukić [Cyberbotics] 11/01/2020 14:34:42
Hello `@dimple.bhuta`, are you trying to make a car follow a curvature?



> for the wheels  curvatureFactor of  0.35

`curvatureFactor` can be a value in range 0-1 and it only affects visual appearance of the wheel:

[https://github.com/cyberbotics/webots/blob/master/projects/vehicles/protos/abstract/VehicleWheel.proto#L83](https://github.com/cyberbotics/webots/blob/master/projects/vehicles/protos/abstract/VehicleWheel.proto#L83)



> curvedroadsegment its set to 10

`CurvedRoadSegment` is a model (PROTO) of the curved road and 10 is a default value for `curvatureRadius` parameter which represent a radius in meters:

[https://github.com/cyberbotics/webots/blob/746a77a2d6c3c2425cff4946478512539db34034/projects/objects/road/protos/CurvedRoadSegment.proto#L52](https://github.com/cyberbotics/webots/blob/746a77a2d6c3c2425cff4946478512539db34034/projects/objects/road/protos/CurvedRoadSegment.proto#L52)

##### Isha 11/02/2020 04:09:56
Hello! 



Is there any way we can modify the look up table of distance sensor on epuck model in webots?



The problem is, when the robot is at some distance from an object, the values obtained are between 60&70, but when it touches the object, it gives some abrupt values like 200, 500, 1000

##### Justin Fisher 11/02/2020 05:53:36
If you right-click on the epuck in the scene tree, you can convert-to-base-nodes, making it be just built out of ordinary nodes which you can alter as you please.  Alternatively you could copy the proto file for the epuck and edit your copy to make the lookup table be whatever you like.

##### ClBaze 11/02/2020 14:59:47
Hello! I recently switched from R2020b to a newer version. The speed of my simulation went from 0.28x to about 0.15x.


I used `git bisect` to find out which commit was  causing this. It seems to be this one:  [https://github.com/cyberbotics/webots/commit/21dcb0dd8545cb7530a7f97933eceefb99f6819d](https://github.com/cyberbotics/webots/commit/21dcb0dd8545cb7530a7f97933eceefb99f6819d)


Should I open an issue ?

##### Stefania Pedrazzi [Cyberbotics] 11/02/2020 15:04:25
`@ClBaze` yes, please open an issue.

You should also provide a simple simulation that we can execute on our machine without needing to install additional dependencies.

##### ClBaze 11/02/2020 15:06:08
Ok thank you


`@Stefania Pedrazzi` Sorry it took a bit of time, here is the issue: [https://github.com/cyberbotics/webots/issues/2426](https://github.com/cyberbotics/webots/issues/2426)

##### Stefania Pedrazzi [Cyberbotics] 11/02/2020 17:04:47
Thank you. We will look at this issue as soon as possible.

I quickly just opened the file and the Background textures are missing but this should not be an issue and I assume that we will get the same behavior with any background.

##### ClBaze 11/02/2020 17:09:24
Oops indeed, it has the same behavior (I've just tested it)

##### dimple.bhuta 11/02/2020 17:30:31
`@Darko Lukić` yes sort of I am implementing trajectory tracking. One part of it is path generation. I am using cubic spline/ dubins curve for generation of path between way points and sampling points one meter apart. I wanted to inquire what is max permissible curvature value that a robot/vehicle can take without an error/ breaking of your webots code.


I could only find the above mentioned documentation on curvatures. What I intend to find is max permissible curvature for ego vehicle.

##### Darko Lukić [Cyberbotics] 11/02/2020 17:46:33
`@dimple.bhuta` You cannot break Webots code. Maybe you are interested in `maxSteeringAngle` and `minSteeringAngle` parameters which are by default 1 and -1 respectively. Those two parameters define the maximum and minimum steering angle of the front wheels.

##### derek 11/03/2020 01:54:36
hello,does webots support multi-select items in the left tree?

##### DrakerDG 11/03/2020 02:54:12
I have not been able to select several objects of the same level 🤔

##### Chinwei.Chang 11/03/2020 05:19:17
Is it possible to run webots with html5 recording and duration condition (maybe 24hrs in simulation) using command

##### Olivier Michel [Cyberbotics] 11/03/2020 06:51:37
`@derek` and `@DrakerDG`: this is unfortunately not possible.


`@Chinwei.Chang`: yes, you can do it from a supervisor program, see [https://www.cyberbotics.com/doc/reference/supervisor#wb\_supervisor\_animation\_start\_recording](https://www.cyberbotics.com/doc/reference/supervisor#wb_supervisor_animation_start_recording)

##### Chinwei.Chang 11/03/2020 08:11:55
`@Olivier Michel` it works, thx!

There is still a question, is it possible to specify webots to run for a period of time, and then the process close itself

##### Olivier Michel [Cyberbotics] 11/03/2020 08:13:09
Sure, you can use this function: [https://www.cyberbotics.com/doc/reference/supervisor#wb\_supervisor\_simulation\_quit](https://www.cyberbotics.com/doc/reference/supervisor#wb_supervisor_simulation_quit)

##### Chinwei.Chang 11/03/2020 08:19:17
`@Olivier Michel` Thank you! This helped me a lot

##### Weebo 11/03/2020 12:18:08
Hello everyone. I need my students to slightly modify the geometry of the already existent e-puck robot within Webots. I was wondering how would be the easiest way to do this, my thoughts were to "unprototize" the model and add/modify the geometry within the Webots GUI, but I'm open to more ideas. The main goal is to add two small appendices in the front of the robot that would allow it to push objects around

##### Olivier Michel [Cyberbotics] 11/03/2020 12:35:53
Yes, that seems to be a possible approach. Another approach is to make a copy of the E-puck.proto file in your local project in the protos folder and rename it to MyE-Puck.proto, then you will have to edit the content of this file with a text editor, change the name to MyE-Puck and add the needed geometry extensions.

##### Weebo 11/03/2020 12:37:45
Agree, although that approach may seem a bit more complex since they'll have to deal with understanding how the geometry is being expressed in the mess of coordinates inside the PROTO file. Or is there any way to translate the text inside the geometry fields to a 3D model that can be imported (and modified) inside a CAD editor? And later translated again to text.

##### Olivier Michel [Cyberbotics] 11/03/2020 12:40:14
Yes, you can add a Mesh node ([https://cyberbotics.com/doc/reference/mesh](https://cyberbotics.com/doc/reference/mesh)) inside the modified E-puck robot that will refer to a 3D model file that you can edit with any 3D editor (like Blender or other software able to save in one of the supported 3D format).

##### Weebo 11/03/2020 12:40:32
Thanks a lot!

##### ChristopherD 11/03/2020 14:07:58

> **Attachment**: [TimPayneV9-gravityTest-fail3.mp4](https://cdn.discordapp.com/attachments/565154703139405824/773186717099753502/TimPayneV9-gravityTest-fail3.mp4)



> **Attachment**: [TimPayneV9-gravityTest-fail4.mp4](https://cdn.discordapp.com/attachments/565154703139405824/773186717955129364/TimPayneV9-gravityTest-fail4.mp4)



> **Attachment**: [TimPayneV9-gravityTest-fail2.mp4](https://cdn.discordapp.com/attachments/565154703139405824/773186719440699402/TimPayneV9-gravityTest-fail2.mp4)


hey there. I'm caught in a funk, I had a simple gravity/collapse test working before but now its not working anymore. All that has changed is that I'd been using my motors to control position - so it was changing my matlab script not webots.


currently: if joint positions are 0, the robot acts like a stiff rod like in fail4. If the joint positions are initially offset they just behave strangely. I also think that the PID is affecting its behaviour despite giving motors no command?


my aim is to have an appropriate gravity test, then apply a set torque to each joint to make it hold a static - initial - pose like it is when its in that shoulder like orientation


Hierarchy: Robot (physics = null) -> link 0 (physics = null) -> all other joints have physics, COM & mass

##### dimple.bhuta 11/03/2020 16:14:59
`@Darko Lukić`  Thank you

##### GeoCSBI 11/03/2020 16:55:47
Hey everyone, I am trying to implement an obstacle avoidance algorithm and I am playing around with the Pedestrian controller. I know that this may be trivial, but I can't find how to dynamically append waypoints to the initial trajectory while maintaining a smooth transition from one point to another. Any suggestions?

##### SeanLuTW 11/04/2020 01:46:03
My world crashed immediately after webots was launched. I used `> gdb $webots_home/bin/webots-bin` to trace the problem, but it shown it can't find qt-related libraries (`5.9` is installed, but it required `5.15`).   So why I can launch it properly with command `> webots`?
%figure
![Screenshot_from_2020-11-04_09-00-40.png](https://cdn.discordapp.com/attachments/565154703139405824/773362395048837120/Screenshot_from_2020-11-04_09-00-40.png)
%end



%figure
![Screenshot_from_2020-11-04_09-45-38.png](https://cdn.discordapp.com/attachments/565154703139405824/773362397578526730/Screenshot_from_2020-11-04_09-45-38.png)
%end


I found that those not found libraries are all located in `$webots_home/lib/webots`, after adding this directory into my `LD_LIBRARY_PATH`, I can run webots with gdb.


The crash is due to SIGSEGV thrown by `doActive` in qt library, what may cause the problem?

##### Olivier Michel [Cyberbotics] 11/04/2020 07:07:04
No idea... An other approach to try to debug the problem is to try to simplify your world file until it doesn't crash any more. This will give you interesting clues on where does the problem come from.


By simplifying the world file, you can start by setting the robot controllers to void. If this is not enough to prevent the crash, try to remove objects from the world one-by-one to find the culprit.

##### SeanLuTW 11/04/2020 07:20:33
I noticed that the built-in PROTO, `WoodenBox` and `OilBarrel` are default without physic node. In my initialization, I randomly selected several objects,  put them above a table and start free fall. Not sure if the problem came from one of the two floating in the air. After adding physic node into them, the problem solved 😆

##### Stefania Pedrazzi [Cyberbotics] 11/04/2020 07:28:40
`@GeoCSBI` with the provided pestrian controller the roation to the next waypoint is immediate. If you want to program a smooth rotation then you could compute the required rotation angle and split it in small steps to be applied by the supervisor while moving the object forward.

##### Olivier Michel [Cyberbotics] 11/04/2020 07:29:56
`@SeanLuTW`: that's odd. If you can share a simple world file exhibiting the crash, that would help us better understanding the issue.

##### Stefania Pedrazzi [Cyberbotics] 11/04/2020 07:33:13
> currently: if joint positions are 0, the robot acts like a stiff rod like in fail4. If the joint positions are initially offset they just behave strangely. I also think that the PID is affecting its behaviour despite giving motors no command?

`@ChristopherD` How did you the set initial position offset? Saving the world from Webots or simply changing the joint position value in the world file?

Note that to correctly offset the initial joint position it is not enough to change the joint position, but also the `endPoint` Solid translation and rotation should match the new joint position.

##### SeanLuTW 11/04/2020 07:49:37
`@Olivier Michel` Here is my world (named `seg_fault.wbt`). I noticed that it would segfault if the wooden box or oil barrel is selected. It is greatly thanks if you can help me find the problem
> **Attachment**: [my\_project.zip](https://cdn.discordapp.com/attachments/565154703139405824/773453888845381672/my_project.zip)

##### Olivier Michel [Cyberbotics] 11/04/2020 07:54:27
Well, it doesn't crash for me even after selecting the wooden box and oil barrel. I tested on Windows 10 with Webots R2020b revision 1.

##### SeanLuTW 11/04/2020 08:07:45
My environment is Ubuntu 18.04 with R2020b

> `@Olivier Michel` Here is my world (named `seg_fault.wbt`). I noticed that it would segfault if the wooden box or oil barrel is selected. It is greatly thanks if you can help me find the problem

`@SeanLuTW`

##### Olivier Michel [Cyberbotics] 11/04/2020 08:09:07
May I ask you to upgrade to R2020b revision 1? It may fix the problem.

##### SeanLuTW 11/04/2020 09:17:03
I found that I am using revision 1 too.
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/773475894014378014/unknown.png)
%end

##### Olivier Michel [Cyberbotics] 11/04/2020 09:23:04
All right. Then, can you try to simply your world file step-by-step as much as possible until it doesn't crash any more, as I suggested earlier?

##### GeoCSBI 11/04/2020 11:02:16
`@Stefania Pedrazzi` Thank you for your answer! The main problem I am facing is not with rotation but with translation. When I append a waypoint to the trajectory, instead of "turning" and going there it jumps along the x axis to the respected x coordinated of the appended point.

##### Stefania Pedrazzi [Cyberbotics] 11/04/2020 11:06:48
`@GeoCSBI` could you maybe post your waypoints? because I cannot reproduce it. If I add a new waypoint to the `--trajectory=<waypoints>` argument in the `controllerArgs` it works properly.

##### GeoCSBI 11/04/2020 11:29:42
`@Stefania Pedrazzi` I am not facing the problem during the waypoint initialization. I set an initial trajectory as --trajectory=0 -7.07, 0 10 and it runs.



During the simulation I am updating this list, with intermediate waypoints if some criteria are met by appending a new way point like this: 



self.waypoints.append([])

self.waypoints[-1].append(self.waypoints[-2][0])

self.waypoints[-1].append(self.waypoints[-2][1])



self.waypoints[-2][0] = new\_x

self.waypoints[-2][1] = new\_z



I also re-initialize number\_of\_waypoints and waypoints\_distance accordingly after the new waypoint is appended. The behaviour I get is that the agent jumps along the x axis instead of walking there. Is there a more correct way to do something like this? Thank you again for your time!

##### Stefania Pedrazzi [Cyberbotics] 11/04/2020 11:57:50
It seems fine to modify the waypoint lists dynamically as you are doing, but then you have to make sure that every structures related and computed during the initialization is updated as well. For example you should at least also update the `self.number_of_waypoints` and `self.waypoints_distance` list ([https://github.com/cyberbotics/webots/blob/master/projects/humans/pedestrian/controllers/pedestrian/pedestrian.py#L91-L99](https://github.com/cyberbotics/webots/blob/master/projects/humans/pedestrian/controllers/pedestrian/pedestrian.py#L91-L99)).

##### hero 11/04/2020 12:21:48
Hi, I have mavic pro.  when I write its code in webots, can I transfer it to the mavic?  Is it possible


Thanks

##### Stefania Pedrazzi [Cyberbotics] 11/04/2020 13:11:16
`@hero` There is no default library to transfer Webots code to the mavic quadrotor. 

Here you can find instructions to implement your transfer system:

[https://www.cyberbotics.com/doc/guide/transfer-to-your-own-robot](https://www.cyberbotics.com/doc/guide/transfer-to-your-own-robot)

##### hero 11/04/2020 13:38:41
Thanks

##### waleed 11/04/2020 15:11:42
Hi So i am new to this webots platform -- my main task is to achieve control of the dron using skeleton gesture from kinect sensor


So will anyone be able to help on how can I send commands to the drone in webots


is there any specific libraries which can be used to overcome this problem


I have to perform simulation in webots so that it saves cost and time to purchase a real drone

##### Darko Lukić [Cyberbotics] 11/04/2020 15:21:59
Hello `@waleed`, you can use Mavic PRO that is already modeled in Webots:

[https://www.cyberbotics.com/doc/guide/mavic-2-pro](https://www.cyberbotics.com/doc/guide/mavic-2-pro)



To control it using the Kinect sensor, you can edit the default controller of the Mavic PRO drone:

[https://github.com/cyberbotics/webots/blob/master/projects/robots/dji/mavic/controllers/mavic2pro/mavic2pro.c](https://github.com/cyberbotics/webots/blob/master/projects/robots/dji/mavic/controllers/mavic2pro/mavic2pro.c)



You can use your Kinect sensor to change `pitch_disturbance`, `yaw_disturbance` and `roll_disturbance`:

[https://github.com/cyberbotics/webots/blob/320ec05f32b014f0ce8d8a4ee37a6f82cbf8ab1b/projects/robots/dji/mavic/controllers/mavic2pro/mavic2pro.c#L133](https://github.com/cyberbotics/webots/blob/320ec05f32b014f0ce8d8a4ee37a6f82cbf8ab1b/projects/robots/dji/mavic/controllers/mavic2pro/mavic2pro.c#L133)

##### ChristopherD 11/04/2020 15:25:06
> `@ChristopherD` How did you the set initial position offset? Saving the world from Webots or simply changing the joint position value in the world file?

> Note that to correctly offset the initial joint position it is not enough to change the joint position, but also the `endPoint` Solid translation and rotation should match the new joint position.

`@Stefania Pedrazzi`  thanks stef, i was changing the position parameter - wasn't touch 'endPoint' or others so maybe i'll try that. My friend had a version which was working fine so we just updated to his


also, how do i set an objects position in matlab? I'm a little confused with the below code in c++

`obj_pos.setSFVec3f(self.gripper.getPosition())`

what i'm trying to do is make a ball follow the robot arm

##### waleed 11/04/2020 15:33:32
thank you so much `@Darko Lukić`

##### Stefania Pedrazzi [Cyberbotics] 11/04/2020 15:50:04
> also, how do i set an objects position in matlab? I'm a little confused with the below code in c++

> `obj_pos.setSFVec3f(self.gripper.getPosition())`

> what i'm trying to do is make a ball follow the robot arm

`@ChristopherD` Matlab code is very similar to C code. I don't have Matlab to test, but should be:

```
obj_pos = <use Supervisor functions to get the translation field of object node>
gripper_node = <use Supervisor function(s) to get the gripper node>
gripper_position = wb_supervisor_node_get_position(gripper_node)
wb_supervisor_field_set_sf_vec3f(obj_pos, gripper_position)
```

##### GrundlePepper 11/04/2020 16:06:36
Is there a way to export matrices to a text file?

Im trying to extract joint angles, velocities, torques etc. from our webots script using matlab

##### Olivier Michel [Cyberbotics] 11/04/2020 16:09:08
Yes, from the supervisor you can retrieve positions and orientation of objects: [https://www.cyberbotics.com/doc/reference/supervisor#wb\_supervisor\_node\_get\_orientation](https://www.cyberbotics.com/doc/reference/supervisor#wb_supervisor_node_get_orientation)

##### GrundlePepper 11/04/2020 16:12:49
I mean strictly for exporting out of webots so that we can create graphs and what not through, post simulation


and analyse the data in a text file


or excel file

##### Olivier Michel [Cyberbotics] 11/04/2020 16:14:22
You will have to write a supervisor controller that performs this export to whatever format you need.

##### ChristopherD 11/04/2020 16:17:05
hey oliver


i understand what you mean, but i can't see how to do this on: [https://www.cyberbotics.com/doc/reference/supervisor?tab-language=matlab](https://www.cyberbotics.com/doc/reference/supervisor?tab-language=matlab)


i can see `wb_supervisor_export_image` but am still having trouble finding the bit that exports data.

##### Olivier Michel [Cyberbotics] 11/04/2020 16:23:17
Search for `wb_supervisor_node_get_orientation`. This doesn't export data, but retrieve the orientation of a node. You will have to write it into a file yourself.

##### DanyP 11/04/2020 18:03:25
Good evening,

In the context of a legged wheelchair simulation project, linear actuation method is involved for inducing joints rotation. In particular linear actuators with self-locking ability are used to prevent sudden backward movement in case of actuation overload.

My goal is to implement this ability on Webots. Is there a (preferably easy) way to do this ?

Thank you

##### waleed 11/04/2020 21:28:02
Hi so I have been coding in C# for my kinect sensor and I wanted to know if it possible to use that in controlling the quadcopter in webots


Using C#

##### DrVoodoo [Moderator] 11/04/2020 21:43:42
`@waleed` depends on how many of the kinect features you need. the depth image data can be simulated using a rangefinder device, assuming you mean the kinect v1 there is an existing model for it [https://www.cyberbotics.com/doc/guide/range-finder-sensors#microsoft-kinect](https://www.cyberbotics.com/doc/guide/range-finder-sensors#microsoft-kinect)


the visual data can be simulated using a camera device,


microphones would need additional work

##### waleed 11/04/2020 21:45:24
Hes i am using kinect v1


So i am using a hardware device for kinect v1


And the drone will be on webots software


So will that work out then?

##### SeanLuTW 11/05/2020 01:51:49
Is it possible to check if a solid is 'entirely' within a range? I know I can call `wb_supervisor_node_get_position` to get the position of specific node, but it only report the position of the origin.

##### GaGa 11/05/2020 02:05:20
So I'm stuck somewhere, I've created a robot like a vintage vehicle now if I try to create a controller am getting something as directories cannot be created and do I have to add physics for jus support bodies too?


The chassis as follows
%figure
![20201105_073558.jpg](https://cdn.discordapp.com/attachments/565154703139405824/773729866754424852/20201105_073558.jpg)
%end


What all boudning objects I have to give and why am not able to create a controller for it

##### SeanLuTW 11/05/2020 05:14:37
I want to use `Connector` to simulate a suction cup sucking objects. The type of the suction cup should be active, right?  And, for example, I have two spheres to be sucked, one with radius 0.1 and the other with 0.01. I set the type of two spheres to passive,  then I should set the `distanceTolerance` of the suction cup to larger radius, i.e., 0.1, so that both spheres can be sucked by the cup, is that right?

##### Stefania Pedrazzi [Cyberbotics] 11/05/2020 07:14:55
> So I'm stuck somewhere, I've created a robot like a vintage vehicle now if I try to create a controller am getting something as directories cannot be created and do I have to add physics for jus support bodies too?

`@GaGa` You should make sure to have write access to the Webots projects folder containing the world file. Otherwise you won't be able to create a controller.

Then, if you want to use wheel motors to move your vehicle, yes you need to add the physics otherwise it won't move.


> Is it possible to check if a solid is 'entirely' within a range? I know I can call `wb_supervisor_node_get_position` to get the position of specific node, but it only report the position of the origin.

`@SeanLuTW` dependending on the application you may want to use different solutions:

1. there is no built-in method to get the size of the object, but if it has a simple `Solid.boundingObject` structure you retrive the size from this field using the Supervisor API

2. you could use devices, like DistanceSensors, Camera (with for example Recognition functionality) or Radar, and extract the size and if the object is within a range from the device measurements


> I want to use `Connector` to simulate a suction cup sucking objects. The type of the suction cup should be active, right?  And, for example, I have two spheres to be sucked, one with radius 0.1 and the other with 0.01. I set the type of two spheres to passive,  then I should set the `distanceTolerance` of the suction cup to larger radius, i.e., 0.1, so that both spheres can be sucked by the cup, is that right?

`@SeanLuTW` Yes, this seems correct. The distance is computed from the Connector origin, so the `distanceTolerance` should be greater than 0.1. And spheres can have passive type.

##### GrundlePepper 11/05/2020 07:59:48
I have just updated my MATLAB to 2019b from 2018b, but my webots is still trying to run my controllers with 2018b. How do i fix this?


no dont worry, ive fixed it

##### Olivier Michel [Cyberbotics] 11/05/2020 08:05:25
I guess you fixed the PATH environment variable to point to the new version of MATLAB?

##### GrundlePepper 11/05/2020 08:06:05
yeah

##### Daniele 11/06/2020 22:56:35
Hi everybody. I am new here. Sorry for offtopic but is there any python code of line following with obstacle avoidance? I've seen the c code but i'm not familliar with c language. Thanks.

##### Soft\_illusion 11/07/2020 02:11:56
[https://github.com/cyberbotics/webots\_ros2/tree/master/webots\_ros2\_tutorials](https://github.com/cyberbotics/webots_ros2/tree/master/webots_ros2_tutorials) This project has Line following in python and ros2. `@Daniele`

##### Daniele 11/07/2020 12:39:59
yes but i need both in one obstacle avoidance and line following


Is there any tutorials on how to navigate robot from point A to the point B (desired destination). Any suggestions?

##### Darko Lukić [Cyberbotics] 11/07/2020 20:28:06
> Is there any tutorials on how to navigate robot from point A to the point B (desired destination). Any suggestions?

`@Daniele` You should use ROS for that as it provides packages for mapping and path planning. Here is a tutorial with ROS2 and TurtleBot3:

[https://github.com/cyberbotics/webots\_ros2/wiki/Navigate-TurtleBot3](https://github.com/cyberbotics/webots_ros2/wiki/Navigate-TurtleBot3)

and the result:

[https://www.youtube.com/watch?v=gO0EXKv8x70](https://www.youtube.com/watch?v=gO0EXKv8x70)

##### ArjunSadananda 11/08/2020 20:51:47
Greetings everyone!

I'm trying to build a 3D wall following course for ePuck, which includes a path spiraling down (like a spiral slide from 1st floor to ground). 

But now the problem i'm facing is that, if I run ePuck on a floor made from STL file, the robot behaves wierdly (Stops/Jumps/hops) at the edges of the triangles of STL file.



So if i increase the resolution of the STL file, the epuck goes even more crazy!



I would highly appreciate some solutions for this.

Thanks in advance! 🙂

##### coelhogi 11/08/2020 23:00:13
Hello everyone! 

I'm having trouble setting up some hinge joints'  end point with de Solid Reference type of constraint.

When I try to test if the joint movement is OK with the position field, it doesn't move, it just seems like no connection is being made between the part and its end point when I use Solid Reference type.

When I use the Solid type o end point everything works fine but as I need to link move than one joint to the same part, I need to reference in another way and I thought Solid Reference would work.

Does anyone know how to use the Solid Reference as an end point?

##### Joshua S 11/09/2020 03:04:43
Hello, I have some questions regarding Webots.



Firstly when I first downloaded it I got a system requirements not meant error, but it said that certain features will not be added and that the rendering will be slower then usual. I have a kinda old laptop in windows 10. Will it be hard to do simple things projects on it due to in error.



Secondly when doing the Webots tutorial, I when using the DEF mechanism on nodes, the program would not be able to find it. I tried doing things like waiting a minute and saving the project and it does not work.



Thirdly when trying to change the colour of the ball (in Tutorial 3), Webots will not respond to my keyboard making it impossible for me to change the colour. But Webots does react when changing other things like said and postion.



Are these problems due to the system not meeting the requirements or am I doing some rookie mistakes while following the tutorials?

##### Stefania Pedrazzi [Cyberbotics] 11/09/2020 07:12:51
`@ArjunSadananda` Hi, I assume that your are also using a complex IndexFaceSet geometry also for the boundingObject of your floor, is it correct?

To make the simulation much more stable, you should instead replace it by a group of simple geometries (boxes, spheres, cylinders).


`@coelhogi` Hi, it is "correct" that when changing manually the joint position from the scene tree the `SolidReference` doesn't move.

But this doesn't mean that the link to the `SolidReference` is wrong. If you want to test if it works, you move the joint by applying force to the endPoint `SolidReference` or using the joint `Motor`.

Here you can find some examples using `SolidReference` in a joint:

- Gripper of Khepera III robot: [https://www.cyberbotics.com/doc/guide/khepera3#khepera3\_gripper-wbt](https://www.cyberbotics.com/doc/guide/khepera3#khepera3_gripper-wbt)

- Stewart platform: [https://www.cyberbotics.com/doc/guide/samples-demos#stewart\_platform-wbt](https://www.cyberbotics.com/doc/guide/samples-demos#stewart_platform-wbt)

- Pedal racer: [https://www.cyberbotics.com/doc/guide/samples-howto#pedal\_racer-wbt](https://www.cyberbotics.com/doc/guide/samples-howto#pedal_racer-wbt)

##### Olivier Michel [Cyberbotics] 11/09/2020 07:28:14
`@Joshua S`: (1) An unsupported graphics card configuration may impact and cause crash. We don't know in advance. Maybe (3) is a symptom of the (1). (2) Beware DEF name are case sensitive.

##### coelhogi 11/09/2020 22:24:27
> `@coelhogi` Hi, it is "correct" that when changing manually the joint position from the scene tree the `SolidReference` doesn't move.

> But this doesn't mean that the link to the `SolidReference` is wrong. If you want to test if it works, you move the joint by applying force to the endPoint `SolidReference` or using the joint `Motor`.

> Here you can find some examples using `SolidReference` in a joint:

> - Gripper of Khepera III robot: [https://www.cyberbotics.com/doc/guide/khepera3#khepera3\_gripper-wbt](https://www.cyberbotics.com/doc/guide/khepera3#khepera3_gripper-wbt)

> - Stewart platform: [https://www.cyberbotics.com/doc/guide/samples-demos#stewart\_platform-wbt](https://www.cyberbotics.com/doc/guide/samples-demos#stewart_platform-wbt)

> - Pedal racer: [https://www.cyberbotics.com/doc/guide/samples-howto#pedal\_racer-wbt](https://www.cyberbotics.com/doc/guide/samples-howto#pedal_racer-wbt)

`@Stefania Pedrazzi` Thank you, I'll check this out!

##### KajalGada 11/10/2020 00:05:52
hey everyone, looking for some help. I have a small object that I import into webots (it becomes an IndexedFaceSet shape). I used the same shape for bounding object and gave it physics. I start the object at a height. As the object touches the floor it bounces around and then gets stuck into the wall. As in half the object is in wall.  Any ideas on what I am doing wrong or is this a side effect of IndexedFaceSet?

##### Darko Lukić [Cyberbotics] 11/10/2020 07:49:07
Hello `@KajalGada` , you should use simple bounding objects to avoid instabilities and increase performance

##### Weebo 11/10/2020 13:22:36
Hello everyone. I'm trying to use connectors in Webots but I'm not finding a lot of documentation about this. To put you in context, I have a simulation with an e-puck robot. The goal is to have a connector in the front of the robot that would be able to "pick" objects around (that would also have connectors). 



So far my testing is being performed with two copies of the e-puck robot. I've already added the connector to the PROTO file, I'm able to get the connector in my controller (Python) and able to enablePresence and getPresence in a value. However, my understanding is that this value should change to 1 whenever two connectors are close enough to each other... and that's where I'm stuck, no matter what I do it's always 0.

##### Olivier Michel [Cyberbotics] 11/10/2020 13:25:18
Did you check that it fulfills all the conditions listed here: [https://cyberbotics.com/doc/reference/connector#wb\_connector\_get\_presence](https://cyberbotics.com/doc/reference/connector#wb_connector_get_presence)

##### Weebo 11/10/2020 13:26:34
Additional visual referencing
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/775713014342746132/unknown.png)
%end


> Did you check that it fulfills all the conditions listed here: [https://cyberbotics.com/doc/reference/connector#wb\_connector\_get\_presence](https://cyberbotics.com/doc/reference/connector#wb_connector_get_presence)

`@Olivier Michel` Yes, I'd say I've checked everything. I mean, both connectors are coming from the same definition, since it's a copy/paste kind of situation. So they're both the same type and they shouldn't be having any issues with the axis either.

##### Olivier Michel [Cyberbotics] 11/10/2020 13:29:22
Did you try to set autoLock to FALSE? And increase distanceTolerance?

##### Weebo 11/10/2020 13:29:52
Let me try


Still no luck. Presence value keeps returning 0


My only guess is that somehow I'm not properly setting the connector node. Haven't been able to found an example with the connector device being implemented in the PROTO file tho, so I was just winging it.

##### Olivier Michel [Cyberbotics] 11/10/2020 13:36:04
I would recommend you to check the example provided in webots/projects/samples/devices/worlds/connector.wbt which uses webots/projects/samples/devices/controllers/connector/connector.c controller and uses successfully the get\_presence function. This example works. Rewriting it in Python would be the first step for you to understand how this example differs from yours.

##### Weebo 11/10/2020 13:38:57
Yes, that's the example I've been following so far. However that's what I was just thinking right now... that example implements the connector in a node way, within the tree structure in Webots. I wouldn't say I'm yet comfortable enough with Webots to be sure I know what I'm doing, and by translating that to my PROTO file instead of creating the node structure I might have left something behind. 



I will try rewriting the example in Python anyway, see if that throws any light to the issue. Thanks a lot `@Olivier Michel`.

##### coelhogi 11/11/2020 00:04:33
I'm trying really hard to make this move as a structure but I don't have a clue why it doesn't. I didn't code yet because I wanted to make sure all joints are correct. I saw the Webots examples and I think I'm doing just like them. If someone could take a look and see if can find an error, please report to me. Thanks in advance!
> **Attachment**: [REDUZIDO.wbt](https://cdn.discordapp.com/attachments/565154703139405824/775873565320282112/REDUZIDO.wbt)

##### KajalGada 11/11/2020 01:07:33
Thank you `@Darko Lukić`  Yes indeed the complex bounding object was creating problems. Appreciate the help 🙂

##### Stefania Pedrazzi [Cyberbotics] 11/11/2020 06:34:24
`@coelhogi` please note that the `Solid.physics` properties are not defined for any of your robot parts. You should start defining the physical properties of your robot:

[https://www.cyberbotics.com/doc/guide/tutorial-5-compound-solid-and-physics-attributes#physics-attributes](https://www.cyberbotics.com/doc/guide/tutorial-5-compound-solid-and-physics-attributes#physics-attributes)

[https://www.cyberbotics.com/doc/reference/physics](https://www.cyberbotics.com/doc/reference/physics)

##### Eddysanoli 11/11/2020 18:25:01
Hello! I'm trying to use the distance sensors on the pioneer 3DX to detect other pioneer 3DX robots, but I seem to get odd sensor readings. For example: When I place a robot right in front of the other, the sensor of the robot behind the other starts to flicker and after moving towards the front robot, it hits a blind spot where it doesnt detect anything. Is this because of the sensor being a "sonar"?

##### Deleted User 11/12/2020 05:15:58
Hi everyone! I'm pretty new to webots and have been working on a spring leg for a project but can't quite get it right. I've tried using the SolidReference node as an endpoint for a slider joint to create these spring properties but it seems I haven't quite gotten its functionality. I think there's a specific way to do this, any advice or thoughts on how to obtain this result?
%figure
![Spring_Leg.SlideJoint_Location.PNG](https://cdn.discordapp.com/attachments/565154703139405824/776314327032004608/Spring_Leg.SlideJoint_Location.PNG)
%end


The only thing that seemed to create this sort of spring was defining the solid (pin) in the endpoint of the slider joint, otherwise it did not work. Any way to attach the pin to the body without interrupting other joint properties?
%figure
![Spring_1.gif](https://cdn.discordapp.com/attachments/565154703139405824/776319175333380106/Spring_1.gif)
%end

##### Olivier Michel [Cyberbotics] 11/12/2020 07:31:35
`@Eddysanoli`: did you try to change the type of sensor to "generic" instead of "sonar"?


`@Deleted User`: what you are trying to do should be possible. Please check the examples using the SolidReference to understand how it works and how these simulation models differ from yours: `webots/samples/demos/worlds/stewart_platform.wbt`, `webots/projects/robots/bluebotics/shrimp/protos/Shrimp.proto`.

##### Deleted User 11/12/2020 07:38:18
Awesome! Thank you so much! will definitely check it out and hopefully solves my problem.

##### Eddysanoli 11/12/2020 07:41:13
`@Olivier Michel` Thought of it, but the only way i found was to change the proto file for the Pioneer3DX distance sensors. Is this my only option?

##### Olivier Michel [Cyberbotics] 11/12/2020 07:43:38
Yes, you can actually copy this proto file into your own project/protos folder and modify it there (to avoid modifying the installation folder of Webots).

##### Eddysanoli 11/12/2020 07:52:25
Awesome! It worked perfectly. Now all sensor readings align with the visualization obtained by pressing "CTRL+F10". Thank you so much!

##### WooMBaT 11/12/2020 12:07:00
Hi there im trying the to draw a line on a costume soild, but depending if the robot is moving in the x or i the y direction the drawing line change size. Anybody how has had the same problem? And maybe a solutions
%figure
![Screenshot_from_2020-11-12_13-02-30.png](https://cdn.discordapp.com/attachments/565154703139405824/776417764570038272/Screenshot_from_2020-11-12_13-02-30.png)
%end

##### misericordia 11/12/2020 14:50:46
Hello, 



If I'm not mistaken, the robot window uses QtWebKitWidgets in order to embed html pages. What version is this? I created a robot window that is functional on Linux but gives a javascript error on Windows (I am trying to use ResizeObservers). I suspect the Linux and Windows versions might be different, but I can not find the version inside the Windows makefile like it is in the Linux makefile.



Any help would be greatly appreciated.

##### coelhogi 11/12/2020 23:28:13
Hello! This joint should move the whole structure. I'm using Solid Reference in this link that is not working. Already configured the physics and bounding object. Does anyone know what could be missing?
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/776589201193041940/unknown.png)
%end


It just seems like something with the solid reference that is not linking but I don't have a clue what it could be.

##### Darko Lukić [Cyberbotics] 11/13/2020 07:53:49
Hello `@misericordia` , QT versions for Windows and Linux should be the same (5.15). However, there is indeed different approach used for creating embedded HTML pages:

[https://github.com/cyberbotics/webots/blob/d019ad4906e44a34a94fbea4e110d71af7172c07/src/webots/gui/WbRobotWindow.cpp#L31](https://github.com/cyberbotics/webots/blob/d019ad4906e44a34a94fbea4e110d71af7172c07/src/webots/gui/WbRobotWindow.cpp#L31)


`@WooMBaT` I don't see it very well, is it `Display`? You are using `wb_display_draw_line` to draw the line?


`@coelhogi` Did you verified `solidName` parameters of the `SolidReference` nodes?

##### misericordia 11/13/2020 08:24:28
Hi `@Darko Lukić` ,

Thanks! In the github link you sent me, it seems like Windows is using QWebKitWidgets while other platforms are using QWebEngineWidgets. So it seems QtWebEngine has better support for latest HTML5 specification:

[https://doc.qt.io/qt-5/qtwebenginewidgets-qtwebkitportingguide.html](https://doc.qt.io/qt-5/qtwebenginewidgets-qtwebkitportingguide.html)

I assume this is the reason I can't use ResizeObservers in Windows, but can in Linux. Is there any reason why Windows can't also use QWebEngineWidgets? Thank you - Victor

##### Olivier Michel [Cyberbotics] 11/13/2020 08:30:38
Simply because QWebEngine is not available in the MSYS2 version of Qt. It seems it is not possible to compile QWebEngine on Windows with gcc.

##### WooMBaT 11/13/2020 08:33:08
`@Darko Lukić` Im using python script, so im attacthing a pen to the robot. Im using the pen with write(True)

##### Olivier Michel [Cyberbotics] 11/13/2020 08:35:21
`@misericordia`: see details here: [https://bugreports.qt.io/browse/QTBUG-42725](https://bugreports.qt.io/browse/QTBUG-42725)

##### Darko Lukić [Cyberbotics] 11/13/2020 09:00:26
`@WooMBaT` Unfortunately, I cannot reproduce the issue. Have you checked an example located in `projects/samples/devices/worlds/pen.wbt`? Can you identify how your simulation differ from the example?

##### WooMBaT 11/13/2020 09:02:42
`@Darko Lukić` Thank you, I will have a look, I think it migth be the soild that I have imported that, gives this view because it works on the land surface 🙂

##### misericordia 11/13/2020 09:26:26
`@Olivier Michel` Ah, that is unfortunate. Thanks!

##### coelhogi 11/13/2020 10:19:54
`@Darko Lukić` yes, I did...

##### Darko Lukić [Cyberbotics] 11/13/2020 11:10:57
`@coelhogi` Is it possible for you to share the simulation with me, so I can check?

##### coelhogi 11/13/2020 11:49:59
`@Darko Lukić` This is it
> **Attachment**: [REDUZIDO.wbt](https://cdn.discordapp.com/attachments/565154703139405824/776775870470815755/REDUZIDO.wbt)

##### Darko Lukić [Cyberbotics] 11/13/2020 15:13:33
`@coelhogi` I briefly checked your model (it is quite complex) and I noticed you are not using bounding objects anywhere except for the base node. It might be the reason. You can check the Steward platform example:

[https://cyberbotics.com/doc/guide/samples-demos#stewart\_platform-wbt](https://cyberbotics.com/doc/guide/samples-demos#stewart_platform-wbt)

##### coelhogi 11/13/2020 15:16:04
Thanks for the feedback! `@Darko Lukić` I'll check this out

##### elkelkmuh 11/13/2020 18:37:17
> I think some yes, but this requires to extend yourself the transfer feature.

`@David Mansolino`  Hi `@David Mansolino`  Would you like to know if you can give the names or links of the users' work?  I've tried.  but it didn't work.  Which files should I change on github?   

[https://github.com/cyberbotics/webots/tree/master/projects/robots/robotis/darwin-op/transfer](https://github.com/cyberbotics/webots/tree/master/projects/robots/robotis/darwin-op/transfer)

##### coelhogi 11/14/2020 00:01:26
Is there any way to import 3D models from a CAD software with the joints already configured? I'm using NX and it has .wrl export option but it does not export the joints I set inside NX. For example, I have seen that URDF files come with the joints from SolidWorks when imported to Moveit simulation software.

##### wyaguiu 11/14/2020 00:35:14
Hi guys! I’m having a problem with the option “Solid Reference”. I configured the bounding of each component, but the software doesn’t recognize the collision. Can you help me?
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/776968452857921536/unknown.png)
%end

##### Steven37 11/14/2020 01:14:19
> I am trying to simulate the drone Mavic2Pro but I am not really good at PID controller yet. I have created 6 PD controllers for (x,y) position, roll, pitch, yaw and altitude but I'm still having trouble choosing the suitable values for the P, D constants for all 6 controllers. So can anyone tell me based on observing this drone, how can I adjust the PD parameters? Or is there any way that can help me improve my drone, please?
> **Attachment**: [DroneTestToAsk.mp4](https://cdn.discordapp.com/attachments/565154703139405824/776978286738800640/DroneTestToAsk.mp4)

##### Chronoj 11/14/2020 10:19:07
Hey guys.. Anyone knows what this error is about?
%figure
![20201114_121610.jpg](https://cdn.discordapp.com/attachments/565154703139405824/777115391712952350/20201114_121610.jpg)
%end

##### Simon Steinmann [Moderator] 11/14/2020 11:41:47
`@coelhogi` You can use this tool to convert urdf files into the webot's PROTO file format: [https://github.com/cyberbotics/urdf2webots](https://github.com/cyberbotics/urdf2webots)

##### Chronoj 11/14/2020 12:16:10
Also does anyone knows how can i change the coordinate system, in order positive x pointing through robots nose and positive z to the right of the robot?

##### Simon Steinmann [Moderator] 11/14/2020 12:20:19
in the 'Worldinfo' section of your scene tree, you can change the coordinate system


[https://cyberbotics.com/doc/reference/worldinfo](https://cyberbotics.com/doc/reference/worldinfo)


the two options are explained here


you want "NUE"  which stands for north - up  - east


so x = north, y = up, z = east


to position your robot correctly, you have to adjust the rotation field of the robot

##### Chronoj 11/14/2020 12:37:52
`@Simon Steinmann` thanks for the immediate reply... I ve checked the webots doc but it seems they ve changed how to select north etc... I put x north(1) as you can see
%figure
![20201114_143329.jpg](https://cdn.discordapp.com/attachments/565154703139405824/777150308648222730/20201114_143329.jpg)
%end

##### Simon Steinmann [Moderator] 11/14/2020 12:39:13
you should update to the latest version of webots


R2020b rev1


Help > check for updates

##### Chronoj 11/14/2020 12:42:57
`@Simon Steinmann` also,even when i set x in north, robot axis remain the main problem, as positive z point opossite to its nose and positive x to its right... Im trying to find a way(if possible) to put the x axis to its nose and z to the right. In order then to figure out, without teansformations, the atan2, in order to turn and go to specific point.
%figure
![20201114_143557.jpg](https://cdn.discordapp.com/attachments/565154703139405824/777151588309532672/20201114_143557.jpg)
%end

##### Simon Steinmann [Moderator] 11/14/2020 12:43:50
there is a difference between the global coordinates and the local coordinates for your robot


you can simply rotate it

##### Chronoj 11/14/2020 12:44:11
`@Simon Steinmann` you re right! Im updating right now thanks


`@Simon Steinmann` Oh i can see yes.. Thank you, i will try in the newest version

##### Simon Steinmann [Moderator] 11/14/2020 12:44:56
if you use the circles in the GUI to rotate it, it goes in pi/12 steps


so you can make clean rotations easily


without maths

##### Chronoj 11/14/2020 12:46:18
If i want to head to a specific point, how can i know how many steps?

##### Simon Steinmann [Moderator] 11/14/2020 12:46:50
what robot do you use?

##### Chronoj 11/14/2020 12:48:51
Pioneer 3 dx.. Just to give you the big picture, what i do right now, after my teacher's help, is to find an error angle between my robot's heading and the standar robot-point angle.


Robot coordinates -goal coordinates i mean


Thats why i use atan2

##### Simon Steinmann [Moderator] 11/14/2020 12:50:54
you dont have to change the coordinates for that


here is what you do:

click on the extensionSlot of the robot

click on the plus on the top

add a Transform Node

rotate the transform node by 6/12 Pi around the y axis
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/777154737049042954/unknown.png)
%end


If you want to get these values from the controller, give it a name in the "DEF" field

##### Chronoj 11/14/2020 13:00:41
Really helpful!

 Hope i can make it work.. Thank you!!

##### eeeloisee 11/15/2020 09:33:51
Hi everyone. I'm running into this weird problem with my robot - it's made out of a robot group for a simple box body (with a few transforms for axes and stuff) and four hinge joints (2 drive wheels with rotational motors and 2 passive wheels). For my simulation, I need to have the robot decreasing in mass with time, so I created a supervisor function for that - however, when I get the robot to drive, after a bit, the wheels seem to translate away from the robot body to the point where the entire drive of the robot is thrown off. It's as if the main body is leaving the wheels behind. I was suspecting that it might be because the boundingObject is defined for just the robot body, but I'm really not sure. I appreciate any help/advice! Thanks!

##### aalmanso 11/15/2020 18:20:30
Hi everyone , I'm trying to run the simulation with an external controller, but I received the following error:

"Cannot open file: /temp/webots-51103/webots\_server(retrying in 1 second)"

Any help please?

##### Stefania Pedrazzi [Cyberbotics] 11/16/2020 06:46:55
> Hi guys! I’m having a problem with the option “Solid Reference”. I configured the bounding of each component, but the software doesn’t recognize the collision. Can you help me?

Hi `@wyaguiu`, if you want to recognize collisions between parts of the same robot then you have to make sure that the `Robot.selfCollision` field is set to TRUE.

But note that even in this case collisions bewteen consecutinve solids (i.e. parent `Solid` of a joint and its `endPoint Solid`) cannot be detected.

Please refer to the Robot fields documentation for the complete description of the `selfCollision` option.


> `@David Mansolino`  Hi `@David Mansolino`  Would you like to know if you can give the names or links of the users' work?  I've tried.  but it didn't work.  Which files should I change on github?   

> [https://github.com/cyberbotics/webots/tree/master/projects/robots/robotis/darwin-op/transfer](https://github.com/cyberbotics/webots/tree/master/projects/robots/robotis/darwin-op/transfer)

`@elkelkmuh` unfortunately we don't have the names of the other users.

For adding the Touchsensor values to the Robotis OP transfer code, you could probably copy and adapt the code for the Accelerometer, i.e. create a TouchSensor class similar to the accelerometer one and add the required code in the `Robot.cpp` file.

Here you can find the link to the Robotis OP documentation: [https://emanual.robotis.com/docs/en/platform/op/development/](https://emanual.robotis.com/docs/en/platform/op/development/)


> Hi everyone. I'm running into this weird problem with my robot - it's made out of a robot group for a simple box body (with a few transforms for axes and stuff) and four hinge joints (2 drive wheels with rotational motors and 2 passive wheels). For my simulation, I need to have the robot decreasing in mass with time, so I created a supervisor function for that - however, when I get the robot to drive, after a bit, the wheels seem to translate away from the robot body to the point where the entire drive of the robot is thrown off. It's as if the main body is leaving the wheels behind. I was suspecting that it might be because the boundingObject is defined for just the robot body, but I'm really not sure. I appreciate any help/advice! Thanks!

Hi `@eeeloisee`,  do you get this issue even before you change change the robot mass?

If not and if you get it only after changing the mass, you should try to reset the physics of the robot using the Supervisor `wb_supervisor_node_reset_physics` function [https://www.cyberbotics.com/doc/reference/supervisor#wb\_supervisor\_node\_reset\_physics](https://www.cyberbotics.com/doc/reference/supervisor#wb_supervisor_node_reset_physics)


Hi `@aalmanso`, do you have the `/temp/webots-51103/` folder and the `/temp/webots-51103/webots_server` on your system?

Note that `51103` is the id of the current Webots instance, so it will be different every time you start Webots.

On which OS are you running Webots?

If the `$TMPDIR` or `WEBOTS_TMPDIR` are not defined, on Linux the default temporary path should be `/tmp/webots-%1/` (`tmp` without `e`).

##### eeeloisee 11/16/2020 16:44:34
`@Stefania Pedrazzi` Hi, thank you for the suggestion! And yes, the issue only happens when the robot's mass is changing. However, I would have the mass changing during the entire simulation - when would you advise I use the reset physics supervisor function?

##### Stefania Pedrazzi [Cyberbotics] 11/16/2020 16:45:53
I would suggest you to try to reset the physics of the robot just after changing the mass.

##### eeeloisee 11/16/2020 16:54:26
`@Stefania Pedrazzi` The issue actually starts to occur much before the robot would stop changing mass. It also carries on with resetting the simulation.

##### N4CER 11/17/2020 05:31:14
Hello everyone i am actually doing a project called obstacle avoidance using camera in webots can anyone please tell me what is the header file used for camera recognition  in c++.

##### Darko Lukić [Cyberbotics] 11/17/2020 09:14:30
Hello `@N4CER` , you will need:

```c++
#include <webots/Camera.hpp>
```

See:

[https://www.cyberbotics.com/doc/reference/camera?tab-language=c++#wb\_camera\_recognition\_enable](https://www.cyberbotics.com/doc/reference/camera?tab-language=c++#wb_camera_recognition_enable)

##### Simon Steinmann [Moderator] 11/17/2020 11:48:06
For the first time I tried Webots on Windows. Question: .wbt world files have the webots symbol and are supposed to be opened with webots, however, this does not seem to work


it does not launch the application


And I may have missed something, but Python has to be installed manually, with no mention in the instructions

##### Olivier Michel [Cyberbotics] 11/17/2020 11:49:20
Beware that files with the `.wbt` extension should lie in a `worlds` folder.

##### Simon Steinmann [Moderator] 11/17/2020 11:49:26
it is

##### Olivier Michel [Cyberbotics] 11/17/2020 11:49:39
Yes, Python should be installed manually from [https://python.org](https://python.org) (64 bit version).


Normally, it should work. Otherwise, you can start Webots and open the `.wbt` file from the File menu.

##### Simon Steinmann [Moderator] 11/17/2020 11:51:24
I think the Python installation should be explained here: [https://www.cyberbotics.com/doc/guide/installation-procedure?tab-language=python#installation-on-windows](https://www.cyberbotics.com/doc/guide/installation-procedure?tab-language=python#installation-on-windows)


as well as how to set the "Path" Env variables on Windows


While it was not too difficutl for me to figure out, I think this could be a significant hurdle for beginners

##### Olivier Michel [Cyberbotics] 11/17/2020 11:52:21
It is indeed explained here: [https://www.cyberbotics.com/doc/guide/using-python?tab-language=python](https://www.cyberbotics.com/doc/guide/using-python?tab-language=python)

##### Simon Steinmann [Moderator] 11/17/2020 11:53:18
I think it should be linked from the link I posted


Mentioning, that different languages may have to be set up

##### Olivier Michel [Cyberbotics] 11/17/2020 11:54:38
Yes, that seems a good idea... Can you please open a PR for proposing such a change?

##### Simon Steinmann [Moderator] 11/17/2020 11:55:15
can do


I'd also change "Language setup" into "API / Language setup"


as language can refer to country languages as well

##### Olivier Michel [Cyberbotics] 11/17/2020 11:56:29
Or rather "Programming Language Setup"?

##### Simon Steinmann [Moderator] 11/17/2020 11:56:42
yes


is there a "kill" on windows for processes? I can't end the process of a crashed Webots instance


nvm, my antivirus froze it

##### Olivier Michel [Cyberbotics] 11/17/2020 12:36:48
On Windows, you can use the Task Manager to kill controller processes.

##### eeeloisee 11/18/2020 15:52:32
> Hi everyone. I'm running into this weird problem with my robot - it's made out of a robot group for a simple box body (with a few transforms for axes and stuff) and four hinge joints (2 drive wheels with rotational motors and 2 passive wheels). For my simulation, I need to have the robot decreasing in mass with time, so I created a supervisor function for that - however, when I get the robot to drive, after a bit, the wheels seem to translate away from the robot body to the point where the entire drive of the robot is thrown off. It's as if the main body is leaving the wheels behind. I was suspecting that it might be because the boundingObject is defined for just the robot body, but I'm really not sure. I appreciate any help/advice! Thanks!

Hi all.. Sorry, I am just writing to follow up on this problem I had the other day in case anyone had a suggestion or advice. I looked into the resetting the physics as soon as it would be done changing mass, as advised previously, since the issue only occurs when the robot is changing mass. However the issue occurs much before the robot can stop changing mass (it changes as a function of time for the duration of the simulation). The issue also carries on even with resetting the simulation. Thanks!!

##### Stefania Pedrazzi [Cyberbotics] 11/18/2020 15:55:16
> However the issue occurs much before the robot can stop changing mass

Hi `@eeeloisee`, what do you mean exactly with this sentence?

##### eeeloisee 11/18/2020 15:59:07
`@Stefania Pedrazzi` Hi! Sorry. You mentioned last time to use the reset physics function right after the robot is done changing mass, but my robot actually needs to change in mass as a function of time for the entire simulation (about 5 minutes). And early on into the simulation, starting at about 0.5 minute, the issue with the wheels and robot body already starts.

##### Stefania Pedrazzi [Cyberbotics] 11/18/2020 16:00:23
You should reset physics each time you change the mass, not after you are done changing the mass

##### eeeloisee 11/18/2020 16:05:30
`@Stefania Pedrazzi` I see. Sorry, I must have just understood your suggestion wrong the last time. So I could just add in that line for resetting it right after the line for changing it, as I have this in a loop, and that should work for resetting the physics each time, right?

##### Stefania Pedrazzi [Cyberbotics] 11/18/2020 16:05:45
yes, exactly

##### eeeloisee 11/18/2020 16:06:13
`@Stefania Pedrazzi` Okay! I will try this out. Thank you so much!

##### Stefania Pedrazzi [Cyberbotics] 11/18/2020 16:06:21
You're welcome

##### eeeloisee 11/18/2020 20:10:17
`@Stefania Pedrazzi` I tried out the reset\_physics function, however, I am getting an error now that this function can only be used with a solid. In my case, it is being used with a Group

##### Stefania Pedrazzi [Cyberbotics] 11/19/2020 07:14:44
Hi `@eeeloisee` this is because you are resetting the physics of the wrong object. You have to pass as argument of the reset physics function the node reference of your Robot node.

##### eeeloisee 11/19/2020 07:27:47
`@Stefania Pedrazzi` Hello again. Thank you! I just changed that and the reset physics function now works. However, it unfortunately seems that my original issue still persists for some reason.

##### Stefania Pedrazzi [Cyberbotics] 11/19/2020 07:33:09
You should really identify where does your problem come from.

* if it is a consequence of changing the mass, or

* if it is a problem of your robot model

In the first case you should instect resetting the physics of the various Solid nodes, whole worlds, reset the simulation, etc.

In the second case you should make sure that all your joints are properly set up the joint position matches the `endPoint` Solid translation, etc.

##### eeeloisee 11/19/2020 07:39:05
`@Stefania Pedrazzi` Thank you for your suggestions and help. The problem is definitely a consequence of the changing mass as the issue goes away when I turn off the changing mass function. I double checked the second case though just in case. Maybe this is a long shot, but could it possible be because the boundingObject is set to just the robot body and not the wheels (as I don't think I can include Rotational motors or hinge joints in a group node)?

##### Stefania Pedrazzi [Cyberbotics] 11/19/2020 07:41:49
If you want to set the boundingObject of the wheels, then you have to set it in the "wheel" `Solid.boundingObject` and not in the parent `Robot.boundingObject`. This means that you don't have to include the joint in the `boundingObject` group.

Please look at this tutorial for more information about to build a wheeled robot:

[https://www.cyberbotics.com/doc/guide/tutorial-6-4-wheels-robot](https://www.cyberbotics.com/doc/guide/tutorial-6-4-wheels-robot)

##### eeeloisee 11/19/2020 07:48:30
Ah yes, I do have boundingObject set for the individual wheels, just not in the overall robot node. Anyway, thank you very much for trying to help me figure this out! I'll be looking into this more, maybe might rebuild the robot haha

##### alireza 11/19/2020 09:49:27
hi, I have a humanoid robot, I want to set an initial configuration at the beginning  without running  simulation. Note that I want to do it in a python controller not in the .proto file

##### prophile 11/19/2020 21:42:12
Good evening; I have installed afresh webots on macOS 10.14.6 via Homebrew (Webots version: R2020b revision 1). I have selected a python3.8 interpreter (similarly 3.9) but upon loading of the `controller` module I am confronted by the following error message:


```Traceback (most recent call last):
  File "competition_supervisor.py", line 11, in <module>
    from controller import Node, Supervisor  # isort:skip
  File "/Applications/Webots.app/lib/controller/python38/controller.py", line 31, in <module>
    import _controller
ImportError: dlopen(/Applications/Webots.app/lib/controller/python38/_controller.so, 2): Library not loaded: /Library/Frameworks/Python.framework/Versions/3.8/Python
  Referenced from: /Applications/Webots.app/lib/controller/python38/_controller.so
  Reason: image not found
```


Python 3 is installed via Homebrew so there is nothing in `/Library/Frameworks/Python.framework/Versions/3.8`


I am unsure how best to proceed from here


I note existence of `/Applications/Webots.app/lib/controller/python38_homebrew` with references to `/usr/local/opt` in the linker commands of `_controller.so`, how do I switch which is being used?

##### Olivier Michel [Cyberbotics] 11/20/2020 08:31:00
When you type `python -V -V` from the Terminal application, which version do you get? Also when you type `which python`? It might be useful to specify the full path to the python executable in the Webots preferences.

##### aalmanso 11/20/2020 09:51:10
Hi everyone, I'm working withe

 evolutionary algorithm 

And swarm robotics, so I need alot of time for the learning process and repetition. I wonder if there's a way to run webots in the background. I tried the fast mode but it's not sufficient for my work, I appreciate any suggestions to solving my problem.

##### Olivier Michel [Cyberbotics] 11/20/2020 11:41:05
There is no faster option than running the fast mode. You may however try to optimize your simulation for speed: [https://www.cyberbotics.com/doc/guide/speed-performance](https://www.cyberbotics.com/doc/guide/speed-performance)

##### Simon Steinmann [Moderator] 11/20/2020 12:57:06
`@aalmanso` I have conducted in depth performance and speed tests with Webots. If you tell me more about what exactly you are simulating, I might be able to help you with scaling / increasing performance

##### FlySoHigh 11/20/2020 18:23:35
> Evening. Webots is complaining about ikpy not being installed even though I have installed it with pip. I am on macos. Any suggestions why it complains about ikpy not being installed? What Python path does Webots use?

`@SimonDK` Hello SimonDK, I am facing the same situation on Ubuntu. Did you resolve the issue somehow?


Hi together, I am trying to get the example with an ABB robot running, using the inverse kinematics library in Python. Installing "ikpy" via pip3 worked, but Webots does not recognize the installed package. Is there any hint that I should keep in mind when having only Python3 installed? Might this be the issue why Webots tells me the package is not installed? Thank you very much in advance for a direction.

##### prophile 11/20/2020 18:56:12
> When you type `python -V -V` from the Terminal application, which version do you get? Also when you type `which python`? It might be useful to specify the full path to the python executable in the Webots preferences.

`@Olivier Michel` I have done so, giving it the path to a Python in a virtualenv close to the world file

##### Simon Steinmann [Moderator] 11/20/2020 19:35:08
`@FlySoHigh` [https://www.cyberbotics.com/doc/guide/running-extern-robot-controllers?tab-os=macos&tab-language=python#environment-variables](https://www.cyberbotics.com/doc/guide/running-extern-robot-controllers?tab-os=macos&tab-language=python#environment-variables) Take a look at this and set up your environment variables

##### FlySoHigh 11/20/2020 20:06:38
> `@FlySoHigh` [https://www.cyberbotics.com/doc/guide/running-extern-robot-controllers?tab-os=macos&tab-language=python#environment-variables](https://www.cyberbotics.com/doc/guide/running-extern-robot-controllers?tab-os=macos&tab-language=python#environment-variables) Take a look at this and set up your environment variables

`@Simon Steinmann` Thank you a lot Simon. The link you provided directed me to a page on which I found more information on what to consider when installing via Snap (this is how I installed it on 20.04) - which results in a sand-boxing of the built-in Python. After trying a bit around with external controllers, I installed via DEB package and the demo world worked instantly.  Thank you for your help!

##### wyaguiu 11/20/2020 23:31:31
Hi guys! I’m having the problem: “Webots has detected that this solid is light and oblong according to its inertia matrix. This belongs in the physics edge cases, and can imply weird physical results. Increasing the weight of the object or reducing its eccentricity are recommended.”

I already increased the weight, but still the same warning continues. Does someone know what to do?
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/779489131230396466/unknown.png)
%end

##### yusah 11/21/2020 07:59:28
Hi guys!

Does anyone know if epuck2 ROS driver will work well on ubuntu 18 ROS melodic?

##### Simon Steinmann [Moderator] 11/21/2020 13:01:58
webots keeps frequently crashing on reset (back arrow)
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/779693089933361172/unknown.png)
%end

##### prophile 11/21/2020 13:58:22
(Answering my Python path question from before: Webots seems to guess which Python is being used? And it was guessing wrong due to being pointed at a Python from a virtualenv, I pointed it at the Python in `/usr/local` and it seems to work)

##### coelhogi 11/21/2020 14:15:50
Hello everyone! I'm modeling a humanoid robot and when I play the simulation, its feet surpasses the floor and fall. Does anyone know what could solve this?
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/779711676193701918/unknown.png)
%end

##### FlySoHigh 11/21/2020 17:23:09
Hello together, I'm struggling with importing existing *.proto models (like e.g. the Kinect sensor). The proto file I would like to use is stored in /usr/local/webots/projects/devices/microsoft/protos/Kinect.proto - it is not visible in the list of available nodes, and copying it in my project/protos directory does not help either. Strangely, the list of available nodes shows the robots in /usr/local/webots/... but no devices or sensors. Can anyone give me a hint how to import those *.proto files? Thank you a alot in andvance!
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/779758818338144286/unknown.png)
%end

##### KajalGada 11/22/2020 03:04:39
`@FlySoHigh` I faced a similar problem. One things that helped me: check the proto file. When I copied it over to my project/proto, there was a mismatch in name. Basically open the proto file with an editor of your choice and check name of file and the name inside file is same. Format inside file is PROTO <same-name-here-as-your-filename> [...].

Hope that helps.

##### waleed 11/22/2020 13:48:51
Hi so I am have programmed a control code in C# for my Kinect sensor xbox 360 and now I want to use the Mavic Dron available in the webots simulator — so i can control it using my gestures.

The question i have is it possible to change the Control code into C# for the mavic drone that’s available on github, will webots support it?

##### coelhogi 11/22/2020 16:36:38
Is there a way I can keep the motors steady and move only when requested by the controller?

##### Simon Steinmann [Moderator] 11/22/2020 17:04:20
`@coelhogi` yes you can. Are you using position or velocity control?


just set the motor to a position or velocity 0. They should not move then

##### coelhogi 11/22/2020 18:01:49
In the tree I configured the velocity, max/min position and force. In the controller I am requesting the movement with position.

##### Simon Steinmann [Moderator] 11/22/2020 18:03:00
`@coelhogi` how is it behaving, and how should it behave?

##### FlySoHigh 11/22/2020 18:03:45
Thank you KajalGada. I checked the name of the file "Kinect.proto" and the definition inside "PROTO Kinect" - which should be fine according to what you wrote and what I read in the reference. I am wondering if there is any caveat or change in the folder structure: 



- In the reference I read:

"By definition, the current project directory is the parent directory of the "worlds" directory that contains the currently opened ".wbt" file. "



- In Webots R2020b R1, the nodes are supposed to be stored in: 

"This folder lists all suitable PROTO nodes from the local 'protos' directory: '/home/user/Webots/world/protos/'."



This latter is obviously a protos subfolder of the world folder with my .wbt file.



Happy to get further advice on what might go wrong here. Thank you for your input on this.

##### Simon Steinmann [Moderator] 11/22/2020 18:06:51
your project directory should look like this. Any PROTO file placed inside of the "protos" folder, is detected by Webots. It has to be spelled "protos" EXACTLY
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/780132204238995456/unknown.png)
%end


in webots, the PROTO file placed inside the protos folder, will show up in the highlighted section here
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/780132400251404308/unknown.png)
%end

##### coelhogi 11/22/2020 18:11:14
When I play the simulation, it seems like some motors are moving in some kind of "adjustment". When I play the controller, it seems like other motors that I didn't put any position setting keep moving. It should move only what I request while keeping the others steady. I'm modeling the walking control of a humanoid robot by keyframes and I want it to play the 1st frame than the 2nd and so on.

##### Simon Steinmann [Moderator] 11/22/2020 18:12:50
can you show the issue in a quick video?


One reason might be, that forces act on the motors, and they try to keep their current position, but are not strong enough


raising the available torque can help with that

##### coelhogi 11/22/2020 18:19:45
`@Simon Steinmann` Here I run the simulation without any controller. I'm using linear motors with force of 1000N in each one of them. I was expecting that without any controller it would swing a bit to adjust with gravity but keep the legs steady, not move them.
> **Attachment**: [WhatsApp\_Video\_2020-11-22\_at\_15.17.14.mp4](https://cdn.discordapp.com/attachments/565154703139405824/780135448223416360/WhatsApp_Video_2020-11-22_at_15.17.14.mp4)

##### Simon Steinmann [Moderator] 11/22/2020 18:23:11
webots has an integrated recording btw, that film symbol between the box and the circle
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/780136312912347146/unknown.png)
%end


when you doubleclick on the robot, the robot view window should open on the left. here you can see the sensors and motors


are the positions changing here?


or perhaps you can share your project and I'll take a look

##### FlySoHigh 11/22/2020 18:27:35
First of all, thank you for your swift reply Simon. I could track it down a little. Copying an existing robot (Irb4600-40.proto) and renaming that file/proto def worked and also creating a simple example from the docs "TwoColorChair.proto" worked - meaning both protos are know shown in the "Proto nodes (current project)". So I could exclude it's the directory structure/naming. But still any of the .proto files in the "devices" directory will not show up. Do you have any advice how to debug those (or am I in principle doing something wrong here)? Thank you a lot for your help!

##### Simon Steinmann [Moderator] 11/22/2020 18:30:54
this is empty for you?
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/780138255940583424/unknown.png)
%end


you can add an extra project path / Proto search location under

Tools > Preferences > Extra projeccts path


also, perhaps your environment variables are not set correctly


do you have any example robots/ devices you can load?

##### coelhogi 11/22/2020 18:36:24
This is the project.
> **Attachment**: [folder.zip](https://cdn.discordapp.com/attachments/565154703139405824/780139638832234543/folder.zip)


I believe the code is not properly done also. Because I want each while of the code to be a frame and be played one at a time.

##### FlySoHigh 11/22/2020 18:40:25
I see most of the content in the Webots project folder (i.e. the protos therein, cf. the attached screenshot). And I can also add those robots. But the folder "devices" is not even in the list. Might this be related to the environment variables? Thank you for your support!
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/780140652855820299/unknown.png)
%end


When adding the path to the extra project paths, the content therein is still not found...
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/780141311713738783/unknown.png)
%end

##### Simon Steinmann [Moderator] 11/22/2020 18:45:12
`@coelhogi` I'm pretty sure the controller is the issue

##### coelhogi 11/22/2020 18:47:26
`@Simon Steinmann`  But even if I run the simulation without any controller it seems to move.

##### Simon Steinmann [Moderator] 11/22/2020 18:50:54
not for me


For performance purposes and to make it more stable, you should simplify your collision models with cylinders, capusles and boxes

##### coelhogi 11/22/2020 19:03:03
okay, thank you `@Simon Steinmann`

##### Stefania Pedrazzi [Cyberbotics] 11/23/2020 07:21:21
`@FlySoHigh` Please note that only nodes that can be inserted in the field selected in the scene tree are displayed in the `Add Node..` dialog. So if you want to add a sensor, like the `Kinect` one you should make sure that the selected field is a `children` field descending from a `Robot` node.


Webots doesn't have a C# API, so you cannot write yor controller directly in C#.

But your could write a Webots controller wrapper (in any programming language) that communicates with your C# program and forward the commands and requests to Webots.


We need some information to inspect the reason of the crash.

If you could reproduce it systematically, then please open a bug report on GitHub  describing the exact procedure to make Webots crash.

Thank you!

[https://github.com/cyberbotics/webots/issues/new?template=bug\_report.md](https://github.com/cyberbotics/webots/issues/new?template=bug_report.md)


This is just a warning because it known that having physical objects with very different sizes and weights could cause instabilities.

The two options to make the system more stable are to increase the mass (as it seems you already did but probably the value is still too small) or changing the inertia matrix of the problematic object. The inertia matrix can be shown from the scene tree view by selecting the object.


Usually this occurs for heavy robots.

In this case, you have to reduce the `softCFM` in the  `WorldInfo.contactPropetries` of your simulation.

In the `pr2.wbt` world file your can find an example:

[https://github.com/cyberbotics/webots/blob/master/projects/robots/clearpath/pr2/worlds/pr2.wbt#L13](https://github.com/cyberbotics/webots/blob/master/projects/robots/clearpath/pr2/worlds/pr2.wbt#L13)

##### FlySoHigh 11/23/2020 07:54:20
Thank you Stefania, your explanation made it very clear for me. When adding nodes in the "children" sub-tree, all the devices show up in the "Add node" dialog. Happy to get started now with the simulation 🙂

##### PickL 11/23/2020 08:49:03
Hi, Is it possible to extract the battery charge information from the Electric Engine model, e.g. from Tesla3 car model? Specifically, is it possible for us to model the battery or extract battery charge or related parameters from the Tesla3 Electric Vehicle engine?

##### Olivier Michel [Cyberbotics] 11/23/2020 08:59:29
No, this is not implemented as is in the current PROTO model of the Tesla3 car model. But you could configure the battery field and use the robot API to retrieve the battery level. See the documentation here: [https://cyberbotics.com/doc/reference/robot#wb\_robot\_battery\_sensor\_get\_value](https://cyberbotics.com/doc/reference/robot#wb_robot_battery_sensor_get_value)

##### PickL 11/23/2020 09:32:50
Thanks `@Olivier Michel` . It would be great to already include it as part of the Tesla3 car model. That would give a handle towards electric vehicle simulation.

##### Olivier Michel [Cyberbotics] 11/23/2020 09:45:27
Sure. If you manage to add it and calibrate it, I would be happy that you could contribute a GitHub Pull Request about it.

##### PickL 11/23/2020 09:52:39
Sure. If I manage it, I would contact you.

##### Simon Steinmann [Moderator] 11/23/2020 14:45:21
`@Stefania Pedrazzi` The crashed only occured when having an optimal thread count above 1. I set it to 1 and dont have the issue anymore

##### SebasRG 11/23/2020 17:35:04
Hi everyone, I have a problem with my code, I'm programming in python to communicate a robot in Webots and at the same time control this robot from Matlab. So I'm using serial communication but when I start the simulation, it doesn't run in real-time. I send different commands from matlab but in Webots doesn't run the simulation.


Look at this, thanks
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/780486757871386624/unknown.png)
%end


I have been proving in PyCharm a simple code to demostrate serial communication is functional


Here!!
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/780487111450427424/unknown.png)
%end

##### nedmohr 11/24/2020 03:59:35
I had the same problem.  It's probably too late to help you, but for anyone else, you have to double click on the robot.   I spent over an hour on that.

##### Darko Lukić [Cyberbotics] 11/24/2020 07:53:37
Hello `@SebasRG` , I am not sure if I understand. If you control the Webots robot from MATLAB then the issue is in the MATLAB script.

##### jmarsik 11/24/2020 16:31:01
Hello, I would like to include a custom sensor in the simulation, which will be computed in supervisor controller code. How should I do that, what objects could I use to represent the sensor? The sensor data should be published to ROS. Imagine a special sensor that is connected to robot GPIO in the real world. Could I used LED objects? Or simple fields in robot PROTO definition?

##### Olivier Michel [Cyberbotics] 11/24/2020 16:35:45
There are different approaches to this. One approach is to implement your sensor as a Robot node with the supervisor field set to TRUE and use an Emitter to send sensor values to the robots which will use a Receiver device to read the sensor values. Instead of the Emitter/Receiver, you may also write data in the customData field of the Robot nodes to communicate between your supervisor and robots.

##### Simon Steinmann [Moderator] 11/24/2020 16:52:15
First time working with multiple robots. What happens when several robots call the step function? Does a sim step get executed every time, or only when all controllers have called the step function?

##### Olivier Michel [Cyberbotics] 11/24/2020 16:52:36
Only when all have called it.

##### Simon Steinmann [Moderator] 11/24/2020 16:52:51
is it the same if it's multiple supervisors?

##### Olivier Michel [Cyberbotics] 11/24/2020 16:52:56
Yes.

##### Simon Steinmann [Moderator] 11/24/2020 16:53:00
okay good 🙂


thx


btw, I've been helping someone with Inverse kinematics. Got it running on windows too. Might be able to so a more universal integration, on all OS

##### Olivier Michel [Cyberbotics] 11/24/2020 16:54:31
Sounds good.

##### jmarsik 11/24/2020 18:09:48
Ok so I can have a receiver on my simulated robot with radio type and a supervisor robot with emitter. The supervisor code will compute sensor values and emit them. Then in the ROS controller (we are using an extern controller approach) I will read received data and publish them on ROS topics. Sounds perfect!

##### Simon Steinmann [Moderator] 11/24/2020 18:10:24
`@jmarsik` your ROS controller can be a supervisor. makes it easier

##### jmarsik 11/24/2020 18:11:37
Yeah, that is also a possibility.

##### coelhogi 11/24/2020 18:25:13
Hello! I am working on a controller for my robot in Webots. Is there anyone that knows how to code and knows the Webots controller so that we could talk and help me? I started a code in C++ but I would like to know how it is properly done because  I used 'while' but it seems not to be what I want to do.

##### Simon Steinmann [Moderator] 11/24/2020 18:33:46
[https://www.cyberbotics.com/doc/guide/index](https://www.cyberbotics.com/doc/guide/index)


there is many great guides and tutorials


there is also multiple sample worlds with sample controllers

##### Steven37 11/25/2020 16:22:19
In the picture, in the droplist of DEF SagaThorvald Group's children, I want to create four identical shapes which is the shape you see in the image below. But when I created 2 of them, it feels like they stick together. I still want them to be joined together but I don't know how to move each to the position I want because I can't find a place to adjust their translation. So can anyone help me, please?
%figure
![Webots_sagaThorvald.JPG](https://cdn.discordapp.com/attachments/565154703139405824/781193061383274536/Webots_sagaThorvald.JPG)
%end

##### Simon Steinmann [Moderator] 11/25/2020 16:23:58
`@Steven37` Add a "Transform" node as the parent of the "Shape" node


Saga > children > transform > children > shape

##### Steven37 11/25/2020 16:34:51
`@Simon Steinmann` thank you!

##### owongcho 11/26/2020 01:15:11
hello, is there a way to swap between end effectors during simulation using the controller of the robot?

##### Olivier Michel [Cyberbotics] 11/26/2020 06:41:25
What do you mean exactly?

##### owongcho 11/26/2020 07:48:32
I mean, if I have a gripper attached to a robot arm (e.g., IRB4600) and I need to change the attached gripper for a different gripper during simulation, it is possible to do this using supervisor functions instead of changing the two grippers by manually editing the nodes?

##### Olivier Michel [Cyberbotics] 11/26/2020 07:53:57
Yes, you can use the supervisor API to do this. Don't forget to reset the physics of the robot from the supervisor API after you change the effector. You will need [https://cyberbotics.com/doc/reference/supervisor#wb\_supervisor\_field\_remove\_mf](https://cyberbotics.com/doc/reference/supervisor#wb_supervisor_field_remove_mf) to remove the effector, [https://cyberbotics.com/doc/reference/supervisor#wb\_supervisor\_field\_import\_mf\_node](https://cyberbotics.com/doc/reference/supervisor#wb_supervisor_field_import_mf_node) to import the new effector and [https://cyberbotics.com/doc/reference/supervisor#wb\_supervisor\_node\_reset\_physics](https://cyberbotics.com/doc/reference/supervisor#wb_supervisor_node_reset_physics) once the change is done to stabilize the physics of the arm.

##### deej 11/26/2020 11:23:42
Hi, I have a problem with object falling through floor. I have tried to find an answer on the internet but even though I have found the WeBots physics documentation it didnt really help.
> **Attachment**: [2020-11-26\_12-19-44.mkv](https://cdn.discordapp.com/attachments/565154703139405824/781480296968617985/2020-11-26_12-19-44.mkv)

##### Stefania Pedrazzi [Cyberbotics] 11/26/2020 12:33:40
Hi `@deej`, usually the cylinder should not fall through the floor.

From the video I don't see the details of the WorldInfo and FLOOR nodes.

Maybe using the default Floor PROTO node (from the Add Node dialog) and resetting all the changes to the WorldInfo will help you better identifying the source of the issue.

##### F\_Nadi 11/26/2020 12:49:02
Hi all, according to my previous question and `@KajalGada`  answer (in <#565155720933146637>), I cannot rotate my robot as much as an exact degree. so I want to check it manually by a 'while' loop. It means I will rotate my robot until the difference between start degree of the robot and current degree is equal to my desired degree. The robot has a rotation vector of size 4 (rx, ry, rz and angle), how can I calculate a number as robot's degree with world coordinate system (degree between a vector that shows robot direction and world coordinate system)?

##### Simon Steinmann [Moderator] 11/26/2020 12:50:29
[https://www.andre-gaschler.com/rotationconverter/](https://www.andre-gaschler.com/rotationconverter/) this can be very useful for checking and calculating fixed values


in general it is best to use 3x3 rotation matrices or quaternion rotation if you wanna do dynamic rotation calculations. If you use python, this library is extremely useful [https://matthew-brett.github.io/transforms3d/](https://matthew-brett.github.io/transforms3d/)

##### F\_Nadi 11/26/2020 12:53:19
Thanks a lot `@Simon Steinmann`.

##### deej 11/26/2020 12:54:13
`@Stefania Pedrazzi` Here I am sending my world info, floor, and cylinder nodes
%figure
![worldinfo.JPG](https://cdn.discordapp.com/attachments/565154703139405824/781503078687309834/worldinfo.JPG)
%end



%figure
![Cylinder_and_floor.JPG](https://cdn.discordapp.com/attachments/565154703139405824/781503091933315072/Cylinder_and_floor.JPG)
%end


and the only reason why i created custom floor was because it didnt work either.

##### Darko Lukić [Cyberbotics] 11/26/2020 12:58:53
It seems that your cylinder is too heavy. Try reducing the mass (e.g. to 1kg) to verify if the mass is an issue.



If the mass is the issue then check this out:

[https://cyberbotics.com/doc/guide/modeling#my-robot-is-heavy-and-sinks-into-the-ground-constantly](https://cyberbotics.com/doc/guide/modeling#my-robot-is-heavy-and-sinks-into-the-ground-constantly)

##### deej 11/26/2020 13:01:07
Hey, thanks very much. Now it works flawlessly, who would have thought that there is such a thing as "my robot si too heavy and sinks through the ground" 😄

##### Whizbuzzer 11/26/2020 13:46:06
Hello guys. Does anyone know how to establish a connection between two epuck robots?

##### Simon Steinmann [Moderator] 11/26/2020 13:46:34
emitter and receiver

##### Whizbuzzer 11/26/2020 13:50:54
I figured out that I would have to use these two nodes but I couldn't figure out how to put them into the controller (sorry I'm not that good at programming). As in, originally, I have the basic Braitenberg controller, but I have trouble figuring out how to add the emitter and receiver parts into it. Webots site has just the code snippets. Could someone please provide an example of emitter-receiver implementation?

##### owongcho 11/26/2020 14:59:39
`@Olivier Michel` thanks for the information. I am trying to use the def removeMF(self, index):  supervisor.removeMF('gripper',1), but I am getting this error AttributeError: 'Supervisor' object has no attribute 'removeMF'.  What I am doing wrong? Is there a example that has implemented this supervisor API function?

##### Simon Steinmann [Moderator] 11/26/2020 16:03:43
you have to select the specific node of which you want to remove a field

##### owongcho 11/26/2020 17:09:11
I don't know what I doing wrong because I have tried different options (see picture). The error I am getting is: return \_controller.Field\_removeMF(self, index)

TypeError: in method 'Field\_removeMF', argument 1 of type 'webots::Field *'
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/781567242529407037/unknown.png)
%end

##### Simon Steinmann [Moderator] 11/26/2020 18:31:44
you first have to select that field


try 

`handSlotField = supervisor.getField("handSlot")

handSlotField.removeMF(0)`


wait, that's a node


idk, try it. might work

##### AngelAyala 11/26/2020 19:09:47
Hello there!, anyone knows if is possible to know if a Robot node has collided with another object? maybe using the Supervisor node

##### Darko Lukić [Cyberbotics] 11/26/2020 21:38:09
`@AngelAyala` , You can use "bumper":

[https://cyberbotics.com/doc/reference/touchsensor#bumper-sensors](https://cyberbotics.com/doc/reference/touchsensor#bumper-sensors)


Alternatively, you can use a physics plugin:

[https://www.cyberbotics.com/doc/reference/physics-plugin](https://www.cyberbotics.com/doc/reference/physics-plugin)

##### Whizbuzzer 11/26/2020 21:39:47
> I figured out that I would have to use these two nodes but I couldn't figure out how to put them into the controller (sorry I'm not that good at programming). As in, originally, I have the basic Braitenberg controller, but I have trouble figuring out how to add the emitter and receiver parts into it. Webots site has just the code snippets. Could someone please provide an example of emitter-receiver implementation?

`@Whizbuzzer`  could anyone please help me with this?

##### deej 11/26/2020 21:43:21
Well, here I am again, this time I have a problem with emmiter/reciever. For some reason the recieved data are not scalar eventhough i am sending a scalar. Or am I not?
%figure
![emmiter.JPG](https://cdn.discordapp.com/attachments/565154703139405824/781636237089177621/emmiter.JPG)
%end



%figure
![reciever.JPG](https://cdn.discordapp.com/attachments/565154703139405824/781636240721444874/reciever.JPG)
%end


I have a function that only accepts (1,1) scalar... and i get error there

##### Darko Lukić [Cyberbotics] 11/26/2020 21:46:23
One useful tip. Webots has a very rich collection of examples. When you need an example, just go `File > Open Sample World...` and search for example you need. E.g. in your case, the keyword would be `emitter`.
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/781637004223709214/unknown.png)
%end


You can send and receive an array only, scalar values are not supported. If you need to send a single value, you can send it as an array of one element.

##### deej 11/26/2020 21:50:13
Ahhh, I see. Thank you 🙂


I still have a problem with it. Im trying all sort of methods to convert the 1x1 array into single value. What is the right way to do it? Sorry for such a noobish question 😄

##### SeanLuTW 11/27/2020 07:15:31
I want to write the console output to a file, including the error and warning. I launch webots with command `$ webots [my_world].wbt --stdout --stderr 2>&1 >file.log`, but only standard output wrote into the file, the error still displayed on the terminal. Do I used the redirection operators incorrectly?

##### Darko Lukić [Cyberbotics] 11/27/2020 08:14:18
`@SeanLuTW` 

```bash
webots [my_world].wbt --stdout --stderr &>file.log
```

This should work

##### Steven37 11/27/2020 08:30:36
I have defined a group called sagaThorvald in the children section of the Robot node. Now, in the boundingObject section, I want to reselect the group defined above but I can't see it in the USE section. Can anyone explain to me why and how to fix it, please?
%figure
![Webots_sagaThorvald2.JPG](https://cdn.discordapp.com/attachments/565154703139405824/781799125925494794/Webots_sagaThorvald2.JPG)
%end

##### Olivier Michel [Cyberbotics] 11/27/2020 08:37:26
That because a boundingObject can have only a specific structure, e.g., a Group that contains only one level of Transform nodes and your sagaThorvald object probably doesn't meet this requirement.


See rules here: [https://cyberbotics.com/doc/reference/solid#how-to-use-the-boundingobject-field](https://cyberbotics.com/doc/reference/solid#how-to-use-the-boundingobject-field)

##### Steven37 11/27/2020 09:18:56
`@Olivier Michel` So in this case, can I choose the boundingObject for my DIY mobile robot as a box? Will it affect my robot's performance?

##### Olivier Michel [Cyberbotics] 11/27/2020 10:15:53
I don't think a fairly simple bounding object will affect the simulation performance.

##### Steven37 11/27/2020 10:18:40
`@Olivier Michel` ok thank you


`@Olivier Michel` However, the boundingObject can not cover my whole robot and I don't know how to extend it. Also, is it the reason when I tried to control its wheels, it didn't move? Thank you!

##### Olivier Michel [Cyberbotics] 11/27/2020 13:19:35
A bounding object can be composed of several primitive shapes. Please follow this tutorial to understand how to build a complex bounding object: [https://cyberbotics.com/doc/guide/tutorial-5-compound-solid-and-physics-attributes](https://cyberbotics.com/doc/guide/tutorial-5-compound-solid-and-physics-attributes)

##### owongcho 11/27/2020 15:59:45
I tried it, but didnt work. After many trial, this worked for me:

robot=supervisor.getFromDef('Robot')

handslot=Node.getField(robot,'handSlot')

Field.removeMF(handslot,0)



My question is why the Index in Field.removeMF(fieldName, Index) is bound to -1 and 0?

##### Simon Steinmann [Moderator] 11/27/2020 16:01:42
`@owongcho` -1 is the last index, -2 would be the second last. 0 is the first. If you only have one field, -1 is the last and first entry at the same time

##### owongcho 11/27/2020 16:03:13
ok. Thank you!

##### deej 11/27/2020 16:23:00
**Recieved value does not meet the condition (1,1)**

Using a Matlab I have encountered a problem with emitter and receiver. I use a simple condition in my PID class, input must be (1,1) in other words scalar. But when I send a single value and receive it the received value is not meeting the condition "must be (1,1)".

I tried all sorts of methods to convert the received 1x1 array to scalar like:



`recieved_array = receiver.get_data()`

`scalar = received_array(1)`

`scalar = recieved_array{1}`

`scalar = cell2mat(array);`



I also tried 



`size(scalar)`

`class(scalar)`



and I got that the scalar was indeed `(1,1) 'double'`. So that raises even more questions why does it not work. 



Nothing worked but luckily for me it was not big of a problem, after all, I just removed the conditions and it works. But I can imagine someone having a problem with it.

##### owongcho 11/27/2020 17:55:10
`@Olivier Michel` `@Simon Steinmann` Thanks for your guidance, I am able to modify a field in my robot node.  Now, I am having the following issue: Initially, the robot has a gripper, then I start the simulation with the functions Field.removeMF(handslot,0) and Field.importMFNode(handslot,0,path), which run fine - removed the gripper and then added the same gripper back. However, when I reset the simulation, the original gripper disappears, shouldn't it be restored to the initial state of having the robot with the gripper?

##### Simon Steinmann [Moderator] 11/27/2020 17:55:56
you probably have to reload the world

##### owongcho 11/27/2020 18:07:00
reloading the world will restore it to my last saved World version. but I am wandering why the gripper keep removed after resetting the simulation because during the simulation, my last executed function is the Field.importMFNode(handslot,0,path)?

##### Simon Steinmann [Moderator] 11/27/2020 18:09:13
[https://www.cyberbotics.com/doc/guide/the-user-interface#file-menu](https://www.cyberbotics.com/doc/guide/the-user-interface#file-menu)


this explains what reset does


I dont think the function has dynamic adding / remmoving of nodes in ind


mind*

##### owongcho 11/27/2020 18:15:59
I see. Thank. I am try adding a save function just after importing function to keep the gripper even after resetting the simulation.

##### Simon Steinmann [Moderator] 11/27/2020 18:20:36
you can also reset certain things separately, like controllers, physics etc.

##### Whizbuzzer 11/27/2020 19:45:05
Guys any idea how to set the buffer size on the epuck receiver? I have been trying to find a way to do so but for some reason, the queue length is remaining zero. So I thought setting a bufferSize could do the trick.

##### JavierGraca97 11/27/2020 20:49:56
`@Olivier Michel` hi i'm starting robot simulation with nao and we want to test you some pulsating neural network algorithms. before working with the AI ​​we are working with the initiating sensors, generating movements and we want to do recognition but we could not establish it because we could not create the recognition node. they would be so kind to send me information to generate the acknowledgments node. and finally the recognition node is created in the .proto file?

##### coelhogi 11/28/2020 02:35:51
Hey! How can I set a delay in the controller code? I'm doing it in C++ but is seems like Sleep is not working. All the required includes are in the code. Thanks in advance.

##### Whizbuzzer 11/28/2020 04:41:45
How do I comment out multiple lines in Webots?


Is there any shortcut?

##### watchdogs132 11/28/2020 08:03:43
Hello . Something weird happening with my webots (r2020b) . When I try to build my project , the console gets stuck after showing copying (name).exe , the dialog box (reload reset cancel) is not popping up .  Also webots is not opening when I try to open a specific project .

##### Steven37 11/28/2020 11:31:55
Can anyone explain to me why I have named device RotationalMotor and get the device with that name in the controller section but I get the error "device not found", please? I checked and made sure I named and used the correct names for those 4 devices, in the image below I take an example with device "wheelFR".
%figure
![Webots_saga2_LI.jpg](https://cdn.discordapp.com/attachments/565154703139405824/782207142676660224/Webots_saga2_LI.jpg)
%end

##### Simon Steinmann [Moderator] 11/28/2020 12:51:00
`@Steven37` It might be that you are using the same name for the DEF of the joint. Make sure all names and DEFs are unique. Perhaps name the motors "wheelFRmotor"

##### Whizbuzzer 11/28/2020 13:44:17
Is it possible for an epuck's IR sensor to function as a light sensor as well as a proximity sensor at the sensor at the same time?

##### Simon Steinmann [Moderator] 11/28/2020 13:52:33
`@Whizbuzzer` can you elaborate on what you mean exactly?


distance sensor API

[https://www.cyberbotics.com/doc/reference/distancesensor?tab-language=python](https://www.cyberbotics.com/doc/reference/distancesensor?tab-language=python)

Ligth sensor API

[https://www.cyberbotics.com/doc/reference/lightsensor?tab-language=python](https://www.cyberbotics.com/doc/reference/lightsensor?tab-language=python)



These links might help

##### Whizbuzzer 11/28/2020 13:59:27
What I am trying to do is use an epuck's IR sensors 0 and 7 as both, light sensors and distance sensors so that when a condition = (both light sensor values > 0) and (flag==1), the puck will send a message to a receiver. The receiver has an LED mounted into it.

##### Simon Steinmann [Moderator] 11/28/2020 14:00:45
A single sensor can only operate in one mode. If you can extract several things from the same sensor data, then it can work

##### Whizbuzzer 11/28/2020 14:01:17
Also, regarding the LED, this might sound stupid, but I have placed the LED sphere "into" the receiver robot, which is a cylinder. Would an LED work if I do that? I sure am seeing its range if I do that.

##### Simon Steinmann [Moderator] 11/28/2020 14:02:07
you can put any device inside of a robot node


And you can put any shape into the LED children field [https://www.cyberbotics.com/doc/reference/led?tab-language=python](https://www.cyberbotics.com/doc/reference/led?tab-language=python)

##### Whizbuzzer 11/28/2020 14:20:38
Also, another question, the light sensor on my epuck doesn't have none-zero values upon entering the range of an LED, but its values become non-zero after exiting that range and stay non-zero for quite some time before returning to zero


So does that indicate some sort of noise? If so then how do I remove that noise?

##### Simon Steinmann [Moderator] 11/28/2020 14:21:44
what exactly are you using for the light sensor?

##### Whizbuzzer 11/28/2020 14:23:17
I am using epuck's light sensors 0 and 7 (frontmost ones) to detect the LED on another robot. I have modeled that LED according to the sample world, "led.wbt"

##### Simon Steinmann [Moderator] 11/28/2020 14:23:32
[https://www.cyberbotics.com/doc/reference/lightsensor?tab-language=python](https://www.cyberbotics.com/doc/reference/lightsensor?tab-language=python) read this


and especially how lookup tables work:

[https://www.cyberbotics.com/doc/reference/distancesensor?tab-language=python#lookup-table](https://www.cyberbotics.com/doc/reference/distancesensor?tab-language=python#lookup-table)


i'm guessing the noise is due to the 3rd value of your lookup table

##### Steven37 11/28/2020 14:53:29
When I control 4 wheels to make the robot move, it acts like the video I have attached. So can anyone guess what was causing this problem? Can anyone save me, please?
> **Attachment**: [3Y\_project\_Saga\_thorvald\_agri\_w8.mp4](https://cdn.discordapp.com/attachments/565154703139405824/782257869437009930/3Y_project_Saga_thorvald_agri_w8.mp4)

##### Whizbuzzer 11/28/2020 14:54:25
Your axis of rotation of the wheel is not aligned with its shape


Did you check out the tutorial?

##### Simon Steinmann [Moderator] 11/28/2020 14:54:38
you have to add a transform node before the joints to position them


when you click on a hingejoint in your scene tree, it shows the origin of the joint. Move that with a tranform node to where you want it to be


Robot > children > tranform > children > hingejoint > endPoint Solid


the enPoint Solid being your wheel

##### Whizbuzzer 11/28/2020 15:19:17
How do I modify a custom receiver node's range? For some reason, it is able to receive messages from an epuck no matter how far the epuck is.

##### Simon Steinmann [Moderator] 11/28/2020 15:20:09
all in the API reference 😉 [https://www.cyberbotics.com/doc/reference/receiver?tab-language=python](https://www.cyberbotics.com/doc/reference/receiver?tab-language=python)


in case you did not know, you can just rightclick on something in webots and click help. It shows you all API documentation

##### Whizbuzzer 11/28/2020 15:35:48
I did check out the receiver documentation. But it does not say anything about its range unlike the emitter.

##### Simon Steinmann [Moderator] 11/28/2020 15:38:35
> signalStrengthNoise: standard deviation of the gaussian noise added to the signal strength returned by wb\_receiver\_get\_signal\_strength. The noise is proportionnal to the signal strength, e.g., a signalStrengthNoise of 0.1 will add a noise with a standard deviation of 0.1 for a signal strength of 1 and 0.2 for a signal strength of 2.


The Signal range you have to set in the emitter

##### Steven37 11/28/2020 15:42:33
`@Simon Steinmann` How can I add the Transform node before the hingejoint? Do I need to rebuild it?

##### Simon Steinmann [Moderator] 11/28/2020 15:43:25
`@Steven37` you add a Transform node on the same level as the hingejoint, then you just cut the hingejoint and put it in the Transform's children field

##### Whizbuzzer 11/28/2020 16:05:31
epuck's emitter range is coming out to be -1 which I believe means infinite. Would I have to modify it into finite values then? I was under the assumption that epuck's emitter range would be the same as the range for the distance sensors. Also, `@Simon Steinmann` thank you very much for the responses. I am indeed going through the documentations before asking questions.

##### Steven37 11/28/2020 16:11:00
`@Simon Steinmann` I have already followed what you instruct but there are still some problems like in the video. Can you check for me again, please?
> **Attachment**: [3Y\_project\_Saga\_thorvald\_agri\_w82.mp4](https://cdn.discordapp.com/attachments/565154703139405824/782277375782158356/3Y_project_Saga_thorvald_agri_w82.mp4)

##### Simon Steinmann [Moderator] 11/28/2020 16:40:39
send your world file

##### Steven37 11/28/2020 16:50:00
Is it what you need?
> **Attachment**: [3Y\_project\_Saga\_thorvald\_agri.wbt](https://cdn.discordapp.com/attachments/565154703139405824/782287191182278697/3Y_project_Saga_thorvald_agri.wbt)

##### Simon Steinmann [Moderator] 11/28/2020 17:09:43
yes


okay, so you have to move the hingejoint by changing the tranlation of the Transform node


and remove the translation of the end point solid


if you change the translation of endPoint by anything except along the rotational axis, you will get the issue you are currently having


what is highlighted here needs to be changed to position the origin of the joint
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/782292764246802462/unknown.png)
%end

##### Whizbuzzer 11/28/2020 20:22:15
For some reason, the epuck's IR sensor is having non-zero values even when all light sources (including directional light) are turned off.


Can someone help me with this?

##### Simon Steinmann [Moderator] 11/28/2020 20:24:23
it's a distance sensor of the type IR, not a IR light sensor


[https://www.cyberbotics.com/doc/reference/distancesensor?tab-language=python#distancesensor-types](https://www.cyberbotics.com/doc/reference/distancesensor?tab-language=python#distancesensor-types)

##### Whizbuzzer 11/28/2020 20:25:19
But it can also function as a light sensor according to the documentation

##### Simon Steinmann [Moderator] 11/28/2020 20:26:12
where?

##### Whizbuzzer 11/28/2020 20:27:17

%figure
![image0.jpg](https://cdn.discordapp.com/attachments/565154703139405824/782341870415511582/image0.jpg)
%end

##### Simon Steinmann [Moderator] 11/28/2020 20:27:36
those are not IR sensors but light sensor

##### Whizbuzzer 11/28/2020 20:27:38
It has light sensors ls0 to ls7 and they occupy same positions as proximity sensors


So I have initialized ls0 and ls7 in a similar fashion to distance sensors. But the values of the light sensors just don't become 0.


Guys does anyone have any knowledge on the LightSensors of epuck? It was kind of strange that those LightSensors detected even light from DirectionalLight and TexturedBackgroundLight nodes, even stranger that their values were non-zero when they were in the same direction as the device's shadow, and zero when they were in the opposite direction to the device's shadow.


Is there a way to get the simulation timer? I want to make a condition such that:



After timer = 5 seconds:

     condition happens


Does epuck have directional bluetooth transmission/reception?

##### Simon Steinmann [Moderator] 11/29/2020 10:28:25
[https://www.cyberbotics.com/doc/reference/robot?tab-language=python#wb\_robot\_get\_time](https://www.cyberbotics.com/doc/reference/robot?tab-language=python#wb_robot_get_time) to get the simulation time


you can change the aperture of emitter and receiver

##### Srivastav\_Udit 11/29/2020 15:28:36
Hi, I am planning to add a caster wheel (spherical shaped) to balance my 2 wheeled robot. Could you please recommend the best joint to use for this and a possible example I could refer?


I haved used a  hinge joint for now but for some reason my robot is only able to go back and forth for a very short distance like a boomerang.

##### Simon Steinmann [Moderator] 11/29/2020 17:04:48
`@Srivastav_Udit` You could use a hinge2joint. it has 2 degrees of freedom, thus can model a caster / ball joint / sphere

##### Rosalie van Ark 11/29/2020 17:36:35
Is there a way to run 2 controllers at once? I am working with a NAO and a Pedestrian

##### Whizbuzzer 11/29/2020 17:38:28
You can try fusing the two controllers instead. Look at the emitter\_controller.wbt sample. In that, they have put emitter and receiver controllers in one program instead and fed that program to an emitter robot and a receiver robot.

##### Simon Steinmann [Moderator] 11/29/2020 17:39:00
each robot has one controller


but you can put as much functionality into one controller as you like


and you can have as many robots per simulation as you like

##### Rosalie van Ark 11/29/2020 17:42:07
But currently when I try running the world it only loads 1 of the controllers, how do I fix it in such a way that it will run the 2 controllers simultaneously?

##### Whizbuzzer 11/29/2020 17:44:25
If you’re talking about the window on the right, you can just open up a new controller. If you are saying that one robot runs a controller and other doesn’t, then you gotta feed a controller into the non-working robot’s controller field.

##### Rosalie van Ark 11/29/2020 17:51:39
The problem is that the pedestrian already knows its controller, but as you can see in the console it only wants to run the NAO file and I don't get why it only wants to run the NAO file
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/782665092038393866/unknown.png)
%end

##### Simon Steinmann [Moderator] 11/29/2020 17:56:37
reload the world just as a sanity check


it's always a good first troubleshooting step


if it doesnt work, feel free to post the world file

##### Rosalie van Ark 11/29/2020 18:01:35
Didn't work unfortunately so here is the world file:
> **Attachment**: [Simple\_World.wbt](https://cdn.discordapp.com/attachments/565154703139405824/782667592392245248/Simple_World.wbt)

##### Simon Steinmann [Moderator] 11/29/2020 18:09:07
alright had to check the Proto source


you have to add "false" to the ControllerArgs


by default the Pedestrian is static


if you right click on a model, you can select "view Proto source"


`@Olivier Michel`  perhaps this should be mentioned somewhere, or it should be an exposed field.

##### Rosalie van Ark 11/29/2020 18:15:37
It works! Thank you very much for the help😁

##### Simon Steinmann [Moderator] 11/29/2020 18:17:29
[https://tenor.com/view/salute-minons-gif-8721605](https://tenor.com/view/salute-minons-gif-8721605)

##### Srivastav\_Udit 11/29/2020 18:23:05
Here's the file with the 2 wheeled robot, could you please tell me how to configure the joint?
> **Attachment**: [WORKS\_SLIGHT\_MOVEMENT.wbt](https://cdn.discordapp.com/attachments/565154703139405824/782673002122444880/WORKS_SLIGHT_MOVEMENT.wbt)

##### Simon Steinmann [Moderator] 11/29/2020 18:25:04
it's not working?

##### Srivastav\_Udit 11/29/2020 18:26:01
it moves very slightly and I am not sure how I set the parameters for it to move

##### Simon Steinmann [Moderator] 11/29/2020 18:26:13
you want it to be motorized?

##### Srivastav\_Udit 11/29/2020 18:26:39
Nope, I just want it to be an additional support  to the 2 wheels


Just for balancing purposes

##### Simon Steinmann [Moderator] 11/29/2020 18:27:30
I dont think that you need motor devices then


delete the motor


and I'd put the joint into a transform node and use that to position it


and leave the anchor and translation of the ball at 0 0 0


might not be needed, but might help. I've never used hinge2joints myself

##### Srivastav\_Udit 11/29/2020 18:30:07
I'm sorry I don't quite understand this

##### Simon Steinmann [Moderator] 11/29/2020 18:31:48
you do know that your robot is several meters big?

##### Srivastav\_Udit 11/29/2020 18:32:11
Yes

##### Simon Steinmann [Moderator] 11/29/2020 18:33:00
your bot is super wonky, it's origin is meters below the ground

##### Srivastav\_Udit 11/29/2020 18:33:18
I'm actually new to the Webots environment and I have tried importing this current model from Fusion360

##### Simon Steinmann [Moderator] 11/29/2020 18:35:05
I recommend having the robot's origin in the base Plate for example


all your mesh files have an huge offset from their center

##### Srivastav\_Udit 11/29/2020 18:37:02
Okay, would you recommend brining the components together on Webots itself?

##### Simon Steinmann [Moderator] 11/29/2020 18:57:18
Yeah probably

##### Srivastav\_Udit 11/29/2020 18:59:22
Okay, I will do that


How do I fix the issue with the caster wheel?

##### Simon Steinmann [Moderator] 11/29/2020 20:24:54
once your robot is set up correctly, the caster wheel will most likelyl work

##### Srivastav\_Udit 11/29/2020 20:25:32
I'll still have to assign it to be the endPoint?


And I'm not too sure about the jointParameters and devices - how do I configure those?


I've got the origin on the base plate and I have assembled the robot on Webots this time. I still don't get the desired result. I have used the hinge joint for the caster wheel. Could you please recommend how I can rectify this? `@Simon Steinmann`
> **Attachment**: [NEW\_BOT.wbt](https://cdn.discordapp.com/attachments/565154703139405824/782759167328124958/NEW_BOT.wbt)

##### Stefania Pedrazzi [Cyberbotics] 11/30/2020 07:16:49
Hi `@coelhogi`, you cannot use sleep because it will also block the simulation and not only your controller. The way to go is to pass the desired sleep time as argument of the `Robot::step(ms)` function: for example if you pass 1000 as argument, the simulation will go forward of 1 second and then start again the controller program execution.


Hi `@watchdogs132`, it is difficult to help you with this little information. You should provide more information and a step by step procedure to reproduce the issues.

##### Olivier Michel [Cyberbotics] 11/30/2020 07:25:39
Yes, that's a bid odd and we should probably add a field to turn it into non-static instead of this tricky `controllerArg` thing...


I just opened an issue about it: [https://github.com/cyberbotics/webots/issues/2480](https://github.com/cyberbotics/webots/issues/2480) and that's a "good first issue" because I believe it's pretty simple to implement, so anyone with a basic knowledge of Webots PROTOs should be able to implement it.

##### Steven37 11/30/2020 12:12:21
Hi, I'm quite new to Webots so now I want to create a farm environment like the one in the photo but I can't find any available objects that look like my desired crop. So how can I create them in Webots? Thank you!
%figure
![GetAttachmentThumbnail.png](https://cdn.discordapp.com/attachments/565154703139405824/782942092199591957/GetAttachmentThumbnail.png)
%end

##### Stefania Pedrazzi [Cyberbotics] 11/30/2020 12:19:18
Hi `@Steven37`, if you don't find any model in Webots you can import it from other formats.

Webots supports meshes from many different format (see the Mesh node [https://www.cyberbotics.com/doc/reference/mesh](https://www.cyberbotics.com/doc/reference/mesh))  so if you already have a 3D model of crops you can use it in Webots. Another option to import meshes in Webots is to use the Webots exporter plugin for Blender ([https://github.com/cyberbotics/blender-webots-exporter](https://github.com/cyberbotics/blender-webots-exporter)).

Alternatively, if you are not interested in any specific crop type you could try to use the tree models already existing in Webots and scale them down so that they match the desired crop size.

##### nozomi 11/30/2020 16:34:51
Hello, I want to simulate an electric vehicle in Webots and record the running range of it. Is there any build-in method to measure running range in Webots?

##### Simon Steinmann [Moderator] 11/30/2020 16:35:14
`@nozomi` Robots can have batteries

##### Justin Fisher 11/30/2020 19:58:32
Can anyone help diagnose this strange behavior?  My simulation works every other time I run it.  I.e., I hit play and it hangs at time=0.016.  I hit pause, reset, play again and it runs fine.  I hit pause reset and play again and it hangs again at time=0.16.  Back and forth...



I think it probably has something to do with the reset button resetting just some aspects of the simulation, not others, so there must be some element that it doesn't reset that is somehow toggling between two states, and in one state makes it hang.  Though I have no idea which aspects would somehow get toggled by this.  I also have no idea what is making it hang the half of the time that it does hang, since it doesn't display any diagnostic information when it hangs and half the time it works fine so it seems like everything I'm using is *capable* of working fine.


Hrm... now I partially fixed it, so that it hangs at time 0.016 upon world (re)load, but then works upon *every* reset after that, which is better than working on only *every* *other* reset, but still annoying.   I suspect the problem has something to do with my starting the simulation with robot nodes with physics but no bounding boxes and no solid parts.  These robots then use supervisor powers to spawn body parts for themselves.  If I set one such robot to have the "null" supervisor, the simulation hangs every other reset, whereas if I set it instead to use a supervisor that spawns body parts for it, then it hangs on the first run after world (re)load, but then works fine every reset after that.  It still seems mysterious to me that Webots will let me have such a robot every *other* run -- if such robots are problematic, why don't they make it hang *every* run?

##### Simon Steinmann [Moderator] 11/30/2020 20:21:50
Do you have any condition for your main loop or the step execution?


you could try setting that condition to True, just to test it out

##### Justin Fisher 11/30/2020 20:27:08
I don't think it actually makes it to the main loop when it hangs.  (At timestep 0, the robot controllers do nothing, to give a "ringmaster" supervisor the chance to install the right controllers onto robots.  At timestep 0.016 the two robots spawn body parts onto themselves, which apparently succeeds, since I can see the body parts appear on the robots, but then it hangs without entering their main loops, even though I don't think I'm executing many/any commands between the ones that I can see showing up in the display and the print("About to enter main loop") command that doesn't show up in the console.)


The console does seem to lag though, so I'm not sure how much I should trust it.  E.g., when it hangs, hitting reset makes it spit out a bunch more console printouts.

##### Simon Steinmann [Moderator] 11/30/2020 20:32:17
some step function is executed, ohterwise it would not be at 0.016


I would hunt for that


put print() steps in your code


perhaps disable robots, only have one controller going, find the problematic one

##### Justin Fisher 11/30/2020 20:33:49
yes, it gets to 0.016 because the controllers do virtually nothing at step 0, aside from calling step to advance to 0.016.


and yes I tried disabling one controller (by setting it to "void") -- that produced the hangs-every-other-time scenario -- it actually works better with that controller doing stuff rather than being void


Do you have a good understanding of which nodes in a robot need to have physics enabled?

##### Simon Steinmann [Moderator] 11/30/2020 20:36:35
try setting it to "none"


in general solid nodes have physics

##### Justin Fisher 11/30/2020 20:37:15
I'd like the robot node itself not to have a bounding object, and instead have everything with a bounding object be a child (or more distant descendant) of the robot node itself.


But my (admittedly murky) understanding of the docs is that, if I want those various children to be physically attached to one another, I need to enable physics on the robot node too


(*physically attached to each other and not to the environment)


------

Ok, I seem to have fixed the problem, by hitting reset at a point in the cycle where I expected it to be able to work on next run and then hitting save world, it managed to save whatever hidden state of the world was allowing it not to hang, so now it doesn't hang after reload anymore.  Weird...

##### Simon Steinmann [Moderator] 11/30/2020 21:02:15
hmmm


curious

## December

##### Olivier Michel [Cyberbotics] 12/01/2020 06:51:41
That is very strange indeed. It would be interesting to determine whether the hang occurs in one of your controllers (and if Robot.synchronization is TRUE, Webots will wait for them forever) or in Webots itself. A possibility to sort this out is to set all Robot.synchronization to FALSE and see whether the hang persists. Another possibility is to set all Robot.controller to the "void" controller. If the hang doesn't happen any more in both cases, it is very likely that the hang is due to one of your controllers. Otherwise, it's likely a bug in Webots.

##### Pragathi Praveena 12/01/2020 18:09:32
Hi! I am new to Webots and I am trying to add a camera in the environment whose position and rotation I can set programmatically. It looks like I cannot just add a camera - it has to be attached to a Solid node. Is there a way for me to set the translation and rotation of the Solid node programmatically, so that I can make the camera fly around the scene?

##### Simon Steinmann [Moderator] 12/01/2020 18:33:09
`@Pragathi Praveena` what exactly is your goal? Do you want to simulate a camera, or do you want to record your simulation in a specific way?


My approach would be to add a Robot node, add the camera as a child, and make the robot a supervisor


then you can give that camera-robot a controller, retrieve the image


To move the "robot" you can use the supervisor api


[https://www.cyberbotics.com/doc/reference/supervisor](https://www.cyberbotics.com/doc/reference/supervisor)

##### Pragathi Praveena 12/01/2020 18:39:40
I want to simulate a camera. But I don't want the movement of the camera to be constrained by the degrees of freedom of the robot. It would be ideal if the camera could move anywhere and be in any orientation.

##### Simon Steinmann [Moderator] 12/01/2020 18:40:37
that "robot"  node is just a basenode, that allows you to have a controller


a robot node in webots allows you to access any devices, motors and sensors under it


so you can have your main robot, and a second "camera bot" which only consists of the camera

##### Pragathi Praveena 12/01/2020 18:45:13
Yeah. That sounds like what I need. How do you set position/rotation with the supervisor node?

##### Simon Steinmann [Moderator] 12/01/2020 18:47:29
by changing the translation and orientation fields

##### Pragathi Praveena 12/01/2020 18:48:48
Okay. Thanks!

##### Simon Steinmann [Moderator] 12/01/2020 18:52:04
in python that would look something like that

cameraNode = supervisor.getSelf()

cameraPos = CameraNode.getField("translation")

cameraPos.setSFVec3f([x, y, z])


rotation is "setSFRotation"

##### Whizbuzzer 12/01/2020 20:06:33
Guys is there a way such that I can make 1 epuck detect multiple other epucks simultaneously? I am trying to implement a Multirobot algorithm which requires a robot to detect multiple other robots and take an action accordingly.

##### Simon Steinmann [Moderator] 12/01/2020 20:37:08
You can have each bot broadcast their odometry with emitters

##### Whizbuzzer 12/01/2020 20:42:09
The problem with this is that my project is designed to be computationally simple, meaning no odometry or camera related tasks, and the moving robots navigate by exchanging "pheromone" signals with the stationary robots.

##### Simon Steinmann [Moderator] 12/01/2020 21:07:26
you can have emmiters with limited range


emitting "pheromones", which others can pick up with receivers

##### Justin Fisher 12/02/2020 02:28:23
`@Whizbuzzer` If you can't find a way to use webots devices themselves to do what you want, you could also make a supervisor controller send each robot whatever information you think it should have.

##### Whizbuzzer 12/02/2020 02:33:05
My project is decentralized. Won't adding a supervisor centralize it?


The goal of the project is that the robots travel autonomously without the need of a centralizef controller.

##### Justin Fisher 12/02/2020 02:37:43
And a question of my own.  I've been struggling with what seems to be inconsistent behavior from Webots involving devices that I use a supervisor to import to robots.  The docs warn that a controller restart will be required to detect supervisor-imported devices so I have been restarting the robot controllers before looking for devices.  This works fairly often, but sometimes it fails to detect devices, even while it successfully detects other devices that I've added in pretty much the same way, and I can't figure out where this difference is coming from, nor how to avoid it.



I *think* the problematic cases arise only when I have a supervisor first import one part (say an arm), then do robot.step(0) to ensure that arm will have been added.  Then add another part (say a hand) containing the device as a child of that just-added arm.  Then I restart the robot's controller and have it try to getMotor() from the hand the next timestep.  Sometimes robot.getMotor() will then find the motor in the hand just fine, whereas other times it won't.  (In both cases, it shows up in the scene tree, and the visual is there in the simulation, so the import definitely partly succeeded, just not enough to allow the robot to control the device.)  I can't tell why this should be different in some cases than in others.   Any ideas?


`@Whizbuzzer`  I think it might be good for you to distinguish (a) what powers are you simulating your robots as having, versus (b) how are you going to go about setting up a simulation of robots with such powers.  It sounds like your goal for (a) is to simulate robots with quite localized powers, that base their decisions only on information that should be available to them based on local cues.  



For (b), in some sense you're stuck with a centralized controller because the whole simulation is running on your CPU, which is a centralized controller, and within a single ODE Physics Engine which again is quite centralized.  If part of what it takes to get the simulation to run the way you want is to add a supervisor controller that feeds inputs into your robot's sensors like the inputs that you think your simulated robots should have, then that doesn't make your robot's any less "autonomous" than the fact that they're all running on a single CPU does.  You can still have "autonomous" robots that base their decisions only upon locally available cues, even if you had to write a supervisor controller to feed them those cues.


Can you say exactly what cues you were hoping your robots would use?  You mentioned pheremones.  Is pheremone strength supposed to be proportional to the distance to other robots?  Are pheremones something that is laid down in the environment like ant trails?


If pheremone strength is supposed to be a function of distance, you may want to use radar devices as these are meant to give distance readings for objects in range, and then you can run the distance reading through whatever function you want and then base your decision just on the output.

If pheremones are supposed to be laid down in the environment, like ant trails, I'd suggest considering using a Webots pen device to paint the pheremone trails onto the surfaces that your robots drive over, and use low-resolution cameras or IR sensors aimed at the ground to detect the presence of such trails.  If you want the pheromones to slowly dissipate, you could set your world's inkevaporation rate to have the pheremone trails slowly dissolve.

##### Olivier Michel [Cyberbotics] 12/02/2020 07:23:49
We recently found a bug corresponding to what you describe and already implemented a fix, see: [https://github.com/cyberbotics/webots/pull/2482](https://github.com/cyberbotics/webots/pull/2482) (we just merged it, so that it will be shipped in the next nightly builds).

##### Justin Fisher 12/02/2020 09:14:54
Yes that does indeed look like the same bug I was experiencing, and I was indeed experiencing it only in cases where the imported device was placed after the endpoint of a joint (ball not hinge), and only for the last such device imported that way.  It looks like the workaround you'd initially found was just to import more stuff afterwards to somehow trigger it to update the device list?    I'm not absolutely sure, but I think that some of the cases where I had the error were ones where I had imported some more stuff after the problematic device, but I can play around with this to see if I can find a workaround like that, at least until we get to a stage where my students will have downloaded the actual fix.  Thanks!

##### Olivier Michel [Cyberbotics] 12/02/2020 09:16:45
The actual fix should be available tomorrow in ~~Webots R2020b-rev2~~ nightly build.


I would happy to get your feedback about it.

##### Stefania Pedrazzi [Cyberbotics] 12/02/2020 09:20:54
The fix will only be available in the Webots R2021a nightly build and not in R2020b-rev2.

##### Olivier Michel [Cyberbotics] 12/02/2020 09:26:14
Oh, yes that's right.

##### Stefania Pedrazzi [Cyberbotics] 12/02/2020 09:28:43
By the way for workaround, you should try to add a dummy node directly in the `Robot.children` field. If you import nodes in a joint descendant node it won't do the trick.

##### Justin Fisher 12/02/2020 09:29:26
I'll check it out at some point, though if I can find a workaround that doesn't require my students downloading a new version, I'll probably try to go with that for now.  (And if I can't find a workaround, I may just scrap the thing that would have used this, since it isn't absolutely vital)


I'll try loading a dummy node into robot.children -- thanks for the suggestion!


This works!  Thank you!

##### Simon Steinmann [Moderator] 12/02/2020 10:40:23
I don't have much c experience. The code looks correct to me. Perhaps try removing the include for the robot.h

supervisor.h has all the robot.h functionality, expanded by the supervisor functionality. Maybe that helps


And just to make sure, there are no outputs on the console in webots? And the simulation is running?


Can you be a bit more specific on what is or isn't working?

##### Stefania Pedrazzi [Cyberbotics] 12/02/2020 10:42:52
Good!

##### Justin Fisher 12/02/2020 10:55:00
In case you're curious, the devices I was having the problem importing were motors and IR sensors that were imported into segments in the jointed bodies of these "ant-bots".  They work great now!
%figure
![antbots.png](https://cdn.discordapp.com/attachments/565154703139405824/783647404024004618/antbots.png)
%end

##### Simon Steinmann [Moderator] 12/02/2020 12:50:16
How does one export the urdf in the current  2020b? Export and chaning the extension to .urdf does not work anymore

##### Olivier Michel [Cyberbotics] 12/02/2020 13:24:26
I just tried with my development version of R2021a and it seems to work.

##### Simon Steinmann [Moderator] 12/02/2020 13:27:34
on windows currently, so I only have 2020b.  When is the next official release?


`@Darko Lukić` Providing a link to the docker installation of Webots would be quite beneficial in the readme here: [https://github.com/cyberbotics/pyikfast](https://github.com/cyberbotics/pyikfast)

##### Darko Lukić [Cyberbotics] 12/02/2020 13:37:29
But it is not related to the Webots docker

##### Olivier Michel [Cyberbotics] 12/02/2020 13:52:39
The next official released is R2021a to be released in December 2020.

##### Simon Steinmann [Moderator] 12/02/2020 14:01:50
ohh it's its own image


sorry my bad

##### KajalGada 12/03/2020 00:31:41
Hey everyone. I need some help running Python3.9 on Ubuntu. 

My Ubuntu had Python3.5 by default and that works fine.

I upgraded Python to Python 3.9 and added it to my PATH variable.

I am getting the following error:

"ModuleNotFoundError: No module named 'controller'"



I looked around in the Webots Library folder and I see python35, python36, python37 and python38. Nothing for python39.



Just wanted to check-in here if I am in the right direction. It seems I might have to compile controller for python3.9.



Anyone else run into similar issues or already tried this and can help?



Thank you in advance.

##### Whizbuzzer 12/03/2020 00:41:58
I think only upto Python 3.7 is supported for Webots Ubuntu

##### KajalGada 12/03/2020 00:42:52
This page says 3.9 is supported: [https://cyberbotics.com/doc/guide/using-python](https://cyberbotics.com/doc/guide/using-python)

##### Justin Fisher 12/03/2020 03:06:34
`@KajalGada` Are you running the controllers from Webots or externally?  If externally, you'll need to be sure to make sure your external controller knows where to find Webots modules, which your error message suggests it's not successfully doing.  



If you're running it from Webots, Webots is usually pretty good about cueing Python where to find Webots stuff, so I'm not sure what your problem is.  Is it possible that you have an older version of Webots installed that was pre Python 3.9, which just came out a month or two ago?  You might try installing the newest version of Webots, e.g. a recent nightly build.  You could also set Webots to run a slightly older version of Python unless you really want/need some of the bells and whistles from 3.9.

##### owongcho 12/03/2020 03:29:42
hello, I have a proto that only appears when I try to add it from the handslot and if I try to add it outside of the handslot of the robot, the proto is not available to be selected among the options. Does anyone know why is that?

##### Justin Fisher 12/03/2020 03:40:49
`@owongcho` Some protos are set to appear only in particular slots.  If you want to use such a proto, you'll either need to create a matching slot to house it, or you can copy the proto and edit out its slot requirement in the copy.

##### owongcho 12/03/2020 03:53:59
`@Justin Fisher` got it. Thank you.

##### KajalGada 12/03/2020 03:58:15
`@Justin Fisher` 



TLDR: rolled back to 3.8 and it works :)



Detailed response:



Thank you for writing back. I am running the controller code through Webots itself. I do have Webots 2020, not the recently nightly though.



It is good to hear that Python3.9 files were added. I am guessing it wil be included in the next official release. *May I suggest the documentation to be updated to reflect 3.9 doesn't work with the official release? I don't mind writing a PR.*



No I didn't have a particular reason for using Python 3.9. My computer was at 3.5, so I had choose 3.9 as it was more recent. I did roll back to 3.8 and it works with Python 3.8.

##### Pragathi Praveena 12/03/2020 04:31:37
I am using a ROS+Python extern controller. Any suggestions as to how to access a child device of Supervisor? robot\_node = supervisor.getSelf() and camera = robot\_node.getCamera("camera") does not seem to work. I get an error <type object 'object' has no attribute '\_\_getattr\_\_'>.

##### Justin Fisher 12/03/2020 04:41:23
`@Pragathi Praveena` Unfortunately Webots currently has completely separate interfaces for (A) having a supervisor access nodes/fields in the scene tree, and (B) having a robot use devices in itself.  What you wrote mixes these together.  Your `robot_node` will be (A) a Node in the scene tree, whereas `getCamera()` only works with (B) a robot using devices within itself.  If you want (A) the node that contains the camera, you'll probably want `supervisor.getFromDef("DEF_name")` where `DEF_name` is the DEF-name of the camera node in the scene tree.  If you instead want (B) to *use* the camera, and this camera is in the same robot as the one that your supervisor controller is the controller for, then `supervisor.getCamera("camera")` should work, where `camera` is the value of the `name` field of your camera node (not its DEF-name).  If this camera is in some other robot instead, then your supervisor will sadly be unable to "get"/use this camera.  Superpowers extend only so far!


`@KajalGada` You're welcome.  Glad you got it figured out.  I think the next official release is coming within a few weeks, so by the time your PR made it through, it'd probably soon be out of date anyway.  (I'm just a community member though so that's nothing official, just my two cents!)

##### Pragathi Praveena 12/03/2020 05:14:55
`@Justin Fisher` Your suggestion supervisor.getCamera("camera") worked for what I was looking for. Thanks! There are fewer examples in the documentation for using supervisor, so what you explained was super helpful.

##### Olivier Michel [Cyberbotics] 12/03/2020 06:59:28
Hi, this is an error in the documentation. Actually, Webots R2020b-rev1 supports Python 2.7, 3.7 and .38. Webots R2020b-rev2 supports also Python 3.9. You can it from the nightly builds: [https://github.com/cyberbotics/webots/releases](https://github.com/cyberbotics/webots/releases)

##### Pragathi Praveena 12/03/2020 07:56:24
When using ROS controller, is it possible to print to Webots console instead of the system terminal?

##### Stefania Pedrazzi [Cyberbotics] 12/03/2020 08:01:46
Currently this functionality is not available in the default ROS controller. But you could extend it by adding a new service whre you pass the text to the ROS controller and the ROS controller simply calls the print function (and writes the text in the Webots console).

If you would implement this, we will be happy to review it and include it in the distributed Webots ROS controller.

##### Pragathi Praveena 12/03/2020 08:04:14
`@Stefania Pedrazzi` I see. Thanks! I will take a look at this.

##### Simon Steinmann [Moderator] 12/03/2020 14:32:15
is it possible to update Webots from official to nightly, or do I have to download the whole installer?

##### Stefania Pedrazzi [Cyberbotics] 12/03/2020 14:38:12
There is no update mechanism. So you have to download the whole nightly package. If you are working on Linux, I would suggest to use the tarball packages to have multiple versions on your system, given that they are not installed but just extracted.

##### Simon Steinmann [Moderator] 12/03/2020 14:39:33
i'm familiar with that. I'm currently on Windows. Was just wondering. Update mechanism would be nice to have, but that effort is probably better spend fixing and adding other features

##### Stefania Pedrazzi [Cyberbotics] 12/03/2020 14:49:24
To guarantee the full compatibility, all the package files need to be installed. So I don't see a big advantage of adding an update mechanism just for the users that download nightlies with the risks that some files are not compatible.


Downloading and installing a new version is time consuming, especially on Windows, even if it is done automatically.

##### KajalGada 12/03/2020 17:25:52
Thank you `@Olivier Michel` I was able to work with Python 3.8 🙂


`@Justin Fisher` All good, once againt thank you for helping out 🙂

##### wyaguiu 12/03/2020 21:18:37
Hi guys! Is there an option to configurate the gradual rotation motor speed?

##### Simon Steinmann [Moderator] 12/03/2020 21:20:53
What exactly do you mean?

##### raxman 12/04/2020 05:08:10
For lidar, is there a way to read data easier than using storing it in a struct? Matlab seems to hate structs as none of their tools work with structs.

##### DanyP 12/04/2020 07:33:20
Hello,

When adding a stiffness value to a hingejoint which contains a rotational motor: Is the torque computed by Webots via get\_torque\_feedback() also considering the induced torque of the torsional spring, or purely the motor torque ?

##### Simon Steinmann [Moderator] 12/04/2020 10:55:43
[https://cyberbotics.com/doc/reference/motor?tab-language=python#force-and-torque-control](https://cyberbotics.com/doc/reference/motor?tab-language=python#force-and-torque-control)

##### Olivier Michel [Cyberbotics] 12/04/2020 11:20:29
I don't think so. Can you propose some improvements to the MATLAB API to address this?

##### DanyP 12/04/2020 11:44:53
Hi again,

When setting a specific position command to the motor, how does Webots translate this value into torques ? Is this done thanks to the PID values in the ControlPID field of the motor node ?

##### Olivier Michel [Cyberbotics] 12/04/2020 11:48:11
Yes. This should be clearly stated in the documentation, isn't it?

##### DanyP 12/04/2020 11:50:59
Thank you for your answer. Well I was not sure to understand properly what is written in the doc but basically yes. Thank you

##### Olivier Michel [Cyberbotics] 12/04/2020 12:01:53
Feel free to open a PR to suggest clarifications in the doc if that's not clear enough.

##### Rosalie van Ark 12/04/2020 14:09:36
Is it possible for a controller to get the specific [x,y,z] coordinates of other objects present in the world?

##### Simon Steinmann [Moderator] 12/04/2020 14:10:10
`@Rosalie van Ark` Yes, with the supervisor api


[https://cyberbotics.com/doc/reference/supervisor?tab-language=python](https://cyberbotics.com/doc/reference/supervisor?tab-language=python)

##### Rosalie van Ark 12/04/2020 14:11:29
Great thank you!

##### Simon Steinmann [Moderator] 12/04/2020 14:12:16
if you want positions relative to your robot, let me know. I have an easy to integrate python module, which does that for you

##### Rosalie van Ark 12/04/2020 14:30:50
Yes please that would be really useful!

##### Simon Steinmann [Moderator] 12/04/2020 14:31:21

> **Attachment**: [get\_relative\_position.py](https://cdn.discordapp.com/attachments/565154703139405824/784426625370423296/get_relative_position.py)


place that in the same directory as your controller


use it in your main controller like this:

`from controller import Supervisor

from get\_relative\_position import RelativePositions



supervisor = Supervisor()

RelPos = RelativePositions(supervisor, 'TARGET')



target\_pos, target\_rot = RelPos.get\_pos()`


your robot has to be a supervisor for this to work


'TARGET' being the DEF of the object you want the position of


\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_

please give me feedback if something is unclear, any suggestions or criticism you have

##### Rosalie van Ark 12/04/2020 14:39:12
Will do, thank you very much for the quick help🤩

##### Simon Steinmann [Moderator] 12/04/2020 14:39:24
you're welcome

##### Rosalie van Ark 12/04/2020 15:01:31
How can we get all the children of a group node? We've tried by using robot.getFromDef("Building").children but that doesn't seem to work for us
%figure
![GroupNode.png](https://cdn.discordapp.com/attachments/565154703139405824/784434218171105290/GroupNode.png)
%end

##### Simon Steinmann [Moderator] 12/04/2020 15:02:21
`children` is a Field


children = robot.getFromDef("Building").getField("children")


count = children.getCount


node = children.getMFNode(0)

##### Rosalie van Ark 12/04/2020 15:07:41
Aaahhh of course


It works!

##### watchdogs132 12/04/2020 15:42:15
Hello , is there any way to display the position which is under the joint parameters section , on the console ?

##### Olivier Michel [Cyberbotics] 12/04/2020 15:43:06
Do you mean the current position of a motor?

##### watchdogs132 12/04/2020 15:43:39
I have a hinge joint , under the hinge joint parameter section , the position basically shows total angle of rotation of the wheel. I want this to show on the console .

##### Simon Steinmann [Moderator] 12/04/2020 15:44:22
use the position sensor

##### watchdogs132 12/04/2020 15:46:30
Thank you for your help 🙂

##### Whizbuzzer 12/05/2020 21:04:00
Could anyone please provide me with the mathematical formula (control law) for the Braitenberg collision avoidance controller from the tutorials?


Is there a way to record data values (e.g. Total objects retrieved/transported from location a to b) vs time?

##### Stefania Pedrazzi [Cyberbotics] 12/07/2020 07:10:10
`@Whizbuzzer` you can find the mathematical formula in the braitenberg controller code:

[https://github.com/cyberbotics/webots/blob/master/projects/default/controllers/braitenberg/braitenberg.c#L183-L202](https://github.com/cyberbotics/webots/blob/master/projects/default/controllers/braitenberg/braitenberg.c#L183-L202)


to record data you can print the simulation time and your data in a file.

##### furchan 12/07/2020 13:21:07
hi guys, do u know, which lidar has double axis ? I want to see x and y axis with Lidar. Help me pls.

##### Darko Lukić [Cyberbotics] 12/07/2020 13:26:42
Hello `@furchan`,

[https://cyberbotics.com/doc/reference/lidar](https://cyberbotics.com/doc/reference/lidar)

There is a `numberOfLayers` parameter. If you increase it above 1 there you will have multi-layer LiDAR.



To enable the point cloud you can use the `wb_lidar_enable_point_cloud` function:

[https://cyberbotics.com/doc/reference/lidar#wb\_lidar\_enable\_point\_cloud](https://cyberbotics.com/doc/reference/lidar#wb_lidar_enable_point_cloud) 

or you can also enable it from the robot window. Then, to view the point cloud, go to `View > Optional Rendering > Show Lidar Point Cloud`.

##### furchan 12/07/2020 13:58:37
`@Darko Lukić`  Thanks a lot bro

##### Pragathi Praveena 12/07/2020 18:43:46
I am using an external ROS+Python controller to get image data from a camera (getImageArray) and publish to a topic. I have GPU acceleration on. The maximum publishing rate that I get is 19 Hz, which is not sufficient for displaying the image to a user. What can I try to increase the publishing rate?

##### furchan 12/07/2020 19:37:01
hi everyone, can we import Solidworks files to Webots? Is it possible?

##### Simon Steinmann [Moderator] 12/07/2020 19:53:44
`@Pragathi Praveena` This really depends on what is the bottleneck. What realtime factor are you getting when running the simulation in fast mode? (ctrl + 3)

##### Pragathi Praveena 12/07/2020 20:39:13
`@Simon Steinmann` Between 0.7 and 0.8.

##### Simon Steinmann [Moderator] 12/07/2020 21:51:30
that is probably your issue, also your basictimestep will influence your max hz


with 32ms, you cannot get more than about 30hz

##### Pragathi Praveena 12/07/2020 22:20:33
`@Simon Steinmann` I tried tweaking the basictimestep, but it did not make much of a difference. In the ultra-fast no Graphics mode, I am getting 22 Hz, but no more. The getImageArray slows down the rate by quite a bit, and actually publishing it worsens it. Are there any alternatives to getImageArray?

##### Simon Steinmann [Moderator] 12/07/2020 22:38:33
what resolution are you using? Uncompressed raw image data is huge

##### DrakerDG 12/07/2020 23:17:44
`@furchan` I have not yet used native files from solidworks to webots.  But if in OBJ format.  You can export the mesh to OBJ and try importing it into webots as a solid.  You export this new solid from webots to WBO format

##### furchan 12/07/2020 23:31:58
`@DrakerDG`  OK. I will try this way.

##### Pragathi Praveena 12/07/2020 23:33:03
Sure. I can change that and check. I am currently using 320x190. My main concern was that just adding getImageArray in the ROS code (without actually publishing anything) halves the realtime factor, and I thought that may be a suboptimal way of retrieving data.

##### raxman 12/08/2020 02:47:40
Is there a reason video acceleration is set at inf and i cannot change it when tryign to record my simulation?


is there a setting enabling this>

##### Justin Fisher 12/08/2020 02:56:48
`@Pragathi Praveena` What format are you storing your image in in Python?  If you use getImageArray to store it as a Python list of lists, that'll probably be less efficient than if you can convert it straight to a NumPy array.  I haven't experimented with this, but I *think* the most efficient way to do this is to use getImage (which returns a byte string) and to have numpy.frombuffer treat this as a buffer for an array.   That should cut down on processing time spent copying the image, and especially for generating the Python lists, which tend not to be compact/efficient.



(Regardless, it sounds like even without the camera your simulation isn't running as fast as you want it, so it may be that you'll want to look for other ways to speed it up, like reducing number of objects or joints, or using simpler geometric approximations for your bounding objects.  Or, it could be that you have a controller that's running slow and holding things up -- you can test this by toggling the synchronous setting for the simulation.)

##### Pragathi Praveena 12/08/2020 04:11:14
`@Justin Fisher` These are all some good points that I will test. I think a combination will shave off enough overhead to make the simulation run in real-time. Thanks for the pointers!

##### GaGa 12/08/2020 04:28:06
Hello all , so I've been trying to do line following using epuck and my epuck works in a circular pattern , it is keep on revoluting at one place , any solutions

##### Olivier Michel [Cyberbotics] 12/08/2020 06:39:16
This is bug which was fixed recently. Try to run a recent nightly build and you should not see the problem any more.

##### Darko Lukić [Cyberbotics] 12/08/2020 08:33:49
`@Pragathi Praveena` I have just tested a camera stream (resolution 640x480) and I am getting around 130fps on my laptop. Let me know if you have any questions.


Here is the code:

```python
import rospy
from sensor_msgs.msg import Image
from controller import Robot


robot = Robot()
timestep = int(robot.getBasicTimeStep())
camera = robot.getCamera('camera')
camera.enable(timestep)
rospy.init_node('my_node', anonymous=True)
pubimg = rospy.Publisher('camera', Image, queue_size=10)
while robot.step(timestep) != -1 and not rospy.is_shutdown():
    img = Image()
    img.data = camera.getImage()
    pubimg.publish(img)
```

##### Tahir [Moderator] 12/08/2020 12:22:28
Hi all

I am simulating a robot dog and synchronising the model in Webots with the real robot joint states.


Everything works fine if the real robot is on ground when running the wb controller the model also goes to same state on the ground


But when the real robot is standing, I run the wb controller leg joints are than synchronised but the robot falls back to the back


I know this is because of gravity so I removed the Physics node from the robot. Is it a good idea to do that or is there anyother way of doing this


After removing the Physics node the robot in webots stand as well


Another question is if I walk the robot in real(at the moment not implemented so just a question for clarification) will the robot in webots move like the same


After standing when I sit down the robot this is how in Webots the robot looks like



%figure
![20201208_132924.jpg](https://cdn.discordapp.com/attachments/565154703139405824/785845534899830854/20201208_132924.jpg)
%end

##### Stefania Pedrazzi [Cyberbotics] 12/08/2020 13:04:28
`@Tahir` the answer depends of what it the purpose of the simulation. If you just want to represent exactly the real robot status and move the simulated robot only based on the real robot behavior, then yes you should probably remove the Physics nodes from your robot so that no external forces are applied to the simulated robot. Otherwise if you enable the physics, there will be some mismatch with the real robot.

I'm not sure to understand the second question. But you should not only synchronize the joints but also the rotation and translation (using the Supervisor API) of the top Robot node so that it can move in simulation similarly to the real one.

##### Rosalie van Ark 12/08/2020 14:31:12
We want to know the distance between the robot and a Wall (a proto in Webots), and not just the distance to the centre of the wall but to the part of the wall that the robot is closest to (and we don't want to use distance sensors as we're creating an internal representation of its world), how can we do that? (the problem is that we can't find the closest point of the wall relative to the robot)

##### Darko Lukić [Cyberbotics] 12/08/2020 14:34:10
`@Rosalie van Ark` To find the closest point to the wall you can use the RangeFinder node:

[https://www.cyberbotics.com/doc/reference/rangefinder](https://www.cyberbotics.com/doc/reference/rangefinder)

(pick the smallest value in the matrix)

##### Simon Steinmann [Moderator] 12/08/2020 14:35:21
You can also use linear algebra to do it mathematically


[https://www.qc.edu.hk/math/Advanced%20Level/Point\_to\_line.htm](https://www.qc.edu.hk/math/Advanced%20Level/Point_to_line.htm)


here's some methods if you reduce it to 2 dimensions (which should be a valid simplification for a ground robot)


...Robotics... when you actually need the maths you learned in school 😄

##### Rosalie van Ark 12/08/2020 14:43:22
Hahaha


Thanks `@Darko Lukić` and `@Simon Steinmann`! We'll look into it

##### dimple.bhuta 12/08/2020 16:08:58
Hello, 

i have written a code that implements reeds shepp for uturn and I use a controller to control the car(bmx) and track the uturn


However


WARNING: DEF EGO\_VEHICLE\_r0 TeslaModel3 (PROTO) > Transform > DEF LEFT\_STEER\_HINGE2 Hinge2Joint > RotationalMotor: too big requested position: 1.27875 > 1

WARNING: DEF EGO\_VEHICLE\_r0 TeslaModel3 (PROTO) > Transform > DEF RIGHT\_STEER\_HINGE2 Hinge2Joint > RotationalMotor: too low requested position: -1.29372 < -1

WARNING: DEF EGO\_VEHICLE\_r0 TeslaModel3 (PROTO) > Transform > DEF LEFT\_REAR\_WHEEL\_HINGE HingeJoint > RotationalMotor: The requested velocity -242.784 exceeds 'maxVelocity' = 138.889.

WARNING: DEF EGO\_VEHICLE\_r0 TeslaModel3 (PROTO) > Transform > DEF RIGHT\_REAR\_WHEEL\_HINGE HingeJoint > RotationalMotor: The requested velocity 229.657 exceeds 'maxVelocity' = 138.889.


I get all these warnings


Than these errors


Error: wb\_motor\_set\_velocity() called with an invalid 'velocity' argument.(NaN)

Error: wb\_motor\_set\_velocity() called with an invalid 'velocity' argument.(NaN)

Warning: wbu\_driver\_set\_steering\_angle() called with an invalid 'steering\_angle' argument (NaN)

Warning: wbu\_driver\_set\_steering\_angle() called with an invalid 'steering\_angle' argument (NaN)


and than my vehicle crashes


i am not sure what is causing this


In an isolated case it works completely fine

##### Darko Lukić [Cyberbotics] 12/08/2020 16:11:55
You are calling `wb_motor_set_velocity` and `wbu_driver_set_steering_angle` with invalid arguments (`NaN`).

##### dimple.bhuta 12/08/2020 16:12:36
ok  but it isnt suppose to happen. I constantly send out updated velocity commands


and its not causing any problems in case of straight path or paths with some curves

##### Darko Lukić [Cyberbotics] 12/08/2020 16:14:05
Try printing and checking the arguments before calling the mentioned functions

##### dimple.bhuta 12/08/2020 16:14:16
ok thank you

##### Darko Lukić [Cyberbotics] 12/08/2020 16:15:17
If you are sure that the arguments are valid let us know, the problem may be something else

##### dimple.bhuta 12/08/2020 16:15:27
ok

##### GaGa 12/09/2020 06:09:37
Is there any tutorial or any leads where I can see how to work on line follower using epuck

##### DrakerDG 12/09/2020 06:27:16
`@GaGa` hello, maybe something like this?

[https://youtu.be/\_wl1i1xcrFc](https://youtu.be/_wl1i1xcrFc)

##### GaGa 12/09/2020 11:38:11
`@DrakerDG` it would be great if u have any steps how u did

##### DrakerDG 12/09/2020 19:20:26
`@GaGa` I originally used an example and then just modified the code so that it would work following lines and / or avoiding obstacles.  But zero is not that difficult either.



This is another example:

[https://youtu.be/PcCipP1IfKc](https://youtu.be/PcCipP1IfKc)

##### Westin 12/09/2020 22:24:19
Is there a good way for a supervisor to reset the joint positions of robots to their original position without reloading the robot all together? I am trying to reset the robot for running multiple tests. I am setting the translation and rotation before resetting physics, but I don't think this handles the joint angles.

##### Olivier Michel [Cyberbotics] 12/10/2020 06:43:56
Did you try to reset also the `position` field of the joints too (`HingeJoint`, `SliderJoint`, etc.)?

##### hugos 12/10/2020 08:15:26
Hello everyone, I'm working on a robot arm project using Webots. I would like to detect collision between my robot and the environment (solid box for exemple) BUT only detect them. I would like my robot go through the box and still saying me "we are colliding". The purpose of this is the creation of the C-Space of the robot. Thanks !

##### Olivier Michel [Cyberbotics] 12/10/2020 08:18:03
In that case, you should write a physics plugin that will override the collision detection handling of Webots and will not create the contact points, but instead print "we are colliding".


See [https://www.cyberbotics.com/doc/reference/callback-functions#callback-functions](https://www.cyberbotics.com/doc/reference/callback-functions#callback-functions)

##### hugos 12/10/2020 08:20:02
Okay, I'll try that thanks !


Something is strange, I write a my\_physics.c, make a print with dWebotsConsolePrintf in the init to see if it's really loading, add it to WorldInfo physics item, reload the world and when I launch the world it's still like this plugging was not here because I have no init print 🤔

##### Olivier Michel [Cyberbotics] 12/10/2020 08:38:38
In which callback function did you add the `dWebotsConsolePrintf` call? Did you add a `\n` at the end of the print?

##### hugos 12/10/2020 08:40:42
webots\_physics\_init()

And yes \n and \r\n

##### Olivier Michel [Cyberbotics] 12/10/2020 08:45:40
Strange, I would suggest you compare your simulation to the physics plugin example at WEBOTS\_HOME/projects/samples/howto/worlds/physics.wbt, check that it works as expected and see how your simulation differ from this example.


Try to recompile it, modify it, etc.

##### hugos 12/10/2020 08:53:11
Working now it's ok 👍 thanks

##### Olivier Michel [Cyberbotics] 12/10/2020 08:53:30
What was the problem?

##### hugos 12/10/2020 09:03:24
I thought printing appeared on execution (play button) but it's on reset button 😅


So I was keeping reloading the world and nothing happened, until I understand I have to click on reset

##### Olivier Michel [Cyberbotics] 12/10/2020 09:06:32
I see, but normally, it should have printed on the first run...

##### hugos 12/10/2020 15:26:16
Hi Oliver, something strange for physics

I am using an URDF robot (I convert it to Base Node).

With my own physics , I can override colliding with the base of the robot, but for the other axis it's not working and it's still acting without the original physics 

I think I do not use correctly the Geom objects from DEF, the purpose of Geom is to get the bouding object ? The geometry ? I do not understand it well

##### Simon Steinmann [Moderator] 12/10/2020 15:35:36
Which robot are you using exactly? And what is not working? No collision for the rest of the robot?

##### hugos 12/10/2020 15:48:28
A schematic robot created by myself with cylinders , apparently I can override collision for Solid where boundingObject is not Group 

For exemple, I have an axis defined by 3 cylinders, if I used the 3 cylinders form for the boundingObject it's not working, and if I use only one it's working 

It's really strange but maybe the Geom cannot get a complex structure ?

##### Simon Steinmann [Moderator] 12/10/2020 15:51:14
did you convert an URDF file to PROTO using the urdf2webots tool?

##### hugos 12/10/2020 15:51:31
Yes


Then I convert it to Base Node

##### Simon Steinmann [Moderator] 12/10/2020 15:52:00
the bounding object defines the collision

##### hugos 12/10/2020 15:52:29
Yes

##### Simon Steinmann [Moderator] 12/10/2020 15:52:31
you can post your world file and I can take a look

##### hugos 12/10/2020 16:09:30
i send you a private msg

##### dimple.bhuta 12/10/2020 16:36:29
hello, 

I wanted to enquire regarding the width of vehicles like BMWx Testla etc. I went through the protos files however Total width of the car isnt specified. I will really appreciate it if you can let me know approximate width of car or point me to documentation. Thank you.

##### Darko Lukić [Cyberbotics] 12/10/2020 16:38:43
You can add a box and use it as a ruler (resize the box to match the size of the car).

##### dimple.bhuta 12/10/2020 16:39:45
within webots. I am not very sure about how to do that. Will give it a try thanks

##### Simon Steinmann [Moderator] 12/10/2020 16:42:52
`@hugos` `@Olivier Michel` hugos has the issue, that the physicsplugin function "collide" only works for a single bounding object, not a group.


a group should probably get turned into a dsimpleSpace

##### Darko Lukić [Cyberbotics] 12/10/2020 16:43:55
`@Simon Steinmann` , it is fixed in the latest nightly build (R2021a). Try downloading the latest version.


[https://github.com/cyberbotics/webots/pull/2505](https://github.com/cyberbotics/webots/pull/2505)

##### Simon Steinmann [Moderator] 12/10/2020 16:44:59
`@hugos` Try the newest nightly build [https://github.com/cyberbotics/webots/releases/tag/untagged-590575a92acc35052a0e](https://github.com/cyberbotics/webots/releases/tag/untagged-590575a92acc35052a0e)

##### Pragathi Praveena 12/10/2020 16:45:04
`@Darko Lukić` Thanks for confirming this! I had switched to getImage on the suggestion of  `@Justin Fisher`, and it sped things up.

##### hugos 12/10/2020 16:48:58
Ok i will thanks 😉

##### dimple.bhuta 12/10/2020 17:05:26
`@Darko Lukić` Thank you. The width seems to be 1.8 - 1.9 meter. Thank you for your help.

##### Westin 12/10/2020 17:43:29
Is this something I can do from the supervisor? I attempted to get the nodes of the robot from the supervisor using the getDeviceByIndex method, but Python quickly let me know I couldn't do that. I didn't see a similar function for getting the motors of a robot from the supervisor. Can you point me towards the functions to do that?

##### Olivier Michel [Cyberbotics] 12/10/2020 17:48:47
See [https://cyberbotics.com/doc/guide/supervisor-programming?tab-language=python#setting-the-position-of-robots](https://cyberbotics.com/doc/guide/supervisor-programming?tab-language=python#setting-the-position-of-robots)

##### Westin 12/10/2020 18:00:04
I'm not sure this answers my question and it leaves me a little confused. The paragraph above the code mentions a 3rd for loop, but there are only two. It seems like the only way the supervisor affects the robot is to reset its position and its physics. Does one of those also reset its joints?


If I call wb\_motor\_set\_position on a motor and then reset physics, does that immediately move the joint?

##### hugos 12/10/2020 21:43:45
Motor.getPositionSensor is not working on this build, where can I find a documentation please ?

##### Simon Steinmann [Moderator] 12/10/2020 21:45:28
[https://cyberbotics.com/doc/reference/motor](https://cyberbotics.com/doc/reference/motor)

##### hugos 12/10/2020 21:53:27
It's like if functions are depreciated in this build, because I have to use getDevice("") instead of getMotor(""), I will modify my controller

##### Justin Fisher 12/10/2020 23:56:19
I think there were plans to make getDevice() work *in addition to* the specific device functions in Python (github issue #2338) but I thought the plan was to leave all the specific get functions working as well, at least for backwards compatibility.

##### hugos 12/11/2020 07:39:27
Ok ok but apparently this isn't..


Have you any idea to use the function getNumberOfContactPoints() with my own physics plugin ? (without sending et receiving messages between controller and physics plugin if possible)

Thanks

##### Darko Lukić [Cyberbotics] 12/11/2020 07:53:18
You can add `?version=develop` to get a documentation from development version:

[https://cyberbotics.com/doc/reference/motor?version=develop](https://cyberbotics.com/doc/reference/motor?version=develop)



Yes, `getMotor` is deprecated in favor of  `getDevice`


You should be able to use the `dCollide` function from ODE:

[http://opende.sourceforge.net/docs/group\_\_collide.html#ga1e29f9e9f36434c5259e2f541d455c08](http://opende.sourceforge.net/docs/group__collide.html#ga1e29f9e9f36434c5259e2f541d455c08)



Let me know if it works you


See example here:

[https://github.com/cyberbotics/webots/blob/ce65b0ea2e44f1d22897795ef3e878117dc9f013/projects/samples/howto/plugins/physics/flying\_mybot/flying\_mybot.c#L298](https://github.com/cyberbotics/webots/blob/ce65b0ea2e44f1d22897795ef3e878117dc9f013/projects/samples/howto/plugins/physics/flying_mybot/flying_mybot.c#L298)

##### hugos 12/11/2020 08:02:13
Yes this is working is my own physics , but now I want to get this information from the controller


Like the with original physics, you know we can use getNumberOfContatsPoints() and getContactPoint()

##### zoe\_t 12/11/2020 08:28:06
hi! I'm new to webots (and fairly new to ros) and I'm trying to use the webots\_ros package. I would like to set the --clock and --synchronize arguments for the controller as is described in the documentation. However, my launch file includes webots.launch, which launches a simulation that includes a vehicle with the controller set to ros\_automobile. since I am not launching ros\_automobile myself I'm not sure how to set the --clock and --synchronize parameters. I would really appreciate some help! Thanks!

##### Darko Lukić [Cyberbotics] 12/11/2020 08:36:15
I see. Using the `Receiver` node is probably the easiest solution.


You can specify the `controllerArgs` parameter, see here:

[https://github.com/cyberbotics/webots\_ros/blob/f25f70a5607a6f403bcb6208f946f33618c275fe/worlds/complete\_test.wbt#L271](https://github.com/cyberbotics/webots_ros/blob/f25f70a5607a6f403bcb6208f946f33618c275fe/worlds/complete_test.wbt#L271)

##### zoe\_t 12/11/2020 08:47:49
awesome, thanks!

##### Westin 12/11/2020 12:57:21
I'm still struggling to get a supervisor to reset joint positions of the robots. This link shows how to reset the translation and physics of a robot, but I have not found a way to set the joint positions back, so the joint positions from before the supervisor reset the robot affect the run afterwards which is not ideal. [https://cyberbotics.com/doc/guide/supervisor-programming?tab-language=c#setting-the-position-of-robots](https://cyberbotics.com/doc/guide/supervisor-programming?tab-language=c#setting-the-position-of-robots)

##### Olivier Michel [Cyberbotics] 12/11/2020 13:10:08
Cant' you apply the same method to joint position as you did with translation and rotation?

##### Westin 12/11/2020 13:12:22
Not that I'm aware of. From the supervisor, I am able to get the translation and rotation fields using something like robot.getField("translation"), but I have found no way to get joints with that. I could be mistaken. Is there a field name for the joints?

##### Justin Fisher 12/11/2020 13:14:14
`@Westin`, I think you can retrieve joint fields much like you would any other.  It may help to examine the robot in the scene tree and just get Nodes/joints in the order that the scene tree shows (or set a DEF name on a node that's close so you won't have to traverse far down to the field you want).

##### Westin 12/11/2020 13:19:43
So would I parse the tree by using the children field and traversing that until I find motors? I would definitely use the DEF names if I wasn't using robots defined in PROTO files.


getField("children") on the robot from the supervisor doesn't return anything.

##### Justin Fisher 12/11/2020 13:22:14
I don't have much experience using a supervisor to interact with fields within protos.  I think that is more restricted, especially with respect to writing/setting values.  Unless you really need this to be a proto for some reason, it may make sense to convert your proto to ordinary nodes by right clicking on it in the scene tree and choosing the convert to base nodes option.   Then you can add whatever DEF names you want, and you won't have any restrictions on setting fields.


But anyway, yes, you can traverse down by getting the children field of a node, getting the first (or whatever) node from that children field, and so on, as far down as it takes

##### Westin 12/11/2020 13:25:05
In addition to a getField function, there is a getProtoField function. Maybe I can do it with that.

##### Justin Fisher 12/11/2020 13:25:19
yeah, but I think getProtoField is read-only

##### Olivier Michel [Cyberbotics] 12/11/2020 13:25:40
`@Westin`: the translation and rotation fields are members of the Solid (or Robot) node, whereas the position field is a member of the HingeJoint (or SliderJoint) node. So, it will not work if you try to retrieve the position field for a Solid node, but it will work if you do it from a HingeJoint node.

##### Westin 12/11/2020 13:26:27
How can I get the HingeJoint node from the supervisor when the robot is from a proto?

##### Olivier Michel [Cyberbotics] 12/11/2020 13:27:14
Simply using `wb_supervisor_node_get_from_proto_def` with the DEF name of the HingeJoint (you may have set one in the PROTO file  if not existing).


There are other ways to do it, but this is the simpler.

##### Westin 12/11/2020 13:31:20
Let me give background on what I'm doing. I'm making an EA to evolve movement patterns for robots, and was hoping to make the algorithm very agnostic of the type of robot. I have been testing with different robots that webots provides. It would be ideal if it would work with just any robot without having to modify its source. It wouldn't be the end of the world if I had to modify the proto source to get them to work, but I'd rather not. What other more complicated options do I have?

##### Justin Fisher 12/11/2020 13:32:54
If you want to modify arbitrary fields within it, I think you'll need to convert from proto to base nodes.  You don't need to add DEF names, though if you don't add DEF-names, you'll need to use longer chains of getNode/getField commands to traverse down to whatever it is you want to change.


If all you want to do is read field values, you can probably leave it as a proto.

##### Olivier Michel [Cyberbotics] 12/11/2020 13:33:59
You can actually parse down the scene tree of the robot and recognize every joint node to retrieve its position field. You will have to do it as well for translation and rotation of Solid nodes.


You will need to use the following supervisor functions to achieve this:


wb\_supervisor\_node\_get\_self: to get a pointer to the robot (itself) -> translation and rotation fields


wb\_supervisor\_field\_get\_mf\_node: to get the "children" field of the robot and browse it's descendants, including the joints node (like the HingeJoint).


wb\_supervisor\_node\_get\_type: to find out the type of node (if it's a HingeJoint or a Solid or something else).


wb\_supervisor\_field\_get\_sf\_vec3f: to retrieve the position of a Hinge or the translation of a Solid.


wb\_supervisor\_field\_get\_sf\_rotation: to retrieve the rotation of a Solid.


That should be pretty much it. Let me know if something remains unclear.

##### Justin Fisher 12/11/2020 13:40:11
Will probably also need the get field ones to get some relevant fields, and the proto-version of get node ones if delving into a proto

##### Westin 12/11/2020 13:41:37
Thanks for all the info. When I get the motor and set its position, will it immediately jump to that coordinate or will it move to it as it normally would? If I reset physics does it affect that behavior? I'd like a hard reset in case the robot gets itself in a weird position rather than attempting to move there and maybe getting stuck.

##### Olivier Michel [Cyberbotics] 12/11/2020 13:42:05
I believe such a controller (if generic) could be very useful to others. I would be happy to further help and review a pull request to the webots repo if you agree to contribute the result to Webots.

##### Westin 12/11/2020 13:42:37
You're talking about my EA?

##### Olivier Michel [Cyberbotics] 12/11/2020 13:42:42
No, it will immediately jump (if you change the translation/rotation fields of the corresponding Solid as well).

##### Westin 12/11/2020 13:43:02
I'm happy to contribute if its useful. I'm putting everything on github.

##### Justin Fisher 12/11/2020 13:44:50
`@Westin`  Are you working in Python?  I've written some Python magic methods that make it *much* easier for a supervisor to interact with the scene tree.  That'd probably make it a lot easier to do some of the things you're talking about doing.

##### Olivier Michel [Cyberbotics] 12/11/2020 13:44:56
Not the EA, but rather the reset robot functionality.

##### Westin 12/11/2020 13:45:37
That makes sense. I'll let you know when I get it working and you can determine whether its generically usefull or not.


`@Justin Fisher` , is that somewhere I can find it?

##### Olivier Michel [Cyberbotics] 12/11/2020 13:46:34
An easier way for most people doing EA is to reset the whole simulation with `wb_supervisor_simulation_reset`.


But resetting a single robot may be very useful as well...

##### Westin 12/11/2020 13:47:23
I would do that, except that I'm also dynamically loading all the robots. If I did a simulation reset, I would have to reload all the robots and that would significantly slow down my cycles.

##### Justin Fisher 12/11/2020 13:47:24
No, tis a work in progress, though I expect to polish it up and make distribute it after I get through this semester.  (I keep making changes and adding functionality to help with the Webots activities I have my students do.)  But the current version works fine, and I wouldn't mind sharing.

##### Westin 12/11/2020 13:47:49
Loading 20 salamanders takes about twice as much time as the run time of a cycle.


`@Justin Fisher`  if you don't mind, that would be great.

##### Justin Fisher 12/11/2020 13:50:17
Ok will message you

##### Westin 12/11/2020 13:51:49
Thanks.

##### JMRMEDEV 12/11/2020 16:25:38
Hey guys


According to this:


[https://cyberbotics.com/doc/guide/running-extern-robot-controllers#single-simulation-and-multiple-extern-robot-controllers](https://cyberbotics.com/doc/guide/running-extern-robot-controllers#single-simulation-and-multiple-extern-robot-controllers)


If I want to run a single simulation and multiple extern controllers, I have to define a environment variable.


But, can't I run simultaneous extern controllers?


Because according to the docs, I have to set WEBOTS\_ROBOT\_NAME in a manner that matches my robot's name field.


But as far as I understand, at least in Windows, I can't define multiple environment variables with the same WEBOTS\_ROBOT\_NAME name.


Or probably I'm getting it all wrong.


Ideas?

##### Olivier Michel [Cyberbotics] 12/11/2020 16:47:20
Yes, you can. These environment variables should not be defined globally in Windows but in each process from which you start the different Webots instances.


For example if you open two Windows cmd.exe consoles, you can type in the first one `set WEBOTS_ROBOT_NAME=robot1` and in the other console, `set WEBOTS_ROBOT_NAME=robot2`. Then, you can launch the Webots controllers from each console.

##### JMRMEDEV 12/11/2020 16:50:41
I think this information will help. Thank you!

##### Westin 12/12/2020 06:57:28
I bit the bullet and decided to use simulationReset rather than fight with it to reset the joint positions. I couldn't find a way for it to reset the joint positions. Using a normal motor.setPosition() call would work in most cases, but I have had times where a joint gets locked in a weird position, and that doesn't fix it. Dynamically generating the robots seems eloquent with the rest of the infrastructure I have, but for how much time I put into it, I could have just written a script to generate the wbt files with the robots in it. Thanks for the tips `@Olivier Michel` and `@Justin Fisher` .

##### swapnilsayansaha 12/12/2020 07:52:58
I am looking for a webots underwater vehicle to collect some simulated sensor data. I have found only one such model available online ([https://github.com/nathalex/simulation](https://github.com/nathalex/simulation)) but it's hard to control. I have seen a couple of papers that have made underwater robots but they didn't release the models. Anyone here has any shareable underwater vehicle model?

##### Justin Fisher 12/12/2020 15:03:14
I've also had quite a few strange experiences with joints getting locked into weird positions.  I strongly suspect that there's some sort of bug in the implementation of physical bounds on joint positions, though it hasn't happened consistently in the same way enough for me to have filed a bug report yet.  Getting bitten repeatedly by this weirdness has led me to basically never use physical limits on joint positions since they're too often buggy, and instead just to impose softer limits with springs, with limits on what positions motors try to move a joint to, and/or imposing limits with supervisor superpowers.  Of course that's easier when I'm designing the robots+supervisors myself than it would be working with a variety of robots other people designed, the way I think you're trying to.

##### swapnilsayansaha 12/13/2020 09:45:50
anyone? I just need a underwater robot model with a controller. Proper citation will be given if the model is used.

##### Justin Fisher 12/13/2020 10:46:18
`@swapnilsayansaha` The people who are likeliest to have a suggestion for you seem to mostly be around during European workweek hours, so you may have to wait til Monday to hear from them.  I haven't encountered such models yet myself.  If you can find a model that looks about like you want, it probably wouldn't be too hard to rig it with propellors or just use supervisor superpowers to move it however you want.  So it might make more sense for you to ask for help making the one you found move the way you want if that's the only thing you don't like about it.

##### waleed 12/13/2020 11:14:39
Is there a way to code in C# for the mavic drone in webots?


i have a code written for kinect in C# and want to use that to control the mavic drone in webots

##### Justin Fisher 12/13/2020 11:19:43
I think Webots allows C and C++ controllers, but not C#, so you'd probably need to convert to one of those.  (It's possible someone else will know another option.)

##### waleed 12/13/2020 11:21:15
Anyone with a better solution can please help me out with it

##### Justin Fisher 12/13/2020 11:23:22
The people who are likeliest to have a suggestion for you seem to mostly be around during European workweek hours, so you may have to wait til Monday to hear from them.  (I doubt they'll have anything different to say on this though - sorry.)

##### swapnilsayansaha 12/13/2020 19:53:06
thanks. makes sense. The one I have works fine for moving up and down (y-axis, heave), but it's difficulty to move in x and z direction. It needs to spin quite fast before the spin actually allows any translational motion in the two axis.


[https://drive.google.com/file/d/1oCHnq4rbwomfTbPqkTM3NuJYbsA-qBYC/view?usp=sharing](https://drive.google.com/file/d/1oCHnq4rbwomfTbPqkTM3NuJYbsA-qBYC/view?usp=sharing)


^ a video demo of what happens when you want to move sideways


due to the spinning nature of the AUV it's difficult to control it's direction

##### Justin Fisher 12/13/2020 20:56:28
Yeah that out-of-control spin would make it hard to navigate!  Do you think it's *supposed to* spin like that, or is there something that's supposed to stabilize it?



Depending on what you want, I'd probably suggest starting from scratch, make a capsule body, stick a big propeller on the rear, use supervisor superpowers to increase/decrease mass (to simulate a bladder that sucks in / ejects water to change buoyancy) and then add some sort of rudder to steer (not sure whether Webots hydronynamics is good enough to have drag from a flat rudder turn the sub, or whether it'd be better to use propellers to turn.

##### swapnilsayansaha 12/13/2020 21:38:30
i think it was designed to spin like that without keeping the notion of controllability in mind.. i will look into your suggestion.. i did see some papers using webots to simulate flaps and rudders..

##### Pratik 12/14/2020 05:31:49
Hi, I want to what are the minimum turning radii of BMWx and Tesla cars in the simulation environment. Thank you

##### chungshan 12/14/2020 07:12:54
Hi, can I get the torque of a body?

##### Stefania Pedrazzi [Cyberbotics] 12/14/2020 07:17:04
Webots doesn't provide any API for C#. But You can write your own wrapper controller in any of the supported languages (C, C++, Java, Python) that communicates with your C# program, receives the commands and passes them to Webots.


`@chungshan` From the Webots API you can only get the torque of a Motor node. But you can write your own physics plugin and use directly the ODE `dBodyGetTorque` function (or any other ODE functions) to retrieve the torque for a body.

Physics plugin documentation: [https://www.cyberbotics.com/doc/reference/physics-plugin](https://www.cyberbotics.com/doc/reference/physics-plugin)

ODE manual: [http://ode.org/wiki/index.php?title=Manual#Mass\_and\_force](http://ode.org/wiki/index.php?title=Manual#Mass_and_force)


In the PROTO files of BmwX5 and Tesla and you can find the distance between the wheels called wheelbase (BMW is `2.995m`, Tesla is `2.94m`). Then to compute the turning radiu (as for example described in [http://www.davdata.nl/math/turning\_radius.html](http://www.davdata.nl/math/turning_radius.html)) you also need the minimum steering angle. There is no hard limit of the steering angle in the models, but this is limited from the controller. For example, 

the default autonomous\_vehicle controller limits the steering angle to `0.5 rad`. So if you are using a different controller you should adapt the values based on your soft limits. So for the BMW X5 with default controller is about `6.247m` and for the Tesla is about `6.132m`.

##### Justin Fisher 12/14/2020 08:06:34
`@chungshan` If all you want is the *angular velocity* of a body, you can get that with the supervisor command `bodynode.getVelocity()` (that's the Python name -- name differs slightly in other languages) which returns a 6-item vector, the first three of which are the linear velocity, and the latter 3 of which are angular, which I'm guessing might be what you want?  If you instead want to know the net "torque" force that's changing this angular velocity, you could estimate this pretty well by looking at the rate of change of this angular velocity from timestep to timestep, or you could make a Physics plug-in, like `@Stefania Pedrazzi` said.

##### Pratik 12/14/2020 08:07:40
It's really helpful, Thanks alot!

##### chungshan 12/14/2020 08:10:21
thanks for your advice! I'm trying to write a physics plugin as `@Stefania Pedrazzi` said

##### Stefania Pedrazzi [Cyberbotics] 12/14/2020 09:16:29
Webots includes an example of floating robot, but none of underwater robot:

[https://www.cyberbotics.com/doc/guide/salamander](https://www.cyberbotics.com/doc/guide/salamander)

##### swapnilsayansaha 12/14/2020 09:16:52
thanks. ya i saw that. that doesn't work in my case.

##### chungshan 12/14/2020 09:27:16
I write a physics plugin include dBodyGetTorque. I can get the torque of the body when I directly apply a torque to it (dBodySetTorque). However, if I manually let this body to collide with other solid in the world, the torque/force of the body all returned zero (dBodyGetTorque/dBodyGetForce). What's wrong with this?

##### Stefania Pedrazzi [Cyberbotics] 12/14/2020 09:34:04
If this is the case, then I would say that after applying it the force/torque is translated to linear/angular velocity of the body.

Note that if you are interested in the force generated by a collision, you could also check the TouchSensor device:

[https://www.cyberbotics.com/doc/reference/touchsensor](https://www.cyberbotics.com/doc/reference/touchsensor)


By the way, are you retrieving the torque/force in the `webots_physics_collide` callback function in your physics plugin?

##### chungshan 12/14/2020 09:35:54
No, I'm retrieving the torque in webots\_physics\_step()

##### Stefania Pedrazzi [Cyberbotics] 12/14/2020 09:38:06
ok, then it would also maybe worth to check if you get different  results retrieving the torque in the `webots_physics_step_end()` function. But I'm not sure if this makes any difference.

##### chungshan 12/14/2020 09:41:51
It got the same result 😦

##### dimple.bhuta 12/14/2020 10:39:44
Hello, I wanted to ask how to use apperance protos in wbt file I am still not able to understand. Using plastic etc for crossroads

##### Olivier Michel [Cyberbotics] 12/14/2020 10:43:38
You can simply use a PBR appearance proto as the appearance of any object in the scene tree.


If you open a Solid node, you will see an "appearance" field. If you remove the current appearance and click the "+" button to add a new one, you will be proposed to select one of the PBR appearance protos available in Webots, including Plastic.

##### dimple.bhuta 12/14/2020 10:45:51
got it thank you


i am able to add appearance

##### Steven37 12/14/2020 13:38:10
I can't understand why now I have the problem as shown in the video with my robot. Can anyone help me, please?
> **Attachment**: [3YProject\_SagaRobot\_w112.mp4](https://cdn.discordapp.com/attachments/565154703139405824/788035816873394196/3YProject_SagaRobot_w112.mp4)

##### Stefania Pedrazzi [Cyberbotics] 12/14/2020 14:01:27
Please stop posting multiple times the same question.

If you carefully look at your simulation you will notice that the `JointParameter.axis` value for your three wheels is wrong.

##### Steven37 12/14/2020 14:16:04
I'm so sorry for posting the same question multiple times, that's because it said I failed to upload so I kept uploading it. Can you explain to me a little more about my mistake and how can I fix it, please? Why are my wheels not rotating in the normal direction but rotating around the z-axis like that?

##### Stefania Pedrazzi [Cyberbotics] 12/14/2020 14:19:29
Because in your `Joint.joinParameters.axis` field it is set that the rotation axis is the z-axis. You should select your joint JointParameter nodes in the Webots scene tree (or add a new JointParameters node if none already exists) and set correctly the `axis` field value.

I would also strongly suggest you to follow this tutorial that explains how to set up a wheeled robot:

[https://www.cyberbotics.com/doc/guide/tutorial-6-4-wheels-robot](https://www.cyberbotics.com/doc/guide/tutorial-6-4-wheels-robot)

##### Steven37 12/14/2020 14:40:07
I have changed the rotation axis of the wheels but now I have this problem, can you help me, please?
> **Attachment**: [3YProject\_SagaRobot\_w114.mp4](https://cdn.discordapp.com/attachments/565154703139405824/788052709198135336/3YProject_SagaRobot_w114.mp4)

##### Stefania Pedrazzi [Cyberbotics] 12/14/2020 14:43:45
First you should initially place your robot on the ground at the beginning of the simulation.

If this doesn't help, then you should check the physics nodes of your robot and the position of the center of mass. At first sight I would say that the center of mass is not centered and this makes the robot fall.

##### Steven37 12/14/2020 14:59:14
So how should I modify the centre of mass of my robot?
%figure
![3Y_project_SagaRobot_CentreOfMass.png](https://cdn.discordapp.com/attachments/565154703139405824/788057521432428555/3Y_project_SagaRobot_CentreOfMass.png)
%end

##### Stefania Pedrazzi [Cyberbotics] 12/14/2020 15:02:51
If you select the robot and then check the option `Show Center Of Mass` from the `View > Optional Rendering` menu, then a dark blue coordinate system will appear in the scene showing the current position of the center of mass of your robot. Based on this you should adjust the `centerOfMass` fields of your solid. Note that the problem could also come from any of the children Solid nodes and not from the top Robot node.

##### Steven37 12/14/2020 15:24:57
I still can't figure out what is wrong with my robot. Can someone open my Webots file and check it for me to save my life, please?
> **Attachment**: [3YProject\_SagaRobot.wbt](https://cdn.discordapp.com/attachments/565154703139405824/788063994275168296/3YProject_SagaRobot.wbt)

##### Olivier Michel [Cyberbotics] 12/14/2020 15:28:04
If you have an active Premier service, you can send your world file to support@cyberbotics.com so that it can be checked and the support team will revert back to you with advices.

##### Steven37 12/14/2020 15:34:00
So how can I find out about it?

##### Olivier Michel [Cyberbotics] 12/14/2020 15:38:10
Did you purchase a Webots Premier service recently?


If not, you can find ordering information from [https://cyberbotics.com#plans](https://cyberbotics.com#plans). A Premier Service standard is sufficient for reviewing your code / world files and providing you with advices.

##### taimoor 12/14/2020 15:46:44
can anyone help me to solve this error?
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/788069472933117952/unknown.png)
%end

##### MartinG 12/14/2020 15:57:03
Anyone around that could help me out a bit with tweaking WorldInfo?


I'll be more specific, any value > 64 for basicTimeStep makes only the body of a car sink, which I think causes collision issues with the wheels and then they rotate in all kinds of wild ways.


I'm using the Tesla Model 3 Proto.


Thanks in advance! 🙂

##### Justin Fisher 12/14/2020 16:01:36
The bigger your timestep, the more things will move between each time when the physics engine tries to detect and resolve collisions.  With bigger timesteps you'll probably run into problems with smaller items moving too far into things before the collision is detected, so you'd probably be better off sticking with larger items.  If you're using an existing model and don't want to change its size, you'll probably not want to set the timestep too big.

##### Olivier Michel [Cyberbotics] 12/14/2020 16:07:07
You can also play with the softCFM of the contact properties, see [https://cyberbotics.com/doc/guide/modeling#my-robot-sinks-into-the-ground-how-to-remove-this-effect](https://cyberbotics.com/doc/guide/modeling#my-robot-sinks-into-the-ground-how-to-remove-this-effect)

##### MartinG 12/14/2020 16:38:13
Thank you both for the replies, I'll see if I can run the simulation faster with your tips1

##### owongcho 12/14/2020 18:50:55
hello, what method(s) is available to control two robots with a single controller if I am using a supervisor controller; similar to the Robot.getName() method when using a Robot controller?

##### MartinG 12/14/2020 20:36:05
I believe you can save the two Robot nodes like on the 5th line here [https://www.cyberbotics.com/doc/guide/supervisor-programming?tab-language=python#tracking-the-position-of-robots](https://www.cyberbotics.com/doc/guide/supervisor-programming?tab-language=python#tracking-the-position-of-robots)


just set the DEF to two different strings (maybe Robot1 and Robot2)

##### owongcho 12/14/2020 20:50:48
I did that but I can't control them separately (they move together), unlike using the Robot.getName('robot\_name') method which control them separately.

##### Dave 12/14/2020 20:53:32
Hello everyone,

I hope you're having a nice day.



I would need help please regarding killing Process (multriprocessing) or Thread (threading) in Python that I've spawned from my controller of the robot.



Does someone has a hint please ? I've look up a bit in the Supervisor documentation but I am not sure it is the correct place. Maybe there exist already a thread on this topic ?



Thank you in advance

##### owongcho 12/14/2020 21:18:25
I am now able to do it now. I didnt know I can use the controller's functionality in the supervisor too

##### culurciello 12/14/2020 23:24:44
Hi, what is the best way to instrument a robot with IK? I was looking at [https://github.com/cyberbotics/pyikfast](https://github.com/cyberbotics/pyikfast) but I am not using Docker and it is unclear how to compile without... any help much appreciated and thank you



> **Attachment**: [ur10-ik.wbt](https://cdn.discordapp.com/attachments/565154703139405824/788185312823345202/ur10-ik.wbt)



> **Attachment**: [inverse\_kinematics.py](https://cdn.discordapp.com/attachments/565154703139405824/788185342142185502/inverse_kinematics.py)

##### Olivier Michel [Cyberbotics] 12/15/2020 07:29:54
ikfast is not the easiest IK library to setup. You may want to give a try to ipky as well. See Webots demo here: [https://www.cyberbotics.com/doc/guide/irb4600-40#ikpy](https://www.cyberbotics.com/doc/guide/irb4600-40#ikpy)

##### DanyP 12/15/2020 09:21:54
Hello,

I want to design a hydraulic cylinder that support loading. 

From my understanding of webots documentation, I have to set the physics node to nonNULL to deal with dynamic behavior and not only kinematics.

On the other side, as  the female cylinder  retracts within the male cylinder, I have to set boundingObject node to zero in order to avoid collision. 

Yet, according to the doc, boundingObject set to zero implies to have physics to NULL, which is contradictory to the dynamic mode setting.

How can I get rid of this conflict ?

##### Olivier Michel [Cyberbotics] 12/15/2020 09:28:45
The female cylinder should probably be a pipe rather than a cylinder.

##### DanyP 12/15/2020 09:42:45
Alright I see, thank you.  And after checking the SolidPipe doc, I assume there is no easy way to simulate this solid type similarly to usual ones, is there ?

##### Olivier Michel [Cyberbotics] 12/15/2020 09:43:12
Yes, you will have to rely on the SolidPipe...

##### Steven37 12/15/2020 09:55:00
For my 4-wheel robot, when I set the velocity for all four wheels to the same value then my robot can move forward as expected but if I would set the velocity for four wheels with different values, for example when I want it to move right or left, it doesn't work. In the image, this is a piece of code that I have tried but my robot can only go straight forever. Can someone guess where I might have gone wrong that resulted in this error? Thank you!
%figure
![3Y_project_SagaRobot_codeDemo.JPG](https://cdn.discordapp.com/attachments/565154703139405824/788343344492707861/3Y_project_SagaRobot_codeDemo.JPG)
%end

##### MartinG 12/15/2020 09:56:44
I'd give it at least some power to the right wheels as well.

##### Steven37 12/15/2020 10:04:03
I have tried it as well but I got the same result

##### MartinG 12/15/2020 10:04:51
do you have another wb\_robot\_step call below the velocity calls?

##### Justin Fisher 12/15/2020 10:13:30
Whenever you try to steer a 4-wheeled bot with all 4 wheels pointed straight forward, turning the bot will require skidding some of the wheels across the ground sideways, so you'll need a fair bit of motor-power to overcome the friction resisting this skid, especially if your wheels are wide.  If friction is preventing the skid, the robot can still roll forwards/backwards, just not turn.  



Depending on your wheel-radius, you may have better luck setting a much larger angular velocity to give your motors enough power to overcome the friction resisting the sideways skid you need.  E.g., I've had good luck with wheels with radius 4cm (0.04 meters) and motor velocity 10.


If you don't want your robot to go forward fast, you could increase one side and give the other side a negative value so the motors would still all be exerting a lot of force to make it turn, while not producing much *net* forwards motion

##### Steven37 12/15/2020 10:15:32
No, i don't

##### MartinG 12/15/2020 10:16:09
Well there you go. Just add one under the right turn code segment, just like you have one under the forward movement segment.

##### Justin Fisher 12/15/2020 10:16:23
You need robot.step to have the controller enact your commmands, usually put inside a loop that waits until robot.step() returns -1, indicating that the user stopped the simulation

##### MartinG 12/15/2020 10:17:33
^ yeah, it's good practice to have it in a while loop so that you can have the actions be repeated. If you're just trying to figure out the movements and their specifics though, I'd just recommend you remember to add the step call after your new code.

##### Steven37 12/15/2020 10:30:14
Is it what you guys mean, I have edited my code like this but it still doesn't work correctly.
%figure
![3Y_project_codeDemo2.JPG](https://cdn.discordapp.com/attachments/565154703139405824/788352211725713448/3Y_project_codeDemo2.JPG)
%end

##### Justin Fisher 12/15/2020 11:10:04
The velocity values look like they would work, but I'd still encourage you to set up a while loop that exits when robot\_step returns -1.  This while loop would usually check the robot's sensors and then set motor velocity.  You aren't using sensors, so I'd probably just put the loop around your last 4 set\_velocity commands.  (Technically you could just have those commands be before the loop though, since the motors will run that velocity forever, so you wouldn't have to repeat that same velocity order every iteration of the loop, but it's fine to do so.).



The while loop will keep your controller program running until you stop the simulation yourself.  If your controller program stops on its own, I'm not sure whether the simulation would keep running, so that might potentially explain your not seeing it moving.

##### Steven37 12/15/2020 11:16:43
I'm so sorry but I have tried to add the while loop as you said as well but still the same result


Can anyone save me, please?

##### MartinG 12/15/2020 11:17:13
What does your code look like right now?

##### benko.boi 12/15/2020 11:28:30
anyone able to help me? webots keeps crashin when trying to load a world

##### Darko Lukić [Cyberbotics] 12/15/2020 11:34:52
`@benko.boi` Can you create a minimal example with which we can reproduce the crash?

##### benko.boi 12/15/2020 11:37:07
the map contains a few basic objects, two thinkerbots and and controllers for both of them, than a conveyor belt and a basic background and floor


on the webots site i read that running the app in safe mode may eliminate the issue, however now im struggling with that

##### Darko Lukić [Cyberbotics] 12/15/2020 11:39:09
If it is crashing with the specific world it may be a bug in Webots

##### benko.boi 12/15/2020 11:39:50
would you mind helping me to run it in safe mode?


might be my last option

##### Darko Lukić [Cyberbotics] 12/15/2020 11:40:13
It would be super helpful to share the world or replicate the part that causes the crash

##### benko.boi 12/15/2020 11:40:26
i can send you the world in dms

##### Darko Lukić [Cyberbotics] 12/15/2020 11:40:34
Perfect

##### Steven37 12/15/2020 13:03:44
This is my code now. It just can move forward or backwards but I can't understand why it cannot turn. What can I do next? Help me please, it's so important to me.
%figure
![3Y_project_SagaRobot_code3.JPG](https://cdn.discordapp.com/attachments/565154703139405824/788390841197920276/3Y_project_SagaRobot_code3.JPG)
%end

##### Justin Fisher 12/15/2020 13:23:59
`@Steven37` Within your loop you keep telling all your wheels to run the same speed, so of course it doesn't turn.  If you want it to turn, you'll need to tell some to run at different speeds, like you do for a single timestep before entering this loop.

##### IAO 12/15/2020 13:29:25
Hi I want to create a new Webot account to use Webots 8.0.2, please help me

##### Steven37 12/15/2020 13:31:57
I have time delay so I think it will turn first before entering the loop. However, actually, if I just set the velocity of my 4 wheels with different values, it stops and doesn't move at all. So it is because of friction or something?

##### Olivier Michel [Cyberbotics] 12/15/2020 15:48:28
Webots 8.0.2 is not supported any more. This is not possible. You should use Webots R2021a instead.

##### IAO 12/15/2020 15:49:43
Olivier Michel thanks

##### mayank.kishore 12/15/2020 20:13:05
Has anyone experimented with waypoint navigation? Need to develop a system that will allow for a robot to go to a location with a waypoint indicated by a potential overhead map

##### MartinG 12/15/2020 20:26:54
I've been beating my head over path planning for the past week in order to make something like that.

##### IAO 12/15/2020 20:35:42
So Would i be able to interface webots R2021 version with choregraphe(software to implement Nao)? please

##### mayank.kishore 12/15/2020 21:24:06
Ah shoot, any luck? I have also been struggling to make a system that works. It is ROS based so I believe it should be possible

##### Darko Lukić [Cyberbotics] 12/15/2020 22:06:52
`@mayank.kishore` `@MartinG` 

[https://github.com/cyberbotics/webots\_ros2/blob/master/webots\_ros2\_epuck/launch/rats\_life\_waypoints\_launch.py](https://github.com/cyberbotics/webots_ros2/blob/master/webots_ros2_epuck/launch/rats_life_waypoints_launch.py)

This launch file launches Navigation2 with Webots and ROS2. 



To get familiar with Webots, ROS2, and the e-puck robot you can follow:

[https://github.com/cyberbotics/webots\_ros2/wiki/Tutorial-E-puck-for-ROS2-Beginners](https://github.com/cyberbotics/webots_ros2/wiki/Tutorial-E-puck-for-ROS2-Beginners)

##### MartinG 12/15/2020 22:15:42
Anything of the sort for a non ROS controller? Hvala 🙂

##### Darko Lukić [Cyberbotics] 12/15/2020 22:48:34
In that case, you have to develop a custom algorithm or to integrate an existing algorithm by yourself. Depending on your use-case, a simple state machine may do the job, something like, rotate towards the goal, move forward, rotate towards the goal... Nema na cemu 🙂

##### Olivier Michel [Cyberbotics] 12/16/2020 07:32:02
Yes, but you have to compile the NAO interface from the source code at [https://github.com/cyberbotics/naoqisim](https://github.com/cyberbotics/naoqisim) (warning: this is unsupported software).

##### IAO 12/16/2020 07:34:05
okay thank you so much

##### MartinG 12/16/2020 09:41:32
I figured as much. Thanks once again.

##### nmg 12/16/2020 15:03:20
Hello, everyone.

I am having problems when I use the supervisor.simulationReset(), the camera freezes after the reset. I can see the updated image in the overlay but my controller receives an static image prior to the reset.

Have anyone experienced it? Any idea?

##### owongcho 12/16/2020 15:46:09
Hi, can Webots simulate the effect of an impact, like cars collision?

##### Olivier Michel [Cyberbotics] 12/16/2020 15:49:49
It uses a rigid body simulation, so the car will bounce on impact but not crash: no implosion or any other deformation.

##### nmg 12/16/2020 16:01:55
Tested on R2020b-rev1 and R2021a with the same result.

##### Olivier Michel [Cyberbotics] 12/16/2020 16:07:27
Can you please report this in an issue with all the necessary details so that we can reproduce it?

##### culurciello 12/16/2020 16:16:47
Does anyone have a working inverse kinematics IK example for a UR-10? I was able to make a ur-5 work, but not the UR-10. Here are working files for ur-5
> **Attachment**: [ur5\_ik\_test.wbt](https://cdn.discordapp.com/attachments/565154703139405824/788801813989163028/ur5_ik_test.wbt)



> **Attachment**: [ur5\_ik\_test.py](https://cdn.discordapp.com/attachments/565154703139405824/788801854087757824/ur5_ik_test.py)

##### Darko Lukić [Cyberbotics] 12/16/2020 16:19:46
`@culurciello` I believe `@Simon Steinmann` is an expert in IK and Webots robotic arms. He may already have a working example for UR-10.


`@culurciello` You don't have to specify the ikpy chain manually, you can use `getUrdf()`:

[https://github.com/cyberbotics/webots/blob/671849daaa2a16202af4636103480e43747072c5/projects/robots/abb/irb/controllers/inverse\_kinematics/inverse\_kinematics.py#L41](https://github.com/cyberbotics/webots/blob/671849daaa2a16202af4636103480e43747072c5/projects/robots/abb/irb/controllers/inverse_kinematics/inverse_kinematics.py#L41)

##### culurciello 12/16/2020 16:46:21
`@Darko Lukić` thanks a lot, if you guys can help it is really a great Xmas present`@Simon Steinmann` - my current not working status is:
> **Attachment**: [ik\_test.py](https://cdn.discordapp.com/attachments/565154703139405824/788809254777651200/ik_test.py)



> **Attachment**: [ur10-ik.wbt](https://cdn.discordapp.com/attachments/565154703139405824/788809282195161108/ur10-ik.wbt)


`@Darko Lukić` thansk a lot, have tried that before with no success, btu will try again now



> **Attachment**: [ik\_test2.py](https://cdn.discordapp.com/attachments/565154703139405824/788822161929404446/ik_test2.py)



> **Attachment**: [ur10-ik.wbt](https://cdn.discordapp.com/attachments/565154703139405824/788822190283423754/ur10-ik.wbt)


DOes not work for me even with the example `@Darko Lukić` `@Simon Steinmann`

##### row 12/17/2020 04:40:41
Hello all, I am using webots with Mac OS and how do I select my own anaconda python environment to run my controller?


The console output shows that I am using the default Python 2.7 that comes with Mac OS (instead of python 3.7 from my custom anaconda environment)


Never mind, I have solved the problem by directly adding anaconda python path into "Python command" in Webots' preference page. But I have the following error message:


"Traceback (most recent call last):

  File "my\_mavic\_controller.py", line 5, in <module>

    from controller import Robot, GPS, InertialUnit, Compass, Gyro

  File "/Applications/Webots.app/lib/controller/python38/controller.py", line 31, in <module>

    import \_controller

ImportError: dlopen(/Applications/Webots.app/lib/controller/python38/\_controller.so, 2): Library not loaded: /Library/Frameworks/Python.framework/Versions/3.8/Python

  Referenced from: /Applications/Webots.app/lib/controller/python38/\_controller.so

  Reason: image not found

WARNING: 'my\_mavic\_controller' controller exited with status: 1."

##### Olivier Michel [Cyberbotics] 12/17/2020 06:52:35
Webots doesn't include native support for all Python versions and if you want to use Anaconda Python, you will have to recompile the Python binding as explained here: [https://cyberbotics.com/doc/guide/using-python#use-an-alternative-python-version](https://cyberbotics.com/doc/guide/using-python#use-an-alternative-python-version)


But Webots does support natively Python 2.7, 3.7, 3.8 and 3.9 from the official Python distribution ([https://python.org](https://python.org)) and from HomeBrew ([https://brew.sh](https://brew.sh)).

##### row 12/17/2020 06:54:32
Thanks!

##### hugos 12/17/2020 10:07:56
Hello everyone, I come back to my problem from last week about the custom physics plugin and boundingObject Groups, where we cannot handle custom collisions for boundingObject Groups

I installed version 2021a, but the problem is not solved in it

Do you have any ideas to work around this problem (keeping the boundingObject groups) ? Thanks !

##### Darko Lukić [Cyberbotics] 12/17/2020 10:48:11
`@hugos`, I have just tested and I cannot reproduce the issue. Here is the world example that shows a working physics plugin that handles Group-(other node) collision:

[https://github.com/cyberbotics/webots/files/5465323/physics\_callback\_bug.zip](https://github.com/cyberbotics/webots/files/5465323/physics_callback_bug.zip)

posted here:

[https://github.com/cyberbotics/webots/issues/2420](https://github.com/cyberbotics/webots/issues/2420)


Could you please share a minimal example so we can reproduce the issue?

##### hugos 12/17/2020 10:50:03
I send you all the elements in private msgs

##### Justin Fisher 12/17/2020 11:40:07
Why do you think you have a time delay?  It doesn't show up in the code you posted.  It's important to remember that in Webots, nothing happens in the simulation except when you call robot.step, and when you call robot.step the simulation only advances about 1/60th of a second (with default timestep 16ms).  So if you're expecting to see your robot turn, you'll need to have called timestep repeatedly with the wheels turning at different speeds.


**And a question of my own.**  I've been struggling with using supervisor functions in multiple controllers to watch a group node that initially starts childless.  I would like one supervisor, call it the Breeder, to add children to this group, and the other supervisors, call them the Watchers, to be able to see the children that are added.  Things seem to work fine from the perspective of the Breeder who adds the children, since the children appear at the right times in the scene tree and the simulation.  However, the children often do not show up for the Watchers, e.g. when they use getCount or getMFNode on the children field.  



It looks like the first time I use getField to get the children field in a controller, it somehow caches the length of that field and never updates it to match reality except when that controller itself changes the contents of the field?  At any rate, if I have a Watcher wait to getField, they'll get the current length of the field at the time they first did getField, but won't be able to see any additional children that the Breeder adds, even if they do getField again (i.e., getCount continues to show the count at the time of the first getField, not an up-to-date count, and getMFNode throws an error if you try to access a higher index than that frozen getCount number, even when the field actually does have children with higher indices).  Any ideas what's going on here, and how I can get the Watchers to be able to see all the children the Breeder adds?

##### Olivier Michel [Cyberbotics] 12/17/2020 12:25:47
This might be a bug... Can you reduce your simulation to the simplest example still exhibiting this buggy behavior and open an issue about it with all the details?

##### Lucifer2 12/17/2020 13:19:19
Hello, I am trying to access camera for 4-Wheels robot using python and gone through the documentation and tried ("Cam = Camera.enable(name, samplingPeriod) couldn't able to access it. Could any one help me out where exactly I am doing  wrong



%figure
![IMG20201217184844.jpg](https://cdn.discordapp.com/attachments/565154703139405824/789119668765851688/IMG20201217184844.jpg)
%end

##### MartinG 12/17/2020 13:20:28
First instantiate the a robot (you've already imported the class) with something like robot = Robot()


then you can do camera = robot.getCamera('camera') and camera.enable(timestep)


timestep = int(robot.getBasicTimestep())


make sure you get the timestep before you enable the camera

##### Lucifer2 12/17/2020 13:24:25
Thank you `@MartinG`

##### MartinG 12/17/2020 13:25:07
All good bud, have fun!

##### Götz 12/17/2020 13:35:08
Hi guys, I'm trying to get the gopigo3 robot into Webots. I'm still in the beginning stages with Webots so modeling it myself seems to be a daunting task (I've started it, but mostly I learn what I still don't know/understand about Webots ;). There is already a URDF/XACRO gopigo3 package for ROS. I tried the naive way by just trying urdf2webots but this gives errors, I guess the XACRO has to be converted to plain URDF first?

##### Olivier Michel [Cyberbotics] 12/17/2020 13:36:03
Yes.

##### Götz 12/17/2020 13:36:45
Argh, so I have to install ROS first... 😰


So I might carry on modeling it in Webots, might be easier then installing ROS... LOL


Is converting URDF a viable way or does it make sense to model directly in Webots?

##### Olivier Michel [Cyberbotics] 12/17/2020 13:40:41
It is a viable way and works usually pretty well, depending on the complexity of the model. An alternative to this is to reuse the meshes from the XACRO model and integrate them directly in Webots using the Webots Mesh node.


I guess you have meshes in DAE or OBJ format?

##### Götz 12/17/2020 13:41:44
Your talking to a newbie... it's here: [https://github.com/ros-gopigo3/gopigo3](https://github.com/ros-gopigo3/gopigo3)


Says mlp and stl AFAICS...

##### Olivier Michel [Cyberbotics] 12/17/2020 13:46:34
That will work for STL files.


[https://cyberbotics.com/doc/reference/mesh](https://cyberbotics.com/doc/reference/mesh)

##### Götz 12/17/2020 13:47:46
Cool, thanks, I'll give it a try. So at least I won't get bored over Christmas...

##### Olivier Michel [Cyberbotics] 12/17/2020 13:48:07
Maybe you will have to convert the MLP files (I never heard of this format before).

##### Götz 12/17/2020 13:50:29
So when I get the STL into Webots this will result in one single object?

##### Olivier Michel [Cyberbotics] 12/17/2020 13:54:09
Yes.


The Mesh node will be at the geometry level (inside a Shape node).


I guess there is one mesh for the body of the robot and another mesh for the wheel (to be used twice).


The MLP files are meshlab project files, you can ignore them. The model seems to be very rough (no colors, no textures). You will have to work on it if you want to make look nice in Webots. You can use Blender to create texture mapping on the meshes.

##### Götz 12/17/2020 14:01:01
Second, my bad


So yes, I got it as a shape node into a world. But it's huge, with a strange orientation to my floor and I can't move it around...



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/789133275629223976/unknown.png)
%end


The small brown rectangle is my 5x5 floor...

##### DrakerDG 12/17/2020 14:17:39
`@Götz` is normal but you can change the orietation

##### Götz 12/17/2020 14:18:09
I'll give it a try, thanks. At least it is there..


I can't figure out how to change the orientation and scale/size of the mesh node (it's at the geometry level of a shape node in a robot child node)... if anybody got a hint for me...

##### Olivier Michel [Cyberbotics] 12/17/2020 15:05:17
You should put the Shape node containing the Mesh node inside a Transform node and you will be able to scale it down and rotate it.

##### Götz 12/17/2020 15:22:52
Ahhh... thanks.

##### benko.boi 12/17/2020 15:23:11
would anyone be able to help me with webots and matlab? i am struggling to use any functions or global variables

##### dimple.bhuta 12/17/2020 21:10:54
hello I am getting the following error


Error message
%figure
![error_msg.png](https://cdn.discordapp.com/attachments/565154703139405824/789238293640249344/error_msg.png)
%end


I am not really sure about what this error means


I will appreciate any help. Thank you

##### mayank.kishore 12/17/2020 21:23:47
Let me know if you have something that is working on your end

##### Joel\_Uchiha 12/17/2020 23:15:30
Hi im trying to load a webot file but it keeps showing this loading dialogue



%figure
![image0.jpg](https://cdn.discordapp.com/attachments/565154703139405824/789269581201801226/image0.jpg)
%end

##### mayank.kishore 12/17/2020 23:23:45
Anyone know why I keep getting this error? Just tried to run this command: `ros2 launch webots_ros2_epuck robot_launch.py`
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/789271650637053952/unknown.png)
%end

##### Darko Lukić [Cyberbotics] 12/17/2020 23:27:32
Could you tell us a bit more about your GPU? What is the model of the GPU, what driver version do you use? Can you run Webots independent from ROS2?


Which world are trying to load? To be on the safe side I recommend you to update Webots to R2021a

##### mayank.kishore 12/18/2020 00:06:44
I am running it on Parallel's desktop (Ubuntu 20.04 VM) on my Macbook pro. GPU is  Radeon Pro 555X 4 GB Intel UHD Graphics 630 1536 MB, and not sure if I can run it independently

##### MartinG 12/18/2020 01:50:27
I've looked into path planning a bit more and it looks like it's very use case specific. Check out [https://github.com/AtsushiSakai/PythonRobotics](https://github.com/AtsushiSakai/PythonRobotics) . There's a lot of great examples that can help you understand what you can do for your project.

##### hugos 12/18/2020 08:12:29
Good morning all,

do you know how to call an external python program which defines the setPositionSync function?

I tried to import my file but it says "AttributeError: 'Motor' object has no attribute 'setPositionSync'"


my setPositionSync.py file :

`from controller import Device

class Motor(Device):

  def setPositionSync(self, target, delay):

    DELTA = 0.001  # max tolerated difference

    motor.setPosition(target)

    motor.getPositionSensor().enable(timeStep)

    effective = 0  # effective position

    while True:

      if (step(TIME\_STEP) == -1):

        break

      delay -= TIME\_STEP

      effective = motor.getPositionSensor().getValue()

      while True:

          if(fabs(target - effective) > DELTA and delay > 0):

              break

    motor.getPositionSensor().disable()`


and in my controller, i did : import setPositionSync, and call motors[1].setPositionSync(1,0.1) for a try

##### Alessia Valle 12/18/2020 08:46:17
Good morning, I am running Ubuntu 18.04 on a virtual machine installed on my windows computer. Since I am new to Linux, can you suggest me which path should I follow among the ones suggested in the Cyberbotics official documentation? Thanks in advance

##### Darko Lukić [Cyberbotics] 12/18/2020 08:55:03
Thank you for the specification details. Just open Webots (search for Webots in Ubuntu) and in `File > Open Sample World...` choose some world


You should do something like this:

```python
class A:
    pass
a = A()
def foo(self): # Have to add self since this will become a method
    print('hello world!')
setattr(A, 'foo', foo)
a.foo() # hello world!
```

##### hugos 12/18/2020 11:54:25
Ok i'll try that thanks !;)

##### culurciello 12/18/2020 17:19:58
Is there an easy and quick way to modify robot initial pos from def: DEF ARM UR5e {

  hidden position\_0\_0 0

  hidden rotation\_1 0 0 -1 0

  hidden position\_1\_0 -0.25137094580582836

  hidden rotation\_2 0 -1 0 0.25137094580582764

  hidden position\_2\_0 -1.005338993663453

  hidden rotation\_3 0 -1 0 1.0053389936634527

  hidden position\_3\_0 -1.2566469548953756

  hidden rotation\_4 -4.292122580921746e-05 -0.9999999985927139 -3.118237546026085e-05 1.2565845914613933

  hidden position\_4\_0 6.12716655302702e-068

  hidden rotation\_5 -5.374279986558457e-08 0.01785745090540067 0.9998405430103133 6.020732998833995e-06

  hidden position\_5\_0 -0.1256659945529821

  hidden rotation\_6 0 -1 0 0.125665994552983

  translation 0.54 0.74 0.18

  rotation -0.9999999999793323 3.598409999925629e-07 6.41919999986733e-06 1.57079

  controller "<extern>"

  supervisor TRUE

  toolSlot [

    DEF DSENSOR DistanceSensor {

      rotation 0 0 1 1.570796

    }

  ]

}


what do the numbers in hidden pos and rotation mean?

##### Darko Lukić [Cyberbotics] 12/18/2020 17:24:14
Hidden fields mean that the simulation state is saved during the simulation run. You should avoid saving the world during the run as it may lead to the undesired behavior afterwards. I suggest you to delete all hidden fields.

##### culurciello 12/18/2020 17:36:40
Thankss `@Darko Lukić` how do you set a robot arm position for example?

##### Rishi 12/19/2020 06:30:40
Folks quick question, if a field name isn't specified in the PROTO it sets to its* default right?

[https://cyberbotics.com/doc/reference/positionsensor#description](https://cyberbotics.com/doc/reference/positionsensor#description)

For example here if the noise field is not specified in the PROTO, it will be taken as 0 which is the default specified? Same with the res, nothing specified is -1?

##### Simon Steinmann [Moderator] 12/19/2020 15:01:07
`@Rishi` Yes, if nothing is specified, the default is taken

##### Rishi 12/19/2020 15:01:31
Cheers thanks!


BTW would you all recommend running simple simulations in asynchronous mode so as to make programming easier, I'm teaching diff drive robots to school kids new to Python, in the Synchronous mode one has to take care to avoid stuff that is blocking right, as in a function if it takes a bit too long to execute that'll mess up the sim right?

##### Simon Steinmann [Moderator] 12/19/2020 15:04:00
keep it synchronous, otherwise you'll get much more problems


in synchronous mode, the simulation will just run slower if a function is slow


the important thing is, that robot.step() has to be called for the simulation to calculate a step. Usually done in a main loop, but can be called from different functions

##### Rishi 12/19/2020 15:07:14
Yes I know

What are the expected probs in async mode? My results were the same for simple tasks like object avoidance

I am asking because I am going to teach them IP soon where there is a chance that they'll face probs if they don't take into account that they've to regularly call robot.step



Plus I find the async method a bit more natural, essentially it becomes like a controller for a control system


coding* with the async method ***

##### Simon Steinmann [Moderator] 12/19/2020 15:08:05
[https://cyberbotics.com/doc/reference/robot?tab-language=python#synchronous-versus-asynchronous-controllers](https://cyberbotics.com/doc/reference/robot?tab-language=python#synchronous-versus-asynchronous-controllers)

##### Rishi 12/19/2020 15:08:42
Yes I have gone through this, thanks for sharing though

##### Simon Steinmann [Moderator] 12/19/2020 15:08:49
you'll run into big problems if you cannot easily reach your desired realtime factor, or if you want to run it as fast as possible


e.g. Reinforcement learning


you can always have different threads or processes running

##### Rishi 12/19/2020 15:09:49
I started my question with simple tasks with diff drive bots, I'm teaching middle schoolers

Sorry if that was not more clear


Hence for me the main distinction is the style of coding associated with each method


So would you not recommend async for such simple tasks as well?

##### Simon Steinmann [Moderator] 12/19/2020 15:10:54
if you can easily hit a realtime factor of 1 and you dont need to run it faster, then it should not matter mch


I just dont really see the need for it. If your python function is that slow that it creates problems, you have other issues I think :p

##### Rishi 12/19/2020 15:12:04
Okay thank you! I'll go ahead with async mode then

What I like is that now the robot,step becomes just another call to update the controller's info


Yeah, the thing* is IDK the ways in which kids will mess up

And then introducing this additional factor of having to call robot.step for advancing the simulation is an additional overhead on top of that

##### Simon Steinmann [Moderator] 12/19/2020 15:14:07
each approach brings its own challenges. I personally find synchronous much easier


things can't get out of order

##### Rishi 12/19/2020 15:14:58
Uh hmm

That is true

##### Simon Steinmann [Moderator] 12/19/2020 15:15:45
With async I can forsee issues, where control loops run WAY too fast, spamming the console. Requiring artificial sleep code

##### Rishi 12/19/2020 15:16:36
Oh okay thanks for the heads up, I hadn't thought of this, will need to run everything at a rate then like ROS, thanks for the insight

##### Simon Steinmann [Moderator] 12/19/2020 15:16:43
and I think serial is generally easier to understand than parallel in most things


with sync you do 4 steps:

1. get sensor data

2. do calculations

3. set control commands

4. step simulation


however, if you plan to transition into ROS, perhaps async could be a good way to go, as topic pubs and subs are async as well


as well as actions


that would be the biggest argument for async for me

##### Rishi 12/19/2020 15:21:31
Yes, I've started out with teaching them using synchronous mode itself

But I find that having to call robot.step() every time to advance the sim takes away part of the "realness"

These kids don't have access to hardware, so I'm aiming to give them like an immersive exp while coding, so the robot does its things & you're there controlling it (like riding a horse vs. hopping forward on a pogo stick)



With async, where robot.step just becomes an update controller data command, that's a better explanation and workflow IMO



and no plans to transition to ROS yet!


You know what, maybe I'll tell them all of this and leave it up to them to decide, my grader will work in either case 😛


Thanks again for your inputs!

##### Simon Steinmann [Moderator] 12/19/2020 15:25:06
I think that's the right call 🙂


oh and btw, I can highly recommend Raspberry PIs for Python. Last year in canada while doing my Masters Thesis in Robotics and AI, there was a middle school girl who was super curious during an "university visit day". I built a remote controlled car with her, powered by raspberri pi, with camera attached. Controlled from a laptop over wifi with video feed. All in Python. But much simpler things can be done too. It's just fun having the real world feedback of something working


[https://www.raspberrypi.org/products/raspberry-pi-zero-w/](https://www.raspberrypi.org/products/raspberry-pi-zero-w/) this thing is like 10 bucks and has wifi. Linux could be a barrier though

##### Rishi 12/19/2020 15:30:31
That is true indeed! There's a whole world of things folks can do with Raspberry Pi's! I had not thought of it for this lot, but maybe after all of their tasks are over we could give them PIs, N20 motors, 2S batteries and a webcam/Pi cam & some sensors and have tons of fun!

Like a ePuck2 or Thymio but lower cost, small like a micromouse


Maybe the next step would be introducing ROS on Pi4s

Cheers for your suggestions, all the best to your endeavors

##### Ragemor 12/19/2020 15:56:07
Im trying to use receiver/emitter with e-pucks. When try to run my simulation "self.emitter.send(message.decode('utf-8'))" this code doesnt work.  self.emitter.send(message.decode('utf-8'))

AttributeError: 'NoneType' object has no attribute 'send' anyone can help me ?

##### Simon Steinmann [Moderator] 12/19/2020 16:15:47
You need to set a handle to the receiver / emitter like this:



`emitter = robot.getEmitter('name')

emitter.send(message.decode('utf-8'))`

##### Ragemor 12/19/2020 16:46:53
But i want to control different e-pucks with an emitter. This emitter is not an e-puck. And ı try this but doesnt matter. Still same error.

##### Simon Steinmann [Moderator] 12/19/2020 16:47:59
you first have to get the robot handle and of course you need to use the correct name for the emitter


from Controller import Robot

robot = Robot()

##### Ragemor 12/19/2020 17:06:44
Can you take a look webots sample projects languages\python. I try to make a simulation like that with e-pucks.


I changed the receiver and emitter channel and problem fixed. I have no idea about that but its working with same code atm. Thanks for the help.

##### Justin Fisher 12/19/2020 18:48:51
`@Rishi`  I've been teaching Webots with university students rather than middle schoolers, but they seemed to understand pretty easily that whenever their controller says robot.step(timestep) that's the indicator that they've done as much responding to the current situation as they're planning to, and that they're ready to let the simulation step forward another step so they can get more info about how well their plan worked.



I don't think there's any advantage, as far as understandability is concerned, to making it asynchronous.  From the perspective of the controller, everything is still pretty much the same:  you take in sensory inputs, do some processing, send some motor commands, and call robot.next(timestep) so you can let the simulation play out a bit and start that process again.  The only thing that's different is that, if your controller runs too slow, a few steps of the simulation might have passed while you were doing your processing, rather than just one, so it makes things a bit harder to predict and understand.  My suggestion would be to stick with synchronous, unless you have people writing controllers that are so slow/complex that they slow down a synchronous simulation too much, and then shift to asynchronous and/or help people fix whatever was so slow about their controllers.   



I think the biggest challenge in this ballpark is helping students figure out how to get their robot to engage in a time-consuming project, like detouring around an obstacle that they won't necessarily retain sight of throughout the maneuver.  So somehow they need to maintain a memory that they've seen this obstacle, and condition their later behavior upon whether they remember seeing an obstacle recently, which is an extra layer of complexity beyond simple Braitenburg-style response to immediate inputs.

##### Rishi 12/19/2020 19:25:52
Thanks a ton for your inputs, for spending the time, effort and mindshare.



I raised this whole topic because the sync mode to me feels a bit like prodding the robot while coding, as opposed to like controlling a dynamical system that's responding to your inputs. The folks testing this have been adding robot.step all over the place with all sorts of timestep values, literal prodding of the sim! Kids are likely to do the same too. Besides, in other projects I've had nightmares developing logic in Lua scripts for V-REP, those scripts operate in a broadly similar manner, they slightly color my perception too. So ultimately, I'd like it to be a bit like ROS with the input & output stream like structure; where the robot.step is just updates the info the controller has, hence async, even when we're scheduled to introduce OpenCV in a couple of weeks, it's not really the technical reasons, but the approach.



I'll give this whole thing a bit of thought time & take a considered decision, in any case I have planned to make a video explaining the differences already.



Moving beyond Braitenburg-style responses should be doable with either mode using A* & similar algorithms I reckon as they still fit into that input, process, output paradigm, but with sync there's always this mental thing of don't forget to prod it! I'd like to abstract that away & hence the discussion. Cheers for engaging, we hope to be able to demonstrate our stuff to the community soon!

##### Joel\_Uchiha 12/19/2020 20:42:10
Hi Darko, it was 2020 version, thanks I will try installing 2021 and check now 🙂

##### Justin Fisher 12/19/2020 23:09:50
`@Rishi`  I started off my students with sample code that had robot.step(timestep) as part of the main loop exit condition, briefly explained why it was there, but did not suggest that as something they might ever want to change.  That did pretty well to keep them from doing the things you've mentioned your testers doing, like putting more copies of robot.step elsewhere, or with different timesteps.  Instead, for us, the robot.step(timestep) part of the loop kind of just faded into the background, and the main thing we/they would think about is just trying to figure out what the current optimal motor speeds should be at the current time, given current sensor readings and remembered information.



I actually think the frequent calls to robot.step make it feel more like a dynamical system to me, since all your controller ever does is basically nudge the motor speeds in a desired direction, but then it loops back to get new sensory inputs and the chance to send updated motor commands even before the preceding commands have fully taken effect.   The trickier challenge, for us, has been shifting from an intuitive serial procedural mindset (first do A, then do B, then do C...) to a mindset that involves more "living in the now" and figuring out at each timestep what the best thing to do at that moment is.



I also think it helped a lot starting them out with Braitenburg vehicles, since that is a rewarding way to get interesting behavior from a simple setup, and since that helps to engender this sort of "living in the now" mindset, so that when you advance to doing more complex tasks, you're thinking about your controller's role in the right way.

##### adiagr 12/20/2020 07:06:31
Hello everyone. Is there a way I can use a pyc file for a controller.

Theoretically, I believe, running the following two commands should have the same effect

python controller.py

python controller.pyc



But webots specifically looks for the py extension as far as I know.



Does anyone know a workaround to this? Thanks in advance!

##### nelsondmmg 12/20/2020 10:47:37
Hi, is it possible to change the acceleration of a vehicle when the cruising speed is being used to control it (which is calculated using the time0to100 constant in the PROTO file) ? I did not found any function in the driver and car objects to do it. Would it be possible to create such function ?

##### rash 12/20/2020 16:54:50
Hi there, so I review multiple webots world files. Some of the worlds when clicked on automatically spawn the webots app while the others dont spawn the application. Is there a reason as to why this happens?


Could I advise the indviduals sending in the files to do something so that I can simply open their webots app by just clicking on their world ?

##### Lucifer2 12/21/2020 07:55:19
Hi, Is it possible to access the webots camera using opevCV library? If possible how?

##### Darko Lukić [Cyberbotics] 12/21/2020 08:01:57
`@Lucifer2` Here are two examples implemented in Python:



Lane follower with Tesla:

[https://github.com/lukicdarkoo/webots-example-lane-follower](https://github.com/lukicdarkoo/webots-example-lane-follower)



Visual tracking with TurtleBot:

[https://github.com/lukicdarkoo/webots-example-visual-tracking](https://github.com/lukicdarkoo/webots-example-visual-tracking)



This is the part of the code you are interested in:

[https://github.com/lukicdarkoo/webots-example-lane-follower/blob/a9515f3dea9c5867428b03ff2870f654beef9b15/controllers/lane\_follower/lane\_follower.py#L17-L18](https://github.com/lukicdarkoo/webots-example-lane-follower/blob/a9515f3dea9c5867428b03ff2870f654beef9b15/controllers/lane_follower/lane_follower.py#L17-L18)

##### Lucifer2 12/21/2020 08:23:35
Thank you `@Darko Lukić`

##### Stefania Pedrazzi [Cyberbotics] 12/21/2020 08:54:18
The Driver library currently doesn't contain any function to change the acceleration. It should not be difficult for you to add this new API function but note that the maximum acceleration is limited by the Motor acceleration field value of the car model that is set using the `time0To100` value.

Another option would be to edit the car PROTO model so that the `time0To100` field is visible in the scene tree and then modify it using the Supervisor API. This however will regenerate the car object and would probably not be the best option if the car is moving.


Webots currently only detects and runs `.py` files. But you can run your `.pyc` controller file using the "Extern controller" functionality:

[https://www.cyberbotics.com/doc/guide/running-extern-robot-controllers](https://www.cyberbotics.com/doc/guide/running-extern-robot-controllers)


There should not be any reason why some files works difference, and if the default application is correctly set then double-clicking on any Webots WBT file should automatically open the Webots application. Maybe you should check on your system which is the default application set for the specific world file and/or change the settings of your system so that the WBT extension is always open with Webots.

##### Götz 12/21/2020 15:49:43
Hi all, I've decided to try modelling the GoPiGo3 robot myself for use in Webots. Being fairly new to 3D stuff I'm using Shapr3d which is pretty amazing for non-experts I'd say. So I've got a pretty decent looking model now and just need to get it into Webots. Well... exporting as OBJ and then using as mesh in Webots works fine... but without any colors I used while creating it. Dooh. So could anybody give a hand about what the best format/way would be to get the models into Webots w/o loosing coloring? Shapr can export to a number of formats like STL, OBJ, USDZ, STEP, IGES. But I don't really know which format would be most suited...


Yes, should have tested before I spent hours on 3d-modelling...

##### Olivier Michel [Cyberbotics] 12/21/2020 16:21:30
I would recommend you to export OBJ files for the shapes and then to use PBR appearances in Webots for materials (plastic parts, metallic parts, etc.). You may create your own PBR appearance nodes if you need something specific to the robot. By the way can you post a screenshot of the 3D model you have?

##### Götz 12/21/2020 16:23:09
But then I have to separate objects, right? Like the (to be) black tire into one OBJ and the (to be) yellow rim into another?



%figure
![IMG_001.jpg](https://cdn.discordapp.com/attachments/565154703139405824/790616764064464906/IMG_001.jpg)
%end


Still stuff missing, but it's kind of fun...


Here I've used a couple of separate OBJ's. This is fine for the larger parts but e.g. the Raspi would be a nightmare...:
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/790617322200104970/unknown.png)
%end

##### Olivier Michel [Cyberbotics] 12/21/2020 16:31:01
Yes, in that case, you would have to separate objects which have different materials (likes the pneumatic from the yellowish wheel structure)


Can you post a screenshot of the Raspberry Pi details?


You could group all the objects with the same material (i.e., IC) into a single object.


You can also create a texture with bump mapping for the Raspberry (PBC part)

##### Götz 12/21/2020 16:34:06

%figure
![IMG_001_1.jpg](https://cdn.discordapp.com/attachments/565154703139405824/790618110796365824/IMG_001_1.jpg)
%end


Got this one from Thingyverse or something.

##### Olivier Michel [Cyberbotics] 12/21/2020 16:34:48
I believe you can group all the grey parts (connectors) into a single object.


And use a metallic appearance on it.

##### Götz 12/21/2020 16:35:39
Okay, so I take it there is no easy way to "just get the colors with the object" format? 😉

##### Olivier Michel [Cyberbotics] 12/21/2020 16:35:59
Not sure...

##### Götz 12/21/2020 16:36:42
Thanks a lot, I guess I'll start separating obejcts.

##### Olivier Michel [Cyberbotics] 12/21/2020 16:42:34
You might want to use a PRB texture like this one for the PCB: [https://www.textures.com/download/pbr0311/134394](https://www.textures.com/download/pbr0311/134394)


Or use an model already textured like this one: [https://sketchfab.com/3d-models/raspberry-pi-3-2d308283fc0f4d27b81f17a2793c5c4d](https://sketchfab.com/3d-models/raspberry-pi-3-2d308283fc0f4d27b81f17a2793c5c4d)

##### Götz 12/21/2020 16:53:17
Okay, so all this 3d-looking surface is a texture? And will stay looking like this in Webots rendering?


Have to learn about textures next, so...

##### Olivier Michel [Cyberbotics] 12/21/2020 16:54:10
Yes, Webots has PBR materials, which makes that those textures will look very nice in Webots.


See [https://cyberbotics.com/doc/guide/appearances#pcb](https://cyberbotics.com/doc/guide/appearances#pcb) for example.


This one should be easy to reuse, but won't match exactly the PCB of the Raspberry Pi.

##### GPCExplorer 12/21/2020 21:09:59
Hi, I have a question (more a problem). I'm working on Ubuntu 18.04 and I have a partition shared with Windows and Ubuntu. In such partition there's a project of mine that I can run with no problems on Windows, but on Ubuntu I can't access to (says permission denied) How could I set Webots permissions to access the files in such partition?

##### row 12/22/2020 01:24:20
Hi! I am trying to simulate an environment with multiple robots. Is it possible for me to implement a timer for each robot? I want to log how much time has passed for each robot for certain triggered events. The timers need to be independent of each other.


Can getTime() be used to satisfy this requirement?  It is a method for each robot object.


Assume your windows partition is not encrypted by bit locker, I think you need to install a driver on Ubuntu to read NTFS format in order to perform read and write.


An alternative method is to install Dropbox on both windows and Ubuntu and let the cloud to sync the folder. I use this method for my Mac and windows computers.

##### Olivier Michel [Cyberbotics] 12/22/2020 06:30:39
Yes `getTime()` should do the trick to implement independent timers on each robot.

##### Master.L 12/22/2020 07:12:23
Can I run the actual robot test and then load the saved data into the simulation for data analysis?

I want to proceed by creating a robot window or a external gui.

##### Darko Lukić [Cyberbotics] 12/22/2020 07:40:16
`@Master.L` You can load the saved data into the simulation. You can give us more details, so we can give you guidelines

##### Master.L 12/22/2020 08:59:48
Hi! Darko Lukić 

I found the motion editor in the robotics op example.

The motion editor is like a gui made based on qt.

Can I customiz the motion editor using qtcreator?


I would like to implement a similar function to the motion editor tab.

The angle value of each joint of the actual robot is saved as a file of a specific format and loaded in the motion editor to reproduce the movement of the time I want in the simulation.

##### Darko Lukić [Cyberbotics] 12/22/2020 09:09:22
Anything will work. Depending on your use-case it may be even easier to develop an external controller with GUI. If you want well integrated GUI into Webots I would recommend you to write a robot window based on HTML5/JavaScript.

##### Master.L 12/22/2020 09:11:58
How can I connect with webots if i develop external controller with qtcreator?

##### Darko Lukić [Cyberbotics] 12/22/2020 09:29:46
You code the external controller in same way as the controller in Webots. You only need to make sure the Webots header files and libraries are included in your project:

[https://cyberbotics.com/doc/guide/running-extern-robot-controllers?tab-language=c++](https://cyberbotics.com/doc/guide/running-extern-robot-controllers?tab-language=c++)

##### Master.L 12/22/2020 09:32:56
Thank you Darko Lukić!, I'll try it and ask again if there's anything I don't know.

##### Wesztman 12/22/2020 16:01:18
<#565154703139405824> Hi everyone! 



I´m new to Webots and have been sitting today trying out the windows application with Python.



I however would prefer to do my programming in VSCode and start my python program in WSL, while being able to visualize the result in Webots on the Windows side 🙂 is there any possibility to do this?

##### Darko Lukić [Cyberbotics] 12/22/2020 16:04:11
`@Wesztman` Does something like this work for you? [https://techcommunity.microsoft.com/t5/windows-dev-appconsult/running-wsl-gui-apps-on-windows-10/ba-p/1493242](https://techcommunity.microsoft.com/t5/windows-dev-appconsult/running-wsl-gui-apps-on-windows-10/ba-p/1493242)

##### Wesztman 12/22/2020 16:13:05
Maybe that together with this [https://cyberbotics.com/doc/guide/running-extern-robot-controllers?tab-language=python&tab-os=linux](https://cyberbotics.com/doc/guide/running-extern-robot-controllers?tab-language=python&tab-os=linux) would be able to handle it? 🤔  Someone with VSCode extension knowledge should come and write an extension which connects to a remote Webots GUI window and gives you the play, pause, reset buttons directly in VSCode on the WSL side 😉


Maybe I can do it directly with extern controller 🤔  since I have direct access to my WSL root folder in windows I could make a webots project folder there and open the world file in windows while running the program in WSL

##### Darko Lukić [Cyberbotics] 12/22/2020 16:21:17
In some cases, it is possible to run controller independent from Webots (external controller), but you need to be able to share files and memory. However, I am not sure whether it is possible to do that with WSL

##### Wesztman 12/22/2020 16:22:03
l'll try it out and report back if I can get it to work 😉

##### Darko Lukić [Cyberbotics] 12/22/2020 16:22:41
It would be a great contribution! You can use the supervisor controller for that

##### Master.L 12/22/2020 16:54:32
I would like to implement delta robot simulation with webots. How can I make a delta robot model? Do you have any examples of delta robots?

##### Olivier Michel [Cyberbotics] 12/22/2020 16:55:51
Not really, but it should be doable. The closest thing to a delta robot we currently have is the Steward Platform from which you can take inspiration.


[https://cyberbotics.com/doc/guide/samples-demos#stewart\_platform-wbt](https://cyberbotics.com/doc/guide/samples-demos#stewart_platform-wbt)

##### Master.L 12/22/2020 17:01:14
Thanks Olivier Michel!, I will refer to that example

Also I want to convert the delta robot's .urdf file to a .proto file. We know that of the urdf joint types continuous is not supported by proto. Is there a way?

##### GPCExplorer 12/22/2020 20:11:11
I don't think is a driver issue for Ubuntu as I can access such partition through other programs, as well as save and edit files directly from such partition in NTFS. I have had scenarios in the past in which if I hibernated the PC while on Windows (or there was a windows update running), such partition is read-only, but it's not the case.


I thought about that, but I prefer to remain independent of cloud syncing as partition sharing has always worked (except for Webots). I thought it could be a permission issue, but that's a little bit over my Linux expertise

##### owongcho 12/22/2020 20:13:13
hello everyone, could you please provide suggestions on how to model a vacuum gripper in Webots?

##### Jeff K 12/22/2020 21:55:56
Did anyone resolve this thread regarding python on mac os.  I am stuck where this person left off on 11/19/2020:

prophile11/19/2020

Python 3 is installed via Homebrew so there is nothing in /Library/Frameworks/Python.framework/Versions/3.8

prophile11/19/2020

I am unsure how best to proceed from here

##### KajalGada 12/24/2020 00:04:27
I am trying to run ros2 and webots on ubuntu 20. I already installed webots 2021a and webots\_ros2 package. I also set the WEBOTS\_HOME environmental variable.



When I try to run a ros2\_webots example, it asks for webots 2020b.



Is webots 2021a not supported with ros2?


`@Jeff K` I am assuming you are trying to use Python3 for webots on Mac.



Firstly check which all versions of python and python3 you have installed. Command: brew info python



Next decide which version you want to use. Note Python3.9 doesn't work. Based on your messages, I am assuming you want to use Python3.8.



brew info python should show if you have python3.8 on your computer or not.



If not, install. Then proceed.



Find out where it is installed. Command: brew info python@3.8



Look for "Python has been installed as". This will give you the exact path where your Python 3.8 is installed and copy this path.



For me it looks like this: /usr/local/opt/python@3.8/bin/python3



In webots, go to webots > Preferences > python command. Here paste your Python3.8 path and it should work.



Reason being if you have another version of python3 that might be installed in /usr/local/python3 but webots needs exact path to know which version to use.



Hope this helps

##### yash 12/24/2020 06:08:40
Hello !

I am working on robot grasping , I wanted to know if there is any way to get the contact points when a gripper grasps an object.

##### Olivier Michel [Cyberbotics] 12/24/2020 06:35:03
Yes, from a supervisor program: [https://www.cyberbotics.com/doc/reference/supervisor#wb\_supervisor\_node\_get\_contact\_point](https://www.cyberbotics.com/doc/reference/supervisor#wb_supervisor_node_get_contact_point)

##### Master.L 12/24/2020 06:54:28
I am trying to convert a 3d model from solidworks to .wrl and import it into webots.

However, the following error occurs. Is there a workaround?

error: Skipped unknown 'Separator' node or PROTO.

##### Olivier Michel [Cyberbotics] 12/24/2020 06:56:31
This is not a fatal error and shouldn't prevent you from importing the model. You can however get rid of it by editing the .wrl file in a text editor and removing the Separator node.

##### Darko Lukić [Cyberbotics] 12/24/2020 08:06:14
We released Webots R2021a after Foxy sync, so we have to wait another Foxy sync to publish `webots_ros2` that is compatible with Webots R2021a. If you really need Webots R2021a, you can compile `webots_ros2` from source from the `master` branch:

[https://github.com/cyberbotics/webots\_ros2/wiki/Build-and-Install](https://github.com/cyberbotics/webots_ros2/wiki/Build-and-Install)

##### Miller 12/24/2020 09:53:56
Hello all, I'm trying to connect epuck2 to webots using wifi, the simulation freezes when connecting to epuck, when conected, ros controller crashes with error 'abort: api/remote\_control.c:375: Error bad request : tag 0, type -1, command 79'. Do you have any idea what might be causing the issue? Thanks!



%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/791604666784808970/unknown.png)
%end


`@Darko Lukić` `@Olivier Michel`

##### yash 12/24/2020 10:13:14
> Yes, from a supervisor program: [https://www.cyberbotics.com/doc/reference/supervisor#wb\_supervisor\_node\_get\_contact\_point](https://www.cyberbotics.com/doc/reference/supervisor#wb_supervisor_node_get_contact_point)

`@Olivier Michel`  thanks !

##### Darko Lukić [Cyberbotics] 12/24/2020 13:03:51
Hello `@Miller` , I am not sure what are you trying to achieve? Why are you trying to connect epuck2 to Webots when using ROS? You can connect to epuck2 directly using ROS:

[https://www.gctronic.com/doc/index.php/E-Puck#ROS](https://www.gctronic.com/doc/index.php/E-Puck#ROS)

##### Ragemor 12/24/2020 14:28:37
How can i move my robot to defined coordinate point or clicked by mouse?

##### Darko Lukić [Cyberbotics] 12/24/2020 14:32:52
`@Ragemor`, there is no such example provided in Webots. You have to implement the algorithm by itself, Webots is just a robot simulator. Check something like this:

[https://github.com/AtsushiSakai/PythonRobotics#path-planning](https://github.com/AtsushiSakai/PythonRobotics#path-planning)

##### Ragemor 12/24/2020 15:00:27
Thank you. I was looking for something like this.

##### KajalGada 12/24/2020 15:44:02
Thank you Darko, I will try that. 



When I am running ros2 with R2020b, I get the following error: 



Cannot open file: /tmp/webots-2514-H4tpBR/WEBOTS\_SERVER. 



Do you know anything about it?

##### Darko Lukić [Cyberbotics] 12/24/2020 15:48:16
`@KajalGada` Could you please share the full log (including commands)?

##### KajalGada 12/24/2020 16:38:28
Command: ros2 launch webots\_ros2ros2\_demos armed\_robots.launch.py



> **Attachment**: [output.txt](https://cdn.discordapp.com/attachments/565154703139405824/791706625458307100/output.txt)


I manually killed the program cause otherwise my computer hangs

##### Darko Lukić [Cyberbotics] 12/24/2020 16:42:27
Are you running ROS2+Webots in a virtual machine?

##### KajalGada 12/24/2020 16:43:15
No, I am running it on my computer where I freshly installed Ubuntu 20

##### Darko Lukić [Cyberbotics] 12/24/2020 16:45:59
```
Cannot open file: /tmp/webots-4285-VSxnYk/WEBOTS_SERVER (retrying in 2 seconds)
```

This means that the controller is looking for Webots instance and that Webots is not up and running. Therefore, your computer may not be able to run the example.



To verify, you can try to run:

```
webots /opt/ros/foxy/share/webots_ros2_demos/worlds/armed_robots.wbt --batch --mode=realtime
```

If it takes too long, it may be the cause of the problem.

##### KajalGada 12/24/2020 17:01:05
Was able to run it, did get the following error: OpenGL error: GL\_INVALID\_OPERATION


I installed 2020b\_rev1 and was able to get it working. The robots didnt load so I will have dig deeper to find out why the robots didn’t show up. If you have any suggestions, do tell. 



Also thank you for helping out so far 🙂

##### Darko Lukić [Cyberbotics] 12/24/2020 17:16:00
> The robots didnt load

The robot don't appear or the controller doesn't work?

##### KajalGada 12/24/2020 17:54:23
The robot didnt appear

##### Moha 12/26/2020 11:43:17
hi guys



I have a problem with using Matlab in Webots.

When I try to open Webots sample projects for this purpose like nao\_matlab or e\_puck, it gives the following error. 



This is while I added MATLAB to  PATH environment variable and also studied the Webots' User guide (Matlab section) and did other things like installing  MATLAB MinGW-w64 C/C++ Compiler, but I still get this error.



nobody knows the solution to solve this ?
%figure
![Untitled.jpg](https://cdn.discordapp.com/attachments/565154703139405824/792356861654466570/Untitled.jpg)
%end

##### DDaniel [Cyberbotics] 12/26/2020 12:17:15
Which version of MATLAB are you using? I take that you can launch MATLAB from cmd without issue?

##### Moha 12/26/2020 12:18:09
hi, R2020a. Yes it runs by cmd without any problem

##### DDaniel [Cyberbotics] 12/26/2020 13:11:29
`@Moha` If you also launch webots from the terminal rather than the icon, does it still fail?

##### Moha 12/26/2020 13:32:22
`@DDaniel` Yes, it fails too

##### ilTac 12/27/2020 12:46:08
Hi guys, i'm wrtiting my thesis for my degree and i would like to use Webots for some simulation but i'm facing some problems, can someone help me? I'm trying to understand the software making some simple simulation but when i add the e-puck robot e start the simulation this error appears:  The application was unable to start correctly (0xc000007b). click OK to close the application


and then this in the console:
%figure
![controller_crushed.jpg](https://cdn.discordapp.com/attachments/565154703139405824/792735180002557952/controller_crushed.jpg)
%end


same error appears if i try to run the sample simulation of C++


plus i always have this error when try to work with java
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/792755636538310666/unknown.png)
%end


I'm very sorry for all the questions but i really need help for my thesis. I would like to use java since is the language i know the most


with Python, for now, i have no problem

##### Simon Steinmann [Moderator] 12/27/2020 14:10:12
[https://www.cyberbotics.com/doc/guide/language-setup](https://www.cyberbotics.com/doc/guide/language-setup)


give this a read


you usually have to set system PATH variables and such

##### ilTac 12/27/2020 14:11:47
already done all of this sadly, plus i saw almost all the post here from previous year of people having the same issues but nothing worked on me

##### Simon Steinmann [Moderator] 12/27/2020 14:13:16
it says something about 32 bit in your error message. Perhaps install the 64bit versions of Java


and Java is added in your PATH variable?

##### ilTac 12/27/2020 14:16:01

%figure
![path.jpg](https://cdn.discordapp.com/attachments/565154703139405824/792757687648518224/path.jpg)
%end



%figure
![versione_java.jpg](https://cdn.discordapp.com/attachments/565154703139405824/792757692968075294/versione_java.jpg)
%end


the java error in English (i didn't notice it was in Italian): javacontroller.dll: %1 is not a valid Win32 application

##### Simon Steinmann [Moderator] 12/27/2020 14:19:49
I'd suggest reinstalling java and as 64 bit


or is it 64 already?


maybe webots requires 32 bit... that would be a problem


> In order to develop and run Java controllers for Webots it is necessary to have the 64-bit version of the Java Development Kit (JDK) version 1.8 or later.


[https://www.oracle.com/java/technologies/javase-jdk15-downloads.html](https://www.oracle.com/java/technologies/javase-jdk15-downloads.html)

##### ilTac 12/27/2020 14:23:04
yes i have this version, i download windowx x64 installer

##### Simon Steinmann [Moderator] 12/27/2020 14:23:37
can you launch "java" in the command line?


nvm, you posted that already


did you restart webots after installing all that?

##### ilTac 12/27/2020 14:32:56
yes i did, i restarted the pc as well but the error still appears


the only thing i cannot understand in the guide you posted is this


If your default java command points to a 32-bit version of Java, Webots may display an error message that looks like this:



Native code library failed to load. See the chapter on Dynamic Linking

Problems in the SWIG Java documentation for help.


maybe my default java command points to a 32-bit version on Java? i don't know how to check that but i'm sure i have the latest java version (installed from the link you also posted here)

##### Simon Steinmann [Moderator] 12/27/2020 14:37:43
maybe there is a seperate java variable in the system PATH (not the user PATH)


down here
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/792763376224436224/unknown.png)
%end

##### ilTac 12/27/2020 14:40:52

%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/792763941221695509/unknown.png)
%end


there is this


should i try to delete?

##### Simon Steinmann [Moderator] 12/27/2020 14:42:31
yeah, that might be your culprit

##### ilTac 12/27/2020 14:53:02
sadly the problem still persist


that file is the problem
%figure
![unknown.png](https://cdn.discordapp.com/attachments/565154703139405824/792767061386330142/unknown.png)
%end

##### Simon Steinmann [Moderator] 12/27/2020 14:54:04
Maybe one of the devs can help. I'm not familiar with java

##### ilTac 12/27/2020 14:54:52
Ok i'll wait and see if anyone can help! Thank you for your time!!

##### Chernayaten 12/27/2020 20:24:32
Hello, can someone explain how the lidar point cloud works? From what I understand it is supposed to show the "points" (when using the optional rendering option), but even in the lidar.wbt example it does it only for a little bit. Shouldn't it be doing it constantly?

##### ouur 12/28/2020 19:28:23
Hi. I have multiple robot and i want to control them with only one supervisor controller. So i created a cube  as a supervisor robot and set true to it's supervisor field. But if i don't add my controller to every robots they don't not move. Any idea? Thank you for your time.

##### Simon Steinmann [Moderator] 12/28/2020 19:37:16
You should have a controller per robot, much easier that way

##### DDaniel [Cyberbotics] 12/28/2020 19:37:21
The robots still needs to have controllers, what you can do is use emitters/receivers to exchange information between the supervisor and the single robots in order to make their behavior "unique".

##### ouur 12/28/2020 19:50:19
Thanks. The other problem with that when i add same controller to every robot its going to same direction but direction is determined with random function. So what is the problem you think?

##### Simon Steinmann [Moderator] 12/28/2020 20:04:24
depends on how you implemented your random function


there is a seed field in the world info that affects random things in webots

##### DDaniel [Cyberbotics] 12/28/2020 20:26:03
Just tested with 2 robots and a srand(time(NULL)) seed, and both controllers generate the same numbers. So once again it'd be better to have just the supervisor come up with the directions and having them sent out to the robots. You can look up the advanced\_particle\_swarm\_optimization.wbt example for inspiration, it covers both your questions

##### Simon Steinmann [Moderator] 12/28/2020 20:29:19
perhaps rework your randomization

##### ouur 12/28/2020 21:17:32
okey i will read that. thanks for help!

##### Çağrı Kaymak 12/29/2020 06:43:24
Hi everyone, In Robotis-OP2, gyroscope and accelerometer data were read from ADC in 10bit. But in Robotis-OP3 the accelerometer data is of type m/s^2, and this is quite understandable. But when I look at the gyroscope data, it reads the unit as rad/m^2. This is a very meaningless unit. I'm so confused. Do you have any idea? Thanks in advance



%figure
![gyro.PNG](https://cdn.discordapp.com/attachments/565154703139405824/793368595811401769/gyro.PNG)
%end

##### Olivier Michel [Cyberbotics] 12/29/2020 09:54:20
Since time(NULL) returns the UNIX epoch (time since 1970 expressed in second), it is very likely all controllers will get the same value as they are likely started during the same second. Hence, they will generate the exact same random number sequence.


If you want a different sequence for each controller, you should pass each controller a different value (using the `Robot.controllerArgs` parameter) that will be used to seed the random number generator. This will create a reproducible simulation (the same sequences will be generated at each simulation run).


If you want non-reproducible simulations, simply add `time(NULL)` to the seed (assuming that you launch a new simulation at least one second after the previous one).


Alternatively, you may use a system function that returns milliseconds or nanoseconds instead of seconds.

##### ouur 12/29/2020 10:16:32
Thank you. Now i understand the problem better.

##### Simon Steinmann [Moderator] 12/29/2020 11:08:22
The unit for the gyro sensor should be rad/s. Maybe the units are simply labeled incorrectly.

##### Çağrı Kaymak 12/29/2020 13:17:45
Many thanks

##### Olivier Michel [Cyberbotics] 12/29/2020 13:59:46
This should be fixed here: [https://github.com/cyberbotics/webots/pull/2609](https://github.com/cyberbotics/webots/pull/2609)

##### baby\_droid\_yoda 12/29/2020 16:24:01
Hi everyone, I have two question about ikpy library but how I don't know to solve this problem. I use to ikpy library inside DHLink class but there is mistake about it.  I did add my code but it is giving a mistake ***link.py", line 208, in \_\_init\_\_

    Link.\_\_init\_\_(self, use\_symbolic\_matrix)*** . How do I solve this problem ? Other problem, I use the ikpy library on URDFLink but I don't understand **translation\_vector**. how do we calculate it ?

##### Simon Steinmann [Moderator] 12/29/2020 16:26:30
`@baby_droid_yoda` ikpy is very slow, cannot fully solve orientation and often has bad solutions. I'd recommend IKFast if you have a 6 DOF robotic arm. `@Darko Lukić` has created a fantastic docker based solver generator and I made a very solid python implementation. What robot are you using?

##### baby\_droid\_yoda 12/29/2020 16:34:44
I don't know the IKFast but I may learn this library. I using BCN3D Moveo robot arm.

##### Simon Steinmann [Moderator] 12/29/2020 16:35:32
how many DOF does it have?


DOF = degrees of freedom = number of joints

##### baby\_droid\_yoda 12/29/2020 16:37:48
it has 5 dof but I don't know how to improve this library.

##### Simon Steinmann [Moderator] 12/29/2020 16:37:49
with normal hingejoints that is


what exactly is it that you want to do?

##### baby\_droid\_yoda 12/29/2020 16:40:39
I am improving mobil robot like kuka youbot but I don't understand the library.

##### Simon Steinmann [Moderator] 12/29/2020 16:41:35
I'll pm you

##### brettle 12/29/2020 18:15:11
Hi all. I'd like to be able to use the GUI or a PROTO to attach some configuration info to devices such that the info can be accessed by a non-supervising robot controller. Any suggestions on how to achieve that? It looks like a non-supervising robot controller can't access any fields of a device. Is there some other mechanism for attaching config info to devices which the controller can access?

##### Simon Steinmann [Moderator] 12/29/2020 18:16:42
`@brettle` use the customData Field


[https://www.cyberbotics.com/doc/reference/robot#wb\_robot\_get\_custom\_data](https://www.cyberbotics.com/doc/reference/robot#wb_robot_get_custom_data)


`PROTO myRobot [

  field SFString   customData      "you default config data"                    # Is `Robot.customData`.`


put this in the header of the proto file

##### brettle 12/29/2020 18:25:10
But that's customData associated with the robot as a whole, not with a particular device.

##### Simon Steinmann [Moderator] 12/29/2020 18:26:27
what exactly do you want to accomplish?

##### brettle 12/29/2020 18:32:56
I want the user to be able to add a device (probably via a PROTO), configure it with some info (presumably via fields), and then have the controller be able to access that info. For example, the configuration info might indicate that this particular device would be connected to PWM port 3 on the roboRIO embedded computer that the controller is attempting to emulate.

##### Simon Steinmann [Moderator] 12/29/2020 18:34:11
you can put anything you want into the custom data field and have your controller translate it. I dont think it is trivial to add that functionality

##### brettle 12/29/2020 18:35:04
But again, that custom data field is attached to the Robot node, not each Device node.

##### Simon Steinmann [Moderator] 12/29/2020 18:35:18
but you can edit it from the GUI


what device and settings are we talking about?

##### brettle 12/29/2020 18:35:54
Can I use the "model" string to do what I want? How is it represented in the wbt?

##### Simon Steinmann [Moderator] 12/29/2020 18:36:08
Iwas just looking at that


might work


the device needs a 'model' field


\webots\projects\devices


take a look at the protos in this location


maybe you can use those as a guide


I still think you should do it via the Robot though. A device is a building block, how you connect and controll it, is usually defined in the robot

##### brettle 12/29/2020 19:06:11
If I could declare PROTO fields that are arrays or maps, that would be more practical. But as it stands, it looks like the user would need to edit a specially formatted string that specified all the connections. By attaching the connection info to the device, that isn't needed.


If I'm reading the docs right, the 'model' approach will only work for `SolidDevice`s. Unfortunately, most of the devices I'm interested (`Motor`s, `PositionSensor`s, etc) are `Device`s but not `SolidDevice`s.


So far, the best I can come up with is using a PROTO to mangle the names of encapsulated `Device`s such that they contain the config info, but that seems pretty ugly.

##### Simon Steinmann [Moderator] 12/29/2020 19:46:25
a "solid" device is the general one, it can have other devices such as cameras, laser sensors etc included


think of them as a robot part you can attach

##### Jeff K 12/30/2020 00:30:47
Yay!!  Works now. The problem was that python3.8.2 was installed in some system directory on my Mac and the path was not valid for Webots.  I took your advice and re-installed python3: "brew install python@3.8". Then the path "/usr/local/opt/python@3.8/bin/python3" was valid.  Thank you for your help.

##### brettle 12/30/2020 00:40:57
But I don't see how to create a PROTO derived from an Device that isn't a SolidDevice but allows me to access a model. For example, I tried this:

```
#VRML_SIM R2021a utf8

PROTO MotorWithModel [
    unconnectedField SFString model "my model"
] {
    RotationalMotor {
        name "motor"
    }
}
```

and `getModel()`  did not return `my model` for any devices.


More specifically, I want to be able to attach my PROTO to a `HingeJoint`s instead of the built-in `RotationalMotor`. That means that my PROTO needs to inherit from `RotationalMotor`, but since `RotationalMotor` is not a `SolidDevice` I can't associate a model with it.

##### Miller 12/30/2020 03:55:36
`@Darko Lukić` Hello, I'm trying to connect to epuck via wifi and once connected I got this error. I'm using ROS to get supervisor service at the same time, is it possible that there is confliction between supuvisior service and the webots wifi connection api? Also where can I find the remote\_control.c file? Thanks!
%figure
![connected_to_epuck.png](https://cdn.discordapp.com/attachments/565154703139405824/793688716241272832/connected_to_epuck.png)
%end


This is error I got from ROS
%figure
![Screenshot_from_2020-12-30_11-55-42.png](https://cdn.discordapp.com/attachments/565154703139405824/793688894368907314/Screenshot_from_2020-12-30_11-55-42.png)
%end

##### yash 12/30/2020 06:46:29
hello ! I am using the supervisor function ----def getContactPoint(self, index): to get the contact point. What does the index specify here ? And how to define the solid whose contact point I want ?     

 And is it necessary that the solid whose contact point I want to get should not have another soild node as a parent.?

##### nelsondmmg 12/30/2020 14:19:56
Sorry, I only had time to look around this question now. When the set\_cruising\_speed is used it changes the speed for each motor in each wheel. The motor object itself has a set\_acceleration method, which I could just add a new call inside the driver object but I would like to understand how the proto file is being interpreted to configure the vehicle (more specifically how the time0to100 is used). Can I just create this function call to  wb\_motor\_set\_accelerationackerm to each wheel assuming that the acceleration in time0to100 is called only in the initialization ? Thanks

##### Çağrı Kaymak 12/31/2020 10:08:06
Hi everyone, I get the gyroscope and accelerometer data of Robotis OP2 in float data type (like 511.98) in Webots environment, while I get int data type (like 512) in real robot. For 10 bit ADC, I could not understand why the data was taken in float type. If anyone knows the reason, I would be glad if it helps. Thank you in advance for your interest.

##### Simon Steinmann [Moderator] 12/31/2020 11:45:13
The controller is probably just rounding. You could either just round the value, or change the resolution of the sensor. Most sensor data is a float by default.

##### Çağrı Kaymak 12/31/2020 13:26:55
Ok, many thanks👍

##### RoboCoder 12/31/2020 21:38:56
Hi everyone, I keep getting this error when trying to run the "pedestrian" example: WARNING: "python.exe" was not found.

Webots requires Python version 3.9, 3.8, 3.7 or 2.7 (64 bit) from python.org in your current PATH.

To fix the problem, you should:

1. Check the Python command set in the Webots preferences.

2. Check the COMMAND set in the [python] section of the runtime.ini file of your controller program if any.

3. Fix your PATH environment variable to use the required Python 64 bit version (if available).

4. Install the required Python 64 bit version and ensure your PATH environment variable points to it.


how can I fix this? Adding an environment variable with Python.exe doesn't seem to work.

##### Chernayaten 12/31/2020 21:46:23
What version is your python?

