#VRML_SIM R2022b utf8
# license: Copyright Cyberbotics Ltd. Licensed for use only with Webots.
# license url: https://cyberbotics.com/webots_assets_license
# This PROTO allows the Collada (.dae) files to be referenced.
# template language: javascript

PROTO ColladaShapes [
  field SFString url ""    # URL of a Collada file (similar to ImageTexture node).
  field SFBool   ccw TRUE  # Indicate the order of the vertices. Change this value will flip the faces of the meshes.
]
{
  %<
    let url = fields.url.value;
    if (!wbfile.fileExists(url)) {
      console.error(`The given Collada url (${url}) is not valid.`);
      url = fields.url.defaultValue;
    }

    const ccwString = (fields.ccw.value) ? "TRUE" : "FALSE";
  >%

  Group {
    children [
      %< if (url !== '') { >%
        %<= wbcollada.getVrmlFromFile(url, ccwString) >%
      %< } >%
    ]
  }
}
